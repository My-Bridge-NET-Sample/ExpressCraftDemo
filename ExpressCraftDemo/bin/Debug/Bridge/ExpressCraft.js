/**
 * @version 1.0.0.0
 * @copyright Copyright Â©  2017
 * @compiler Bridge.NET 16.2.1
 */
Bridge.assembly("ExpressCraft", function ($asm, globals) {
    "use strict";

    Bridge.define("ExpressCraft.Control", {
        statics: {
            fields: {
                ControlClass: null,
                cva: null
            },
            ctors: {
                init: function () {
                    this.ControlClass = "control";
                }
            },
            methods: {
                BaseClass: function (add, ac) {
                    if (add === void 0) { add = true; }
                    if (ac === void 0) { ac = true; }
                    return ac ? (add ? " control" : ExpressCraft.Control.ControlClass) : "";
                },
                GetImageString: function (s) {
                    return System.String.format("url('data:image/png;base64,{0}') no-repeat", s);
                },
                GetPdfString: function (s) {
                    return System.String.format("data:application/pdf;base64,{0}", s);
                },
                GetImageStringURI: function (s, useResourceURL) {
                    if (useResourceURL === void 0) { useResourceURL = true; }
                    return System.String.format("url('{0}{1}') no-repeat", useResourceURL ? ExpressCraft.Settings.ResourceURL : "", s);
                },
                Div: function (ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement("div"), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);
                },
                Div$1: function (cn, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement("div"), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                },
                Span: function (ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement("span"), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);
                },
                Span$1: function (cn, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement("span"), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                },
                Label$2: function (Caption, X, Y, IsBold, IsTiny, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement("span"), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(Caption);
                    ExpressCraft.Helper.SetLocation(lbl, X, Y);
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label$4: function (Caption, X, Y, width, height, IsBold, IsTiny, classr, Alignment, Forecolor, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (Alignment === void 0) { Alignment = 3; }
                    if (Forecolor === void 0) { Forecolor = null; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement("span"), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(Caption);
                    ExpressCraft.Helper.SetBounds$1(lbl, X, Y, width, height);
                    if (Alignment !== "left") {
                        lbl.style.textAlign = Alignment;
                    }
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);
                    if (Forecolor != null) {
                        lbl.style.color = Forecolor;
                    }

                    return lbl;
                },
                Label$3: function (Caption, X, Y, width, IsBold, IsTiny, classr, Alignment, Forecolor, ac) {
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (Alignment === void 0) { Alignment = 3; }
                    if (Forecolor === void 0) { Forecolor = null; }
                    if (ac === void 0) { ac = true; }
                    var lbl = document.createElement("span");
                    lbl.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac));
                    lbl.textContent = Caption;
                    lbl.style.left = ExpressCraft.Helper.ToPx(Bridge.box(X, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.top = ExpressCraft.Helper.ToPx(Bridge.box(Y, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Single, System.Single.format, System.Single.getHashCode));

                    if (Alignment !== "left") {
                        if (Alignment === "right") {
                            lbl.style.direction = "rtl";
                        } else {
                            lbl.style.textAlign = Alignment;
                        }
                    }
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);
                    if (Forecolor != null) {
                        lbl.style.color = Forecolor;
                    }

                    return lbl;
                },
                Label$5: function (c, X, Y, width, height, IsBold, IsTiny, classr, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement("span"), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(c);
                    ExpressCraft.Helper.SetBounds$1(lbl, X, Y, width, height);
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label$1: function (c, X, Y, width, IsBold, IsTiny, classr, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement("span"), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(c);
                    ExpressCraft.Helper.SetLocation(lbl, X, Y);
                    lbl.style.width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label: function (c, X, Y, IsBold, IsTiny, ac) {
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (ac === void 0) { ac = true; }
                    return ExpressCraft.Control.Label$2(c, X, Y, IsBold, IsTiny, ac);
                },
                DivLabel: function (Caption, X, Y, width, IsBold, IsTiny, classr, Alignment, Forecolor, ac) {
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (Alignment === void 0) { Alignment = 3; }
                    if (Forecolor === void 0) { Forecolor = null; }
                    if (ac === void 0) { ac = true; }
                    var lbl = document.createElement("div");
                    lbl.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac));
                    lbl.textContent = Caption;
                    lbl.style.left = ExpressCraft.Helper.ToPx(Bridge.box(X, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.top = ExpressCraft.Helper.ToPx(Bridge.box(Y, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Single, System.Single.format, System.Single.getHashCode));

                    if (Alignment !== "left") {
                        if (Alignment === "right") {
                            lbl.style.direction = "rtl";
                        } else {
                            lbl.style.textAlign = Alignment;
                        }
                    }
                    if (IsBold) {
                        lbl.style.fontWeight = "bold";
                    }
                    if (IsTiny) {
                        lbl.style.fontSize = "6.75pt";
                    }
                    if (Forecolor != null) {
                        lbl.style.color = Forecolor;
                    }

                    return lbl;
                },
                SetBT: function (lbl, IsBold, IsTiny) {
                    if (IsBold) {
                        lbl.style.fontWeight = "bold";
                    }
                    if (IsTiny) {
                        lbl.style.fontSize = "6.75pt";
                    }
                },
                ComboBox: function (cn, ct, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    var combo = ($t = document.createElement("select"), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                    if (ct === ExpressCraft.ComboBoxTypes.Default) {
                    }
                    return combo;
                },
                Button: function (cn, bt, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement("button"), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t.type = bt, $t);
                },
                Input: function (cn, it, ac) {
                    if (ac === void 0) { ac = true; }
                    var input = document.createElement("input");
                    input.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(cn), ac));
                    var ty = it;
                    if (Bridge.Browser.isIE && (Bridge.referenceEquals(ty, "text") || Bridge.referenceEquals(ty, "date") || Bridge.referenceEquals(ty, "color") || Bridge.referenceEquals(ty, 19) || Bridge.referenceEquals(ty, 3) || Bridge.referenceEquals(ty, 2))) {
                        return input;
                    }
                    input.type = it;

                    return input;
                },
                /**
                 * Returns Text Metrics for a given string
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Control
                 * @memberof ExpressCraft.Control
                 * @param   {string}         t    the string
                 * @param   {string}         f    the font used
                 * @return  {TextMetrics}         TextMetrics
                 */
                GetTextMetrics: function (t, f) {
                    var $t;
                    if (Bridge.referenceEquals(f, "")) {
                        f = "8.25pt Tahoma";
                    }
                    var c = (ExpressCraft.Control.cva || (($t = document.createElement("canvas"), ExpressCraft.Control.cva = $t, $t))).getContext("2d");
                    c.font = f;
                    return c.measureText(t);
                },
                /**
                 * Returns text width
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Control
                 * @memberof ExpressCraft.Control
                 * @param   {string}    t    the string
                 * @param   {string}    f    the font used
                 * @return  {number}         double
                 */
                GetTextWidth: function (t, f) {
                    return ExpressCraft.Control.GetTextMetrics(t, f).width;
                },
                op_Implicit: function (control) {
                    if (ExpressCraft.Settings.AutoRender && !control.HasRendered) {
                        control.Render();
                    }
                    return control.Content;
                }
            }
        },
        fields: {
            Content: null,
            Name: null,
            HasRendered: false,
            _toolTip: null,
            _OnMouseEnterToolTip: null,
            _OnMouseLeaveToolTip: null,
            OnResize: null,
            OnLoaded: null,
            ContextMenu: null,
            LinkedForm: null
        },
        props: {
            ToolTip: {
                get: function () {
                    return this._toolTip;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._toolTip, value)) {
                        if (value != null) {
                            if (value.AttachedControl != null && !Bridge.referenceEquals(value.AttachedControl, this)) {
                                value = null;
                            } else {
                                value.AttachedControl = this;
                            }
                        }
                        this._toolTip = value;

                        if (this._toolTip != null && (!ExpressCraft.Helper.IsEmpty(this._toolTip.Heading) || !ExpressCraft.Helper.IsEmpty(this._toolTip.Description))) {
                            this._OnMouseEnterToolTip = Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f1);
                            this._OnMouseLeaveToolTip = Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f2);

                            this.Content.addEventListener("mouseenter", this._OnMouseEnterToolTip);
                            this.Content.addEventListener("mouseleave", this._OnMouseLeaveToolTip);
                            return;
                        }

                        if (!Bridge.staticEquals(this._OnMouseEnterToolTip, null)) {
                            this.Content.removeEventListener("mouseenter", this._OnMouseEnterToolTip);
                            this._OnMouseEnterToolTip = null;
                        }
                        if (!Bridge.staticEquals(this._OnMouseLeaveToolTip, null)) {
                            this.Content.removeEventListener("mouseleave", this._OnMouseLeaveToolTip);
                            this._OnMouseLeaveToolTip = null;
                        }
                    }
                }
            },
            Style: {
                get: function () {
                    return this.Content.style;
                }
            },
            ClassList: {
                get: function () {
                    return this.Content.classList;
                }
            },
            Width: {
                get: function () {
                    return this.Content.style.width;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(this.Content.style.width, x)) {
                        this.Content.style.width = x;
                        this.OnSizeChanged();
                    }
                }
            },
            Height: {
                get: function () {
                    return this.Content.style.height;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(x, this.Content.style.height)) {
                        this.Content.style.height = x;
                        this.OnSizeChanged();
                    }
                }
            },
            Left: {
                get: function () {
                    return this.Content.style.left;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(x, this.Content.style.left)) {
                        this.Content.style.left = x;
                        this.OnLocationChanged();
                    }
                }
            },
            Top: {
                get: function () {
                    return this.Content.style.top;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(this.Content.style.top, x)) {
                        this.Content.style.top = x;
                        this.OnLocationChanged();
                    }
                }
            },
            Size: {
                get: function () {
                    return new ExpressCraft.Vector2.$ctor1(this.Width, this.Height);
                },
                set: function (value) {
                    this.Width = value.X;
                    this.Height = value.Y;
                }
            },
            Location: {
                get: function () {
                    return new ExpressCraft.Vector2.$ctor1(this.Left, this.Top);
                },
                set: function (value) {
                    this.Left = value.X;
                    this.Top = value.Y;
                }
            },
            Bounds: {
                get: function () {
                    return new ExpressCraft.Vector4.$ctor1(this.Left, this.Top, this.Width, this.Height);
                },
                set: function (value) {
                    this.Left = value.X;
                    this.Top = value.Y;
                    this.Width = value.Z;
                    this.Height = value.M;
                }
            }
        },
        ctors: {
            init: function () {
                this.HasRendered = false;
            },
            $ctor1: function (ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Div(ac);
            },
            ctor: function (element) {
                this.$initialize();
                this.Content = element;
            },
            $ctor5: function (cn, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Div$1(cn, ac);
            },
            $ctor2: function (cn, bt, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Button(cn, bt, ac);
            },
            $ctor4: function (cn, ct, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.ComboBox(cn, ct, ac);
            },
            $ctor3: function (cn, it, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Input(cn, it, ac);
            }
        },
        methods: {
            SetAttribute: function (name, value) {
                this.Content.setAttribute(name, ExpressCraft.Helper.ToStr(value));

                return this;
            },
            GetAttribute: function (name) {
                return this.Content.getAttribute(name);
            },
            GetAttributei: function (name) {
                return parseInt(this.Content.getAttribute(name));
            },
            GetAttributef: function (name) {
                return parseFloat(this.Content.getAttribute(name));
            },
            OnLocationChanged: function () { },
            OnSizeChanged: function () { },
            Render: function () {
                this.HasRendered = true;
            },
            Focus: function () {
                Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f3), 0);
            },
            ChangeState: function (s, sf) {
                if (sf === void 0) { sf = "disabled"; }
                if (s) {
                    this.Content.classList.remove(sf);
                } else {
                    this.Content.classList.add(sf);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.Control", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Control, {
        f1: function (ev) {
            if (!(Bridge.is(this, ExpressCraft.ToolTipControl))) {
                ExpressCraft.Form.ActiveToolTip = this._toolTip;
            }
        },
        f2: function (ev) {
            if (!(Bridge.is(this, ExpressCraft.ToolTipControl))) {
                ExpressCraft.Form.ActiveToolTip = null;
            }
        },
        f3: function () {
            this.Content.focus();
        }
    });

    Bridge.define("ExpressCraft.AceModeTypes", {
        $kind: "enum",
        statics: {
            fields: {
                abap: 0,
                abc: 1,
                actionscript: 2,
                ada: 3,
                apache_conf: 4,
                asciidoc: 5,
                assembly_x86: 6,
                autohotkey: 7,
                batchfile: 8,
                bro: 9,
                c_cpp: 10,
                c9search: 11,
                cirru: 12,
                clojure: 13,
                cobol: 14,
                coffee: 15,
                coldfusion: 16,
                csharp: 17,
                css: 18,
                curly: 19,
                d: 20,
                dart: 21,
                diff: 22,
                dockerfile: 23,
                dot: 24,
                drools: 25,
                dummy: 26,
                dummysyntax: 27,
                eiffel: 28,
                ejs: 29,
                elixir: 30,
                elm: 31,
                erlang: 32,
                forth: 33,
                fortran: 34,
                ftl: 35,
                gcode: 36,
                gherkin: 37,
                gitignore: 38,
                glsl: 39,
                gobstones: 40,
                golang: 41,
                groovy: 42,
                haml: 43,
                handlebars: 44,
                haskell: 45,
                haskell_cabal: 46,
                haxe: 47,
                hjson: 48,
                html: 49,
                html_elixir: 50,
                html_ruby: 51,
                ini: 52,
                io: 53,
                jack: 54,
                jade: 55,
                java: 56,
                javascript: 57,
                json: 58,
                jsoniq: 59,
                jsp: 60,
                jsx: 61,
                julia: 62,
                kotlin: 63,
                latex: 64,
                less: 65,
                liquid: 66,
                lisp: 67,
                livescript: 68,
                logiql: 69,
                lsl: 70,
                lua: 71,
                luapage: 72,
                lucene: 73,
                makefile: 74,
                markdown: 75,
                mask: 76,
                matlab: 77,
                maze: 78,
                mel: 79,
                mushcode: 80,
                mysql: 81,
                nix: 82,
                nsis: 83,
                objectivec: 84,
                ocaml: 85,
                pascal: 86,
                perl: 87,
                pgsql: 88,
                php: 89,
                powershell: 90,
                praat: 91,
                prolog: 92,
                properties: 93,
                protobuf: 94,
                python: 95,
                r: 96,
                razor: 97,
                rdoc: 98,
                rhtml: 99,
                rst: 100,
                ruby: 101,
                rust: 102,
                sass: 103,
                scad: 104,
                scala: 105,
                scheme: 106,
                scss: 107,
                sh: 108,
                sjs: 109,
                smarty: 110,
                snippets: 111,
                soy_template: 112,
                space: 113,
                sql: 114,
                sqlserver: 115,
                stylus: 116,
                svg: 117,
                swift: 118,
                tcl: 119,
                tex: 120,
                text: 121,
                textile: 122,
                toml: 123,
                tsx: 124,
                twig: 125,
                typescript: 126,
                vala: 127,
                vbscript: 128,
                velocity: 129,
                verilog: 130,
                vhdl: 131,
                wollok: 132,
                xml: 133,
                xquery: 134,
                yaml: 135,
                django: 136
            }
        }
    });

    Bridge.define("ExpressCraft.AceThemeTypes", {
        $kind: "enum",
        statics: {
            fields: {
                label: 0,
                chrome: 1,
                clouds: 2,
                crimson_editor: 3,
                dawn: 4,
                dreamweaver: 5,
                eclipse: 6,
                github: 7,
                solarized_light: 8,
                textmate: 9,
                tomorrow: 10,
                xcode: 11,
                clouds_midnight: 12,
                cobalt: 13,
                idle_fingers: 14,
                kr_theme: 15,
                merbivore: 16,
                merbivore_soft: 17,
                mono_industrial: 18,
                monokai: 19,
                pastel_on_dark: 20,
                solarized_dark: 21,
                terminal: 22,
                tomorrow_night: 23,
                tomorrow_night_blue: 24,
                tomorrow_night_bright: 25,
                tomorrow_night_eighties: 26,
                twilight: 27,
                vibrant_ink: 28
            }
        }
    });

    Bridge.define("ExpressCraft.App", {
        main: function Main () {
            ExpressCraft.Settings.Setup();
        }
    });

    Bridge.define("ExpressCraft.Application", {
        statics: {
            fields: {
                MainForm: null,
                _applicationDefition: 0
            },
            props: {
                AplicationDefition: {
                    get: function () {
                        return ExpressCraft.Application._applicationDefition;
                    }
                }
            },
            ctors: {
                init: function () {
                    this._applicationDefition = ExpressCraft.ApplicationDefitnion.BridgeConsole;
                }
            },
            methods: {
                Close: function () {
                    if (ExpressCraft.Application.MainForm != null) {
                        ExpressCraft.Application.MainForm.Close();
                    }
                    window.close();
                    window.location.reload();
                },
                Run: function (_Mainform) {
                    ExpressCraft.Application.MainForm = _Mainform;
                    ExpressCraft.Application.MainForm.ShowStartNewLevel();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.ApplicationDefitnion", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                BrowserConsole: 1,
                BridgeConsole: 2,
                ExpressCraftConsole: 3
            }
        }
    });

    Bridge.define("ExpressCraft.BarcodeQuaggaJS", {
        statics: {
            fields: {
                ExternalQuaggaJS: null
            },
            ctors: {
                init: function () {
                    this.ExternalQuaggaJS = new ExpressCraft.ExternalPlugin("https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.BarcodeQuaggaJS.ExternalQuaggaJS.Setup(true, true);
                },
                DecodeSingle: function (source, onDetect, onNoDetect, locate, reader, sourceIsBase64) {
                    if (onNoDetect === void 0) { onNoDetect = null; }
                    if (locate === void 0) { locate = true; }
                    if (reader === void 0) { reader = 3; }
                    if (sourceIsBase64 === void 0) { sourceIsBase64 = false; }
                    if (!ExpressCraft.BarcodeQuaggaJS.ExternalQuaggaJS.SetupCompleted) {
                        return;
                    }

                    if (Bridge.staticEquals(onDetect, null)) {
                        return;
                    }

                    var codeName = System.Enum.format(ExpressCraft.BarcodeQuaggaJS.Readers, reader, "G").toLowerCase();
                    if (System.String.startsWith(codeName, "_")) {
                        codeName = codeName.substr(1);
                    }
                    if (sourceIsBase64 && !System.String.startsWith(source, "data:image")) {
                        source = System.String.concat("data:image/jpg;base64,", source);
                    }
                    Quagga.decodeSingle({
                        decoder: {
                            readers: [codeName] // List of active readers
                        },
                        locate: locate,
                        src: source
                    }, function(ond, onnd) {
                        return function(result){
                            if(result.codeResult) {
                                ond(result.codeResult.code);
                            } else {
                                if(onnd != null)
                                {
                                    onnd();
                                }
                            }
                        }
                    }(onDetect, onNoDetect));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.BarcodeQuaggaJS.Readers", {
        $kind: "enum",
        statics: {
            fields: {
                Code_128_Reader: 0,
                Ean_Reader: 1,
                Ean_8_Reader: 2,
                Code_39_Reader: 3,
                Code_39_Vin_Reader: 4,
                Codabar_Reader: 5,
                Upc_Reader: 6,
                Upc_e_Reader: 7,
                I2of5_Reader: 8,
                _2of5_Reader: 9,
                Code_93_Reader: 10
            }
        }
    });

    Bridge.define("ExpressCraft.Color", {
        $kind: "struct",
        statics: {
            fields: {
                Empty: null,
                StateKnownColorValid: 0,
                StateARGBValueValid: 0,
                StateValueMask: 0,
                StateNameValid: 0,
                NotDefinedValue: System.Int64(0),
                ARGBAlphaShift: 0,
                ARGBRedShift: 0,
                ARGBGreenShift: 0,
                ARGBBlueShift: 0,
                q: 0
            },
            props: {
                Transparent: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Transparent);
                    }
                },
                AliceBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.AliceBlue);
                    }
                },
                AntiqueWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.AntiqueWhite);
                    }
                },
                Aqua: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Aqua);
                    }
                },
                Aquamarine: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Aquamarine);
                    }
                },
                Azure: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Azure);
                    }
                },
                Beige: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Beige);
                    }
                },
                Bisque: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Bisque);
                    }
                },
                Black: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Black);
                    }
                },
                BlanchedAlmond: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BlanchedAlmond);
                    }
                },
                Blue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Blue);
                    }
                },
                BlueViolet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BlueViolet);
                    }
                },
                Brown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Brown);
                    }
                },
                BurlyWood: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BurlyWood);
                    }
                },
                CadetBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.CadetBlue);
                    }
                },
                Chartreuse: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Chartreuse);
                    }
                },
                Chocolate: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Chocolate);
                    }
                },
                Coral: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Coral);
                    }
                },
                CornflowerBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.CornflowerBlue);
                    }
                },
                Cornsilk: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Cornsilk);
                    }
                },
                Crimson: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Crimson);
                    }
                },
                Cyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Cyan);
                    }
                },
                DarkBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkBlue);
                    }
                },
                DarkCyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkCyan);
                    }
                },
                DarkGoldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGoldenrod);
                    }
                },
                DarkGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGray);
                    }
                },
                DarkGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGreen);
                    }
                },
                DarkKhaki: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkKhaki);
                    }
                },
                DarkMagenta: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkMagenta);
                    }
                },
                DarkOliveGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOliveGreen);
                    }
                },
                DarkOrange: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOrange);
                    }
                },
                DarkOrchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOrchid);
                    }
                },
                DarkRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkRed);
                    }
                },
                DarkSalmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSalmon);
                    }
                },
                DarkSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSeaGreen);
                    }
                },
                DarkSlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSlateBlue);
                    }
                },
                DarkSlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSlateGray);
                    }
                },
                DarkTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkTurquoise);
                    }
                },
                DarkViolet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkViolet);
                    }
                },
                DeepPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DeepPink);
                    }
                },
                DeepSkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DeepSkyBlue);
                    }
                },
                DimGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DimGray);
                    }
                },
                DodgerBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DodgerBlue);
                    }
                },
                Firebrick: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Firebrick);
                    }
                },
                FloralWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.FloralWhite);
                    }
                },
                ForestGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.ForestGreen);
                    }
                },
                Fuchsia: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Fuchsia);
                    }
                },
                Gainsboro: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gainsboro);
                    }
                },
                GhostWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.GhostWhite);
                    }
                },
                Gold: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gold);
                    }
                },
                Goldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Goldenrod);
                    }
                },
                Gray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gray);
                    }
                },
                Green: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Green);
                    }
                },
                GreenYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.GreenYellow);
                    }
                },
                Honeydew: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Honeydew);
                    }
                },
                HotPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.HotPink);
                    }
                },
                IndianRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.IndianRed);
                    }
                },
                Indigo: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Indigo);
                    }
                },
                Ivory: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Ivory);
                    }
                },
                Khaki: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Khaki);
                    }
                },
                Lavender: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Lavender);
                    }
                },
                LavenderBlush: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LavenderBlush);
                    }
                },
                LawnGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LawnGreen);
                    }
                },
                LemonChiffon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LemonChiffon);
                    }
                },
                LightBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightBlue);
                    }
                },
                LightCoral: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightCoral);
                    }
                },
                LightCyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightCyan);
                    }
                },
                LightGoldenrodYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGoldenrodYellow);
                    }
                },
                LightGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGreen);
                    }
                },
                LightGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGray);
                    }
                },
                LightPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightPink);
                    }
                },
                LightSalmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSalmon);
                    }
                },
                LightSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSeaGreen);
                    }
                },
                LightSkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSkyBlue);
                    }
                },
                LightSlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSlateGray);
                    }
                },
                LightSteelBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSteelBlue);
                    }
                },
                LightYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightYellow);
                    }
                },
                Lime: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Lime);
                    }
                },
                LimeGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LimeGreen);
                    }
                },
                Linen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Linen);
                    }
                },
                Magenta: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Magenta);
                    }
                },
                Maroon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Maroon);
                    }
                },
                MediumAquamarine: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumAquamarine);
                    }
                },
                MediumBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumBlue);
                    }
                },
                MediumOrchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumOrchid);
                    }
                },
                MediumPurple: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumPurple);
                    }
                },
                MediumSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSeaGreen);
                    }
                },
                MediumSlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSlateBlue);
                    }
                },
                MediumSpringGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSpringGreen);
                    }
                },
                MediumTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumTurquoise);
                    }
                },
                MediumVioletRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumVioletRed);
                    }
                },
                MidnightBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MidnightBlue);
                    }
                },
                MintCream: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MintCream);
                    }
                },
                MistyRose: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MistyRose);
                    }
                },
                Moccasin: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Moccasin);
                    }
                },
                NavajoWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.NavajoWhite);
                    }
                },
                Navy: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Navy);
                    }
                },
                OldLace: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OldLace);
                    }
                },
                Olive: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Olive);
                    }
                },
                OliveDrab: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OliveDrab);
                    }
                },
                Orange: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Orange);
                    }
                },
                OrangeRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OrangeRed);
                    }
                },
                Orchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Orchid);
                    }
                },
                PaleGoldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleGoldenrod);
                    }
                },
                PaleGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleGreen);
                    }
                },
                PaleTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleTurquoise);
                    }
                },
                PaleVioletRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleVioletRed);
                    }
                },
                PapayaWhip: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PapayaWhip);
                    }
                },
                PeachPuff: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PeachPuff);
                    }
                },
                Peru: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Peru);
                    }
                },
                Pink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Pink);
                    }
                },
                Plum: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Plum);
                    }
                },
                PowderBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PowderBlue);
                    }
                },
                Purple: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Purple);
                    }
                },
                Red: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Red);
                    }
                },
                RosyBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.RosyBrown);
                    }
                },
                RoyalBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.RoyalBlue);
                    }
                },
                SaddleBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SaddleBrown);
                    }
                },
                Salmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Salmon);
                    }
                },
                SandyBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SandyBrown);
                    }
                },
                SeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SeaGreen);
                    }
                },
                SeaShell: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SeaShell);
                    }
                },
                Sienna: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Sienna);
                    }
                },
                Silver: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Silver);
                    }
                },
                SkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SkyBlue);
                    }
                },
                SlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SlateBlue);
                    }
                },
                SlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SlateGray);
                    }
                },
                Snow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Snow);
                    }
                },
                SpringGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SpringGreen);
                    }
                },
                SteelBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SteelBlue);
                    }
                },
                Tan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Tan);
                    }
                },
                Teal: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Teal);
                    }
                },
                Thistle: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Thistle);
                    }
                },
                Tomato: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Tomato);
                    }
                },
                Turquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Turquoise);
                    }
                },
                Violet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Violet);
                    }
                },
                Wheat: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Wheat);
                    }
                },
                White: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.White);
                    }
                },
                WhiteSmoke: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.WhiteSmoke);
                    }
                },
                Yellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Yellow);
                    }
                },
                YellowGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.YellowGreen);
                    }
                }
            },
            ctors: {
                init: function () {
                    this.Empty = new ExpressCraft.Color();
                    this.ARGBAlphaShift = 24;
                    this.ARGBRedShift = 16;
                    this.ARGBGreenShift = 8;
                    this.ARGBBlueShift = 0;
                    this.q = 255.0;
                },
                ctor: function () {
                    ExpressCraft.Color.Empty = new ExpressCraft.Color.ctor();
                    ExpressCraft.Color.StateKnownColorValid = 1;
                    ExpressCraft.Color.StateARGBValueValid = 2;
                    ExpressCraft.Color.StateValueMask = ExpressCraft.Color.StateARGBValueValid;
                    ExpressCraft.Color.StateNameValid = 8;
                    ExpressCraft.Color.NotDefinedValue = System.Int64(0);
                }
            },
            methods: {
                CheckByte: function (value) {
                    if ((value < 0) || (value > 255)) {
                        throw new System.ArgumentException("InvalidEx2BoundArgument");
                    }
                },
                MakeArgb: function (alpha, red, green, blue) {
                    return System.Int64.clip64(Bridge.Int.clipu64((((red << 16) | (green << 8)) | blue) | (alpha << 24)).and(System.UInt64(System.Int64([-1,0]))));
                },
                FromArgb: function (argb) {
                    return new ExpressCraft.Color.$ctor2(System.Int64(argb).and((System.Int64([-1,0]))), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$3: function (alpha, red, green, blue) {
                    ExpressCraft.Color.CheckByte(alpha);
                    ExpressCraft.Color.CheckByte(red);
                    ExpressCraft.Color.CheckByte(green);
                    ExpressCraft.Color.CheckByte(blue);
                    return new ExpressCraft.Color.$ctor2(ExpressCraft.Color.MakeArgb((alpha & 255), (red & 255), (green & 255), (blue & 255)), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$1: function (alpha, baseColor) {
                    ExpressCraft.Color.CheckByte(alpha);
                    return new ExpressCraft.Color.$ctor2(ExpressCraft.Color.MakeArgb((alpha & 255), baseColor.R, baseColor.G, baseColor.B), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$2: function (red, green, blue) {
                    return ExpressCraft.Color.FromArgb$3(255, red, green, blue);
                },
                IsEnumValid: function (enumValue, value, minValue, maxValue) {
                    return ((value >= minValue) && (value <= maxValue));
                },
                FromKnownColor: function (color) {
                    return new ExpressCraft.Color.$ctor1(color);
                },
                FromHex: function (value) {
                    if (System.String.startsWith(value, "#")) {
                        return ExpressCraft.Color.FromHex(value.substr(1));
                    } else {
                        return ExpressCraft.Color.FromArgb(parseInt(value));
                    }
                },
                op_Implicit$1: function (color) {
                    return color.ToHex();
                },
                op_Implicit: function (hexValue) {
                    return ExpressCraft.Color.FromHex(hexValue);
                },
                op_Equality: function (left, right) {
                    if (((left.value.ne(right.value)) || (left.state !== right.state)) || (left.knownColor !== right.knownColor)) {
                        return false;
                    }
                    return ((Bridge.referenceEquals(left.name, right.name)) || (((left.name != null) && (right.name != null)) && System.String.equals(left.name, right.name)));
                },
                op_Inequality: function (left, right) {
                    return !(ExpressCraft.Color.op_Equality(left.$clone(), right.$clone()));
                },
                getDefaultValue: function () { return new ExpressCraft.Color(); }
            }
        },
        fields: {
            name: null,
            value: System.Int64(0),
            knownColor: 0,
            state: 0
        },
        props: {
            R: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(16)).and(System.Int64(255)));
                }
            },
            G: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(8)).and(System.Int64(255)));
                }
            },
            B: {
                get: function () {
                    return System.Int64.clipu8(this.Value.and(System.Int64(255)));
                }
            },
            A: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(24)).and(System.Int64(255)));
                }
            },
            IsKnownColor: {
                get: function () {
                    return ((this.state & ExpressCraft.Color.StateKnownColorValid) > 0);
                }
            },
            IsEmpty: {
                get: function () {
                    return (this.state === 0);
                }
            },
            IsNamedColor: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateNameValid) === 0) {
                        return this.IsKnownColor;
                    }
                    return true;
                }
            },
            IsSystemColor: {
                get: function () {
                    if (!this.IsKnownColor) {
                        return false;
                    }
                    if (this.knownColor > 26) {
                        return (this.knownColor > 167);
                    }
                    return true;
                }
            },
            NameAndARGBValue: {
                get: function () {
                    return System.String.format("{{Name={0}, ARGB=({1}, {2}, {3}, {4})}}", this.Name, Bridge.box(this.A, System.Byte), Bridge.box(this.R, System.Byte), Bridge.box(this.G, System.Byte), Bridge.box(this.B, System.Byte));
                }
            },
            Name: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateNameValid) !== 0) {
                        return this.name;
                    }
                    if (!this.IsKnownColor) {
                        return System.Convert.toStringInBase(this.value, 16, 11);
                    }
                    var str = ExpressCraft.KnownColorTable.KnownColorToName(this.knownColor);
                    if (str != null) {
                        return str;
                    }
                    return this.knownColor.toString();
                }
            },
            Value: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateValueMask) !== 0) {
                        return this.value;
                    }
                    if (this.IsKnownColor) {
                        return System.Int64(ExpressCraft.KnownColorTable.KnownColorToArgb(this.knownColor));
                    }
                    return ExpressCraft.Color.NotDefinedValue;
                }
            }
        },
        ctors: {
            $ctor1: function (knownColor) {
                this.$initialize();
                this.value = System.Int64(0);
                this.state = ExpressCraft.Color.StateKnownColorValid;
                this.name = null;
                this.knownColor = Bridge.Int.sxs(knownColor & 65535);
            },
            $ctor2: function (value, state, name, knownColor) {
                this.$initialize();
                this.value = value;
                this.state = state;
                this.name = name;
                this.knownColor = Bridge.Int.sxs(knownColor & 65535);
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            componentToHex: function (value) {
                var x = value.toString(16);
                return System.String.concat((x.length === 1 ? "0" : ""), x);
            },
            ToHex: function () {
                if (this.A !== 255) {
                    return System.String.format("#{0}{1}{2}{3}", this.componentToHex(this.A), this.componentToHex(this.R), this.componentToHex(this.G), this.componentToHex(this.B)); // "#" + (155).toString(16) + (102).toString(16) + (102).toString(16);
                } else {
                    return System.String.format("#{0}{1}{2}", this.componentToHex(this.R), this.componentToHex(this.G), this.componentToHex(this.B)); // "#" + (155).toString(16) + (102).toString(16) + (102).toString(16);
                }
            },
            GetBrightness: function () {
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = z;
                var b = z;
                if (x > v) {
                    v = x;
                }
                if (c > v) {
                    v = c;
                }
                if (x < b) {
                    b = x;
                }
                if (c < b) {
                    b = c;
                }
                return ((v + b) / 2.0);
            },
            GetHue: function () {
                if ((this.R === this.G) && (this.G === this.B)) {
                    return 0.0;
                }
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = 0.0;
                var b = z;
                var n = z;
                if (x > b) {
                    b = x;
                }
                if (c > b) {
                    b = c;
                }
                if (x < n) {
                    n = x;
                }
                if (c < n) {
                    n = c;
                }
                var num6 = b - n;
                if (z === b) {
                    v = (x - c) / num6;
                } else if (x === b) {
                    v = 2.0 + ((c - z) / num6);
                } else if (c === b) {
                    v = 4.0 + ((z - x) / num6);
                }
                v *= 60.0;
                if (v < 0.0) {
                    v += 360.0;
                }
                return v;
            },
            GetSaturation: function () {
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = 0.0;
                var b = z;
                var n = z;
                if (x > b) {
                    b = x;
                }
                if (c > b) {
                    b = c;
                }
                if (x < n) {
                    n = x;
                }
                if (c < n) {
                    n = c;
                }
                if (b === n) {
                    return v;
                }
                var m = (b + n) / 2.0;
                if (m <= 0.5) {
                    return ((b - n) / (b + n));
                }
                return ((b - n) / ((2.0 - b) - n));
            },
            ToArgb: function () {
                return System.Int64.clip32(this.Value);
            },
            ToKnownColor: function () {
                return this.knownColor;
            },
            toString: function () {
                var builder = new System.Text.StringBuilder("", 32);
                builder.append(Bridge.Reflection.getTypeName(Bridge.getType(this)));
                builder.append(" [");
                if ((this.state & ExpressCraft.Color.StateNameValid) !== 0) {
                    builder.append(this.Name);
                } else if ((this.state & ExpressCraft.Color.StateKnownColorValid) !== 0) {
                    builder.append(this.Name);
                } else if ((this.state & ExpressCraft.Color.StateValueMask) !== 0) {
                    builder.appendFormat("A={0}, R={1}, G={2}, B={3}", Bridge.box(this.A, System.Byte), Bridge.box(this.R, System.Byte), Bridge.box(this.G, System.Byte), Bridge.box(this.B, System.Byte));
                } else {
                    builder.append("Empty");
                }
                builder.append("]");
                return builder.toString();
            },
            equals: function (obj) {
                if (Bridge.is(obj, ExpressCraft.Color)) {
                    var color = System.Nullable.getValue(Bridge.cast(Bridge.unbox(obj), ExpressCraft.Color));
                    if (((this.value.equals(color.value)) && (this.state === color.state)) && (this.knownColor === color.knownColor)) {
                        return ((Bridge.referenceEquals(this.name, color.name)) || (((this.name != null) && (color.name != null)) && System.String.equals(this.name, this.name)));
                    }
                }
                return false;
            },
            getHashCode: function () {
                return ((Bridge.getHashCode(this.value) ^ Bridge.getHashCode(this.state)) ^ Bridge.getHashCode(this.knownColor));
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Color();
                s.name = this.name;
                s.value = this.value;
                s.knownColor = this.knownColor;
                s.state = this.state;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.ComboBoxTypes", {
        $kind: "enum",
        statics: {
            fields: {
                Default: 0
            }
        }
    });

    Bridge.define("ExpressCraft.ConsoleLogType", {
        $kind: "enum",
        statics: {
            fields: {
                Log: 0,
                Debug: 1,
                Error: 2
            }
        }
    });

    Bridge.define("ExpressCraft.ContextItem", {
        fields: {
            Caption: null,
            OnItemClick: null,
            BeginGroup: false,
            Enabled: false
        },
        ctors: {
            init: function () {
                this.Caption = "";
                this.BeginGroup = false;
                this.Enabled = true;
            },
            ctor: function () {
                this.$initialize();
            },
            $ctor2: function (caption, beginGroup) {
                if (beginGroup === void 0) { beginGroup = false; }

                this.$initialize();
                this.Caption = caption;
                this.BeginGroup = beginGroup;
            },
            $ctor1: function (caption, _OnItemClick, beginGroup) {
                if (beginGroup === void 0) { beginGroup = false; }

                this.$initialize();
                this.Caption = caption;
                this.BeginGroup = beginGroup;
                this.OnItemClick = _OnItemClick;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumn", {
        fields: {
            FieldName: null,
            DataType: 0,
            Self: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.Self = this;
            }
        },
        methods: {
            GetDisplayValue$1: function (rowIndex, formatString) {
                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return System.String.format(formatString, (Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex)));
                    case ExpressCraft.DataType.DateTime: 
                        var obj = Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex);
                        if (obj == null) {
                            return "";
                        }
                        if (Bridge.is(obj, System.DateTime)) {
                            return System.String.format(formatString, Bridge.box(Bridge.cast(obj, System.DateTime), System.DateTime, System.DateTime.format));
                        }
                        var d = { };
                        if (System.DateTime.tryParse(obj, null, d)) {
                            return System.String.format(formatString, Bridge.box(d.v, System.DateTime, System.DateTime.format));
                        }
                        var str = Bridge.as(obj, System.String);
                        if (System.String.isNullOrWhiteSpace(str)) {
                            return "";
                        }
                        return System.String.format(formatString, str);
                    case ExpressCraft.DataType.String: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Integer: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex), System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Long: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode)));
                    case ExpressCraft.DataType.Double: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                    case ExpressCraft.DataType.Decimal: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex), System.Byte, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Short: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex), System.Int16, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Bool: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode));
                }
            },
            GetDisplayValue: function (rowIndex) {
                if (this.Self.Cells.Count <= rowIndex) {
                    return null;
                }

                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.DateTime: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex), System.DateTime, System.Nullable.toStringFn(System.DateTime.format), System.Nullable.getHashCode));
                    case ExpressCraft.DataType.String: 
                        return Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.Integer: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex), System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Long: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode)));
                    case ExpressCraft.DataType.Double: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                    case ExpressCraft.DataType.Decimal: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex), System.Byte, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Bool: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Short: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex), System.Int16, System.Nullable.toString, System.Nullable.getHashCode));
                }
            },
            GetCellValue: function (rowIndex) {
                if (this.Self.Cells.Count <= rowIndex) {
                    return null;
                }

                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.DateTime: 
                        return Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex), System.DateTime, System.Nullable.toStringFn(System.DateTime.format), System.Nullable.getHashCode);
                    case ExpressCraft.DataType.String: 
                        return Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.Integer: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex)), System.Int32, System.Nullable.toString, System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Long: 
                        return (Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex)), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode));
                    case ExpressCraft.DataType.Double: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex)), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode));
                    case ExpressCraft.DataType.Decimal: 
                        return (Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex)), System.Byte, System.Nullable.toString, System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Bool: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex)), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Short: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex)), System.Int16, System.Nullable.toString, System.Nullable.getHashCode);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.DataItem", {
        fields: {
            Text: null,
            Value: null
        },
        ctors: {
            $ctor1: function (text, value) {
                this.$initialize();
                this.Text = text;
                this.Value = value;
            },
            ctor: function (text) {
                this.$initialize();
                this.Text = text;
                this.Value = text;
            }
        }
    });

    Bridge.define("ExpressCraft.DataRow", {
        fields: {
            ParentTable: null,
            RowIndex: 0,
            batchData: null
        },
        ctors: {
            init: function () {
                this.RowIndex = -1;
            },
            ctor: function () {
                this.$initialize();
            },
            $ctor2: function (columnLength) {
                this.$initialize();
                this.ParentTable = null;
                this.RowIndex = -1;
                this.batchData = System.Array.init(columnLength, null, System.Object);
            },
            $ctor1: function (parentTable, rowIndex) {
                if (rowIndex === void 0) { rowIndex = -1; }

                this.$initialize();
                this.ParentTable = parentTable;
                this.RowIndex = rowIndex;
                if (rowIndex === -1) {
                    this.batchData = System.Array.init(parentTable.ColumnCount, null, System.Object);
                }
            }
        },
        methods: {
            getItem: function (columnIndex) {
                return this.GetValue(columnIndex);
            },
            setItem: function (columnIndex, value) {
                this.SetValue(columnIndex, value);
            },
            GetOfflineDataRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor2(this.ParentTable.ColumnCount);
                var data = System.Array.init(this.ParentTable.ColumnCount, null, System.Object);
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    data[System.Array.index(i, data)] = this.getItem(i);
                }
                dr.batchData = data;
                return dr;
            },
            SetValue$1: function (fieldName, value) {
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.ParentTable.Columns.getItem(i).FieldName, fieldName)) {
                        if (this.RowIndex === -1) {
                            if (!Bridge.referenceEquals(this.batchData[System.Array.index(i, this.batchData)], value)) {
                                this.batchData[System.Array.index(i, this.batchData)] = value;
                                this.ParentTable.RequireOnDataChangeEvent();
                            }

                            return;
                        }
                        var col = this.ParentTable.Columns.getItem(i);
                        if (!Bridge.referenceEquals(col.Cells.items[this.RowIndex], value)) {
                            col.Cells.items[this.RowIndex] = Bridge.unbox(value);
                            this.ParentTable.RequireOnDataChangeEvent();
                        }
                        return;
                    }
                }
            },
            SetValue: function (columnIndex, value) {
                if (this.RowIndex === -1) {
                    if (!Bridge.referenceEquals(this.batchData[System.Array.index(columnIndex, this.batchData)], value)) {
                        this.batchData[System.Array.index(columnIndex, this.batchData)] = value;
                        this.ParentTable.RequireOnDataChangeEvent();
                    }

                    return;
                }
                var col = this.ParentTable.Columns.getItem(columnIndex);
                if (!Bridge.referenceEquals(col.Cells.items[this.RowIndex], value)) {
                    col.Cells.items[this.RowIndex] = Bridge.unbox(value);
                    this.ParentTable.RequireOnDataChangeEvent();
                }
            },
            GetValue$1: function (fieldName) {
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.ParentTable.Columns.getItem(i).FieldName, fieldName)) {
                        if (this.RowIndex === -1) {
                            return this.batchData[System.Array.index(i, this.batchData)];
                        }
                        var col = this.ParentTable.Columns.getItem(i);
                        return col.Cells.items[this.RowIndex];
                    }
                }
                return null;
            },
            GetValue: function (columnIndex) {
                if (this.RowIndex === -1) {
                    return this.batchData[System.Array.index(columnIndex, this.batchData)];
                }
                var col = this.ParentTable.Columns.getItem(columnIndex);
                return col.Cells.items[this.RowIndex];
            }
        }
    });

    Bridge.define("ExpressCraft.DataTable", {
        fields: {
            Columns: null,
            _searchResults: null,
            _searchActive: false,
            _searchString: null,
            _inDataChange: false,
            _requestedOnDataChange: false,
            _ColCount: 0,
            _RowCount: 0,
            NewRows: null
        },
        events: {
            OnDataSourceChanged: null
        },
        props: {
            SearchString: {
                get: function () {
                    return this._searchString;
                }
            },
            ColumnCount: {
                get: function () {
                    return this._ColCount;
                }
            },
            RowCount: {
                get: function () {
                    if (this._searchActive) {
                        return this._searchResults.Count;
                    }
                    return this._RowCount;
                }
            }
        },
        ctors: {
            init: function () {
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.DataColumn))();
                this._searchResults = new (System.Collections.Generic.List$1(System.Int32))();
                this._searchActive = false;
                this._inDataChange = false;
                this._requestedOnDataChange = false;
                this.NewRows = new (System.Collections.Generic.List$1(ExpressCraft.DataRow))();
            }
        },
        methods: {
            getItem: function (rowIndex) {
                return new ExpressCraft.DataRow.$ctor1(this, rowIndex);
            },
            Search: function (searchData, view) {
                if (view == null) {
                    this._searchString = "";
                    this._searchActive = false;
                    this._searchResults = new (System.Collections.Generic.List$1(System.Int32))();
                    this.RequireOnDataChangeEvent();

                    return;
                }
                this._searchString = searchData.toLowerCase();
                this._searchActive = !System.String.isNullOrWhiteSpace(this._searchString);


                if (this._searchActive) {
                    this._searchResults = new (System.Collections.Generic.List$1(System.Int32))();
                    var count = view.ColumnCount();

                    var UseFormat = new (System.Collections.Generic.List$1(System.Object))();
                    for (var x = 0; x < count; x = (x + 1) | 0) {
                        var gridCol = view.GetColumn(x);
                        if (gridCol.Visible) {
                            var FormatString = gridCol.FormatString;
                            UseFormat.add({ item1: System.String.isNullOrWhiteSpace(FormatString), item2: FormatString });
                        } else {
                            UseFormat.add({ item1: false, item2: "" });
                        }
                    }

                    for (var y = 0; y < this._RowCount; y = (y + 1) | 0) {
                        for (var x1 = 0; x1 < count; x1 = (x1 + 1) | 0) {
                            var gridCol1 = view.GetColumn(x1);
                            if (gridCol1.Visible) {
                                var Column = gridCol1.Column;
                                var helperWhatToDo = UseFormat.getItem(x1);

                                var value;

                                if (helperWhatToDo.item1) {
                                    value = Column.GetDisplayValue(y);
                                } else {
                                    value = Column.GetDisplayValue$1(y, helperWhatToDo.item2);
                                }

                                if (!System.String.isNullOrWhiteSpace(value) && System.String.startsWith(value.toLowerCase(), searchData)) {
                                    this._searchResults.add(y);
                                    break;
                                }
                            }
                        }
                    }
                } else {
                    this._searchResults = new (System.Collections.Generic.List$1(System.Int32))();
                }

                this.RequireOnDataChangeEvent();
            },
            RequireOnDataChangeEvent: function () {
                if (!this._inDataChange) {
                    this._requestedOnDataChange = false;
                    if (!Bridge.staticEquals(this.OnDataSourceChanged, null)) {
                        this.OnDataSourceChanged(this, null);
                    }
                } else {
                    this._requestedOnDataChange = true;
                }
            },
            ClearRows: function () {
                this._RowCount = 0;
                for (var i = 0; i < this.Columns.Count; i = (i + 1) | 0) {
                    this.ClearCells(this.Columns.getItem(i));
                }
            },
            ClearCells$1: function (T, _column) {
                var _col = _column;
                _col.Cells = new (System.Collections.Generic.List$1(T))();
            },
            ClearCells: function (_column) {
                switch (_column.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        this.ClearCells$1(System.Object, _column);
                        break;
                    case ExpressCraft.DataType.DateTime: 
                        this.ClearCells$1(System.Nullable$1(System.DateTime), _column);
                        break;
                    case ExpressCraft.DataType.String: 
                        this.ClearCells$1(System.String, _column);
                        break;
                    case ExpressCraft.DataType.Integer: 
                        this.ClearCells$1(System.Nullable$1(System.Int32), _column);
                        break;
                    case ExpressCraft.DataType.Long: 
                        this.ClearCells$1(System.Nullable$1(System.Int64), _column);
                        break;
                    case ExpressCraft.DataType.Float: 
                        this.ClearCells$1(System.Nullable$1(System.Single), _column);
                        break;
                    case ExpressCraft.DataType.Double: 
                        this.ClearCells$1(System.Nullable$1(System.Double), _column);
                        break;
                    case ExpressCraft.DataType.Decimal: 
                        this.ClearCells$1(System.Nullable$1(System.Decimal), _column);
                        break;
                    case ExpressCraft.DataType.Bool: 
                        this.ClearCells$1(System.Nullable$1(System.Boolean), _column);
                        break;
                    case ExpressCraft.DataType.Byte: 
                        this.ClearCells$1(System.Nullable$1(System.Byte), _column);
                        break;
                    case ExpressCraft.DataType.Short: 
                        this.ClearCells$1(System.Nullable$1(System.Int16), _column);
                        break;
                }
                this.RequireOnDataChangeEvent();
            },
            GetColumnByDataType: function (type) {
                if (type === void 0) { type = 0; }
                switch (type) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return new ExpressCraft.DataColumnObject();
                    case ExpressCraft.DataType.DateTime: 
                        return new ExpressCraft.DataColumnDateTime();
                    case ExpressCraft.DataType.String: 
                        return new ExpressCraft.DataColumnString();
                    case ExpressCraft.DataType.Integer: 
                        return new ExpressCraft.DataColumnInteger();
                    case ExpressCraft.DataType.Long: 
                        return new ExpressCraft.DataColumnLong();
                    case ExpressCraft.DataType.Float: 
                        return new ExpressCraft.DataColumnFloat();
                    case ExpressCraft.DataType.Double: 
                        return new ExpressCraft.DataColumnDouble();
                    case ExpressCraft.DataType.Decimal: 
                        return new ExpressCraft.DataColumnDecimal();
                    case ExpressCraft.DataType.Bool: 
                        return new ExpressCraft.DataColumnBool();
                    case ExpressCraft.DataType.Byte: 
                        return new ExpressCraft.DataColumnByte();
                    case ExpressCraft.DataType.Short: 
                        return new ExpressCraft.DataColumnShort();
                }
            },
            AddColumn: function (fieldName, type) {
                if (type === void 0) { type = 0; }
                var col = this.GetColumnByDataType(type);
                col.FieldName = fieldName;

                this.Columns.add(col);
                this._ColCount = this.Columns.Count;

                this.RequireOnDataChangeEvent();
            },
            BeginNewRow: function (EstimatedNewRows) {
                this.NewRows = new (System.Collections.Generic.List$1(ExpressCraft.DataRow))(EstimatedNewRows);
                this.BeginDataUpdate();
            },
            AddRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor1(this, Bridge.identity(this._RowCount, (this._RowCount = (this._RowCount + 1) | 0)));
                var colLength = this.Columns.Count;
                for (var x = 0; x < colLength; x = (x + 1) | 0) {
                    var col = this.Columns.getItem(x);
                    col.Cells.add(null);
                }

                this.RequireOnDataChangeEvent();

                return dr;
            },
            AddRow$1: function (row) {
                if (row === void 0) { row = []; }
                if (row.length === this.ColumnCount) {
                    this._RowCount = (this._RowCount + 1) | 0;
                    var colLength = this.Columns.Count;
                    for (var x = 0; x < colLength; x = (x + 1) | 0) {
                        var col = this.Columns.getItem(x);
                        col.Cells.add(Bridge.unbox(row[System.Array.index(x, row)]));
                    }
                    this.RequireOnDataChangeEvent();
                }
            },
            NewRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor1(this);

                this.NewRows.add(dr);

                return dr;
            },
            AcceptNewRows: function () {
                var $t, $t1, $t2;
                if (this.NewRows == null || this.NewRows.Count === 0) {
                    return;
                }
                var colLength = this.Columns.Count;
                var rowLength = this.NewRows.Count;
                var colN1 = (colLength - 1) | 0;

                for (var x = 0; x < colLength; x = (x + 1) | 0) {
                    var col = this.Columns.getItem(x);
                    var DataCells = System.Array.init(rowLength, null, System.Object);

                    if (x === 0) {
                        for (var y = 0; y < rowLength; y = (y + 1) | 0) {
                            this.NewRows.getItem(y).RowIndex = Bridge.identity(this._RowCount, (this._RowCount = (this._RowCount + 1) | 0));
                            DataCells[System.Array.index(y, DataCells)] = ($t = this.NewRows.getItem(y).batchData)[System.Array.index(x, $t)];
                        }
                    } else if (x === colN1) {
                        for (var y1 = 0; y1 < rowLength; y1 = (y1 + 1) | 0) {
                            DataCells[System.Array.index(y1, DataCells)] = ($t1 = this.NewRows.getItem(y1).batchData)[System.Array.index(x, $t1)];
                            this.NewRows.getItem(y1).batchData = null;
                        }
                    } else {
                        for (var y2 = 0; y2 < rowLength; y2 = (y2 + 1) | 0) {
                            DataCells[System.Array.index(y2, DataCells)] = ($t2 = this.NewRows.getItem(y2).batchData)[System.Array.index(x, $t2)];
                        }
                    }
                    col.Cells.addRange(Bridge.unbox(DataCells));
                }
                this.NewRows.clear();

                this.EndDataUpdate();
            },
            BeginDataUpdate: function () {
                this._inDataChange = true;
                this._requestedOnDataChange = false;
            },
            EndDataUpdate: function () {
                this._inDataChange = false;
                if (this._requestedOnDataChange) {
                    this._requestedOnDataChange = false;
                    if (!Bridge.staticEquals(this.OnDataSourceChanged, null)) {
                        this.OnDataSourceChanged(this, null);
                    }
                }
            },
            RejectNewRows: function () {
                this.NewRows.clear();
                this._inDataChange = false;
            }
        }
    });

    Bridge.define("ExpressCraft.DataType", {
        $kind: "enum",
        statics: {
            fields: {
                Object: 0,
                DateTime: 1,
                String: 2,
                Integer: 3,
                Long: 4,
                Float: 5,
                Double: 6,
                Decimal: 7,
                Bool: 8,
                Byte: 9,
                Short: 10
            }
        }
    });

    Bridge.define("ExpressCraft.DateControl.DisplayMode", {
        $kind: "enum",
        statics: {
            fields: {
                Day: 0,
                Month: 1,
                Year: 2
            }
        }
    });

    Bridge.define("ExpressCraft.DialogResult", {
        fields: {
            ResultEnum: 0,
            CallBack: null
        },
        ctors: {
            init: function () {
                this.ResultEnum = ExpressCraft.DialogResultEnum.None;
            },
            ctor: function (resultEnum, callBack) {
                this.$initialize();
                this.ResultEnum = resultEnum;
                this.CallBack = callBack;
            }
        },
        methods: {
            InvokeIfResult: function (resultEnum) {
                if (resultEnum === this.ResultEnum && !Bridge.staticEquals(this.CallBack, null)) {
                    this.CallBack();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.DialogResultEnum", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                OK: 1,
                Cancel: 2,
                Abort: 3,
                Send: 4,
                Ignore: 5,
                Yes: 6,
                No: 7
            }
        }
    });

    Bridge.define("ExpressCraft.ExternalPlugin", {
        fields: {
            SourceUrl: null,
            SetupCompleted: false,
            InLoad: false,
            OnReady: null
        },
        ctors: {
            init: function () {
                this.SetupCompleted = false;
                this.InLoad = false;
            },
            ctor: function (sourceUrl) {
                this.$initialize();
                this.SourceUrl = sourceUrl;
            }
        },
        methods: {
            Setup: function (async, defer) {
                var $t;
                if (async === void 0) { async = false; }
                if (defer === void 0) { defer = false; }
                if (!this.SetupCompleted) {
                    if (this.InLoad) {
                        return;
                    }
                    this.InLoad = true;
                    var script = ($t = document.createElement("script"), $t.onload = Bridge.fn.bind(this, $asm.$.ExpressCraft.ExternalPlugin.f1), $t.src = this.SourceUrl, $t);
                    if (async) {
                        script.async = async;
                    }
                    if (defer) {
                        script.defer = defer;
                    }
                    document.head.appendChild(script);
                }
            },
            UsageCheck: function () {
                if (!this.SetupCompleted) {
                    throw new System.Exception(System.String.concat("'", this.SourceUrl, "' requires to be setup!"));
                }
                if (this.InLoad) {
                    throw new System.Exception(System.String.concat("'", this.SourceUrl, "' is currently loading, Please try again in a few seconds!"));
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ExternalPlugin", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ExternalPlugin, {
        f1: function (ele) {
            this.SetupCompleted = true;
            this.InLoad = false;
            if (!Bridge.staticEquals(this.OnReady, null)) {
                this.OnReady();
            }
        }
    });

    Bridge.define("ExpressCraft.Firebase", {
        statics: {
            fields: {
                ExternalFireBase: null,
                DisplayName: null,
                PhotoURL: null,
                UserSignedIn: false
            },
            ctors: {
                init: function () {
                    this.ExternalFireBase = new ExpressCraft.ExternalPlugin("https://www.gstatic.com/firebasejs/3.6.8/firebase.js");
                }
            },
            methods: {
                Setup: function (OnReady) {
                    if (OnReady === void 0) { OnReady = null; }
                    ExpressCraft.Firebase.ExternalFireBase.OnReady = OnReady;
                    ExpressCraft.Firebase.ExternalFireBase.Setup();
                },
                InitializeApp: function (ApiKey, AuthDomain, DatabaseURL, ProjectId, StorageBucket, MessagingSenderId) {
                    ExpressCraft.Firebase.ExternalFireBase.UsageCheck();
                    if (System.String.isNullOrWhiteSpace(ApiKey)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0} !", "ApiKey"));
                    }
                    if (System.String.isNullOrWhiteSpace(AuthDomain)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "AuthDomain"));
                    }
                    if (System.String.isNullOrWhiteSpace(DatabaseURL)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "DatabaseURL"));
                    }
                    if (System.String.isNullOrWhiteSpace(ProjectId)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "ProjectId"));
                    }
                    if (System.String.isNullOrWhiteSpace(StorageBucket)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "StorageBucket"));
                    }
                    if (System.String.isNullOrWhiteSpace(MessagingSenderId)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "MessagingSenderId"));
                    }

                    			firebase.initializeApp({apiKey: ApiKey, authDomain: AuthDomain, databaseURL: DatabaseURL, projectId : ProjectId, storageBucket: StorageBucket, messagingSenderId: MessagingSenderId });
                    			firebase.auth().onAuthStateChanged(function(user) {
                    				if (user) {
                    					this.UserSignedIn = true;
                    					this.DisplayName = user.displayName;
                    					this.PhotoURL = user.photoURL;
                    				}else{
                    					this.UserSignedIn = false;
                    				}
                    			});
                    			
                },
                SignIn: function () {
                    			firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider());
                    			
                },
                SignOut: function () {
                    			firebase.auth().signOut();
                    			
                },
                DatabaseRef: function (name) {
                    var dataRef = firebase.database().ref(name);
                    dataRef.off();
                    return dataRef;
                },
                IsSignedInWithFirebase: function () {
                    return 
			if(firebase.auth().currentUser)
			{
				return true;
			}else
			{
				return false;
			};
                }
            }
        }
    });

    Bridge.define("ExpressCraft.FixedSplitterPosition", {
        $kind: "enum",
        statics: {
            fields: {
                Panel1: 0,
                Panel2: 1,
                None: 2
            }
        }
    });

    Bridge.define("ExpressCraft.FormButtonType", {
        $kind: "enum",
        statics: {
            fields: {
                Close: 0,
                Maximize: 1,
                Minimize: 2,
                Restore: 3,
                Help: 4,
                Menu: 5
            }
        }
    });

    Bridge.define("ExpressCraft.FormCollection", {
        fields: {
            FormOwner: null,
            VisibleForms: null
        },
        ctors: {
            init: function () {
                this.VisibleForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
            },
            ctor: function (formOwner) {
                this.$initialize();
                this.FormOwner = formOwner;
            }
        }
    });

    Bridge.define("ExpressCraft.FormStartPosition", {
        $kind: "enum",
        statics: {
            fields: {
                Manual: 0,
                Center: 1,
                WindowsDefaultLocation: 2
            }
        }
    });

    Bridge.define("ExpressCraft.Gmail", {
        statics: {
            fields: {
                ExternalGmail: null,
                ClientId: null,
                GoogleAuth: null,
                _oneTimeCall: null,
                _hasRan: false
            },
            ctors: {
                init: function () {
                    this.ExternalGmail = new ExpressCraft.ExternalPlugin("https://apis.google.com/js/api.js");
                    this._oneTimeCall = new (System.Collections.Generic.List$1(Function))();
                    this._hasRan = false;
                }
            },
            methods: {
                Authorize: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        return;
                    }

                    if (ExpressCraft.Gmail.IsSignedIn()) {
                        return;
                    }
                    try {
                        ExpressCraft.Gmail.GoogleAuth = gapi.auth2.getAuthInstance()
                        gapi.auth2.getAuthInstance().signIn();
                        ExpressCraft.Gmail._hasRan = false;
                        ExpressCraft.Gmail.PushEventsTimeCall();
                        window.focus();
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                },
                PushEventsTimeCall: function () {
                    var $t;
                    if (ExpressCraft.Gmail._hasRan) {
                        return;
                    }
                    ExpressCraft.Gmail._hasRan = true;

                    try {
                        $t = Bridge.getEnumerator(ExpressCraft.Gmail._oneTimeCall);
                        try {
                            while ($t.moveNext()) {
                                var callpump = $t.Current;
                                if (!Bridge.staticEquals(callpump, null)) {
                                    callpump();
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                    ExpressCraft.Gmail._oneTimeCall = new (System.Collections.Generic.List$1(Function))();
                },
                OnSignedIn: function (method) {
                    if (Bridge.staticEquals(method, null)) {
                        return;
                    }

                    if (ExpressCraft.Gmail._hasRan) {
                        try {
                            method();
                        }
                        catch ($e1) {
                            $e1 = System.Exception.create($e1);
                        }
                    } else {
                        ExpressCraft.Gmail._oneTimeCall.add(method);
                    }
                },
                IsSignedIn: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }
                    var signedIn = false;

                    			signedIn = ExpressCraft.Gmail.GoogleAuth.isSignedIn.get();
                    			

                    return signedIn;
                },
                AccessToken: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var access_token = "";

                    			access_token = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.Zi.access_token;
                    			

                    return access_token;
                },
                Fullname: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var fullname = "";

                    			fullname = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.ig;
                    			

                    return fullname;
                },
                Email: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var email = "";

                    			email = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.U3;
                    			

                    return email;
                },
                GetContentTypeFromFileName: function (filename) {
                    if (System.String.isNullOrWhiteSpace(filename)) {
                        return "application/octet-stream";
                    }

                    filename = filename.toLowerCase();

                    if (System.String.endsWith(filename, ".pdf")) {
                        return "application/pdf";
                    } else {
                        if (System.String.endsWith(filename, ".png")) {
                            return "image/png";
                        } else {
                            if (System.String.endsWith(filename, ".jpg") || System.String.endsWith(filename, ".jpeg")) {
                                return "image/jpeg";
                            } else {
                                return "application/octet-stream";
                            }
                        }
                    }
                },
                SendEmail: function (message) {
                    var $t;
                    if (message == null) {
                        return;
                    }

                    var builder = new System.Text.StringBuilder();

                    builder.append("Content-Type: multipart/mixed; boundary=\"_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\"\r\n");
                    builder.append("MIME-Version: 1.0\r\n");
                    builder.append(System.String.concat("From: ", ExpressCraft.Gmail.Email(), "\r\n"));
                    builder.append(System.String.concat("To: ", message.ToEmail, "\r\n"));
                    builder.append(System.String.concat("Subject: ", message.Subject, "\r\n\r\n"));

                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                    builder.append(System.String.concat("Content-Type: text/", (message.IsHTML ? "html" : "plain"), "; charset=\"UTF-8\"\r\n"));
                    builder.append("MIME-Version: 1.0\r\n");
                    builder.append("Content-Transfer-Encoding: 7bit\r\n\r\n");

                    if (message.IsHTML) {
                        builder.append(System.String.concat(System.String.replaceAll((System.String.concat(message.Body, "")), "\r\n", "<br />"), "\r\n\r\n"));
                    } else {
                        builder.append(System.String.concat(message.Body, "\r\n\r\n"));
                    }

                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");

                    if (message.Attachments != null) {
                        $t = Bridge.getEnumerator(message.Attachments);
                        try {
                            while ($t.moveNext()) {
                                var attachment = $t.Current;
                                if (!System.String.isNullOrWhiteSpace(attachment.Data)) {
                                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                                    builder.append(System.String.concat("Content-Type: ", ExpressCraft.Gmail.GetContentTypeFromFileName(attachment.Filename), "; charset=\"UTF-8\"\r\n"));
                                    builder.append("MIME-Version: 1.0\r\n");
                                    builder.append("Content-Transfer-Encoding: base64\r\n");
                                    builder.append(System.String.concat("Content-Disposition: attachment; filename=\"", System.String.replaceAll((attachment.Filename), "\"", ""), "\"\r\n\r\n"));

                                    if (attachment.IsBase64) {
                                        builder.append(attachment.Data);
                                    } else {
                                        builder.append(Bridge.global.btoa(attachment.Data));
                                    }

                                    builder.append("\r\n\r\n");

                                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    var settings = { type: "POST", url: "https://www.googleapis.com/upload/gmail/v1/users/me/messages/send?uploadType=multipart", contentType: "message/rfc822", data: builder.toString(), headers: { Authorization: System.String.concat("Bearer ", ExpressCraft.Gmail.AccessToken()) }, error: $asm.$.ExpressCraft.Gmail.f1, complete: $asm.$.ExpressCraft.Gmail.f2, success: $asm.$.ExpressCraft.Gmail.f3 };

                    $.ajax(settings);
                },
                IconURL: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var iconUrl = "";

                    			iconUrl = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.Paa;
                    			

                    return iconUrl;
                },
                Setup: function (clientId) {
                    ExpressCraft.Gmail.ClientId = clientId;

                    ExpressCraft.Gmail.ExternalGmail.OnReady = $asm.$.ExpressCraft.Gmail.f4;
                    ExpressCraft.Gmail.ExternalGmail.Setup(true, true);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.Gmail", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Gmail, {
        f1: function (a, b, c) { },
        f2: function (jq, data) { },
        f3: function (obj, data, jq) { },
        f4: function () {
            try {
                			    gapi.load('client:auth2', function() {
                                gapi.client.init({
                                discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],
                                clientId: ExpressCraft.Gmail.ClientId,
                                scope: 'https://www.googleapis.com/auth/gmail.send'
                                }).then(function () {
                                // Listen for sign-in state changes.
                                ExpressCraft.Gmail.GoogleAuth = gapi.auth2.getAuthInstance()
                                gapi.auth2.getAuthInstance().signIn();

                                ExpressCraft.Gmail.PushEventsTimeCall();
                                });
                            });
                			    
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }
        }
    });

    Bridge.define("ExpressCraft.GmailMessage", {
        props: {
            ToEmail: null,
            Subject: null,
            Body: null,
            IsHTML: false,
            Attachments: null
        },
        ctors: {
            init: function () {
                this.Attachments = new (System.Collections.Generic.List$1(ExpressCraft.GmailMessageAttachment))();
            },
            ctor: function (toEmail, subject, body, isHTML) {
                this.$initialize();
                this.ToEmail = toEmail;
                this.Subject = subject;
                this.Body = body;
                this.IsHTML = isHTML;
            }
        }
    });

    Bridge.define("ExpressCraft.GmailMessageAttachment", {
        props: {
            Filename: null,
            Data: null,
            IsBase64: false
        },
        ctors: {
            ctor: function (filename, data, isBase64) {
                if (isBase64 === void 0) { isBase64 = false; }

                this.$initialize();
                this.Filename = filename;
                this.Data = data;
                this.IsBase64 = isBase64;
            }
        }
    });

    Bridge.define("ExpressCraft.GoogleCloudPrint", {
        statics: {
            fields: {
                ExternalGoogleCloudPrint: null
            },
            ctors: {
                init: function () {
                    this.ExternalGoogleCloudPrint = new ExpressCraft.ExternalPlugin("https://www.google.com/cloudprint/client/cpgadget.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.GoogleCloudPrint.ExternalGoogleCloudPrint.Setup();
                }
            }
        },
        fields: {
            _source: null,
            _mimetype: null,
            _encoding: null,
            _title: null,
            _gadget: null
        },
        ctors: {
            init: function () {
                this._encoding = "";
            },
            ctor: function (source, title, gcpmt, encoding) {
                if (title === void 0) { title = ""; }
                if (gcpmt === void 0) { gcpmt = 0; }
                if (encoding === void 0) { encoding = ""; }

                this.$initialize();
                System.Object.call(this);
                this._title = title;
                this._source = source;
                this._encoding = encoding;
                this._mimetype = System.String.replaceAll(System.Enum.format(ExpressCraft.GoogleCloudPrintingMimeType, gcpmt, "G").toLowerCase(), "_", ".");
            }
        },
        methods: {
            Show: function () {
                ExpressCraft.GoogleCloudPrint.ExternalGoogleCloudPrint.UsageCheck();

                			this._gadget = new cloudprint.Gadget();
                			
                if (!System.String.isNullOrWhiteSpace(this._encoding)) {
                    				this._gadget.setPrintDocument(this._mimetype, this._title, this._source, this._encoding);
                    				
                } else {
                    				this._gadget.setPrintDocument(this._mimetype, this._title, this._source);
                    				
                }
                			this._gadget.openPrintDialog();
                			this._gadget.setOnCloseCallback(this.clearContent);
                			
            },
            clearContent: function () {
                try {
                    ExpressCraft.Helper.Delete($(".__gcp_dialog_container_cls").parent().get(0));
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            Close: function () {
                if (this._gadget != null) {
                    				this._gadget.closePrintDialog();
                    				this._gadget = null;
                    				
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GoogleCloudPrintingMimeType", {
        $kind: "enum",
        statics: {
            fields: {
                Url: 0,
                DataUrl: 1,
                Google_Drawing: 2,
                Google_Drive: 3,
                Google_Kix: 4,
                Google_Mail: 5,
                Google_Presentation: 6,
                Google_Spreadsheet: 7
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellApparence", {
        fields: {
            IsBold: false,
            Alignment: "inherit",
            Forecolor: null
        },
        ctors: {
            init: function () {
                this.IsBold = false;
                this.Alignment = "left";
            },
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (isBold) {
                this.$initialize();
                this.IsBold = isBold;
            },
            $ctor2: function (isBold, alignment) {
                this.$initialize();
                this.IsBold = isBold;
                this.Alignment = alignment;
            },
            $ctor3: function (isBold, alignment, forecolor) {
                this.$initialize();
                this.IsBold = isBold;
                this.Alignment = alignment;
                this.Forecolor = forecolor;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplay", {
        fields: {
            UseDefaultElement: false
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                return null;
            },
            OnCreateDefault: function (originalElement, gridView, dataRowIndex, columnIndex) {
                return originalElement;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewColumn", {
        fields: {
            Column: null,
            View: null,
            Caption: null,
            Visible: false,
            CachedX: 0,
            FormatString: null,
            HeadingApparence: null,
            BodyApparence: null,
            CellDisplay: null,
            SortedMode: 0,
            FilterEdit: null,
            filterValue: null,
            AllowEdit: false,
            ReadOnly: false,
            _width: 0
        },
        props: {
            FilterValue: {
                get: function () {
                    return this.filterValue;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this.filterValue, value)) {
                        this.filterValue = value;
                        if (this.View.ShowAutoFilterRow) {
                            this.View.CalculateVisibleRows();
                        }
                    }
                }
            },
            Width: {
                get: function () {
                    return this._width;
                },
                set: function (value) {
                    if (value < 24) {
                        value = 24;
                    }
                    if (this._width !== value) {
                        this._width = value;
                        this.View.RenderGrid();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.FormatString = "";
                this.HeadingApparence = new ExpressCraft.GridViewCellApparence.ctor();
                this.BodyApparence = new ExpressCraft.GridViewCellApparence.ctor();
                this.SortedMode = ExpressCraft.GridViewSortMode.None;
                this.AllowEdit = true;
                this.ReadOnly = false;
            },
            ctor: function (view, width) {
                if (width === void 0) { width = 100; }

                this.$initialize();
                this.View = view;
                this._width = width;
            }
        },
        methods: {
            ValueMatchFilter: function (index) {
                if (this.filterValue == null) {
                    return true;
                }

                var abc = this.GetDisplayValueByDataRowHandle(index);

                switch (this.Column.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                    case ExpressCraft.DataType.Integer: 
                    case ExpressCraft.DataType.Long: 
                    case ExpressCraft.DataType.Float: 
                    case ExpressCraft.DataType.Double: 
                    case ExpressCraft.DataType.Decimal: 
                    case ExpressCraft.DataType.Bool: 
                    case ExpressCraft.DataType.Byte: 
                    case ExpressCraft.DataType.Short: 
                        return Bridge.referenceEquals(abc, this.filterValue);
                    case ExpressCraft.DataType.DateTime: 
                    case ExpressCraft.DataType.String: 
                        return System.String.startsWith((System.String.concat(abc, "")), System.String.concat(this.filterValue, ""));
                }
            },
            GetDataColumnIndex: function () {
                var length = this.View.DataSource.ColumnCount;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.View.DataSource.Columns.getItem(i), this.Column)) {
                        return i;
                    }
                }
                return -1;
            },
            GetDisplayValueByDataRowHandle: function (RowHandle, hasDataRowIndex) {
                if (hasDataRowIndex === void 0) { hasDataRowIndex = false; }
                if (this.View.DataSource._searchActive && !hasDataRowIndex) {
                    RowHandle = this.View.DataSource._searchResults.getItem(RowHandle);
                }
                if (System.String.isNullOrWhiteSpace(this.FormatString)) {
                    return this.Column.GetDisplayValue(RowHandle);
                } else {
                    return this.Column.GetDisplayValue$1(RowHandle, this.FormatString);
                }
            },
            GetDisplayValue: function (RowHandle) {
                if (this.View.VisibleRowHandles != null) {
                    RowHandle = this.View.VisibleRowHandles.getItem(RowHandle);
                }

                if (System.String.isNullOrWhiteSpace(this.FormatString)) {
                    return this.Column.GetDisplayValue(RowHandle);
                } else {
                    return this.Column.GetDisplayValue$1(RowHandle, this.FormatString);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewSortMode", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Asc: 1,
                Desc: 2
            }
        }
    });

    Bridge.define("ExpressCraft.HardSoftList$1", function (T) { return {
        fields: {
            _hhl: null,
            _hl: null,
            SL: null,
            Limit: 0,
            HardLength: 0,
            DefaultValue: Bridge.getDefaultValue(T)
        },
        ctors: {
            init: function () {
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
            },
            ctor: function (defaultValue, limit) {
                if (limit === void 0) { limit = 10000; }

                this.$initialize();
                this.DefaultValue = defaultValue;
                this.Limit = limit;
            }
        },
        methods: {
            GetIndexValueByHardListIndex: function (index) {
                return this._hl.getItem(index);
            },
            ClearAll: function () {
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
            },
            ClearAllSetHardRange: function (value, Indexs) {
                if (Indexs === void 0) { Indexs = []; }
                this.HardLength = 0;
                if (Indexs == null || Indexs.length === 0) {
                    this.ClearAll();
                } else {
                    if (Indexs.length > this.Limit) {
                        this.HardLength = Indexs.length;
                        this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                        this.SL = new (System.Collections.Generic.List$1(System.Int32))();

                        var max = 0;
                        for (var i = 0; i < this.HardLength; i = (i + 1) | 0) {
                            if (Indexs[System.Array.index(i, Indexs)] > max) {
                                max = Indexs[System.Array.index(i, Indexs)];
                            }
                        }
                        var length = (max + 1) | 0;
                        this._hhl = new (System.Collections.Generic.List$1(T))(length);

                        if (length === Indexs.length) {
                            for (var i1 = 0; i1 < this.HardLength; i1 = (i1 + 1) | 0) {
                                this._hhl.add(value);
                            }
                        } else {
                            for (var i2 = 0; i2 < length; i2 = (i2 + 1) | 0) {
                                this._hhl.add(this.DefaultValue);
                            }
                            for (var i3 = 0; i3 < this.HardLength; i3 = (i3 + 1) | 0) {
                                this._hhl.setItem(Indexs[System.Array.index(i3, Indexs)], value);
                            }
                        }
                    } else {
                        this._hhl = new (System.Collections.Generic.List$1(T))();
                        this.HardLength = Indexs.length;
                        this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))(this.HardLength);
                        for (var i4 = 0; i4 < this.HardLength; i4 = (i4 + 1) | 0) {
                            this._hl.add(new (ExpressCraft.IndexValue$1(T))(Indexs[System.Array.index(i4, Indexs)], value));
                        }
                        this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                    }
                }
            },
            ClearSoftList: function () {
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
            },
            ClearAndAddOrSet: function (value, index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
                this.AddOrSet(value, index, AddToSoftList);
            },
            GetHardOrSoftIndexValue: function (index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                var length = this.SL.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    var slI = this.SL.getItem(i);
                    if (this._hl.getItem(slI).Index === index) {
                        return this._hl.getItem(slI);
                    }
                }

                length = this._hl.Count;

                for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                    var hli = this._hl.getItem(i1);
                    if (hli.Index === index) {
                        if (AddToSoftList) {
                            this.SL.add(i1);
                        }
                        return hli;
                    }
                }

                return null;
            },
            GetHardIndexValue: function (index) {
                var length = this._hl.Count;

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    var hli = this._hl.getItem(i);
                    if (hli.Index === index.v) {
                        index.v = i;
                        return hli;
                    }
                }
                index.v = length;

                return null;
            },
            GetValue: function (index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                if (this.HardLength > this.Limit) {
                    return this._hhl.getItem(index);
                }
                var hiv = this.GetHardOrSoftIndexValue(index, AddToSoftList);
                if (hiv == null) {
                    return this.DefaultValue;
                }
                return hiv.Value;
            },
            GetIndex: function (index) {
                if (this.HardLength > this.Limit) {
                    return index;
                }

                var hiv = this.GetHardOrSoftIndexValue(index);
                if (hiv == null) {
                    return -1;
                }
                return hiv.Index;
            },
            AddOrSet: function (value, index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                if (this.HardLength > this.Limit) {
                    if (index >= this.HardLength) {
                        var addDiff = ((((index + 1) | 0)) - this._hhl.Count) | 0;
                        if (addDiff > 0) {
                            var data = System.Array.init(addDiff, function (){
                                return Bridge.getDefaultValue(T);
                            }, T);
                            for (var i = 0; i < addDiff; i = (i + 1) | 0) {
                                data[System.Array.index(i, data)] = this.DefaultValue;
                            }
                            this._hhl.addRange(data);
                        }
                        this._hhl.add(value);
                        this.HardLength = this._hhl.Count;
                    } else {
                        this._hhl.setItem(index, value);
                    }
                    return;
                }

                var length = this.SL.Count;
                for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                    var hli = this._hl.getItem(this.SL.getItem(i1));
                    if (hli.Index === index) {
                        hli.Value = value;
                        return;
                    }
                }

                var hindex = { v : index };
                var hiv = this.GetHardIndexValue(hindex);
                if (hiv == null) {
                    this._hl.add(((hiv = new (ExpressCraft.IndexValue$1(T))(index, value))));
                } else {
                    hiv.Value = value;
                }

                if (AddToSoftList) {
                    this.SL.add(hindex.v);
                }
            },
            Remove: function (index, OnlySoftList) {
                if (OnlySoftList === void 0) { OnlySoftList = false; }
                if (this.HardLength > this.Limit) {
                    if (((this.HardLength - 1) | 0) > this.Limit) {
                        this._hhl.setItem(index, this.DefaultValue);
                    } else {
                        for (var i = 0; i < this.HardLength; i = (i + 1) | 0) {
                            if (i !== index && !Bridge.equals(this._hhl.getItem(i), this.DefaultValue)) {
                                this._hl.add(new (ExpressCraft.IndexValue$1(T))(i, this._hhl.getItem(i)));
                            }
                        }

                        this.HardLength = (this.HardLength - 1) | 0;
                    }
                } else {
                    var Length = this.SL.Count;
                    for (var i1 = 0; i1 < Length; i1 = (i1 + 1) | 0) {
                        var sli = this.SL.getItem(i1);
                        if (this._hl.getItem(sli).Index === index) {
                            this.SL.removeAt(i1);
                            if (OnlySoftList) {
                                return;
                            }
                            this._hl.removeAt(sli);
                            return;
                        }
                    }
                    var length = this._hl.Count;

                    for (var i2 = 0; i2 < length; i2 = (i2 + 1) | 0) {
                        var hli = this._hl.getItem(i2);
                        if (hli.Index === index) {
                            this._hl.removeAt(i2);
                            return;
                        }
                    }
                }
            }
        }
    }; });

    Bridge.define("ExpressCraft.Helper", {
        statics: {
            fields: {
                _notDesktop: false,
                _setupDesktop: false
            },
            props: {
                NotDesktop: {
                    get: function () {
                        var $t;
                        var result = ExpressCraft.Helper._setupDesktop ? ExpressCraft.Helper._notDesktop : ($t = (!Bridge.Browser.isDesktop || ExpressCraft.Helper.IsIPhone() || ExpressCraft.Helper.IsIPad()), ExpressCraft.Helper._notDesktop = $t, $t);
                        ExpressCraft.Helper._setupDesktop = true;
                        return result;
                    }
                }
            },
            methods: {
                IsIPhone: function () {
                    var r = false;
                    r = !!navigator.userAgent.match(/iPhone/i);
                    return r;
                },
                IsIPad: function () {
                    var r = false;
                    r = !!navigator.userAgent.match(/iPad/i);
                    return r;
                },
                IsTrue: function (value) {
                    return (Bridge.referenceEquals(((value = value.toLowerCase())), "true") || Bridge.referenceEquals(value, "1") || Bridge.referenceEquals(value, "on")) ? 1 : 0;
                },
                ToInt: function (value) {
                    return parseInt(value);
                },
                ToFloat: function (value) {
                    return parseFloat(value);
                },
                ToStr: function (value) {
                    return value;
                },
                IsFireFox: function () {
                    var value = false;

                    if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1)
                    {
                        value = true;
                    }
                    			
                    return value;
                },
                FocusElement: function (element) {
                    Bridge.global.setTimeout(function () {
                        element.focus();
                    }, 0);
                },
                StripNonNumberString: function (value) {
                    if (System.String.isNullOrWhiteSpace(value)) {
                        return System.Decimal(0);
                    }

                    var builder = new System.Text.StringBuilder();

                    var AddedDigits = false;

                    for (var i = 0; i < value.length; i = (i + 1) | 0) {
                        if (System.Char.isDigit(value.charCodeAt(i)) || value.charCodeAt(i) === 46) {
                            builder.append(String.fromCharCode(value.charCodeAt(i)));
                            AddedDigits = true;
                        } else if (value.charCodeAt(i) === 45 && !AddedDigits) {
                            builder.append(String.fromCharCode(value.charCodeAt(i)));
                            AddedDigits = true;
                        }
                    }

                    var value1 = { v : System.Decimal(0) };
                    System.Decimal.tryParse(builder.toString(), null, value1);

                    return value1.v;
                },
                StripNonDateString: function (value) {
                    if (System.String.isNullOrWhiteSpace(value)) {
                        return System.DateTime.getMinValue();
                    }

                    try {
                        value = System.String.replaceAll(value.trim(), String.fromCharCode(92), String.fromCharCode(ExpressCraft.Settings.DateSeperator));

                        var startsWithPlus = (System.String.startsWith(value, "+"));
                        var startsWithMunus = !startsWithPlus && (System.String.startsWith(value, "-"));

                        if (startsWithMunus) {
                            value = value.substr(1);
                        }

                        value = System.String.replaceAll(value, String.fromCharCode(45), String.fromCharCode(ExpressCraft.Settings.DateSeperator));

                        var endsWithMonth = (startsWithPlus || startsWithMunus) && (System.String.endsWith(value.toLowerCase(), "m"));
                        var endsWithyear = !endsWithMonth && (startsWithPlus || startsWithMunus) && (System.String.endsWith(value.toLowerCase(), "y"));

                        if (Bridge.referenceEquals(value.toLowerCase(), "d")) {
                            return System.DateTime.getToday();
                        }

                        var builder = new System.Text.StringBuilder();

                        var Values = new (System.Collections.Generic.List$1(System.Int32))();

                        for (var i = 0; i < value.length; i = (i + 1) | 0) {
                            if (System.Char.isDigit(value.charCodeAt(i))) {
                                builder.append(String.fromCharCode(value.charCodeAt(i)));
                            } else {
                                if (value.charCodeAt(i) === ExpressCraft.Settings.DateSeperator) {
                                    Values.add(System.Int32.parse(builder.toString()));
                                    builder = new System.Text.StringBuilder();
                                }
                            }
                        }

                        if (builder.getLength() > 0) {
                            Values.add(System.Int32.parse(builder.toString()));
                        }

                        builder = null;
                        if (Values.Count >= 3) {
                            return System.DateTime.create(Values.getItem(ExpressCraft.Settings.YearPosition), Values.getItem(ExpressCraft.Settings.MonthPosition), Values.getItem(ExpressCraft.Settings.DayPosition));
                        } else if (Values.Count === 1) {
                            if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.First) {
                                if (startsWithPlus || startsWithMunus) {
                                    var date = System.DateTime.getToday();
                                    if (endsWithMonth) {
                                        date = System.DateTime.addMonths(date, startsWithMunus ? ((-Values.getItem(0)) | 0) : Values.getItem(0));
                                    } else if (endsWithyear) {
                                        if (startsWithMunus) {
                                            date = System.DateTime.addYears(date, ((-Values.getItem(0)) | 0));
                                        } else {
                                            date = System.DateTime.addYears(date, Values.getItem(0));
                                        }
                                    } else {
                                        date = System.DateTime.addDays(date, startsWithMunus ? ((-Values.getItem(0)) | 0) : Values.getItem(0));
                                    }
                                    if (System.DateTime.getHour(date) === 23) {
                                        System.DateTime.addHours(date, 1);
                                    }
                                    return date;
                                } else {
                                    return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), System.DateTime.getMonth(System.DateTime.getToday()), Values.getItem(0));
                                }
                            } else if (ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(0), System.DateTime.getDay(System.DateTime.getToday()));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(Values.getItem(0), System.DateTime.getMonth(System.DateTime.getToday()), System.DateTime.getDay(System.DateTime.getToday()));
                            }
                        } else if (Values.Count === 2) {
                            if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.First && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.Second) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(1), Values.getItem(0));
                            } else if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.Second && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(0), Values.getItem(1));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.Second && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(Values.getItem(1), Values.getItem(0), System.DateTime.getDay(System.DateTime.getToday()));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.First && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.Second) {
                                return System.DateTime.create(Values.getItem(0), Values.getItem(1), System.DateTime.getDay(System.DateTime.getToday()));
                            }
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }

                    return System.DateTime.getMinValue();
                },
                AddTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    return value.mul((System.Decimal(1).add(taxPercent)));
                },
                GetPortionTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return System.Decimal(0);
                    }

                    return value.sub(value.div((System.Decimal(1).add(taxPercent))));
                },
                DeductTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    return value.sub(ExpressCraft.Helper.GetPortionTax(value, taxPercent));
                },
                IsNumber: function (value) {
                    return Bridge.is(value, System.SByte) || Bridge.is(value, System.Byte) || Bridge.is(value, System.Int16) || Bridge.is(value, System.UInt16) || Bridge.is(value, System.Int32) || Bridge.is(value, System.UInt32) || Bridge.is(value, System.Int64) || Bridge.is(value, System.UInt64) || Bridge.is(value, System.Single) || Bridge.is(value, System.Double) || Bridge.is(value, System.Decimal);
                },
                Empty: function (element) {
                    			var len = element.childNodes.length;
                    			while(len--)
                    			{
                    				element.removeChild(element.lastChild);
                    			};
                    			
                },
                GetClientMouseLocation: function (e) {
                    var x = 0;
                    var y = 0;
                    			  if (!e) var e = window.event;

                    			  if (e.pageX || e.pageY) {
                    				x = e.pageX;
                    				y = e.pageY;
                    			  } else if (e.clientX || e.clientY) {
                    				x = e.clientX + document.body.scrollLeft +
                    								   document.documentElement.scrollLeft;
                    				y = e.clientY + document.body.scrollTop +
                    								   document.documentElement.scrollTop;
                    			  }
                    			
                    return new ExpressCraft.Vector2.$ctor1(x, y);
                },
                SetChecked$1: function (input, value) {
                    ExpressCraft.Helper.SetChecked(input.Content, value);
                },
                SetChecked: function (input, value) {
                    var check = false;
                    if (value != null) {
                        if (Bridge.is(value, System.Boolean) || ExpressCraft.Helper.IsNumber(value)) {
                            check = System.Nullable.getValue(Bridge.cast(Bridge.unbox(value), System.Boolean));
                        } else if (Bridge.is(value, System.String)) {
                            var strValue = Bridge.cast(value, System.String);
                            check = (Bridge.referenceEquals(strValue, "1") || System.String.compare(strValue.toLowerCase(), "true") === 0);
                        }
                    }
                    if (!check) {
                        input.removeAttribute(ExpressCraft.GridViewCellDisplayCheckBox.resource_checked);
                    } else {
                        input.setAttribute(ExpressCraft.GridViewCellDisplayCheckBox.resource_checked, null);
                    }
                },
                /**
                 * IE does not support .remove on Element use delete
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {Element}    c
                 * @return  {void}
                 */
                Delete: function (c) {
                    if (c != null && c.parentElement != null && c.parentElement.contains(c)) {
                        c.parentElement.removeChild(c);
                    }
                },
                ToPx: function (i) {
                    return i + 'px';
                },
                Log: function (jso) {
                    console.log(Bridge.unbox(jso));
                },
                AppendChildren$1: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            c.appendChild(Nodes[System.Array.index(i, Nodes)]);
                        }
                    }
                },
                AppendChildren: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    ExpressCraft.Helper.AppendChildren$2(c.Content, Nodes);

                    return c;
                },
                AppendChildren$2: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            c.appendChild(ExpressCraft.Control.op_Implicit(Nodes[System.Array.index(i, Nodes)]));
                        }
                    }
                },
                AppendChildrenTabIndex: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            Nodes[System.Array.index(i, Nodes)].Content.tabIndex = i;
                            c.appendChild(ExpressCraft.Control.op_Implicit(Nodes[System.Array.index(i, Nodes)]));
                        }
                    }
                },
                AppendChildrenTabIndex$1: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    ExpressCraft.Helper.AppendChildrenTabIndex(c.Content, Nodes);
                },
                AppendChild: function (c, Node) {
                    c.Content.appendChild(ExpressCraft.Control.op_Implicit(Node));
                    return c;
                },
                SetBounds: function (c, left, top, width, height) {
                    ExpressCraft.Helper.SetBounds$1(c.Content, left, top, width, height);

                    return c;
                },
                SetBounds$1: function (c, left, top, width, height) {
                    c.style.left = ExpressCraft.Helper.ToHtmlValue(left);
                    c.style.top = ExpressCraft.Helper.ToHtmlValue(top);
                    c.style.width = ExpressCraft.Helper.ToHtmlValue(width);
                    c.style.height = ExpressCraft.Helper.ToHtmlValue(height);
                },
                SetBoundsFull: function (c) {
                    ExpressCraft.Helper.SetBoundsFull$1(c.Content);

                    return c;
                },
                SetBoundsFull$1: function (c) {
                    ExpressCraft.Helper.SetBounds$1(c, 0, 0, "100%", "100%");
                },
                SetSize: function (c, width, height) {
                    ExpressCraft.Helper.SetSize$1(c.Content, width, height);

                    return c;
                },
                SetSize$1: function (c, width, height) {
                    c.style.width = ExpressCraft.Helper.ToHtmlValue(width);
                    c.style.height = ExpressCraft.Helper.ToHtmlValue(height);
                },
                ToHtmlValue: function (value) {
                    if (Bridge.is(value, System.String)) {
                        return ExpressCraft.Vector2.pf(value);
                    } else {
                        if (Bridge.is(value, System.Int32)) {
                            return ExpressCraft.Helper.ToPx(Bridge.box(value, System.Int32));
                        } else {
                            return ExpressCraft.Helper.ToPx(Bridge.box(value, System.Single, System.Single.format, System.Single.getHashCode));
                        }
                    }
                },
                SetImage$1: function (c, str, useURL, useResource, center) {
                    if (useURL === void 0) { useURL = true; }
                    if (useResource === void 0) { useResource = true; }
                    if (center === void 0) { center = true; }
                    if (!System.String.startsWith(str, "url(")) {
                        str = useURL ? ExpressCraft.Control.GetImageStringURI(str, useResource) : ExpressCraft.Control.GetImageString(str);
                    }
                    ExpressCraft.Helper.SetImage(c.Content, str, useURL, center);
                },
                SetImage: function (c, str, useURL, center) {
                    if (useURL === void 0) { useURL = true; }
                    if (center === void 0) { center = true; }
                    if (System.String.isNullOrWhiteSpace(str)) {
                        c.style.background = "";
                        c.style.backgroundSize = "";
                        return;
                    } else if (!System.String.startsWith(str, "url(")) {
                        str = useURL ? ExpressCraft.Control.GetImageStringURI(str) : ExpressCraft.Control.GetImageString(str);
                    }
                    c.style.background = str;
                    if (center) {
                        c.style.backgroundSize = "100% 100%";
                    }
                },
                SetLocation$2: function (c, left, top) {
                    ExpressCraft.Helper.SetLocation(c.Content, ExpressCraft.Helper.ToPx(Bridge.box(left, System.Int32)), ExpressCraft.Helper.ToPx(Bridge.box(top, System.Int32)));
                },
                SetLocation$1: function (c, left, top) {
                    ExpressCraft.Helper.SetLocation(c.Content, left, top);
                },
                SetLocation: function (c, left, top) {
                    c.style.left = ExpressCraft.Helper.ToHtmlValue(left);
                    c.style.top = ExpressCraft.Helper.ToHtmlValue(top);
                },
                /**
                 * HtmlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {System.Object}    obj
                 * @return  {string}
                 */
                HtmlEscape: function (obj) {
                    return ExpressCraft.Helper.HtmlEscape$1((Bridge.as(obj, System.String)));
                },
                /**
                 * HtmlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlEscape$1: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(ExpressCraft.Helper.HtmlUrlEscape(input), "\\/", "&#x2F"), "\"", "&quot") : "";
                },
                /**
                 * HtmlUrlUnescape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUrlUnescape: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(input, "&amp", "&"), "&lt", "<"), "&gt", ">"), "&#x27", "'") : "";
                },
                /**
                 * HtmlUrlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUrlEscape: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(input, "&", "&amp"), "<", "&lt"), ">", "&gt"), "'", "&#x27") : "";
                },
                /**
                 * HtmlUnescape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUnescape: function (input) {
                    return !ExpressCraft.Helper.IsEmpty(input) ? System.String.replaceAll(System.String.replaceAll(ExpressCraft.Helper.HtmlUrlUnescape(input), "&#x2F", "\\/"), "&quot", "\"") : "";
                },
                ExchangeClass$1: function (control, oldClass, newClass) {
                    ExpressCraft.Helper.ExchangeClass(control.Content, oldClass, newClass);
                },
                ExchangeClass: function (control, oldClass, newClass) {
                    if (!ExpressCraft.Helper.IsEmpty(oldClass) && control.classList.contains(oldClass)) {
                        control.classList.remove(oldClass);
                    }
                    if (!ExpressCraft.Helper.IsEmpty(newClass) && !control.classList.contains(newClass)) {
                        control.classList.add(newClass);
                    }
                },
                IsEmpty: function (value) {
                    return System.String.isNullOrWhiteSpace(value);
                },
                StopAndLog: function (sw, logName) {
                    if (logName === void 0) { logName = "Task"; }
                    sw.stop();
                    ExpressCraft.ConsoleForm.Log(System.String.concat(logName, " took ", sw.milliseconds(), "ms to finish"));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Helper.DataTableJson", {
        statics: {
            methods: {
                FromExternal: function (o) {
                    var x;
                    x = Bridge.merge(Bridge.createInstance(ExpressCraft.Helper.DataTableJson), o);
                    return x;
                },
                Parse: function (o) {
                    var dt = new ExpressCraft.DataTable();
                    var length = o.fieldNames.length;
                    for (var i = 0; i < length; i = (i + 1) | 0) {
                        dt.AddColumn(o.fieldNames[i], o.dataTypes[i]);
                    }
                    if (o.rows != null) {
                        length = o.rows.length;
                        dt.BeginNewRow(length);

                        for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                            var dr = dt.NewRow();
                            dr.batchData = o.rows[i1];
                        }
                        dt.AcceptNewRows();
                    }
                    return dt;
                }
            }
        },
        fields: {
            fieldNames: null,
            rows: null,
            dataTypes: null
        },
        methods: {
            ToTable: function () {
                var dt = new ExpressCraft.DataTable();

                for (var i = 0; i < this.fieldNames.length; i = (i + 1) | 0) {
                    dt.AddColumn(this.fieldNames[System.Array.index(i, this.fieldNames)], this.dataTypes[System.Array.index(i, this.dataTypes)]);
                }

                if (this.rows != null) {
                    dt.BeginNewRow(this.rows.length);

                    for (var i1 = 0; i1 < this.rows.length; i1 = (i1 + 1) | 0) {
                        var dr = dt.NewRow();
                        dr.batchData = this.rows[System.Array.index(i1, this.rows)];
                    }
                    dt.AcceptNewRows();
                }

                return dt;
            }
        }
    });

    Bridge.define("ExpressCraft.IndexValue$1", function (T) { return {
        fields: {
            Index: 0,
            Value: Bridge.getDefaultValue(T)
        },
        ctors: {
            ctor: function (index, value) {
                this.$initialize();
                this.Index = index;
                this.Value = value;
            }
        }
    }; });

    Bridge.define("ExpressCraft.IPages", {
        $kind: "interface"
    });

    Bridge.define("ExpressCraft.KeyCodes", {
        statics: {
            fields: {
                Modifiers: 0,
                None: 0,
                LButton: 0,
                RButton: 0,
                Cancel: 0,
                MButton: 0,
                XButton1: 0,
                XButton2: 0,
                Back: 0,
                Tab: 0,
                LineFeed: 0,
                Clear: 0,
                Return: 0,
                Enter: 0,
                ShiftKey: 0,
                ControlKey: 0,
                Menu: 0,
                Pause: 0,
                Capital: 0,
                CapsLock: 0,
                KanaMode: 0,
                HanguelMode: 0,
                HangulMode: 0,
                JunjaMode: 0,
                FinalMode: 0,
                HanjaMode: 0,
                KanjiMode: 0,
                Escape: 0,
                IMEConvert: 0,
                IMENonconvert: 0,
                IMEAccept: 0,
                IMEAceept: 0,
                IMEModeChange: 0,
                Space: 0,
                Prior: 0,
                PageUp: 0,
                Next: 0,
                PageDown: 0,
                End: 0,
                Home: 0,
                Left: 0,
                Up: 0,
                Right: 0,
                Down: 0,
                Select: 0,
                Print: 0,
                Execute: 0,
                Snapshot: 0,
                PrintScreen: 0,
                Insert: 0,
                Delete: 0,
                Help: 0,
                D0: 0,
                D1: 0,
                D2: 0,
                D3: 0,
                D4: 0,
                D5: 0,
                D6: 0,
                D7: 0,
                D8: 0,
                D9: 0,
                A: 0,
                B: 0,
                C: 0,
                D: 0,
                E: 0,
                F: 0,
                G: 0,
                H: 0,
                I: 0,
                J: 0,
                K: 0,
                L: 0,
                M: 0,
                N: 0,
                O: 0,
                P: 0,
                Q: 0,
                R: 0,
                S: 0,
                T: 0,
                U: 0,
                V: 0,
                W: 0,
                X: 0,
                Y: 0,
                Z: 0,
                LWin: 0,
                RWin: 0,
                Apps: 0,
                Sleep: 0,
                NumPad0: 0,
                NumPad1: 0,
                NumPad2: 0,
                NumPad3: 0,
                NumPad4: 0,
                NumPad5: 0,
                NumPad6: 0,
                NumPad7: 0,
                NumPad8: 0,
                NumPad9: 0,
                Multiply: 0,
                Add: 0,
                Separator: 0,
                Subtract: 0,
                Decimal: 0,
                Divide: 0,
                F1: 0,
                F2: 0,
                F3: 0,
                F4: 0,
                F5: 0,
                F6: 0,
                F7: 0,
                F8: 0,
                F9: 0,
                F10: 0,
                F11: 0,
                F12: 0,
                F13: 0,
                F14: 0,
                F15: 0,
                F16: 0,
                F17: 0,
                F18: 0,
                F19: 0,
                F20: 0,
                F21: 0,
                F22: 0,
                F23: 0,
                F24: 0,
                NumLock: 0,
                Scroll: 0,
                LShiftKey: 0,
                RShiftKey: 0,
                LControlKey: 0,
                RControlKey: 0,
                LMenu: 0,
                RMenu: 0,
                BrowserBack: 0,
                BrowserForward: 0,
                BrowserRefresh: 0,
                BrowserStop: 0,
                BrowserSearch: 0,
                BrowserFavorites: 0,
                BrowserHome: 0,
                VolumeMute: 0,
                VolumeDown: 0,
                VolumeUp: 0,
                MediaNextTrack: 0,
                MediaPreviousTrack: 0,
                MediaStop: 0,
                MediaPlayPause: 0,
                LaunchMail: 0,
                SelectMedia: 0,
                LaunchApplication1: 0,
                LaunchApplication2: 0,
                OemSemicolon: 0,
                Oem1: 0,
                Oemplus: 0,
                Oemcomma: 0,
                OemMinus: 0,
                OemPeriod: 0,
                OemQuestion: 0,
                Oem2: 0,
                Oemtilde: 0,
                Oem3: 0,
                OemOpenBrackets: 0,
                Oem4: 0,
                OemPipe: 0,
                Oem5: 0,
                OemCloseBrackets: 0,
                Oem6: 0,
                OemQuotes: 0,
                Oem7: 0,
                Oem8: 0,
                OemBackslash: 0,
                Oem102: 0,
                ProcessKey: 0,
                Packet: 0,
                Attn: 0,
                Crsel: 0,
                Exsel: 0,
                EraseEof: 0,
                Play: 0,
                Zoom: 0,
                NoName: 0,
                Pa1: 0,
                OemClear: 0,
                KeyCode: 0,
                Shift: 0,
                Control: 0,
                Alt: 0
            },
            ctors: {
                init: function () {
                    this.Modifiers = -65536;
                    this.None = 0;
                    this.LButton = 1;
                    this.RButton = 2;
                    this.Cancel = 3;
                    this.MButton = 4;
                    this.XButton1 = 5;
                    this.XButton2 = 6;
                    this.Back = 8;
                    this.Tab = 9;
                    this.LineFeed = 10;
                    this.Clear = 12;
                    this.Return = 13;
                    this.Enter = 13;
                    this.ShiftKey = 16;
                    this.ControlKey = 17;
                    this.Menu = 18;
                    this.Pause = 19;
                    this.Capital = 20;
                    this.CapsLock = 20;
                    this.KanaMode = 21;
                    this.HanguelMode = 21;
                    this.HangulMode = 21;
                    this.JunjaMode = 23;
                    this.FinalMode = 24;
                    this.HanjaMode = 25;
                    this.KanjiMode = 25;
                    this.Escape = 27;
                    this.IMEConvert = 28;
                    this.IMENonconvert = 29;
                    this.IMEAccept = 30;
                    this.IMEAceept = 30;
                    this.IMEModeChange = 31;
                    this.Space = 32;
                    this.Prior = 33;
                    this.PageUp = 33;
                    this.Next = 34;
                    this.PageDown = 34;
                    this.End = 35;
                    this.Home = 36;
                    this.Left = 37;
                    this.Up = 38;
                    this.Right = 39;
                    this.Down = 40;
                    this.Select = 41;
                    this.Print = 42;
                    this.Execute = 43;
                    this.Snapshot = 44;
                    this.PrintScreen = 44;
                    this.Insert = 45;
                    this.Delete = 46;
                    this.Help = 47;
                    this.D0 = 48;
                    this.D1 = 49;
                    this.D2 = 50;
                    this.D3 = 51;
                    this.D4 = 52;
                    this.D5 = 53;
                    this.D6 = 54;
                    this.D7 = 55;
                    this.D8 = 56;
                    this.D9 = 57;
                    this.A = 65;
                    this.B = 66;
                    this.C = 67;
                    this.D = 68;
                    this.E = 69;
                    this.F = 70;
                    this.G = 71;
                    this.H = 72;
                    this.I = 73;
                    this.J = 74;
                    this.K = 75;
                    this.L = 76;
                    this.M = 77;
                    this.N = 78;
                    this.O = 79;
                    this.P = 80;
                    this.Q = 81;
                    this.R = 82;
                    this.S = 83;
                    this.T = 84;
                    this.U = 85;
                    this.V = 86;
                    this.W = 87;
                    this.X = 88;
                    this.Y = 89;
                    this.Z = 90;
                    this.LWin = 91;
                    this.RWin = 92;
                    this.Apps = 93;
                    this.Sleep = 95;
                    this.NumPad0 = 96;
                    this.NumPad1 = 97;
                    this.NumPad2 = 98;
                    this.NumPad3 = 99;
                    this.NumPad4 = 100;
                    this.NumPad5 = 101;
                    this.NumPad6 = 102;
                    this.NumPad7 = 103;
                    this.NumPad8 = 104;
                    this.NumPad9 = 105;
                    this.Multiply = 106;
                    this.Add = 107;
                    this.Separator = 108;
                    this.Subtract = 109;
                    this.Decimal = 110;
                    this.Divide = 111;
                    this.F1 = 112;
                    this.F2 = 113;
                    this.F3 = 114;
                    this.F4 = 115;
                    this.F5 = 116;
                    this.F6 = 117;
                    this.F7 = 118;
                    this.F8 = 119;
                    this.F9 = 120;
                    this.F10 = 121;
                    this.F11 = 122;
                    this.F12 = 123;
                    this.F13 = 124;
                    this.F14 = 125;
                    this.F15 = 126;
                    this.F16 = 127;
                    this.F17 = 128;
                    this.F18 = 129;
                    this.F19 = 130;
                    this.F20 = 131;
                    this.F21 = 132;
                    this.F22 = 133;
                    this.F23 = 134;
                    this.F24 = 135;
                    this.NumLock = 144;
                    this.Scroll = 145;
                    this.LShiftKey = 160;
                    this.RShiftKey = 161;
                    this.LControlKey = 162;
                    this.RControlKey = 163;
                    this.LMenu = 164;
                    this.RMenu = 165;
                    this.BrowserBack = 166;
                    this.BrowserForward = 167;
                    this.BrowserRefresh = 168;
                    this.BrowserStop = 169;
                    this.BrowserSearch = 170;
                    this.BrowserFavorites = 171;
                    this.BrowserHome = 172;
                    this.VolumeMute = 173;
                    this.VolumeDown = 174;
                    this.VolumeUp = 175;
                    this.MediaNextTrack = 176;
                    this.MediaPreviousTrack = 177;
                    this.MediaStop = 178;
                    this.MediaPlayPause = 179;
                    this.LaunchMail = 180;
                    this.SelectMedia = 181;
                    this.LaunchApplication1 = 182;
                    this.LaunchApplication2 = 183;
                    this.OemSemicolon = 186;
                    this.Oem1 = 186;
                    this.Oemplus = 187;
                    this.Oemcomma = 188;
                    this.OemMinus = 189;
                    this.OemPeriod = 190;
                    this.OemQuestion = 191;
                    this.Oem2 = 191;
                    this.Oemtilde = 192;
                    this.Oem3 = 192;
                    this.OemOpenBrackets = 219;
                    this.Oem4 = 219;
                    this.OemPipe = 220;
                    this.Oem5 = 220;
                    this.OemCloseBrackets = 221;
                    this.Oem6 = 221;
                    this.OemQuotes = 222;
                    this.Oem7 = 222;
                    this.Oem8 = 223;
                    this.OemBackslash = 226;
                    this.Oem102 = 226;
                    this.ProcessKey = 229;
                    this.Packet = 231;
                    this.Attn = 246;
                    this.Crsel = 247;
                    this.Exsel = 248;
                    this.EraseEof = 249;
                    this.Play = 250;
                    this.Zoom = 251;
                    this.NoName = 252;
                    this.Pa1 = 253;
                    this.OemClear = 254;
                    this.KeyCode = 65535;
                    this.Shift = 65536;
                    this.Control = 131072;
                    this.Alt = 262144;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.KnownColor", {
        $kind: "enum",
        statics: {
            fields: {
                ActiveBorder: 1,
                ActiveCaption: 2,
                ActiveCaptionText: 3,
                AliceBlue: 28,
                AntiqueWhite: 29,
                AppWorkspace: 4,
                Aqua: 30,
                Aquamarine: 31,
                Azure: 32,
                Beige: 33,
                Bisque: 34,
                Black: 35,
                BlanchedAlmond: 36,
                Blue: 37,
                BlueViolet: 38,
                Brown: 39,
                BurlyWood: 40,
                ButtonFace: 168,
                ButtonHighlight: 169,
                ButtonShadow: 170,
                CadetBlue: 41,
                Chartreuse: 42,
                Chocolate: 43,
                Control: 5,
                ControlDark: 6,
                ControlDarkDark: 7,
                ControlLight: 8,
                ControlLightLight: 9,
                ControlText: 10,
                Coral: 44,
                CornflowerBlue: 45,
                Cornsilk: 46,
                Crimson: 47,
                Cyan: 48,
                DarkBlue: 49,
                DarkCyan: 50,
                DarkGoldenrod: 51,
                DarkGray: 52,
                DarkGreen: 53,
                DarkKhaki: 54,
                DarkMagenta: 55,
                DarkOliveGreen: 56,
                DarkOrange: 57,
                DarkOrchid: 58,
                DarkRed: 59,
                DarkSalmon: 60,
                DarkSeaGreen: 61,
                DarkSlateBlue: 62,
                DarkSlateGray: 63,
                DarkTurquoise: 64,
                DarkViolet: 65,
                DeepPink: 66,
                DeepSkyBlue: 67,
                Desktop: 11,
                DimGray: 68,
                DodgerBlue: 69,
                Firebrick: 70,
                FloralWhite: 71,
                ForestGreen: 72,
                Fuchsia: 73,
                Gainsboro: 74,
                GhostWhite: 75,
                Gold: 76,
                Goldenrod: 77,
                GradientActiveCaption: 171,
                GradientInactiveCaption: 172,
                Gray: 78,
                GrayText: 12,
                Green: 79,
                GreenYellow: 80,
                Highlight: 13,
                HighlightText: 14,
                Honeydew: 81,
                HotPink: 82,
                HotTrack: 15,
                InactiveBorder: 16,
                InactiveCaption: 17,
                InactiveCaptionText: 18,
                IndianRed: 83,
                Indigo: 84,
                Info: 19,
                InfoText: 20,
                Ivory: 85,
                Khaki: 86,
                Lavender: 87,
                LavenderBlush: 88,
                LawnGreen: 89,
                LemonChiffon: 90,
                LightBlue: 91,
                LightCoral: 92,
                LightCyan: 93,
                LightGoldenrodYellow: 94,
                LightGray: 95,
                LightGreen: 96,
                LightPink: 97,
                LightSalmon: 98,
                LightSeaGreen: 99,
                LightSkyBlue: 100,
                LightSlateGray: 101,
                LightSteelBlue: 102,
                LightYellow: 103,
                Lime: 104,
                LimeGreen: 105,
                Linen: 106,
                Magenta: 107,
                Maroon: 108,
                MediumAquamarine: 109,
                MediumBlue: 110,
                MediumOrchid: 111,
                MediumPurple: 112,
                MediumSeaGreen: 113,
                MediumSlateBlue: 114,
                MediumSpringGreen: 115,
                MediumTurquoise: 116,
                MediumVioletRed: 117,
                Menu: 21,
                MenuBar: 173,
                MenuHighlight: 174,
                MenuText: 22,
                MidnightBlue: 118,
                MintCream: 119,
                MistyRose: 120,
                Moccasin: 121,
                NavajoWhite: 122,
                Navy: 123,
                OldLace: 124,
                Olive: 125,
                OliveDrab: 126,
                Orange: 127,
                OrangeRed: 128,
                Orchid: 129,
                PaleGoldenrod: 130,
                PaleGreen: 131,
                PaleTurquoise: 132,
                PaleVioletRed: 133,
                PapayaWhip: 134,
                PeachPuff: 135,
                Peru: 136,
                Pink: 137,
                Plum: 138,
                PowderBlue: 139,
                Purple: 140,
                Red: 141,
                RosyBrown: 142,
                RoyalBlue: 143,
                SaddleBrown: 144,
                Salmon: 145,
                SandyBrown: 146,
                ScrollBar: 23,
                SeaGreen: 147,
                SeaShell: 148,
                Sienna: 149,
                Silver: 150,
                SkyBlue: 151,
                SlateBlue: 152,
                SlateGray: 153,
                Snow: 154,
                SpringGreen: 155,
                SteelBlue: 156,
                Tan: 157,
                Teal: 158,
                Thistle: 159,
                Tomato: 160,
                Transparent: 27,
                Turquoise: 161,
                Violet: 162,
                Wheat: 163,
                White: 164,
                WhiteSmoke: 165,
                Window: 24,
                WindowFrame: 25,
                WindowText: 26,
                Yellow: 166,
                YellowGreen: 167
            }
        }
    });

    Bridge.define("ExpressCraft.KnownColorTable", {
        statics: {
            fields: {
                AlphaShift: 0,
                BlueShift: 0,
                colorNameTable: null,
                colorTable: null,
                GreenShift: 0,
                RedShift: 0,
                Win32BlueShift: 0,
                Win32GreenShift: 0,
                Win32RedShift: 0
            },
            ctors: {
                init: function () {
                    this.AlphaShift = 24;
                    this.BlueShift = 0;
                    this.GreenShift = 8;
                    this.RedShift = 16;
                    this.Win32BlueShift = 16;
                    this.Win32GreenShift = 8;
                    this.Win32RedShift = 0;
                }
            },
            methods: {
                ArgbToKnownColor: function (targetARGB) {
                    ExpressCraft.KnownColorTable.EnsureColorTable();
                    for (var i = 0; i < ExpressCraft.KnownColorTable.colorTable.length; i = (i + 1) | 0) {
                        var num2 = ExpressCraft.KnownColorTable.colorTable[System.Array.index(i, ExpressCraft.KnownColorTable.colorTable)];
                        if (num2 === targetARGB) {
                            var color = ExpressCraft.Color.FromKnownColor(i);
                            if (!color.IsSystemColor) {
                                return color.$clone();
                            }
                        }
                    }
                    return ExpressCraft.Color.FromArgb(targetARGB);
                },
                Encode: function (alpha, red, green, blue) {
                    return ((((red << 16) | (green << 8)) | blue) | (alpha << 24));
                },
                EnsureColorNameTable: function () {
                    if (ExpressCraft.KnownColorTable.colorNameTable == null) {
                        ExpressCraft.KnownColorTable.InitColorNameTable();
                    }
                },
                EnsureColorTable: function () {
                    if (ExpressCraft.KnownColorTable.colorTable == null) {
                        ExpressCraft.KnownColorTable.InitColorTable();
                    }
                },
                FromWin32Value: function (value) {
                    return ExpressCraft.KnownColorTable.Encode(255, value & 255, (value >> 8) & 255, (value >> 16) & 255);
                },
                InitColorNameTable: function () {
                    var s = System.Array.init(175, null, System.String);
                    s[System.Array.index(1, s)] = "ActiveBorder";
                    s[System.Array.index(2, s)] = "ActiveCaption";
                    s[System.Array.index(3, s)] = "ActiveCaptionText";
                    s[System.Array.index(4, s)] = "AppWorkspace";
                    s[System.Array.index(168, s)] = "ButtonFace";
                    s[System.Array.index(169, s)] = "ButtonHighlight";
                    s[System.Array.index(170, s)] = "ButtonShadow";
                    s[System.Array.index(5, s)] = "Control";
                    s[System.Array.index(6, s)] = "ControlDark";
                    s[System.Array.index(7, s)] = "ControlDarkDark";
                    s[System.Array.index(8, s)] = "ControlLight";
                    s[System.Array.index(9, s)] = "ControlLightLight";
                    s[System.Array.index(10, s)] = "ControlText";
                    s[System.Array.index(11, s)] = "Desktop";
                    s[System.Array.index(171, s)] = "GradientActiveCaption";
                    s[System.Array.index(172, s)] = "GradientInactiveCaption";
                    s[System.Array.index(12, s)] = "GrayText";
                    s[System.Array.index(13, s)] = "Highlight";
                    s[System.Array.index(14, s)] = "HighlightText";
                    s[System.Array.index(15, s)] = "HotTrack";
                    s[System.Array.index(16, s)] = "InactiveBorder";
                    s[System.Array.index(17, s)] = "InactiveCaption";
                    s[System.Array.index(18, s)] = "InactiveCaptionText";
                    s[System.Array.index(19, s)] = "Info";
                    s[System.Array.index(20, s)] = "InfoText";
                    s[System.Array.index(21, s)] = "Menu";
                    s[System.Array.index(173, s)] = "MenuBar";
                    s[System.Array.index(174, s)] = "MenuHighlight";
                    s[System.Array.index(22, s)] = "MenuText";
                    s[System.Array.index(23, s)] = "ScrollBar";
                    s[System.Array.index(24, s)] = "Window";
                    s[System.Array.index(25, s)] = "WindowFrame";
                    s[System.Array.index(26, s)] = "WindowText";
                    s[System.Array.index(27, s)] = "Transparent";
                    s[System.Array.index(28, s)] = "AliceBlue";
                    s[System.Array.index(29, s)] = "AntiqueWhite";
                    s[System.Array.index(30, s)] = "Aqua";
                    s[System.Array.index(31, s)] = "Aquamarine";
                    s[System.Array.index(32, s)] = "Azure";
                    s[System.Array.index(33, s)] = "Beige";
                    s[System.Array.index(34, s)] = "Bisque";
                    s[System.Array.index(35, s)] = "Black";
                    s[System.Array.index(36, s)] = "BlanchedAlmond";
                    s[System.Array.index(37, s)] = "Blue";
                    s[System.Array.index(38, s)] = "BlueViolet";
                    s[System.Array.index(39, s)] = "Brown";
                    s[System.Array.index(40, s)] = "BurlyWood";
                    s[System.Array.index(41, s)] = "CadetBlue";
                    s[System.Array.index(42, s)] = "Chartreuse";
                    s[System.Array.index(43, s)] = "Chocolate";
                    s[System.Array.index(44, s)] = "Coral";
                    s[System.Array.index(45, s)] = "CornflowerBlue";
                    s[System.Array.index(46, s)] = "Cornsilk";
                    s[System.Array.index(47, s)] = "Crimson";
                    s[System.Array.index(48, s)] = "Cyan";
                    s[System.Array.index(49, s)] = "DarkBlue";
                    s[System.Array.index(50, s)] = "DarkCyan";
                    s[System.Array.index(51, s)] = "DarkGoldenrod";
                    s[System.Array.index(52, s)] = "DarkGray";
                    s[System.Array.index(53, s)] = "DarkGreen";
                    s[System.Array.index(54, s)] = "DarkKhaki";
                    s[System.Array.index(55, s)] = "DarkMagenta";
                    s[System.Array.index(56, s)] = "DarkOliveGreen";
                    s[System.Array.index(57, s)] = "DarkOrange";
                    s[System.Array.index(58, s)] = "DarkOrchid";
                    s[System.Array.index(59, s)] = "DarkRed";
                    s[System.Array.index(60, s)] = "DarkSalmon";
                    s[System.Array.index(61, s)] = "DarkSeaGreen";
                    s[System.Array.index(62, s)] = "DarkSlateBlue";
                    s[System.Array.index(63, s)] = "DarkSlateGray";
                    s[System.Array.index(64, s)] = "DarkTurquoise";
                    s[System.Array.index(65, s)] = "DarkViolet";
                    s[System.Array.index(66, s)] = "DeepPink";
                    s[System.Array.index(67, s)] = "DeepSkyBlue";
                    s[System.Array.index(68, s)] = "DimGray";
                    s[System.Array.index(69, s)] = "DodgerBlue";
                    s[System.Array.index(70, s)] = "Firebrick";
                    s[System.Array.index(71, s)] = "FloralWhite";
                    s[System.Array.index(72, s)] = "ForestGreen";
                    s[System.Array.index(73, s)] = "Fuchsia";
                    s[System.Array.index(74, s)] = "Gainsboro";
                    s[System.Array.index(75, s)] = "GhostWhite";
                    s[System.Array.index(76, s)] = "Gold";
                    s[System.Array.index(77, s)] = "Goldenrod";
                    s[System.Array.index(78, s)] = "Gray";
                    s[System.Array.index(79, s)] = "Green";
                    s[System.Array.index(80, s)] = "GreenYellow";
                    s[System.Array.index(81, s)] = "Honeydew";
                    s[System.Array.index(82, s)] = "HotPink";
                    s[System.Array.index(83, s)] = "IndianRed";
                    s[System.Array.index(84, s)] = "Indigo";
                    s[System.Array.index(85, s)] = "Ivory";
                    s[System.Array.index(86, s)] = "Khaki";
                    s[System.Array.index(87, s)] = "Lavender";
                    s[System.Array.index(88, s)] = "LavenderBlush";
                    s[System.Array.index(89, s)] = "LawnGreen";
                    s[System.Array.index(90, s)] = "LemonChiffon";
                    s[System.Array.index(91, s)] = "LightBlue";
                    s[System.Array.index(92, s)] = "LightCoral";
                    s[System.Array.index(93, s)] = "LightCyan";
                    s[System.Array.index(94, s)] = "LightGoldenrodYellow";
                    s[System.Array.index(95, s)] = "LightGray";
                    s[System.Array.index(96, s)] = "LightGreen";
                    s[System.Array.index(97, s)] = "LightPink";
                    s[System.Array.index(98, s)] = "LightSalmon";
                    s[System.Array.index(99, s)] = "LightSeaGreen";
                    s[System.Array.index(100, s)] = "LightSkyBlue";
                    s[System.Array.index(101, s)] = "LightSlateGray";
                    s[System.Array.index(102, s)] = "LightSteelBlue";
                    s[System.Array.index(103, s)] = "LightYellow";
                    s[System.Array.index(104, s)] = "Lime";
                    s[System.Array.index(105, s)] = "LimeGreen";
                    s[System.Array.index(106, s)] = "Linen";
                    s[System.Array.index(107, s)] = "Magenta";
                    s[System.Array.index(108, s)] = "Maroon";
                    s[System.Array.index(109, s)] = "MediumAquamarine";
                    s[System.Array.index(110, s)] = "MediumBlue";
                    s[System.Array.index(111, s)] = "MediumOrchid";
                    s[System.Array.index(112, s)] = "MediumPurple";
                    s[System.Array.index(113, s)] = "MediumSeaGreen";
                    s[System.Array.index(114, s)] = "MediumSlateBlue";
                    s[System.Array.index(115, s)] = "MediumSpringGreen";
                    s[System.Array.index(116, s)] = "MediumTurquoise";
                    s[System.Array.index(117, s)] = "MediumVioletRed";
                    s[System.Array.index(118, s)] = "MidnightBlue";
                    s[System.Array.index(119, s)] = "MintCream";
                    s[System.Array.index(120, s)] = "MistyRose";
                    s[System.Array.index(121, s)] = "Moccasin";
                    s[System.Array.index(122, s)] = "NavajoWhite";
                    s[System.Array.index(123, s)] = "Navy";
                    s[System.Array.index(124, s)] = "OldLace";
                    s[System.Array.index(125, s)] = "Olive";
                    s[System.Array.index(126, s)] = "OliveDrab";
                    s[System.Array.index(127, s)] = "Orange";
                    s[System.Array.index(128, s)] = "OrangeRed";
                    s[System.Array.index(129, s)] = "Orchid";
                    s[System.Array.index(130, s)] = "PaleGoldenrod";
                    s[System.Array.index(131, s)] = "PaleGreen";
                    s[System.Array.index(132, s)] = "PaleTurquoise";
                    s[System.Array.index(133, s)] = "PaleVioletRed";
                    s[System.Array.index(134, s)] = "PapayaWhip";
                    s[System.Array.index(135, s)] = "PeachPuff";
                    s[System.Array.index(136, s)] = "Peru";
                    s[System.Array.index(137, s)] = "Pink";
                    s[System.Array.index(138, s)] = "Plum";
                    s[System.Array.index(139, s)] = "PowderBlue";
                    s[System.Array.index(140, s)] = "Purple";
                    s[System.Array.index(141, s)] = "Red";
                    s[System.Array.index(142, s)] = "RosyBrown";
                    s[System.Array.index(143, s)] = "RoyalBlue";
                    s[System.Array.index(144, s)] = "SaddleBrown";
                    s[System.Array.index(145, s)] = "Salmon";
                    s[System.Array.index(146, s)] = "SandyBrown";
                    s[System.Array.index(147, s)] = "SeaGreen";
                    s[System.Array.index(148, s)] = "SeaShell";
                    s[System.Array.index(149, s)] = "Sienna";
                    s[System.Array.index(150, s)] = "Silver";
                    s[System.Array.index(151, s)] = "SkyBlue";
                    s[System.Array.index(152, s)] = "SlateBlue";
                    s[System.Array.index(153, s)] = "SlateGray";
                    s[System.Array.index(154, s)] = "Snow";
                    s[System.Array.index(155, s)] = "SpringGreen";
                    s[System.Array.index(156, s)] = "SteelBlue";
                    s[System.Array.index(157, s)] = "Tan";
                    s[System.Array.index(158, s)] = "Teal";
                    s[System.Array.index(159, s)] = "Thistle";
                    s[System.Array.index(160, s)] = "Tomato";
                    s[System.Array.index(161, s)] = "Turquoise";
                    s[System.Array.index(162, s)] = "Violet";
                    s[System.Array.index(163, s)] = "Wheat";
                    s[System.Array.index(164, s)] = "White";
                    s[System.Array.index(165, s)] = "WhiteSmoke";
                    s[System.Array.index(166, s)] = "Yellow";
                    s[System.Array.index(167, s)] = "YellowGreen";
                    ExpressCraft.KnownColorTable.colorNameTable = s;
                },
                InitColorTable: function () {
                    var c = System.Array.init(175, 0, System.Int32);

                    c[System.Array.index(27, c)] = 16777215;
                    c[System.Array.index(28, c)] = -984833;
                    c[System.Array.index(29, c)] = -332841;
                    c[System.Array.index(30, c)] = -16711681;
                    c[System.Array.index(31, c)] = -8388652;
                    c[System.Array.index(32, c)] = -983041;
                    c[System.Array.index(33, c)] = -657956;
                    c[System.Array.index(34, c)] = -6972;
                    c[System.Array.index(35, c)] = -16777216;
                    c[System.Array.index(36, c)] = -5171;
                    c[System.Array.index(37, c)] = -16776961;
                    c[System.Array.index(38, c)] = -7722014;
                    c[System.Array.index(39, c)] = -5952982;
                    c[System.Array.index(40, c)] = -2180985;
                    c[System.Array.index(41, c)] = -10510688;
                    c[System.Array.index(42, c)] = -8388864;
                    c[System.Array.index(43, c)] = -2987746;
                    c[System.Array.index(44, c)] = -32944;
                    c[System.Array.index(45, c)] = -10185235;
                    c[System.Array.index(46, c)] = -1828;
                    c[System.Array.index(47, c)] = -2354116;
                    c[System.Array.index(48, c)] = -16711681;
                    c[System.Array.index(49, c)] = -16777077;
                    c[System.Array.index(50, c)] = -16741493;
                    c[System.Array.index(51, c)] = -4684277;
                    c[System.Array.index(52, c)] = -5658199;
                    c[System.Array.index(53, c)] = -16751616;
                    c[System.Array.index(54, c)] = -4343957;
                    c[System.Array.index(55, c)] = -7667573;
                    c[System.Array.index(56, c)] = -11179217;
                    c[System.Array.index(57, c)] = -29696;
                    c[System.Array.index(58, c)] = -6737204;
                    c[System.Array.index(59, c)] = -7667712;
                    c[System.Array.index(60, c)] = -1468806;
                    c[System.Array.index(61, c)] = -7357301;
                    c[System.Array.index(62, c)] = -12042869;
                    c[System.Array.index(63, c)] = -13676721;
                    c[System.Array.index(64, c)] = -16724271;
                    c[System.Array.index(65, c)] = -7077677;
                    c[System.Array.index(66, c)] = -60269;
                    c[System.Array.index(67, c)] = -16728065;
                    c[System.Array.index(68, c)] = -9868951;
                    c[System.Array.index(69, c)] = -14774017;
                    c[System.Array.index(70, c)] = -5103070;
                    c[System.Array.index(71, c)] = -1296;
                    c[System.Array.index(72, c)] = -14513374;
                    c[System.Array.index(73, c)] = -65281;
                    c[System.Array.index(74, c)] = -2302756;
                    c[System.Array.index(75, c)] = -460545;
                    c[System.Array.index(76, c)] = -10496;
                    c[System.Array.index(77, c)] = -2448096;
                    c[System.Array.index(78, c)] = -8355712;
                    c[System.Array.index(79, c)] = -16744448;
                    c[System.Array.index(80, c)] = -5374161;
                    c[System.Array.index(81, c)] = -983056;
                    c[System.Array.index(82, c)] = -38476;
                    c[System.Array.index(83, c)] = -3318692;
                    c[System.Array.index(84, c)] = -11861886;
                    c[System.Array.index(85, c)] = -16;
                    c[System.Array.index(86, c)] = -989556;
                    c[System.Array.index(87, c)] = -1644806;
                    c[System.Array.index(88, c)] = -3851;
                    c[System.Array.index(89, c)] = -8586240;
                    c[System.Array.index(90, c)] = -1331;
                    c[System.Array.index(91, c)] = -5383962;
                    c[System.Array.index(92, c)] = -1015680;
                    c[System.Array.index(93, c)] = -2031617;
                    c[System.Array.index(94, c)] = -329006;
                    c[System.Array.index(95, c)] = -2894893;
                    c[System.Array.index(96, c)] = -7278960;
                    c[System.Array.index(97, c)] = -18751;
                    c[System.Array.index(98, c)] = -24454;
                    c[System.Array.index(99, c)] = -14634326;
                    c[System.Array.index(100, c)] = -7876870;
                    c[System.Array.index(101, c)] = -8943463;
                    c[System.Array.index(102, c)] = -5192482;
                    c[System.Array.index(103, c)] = -32;
                    c[System.Array.index(104, c)] = -16711936;
                    c[System.Array.index(105, c)] = -13447886;
                    c[System.Array.index(106, c)] = -331546;
                    c[System.Array.index(107, c)] = -65281;
                    c[System.Array.index(108, c)] = -8388608;
                    c[System.Array.index(109, c)] = -10039894;
                    c[System.Array.index(110, c)] = -16777011;
                    c[System.Array.index(111, c)] = -4565549;
                    c[System.Array.index(112, c)] = -7114533;
                    c[System.Array.index(113, c)] = -12799119;
                    c[System.Array.index(114, c)] = -8689426;
                    c[System.Array.index(115, c)] = -16713062;
                    c[System.Array.index(116, c)] = -12004916;
                    c[System.Array.index(117, c)] = -3730043;
                    c[System.Array.index(118, c)] = -15132304;
                    c[System.Array.index(119, c)] = -655366;
                    c[System.Array.index(120, c)] = -6943;
                    c[System.Array.index(121, c)] = -6987;
                    c[System.Array.index(122, c)] = -8531;
                    c[System.Array.index(123, c)] = -16777088;
                    c[System.Array.index(124, c)] = -133658;
                    c[System.Array.index(125, c)] = -8355840;
                    c[System.Array.index(126, c)] = -9728477;
                    c[System.Array.index(127, c)] = -23296;
                    c[System.Array.index(128, c)] = -47872;
                    c[System.Array.index(129, c)] = -2461482;
                    c[System.Array.index(130, c)] = -1120086;
                    c[System.Array.index(131, c)] = -6751336;
                    c[System.Array.index(132, c)] = -5247250;
                    c[System.Array.index(133, c)] = -2396013;
                    c[System.Array.index(134, c)] = -4139;
                    c[System.Array.index(135, c)] = -9543;
                    c[System.Array.index(136, c)] = -3308225;
                    c[System.Array.index(137, c)] = -16181;
                    c[System.Array.index(138, c)] = -2252579;
                    c[System.Array.index(139, c)] = -5185306;
                    c[System.Array.index(140, c)] = -8388480;
                    c[System.Array.index(141, c)] = -65536;
                    c[System.Array.index(142, c)] = -4419697;
                    c[System.Array.index(143, c)] = -12490271;
                    c[System.Array.index(144, c)] = -7650029;
                    c[System.Array.index(145, c)] = -360334;
                    c[System.Array.index(146, c)] = -744352;
                    c[System.Array.index(147, c)] = -13726889;
                    c[System.Array.index(148, c)] = -2578;
                    c[System.Array.index(149, c)] = -6270419;
                    c[System.Array.index(150, c)] = -4144960;
                    c[System.Array.index(151, c)] = -7876885;
                    c[System.Array.index(152, c)] = -9807155;
                    c[System.Array.index(153, c)] = -9404272;
                    c[System.Array.index(154, c)] = -1286;
                    c[System.Array.index(155, c)] = -16711809;
                    c[System.Array.index(156, c)] = -12156236;
                    c[System.Array.index(157, c)] = -2968436;
                    c[System.Array.index(158, c)] = -16744320;
                    c[System.Array.index(159, c)] = -2572328;
                    c[System.Array.index(160, c)] = -40121;
                    c[System.Array.index(161, c)] = -12525360;
                    c[System.Array.index(162, c)] = -1146130;
                    c[System.Array.index(163, c)] = -663885;
                    c[System.Array.index(164, c)] = -1;
                    c[System.Array.index(165, c)] = -657931;
                    c[System.Array.index(166, c)] = -256;
                    c[System.Array.index(167, c)] = -6632142;
                    ExpressCraft.KnownColorTable.colorTable = c;
                },
                KnownColorToArgb: function (color) {
                    ExpressCraft.KnownColorTable.EnsureColorTable();
                    if (color <= ExpressCraft.KnownColor.MenuHighlight) {
                        return ExpressCraft.KnownColorTable.colorTable[System.Array.index(color, ExpressCraft.KnownColorTable.colorTable)];
                    }
                    return 0;
                },
                KnownColorToName: function (color) {
                    ExpressCraft.KnownColorTable.EnsureColorNameTable();
                    if (color <= ExpressCraft.KnownColor.MenuHighlight) {
                        return ExpressCraft.KnownColorTable.colorNameTable[System.Array.index(color, ExpressCraft.KnownColorTable.colorNameTable)];
                    }
                    return null;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutColumn", {
        fields: {
            Groups: null
        },
        ctors: {
            init: function () {
                this.Groups = new (System.Collections.Generic.List$1(ExpressCraft.LayoutGroup))();
            },
            ctor: function (groups) {
                if (groups === void 0) { groups = []; }

                this.$initialize();
                if (groups != null && groups.length > 0) {
                    this.Groups.addRange(groups);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutContainer", {
        statics: {
            fields: {
                TabIndex: 0
            },
            ctors: {
                init: function () {
                    this.TabIndex = 2;
                }
            }
        },
        fields: {
            Columns: null,
            ColumnWidth: 0,
            ControlMargin: 0,
            appliedLayout: false,
            ButtinWidth: 0,
            Controls: null,
            ControlEditable: null
        },
        ctors: {
            init: function () {
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.LayoutColumn))();
                this.appliedLayout = false;
                this.ButtinWidth = 73;
                this.Controls = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
                this.ControlEditable = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
            },
            $ctor1: function (columnWidth, controlMargin, columns) {
                if (columnWidth === void 0) { columnWidth = 500; }
                if (controlMargin === void 0) { controlMargin = 6; }
                if (columns === void 0) { columns = []; }

                this.$initialize();
                this.ColumnWidth = columnWidth;
                this.ControlMargin = controlMargin;

                if (columns != null && columns.length > 0) {
                    this.Columns.addRange(columns);
                }
            },
            $ctor2: function (columnWidth, controlMargin, buttonWidth, columns) {
                if (columnWidth === void 0) { columnWidth = 500; }
                if (controlMargin === void 0) { controlMargin = 6; }
                if (buttonWidth === void 0) { buttonWidth = 73; }
                if (columns === void 0) { columns = []; }

                this.$initialize();
                this.ColumnWidth = columnWidth;
                this.ControlMargin = controlMargin;
                this.ButtinWidth = buttonWidth;

                if (columns != null && columns.length > 0) {
                    this.Columns.addRange(columns);
                }
            },
            ctor: function (columns) {
                if (columns === void 0) { columns = []; }

                this.$initialize();
                this.ColumnWidth = 500;
                this.ControlMargin = 6;

                if (columns != null && columns.length > 0) {
                    this.Columns.addRange(columns);
                }
            }
        },
        methods: {
            AddInput: function (linkField, input) {
                var cl = new ExpressCraft.LayoutControl.ctor(linkField, input);
                this.Controls.add(cl);
                if (!input.Readonly) {
                    this.ControlEditable.add(cl);
                }
            },
            AppliedLayout: function () {
                return this.appliedLayout;
            },
            GetControl: function (name, allowReadonly) {
                if (allowReadonly === void 0) { allowReadonly = false; }
                name = name.toLowerCase();

                if (allowReadonly) {
                    for (var i = 0; i < this.Controls.Count; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(this.Controls.getItem(i).LinkFieldName.toLowerCase(), name)) {
                            return this.Controls.getItem(i);
                        }
                    }
                } else {
                    for (var i1 = 0; i1 < this.ControlEditable.Count; i1 = (i1 + 1) | 0) {
                        if (Bridge.referenceEquals(this.ControlEditable.getItem(i1).LinkFieldName.toLowerCase(), name)) {
                            return this.ControlEditable.getItem(i1);
                        }
                    }
                }

                return null;
            },
            GetText: function (name, allowReadyOnly) {
                var $t, $t1;
                if (allowReadyOnly === void 0) { allowReadyOnly = false; }
                return ($t = this.GetControl(name, allowReadyOnly)) != null && ($t1 = $t.Input) != null ? $t1.Text : null;
            },
            GetEditValue: function (name, allowReadyOnly) {
                var $t, $t1;
                if (allowReadyOnly === void 0) { allowReadyOnly = false; }
                return ($t = this.GetControl(name, allowReadyOnly)) != null && ($t1 = $t.Input) != null ? $t1.GetEditValue() : null;
            },
            SetText: function (name, value, allowReadyOnly) {
                var $t;
                if (allowReadyOnly === void 0) { allowReadyOnly = false; }
                var input = ($t = this.GetControl(name, allowReadyOnly)) != null ? $t.Input : null;
                if (input != null) {
                    input.Text = value;
                }
            },
            Focus: function () {
                if (ExpressCraft.Helper.NotDesktop) {
                    return;
                }
                if (this.Controls == null || this.Controls.Count === 0) {
                    return;
                }
                var input = System.Linq.Enumerable.from(this.Controls).firstOrDefault(null, null).Input;
                var x = input.GetInput();

                if (x != null) {
                    ExpressCraft.Helper.FocusElement(x);
                } else {
                    ExpressCraft.Helper.FocusElement(input.Content);
                }
            },
            CreateLoadSQL: function () {
                var builderSQL = new System.Text.StringBuilder();

                var length = this.Controls.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    if (this.Controls.getItem(i) == null || this.Controls.getItem(i).Input == null || System.String.isNullOrWhiteSpace(this.Controls.getItem(i).LinkFieldName)) {
                        continue;
                    }
                    builderSQL.append(System.String.concat("`", this.Controls.getItem(i).LinkFieldName, "`, "));

                    var control = this.Controls.getItem(i);

                    if (Bridge.is(control.Input, ExpressCraft.SearchInput)) {
                        var search = control.Input;

                        var editValue = (System.String.concat(search.EditValue, ""));
                        if (Bridge.referenceEquals(search.DisplayMember, search.ValueMember) || search.ValueMember == null) {
                            // documentTransaction.AddCombo(control.LinkFieldName,
                            //search.Text, search.Text);
                        } else {
                            // long editv = 0;
                            // long.TryParse(editValue, out editv);

                            // documentTransaction.AddCombo(control.LinkFieldName,
                            //editv, search.Text);
                        }

                        continue;
                    } else if (control.Input.Controller != null) {
                        if (Bridge.is(control.Input.Controller, ExpressCraft.CheckEdit)) {
                            //documentTransaction.AddBoolean(control.LinkFieldName, (control.Input.Controller.As<CheckEdit>().Checked));

                            continue;
                        }
                    }

                    if (control.Input.IsNumericType()) {
                        //var dec = control.Input.GetNumberValue();

                        //documentTransaction.AddNumer(control.LinkFieldName,
                        //dec);
                    } else if (control.Input.IsDateType()) {
                        //var date = control.Input.GetDateTime();

                        //documentTransaction.AddDate(control.LinkFieldName,
                        //date);
                    } else {
                        //documentTransaction.AddString(control.LinkFieldName,
                        //control.Input.Text);
                    }
                }

                return builderSQL.toString();
            },
            ApplyReadOnly: function (documentreadonly) {
                var length = this.ControlEditable.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    this.ApplyReadOnlyOnControl(documentreadonly, this.ControlEditable.getItem(i).Input);
                }
            },
            ApplyReadOnlyOnControl: function (documentreadonly, input) {
                if (input.Controller != null) {
                    if (Bridge.is(input.Controller, ExpressCraft.CheckEdit)) {
                        input.Enabled = !documentreadonly;
                    }
                } else {
                    if (Bridge.is(input, ExpressCraft.TextInputDropDown)) {
                        input.GetInput().readOnly = documentreadonly;
                    }
                    input.Readonly = documentreadonly;
                }
            },
            OnControlCreated: function (Control) { },
            Apply: function (parent, documentreadonly) {
                var $t, $t1, $t2, $t3;
                if (documentreadonly === void 0) { documentreadonly = false; }
                if (parent == null) {
                    throw new System.ArgumentNullException();
                }

                if (this.appliedLayout) {
                    return;
                }
                this.appliedLayout = true;

                var leftMargin = 10;
                var topMargin = 5;

                var leftLabel = 15;

                var currentLeft = leftMargin;
                var AppendX = 0;
                var AppendY = 0;

                var EditStartX = 125;

                if (ExpressCraft.Helper.NotDesktop) {
                    EditStartX = 15;
                }


                var XIncrement = (leftMargin + this.ColumnWidth) | 0;

                var inputHeight;
                if (ExpressCraft.Helper.NotDesktop) {
                    this.ButtinWidth = 0;
                    inputHeight = 45;
                } else {
                    inputHeight = 20;
                }
                var GroupLabelIncrement = (this.ControlMargin + (ExpressCraft.Helper.NotDesktop ? (((inputHeight - 30) | 0)) : (((inputHeight - 4) | 0)))) | 0;
                var RowIncrement = (inputHeight + this.ControlMargin) | 0;

                var TinyLabelIncrement = (inputHeight - 8) | 0;

                $t = Bridge.getEnumerator(this.Columns);
                try {
                    while ($t.moveNext()) {
                        var column = $t.Current;
                        var autoDiv = new ExpressCraft.Control.$ctor1();
                        var y = topMargin;
                        if (ExpressCraft.Helper.NotDesktop) {
                            autoDiv.Width = "(100% - 12px)";
                            autoDiv.Top = AppendY;
                        } else {
                            autoDiv.Top = y;
                            autoDiv.Width = this.ColumnWidth;
                        }
                        autoDiv.Left = AppendX;

                        var docFragment = document.createDocumentFragment();

                        var groups = column.Groups;

                        $t1 = Bridge.getEnumerator(groups);
                        try {
                            while ($t1.moveNext()) {
                                var group = $t1.Current;
                                if (!System.String.isNullOrWhiteSpace(group.GroupLabel)) {
                                    var label = ExpressCraft.Control.Label$2(group.GroupLabel, currentLeft, y, true);
                                    if (ExpressCraft.Helper.NotDesktop) {
                                        label.style.fontSize = "14px";
                                    }
                                    docFragment.appendChild(label);
                                    y += GroupLabelIncrement;
                                }
                                var rows = group.Rows;

                                $t2 = Bridge.getEnumerator(rows);
                                try {
                                    while ($t2.moveNext()) {
                                        var row = $t2.Current;
                                        if (Bridge.is(row, ExpressCraft.LayoutRowControl)) {
                                            var height = row.Height;

                                            var control = row.Control;

                                            if (control != null) {
                                                control.Height = height;
                                                control.Left = (currentLeft + leftLabel) | 0;
                                                control.Top = y;

                                                if (ExpressCraft.Helper.NotDesktop) {
                                                    control.Width = "(100% - " + System.Single.format((currentLeft + (leftLabel * 2.0))) + "px)";
                                                } else {
                                                    control.Width = (((this.ColumnWidth - currentLeft) | 0) - (leftLabel)) | 0;
                                                }

                                                docFragment.appendChild(ExpressCraft.Control.op_Implicit(control));

                                                y += this.ControlMargin;
                                            }

                                            y += height;

                                            continue;
                                        }

                                        if (!System.String.isNullOrWhiteSpace(row.Label)) {
                                            var label1 = ExpressCraft.Control.Label$2(row.Label, ((currentLeft + leftLabel) | 0) + System.Decimal.toFloat(row.Offset), y, false);
                                            if (ExpressCraft.Helper.NotDesktop) {
                                                label1.style.fontSize = "12px";
                                                y += (GroupLabelIncrement - 5) | 0;
                                            }
                                            docFragment.appendChild(label1);
                                        }

                                        if (Bridge.is(row, ExpressCraft.LayoutRowGap)) {
                                            y += row.Height;
                                            continue;
                                        }

                                        if (row.Button != null && !ExpressCraft.Helper.NotDesktop) {
                                            row.Button.Location = new ExpressCraft.Vector2.$ctor1(((((this.ColumnWidth - this.ButtinWidth) | 0) + 6) | 0), y);
                                            row.Button.Width = this.ButtinWidth;
                                            docFragment.appendChild(ExpressCraft.Control.op_Implicit(row.Button));
                                        }

                                        var controls = row.Controls;
                                        var HasTinyLabel = false;

                                        if (controls.Count > 0) {
                                            var TotalPercent = System.Decimal(0);

                                            TotalPercent = System.Decimal(0);
                                            var AddWidth = 0;
                                            $t3 = Bridge.getEnumerator(controls);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var control1 = $t3.Current;
                                                    if (control1.Percent.gt(System.Decimal(1.0)) || control1.Percent.lte(System.Decimal(0.0))) {
                                                        control1.Percent = System.Decimal(1.0);
                                                    }

                                                    TotalPercent = TotalPercent.add(control1.Percent);

                                                    if (TotalPercent.gt(System.Decimal(1.0))) {
                                                        if (Bridge.is(control1.Input, ExpressCraft.MemoInput)) {
                                                            y += (ExpressCraft.Helper.ToInt(control1.Input.Height) + this.ControlMargin) | 0;
                                                        } else {
                                                            y += RowIncrement;
                                                        }

                                                        if (row.NoGap) {
                                                            y -= (this.ControlMargin + 1) | 0;
                                                        }

                                                        if (HasTinyLabel) {
                                                            y += TinyLabelIncrement;
                                                            HasTinyLabel = false;
                                                        }

                                                        TotalPercent = TotalPercent.sub(System.Decimal(1.0));
                                                        AddWidth = 0;
                                                    }
                                                    var Add = (((((((currentLeft + AddWidth) | 0) + EditStartX) | 0) + this.ButtinWidth) | 0) + System.Decimal.toFloat(row.Offset));
                                                    var o100Percent = System.String.concat("((100% - ", ExpressCraft.Helper.ToPx(Bridge.box(Add, System.Single, System.Single.format, System.Single.getHashCode)), ") * ", (TotalPercent.sub(control1.Percent)), ")");
                                                    var o100Percent2 = System.String.concat("(100% - ", ExpressCraft.Helper.ToPx(Bridge.box(Add, System.Single, System.Single.format, System.Single.getHashCode)), ")");

                                                    var width = System.String.concat("(", o100Percent2, " * ", control1.Percent, ")");
                                                    var loc = new ExpressCraft.Vector2.$ctor1(System.String.concat("(", o100Percent, " + ", ExpressCraft.Helper.ToPx(Bridge.box((Add - this.ButtinWidth), System.Single, System.Single.format, System.Single.getHashCode)), ")"), y);
                                                    if (!row.NoGap) {
                                                        AddWidth = (AddWidth + 6) | 0;
                                                    }

                                                    if (control1.Input.Controller != null) {
                                                        control1.Input.Controller.Width = width;
                                                        control1.Input.Controller.Location = loc.$clone();
                                                        control1.Input.Content.tabIndex = ExpressCraft.LayoutContainer.TabIndex;
                                                        control1.Input.ClassList.remove("control");
                                                        if (Bridge.is(control1.Input.Controller, ExpressCraft.CheckEdit)) {
                                                            var span = control1.Input.Controller.span;
                                                            span.style.top = "0";
                                                            span.style.left = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 2) | 0)), System.Int32));

                                                            span.style.position = "absolute";

                                                            span.style.whiteSpace = "pre";
                                                            //span.Style.Transform = "translate(3px, 50%)";
                                                            if (ExpressCraft.Helper.NotDesktop) {
                                                                span.style.fontSize = "14px";
                                                                span.style.whiteSpace = "normal";
                                                            }

                                                            if (control1.Input.Content.type === "checkbox") {
                                                                control1.Input.Width = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 4) | 0)), System.Int32));
                                                                control1.Input.Height = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 4) | 0)), System.Int32));
                                                            }
                                                        }

                                                        docFragment.appendChild(ExpressCraft.Control.op_Implicit(control1.Input.Controller));
                                                    } else {
                                                        control1.Input.Width = width;
                                                        control1.Input.Location = loc.$clone();
                                                        control1.Input.GetInput().tabIndex = ExpressCraft.LayoutContainer.TabIndex;

                                                        docFragment.appendChild(ExpressCraft.Control.op_Implicit(control1.Input));
                                                    }
                                                    if (ExpressCraft.Helper.NotDesktop) {
                                                        control1.Input.Height = inputHeight;
                                                        control1.Input.Style.fontSize = "14px";

                                                        if (control1.Input.GetInput() != null) {
                                                            control1.Input.GetInput().style.fontSize = "14px";
                                                        }
                                                    }

                                                    this.OnControlCreated(control1);

                                                    if (!row.NoGap && !row.HideTinyLabel && !System.String.isNullOrWhiteSpace(control1.TinyLabel)) {
                                                        var label2 = ExpressCraft.Control.Label$2(control1.TinyLabel, 0, y + (((inputHeight + 3) | 0)), false, true);
                                                        label2.style.left = System.String.concat("calc(", o100Percent, " + ", ExpressCraft.Helper.ToPx(Bridge.box((Add - this.ButtinWidth), System.Single, System.Single.format, System.Single.getHashCode)), ")");
                                                        docFragment.appendChild(label2);
                                                        if (ExpressCraft.Helper.NotDesktop) {
                                                            label2.style.fontSize = "12px";
                                                        }
                                                        HasTinyLabel = true;
                                                    }

                                                    if (row.UsePlaceholder && !System.String.isNullOrWhiteSpace(control1.TinyLabel)) {
                                                        control1.Input.SetAttribute("placeholder", control1.TinyLabel);
                                                        if (control1.Input.ToolTip == null) {
                                                            if (System.String.isNullOrWhiteSpace(row.Label) && System.String.isNullOrWhiteSpace(group.GroupLabel)) {
                                                                control1.Input.ToolTip = new ExpressCraft.ToolTip.ctor(control1.TinyLabel);
                                                            } else {
                                                                control1.Input.ToolTip = new ExpressCraft.ToolTip.$ctor1(System.String.isNullOrWhiteSpace(row.Label) ? group.GroupLabel : row.Label, control1.TinyLabel);
                                                            }
                                                        }
                                                    }

                                                    ExpressCraft.LayoutContainer.TabIndex = (ExpressCraft.LayoutContainer.TabIndex + 1) | 0;

                                                    if (!control1.Input.Readonly) {
                                                        this.ApplyReadOnlyOnControl(documentreadonly, control1.Input);
                                                        this.ControlEditable.add(control1);
                                                    }
                                                    this.Controls.add(control1);
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                            if (HasTinyLabel) {
                                                y += TinyLabelIncrement;
                                            }
                                            var last = System.Linq.Enumerable.from(row.Controls).lastOrDefault(null, null);
                                            if (last != null && Bridge.is(last.Input, ExpressCraft.MemoInput)) {
                                                y += (ExpressCraft.Helper.ToInt(last.Input.Height) + this.ControlMargin) | 0;
                                            } else {
                                                y += RowIncrement;
                                            }
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }autoDiv.Height = y;
                        if (!ExpressCraft.Helper.NotDesktop) {
                            AppendX = (AppendX + XIncrement) | 0;
                        } else {
                            AppendY = (AppendY + Bridge.Int.clip32(y)) | 0;
                        }
                        autoDiv.Content.appendChild(docFragment);
                        parent.Content.appendChild(ExpressCraft.Control.op_Implicit(autoDiv));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }var LastControl = System.Linq.Enumerable.from(this.Controls).lastOrDefault(null, null);
                if (LastControl != null) {
                    var FirstControl = System.Linq.Enumerable.from(this.Controls).firstOrDefault(null, null);

                    var PreventDefaultMoveForward = function (ev) {
                        if (ev.keyCode === 9 && !ev.shiftKey) {
                            ev.preventDefault();
                            var x = FirstControl.Input.GetInput();
                            if (x != null) {
                                ExpressCraft.Helper.FocusElement(x);
                            } else {
                                ExpressCraft.Helper.FocusElement(LastControl.Input.Content);
                            }
                        }
                    };

                    var PreventDefaultMoveBack = function (ev) {
                        if (ev.keyCode === 9 && ev.shiftKey) {
                            ev.preventDefault();
                            var x = LastControl.Input.GetInput();
                            if (x != null) {
                                ExpressCraft.Helper.FocusElement(x);
                            } else {
                                ExpressCraft.Helper.FocusElement(LastControl.Input.Content);
                            }
                        }
                    };

                    LastControl.Input.Content.onkeydown = PreventDefaultMoveForward;
                    FirstControl.Input.Content.onkeydown = PreventDefaultMoveBack;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutControl", {
        props: {
            LinkFieldName: null,
            Input: null,
            TinyLabel: null,
            Percent: System.Decimal(0.0),
            /**
             * Calculated
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutControl
             * @function Width
             * @type string
             */
            Width: null,
            /**
             * Calculated
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutControl
             * @function LineNumber
             * @type number
             */
            LineNumber: System.Decimal(0.0)
        },
        ctors: {
            $ctor2: function (linkFieldName, input, tinyLabel, percent) {
                if (tinyLabel === void 0) { tinyLabel = ""; }
                if (percent === void 0) { percent = System.Decimal(1.0); }

                this.$initialize();
                this.LinkFieldName = linkFieldName;
                this.Input = input;
                this.TinyLabel = tinyLabel;
                this.Percent = percent;
            },
            $ctor1: function (linkFieldName, input, percent) {
                if (percent === void 0) { percent = System.Decimal(1.0); }

                ExpressCraft.LayoutControl.$ctor2.call(this, linkFieldName, input, "", percent);
            },
            ctor: function (linkFieldName, input) {
                ExpressCraft.LayoutControl.$ctor2.call(this, linkFieldName, input, "");
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutGroup", {
        fields: {
            Rows: null
        },
        props: {
            GroupLabel: null
        },
        ctors: {
            init: function () {
                this.Rows = new (System.Collections.Generic.List$1(ExpressCraft.LayoutRow))();
            },
            ctor: function (rows) {
                if (rows === void 0) { rows = []; }

                this.$initialize();
                this.GroupLabel = "";
                if (rows != null && rows.length > 0) {
                    this.Rows.addRange(rows);
                }
            },
            $ctor1: function (groupLabel, rows) {
                if (rows === void 0) { rows = []; }

                this.$initialize();
                this.GroupLabel = groupLabel;
                if (rows != null && rows.length > 0) {
                    this.Rows.addRange(rows);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutRow", {
        fields: {
            Controls: null
        },
        props: {
            Label: null,
            Button: null,
            /**
             * If this is true - tiny labels are ignored
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutRow
             * @function NoGap
             * @type boolean
             */
            NoGap: false,
            UsePlaceholder: false,
            HideTinyLabel: false,
            Offset: System.Decimal(0.0)
        },
        ctors: {
            init: function () {
                this.Controls = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
                this.NoGap = false;
                this.UsePlaceholder = false;
                this.HideTinyLabel = false;
                this.Offset = System.Decimal(0);
            },
            $ctor2: function (label, controls) {
                if (controls === void 0) { controls = []; }

                this.$initialize();
                this.Label = label;
                if (controls != null && controls.length > 0) {
                    this.Controls.addRange(controls);
                }
            },
            ctor: function (controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, "", controls);
            },
            $ctor1: function (offset, controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, "", controls);
                this.Offset = offset;
            },
            $ctor3: function (label, button, controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, label, controls);
                this.Button = button;
            }
        }
    });

    Bridge.define("ExpressCraft.MessageBoxButtons", {
        $kind: "enum",
        statics: {
            fields: {
                Auto: 0,
                Ok: 1,
                YesNo: 2,
                YesNoCancel: 3,
                AbortSendCancel: 4
            }
        }
    });

    Bridge.define("ExpressCraft.MessageBoxLayout", {
        $kind: "enum",
        statics: {
            fields: {
                Information: 0,
                Exclamation: 1,
                Question: 2,
                Error: 3
            }
        }
    });

    Bridge.define("ExpressCraft.MouseMoveAction", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Move: 1,
                TopLeftResize: 2,
                LeftResize: 3,
                BottomLeftResize: 4,
                BottomResize: 5,
                BottomRightResize: 6,
                RightResize: 7,
                TopResize: 8,
                TopRightResize: 9
            }
        }
    });

    Bridge.define("ExpressCraft.Network", {
        statics: {
            methods: {
                GetAjaxOptions: function (JsonFile, Async) {
                    if (Async === void 0) { Async = true; }
                    return { async: Async, url: ExpressCraft.Settings.NetworkURL, cache: false, data: JsonFile == null ? "" : JSON.stringify(Bridge.unbox(JsonFile)), dataType: "json", contentType: "application/json", type: "POST" };
                },
                InvokeMethodUI: function (interfaceName, method, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJsonProgressForm(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), Success, Error);
                },
                InvokeMethodUIControl: function (interfaceName, method, progressControl, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJsonProgressControl(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), progressControl, Success, Error);
                },
                InvokeMethod: function (interfaceName, method, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJson(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), Success, Error);
                },
                PostJson: function (JsonFile, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;
                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.success = Success;
                    ajo.error = Error;

                    $.ajax(ajo);
                },
                PostJsonProgressControl: function (JsonFile, progressControl, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;
                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.xhr = function () {
                        var xmlRequest = new XMLHttpRequest();
                        xmlRequest.addEventListener("progress", function (e) {
                            var pe = Bridge.as(e, ProgressEvent);
                            if (progressControl == null) {
                                return;
                            }
                            var pc = progressControl;

                            var Percent = 0;

                            if (pe.loaded !== 0 && pe.total !== 0) {
                                Percent = (pe.loaded / pe.total) * 100.0;
                            }
                            pc.internalProgressControl.style.width = System.String.concat(System.Single.format(Percent), "%");
                        });

                        return xmlRequest;
                    };
                    ajo.success = Success;
                    ajo.error = Error;

                    $.ajax(ajo);
                },
                PostJsonProgressForm: function (JsonFile, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;
                    var npf = new ExpressCraft.Network.NetworkProgressForm();

                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.xhr = function () {
                        var xmlRequest = new XMLHttpRequest();
                        xmlRequest.addEventListener("progress", function (e) {
                            var pe = Bridge.as(e, ProgressEvent);
                            if (npf == null || npf.progressControl == null) {
                                return;
                            }
                            var pc = npf.progressControl;

                            var Percent = 0;

                            if (pe.loaded !== 0 && pe.total !== 0) {
                                Percent = (pe.loaded / pe.total) * 100.0;
                            }
                            pc.internalProgressControl.style.width = System.String.concat(System.Single.format(Percent), "%");
                        });

                        return xmlRequest;
                    };
                    ajo.success = function (o, s, jq) {
                        npf.DialogResult = ExpressCraft.DialogResultEnum.OK;
                        Success(o, s, jq);
                    };
                    ajo.error = function (jq, s1, s2) {
                        npf.DialogResult = ExpressCraft.DialogResultEnum.Cancel;
                        Error(jq, s1, s2);
                    };
                    ajo.complete = function (jq, str) {
                        npf.Close();
                    };

                    var ajr = $.ajax(ajo);

                    npf.ShowDialog([new ExpressCraft.DialogResult(ExpressCraft.DialogResultEnum.Cancel, function () {
                        ajr.abort();
                    })]);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Network.MethodRequest", {
        fields: {
            Method: null,
            Arguments: null,
            Interface: null
        },
        ctors: {
            ctor: function (interfaceName, method, $arguments) {
                if ($arguments === void 0) { $arguments = []; }

                this.$initialize();
                this.Method = method;
                this.Arguments = $arguments;
                this.Interface = interfaceName;
            }
        }
    });

    Bridge.define("ExpressCraft.PdfSourceType", {
        $kind: "enum",
        statics: {
            fields: {
                Url: 0,
                Base64: 1
            }
        }
    });

    Bridge.define("ExpressCraft.ResourceManager", {
        statics: {
            fields: {
                cacheResourceString: null
            },
            ctors: {
                init: function () {
                    this.cacheResourceString = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
                }
            },
            methods: {
                GetResourceString: function (name) {
                    var $t;
                    if (ExpressCraft.ResourceManager.cacheResourceString.containsKey(name)) {
                        return ExpressCraft.ResourceManager.cacheResourceString.get(name);
                    }
                    return (($t = ExpressCraft.Settings.GetStyleRuleValue$1(ExpressCraft.Settings.resourceManangerSheets, "content", System.String.concat(".", name)), ExpressCraft.ResourceManager.cacheResourceString.set(name, $t), $t));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonControl.RibbonType", {
        $kind: "enum",
        statics: {
            fields: {
                Full: 0,
                Compact: 1
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonGroup.RenderInfo", {
        fields: {
            Left: 0,
            Width: 0,
            IsSmall: false,
            FirstButton: null,
            SecondButton: null,
            ThirdButton: null,
            BeginGroup: false
        },
        ctors: {
            init: function () {
                this.IsSmall = false;
                this.BeginGroup = false;
            }
        }
    });

    Bridge.define("ExpressCraft.Settings", {
        statics: {
            fields: {
                NetworkURL: null,
                ResourceURL: null,
                AutoRender: false,
                Font: null,
                DefaultFont: null,
                /**
                 * Only for firefox - as no error with number input
                 *
                 * @static
                 * @public
                 * @memberof ExpressCraft.Settings
                 * @default true
                 * @type boolean
                 */
                OnFocusSelectAll: false,
                DefaultStyleSheet: null,
                PluginStyleSheet: null,
                resourceManangerSheets: null,
                GridViewAutoColumnGenerateFormatAsDate: false,
                GridViewAutoColumnFormatDates: false,
                GridViewBlurOnScroll: false,
                GridViewRowScrollPadding: 0,
                GridViewScrollDelayed: false,
                GridViewScrollDelayMS: 0,
                ContextMenuStartingZIndex: 0,
                ContextMenuMinWidth: 0,
                MessageFormTextMaximumHeightInPx: 0,
                MessageFormTextMinimumHeightInPx: 0,
                MessageFormMinimumWidthInPx: 0,
                DayPosition: 0,
                MonthPosition: 0,
                YearPosition: 0,
                DisableTextPopupEditor: false,
                DateSeperator: 0,
                ConsoleDefaultSize: null,
                MessageFormBeep: false,
                MaximumPixelScrollingRows: 0,
                OnSendError: null,
                IsChrome: false,
                AllowCloseWithoutQuestion: false,
                OnApplicationClose: null,
                ShowExceptionDialog: false,
                FormFadeDuration: 0,
                /**
                 * Increase Render Speed
                 *
                 * @static
                 * @public
                 * @memberof ExpressCraft.Settings
                 * @type boolean
                 */
                RemoveAttributesOffElementsWhenLoseFocus: false,
                themeElement: null,
                _includeFocusRegion: false,
                _activeTheme: null,
                themefocusValue: null,
                themeTemplate: null,
                OnF2ShowThemeForm: false,
                ToolTipPopupDelayMs: 0,
                ToolTipPopupStayOpenDelayPerWordMs: 0
            },
            props: {
                TaxPercent: System.Decimal(0.0),
                IncludeFocusRegion: {
                    get: function () {
                        return ExpressCraft.Settings._includeFocusRegion;
                    },
                    set: function (value) {
                        if (ExpressCraft.Settings._includeFocusRegion !== value) {
                            ExpressCraft.Settings._includeFocusRegion = value;
                            ExpressCraft.Settings.ApplyActiveTheme();
                        }
                    }
                },
                ActiveTheme: {
                    get: function () {
                        return ExpressCraft.Settings._activeTheme;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Settings._activeTheme, value)) {
                            ExpressCraft.Settings._activeTheme = value;
                            ExpressCraft.Settings.ApplyActiveTheme();
                        }
                    }
                }
            },
            ctors: {
                init: function () {
                    this.ConsoleDefaultSize = new ExpressCraft.Vector2();
                    this.NetworkURL = "Host.ashx";
                    this.ResourceURL = "./images/";
                    this.AutoRender = true;
                    this.Font = "8.25pt Tahoma";
                    this.DefaultFont = ExpressCraft.Settings.Font;
                    this.OnFocusSelectAll = true;
                    this.resourceManangerSheets = new (System.Collections.Generic.List$1(StyleSheet))();
                    this.GridViewAutoColumnGenerateFormatAsDate = false;
                    this.GridViewAutoColumnFormatDates = true;
                    this.GridViewBlurOnScroll = false;
                    this.GridViewRowScrollPadding = 0;
                    this.GridViewScrollDelayed = false;
                    this.GridViewScrollDelayMS = 25;
                    this.ContextMenuStartingZIndex = 500;
                    this.ContextMenuMinWidth = 200;
                    this.MessageFormTextMaximumHeightInPx = 500;
                    this.MessageFormTextMinimumHeightInPx = 32;
                    this.MessageFormMinimumWidthInPx = 195;
                    this.DayPosition = ExpressCraft.Settings.DatePosition.First;
                    this.MonthPosition = ExpressCraft.Settings.DatePosition.Second;
                    this.YearPosition = ExpressCraft.Settings.DatePosition.Third;
                    this.DisableTextPopupEditor = false;
                    this.DateSeperator = 47;
                    this.ConsoleDefaultSize = new ExpressCraft.Vector2.$ctor1(540, 240);
                    this.MessageFormBeep = false;
                    this.MaximumPixelScrollingRows = 500000;
                    this.IsChrome = Bridge.Browser.isChrome;
                    this.AllowCloseWithoutQuestion = false;
                    this.ShowExceptionDialog = true;
                    this.FormFadeDuration = 100;
                    this._includeFocusRegion = true;
                    this.themefocusValue = ".{25}:focus:not(.grid){{\r\nborder: solid 1px {0};\r\n}}";
                    this.themeTemplate = ".{25}{{\r\n    color:{22};\r\n}}\r\n#focusLine;\r\n.{25}::selection{{\r\n{26}:{1};\r\n}}\r\n.{25}::-moz-selection{{\r\n{26}:{1};\r\n}}\r\n.{25}:disabled{{\r\n{26}:{2};\r\n}}\r\n.input{25}:read-only{{\r\n{26}:{3};\r\n}}\r\n.{28}{25}{{\r\n{26}:{0};\r\n{27}{29}:{0};\r\n{27}{31}:{0};\r\n{27}{32}:{1};\r\n}}\r\n.{28}page{{\r\n{26}:{3};\r\n}}\r\n.{28}group{{\r\n{26}:{3};\r\n}}\r\n.{28}{33}{{\r\n{26}:{3};\r\n}}\r\n.{28}{33}:hover:not(:active):not(.disabled)\r\n{{\r\n{26}:{4};\r\n}}\r\n.{28}{33}:active:not(.disabled){{\r\n{26}:{5};\r\n}}\r\n.{28}{33}small{{\r\n{26}:{3};\r\n}}\r\n.{28}{33}small:hover:not(:active):not(.disabled)\r\n{{\r\n{26}:{4};\r\n}}\r\n.{28}{33}small:active:not(.disabled){{\r\n{26}:{5};\r\n}}\r\n.{28}seperator{{\r\n{26}:{1};\r\n}}\r\n.{28}{35}-hidden{{\r\n{26}:{0};\r\ncolor:{23};\r\n}}\r\n.{28}{35}-hidden:hover{{\r\n{26}:{6};\r\n}}\r\n.{28}{35}-active{{\r\n{26}:{3};\r\n}}\r\n.tab{25}{{\r\n{26}:{3};\r\n}}\r\n.tab{25}page{{\r\n{26}:{3};\r\n{27}{29}:{1};\r\n{27}{31}:{1};\r\n{27}{32}:{1};\r\n}}\r\n.tab{25}{35} {{\r\n{26}:{3};\r\n}}\r\n.tab{25}{35}-hidden{{\r\n{27}{30}:{3};\r\n{27}{29}:{3};\r\n{27}{31}:{3};\r\n{27}{32}:transparent;\r\n}}\r\n.tab{25}{35}-hidden:hover{{\r\n{26}:{7};\r\n{27}{29}:{7};\r\n{27}{31}:{7};\r\n}}\r\n.tab{25}{35}-active{{\r\n{27}{30}:{0};\r\n{27}{29}:{1};\r\n{27}{31}:{1};\r\n{27}{32}:{3};\r\nborder-top-width:2px;\r\nline-height:18px;\r\ntop:2px;\r\n}}\r\n.tab{25}{35}-close{33}{{\r\ncolor:{1};\r\n}}\r\n.tab{25}{35}-close{33}:hover{{\r\ncolor:{24};\r\n\t{26}:{2};\r\n\t{27}:1px solid {19};\r\n}}\r\n.input{25} {{\r\n{27}:1px solid {1};\r\n{26}:{14};\r\n}}\r\n.simple{33}{{\r\n{27}:1px solid {19};\r\n{26}:{3};\r\n}}\r\n.simple{33}:hover:not(.disabled)\r\n{{\r\n\t{26}:{1};\r\n}}\r\n.simple{33}:active:not(.disabled)\r\n{{\r\n\t{26}:{12};\r\n{27}: 1px solid {20};\r\n}}\r\n@keyframes ColorFlash {{\r\nfrom {{ {26}: {23};}}\r\nto {{ {26}: {0};}}\r\n}}\r\n.form-base{{\r\n{27}-color:{0};\r\n}}\r\n.{34}{{\r\n{26}:{0};\r\n}}\r\n.{34}-title{{\r\ncolor:{23};\r\n}}\r\n.{34}-{33}{{\r\ncolor:{23};\r\n}}\r\n.{34}-{33}:hover:not(.{34}-{33}-close){{\r\n{26}:{8};\r\n}}\r\n.{34}-{33}:active:not(.{34}-{33}-close){{\r\n{26}:{9};\r\n}}\r\n.{34}-{33}-close:hover{{\r\n{26}:{10};\r\n}}\r\n.{34}-{33}-close:active{{\r\n{26}:{11};\r\n}}\r\n.cell{{\r\n{27}: 1px solid {3};\r\n}}\r\n.cellrow{{\r\n{26}:{14};\r\n}}\r\n.cellrow:hover{{\r\n{26}:{3} !important;\r\n}}\r\n.cellrow:active{{\r\n{26}:{12} !important;\r\n}}\r\n.even{{\r\n   {26}:{13} !important;\r\n}}\r\n.cellrow-selected{{\r\n{26}:{17} !important;\r\n}}\r\n.cellrow-selected:hover{{\r\n{26}:{18} !important;\r\n}}\r\n.{36}{{\r\n{26}:{3};\r\n{27}-right:1px solid {19} !important;\r\n}}\r\n.{36}:hover{{\r\n{26}:{1};\r\n}}\r\n.{36}:active{{\r\n{26}:{12};\r\n}}\r\n.{36}-container{{\r\n{26}:{3};\r\n{27}-bottom:1px solid {19} !important;\r\n}}\r\n.grid{{\r\n{26}:{14};\r\n{27}:1px solid {19};\r\n}}\r\n.progressbar{{\r\n{27}:1px solid {19};\r\n{26}:{14};\r\n}}\r\n.progressbarbody{{\r\n{26}:{0};\r\n}}\r\n.contextmenu{{\r\n{26}:{14};\r\n{27}: solid 1px {21};\r\n}}\r\n.contextitem:hover{{\r\n{26}:{15};\r\n}}\r\n.contextitemseperator{{\r\n{26}:{16};\r\n}}\r\n.dialog{33}section{{\r\n{26}:{3};\r\n}}\r\n.split{25}\r\n{{\r\n{27}:1px solid {19};\r\n}}\r\n.splittervertical {{\r\n{27}-left: 1px {4} solid;\r\n{27}-right: 1px {4} solid;\r\n}}\r\n.splitterhorizontal {{\r\n{27}-top: 1px {4} solid;\r\n{27}-bottom: 1px {4} solid;\r\n}}\r\n.splitterhorizontal:hover {{\r\n{26}:{4};\r\n}}\r\n.splittervertical:hover {{\r\n{26}:{4};\r\n}}\r\n.tool-tip{{\r\n{26}:{14};\r\n{27}: solid 1px {21};\r\n}}\r\n.{34}-min:hover{{\r\n\t{26}:{8};\r\n}}\r\n.simplebutton-active\r\n{{\r\n\t{26}:{12};\r\n{27}: 1px solid {20};\r\n}}\r\n.primary{{\r\n    {26}:{0};\r\n}}\r\n.tabheader-container{{\r\n    border-bottom: 2px {0} solid;\r\n}}\r\n";
                    this.OnF2ShowThemeForm = true;
                    this.ToolTipPopupDelayMs = 1000;
                    this.ToolTipPopupStayOpenDelayPerWordMs = 250;
                    this.TaxPercent = System.Decimal(0.1);
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.Settings.ActiveTheme = ExpressCraft.Theme.Theme1;
                    ExpressCraft.Settings.SetupStyleDefaults();
                },
                SetupStyleDefaults: function () {
                    try {
                        var sheets = document.styleSheets;
                        for (var i = 0; i < sheets.length; i = (i + 1) | 0) {
                            var ownerNode = Bridge.as(sheets[i].ownerNode, HTMLLinkElement);
                            if (ownerNode == null) {
                                continue;
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "expresscraft")) {
                                ExpressCraft.Settings.DefaultStyleSheet = sheets[i];
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "expresscraftplugin")) {
                                ExpressCraft.Settings.PluginStyleSheet = sheets[i];
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "resourcemanager")) {
                                ExpressCraft.Settings.resourceManangerSheets.add(sheets[i]);
                            }
                        }
                        if (ExpressCraft.Settings.DefaultStyleSheet == null) {
                            return;
                        }
                        var df = ExpressCraft.Settings.GetExpressStyleRuleValue("font", ".control");
                        if (df != null) {
                            ExpressCraft.Settings.DefaultFont = df;
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                },
                GetStyleRuleValue$1: function (cssFile, style, className) {
                    var $t;
                    try {
                        if (cssFile != null) {
                            $t = Bridge.getEnumerator(cssFile);
                            try {
                                while ($t.moveNext()) {
                                    var item = $t.Current;
                                    var value = ExpressCraft.Settings.GetStyleRuleValue(item, style, className);
                                    if (value != null) {
                                        return value;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t, System.IDisposable)) {
                                    $t.System$IDisposable$dispose();
                                }
                            }}
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                    return null;
                },
                GetStyleRuleValue: function (cssFile, style, className) {
                    try {
                        if (cssFile != null) {
                            var pStyles = cssFile;
                            if (pStyles.cssRules) {
                                for (var i = 0; i < pStyles.cssRules.length; i = (i + 1) | 0) {
                                    var rule = pStyles.cssRules[i];
                                    if (rule.selectorText && !Bridge.referenceEquals(rule.selectorText.split(44).indexOf(className), -1)) {
                                        return rule.style[style];
                                    }
                                }
                            }
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                    return null;
                },
                GetExpressStyleRuleValue: function (style, className) {
                    var value = ExpressCraft.Settings.GetStyleRuleValue(ExpressCraft.Settings.PluginStyleSheet, style, className);
                    if (value == null) {
                        value = ExpressCraft.Settings.GetStyleRuleValue(ExpressCraft.Settings.DefaultStyleSheet, style, className);
                    }
                    return value;
                },
                ApplyActiveTheme: function () {
                    var $t;
                    if (ExpressCraft.Settings.themeElement != null) {
                        ExpressCraft.Settings.themeElement.parentElement.removeChild(ExpressCraft.Settings.themeElement);
                    }
                    if (ExpressCraft.Settings._activeTheme == null) {
                        ExpressCraft.Settings._activeTheme = ExpressCraft.Theme.Theme1;
                    }
                    var objList = new (System.Collections.Generic.List$1(System.Object))();
                    objList.addRange(ExpressCraft.Settings._activeTheme.Colors);
                    objList.addRange(System.Array.init(["control", "background-color", "border", "ribbon", "-left-color", "-top-color", "-right-color", "-bottom-color", "button", "form-heading", "pageheader", "heading"], System.Object));

                    ExpressCraft.Settings.themeElement = ($t = document.createElement("style"), $t.innerHTML = System.String.format.apply(System.String, [System.String.replaceAll(ExpressCraft.Settings.themeTemplate, "#focusLine;", ExpressCraft.Settings._includeFocusRegion ? ExpressCraft.Settings.themefocusValue : "")].concat(objList.toArray())), $t);

                    document.body.appendChild(ExpressCraft.Settings.themeElement);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Settings.DatePosition", {
        $kind: "enum",
        statics: {
            fields: {
                First: 0,
                Second: 1,
                Third: 2
            }
        }
    });

    Bridge.define("ExpressCraft.SliderLocation", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Right: 1
            }
        }
    });

    Bridge.define("ExpressCraft.SortSetting", {
        fields: {
            Column: null,
            SortMode: 0
        }
    });

    Bridge.define("ExpressCraft.TextBlock", {
        fields: {
            OriginalSource: null,
            MaxWidth: 0,
            ComputedHeight: 0,
            LinesComputed: 0,
            ElelemtsOverMax: false,
            MaxCalculatedWidth: 0
        },
        ctors: {
            init: function () {
                this.ElelemtsOverMax = false;
                this.MaxCalculatedWidth = 0;
            },
            ctor: function (source, maxWidth) {
                this.$initialize();
                this.OriginalSource = source;
                this.MaxWidth = maxWidth;
            }
        },
        methods: {
            ComputeString: function () {
                this.ElelemtsOverMax = false;
                var Lines = System.String.split(this.OriginalSource, System.Array.init([13, 10], System.Char).map(function(i) {{ return String.fromCharCode(i); }}));

                var sizePerChar = ExpressCraft.Control.GetTextWidth("M", ExpressCraft.Settings.DefaultFont);

                this.LinesComputed = 0;

                for (var i = 0; i < Lines.length; i = (i + 1) | 0) {
                    var line = Lines[System.Array.index(i, Lines)];

                    var lineWidth = ExpressCraft.Control.GetTextWidth(this.OriginalSource, ExpressCraft.Settings.DefaultFont);

                    if (lineWidth > this.MaxWidth) {
                        this.ElelemtsOverMax = true;
                        this.MaxCalculatedWidth = this.MaxWidth;
                        var yy = 0;
                        for (var x = 0; x < line.length; x = (x + 1) | 0) {
                            yy = (yy + 1) | 0;

                            if (yy * sizePerChar > this.MaxWidth) {
                                this.LinesComputed = (this.LinesComputed + 1) | 0;
                                yy = 0;
                            }
                        }

                        if (yy > 0) {
                            this.LinesComputed = (this.LinesComputed + 1) | 0;
                        }
                    } else {
                        this.LinesComputed = (this.LinesComputed + 1) | 0;
                        if (lineWidth > this.MaxCalculatedWidth) {
                            this.MaxCalculatedWidth = lineWidth;
                        }
                    }
                }
                this.ComputedHeight = this.GetFontSize(ExpressCraft.Settings.DefaultFont) * this.LinesComputed;
            },
            GetFontSize: function (fontWithSize) {
                var strs = System.String.split(fontWithSize, System.Array.init([32], System.Char).map(function(i) {{ return String.fromCharCode(i); }}), null, 1);

                for (var i = 0; i < strs.length; i = (i + 1) | 0) {
                    if (System.String.endsWith(strs[System.Array.index(i, strs)], "pt")) {
                        return parseFloat(strs[System.Array.index(i, strs)]) * 1.333333;
                    } else if (System.String.endsWith(strs[System.Array.index(i, strs)], "px")) {
                        return parseFloat(strs[System.Array.index(i, strs)]);
                    }
                }

                return 10.9999971;
            }
        }
    });

    Bridge.define("ExpressCraft.Theme", {
        statics: {
            fields: {
                Theme1: null
            },
            ctors: {
                init: function () {
                    this.Theme1 = new ExpressCraft.Theme(["#0173C7", "#C5C5C5", "#CCCCCC", "#F0F0F0", "#C3C3C3", "#ADADAD", "#2A8AD0", "#D3D3D3", "#2A8AD4", "#015C9F", "#E81123", "#F1707A", "#AEAEAE", "#FAFAFA", "#ffffff", "#CFCFCF", "#B9B9B9", "rgba(1, 115, 199, 0.3)", "rgba(1, 115, 199, 0.5)", "#A6A6A6", "#777777", "#80868A", "#404040", "#ffffff", "#000000"]);
                }
            }
        },
        props: {
            Colors: null
        },
        ctors: {
            ctor: function (colors) {
                if (colors === void 0) { colors = []; }

                this.$initialize();
                if (colors != null && colors.length === 25) {
                    this.Colors = colors;
                }

                //BackgroundColor1 = bgc1;
                //BackgroundColor2 = bgc2;
                //BackgroundColor3 = bgc3;
                //BackgroundColor4 = bgc4;
                //BackgroundColor5 = bgc5;
                //BackgroundColor6 = bgc6;
                //BackgroundColor7 = bgc7;
                //BackgroundColor8 = bgc8;
                //BackgroundColor9 = bgc9;
                //BackgroundColor10 = bgc10;
                //BackgroundColor11 = bgc11;
                //BackgroundColor12 = bgc12;
                //BackgroundColor13 = bgc13;
                //BackgroundColor14 = bgc14;
                //BackgroundColor15 = bgc15;
                //BackgroundColor16 = bgc16;
                //BackgroundColor17 = bgc17;
                //BackgroundColor18 = bgc18;
                //BackgroundColor19 = bgc19;
                //BorderColor1 = bc1;
                //BorderColor2 = bc2;
                //BorderColor3 = bc3;
                //ForeColor1 = fc1;
                //ForeColor2 = fc2;
                //ForeColor3 = fc3;
            }
        }
    });

    Bridge.define("ExpressCraft.TileViewState", {
        $kind: "enum",
        statics: {
            fields: {
                Hidden: 0,
                Visible: 1
            }
        }
    });

    Bridge.define("ExpressCraft.ToolTip", {
        fields: {
            Description: null,
            Heading: null,
            AttachedControl: null
        },
        ctors: {
            ctor: function (content) {
                this.$initialize();
                this.Description = content;
            },
            $ctor1: function (heading, description) {
                this.$initialize();
                this.Description = description;
                this.Heading = heading;
            }
        },
        methods: {
            GetWordCount: function () {
                var fullContent = System.String.concat(this.Heading, " ", this.Description).trim();
                var length = fullContent.length;
                var prevChar = 0;
                var builder = new System.Text.StringBuilder();
                var current;
                var WordCount = 1;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    current = fullContent.charCodeAt(i);
                    if (System.Char.isWhiteSpace(String.fromCharCode(current))) {
                        if (System.Char.isWhiteSpace(String.fromCharCode(prevChar))) {
                            prevChar = current;
                            continue;
                        } else {
                            WordCount = (WordCount + 1) | 0;
                        }
                    }
                    prevChar = current;
                }
                return WordCount;
            }
        }
    });

    Bridge.define("ExpressCraft.Vector2", {
        $kind: "struct",
        statics: {
            methods: {
                /**
                 * adds calc to (100% - 50px) turns to calc(100% - 50px)
                 *
                 * @static
                 * @this ExpressCraft.Vector2
                 * @memberof ExpressCraft.Vector2
                 * @param   {string}    a
                 * @return  {string}
                 */
                pf: function (a) {
                    return !System.String.isNullOrWhiteSpace(a) && System.String.startsWith(a, "(") && System.String.endsWith(a, ")") ? System.String.concat("calc", a) : a;
                },
                getDefaultValue: function () { return new ExpressCraft.Vector2(); }
            }
        },
        fields: {
            X: null,
            Y: null
        },
        props: {
            Xi: {
                get: function () {
                    return this.X;
                },
                set: function (value) {
                    this.X = value;
                }
            },
            Yi: {
                get: function () {
                    return this.Y;
                },
                set: function (value) {
                    this.Y = value;
                }
            },
            Xf: {
                get: function () {
                    return this.X;
                },
                set: function (value) {
                    this.X = value;
                }
            },
            Yf: {
                get: function () {
                    return this.Y;
                },
                set: function (value) {
                    this.Y = value;
                }
            }
        },
        ctors: {
            $ctor1: function (x, y) {
                this.$initialize();
                this.X = x;
                this.Y = y;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1955977157, this.X, this.Y]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, ExpressCraft.Vector2)) {
                    return false;
                }
                return Bridge.equals(this.X, o.X) && Bridge.equals(this.Y, o.Y);
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Vector2();
                s.X = this.X;
                s.Y = this.Y;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.Vector4", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new ExpressCraft.Vector4(); }
            }
        },
        fields: {
            X: null,
            Y: null,
            Z: null,
            M: null
        },
        ctors: {
            $ctor1: function (x, y, z, m) {
                this.$initialize();
                this.X = x;
                this.Y = y;
                this.Z = z;
                this.M = m;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1956108229, this.X, this.Y, this.Z, this.M]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, ExpressCraft.Vector4)) {
                    return false;
                }
                return Bridge.equals(this.X, o.X) && Bridge.equals(this.Y, o.Y) && Bridge.equals(this.Z, o.Z) && Bridge.equals(this.M, o.M);
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Vector4();
                s.X = this.X;
                s.Y = this.Y;
                s.Z = this.Z;
                s.M = this.M;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.WindowStateType", {
        $kind: "enum",
        statics: {
            fields: {
                Normal: 0,
                Minimized: 1,
                Maximized: 2
            }
        }
    });

    Bridge.define("ExpressCraft.AceCodeEditor", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                ExternalAceCodeEditor: null
            },
            ctors: {
                init: function () {
                    this.ExternalAceCodeEditor = new ExpressCraft.ExternalPlugin("https://ace.c9.io/build/src/ace.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.AceCodeEditor.ExternalAceCodeEditor.Setup();
                }
            }
        },
        fields: {
            editor: null,
            _modeType: 0,
            _themeType: 0
        },
        props: {
            ReadOnly: {
                get: function () {
                    return this.editor.getReadOnly();
                },
                set: function (value) {
                    this.editor.setReadOnly(value);
                }
            },
            Source: {
                get: function () {
                    return this.editor.getValue();
                },
                set: function (value) {
                    this.editor.setValue(value);
                }
            }
        },
        ctors: {
            ctor: function (modeType, themeType) {
                if (modeType === void 0) { modeType = 17; }
                if (themeType === void 0) { themeType = 11; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this);
                this._modeType = modeType;
                this._themeType = themeType;
            }
        },
        methods: {
            ClearSelection: function () {
                this.editor.clearSelection();
            },
            Render: function () {
                ExpressCraft.AceCodeEditor.ExternalAceCodeEditor.UsageCheck();

                var theme = System.Enum.format(ExpressCraft.AceModeTypes, this._modeType, "G");
                var mode = System.Enum.format(ExpressCraft.AceModeTypes, this._modeType, "G");

                			this.editor = ace.edit(this.content);
                			this.editor.setTheme("ace/theme/" + theme);
                			this.editor.getSession().setMode("ace/mode/" + mode);
                			
                this.OnResize = $asm.$.ExpressCraft.AceCodeEditor.f1;

                this.Content.addEventListener("mousedown", $asm.$.ExpressCraft.AceCodeEditor.f2);

                this.Content.addEventListener("mouseup", $asm.$.ExpressCraft.AceCodeEditor.f3);

                ExpressCraft.Control.prototype.Render.call(this);
            }
        }
    });

    Bridge.ns("ExpressCraft.AceCodeEditor", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.AceCodeEditor, {
        f1: function (cont) {
            				this.editor.resize(true);
            				
        },
        f2: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = true;
        },
        f3: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = false;
        }
    });

    Bridge.define("ExpressCraft.Form", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                WindowHolder: null,
                MinimizedForms: null,
                WindowLoader: null,
                _activeToolTip: null,
                _toolTipTimerHandle: 0,
                _activeToolTipMouseMove: null,
                _activeToolTipControl: null,
                _oepntoolTipTimerHandle: 0,
                ResizeCorners: 0,
                MovingForm: null,
                Parent: null,
                Mouse_Down: false,
                MenuOpen: false,
                FormOverLay: null,
                _hasSetup: false,
                InExternalMouseEvent: false,
                InErrorDialog: false,
                standAloneForms: null,
                FormCollections: null,
                ShowBodyOverLay: false,
                Window_DefaultHeight: 0,
                Window_DefaultWidth: 0,
                _ActiveForm: null,
                _PrevActiveForm: null,
                MoveAction: 0,
                WindowHolderSelectionBoxX: 0,
                WindowHolderSelectionBoxY: 0,
                WindowHolderSelectionBoxXOff: 0,
                WindowHolderSelectionBoxYOff: 0,
                LoadingCount: 0,
                ToClean: null
            },
            props: {
                ActiveToolTip: {
                    get: function () {
                        return ExpressCraft.Form._activeToolTip;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Form._activeToolTip, value)) {
                            if (value != null && value.AttachedControl != null && value.AttachedControl.Content != null) {
                                if (!Bridge.staticEquals(ExpressCraft.Form._activeToolTipMouseMove, null)) {
                                    value.AttachedControl.Content.removeEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                                    ExpressCraft.Form._activeToolTipMouseMove = null;
                                }
                            }
                            if (ExpressCraft.Form._activeToolTipControl != null) {
                                ExpressCraft.Form._activeToolTipControl.Close();
                                ExpressCraft.Form._activeToolTipControl = null;
                            }
                            if (ExpressCraft.Form._toolTipTimerHandle > -1) {
                                Bridge.global.clearTimeout(ExpressCraft.Form._toolTipTimerHandle);
                                ExpressCraft.Form._toolTipTimerHandle = -1;
                            }

                            ExpressCraft.Form._activeToolTip = value;

                            var messageLength;
                            if (ExpressCraft.Form._activeToolTip != null && ((messageLength = ExpressCraft.Form._activeToolTip.GetWordCount())) > 0 && ExpressCraft.Form._activeToolTip.AttachedControl != null) {
                                ExpressCraft.Form._activeToolTipMouseMove = function (ev) {
                                    if (ExpressCraft.Form._toolTipTimerHandle > -1) {
                                        Bridge.global.clearTimeout(ExpressCraft.Form._toolTipTimerHandle);
                                    }
                                    ExpressCraft.Form._toolTipTimerHandle = Bridge.global.setTimeout(function () {
                                        if (ExpressCraft.Form._activeToolTipControl != null) {
                                            ExpressCraft.Form._activeToolTipControl.Close();
                                            ExpressCraft.Form._activeToolTipControl = null;
                                        }
                                        if (ExpressCraft.Form._oepntoolTipTimerHandle > -1) {
                                            Bridge.global.clearTimeout(ExpressCraft.Form._oepntoolTipTimerHandle);
                                            ExpressCraft.Form._oepntoolTipTimerHandle = -1;
                                        }
                                        ExpressCraft.Form._activeToolTipControl = new ExpressCraft.ToolTipControl(ExpressCraft.Form._activeToolTip);
                                        ExpressCraft.Form._activeToolTipControl.Show(ev);

                                        ExpressCraft.Form._oepntoolTipTimerHandle = Bridge.global.setTimeout($asm.$.ExpressCraft.Form.f1, Math.max(1000, Bridge.Int.mul(messageLength, Math.max(ExpressCraft.Settings.ToolTipPopupStayOpenDelayPerWordMs, 10))));

                                        if (!Bridge.staticEquals(ExpressCraft.Form._activeToolTipMouseMove, null)) {
                                            value.AttachedControl.Content.removeEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                                            ExpressCraft.Form._activeToolTipMouseMove = null;
                                        }
                                    }, Math.max(1, ExpressCraft.Settings.ToolTipPopupDelayMs));
                                };
                                value.AttachedControl.Content.addEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                            }
                        }
                    }
                },
                ActiveForm: {
                    get: function () {
                        return ExpressCraft.Form._ActiveForm;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Form._ActiveForm, value)) {
                            ExpressCraft.Form._PrevActiveForm = ExpressCraft.Form._ActiveForm;

                            if (ExpressCraft.Form._ActiveForm != null) {
                                ExpressCraft.Form._ActiveForm.OnLostFocus();
                                if (ExpressCraft.Form._ActiveForm.Content != null) {
                                    if (ExpressCraft.Form._ActiveForm.InDesign) {
                                        ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                                        return;
                                    }
                                    ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "visible";
                                }
                            }
                            ExpressCraft.Form._ActiveForm = value;
                            if (ExpressCraft.Form._ActiveForm != null) {
                                ExpressCraft.Form._ActiveForm.OnGotFocus();
                                if (ExpressCraft.Form._ActiveForm.Content != null) {
                                    ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                                    ExpressCraft.Form._ActiveForm.BringToFront();
                                }
                            }
                            if (Bridge.is(ExpressCraft.Form._PrevActiveForm, ExpressCraft.FormPopup) && ((ExpressCraft.Form._ActiveForm != null && !(Bridge.is(ExpressCraft.Form._ActiveForm, ExpressCraft.FormPopup))) || ExpressCraft.Form._ActiveForm == null)) {
                                ExpressCraft.Form.CloseFormPopups();
                            }
                        }
                    }
                }
            },
            ctors: {
                init: function () {
                    this.MinimizedForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                    this._toolTipTimerHandle = -1;
                    this._oepntoolTipTimerHandle = -1;
                    this.ResizeCorners = 2;
                    this.Mouse_Down = false;
                    this.MenuOpen = false;
                    this._hasSetup = false;
                    this.InExternalMouseEvent = false;
                    this.InErrorDialog = false;
                    this.standAloneForms = new ExpressCraft.FormCollection(null);
                    this.FormCollections = new (System.Collections.Generic.List$1(ExpressCraft.FormCollection))();
                    this.ShowBodyOverLay = false;
                    this.Window_DefaultHeight = 480;
                    this.Window_DefaultWidth = 640;
                    this.MoveAction = ExpressCraft.MouseMoveAction.Move;
                    this.LoadingCount = 0;
                    this.ToClean = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                }
            },
            methods: {
                MidleOfAction: function () {
                    return ExpressCraft.Form.MovingForm != null; // WindowHolderSelectionBox != null ||
                },
                GetActiveFormCollection: function () {
                    for (var i = (ExpressCraft.Form.FormCollections.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        var frmCol = ExpressCraft.Form.FormCollections.getItem(i);
                        if (frmCol.FormOwner == null) {
                            for (var x = 0; x < frmCol.VisibleForms.Count; x = (x + 1) | 0) {
                                if (frmCol.VisibleForms.getItem(x) != null) {
                                    frmCol.VisibleForms.getItem(x).Close();
                                }
                            }
                            ExpressCraft.Form.FormCollections.removeAt(i);
                        } else {
                            return frmCol;
                        }
                    }

                    return null;
                },
                SetBodyOverLay: function () {
                    var ActiveCollection = ExpressCraft.Form.GetActiveFormCollection();
                    if (ActiveCollection == null) {
                        return;
                    }

                    ActiveCollection.FormOwner.ShowBodyOverLayStyle();

                    var VisibleForms = ActiveCollection.VisibleForms;

                    for (var i = 0; i < VisibleForms.Count; i = (i + 1) | 0) {
                        var form = VisibleForms.getItem(i);
                        if (form != null) {
                            form.ShowBodyOverLayStyle();
                        }
                    }
                },
                ChangeStateTextSelection: function (element, state) {
                    $(element).css("user-select", state ? "text" : "none");
                },
                PerformFocusShake: function () {
                    if (ExpressCraft.Form.ActiveForm != null) {
                        var form = ExpressCraft.Form.ActiveForm;
                        form.Heading.classList.add("form-heading-flash");
                        Bridge.global.setTimeout(function () {
                            form.Heading.classList.remove("form-heading-flash");
                        }, 800);
                    }
                },
                DisableStateDrag: function (element) {
                    if (Bridge.is(element, HTMLImageElement)) {
                        element.ondragstart = $asm.$.ExpressCraft.Form.f2;
                    } else {
                        $(element).css("user-drag:", "none");
                    }
                },
                SetupHideElementsOnView: function () {
                    window.onblur = $asm.$.ExpressCraft.Form.f3;

                    window.onfocus = $asm.$.ExpressCraft.Form.f4;
                },
                CloseFormPopups: function () {
                    try {
                        var x = ExpressCraft.Form.GetActiveFormCollection();

                        for (var i = 0; i < x.VisibleForms.Count; i = (i + 1) | 0) {
                            if (x.VisibleForms.getItem(i) != null && Bridge.is(x.VisibleForms.getItem(i), ExpressCraft.FormPopup) && x.VisibleForms.getItem(i).IsContentVisible()) {
                                x.VisibleForms.getItem(i).Close();
                            }
                        }
                        if (Bridge.is(x.FormOwner, ExpressCraft.FormPopup)) {
                            x.FormOwner.Close();
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                },
                BeginLoading: function () {
                    ExpressCraft.Form.LoadingCount = (ExpressCraft.Form.LoadingCount + 1) | 0;
                    ExpressCraft.Form.SetCursor("wait");
                    ExpressCraft.Form.WindowLoader.style.visibility = "visible";
                    ExpressCraft.Form.WindowLoader.style.opacity = "0.4";
                },
                EndLoading: function () {
                    ExpressCraft.Form.LoadingCount = (ExpressCraft.Form.LoadingCount - 1) | 0;
                    if (ExpressCraft.Form.LoadingCount === 0) {
                        ExpressCraft.Form.SetCursor("default");
                        ExpressCraft.Form.WindowLoader.style.visibility = "hidden";
                        ExpressCraft.Form.WindowLoader.style.opacity = "0";
                    }
                },
                Setup: function (parent) {
                    if (parent === void 0) { parent = null; }
                    //Settings.Setup();
                    if (ExpressCraft.Form._hasSetup) {
                        return;
                    }
                    ExpressCraft.Form._hasSetup = true;

                    if (parent == null) {
                        ExpressCraft.Form.Parent = document.body;
                    } else {
                        ExpressCraft.Form.Parent = parent;
                    }

                    ExpressCraft.Form.WindowHolder = ExpressCraft.Control.Div$1("form-container");

                    ExpressCraft.Form.FormOverLay = ExpressCraft.Control.Div$1("system-form-collection-overlay");

                    ExpressCraft.Form.WindowLoader = document.createElement("div");
                    ExpressCraft.Form.WindowLoader.className = "ajax-loading-screen";
                    ExpressCraft.Form.WindowLoader.style.visibility = "hidden";
                    ExpressCraft.Form.WindowLoader.style.opacity = "0";
                    ExpressCraft.Form.WindowLoader.style.backgroundColor = "white";
                    ExpressCraft.Helper.SetBoundsFull$1(ExpressCraft.Form.WindowLoader);
                    ExpressCraft.Form.WindowLoader.style.position = "fixed";
                    ExpressCraft.Form.WindowLoader.style.zIndex = "100000";
                    ExpressCraft.Form.WindowLoader.oncontextmenu = $asm.$.ExpressCraft.Form.f2;
                    ExpressCraft.Form.WindowLoader.onmousedown = $asm.$.ExpressCraft.Form.f5;
                    ExpressCraft.Form.WindowLoader.style.transition = "opacity 1s ease";

                    document.body.appendChild(ExpressCraft.Form.WindowLoader);

                    ExpressCraft.Form.FormOverLay.onmousedown = $asm.$.ExpressCraft.Form.f6;
                    ExpressCraft.Form.FormOverLay.onclick = $asm.$.ExpressCraft.Form.f7;
                    ExpressCraft.Form.FormOverLay.oncontextmenu = $asm.$.ExpressCraft.Form.f8;
                    ExpressCraft.Form.FormOverLay.style.visibility = "visible";

                    window.onkeyup = $asm.$.ExpressCraft.Form.f9;

                    window.onresize = $asm.$.ExpressCraft.Form.f10;

                    window.onmousemove = $asm.$.ExpressCraft.Form.f11;

                    window.onmouseup = $asm.$.ExpressCraft.Form.f12;
                    window.onbeforeunload = $asm.$.ExpressCraft.Form.f13;
                    window.onunload = $asm.$.ExpressCraft.Form.f14;
                    window.onerror = Bridge.fn.combine(window.onerror, $asm.$.ExpressCraft.Form.f15);

                    ExpressCraft.Form.WindowHolder.appendChild(ExpressCraft.Form.FormOverLay);

                    ExpressCraft.Helper.AppendChildren$1(ExpressCraft.Form.Parent, [ExpressCraft.Form.WindowHolder]);
                },
                SetCursor: function (cursor) {
                    document.body.style.cursor = cursor;
                    var x = document.body.style.backgroundColor;
                    document.body.style.backgroundColor = "white";
                    document.body.style.backgroundColor = x;
                },
                CalculateMinmizedFormsLocation: function () {
                    var $t, $t1;
                    ExpressCraft.Form.MinimizedForms.remove(null);
                    var RemoveList = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                    var count = 0;
                    var widthTotal = 0;
                    var y = 30;

                    var viewSize = ExpressCraft.Form.Parent.getBoundingClientRect();

                    $t = Bridge.getEnumerator(ExpressCraft.Form.MinimizedForms);
                    try {
                        while ($t.moveNext()) {
                            var item = $t.Current;
                            if (item.Content == null || item.windowState !== ExpressCraft.WindowStateType.Minimized) {
                                RemoveList.add(item);
                            } else {
                                var ToIncrement = 3 + ExpressCraft.Helper.ToFloat(item.Width);

                                if (widthTotal + ToIncrement > viewSize.width) {
                                    widthTotal = 0;
                                    count = 0;
                                    y = (y + 33) | 0;
                                }

                                item.Location = new ExpressCraft.Vector2.$ctor1(widthTotal, "(100% - " + (((y + 2) | 0)) + "px)");

                                count = (count + 1) | 0;

                                widthTotal += ToIncrement;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }$t1 = Bridge.getEnumerator(RemoveList);
                    try {
                        while ($t1.moveNext()) {
                            var item1 = $t1.Current;
                            ExpressCraft.Form.MinimizedForms.remove(item1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    //Left = 0;
                    //Top = "calc(100% - 30px)";
                },
                ClearZIndex: function () {
                    var x = ExpressCraft.Form.GetActiveFormCollection().FormOwner;
                    ExpressCraft.Form.WindowHolder.style.zIndex = "-" + ExpressCraft.Form.WindowHolder.childElementCount;
                    var Found = false;

                    for (var i = 0; i < ExpressCraft.Form.WindowHolder.childElementCount; i = (i + 1) | 0) {
                        if (Found || Bridge.referenceEquals(x.Content, ExpressCraft.Form.WindowHolder.children[i])) {
                            ExpressCraft.Form.WindowHolder.children[i].style.zIndex = "";
                            Found = true;
                        } else {
                            ExpressCraft.Form.WindowHolder.children[i].style.zIndex = (((((i - ExpressCraft.Form.WindowHolder.childElementCount) | 0) - 1) | 0)).toString();
                        }
                    }
                },
                ApplyZIndex: function () {
                    ExpressCraft.Form.WindowHolder.style.zIndex = "";
                    for (var i = 0; i < ExpressCraft.Form.WindowHolder.childElementCount; i = (i + 1) | 0) {
                        ExpressCraft.Form.WindowHolder.children[i].style.zIndex = i.toString();
                    }
                },
                CalculateZOrder$1: function (formCollection, zIndex) {
                    var TopMostForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();

                    var VisibleForms = formCollection.VisibleForms;
                    if (VisibleForms != null) {
                        for (var i = 0; i < VisibleForms.Count; i = (i + 1) | 0) {
                            if (VisibleForms.getItem(i).Content == null) {
                                ExpressCraft.Form.ToClean.add(VisibleForms.getItem(i));
                            } else {
                                if (VisibleForms.getItem(i).TopMost) {
                                    TopMostForms.add(VisibleForms.getItem(i));
                                }
                            }
                        }
                        for (var i1 = 0; i1 < ExpressCraft.Form.ToClean.Count; i1 = (i1 + 1) | 0) {
                            if (VisibleForms.contains(ExpressCraft.Form.ToClean.getItem(i1))) {
                                VisibleForms.remove(ExpressCraft.Form.ToClean.getItem(i1));
                                ExpressCraft.Form.ToClean.setItem(i1, null);
                            }
                        }

                        ExpressCraft.Form.ToClean.remove(null);

                        if (formCollection.FormOwner != null) {
                            formCollection.FormOwner.ManagePlaceHolders();
                            formCollection.FormOwner.Style.zIndex = zIndex.toString();
                            zIndex = (zIndex + 1) | 0;
                            //frag.AppendChild(formCollection.FormOwner);

                            //if(Helper.NotDesktop)
                            //{
                            //    if(VisibleForms.Count == 0)
                            //    {
                            //        formCollection.FormOwner.ManagePlaceHolders();
                            //        frag.AppendChild(formCollection.FormOwner);
                            //        return zIndex;
                            //    }
                            //}
                            //else
                            //{
                            //    formCollection.FormOwner.ManagePlaceHolders();
                            //    frag.AppendChild(formCollection.FormOwner);
                            //}
                        }

                        for (var i2 = 0; i2 < TopMostForms.Count; i2 = (i2 + 1) | 0) {
                            var form = TopMostForms.getItem(i2);
                            VisibleForms.remove(form);
                            VisibleForms.add(form);
                        }
                        var length = VisibleForms.Count;
                        for (var i3 = 0; i3 < length; i3 = (i3 + 1) | 0) {
                            if (VisibleForms.getItem(i3) != null && VisibleForms.getItem(i3).Content != null) {
                                VisibleForms.getItem(i3).ManagePlaceHolders();
                                VisibleForms.getItem(i3).Style.zIndex = zIndex.toString();
                                zIndex = (zIndex + 1) | 0;
                                //frag.AppendChild(VisibleForms[i]);

                                //if(Helper.NotDesktop)
                                //{
                                //    if(length - 1 == i)
                                //    {
                                //        VisibleForms[i].ManagePlaceHolders();
                                //        frag.AppendChild(VisibleForms[i]);
                                //        return zIndex;
                                //    }
                                //}else
                                //{
                                //    VisibleForms[i].ManagePlaceHolders();
                                //    frag.AppendChild(VisibleForms[i]);
                                //}
                            }
                        }
                    }

                    return zIndex;
                },
                CalculateZOrder: function () {
                    ExpressCraft.Form.GetActiveFormCollection();

                    if (ExpressCraft.Form.FormCollections == null && ExpressCraft.Form.standAloneForms.VisibleForms.Count === 0) {
                        return;
                    }
                    ExpressCraft.Form.FormCollections.remove(null);
                    var count = ExpressCraft.Form.FormCollections.Count;
                    var zIndex = 1;

                    //var frag = Document.CreateDocumentFragment();

                    ExpressCraft.Form.FormOverLay.style.opacity = count === 0 ? "" : count === 1 ? "0" : "0.4";

                    for (var x = 0; x < count; x = (x + 1) | 0) {
                        //if(Helper.NotDesktop)
                        //{
                        //    if(x == count - 1)
                        //    {
                        //        frag.AppendChild(FormOverLay);
                        //        zIndex = CalculateZOrder(FormCollections[x], zIndex, frag);
                        //    }
                        //}
                        //else
                        //{
                        //}
                        if (x === ((count - 1) | 0)) {
                            //frag.AppendChild(FormOverLay);
                            ExpressCraft.Form.FormOverLay.style.zIndex = zIndex.toString();
                            zIndex = (zIndex + 1) | 0;
                        }
                        zIndex = ExpressCraft.Form.CalculateZOrder$1(ExpressCraft.Form.FormCollections.getItem(x), zIndex); // frag
                    }
                    zIndex = ExpressCraft.Form.CalculateZOrder$1(ExpressCraft.Form.standAloneForms, zIndex); // frag

                    //WindowHolder.Empty();
                    //WindowHolder.AppendChild(frag);

                    if (ExpressCraft.Form.ActiveForm != null) {
                        ExpressCraft.Form.ActiveForm.Body.focus();
                    }
                }
            }
        },
        fields: {
            InDesign: false,
            PreviousSizeChange: false,
            PreviousMoveChange: false,
            PreviousShowMax: false,
            PreviousShowMin: false,
            PreviousOpacity: null,
            HasRemovedPlaceHolder: false,
            AllowSizeChange: false,
            AllowMoveChange: false,
            ForReuse: false,
            Self: null,
            _IsDialog: false,
            Children: null,
            StartPosition: 0,
            TopMost: false,
            DialogResult: 0,
            Heading: null,
            ButtonClose: null,
            ButtonExpand: null,
            ButtonMinimize: null,
            ButtonMenu: null,
            HeadingTitle: null,
            Body: null,
            BodyOverLay: null,
            prev_px: 0,
            prev_py: 0,
            prev_width: 0,
            prev_height: 0,
            prev_top: 0,
            prev_left: 0,
            MinWidth: 0,
            MinHeight: 0,
            windowState: 0,
            _prevwindowState: 0,
            OnFormClosed: null,
            previousDisplay: null,
            DialogResults: null,
            _seperateInstance: false,
            closeAction: null,
            InClose: false,
            InDialogResult: false
        },
        props: {
            HasSetup: {
                get: function () {
                    return ExpressCraft.Form._hasSetup;
                }
            },
            Controls: {
                get: function () {
                    return this.Body.children;
                }
            },
            ShowMinimize: {
                get: function () {
                    return this.ButtonMinimize != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Minimize, value);
                }
            },
            BodyStyle: {
                get: function () {
                    return this.Body.style;
                }
            },
            ShowClose: {
                get: function () {
                    return this.ButtonClose != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Close, value);
                }
            },
            ShowMaximize: {
                get: function () {
                    return this.ButtonExpand != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Maximize, value);
                }
            },
            ShowMenu: {
                get: function () {
                    return this.ButtonMenu != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Menu, value);
                }
            },
            WindowState: {
                get: function () {
                    return this.windowState;
                },
                set: function (value) {
                    this.SetWindowState(value);
                }
            },
            Text: {
                get: function () {
                    return this.HeadingTitle.innerHTML;
                },
                set: function (value) {
                    this.HeadingTitle.innerHTML = value;
                }
            },
            BackColor: {
                get: function () {
                    return this.Body.style.backgroundColor;
                },
                set: function (value) {
                    this.Body.style.backgroundColor = value;
                }
            },
            ForeColor: {
                get: function () {
                    return this.Body.style.color;
                },
                set: function (value) {
                    this.Body.style.color = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.InDesign = false;
                this.PreviousSizeChange = true;
                this.PreviousMoveChange = true;
                this.PreviousShowMax = true;
                this.PreviousShowMin = true;
                this.PreviousOpacity = "";
                this.AllowSizeChange = true;
                this.AllowMoveChange = true;
                this.ForReuse = false;
                this._IsDialog = false;
                this.Children = new (System.Collections.Generic.List$1(ExpressCraft.Control))();
                this.StartPosition = ExpressCraft.FormStartPosition.WindowsDefaultLocation;
                this.TopMost = false;
                this.DialogResult = ExpressCraft.DialogResultEnum.None;
                this.MinWidth = 200;
                this.MinHeight = 50;
                this._prevwindowState = ExpressCraft.WindowStateType.Normal;
                this.DialogResults = new (System.Collections.Generic.List$1(ExpressCraft.DialogResult))();
                this._seperateInstance = false;
                this.InClose = false;
                this.InDialogResult = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "form-base");
                this.Heading = ExpressCraft.Control.Div$1("form-heading");

                this.Heading.oncontextmenu = $asm.$.ExpressCraft.Form.f8;

                this.HeadingTitle = ExpressCraft.Control.Span$1("form-heading-title");

                this.Body = ExpressCraft.Control.Div$1("form-body");

                this.Body.oncontextmenu = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f16);

                this.BackColor = "#F0F0F0";

                this.BodyOverLay = ExpressCraft.Control.Div$1("form-body-overlay");

                this.BodyOverLay.style.opacity = ExpressCraft.Form.ShowBodyOverLay ? "0.5" : "0";

                this.ChangeHeadingButton(ExpressCraft.FormButtonType.Close);
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Maximize);
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Minimize);
                }

                if (ExpressCraft.Helper.NotDesktop) {
                    this.Heading.style.height = "50px";
                    this.HeadingTitle.style.fontSize = "14px";

                    this.Body.style.top = "50px";
                    this.Body.style.height = "calc(100% - 50px)";

                    this.BodyOverLay.style.top = "50px";
                    this.BodyOverLay.style.height = "calc(100% - 50px)";
                }

                this.BodyOverLay.style.visibility = "collapse";

                this.Self = $(this.Content);

                this.Content.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f17));

                this.Heading.addEventListener("dblclick", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f18));

                this.Content.addEventListener("mouseleave", $asm.$.ExpressCraft.Form.f19);

                this.Body.addEventListener("mouseenter", $asm.$.ExpressCraft.Form.f20);

                this.Content.addEventListener("mousemove", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f21));

                this.Heading.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f22));

                this.Body.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f23));

                this.Body.addEventListener("mousemove", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f24));

                this.BodyOverLay.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f25));

                this.Body.addEventListener("mouseleave", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f26));

                this.BodyOverLay.addEventListener("mouseenter", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f27));

                $(this.Content).css("width", ExpressCraft.Form.Window_DefaultWidth).css("height", ExpressCraft.Form.Window_DefaultHeight);

                this.Content.appendChild(this.Heading);
                this.Content.appendChild(this.Body);
                this.Content.appendChild(this.BodyOverLay);

                this.Heading.appendChild(this.HeadingTitle);

                this.closeAction = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f28);

                this.Initialise();
            }
        },
        methods: {
            IsDialog: function () {
                return this._IsDialog;
            },
            LinkchildToForm: function (child) {
                if (child == null) {
                    return;
                }
                this.Children.add(child);
                child.LinkedForm = this;
            },
            LinkchildrenToForm: function (children) {
                if (children === void 0) { children = []; }
                if (children == null || children.length === 0) {
                    return;
                }
                this.Children.addRange(children);
                for (var i = 0; i < children.length; i = (i + 1) | 0) {
                    children[System.Array.index(i, children)].LinkedForm = this;
                }
            },
            AppendChild$1: function (node) {
                this.Body.appendChild(ExpressCraft.Control.op_Implicit(node));

                return this;
            },
            AppendChild: function (node) {
                this.Body.appendChild(node);

                return this;
            },
            AppendChildren$1: function (node) {
                if (node === void 0) { node = []; }
                ExpressCraft.Helper.AppendChildren$2(this.Body, node);

                return this;
            },
            AppendChildren: function (node) {
                if (node === void 0) { node = []; }
                ExpressCraft.Helper.AppendChildren$1(this.Body, node);

                return this;
            },
            ResizeChildren: function (parent) {
                if (!Bridge.staticEquals(this.OnResize, null)) {
                    this.OnResize(this);
                }
                this.OnResizing();

                for (var x = 0; x < parent.children.length; x = (x + 1) | 0) {
                    if (!parent.children[x].classList.contains("control")) {
                        continue;
                    }
                    for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                        if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnResize, null)) {
                            if (Bridge.referenceEquals(this.Children.getItem(i).Content, parent.children[x])) {
                                this.Children.getItem(i).OnResize(this.Children.getItem(i));
                                break;
                            }
                        }
                    }
                    this.ResizeChildren(parent.children[x]);
                }
            },
            Resizing: function () {
                if (!Bridge.staticEquals(this.OnResize, null)) {
                    this.OnResize(this);
                }
                this.OnResizing();

                for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                    if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnResize, null)) {
                        this.Children.getItem(i).OnResize(this.Children.getItem(i));
                    }
                }
            },
            OnResizing: function () { },
            IsContentVisible: function () {
                return this.Content != null && Bridge.equals(this.Content.style.visibility, "visible");
            },
            ChangeHeadingButton: function (button, visible) {
                if (visible === void 0) { visible = true; }
                switch (button) {
                    case ExpressCraft.FormButtonType.Minimize: 
                        if (this.ButtonMinimize != null) {
                            ExpressCraft.Helper.Delete(this.ButtonMinimize);
                            this.ButtonMinimize = null;
                        }
                        if (visible) {
                            this.ButtonMinimize = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Maximize: 
                        if (this.ButtonExpand != null) {
                            ExpressCraft.Helper.Delete(this.ButtonExpand);
                            this.ButtonExpand = null;
                        }
                        if (visible) {
                            this.ButtonExpand = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Close: 
                        if (this.ButtonClose != null) {
                            ExpressCraft.Helper.Delete(this.ButtonClose);
                            this.ButtonClose = null;
                        }
                        if (visible) {
                            this.ButtonClose = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Menu: 
                        if (this.ButtonMenu != null) {
                            ExpressCraft.Helper.Delete(this.ButtonMenu);
                            this.ButtonMenu = null;
                        }
                        if (visible) {
                            this.ButtonMenu = this.CreateFormButton(button);
                        }
                        break;
                    default: 
                        break;
                }

                this.CalculateButtonLocations();
            },
            Initialise: function () { },
            OnShowing: function () { },
            OnShowed: function () { },
            OnClosing: function () { },
            OnClosed: function () { },
            ShowBodyOverLayStyle: function () {
                if (this.BodyOverLay != null && Bridge.equals(this.BodyOverLay.style.visibility, "collapse")) {
                    if (this.InDesign) {
                        return;
                    }
                    this.BodyOverLay.style.visibility = "visible";
                }
            },
            OnGotFocus: function () { },
            OnLostFocus: function () { },
            SetWindowState: function (State) {
                if (State === this.windowState) {
                    return;
                }

                this._prevwindowState = this.windowState;

                if (this._prevwindowState === ExpressCraft.WindowStateType.Minimized) {
                    this.Body.style.opacity = this.PreviousOpacity;
                    this.AllowSizeChange = this.PreviousSizeChange;
                    this.AllowMoveChange = this.PreviousMoveChange;
                    this.ShowMaximize = this.PreviousShowMax;
                    this.ShowMinimize = this.PreviousShowMin;
                    this.HeadingTitle.style.left = "";
                    this.HeadingTitle.style.marginRight = "";
                    this.HeadingTitle.style.transform = "";

                    if (this.ButtonMinimize != null) {
                        this.ButtonMinimize.innerHTML = "-";
                    }
                    this.Heading.classList.remove("form-heading-min");

                    ExpressCraft.Form.MinimizedForms.remove(this);

                    this.Body.style.display = this.previousDisplay;

                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                if (!this.AllowSizeChange) {
                    return;
                }

                if (((this.windowState = State)) === ExpressCraft.WindowStateType.Normal) {
                    ExpressCraft.Helper.SetBounds(this, this.prev_left, this.prev_top, this.prev_width, this.prev_height);
                    this.Resizing();
                    this.Style.borderWidth = "1px";
                } else if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                    if (this._prevwindowState === ExpressCraft.WindowStateType.Normal) {
                        this.prev_left = ExpressCraft.Helper.ToInt(this.Left);
                        this.prev_top = ExpressCraft.Helper.ToInt(this.Top);
                        this.prev_width = ExpressCraft.Helper.ToInt(this.Width);
                        this.prev_height = ExpressCraft.Helper.ToInt(this.Height);
                    }

                    this.Style.borderWidth = "0";

                    ExpressCraft.Helper.SetBounds(this, 0, 0, "100%", "100%");
                } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                    this.PreviousSizeChange = this.AllowSizeChange;
                    this.PreviousMoveChange = this.AllowMoveChange;
                    this.PreviousOpacity = this.Body.style.opacity;
                    this.PreviousShowMax = this.ShowMaximize;
                    this.PreviousShowMin = this.ShowMinimize;

                    this.AllowSizeChange = false;
                    this.Body.style.opacity = "0";
                    this.ShowMaximize = false;
                    this.ShowMinimize = false;
                    this.AllowMoveChange = false;

                    if (this._prevwindowState === ExpressCraft.WindowStateType.Normal) {
                        this.prev_left = ExpressCraft.Helper.ToInt(this.Left);
                        this.prev_top = ExpressCraft.Helper.ToInt(this.Top);
                        this.prev_width = ExpressCraft.Helper.ToInt(this.Width);
                        this.prev_height = ExpressCraft.Helper.ToInt(this.Height);
                    } else {
                        this.Style.borderWidth = "1px";
                    }

                    this.HeadingTitle.style.marginRight = "0";
                    this.HeadingTitle.style.left = "3px";
                    this.HeadingTitle.style.transform = "translate(0, -50%)";

                    var offset = (this.ShowClose ? 45.5 : 0);

                    this.Width = Math.max(ExpressCraft.Control.GetTextWidth(this.Text, "10pt Tahoma") + 32, 100) + offset;
                    this.Height = 30;

                    this.Heading.classList.add("form-heading-min");

                    if (this.ButtonMinimize != null) {
                        this.ButtonMinimize.innerHTML = "+";
                    }

                    this.previousDisplay = this.Body.style.display;
                    this.Body.style.display = "none";

                    ExpressCraft.Form.MinimizedForms.add(this);

                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                this.Resizing();
            },
            changeWindowState: function () {
                if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                    this.SetWindowState(ExpressCraft.WindowStateType.Normal);
                } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                    this.SetWindowState(this._prevwindowState);
                } else {
                    this.SetWindowState(ExpressCraft.WindowStateType.Maximized);
                }
            },
            CalculateButtonLocations: function () {
                var RightOffset = 0;
                var append = 45.5;

                if (ExpressCraft.Helper.NotDesktop) {
                    append = 65.5;
                }

                if (this.ShowClose) {
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.ButtonClose.style.left = "calc(100% - " + System.Single.format(append) + "px)";
                    }
                    RightOffset += append;
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonClose)) {
                        this.Heading.appendChild(this.ButtonClose);
                    }
                }

                if (this.ShowMaximize) {
                    RightOffset += append;
                    this.ButtonExpand.style.left = "calc(100% - " + System.Single.format(RightOffset) + "px)";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonExpand)) {
                        this.Heading.appendChild(this.ButtonExpand);
                    }
                }
                if (this.ShowMinimize) {
                    RightOffset += append;
                    this.ButtonMinimize.style.left = "calc(100% - " + System.Single.format(RightOffset) + "px)";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonMinimize)) {
                        this.Heading.appendChild(this.ButtonMinimize);
                    }
                }

                if (this.ShowMenu) {
                    this.ButtonMenu.style.left = "0";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonMenu)) {
                        this.Heading.appendChild(this.ButtonMenu);
                    }
                }
            },
            CreateFormButton: function (Type) {
                var butt = ExpressCraft.Control.Div$1("form-heading-button");

                switch (Type) {
                    case ExpressCraft.FormButtonType.Close: 
                        butt.classList.add("form-heading-button-close");
                        butt.innerHTML = "&times;";
                        butt.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f29);
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f30);
                        break;
                    case ExpressCraft.FormButtonType.Maximize: 
                        butt.innerHTML = "&#9633;";
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f31);
                        break;
                    case ExpressCraft.FormButtonType.Minimize: 
                        butt.innerHTML = "-";
                        butt.onmouseup = Bridge.fn.bind(this, function (ev) {
                            if (ExpressCraft.Form.MovingForm != null) {
                                return;
                            }

                            ev.stopPropagation();
                            ev.preventDefault();

                            if (Bridge.referenceEquals(butt.innerHTML, "-")) {
                                butt.innerHTML = "+";
                                this.WindowState = ExpressCraft.WindowStateType.Minimized;
                            } else {
                                this.WindowState = this._prevwindowState === ExpressCraft.WindowStateType.Minimized ? ExpressCraft.WindowStateType.Normal : this._prevwindowState;
                                butt.innerHTML = "-";
                            }

                            ExpressCraft.Form.Mouse_Down = false;
                        });
                        break;
                    case ExpressCraft.FormButtonType.Restore: 
                        break;
                    case ExpressCraft.FormButtonType.Help: 
                        break;
                    default: 
                        butt.onmouseup = $asm.$.ExpressCraft.Form.f32;
                        break;
                    case ExpressCraft.FormButtonType.Menu: 
                        butt.innerHTML = "&#9776;";
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f33);
                        break;
                }

                butt.onmouseenter = $asm.$.ExpressCraft.Form.f34;

                butt.ondblclick = $asm.$.ExpressCraft.Form.f35;

                butt.onmousemove = $asm.$.ExpressCraft.Form.f36;

                if (Type !== ExpressCraft.FormButtonType.Close) {
                    butt.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f37);
                }

                if (ExpressCraft.Helper.NotDesktop) {
                    butt.style.width = "65px";
                    butt.style.height = "49px";
                    butt.style.fontSize = "16pt";
                    butt.style.lineHeight = "49px";
                    ExpressCraft.Helper.ExchangeClass(butt, "primary", "primary");
                    butt.style.filter = "brightness(110%)";
                }

                return butt;
            },
            OnMenuClick: function () { },
            TitleBarHeight: function () {
                return this.Heading.clientHeight;
            },
            TitleBarWidth: function () {
                return this.Heading.clientWidth;
            },
            ClientX: function () {
                return this.Body.clientLeft;
            },
            ClientY: function () {
                return this.Body.clientTop;
            },
            GetFormCollectionFromForm: function (form) {
                if (form._seperateInstance) {
                    var visibleForms = ExpressCraft.Form.standAloneForms.VisibleForms;
                    for (var x = 0; x < visibleForms.Count; x = (x + 1) | 0) {
                        if (Bridge.referenceEquals(visibleForms.getItem(x), this)) {
                            return ExpressCraft.Form.standAloneForms;
                        }
                    }
                } else {
                    for (var i = 0; i < ExpressCraft.Form.FormCollections.Count; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(this, ExpressCraft.Form.FormCollections.getItem(i).FormOwner)) {
                            return ExpressCraft.Form.FormCollections.getItem(i);
                        }
                        var visibleForms1 = ExpressCraft.Form.FormCollections.getItem(i).VisibleForms;
                        for (var x1 = 0; x1 < visibleForms1.Count; x1 = (x1 + 1) | 0) {
                            if (Bridge.referenceEquals(visibleForms1.getItem(x1), this)) {
                                return ExpressCraft.Form.FormCollections.getItem(i);
                            }
                        }
                    }
                }

                return null;
            },
            IsActiveFormCollection: function () {
                if (this._seperateInstance) {
                    return Bridge.referenceEquals(this.GetFormCollectionFromForm(this), ExpressCraft.Form.standAloneForms);
                } else {
                    return Bridge.referenceEquals(this.GetFormCollectionFromForm(this), ExpressCraft.Form.GetActiveFormCollection());
                }
            },
            IsVisible: function () {
                return this.GetFormCollectionFromForm(this) != null;
            },
            ShowStartNewLevel: function () {
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                if (this.IsVisible()) {
                    // Already Open???
                    throw new System.Exception("Invalid request to open form as a dialog that is already visible!");
                }

                ExpressCraft.Form.FormCollections.add(new ExpressCraft.FormCollection(this));
                ExpressCraft.Form.WindowHolder.appendChild(ExpressCraft.Control.op_Implicit(this));

                ExpressCraft.Form.CalculateZOrder();

                if (this.StartPosition === ExpressCraft.FormStartPosition.Center) {
                    this.CentreForm();
                }

                this.OnShowed();

                ExpressCraft.Form.ActiveForm = this;

                ExpressCraft.Helper.FocusElement(this.Body);
            },
            ShowDialog: function (dialogResults) {
                if (dialogResults === void 0) { dialogResults = []; }
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                this.InDialogResult = false;

                if (this.ButtonMinimize != null) {
                    ExpressCraft.Helper.Delete(this.ButtonMinimize);
                }
                if (this.ButtonExpand != null) {
                    ExpressCraft.Helper.Delete(this.ButtonExpand);
                }
                if (this.ButtonClose != null) {
                    ExpressCraft.Helper.Delete(this.ButtonClose);
                }

                this._IsDialog = true;
                if (this.StartPosition !== ExpressCraft.FormStartPosition.Manual) {
                    if (!ExpressCraft.Helper.NotDesktop) {
                        this.StartPosition = ExpressCraft.FormStartPosition.Center;
                    }
                }
                this.ShowStartNewLevel();

                if (dialogResults != null && dialogResults.length > 0) {
                    this.DialogResults.addRange(dialogResults);
                }
            },
            MinZero$1: function (input) {
                return input < 0 ? 0 : input;
            },
            MinZero: function (input) {
                return input < 0 ? 0 : input;
            },
            CentreForm: function () {
                if (ExpressCraft.Form.WindowHolder == null) {
                    return;
                }

                this.Self.css("left", this.MinZero((((((Bridge.Int.div(ExpressCraft.Form.WindowHolder.clientWidth, 2)) | 0)) - (((Bridge.Int.div(parseInt(ExpressCraft.Helper.ToHtmlValue(this.Width)), 2)) | 0))) | 0))).css("top", this.MinZero((((((Bridge.Int.div(ExpressCraft.Form.WindowHolder.clientHeight, 2)) | 0)) - (((Bridge.Int.div(parseInt(ExpressCraft.Helper.ToHtmlValue(this.Height)), 2)) | 0))) | 0)));
            },
            Render: function () {
                if (!this.HasRendered) {
                    ExpressCraft.Control.prototype.Render.call(this);
                    this.OnShowing();
                    this.Shown();
                }
            },
            Shown: function () {
                this.InClose = false;
                if (this.Children == null) {
                    return;
                }
                for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                    if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnLoaded, null)) {
                        this.Children.getItem(i).OnLoaded(this.Children.getItem(i));
                    }
                }
                this.Children.remove(null);
            },
            Show: function (seperateInstance) {
                if (seperateInstance === void 0) { seperateInstance = false; }
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                if (this._IsDialog) {
                    return;
                }
                this._seperateInstance = seperateInstance;
                if (!seperateInstance && (ExpressCraft.Form.FormCollections == null || ExpressCraft.Form.FormCollections.Count === 0)) {
                    this.ShowStartNewLevel();
                    return;
                }

                var activeCollect = !seperateInstance ? ExpressCraft.Form.GetActiveFormCollection() : ExpressCraft.Form.standAloneForms;
                var visbileForms = activeCollect.VisibleForms;

                if (!visbileForms.contains(this)) {
                    visbileForms.add(this);
                    ExpressCraft.Form.WindowHolder.appendChild(ExpressCraft.Control.op_Implicit(this));

                    this.Content.style.visibility = "visible";

                    ExpressCraft.Form.CalculateZOrder();

                    if (this.StartPosition !== ExpressCraft.FormStartPosition.Manual && this.windowState === ExpressCraft.WindowStateType.Normal) {
                        if (this.StartPosition === ExpressCraft.FormStartPosition.Center || (activeCollect == null || visbileForms == null || visbileForms.Count === 0 || visbileForms.getItem(((visbileForms.Count - 1) | 0)).windowState !== ExpressCraft.WindowStateType.Normal || visbileForms.getItem(((visbileForms.Count - 1) | 0)).Content == null)) {
                            this.CentreForm();
                        } else if (this.StartPosition === ExpressCraft.FormStartPosition.WindowsDefaultLocation) {
                            var obj = visbileForms.getItem(((visbileForms.Count - 1) | 0));

                            var x = Bridge.box(parseInt(ExpressCraft.Helper.ToHtmlValue(obj.Left)), System.Int32);
                            var y = Bridge.box(parseInt(ExpressCraft.Helper.ToHtmlValue(obj.Top)), System.Int32);

                            if (isNaN(Bridge.unbox(x))) {
                                x = Bridge.box(0, System.Int32);
                            }
                            if (isNaN(Bridge.unbox(y))) {
                                y = Bridge.box(0, System.Int32);
                            }

                            var rec = ExpressCraft.Form.WindowHolder.getBoundingClientRect();

                            var pw25 = rec.width * 0.15;
                            var ph25 = rec.height * 0.15;

                            var pw75 = rec.width * 0.55;
                            var ph75 = rec.height * 0.55;

                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) < pw25) {
                                x = Bridge.box(Bridge.Int.clip32(pw25), System.Int32);
                            }
                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) < ph25) {
                                y = Bridge.box(Bridge.Int.clip32(ph25), System.Int32);
                            }

                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) > pw75) {
                                x = Bridge.box(Bridge.Int.clip32(pw25), System.Int32);
                            }
                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) > ph75) {
                                y = Bridge.box(Bridge.Int.clip32(ph25), System.Int32);
                            }
                            x = Bridge.box((System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) + 10) | 0, System.Int32);
                            y = Bridge.box((System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) + 10) | 0, System.Int32);

                            this.Self.css("left", this.MinZero(System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)))).css("top", this.MinZero(System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32))));
                        }
                    }

                    this.OnShowed();
                }

                ExpressCraft.Form.ActiveForm = this;

                if (ExpressCraft.Helper.NotDesktop) {
                    Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f38), 0);
                }
            },
            BringToFront: function () {
                var activeCollect = ExpressCraft.Form.GetActiveFormCollection();
                if (activeCollect != null) {
                    if (Bridge.referenceEquals(activeCollect.FormOwner, this)) {
                        return;
                    }
                    var visibleForms = activeCollect.VisibleForms;
                    if (visibleForms != null && visibleForms.Count > 1) {
                        visibleForms.remove(this);
                        visibleForms.add(this);
                    }

                    ExpressCraft.Form.CalculateZOrder();
                }
            },
            SetZIndex: function (zIndex) {
                this.Content.style.zIndex = (Bridge.identity(zIndex.v, (zIndex.v = (zIndex.v + 1) | 0))).toString();
            },
            ManagePlaceHolders: function () {
                if (!ExpressCraft.Settings.RemoveAttributesOffElementsWhenLoseFocus) {
                    return;
                }

                var shouldHidePlaceholders = !Bridge.referenceEquals(ExpressCraft.Form.ActiveForm, this);

                if (shouldHidePlaceholders !== this.HasRemovedPlaceHolder) {
                    this.HasRemovedPlaceHolder = shouldHidePlaceholders;
                    var que = new (System.Collections.Generic.Queue$1(HTMLElement)).ctor();
                    que.enqueue(this.Body);

                    while (que.Count > 0) {
                        var element = que.dequeue();
                        if (shouldHidePlaceholders) {
                            var a = element.getAttribute("placeholder");
                            if (!System.String.isNullOrWhiteSpace(a)) {
                                element.removeAttribute("placeholder");
                                element.setAttribute("data-placeholder", a);
                            }
                        } else {
                            var a1 = element.getAttribute("data-placeholder");
                            if (!System.String.isNullOrWhiteSpace(a1)) {
                                element.removeAttribute("data-placeholder");
                                element.setAttribute("placeholder", a1);
                            }
                        }
                        var length = element.childElementCount;
                        if (length > 0) {
                            for (var i = 0; i < length; i = (i + 1) | 0) {
                                que.enqueue(element.children[i]);
                            }
                        }
                    }
                }
            },
            Close: function () {
                if (this._IsDialog && this.InDialogResult) {
                    return;
                }

                this.InClose = true;

                this.OnClosing();

                ExpressCraft.Form.ToClean.add(this);

                var ownerFormCollection = this.GetFormCollectionFromForm(this);

                if (ownerFormCollection != null) {
                    if (Bridge.referenceEquals(ownerFormCollection.FormOwner, this)) {
                        ownerFormCollection.FormOwner = null;
                        for (var i = 0; i < ownerFormCollection.VisibleForms.Count; i = (i + 1) | 0) {
                            if (Bridge.referenceEquals(ownerFormCollection.VisibleForms.getItem(i), this)) {
                                continue;
                            }
                            ownerFormCollection.VisibleForms.getItem(i).Close();
                        }
                        if (ExpressCraft.Form.FormCollections.Count === 1) {
                            ExpressCraft.Form.FormCollections = new (System.Collections.Generic.List$1(ExpressCraft.FormCollection))();
                        }
                    } else {
                        ownerFormCollection.VisibleForms.remove(this);
                    }
                }

                if (this.Content != null) {
                    if (!this.ForReuse) {
                        if (ExpressCraft.Settings.FormFadeDuration > 0) {
                            this.Self.fadeOut(ExpressCraft.Settings.FormFadeDuration, this.closeAction);
                        } else {
                            this.closeAction();
                        }
                    } else {
                        this.Content.style.visibility = "collapse";
                    }
                }

                ExpressCraft.Form.CalculateZOrder();

                ExpressCraft.Form.ActiveForm = ExpressCraft.Form._PrevActiveForm;
                if (this._IsDialog) {
                    this.InDialogResult = true;
                    if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.DialogResults != null && this.DialogResults.Count > 0) {
                        for (var i1 = 0; i1 < this.DialogResults.Count; i1 = (i1 + 1) | 0) {
                            this.DialogResults.getItem(i1).InvokeIfResult(this.DialogResult);
                        }
                    }
                }

                if (!Bridge.staticEquals(this.OnFormClosed, null)) {
                    this.OnFormClosed();
                }
                this.OnClosed();

                if (this.WindowState === ExpressCraft.WindowStateType.Minimized) {
                    ExpressCraft.Form.MinimizedForms.remove(this);
                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                this.InClose = false;
            }
        }
    });

    Bridge.ns("ExpressCraft.Form", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Form, {
        f1: function () {
            if (ExpressCraft.Form._activeToolTipControl != null) {
                ExpressCraft.Form._activeToolTipControl.Close();
                ExpressCraft.Form._activeToolTipControl = null;
            }
        },
        f2: function (ev) {
            ev.preventDefault();
        },
        f3: function (ev) {
            if (System.Linq.Enumerable.from(document.body.childNodes).contains(ExpressCraft.Form.WindowHolder)) {
                document.body.removeChild(ExpressCraft.Form.WindowHolder);
            }
        },
        f4: function (ev) {
            if (!System.Linq.Enumerable.from(document.body.childNodes).contains(ExpressCraft.Form.WindowHolder)) {
                document.body.appendChild(ExpressCraft.Form.WindowHolder);
            }
        },
        f5: function (ev) {
            ev.preventDefault();
            ev.stopPropagation();
        },
        f6: function (ev) {
            if (Bridge.is(ExpressCraft.Form.ActiveForm, ExpressCraft.FormPopup)) {
                ExpressCraft.Form.CloseFormPopups();
            }

            if (document.activeElement != null) {
                //FormPopup
                document.activeElement.focus();
                ev.preventDefault();
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f7: function (ev) {
            ExpressCraft.Form.PerformFocusShake();
        },
        f8: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f9: function (ev) {
            if (ExpressCraft.Settings.OnF2ShowThemeForm && ev.keyCode === ExpressCraft.KeyCodes.F2) {
                ev.preventDefault();
                ExpressCraft.ThemeForm.ShowThemeForm();
            }
        },
        f10: function (ev) {
            if (ExpressCraft.Form.FormCollections == null) {
                return;
            }

            for (var i = 0; i < ExpressCraft.Form.FormCollections.Count; i = (i + 1) | 0) {
                if (ExpressCraft.Form.FormCollections.getItem(i) == null) {
                    continue;
                }
                var fc = ExpressCraft.Form.FormCollections.getItem(i);
                if (fc.FormOwner != null) {
                    fc.FormOwner.Resizing();
                }
                for (var x = 0; x < fc.VisibleForms.Count; x = (x + 1) | 0) {
                    if (fc.VisibleForms.getItem(x) != null) {
                        fc.VisibleForms.getItem(x).Resizing();
                    }
                }
            }

            ExpressCraft.Form.CalculateMinmizedFormsLocation();
        },
        f11: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            var mev = ev;

            if (ExpressCraft.Form.MovingForm != null) {
                ev.preventDefault();
                ev.stopImmediatePropagation();
                ev.stopPropagation();

                ExpressCraft.Form.MovingForm.Style.boxShadow = "none"; // box - shadow: none;

                if (Bridge.equals(ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility, "collapse")) {
                    if (ExpressCraft.Form.MovingForm.InDesign) {
                        ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                    } else {
                        ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility = "visible";
                    }

                    ExpressCraft.Form.MovingForm.Heading.focus();
                }

                var mousePos = ExpressCraft.Helper.GetClientMouseLocation(ev);

                var mX;
                var mY;

                var newX = (((mX = mousePos.Xf)) + ExpressCraft.Form.MovingForm.prev_px);
                var newY = (((mY = mousePos.Yf)) + ExpressCraft.Form.MovingForm.prev_py);

                if (ExpressCraft.Form.MovingForm.windowState === ExpressCraft.WindowStateType.Maximized && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                    ExpressCraft.Form.MovingForm.changeWindowState();
                    newX = mousePos.Xf - (((Bridge.Int.div(ExpressCraft.Form.MovingForm.prev_width, 2)) | 0));
                    ExpressCraft.Form.MovingForm.prev_px = newX - mousePos.Xf;
                }

                var x = parseFloat(ExpressCraft.Form.MovingForm.Style.left);
                var y = parseFloat(ExpressCraft.Form.MovingForm.Style.top);
                var w = parseFloat(ExpressCraft.Form.MovingForm.Style.width);
                var h = parseFloat(ExpressCraft.Form.MovingForm.Style.height);

                var px = x;
                var py = y;
                var pw = w;
                var ph = h;

                if (newY < 1) {
                    newY = 1;
                }
                if (newX < 1) {
                    newX = 1;
                }

                if (mX < 1) {
                    mX = 1;
                }
                if (mY < 1) {
                    mY = 1;
                }

                switch (ExpressCraft.Form.MoveAction) {
                    case ExpressCraft.MouseMoveAction.Move: 
                        x = newX;
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopLeftResize: 
                        w -= newX - x;
                        h -= newY - y;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        x = newX;
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopResize: 
                        h -= newY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopRightResize: 
                        h -= newY - y;
                        w = mX - x;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.LeftResize: 
                        w -= newX - x;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        x = newX;
                        break;
                    case ExpressCraft.MouseMoveAction.BottomLeftResize: 
                        w -= newX - x;
                        h = mY - y;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        x = newX;
                        break;
                    case ExpressCraft.MouseMoveAction.BottomResize: 
                        h = mY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        break;
                    case ExpressCraft.MouseMoveAction.RightResize: 
                        w = mX - x;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        break;
                    case ExpressCraft.MouseMoveAction.BottomRightResize: 
                        w = mX - x;
                        h = mY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        break;
                }
                var changed = false;
                if (px !== x) {
                    ExpressCraft.Form.MovingForm.Style.left = x + 'px';
                }
                if (py !== y) {
                    ExpressCraft.Form.MovingForm.Style.top = y + 'px';
                }
                if (pw !== w && ((changed = true))) {
                    ExpressCraft.Form.MovingForm.Style.width = w + 'px';
                }
                if (ph !== h && ((changed = true))) {
                    ExpressCraft.Form.MovingForm.Style.height = h + 'px';
                }

                if (changed) {
                    ExpressCraft.Form.MovingForm.Resizing();
                }
            }
        },
        f12: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = false;
            if (ExpressCraft.Form.MovingForm != null) {
                ExpressCraft.Form.MovingForm.Style.boxShadow = null;
                ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility = "collapse";
            }

            ExpressCraft.Form.MovingForm = null;
            ExpressCraft.Form.Mouse_Down = false;
            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            ExpressCraft.Form.SetCursor("default");
        },
        f13: function (ev) {
            if (!ExpressCraft.Settings.AllowCloseWithoutQuestion) {
                return 'Would you like to close this application?';
            }
        },
        f14: function (ev) {
            if (!Bridge.staticEquals(ExpressCraft.Settings.OnApplicationClose, null)) {
                ExpressCraft.Settings.OnApplicationClose();
            }
        },
        f15: function (message, url, lineNumber, columnNumber, error) {
            if (ExpressCraft.Form.InErrorDialog) {
                return false;
            }
            try {
                ExpressCraft.Form.InErrorDialog = true;
                var errStr;
                if (System.String.isNullOrWhiteSpace(message) || Bridge.referenceEquals(message, "Script error.")) {
                    errStr = "Script Error: See Browser Console for Detail's";
                } else {
                    errStr = System.String.concat("Script Error: ", message);
                }

                if (ExpressCraft.Application.AplicationDefition === ExpressCraft.ApplicationDefitnion.ExpressCraftConsole) {
                    ExpressCraft.ConsoleForm.Log(errStr, ExpressCraft.ConsoleLogType.Error);
                }

                if (ExpressCraft.Settings.ShowExceptionDialog) {
                    var msgBox = new ExpressCraft.MessageBoxForm.ctor(errStr, ExpressCraft.MessageBoxLayout.Error);
                    msgBox.ShowDialog();
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }
            finally {
                ExpressCraft.Form.InErrorDialog = false;
            }

            return false;
        },
        f16: function (ev) {
            if (Bridge.referenceEquals(ev.target, this.Body)) {
                ev.stopPropagation();
                ev.preventDefault();
            }
        },
        f17: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }
            var mev = ev;

            mev.stopPropagation();
            mev.stopImmediatePropagation();

            if (!this.IsActiveFormCollection()) {
                return;
            }

            ExpressCraft.Form.Mouse_Down = true;

            ExpressCraft.Form.MovingForm = this;
            ExpressCraft.Form.ActiveForm = this;

            ExpressCraft.Form.SetBodyOverLay();

            var clientRec = this.Content.getBoundingClientRect();

            var mousePos = ExpressCraft.Helper.GetClientMouseLocation(ev);

            this.prev_px = clientRec.left - mousePos.Xf;
            this.prev_py = clientRec.top - mousePos.Yf;

            var width = clientRec.width;
            var height = clientRec.height;

            var X = mousePos.Xf - clientRec.left;
            var Y = mousePos.Yf - clientRec.top;

            if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.None;
                this.changeWindowState();
            } else {
                if (this.InDesign) {
                    return;
                }

                if (this.HeadingTitle != null && Bridge.referenceEquals(ev.target, this.HeadingTitle)) {
                    ExpressCraft.Form.SetCursor("default");
                    ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
                } else {
                    if (this.AllowSizeChange) {
                        if (X <= ExpressCraft.Form.ResizeCorners && Y <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nwse-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopLeftResize;
                        } else if (Y <= ExpressCraft.Form.ResizeCorners && X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nesw-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopRightResize;
                        } else if (Y <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("n-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopResize;
                        } else if (X <= ExpressCraft.Form.ResizeCorners && Y >= height - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nesw-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomLeftResize;
                        } else if (Y >= height - ExpressCraft.Form.ResizeCorners && X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nwse-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomRightResize;
                        } else if (Y >= height - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("s-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomResize;
                        } else if (X <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("w-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.LeftResize;
                        } else if (X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("e-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.RightResize;
                        } else {
                            ExpressCraft.Form.SetCursor("default");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
                        }
                    }
                }
            }

            if (!this.AllowMoveChange && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.None;
            }
        },
        f18: function (ev) {
            if (this.AllowSizeChange) {
                this.changeWindowState();
            }

            ev.preventDefault();
            ev.stopPropagation();
        },
        f19: function (ev) {
            if (ExpressCraft.Form.MovingForm == null) {
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f20: function (ev) {
            ExpressCraft.Form.SetCursor("default");
        },
        f21: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            if (Bridge.referenceEquals(ev.target, this.HeadingTitle)) {
                return;
            }
            var mev = ev;

            var width = this.Content.clientWidth;
            var height = this.Content.clientHeight;
            var X = (mev.pageX - this.Content.offsetLeft) | 0;
            var Y = (mev.pageY - this.Content.offsetTop) | 0;

            if (ExpressCraft.Form.MovingForm != null && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                ExpressCraft.Form.SetCursor("default");
                return;
            } else if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.SetCursor("default");
                return;
            }
            if (this.InDesign) {
                return;
            }

            if (this.AllowSizeChange) {
                if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopLeftResize || X <= ExpressCraft.Form.ResizeCorners && Y <= ExpressCraft.Form.ResizeCorners) {
                    ExpressCraft.Form.SetCursor("nwse-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopRightResize || Y <= ExpressCraft.Form.ResizeCorners && X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nesw-resize");
                } else if (Y <= ExpressCraft.Form.ResizeCorners || ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopResize) {
                    ExpressCraft.Form.SetCursor("n-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomLeftResize || X <= ExpressCraft.Form.ResizeCorners && Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nesw-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomRightResize || Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0) && X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nwse-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomResize || Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("s-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.LeftResize || X <= ExpressCraft.Form.ResizeCorners) {
                    ExpressCraft.Form.SetCursor("w-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.RightResize || X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("e-resize");
                } else {
                    ExpressCraft.Form.SetCursor("default");
                }
            } else {
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f22: function (ev) {
            ExpressCraft.Form.SetBodyOverLay();
            if (!this.IsActiveFormCollection()) {
                return;
            }

            if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.MovingForm = this;
                ExpressCraft.Form.SetCursor("default");

                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            } else {
                ExpressCraft.Form.MovingForm = this;
            }

            ExpressCraft.Form.ActiveForm = this;
        },
        f23: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }
            if (!this.IsActiveFormCollection()) {
                return;
            }

            ExpressCraft.Form.ActiveForm = this;
            ExpressCraft.Form.MovingForm = null;
            ev.stopPropagation();
        },
        f24: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            if (ExpressCraft.Form.MovingForm == null) {
                if (!this.IsActiveFormCollection()) {
                    return;
                }
                ev.stopPropagation();
            }
        },
        f25: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }
            if (!this.IsActiveFormCollection()) {
                return;
            }
            this.BodyOverLay.style.visibility = "collapse";
            ExpressCraft.Form.ActiveForm = this;
        },
        f26: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }

            if (ExpressCraft.Form.MovingForm == null) {
                ExpressCraft.Form.SetBodyOverLay();
            }
        },
        f27: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }
            if (ExpressCraft.Form.MovingForm == null && this.IsActiveFormCollection()) {
                ExpressCraft.Form.SetCursor("default");
                this.BodyOverLay.style.visibility = "collapse";
            } else {
                this.BodyOverLay.style.visibility = "visible";
            }
        },
        f28: function () {
            ExpressCraft.Helper.Empty(this.Content);
            if (this.Content != null) {
                ExpressCraft.Helper.Delete(this.Content);
                this.Content = null;
            }
        },
        f29: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }
            ExpressCraft.Form.Mouse_Down = true;

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.ActiveForm = this;
        },
        f30: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            if (this.InDesign) {
                return;
            }

            this.Close();
        },
        f31: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;

            this.changeWindowState();
        },
        f32: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;
        },
        f33: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;

            this.OnMenuClick();
        },
        f34: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }
            ExpressCraft.Form.SetCursor("default");
        },
        f35: function (ev) {
            ev.stopPropagation();
        },
        f36: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopImmediatePropagation();
            ev.preventDefault();
        },
        f37: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ExpressCraft.Form.Mouse_Down = true;

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.ActiveForm = this;
        },
        f38: function () {
            this.Content.focus();
            this.Content.click();
        }
    });

    Bridge.define("ExpressCraft.CalculatorControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            DisplayInput: null,
            btnClose: null,
            btnBack: null,
            btnCE: null,
            btnC: null,
            btnPTAX: null,
            btnMTAX: null,
            btnTAX: null,
            btnDbl: null,
            btn7: null,
            btn8: null,
            btn9: null,
            btnDiv: null,
            btnSqrt: null,
            btn4: null,
            btn5: null,
            btn6: null,
            btnMul: null,
            btnPer: null,
            btn1: null,
            btn2: null,
            btn3: null,
            btnMinus: null,
            btn1OverX: null,
            btn0: null,
            btnplusOrNeg: null,
            btnDot: null,
            btnPlus: null,
            btnEq: null,
            Value: System.Decimal(0.0),
            _commands: null,
            current_command: null,
            OnEqual: null,
            OnClose: null,
            DontRefresh: false
        },
        ctors: {
            init: function () {
                this._commands = new (System.Collections.Generic.List$1(System.String))();
                this.current_command = "";
                this.DontRefresh = false;
            },
            ctor: function (startingValue, CloseButtonVisible) {
                if (CloseButtonVisible === void 0) { CloseButtonVisible = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                var $t;
                this.Value = startingValue;

                this.current_command = this.Value.toString();

                var doc = document.createDocumentFragment();

                var AddHeight = (ExpressCraft.Helper.NotDesktop ? 45 : 22);

                //27.77778

                doc.appendChild(((this.DisplayInput = ($t = new ExpressCraft.MemoInput(), $t.Readonly = true, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 4, "(100% - 8px)", AddHeight), $t))).Content);

                if (ExpressCraft.Helper.NotDesktop) {
                    this.DisplayInput.Style.fontSize = "14px";
                    this.DisplayInput.Height = 45;
                }

                var buttons = new (System.Collections.Generic.List$1(ExpressCraft.SimpleButton))();

                buttons.addRange(System.Array.init([(this.btnPTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn7 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "7", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn8 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "8", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn9 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "9", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnDiv = ($t = new ExpressCraft.SimpleButton(), $t.Text = "/", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnSqrt = ($t = new ExpressCraft.SimpleButton(), $t.Text = "sqrt", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnMTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "-TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn4 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "4", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn5 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "5", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn6 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "6", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnMul = ($t = new ExpressCraft.SimpleButton(), $t.Text = "*", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnPer = ($t = new ExpressCraft.SimpleButton(), $t.Text = "%", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn1 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "1", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn2 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "2", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn3 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "3", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnMinus = ($t = new ExpressCraft.SimpleButton(), $t.Text = "-", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn1OverX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "1/x", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnDbl = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Dbl", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn0 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "0", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnplusOrNeg = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+/-", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnDot = ($t = new ExpressCraft.SimpleButton(), $t.Text = ".", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnPlus = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnEq = ($t = new ExpressCraft.SimpleButton(), $t.Text = "=", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t))], ExpressCraft.SimpleButton));
                var index = 0;
                var y = 0;
                var yOffset = (28 + AddHeight) | 0;
                this.btnClose = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Size = new ExpressCraft.Vector2.$ctor1("((100% - 28px) * 0.1666666666666667)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((100% - 28px) * " + (System.Decimal("0.8333333333333335")) + ") + " + (24) + "px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f1), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnClose.Style.fontSize = "26px";
                    this.btnClose.Style.fontWeight = "bold";
                }
                this.btnBack = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Back", $t.Size = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 0) + 4px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.cacheBind(this, this.Back), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnBack.Style.fontSize = "14px";
                }
                this.btnCE = ($t = new ExpressCraft.SimpleButton(), $t.Text = "CE", $t.Size = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 1) + 8px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f2), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnCE.Style.fontSize = "14px";
                }
                this.btnC = ($t = new ExpressCraft.SimpleButton(), $t.Text = "C", $t.Size = new ExpressCraft.Vector2.$ctor1("((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) + 4px)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 2) + 12px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f3), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnC.Style.fontSize = "14px";
                }

                ExpressCraft.Helper.AppendChildren$1(doc, [this.btnClose.Content, this.btnBack.Content, this.btnCE.Content, this.btnC.Content]);

                y = (y + 1) | 0;

                for (var i = 0; i < buttons.Count; i = (i + 1) | 0) {
                    buttons.getItem(i).Size = new ExpressCraft.Vector2.$ctor1("((100% - 28px) * 0.1666666666666667)", "((100% - " + yOffset + "px) * 0.2)");
                    buttons.getItem(i).Location = new ExpressCraft.Vector2.$ctor1("(((100% - 28px) * " + (System.Decimal(index).mul(System.Decimal("0.1666666666666667"))) + ") + " + ((((Bridge.Int.mul(index, 4)) + 4) | 0)) + "px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)");
                    if (ExpressCraft.Helper.NotDesktop) {
                        buttons.getItem(i).Style.fontSize = "14px";
                    }

                    doc.appendChild(buttons.getItem(i).Content);
                    index = (index + 1) | 0;
                    if (index === 6) {
                        index = 0;
                        y = (y + 1) | 0;
                    }
                }

                this.btnDbl.Style.fontSize = "6.5pt";
                this.btnTAX.Style.fontSize = "6.5pt";
                this.btnPTAX.Style.fontSize = "6.5pt";
                this.btnMTAX.Style.fontSize = "6.5pt";

                this.btnClose.Style.color = "red";
                this.btnClose.Style.fontWeight = "bold";

                if (!CloseButtonVisible) {
                    this.btnClose.Style.visibility = "hidden";
                }

                this.RefreshValue();

                this.Content.appendChild(doc);
        }
    },
    methods: {
        AddTextToCommand: function (button) {
            if (Bridge.referenceEquals(button.Text, ".") && System.String.contains(this.current_command,".")) {
                return;
            }

            if (Bridge.referenceEquals(this.current_command, "0")) {
                this.current_command = "";
            }

            this.current_command = System.String.concat(this.current_command, button.Text);

            this.RefreshValue();
        },
        CalculateAndClose: function () {
            var x = this.Calculate();

            if (!Bridge.staticEquals(this.OnEqual, null)) {
                this.OnEqual(x);
            }
            if (!this.DontRefresh) {
                if (!Bridge.staticEquals(this.OnClose, null)) {
                    this.OnClose();
                }
            }
        },
        Calculate: function () {
            var previousValue = System.Decimal(0);

            var previousOp = "";
            var length = this._commands.Count;

            for (var i = 0; i < length; i = (i + 1) | 0) {
                var command = this._commands.getItem(i);

                if (System.String.endsWith(command, "%")) {
                    command = command.substr(0, ((command.length - 1) | 0));
                }

                var tryDec = { };
                if (System.Decimal.tryParse(command, null, tryDec)) {
                    if (!Bridge.referenceEquals(previousOp, "")) {
                        if (System.String.endsWith(this._commands.getItem(i), "%")) {
                            try {
                                tryDec.v = previousValue.mul((tryDec.v.div(System.Decimal(100))));
                            }
                            catch ($e1) {
                                $e1 = System.Exception.create($e1);
                                tryDec.v = System.Decimal(0);
                            }
                        }

                        if (Bridge.referenceEquals(previousOp, "+")) {
                            previousValue = previousValue.add(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "-")) {
                            previousValue = previousValue.sub(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "/")) {
                            try {
                                previousValue = previousValue.div(tryDec.v);
                            }
                            catch ($e2) {
                                $e2 = System.Exception.create($e2);
                                previousValue = System.Decimal(0);
                            }
                        } else if (Bridge.referenceEquals(previousOp, "*")) {
                            previousValue = previousValue.mul(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "*")) {
                            previousValue = previousValue.mul(tryDec.v);
                        }

                        previousOp = "";
                    } else {
                        previousValue = tryDec.v;
                    }
                } else {
                    previousOp = command;
                    if (Bridge.referenceEquals(previousOp, "+TAX")) {
                        previousValue = ExpressCraft.Helper.AddTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "-TAX")) {
                        previousValue = ExpressCraft.Helper.DeductTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "TAX")) {
                        previousValue = ExpressCraft.Helper.GetPortionTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "Dbl")) {
                        previousValue = previousValue.mul(System.Decimal(2));
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "sqrt")) {
                        try {
                            previousValue = System.Decimal(Math.sqrt(System.Decimal.toFloat(previousValue)), null, System.Double);
                        }
                        catch ($e3) {
                            $e3 = System.Exception.create($e3);
                            previousValue = System.Decimal(0);
                        }
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "1/x")) {
                        try {
                            previousValue = System.Decimal(1.0).div(previousValue);
                        }
                        catch ($e4) {
                            $e4 = System.Exception.create($e4);
                            previousValue = System.Decimal(0);
                        }

                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "+/-")) {
                        previousValue = previousValue.neg();
                        previousOp = "";
                    }
                }
            }

            return previousValue;
        },
        RefreshValue: function () {
            if (this.DontRefresh) {
                return;
            }
            var builder = new System.Text.StringBuilder();

            var length = this._commands.Count;

            for (var i = 0; i < length; i = (i + 1) | 0) {
                builder.append(System.String.concat(this._commands.getItem(i), " "));
            }
            builder.append(this.current_command);
            this.DisplayInput.Text = "";
            this.DisplayInput.Text = builder.toString();
        },
        IsAllNumbers: function (value) {
            var x = { };
            return System.Decimal.tryParse(value, null, x);
        },
        Back: function (button) {
            if (!Bridge.referenceEquals(this.current_command, "")) {
                this.current_command = this.current_command.substr(0, ((this.current_command.length - 1) | 0));
            } else {
                if (this._commands.Count > 0) {
                    var x = System.Linq.Enumerable.from(this._commands).last();
                    if (this.IsAllNumbers(x)) {
                        this.current_command = x;
                        this.current_command = this.current_command.substr(0, ((this.current_command.length - 1) | 0));
                    } else {
                        this.current_command = "";
                    }
                    this._commands.removeAt(((this._commands.Count - 1) | 0));
                }
            }
            this.RefreshValue();
        },
        IsSingleOperator: function (x) {
            return (System.String.contains(x,"TAX") || Bridge.referenceEquals(x, "Dbl") || Bridge.referenceEquals(x, "1/x") || Bridge.referenceEquals(x, "+/-") || Bridge.referenceEquals(x, "sqrt"));
        },
        AddOperator: function (button) {
            if (this.IsSingleOperator(button.Text)) {
                if (this._commands.Count > 0) {
                    var x = System.Linq.Enumerable.from(this._commands).last();
                    if (!this.IsSingleOperator(x)) {
                        if (Bridge.referenceEquals(this.current_command, "") && !this.IsAllNumbers(x)) {
                            return;
                        }
                    }
                }

                if (!Bridge.referenceEquals(this.current_command, "")) {
                    this._commands.add(this.current_command);
                    this.current_command = "";
                }

                this._commands.add(button.Text);

                this.RefreshValue();
            } else {
                if (Bridge.referenceEquals(this.current_command, "")) {
                    if (Bridge.referenceEquals(button.Text, "=")) {
                        this.CalculateAndClose();
                        return;
                    } else {
                        if (this._commands.Count > 0) {
                            var x1 = System.Linq.Enumerable.from(this._commands).last();
                            if (!this.IsSingleOperator(x1)) {
                                return;
                            }
                        } else {
                            return;
                        }
                    }
                }

                if (Bridge.referenceEquals(button.Text, "%")) {
                    if (this._commands.Count > 0) {
                        var x2 = System.Linq.Enumerable.from(this._commands).last();

                        if (!this.IsSingleOperator(x2)) {
                            this.current_command = System.String.concat(this.current_command, "%");
                            this._commands.add(this.current_command);
                            this.current_command = "";
                        } else {
                            return;
                        }
                    }
                } else {
                    this._commands.add(this.current_command);
                    this.current_command = "";

                    if (Bridge.referenceEquals(button.Text, "=")) {
                        this.CalculateAndClose();
                    } else {
                        this._commands.add(button.Text);
                    }
                }
                this.RefreshValue();
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.CalculatorControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.CalculatorControl, {
        f1: function (ev) {
            if (!Bridge.staticEquals(this.OnClose, null)) {
                this.OnClose();
            }
        },
        f2: function (ev) {
            this.current_command = "";
            this.RefreshValue();
        },
        f3: function (ev) {
            this._commands = new (System.Collections.Generic.List$1(System.String))();
            this.current_command = "";
            this.RefreshValue();
        }
    });

    Bridge.define("ExpressCraft.CheckEdit", {
        inherits: [ExpressCraft.Control],
        statics: {
            methods: {
                op_Implicit: function (checkEdit) {
                    return checkEdit.Edit;
                }
            }
        },
        fields: {
            Edit: null,
            span: null
        },
        props: {
            Checked: {
                get: function () {
                    return ExpressCraft.Helper.IsTrue(this.Edit.Text) === 1;
                },
                set: function (value) {
                    this.Edit.Text = System.Boolean.toString(value);
                }
            },
            Text: {
                get: function () {
                    return this.span.innerHTML;
                },
                set: function (value) {
                    this.span.innerHTML = value;
                }
            }
        },
        ctors: {
            ctor: function (label) {
                if (label === void 0) { label = ""; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this, ($t = document.createElement("label"), $t.className = ExpressCraft.Control.BaseClass(false, true), $t));
                var $t;
                this.Edit = new ExpressCraft.TextInput.$ctor1("checkbox");
                this.Edit.Controller = this;
                this.span = document.createElement("span");

                this.Text = label;

                ExpressCraft.Helper.AppendChildren$1(this.Content, [ExpressCraft.Control.op_Implicit(this.Edit), this.span]);
        }
    }
    });

    Bridge.define("ExpressCraft.TextInput", {
        inherits: [ExpressCraft.Control],
        statics: {
            methods: {
                FixInput: function (type) {
                    if (type === "date" || (ExpressCraft.Helper.IsFireFox() && type !== "password" && type !== "checkbox")) {
                        return "text";
                    } else {
                        return type;
                    }
                }
            }
        },
        fields: {
            prevText: null,
            OnTextChanged: null,
            OnKeyDown: null,
            OnKeyUp: null,
            OnKeyPress: null,
            OnGotFocus: null,
            OnLostFocus: null,
            OnValidateData: null,
            _displayFormat: null,
            Controller: null,
            Type: "button",
            DisableFocusPopup: false,
            IsOverride: false,
            PreZIndex: null,
            enabled: false,
            _readonly: false
        },
        props: {
            IsSubmit: false,
            GoNext: false,
            OnFocusDontSelectAll: false,
            DisplayFormat: {
                get: function () {
                    return this._displayFormat;
                },
                set: function (value) {
                    this.SetDisplayFormat(value);
                }
            },
            Text: {
                get: function () {
                    if (this.IsOverride) {
                        return this.GetValue();
                    } else {
                        if (this.Type === "checkbox") {
                            return System.Boolean.toString(this.Content.checked);
                        } else {
                            return this.Content.value;
                        }
                    }
                },
                set: function (value) {
                    if (this.IsOverride) {
                        this.SetValue(value);
                    } else {
                        if (this.Type === "checkbox") {
                            value = value.toLowerCase();
                            this.Content.checked = ExpressCraft.Helper.IsTrue(value) === 1;
                        } else {
                            this.Content.value = value;
                            this.formatText();
                        }
                    }

                    this.CheckTextChanged();
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    if (this.enabled) {
                        this.Content.removeAttribute("disabled");
                    } else {
                        this.Content.setAttribute("disabled", null);
                    }
                }
            },
            Readonly: {
                get: function () {
                    return this._readonly;
                },
                set: function (value) {
                    this._readonly = value;
                    if (this._readonly) {
                        this.Content.setAttribute("readonly", System.Boolean.toString((this._readonly)));
                    } else {
                        this.Content.removeAttribute("readonly");
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.prevText = "";
                this._displayFormat = "";
                this.IsOverride = false;
                this.enabled = true;
                this._readonly = false;
            },
            ctor: function (overrideElement, addInputControl, addEventsOnControl) {
                if (addInputControl === void 0) { addInputControl = true; }
                if (addEventsOnControl === void 0) { addEventsOnControl = true; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this, overrideElement);
                overrideElement.className = System.String.concat((addInputControl ? "inputcontrol" : ""), ExpressCraft.Control.BaseClass(addInputControl));
                this.IsOverride = true;
                if (addEventsOnControl) {
                    this.addEvents();
                }
            },
            $ctor1: function (type, ac) {
                if (type === void 0) { type = 19; }
                if (ac === void 0) { ac = true; }

                this.$initialize();
                ExpressCraft.Control.$ctor3.call(this, "inputcontrol", ExpressCraft.TextInput.FixInput(type), ac);
                this.Type = type;

                if (this.Type === "number") {
                    this.Content.style.textAlign = "right";
                    this.Content.style.textIndent = "3px";
                    this.Content.style.paddingRight = "3px";

                    this.DisplayFormat = "n2";
                } else if (this.Type === "date") {
                    var str = System.Array.init(3, null, System.String);
                    str[System.Array.index(ExpressCraft.Settings.DayPosition, str)] = "dd";
                    str[System.Array.index(ExpressCraft.Settings.MonthPosition, str)] = "MM";
                    str[System.Array.index(ExpressCraft.Settings.YearPosition, str)] = "yyyy";
                    var builder = new System.Text.StringBuilder();

                    for (var i = 0; i < 3; i = (i + 1) | 0) {
                        builder.append(System.String.concat(str[System.Array.index(i, str)], String.fromCharCode(ExpressCraft.Settings.DateSeperator)));
                    }
                    builder.setLength((builder.getLength() - 1) | 0);
                    this.DisplayFormat = builder.toString();
                }

                this.addEvents();

                this.formatText();
            }
        },
        methods: {
            ValidateData: function () {
                if (Bridge.is(this, ExpressCraft.TextInputDropDown)) {
                    var c = this;
                    if (c.UsedEdit != null && !Bridge.staticEquals(c.OnValidateData, null)) {
                        c.OnValidateData(c.UsedEdit);
                    }
                }
                if (!Bridge.staticEquals(this.OnValidateData, null)) {
                    this.OnValidateData(this);
                }
            },
            SetDisplayFormat: function (value) {
                this._displayFormat = value;
                this.formatText();
            },
            GetDisplayFormat: function () {
                return this._displayFormat;
            },
            GetValue: function () {
                return this.Content.innerHTML;
            },
            SetValue: function (value) {
                this.Content.innerHTML = value;
            },
            SetDateTime: function (date) {
                this.SetDate(System.String.format(System.String.concat("{0:", this.GetDisplayFormat(), "}"), Bridge.box(date, System.DateTime, System.DateTime.format)));
            },
            OnFocus: function () { },
            GetInput: function () {
                if (Bridge.is(this.Content, HTMLInputElement)) {
                    return this.Content;
                } else {
                    return this.Content;
                }
            },
            GetNumberValue: function () {
                var value = ExpressCraft.Helper.StripNonNumberString(this.Text);
                return value;
            },
            GetEditValue: function () {
                if (Bridge.is(this, ExpressCraft.SearchInput)) {
                    var value = Bridge.cast(this, ExpressCraft.SearchInput).EditValue;
                    if (value == null) {
                        return Bridge.box(0, System.Int32);
                    }
                    return value;
                } else {
                    if (this.Type === "number") {
                        var value1 = ExpressCraft.Helper.StripNonNumberString(this.Text);
                        return value1;
                    } else if (this.Type === "date") {
                        var date = this.GetDateTime();
                        return Bridge.box(date, System.DateTime, System.DateTime.format);
                    } else {
                        return this.Text;
                    }
                }
            },
            Scroll: function (value, parent) {
                if (parent == null) {
                    return;
                }
                parent.scrollTop = value;
                //Global.SetTimeout(() =>
                //{
                //    if(this.Content.ParentElement == null || this.Content.ParentElement.ParentElement == null)
                //        return;
                //    this.Content.ParentElement.ParentElement.ScrollTop = value;
                //}, 0);
            },
            GetDisplayValue: function () {
                if (System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                    return this.Text;
                } else {
                    if (this.Type === "number") {
                        var value = ExpressCraft.Helper.StripNonNumberString(this.Text);
                        if (System.String.startsWith(this.DisplayFormat.toLowerCase(), "c")) {
                            var wasNeg = false;
                            if (value.lt(System.Decimal(0))) {
                                wasNeg = true;
                                value = value.neg();
                            }

                            return System.String.concat((wasNeg ? "-" : ""), System.String.format(System.String.concat("${0:", System.String.replaceAll(System.String.replaceAll(this.DisplayFormat, "c", "n"), "C", "N"), "}"), value));
                        } else if (System.String.startsWith(this.DisplayFormat.toLowerCase(), "p")) {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), value.equalsT(System.Decimal(0)) ? System.Decimal(0) : value.div(System.Decimal(100.0)));
                        } else {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), value);
                        }
                    } else if (this.Type === "date") {
                        var value1 = ExpressCraft.Helper.StripNonDateString(this.Text);
                        if (Bridge.equals(value1, System.DateTime.getMinValue())) {
                            return "";
                        } else {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(value1, System.DateTime, System.DateTime.format));
                        }
                    } else {
                        return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), this.Text);
                    }
                }
            },
            formatText: function () {
                var input = this.GetInput();
                if (input != null && !Bridge.referenceEquals(input, document.activeElement)) {
                    if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                        input.type = "text";
                        var newText = this.GetDisplayValue();

                        if (!Bridge.referenceEquals(newText, this.Text)) {
                            this.Text = newText;
                        }
                    }
                }
            },
            addEvents: function () {
                if (!this.IsOverride) {
                    var input = this.GetInput();
                    if (input != null) {
                        if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                            if (this.Type === "password") {
                                return;
                            }
                            input.type = "text";
                        }
                    }
                }

                this.Content.onblur = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f1);
                this.Content.onfocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f2);
                this.Content.onchange = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f3);
                this.Content.oncontextmenu = $asm.$.ExpressCraft.TextInput.f4;
                this.Content.onkeypress = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f5);
                this.Content.onkeydown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f6);
                this.Content.onkeyup = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f7);
                this.Content.addEventListener("paste", Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f8));
                this.Content.addEventListener("cut", Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f8));
            },
            CheckTextChanged: function () {
                if (!Bridge.referenceEquals(this.Text, this.prevText)) {
                    if (!Bridge.staticEquals(this.OnTextChanged, null)) {
                        this.OnTextChanged(this);
                    }
                    this.prevText = this.Text;
                }
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
                this.prevText = this.Text;
            },
            SetDate: function (date) {
                if (!System.String.isNullOrWhiteSpace(date)) {
                    var dd = ExpressCraft.Helper.StripNonDateString(date);
                    if (Bridge.equals(dd, System.DateTime.getMinValue())) {
                        this.Text = "";
                    } else {
                        this.Text = System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(dd, System.DateTime, System.DateTime.format));
                    }
                } else {
                    this.Text = "";
                }
            },
            GetDate: function () {
                if (!System.String.isNullOrWhiteSpace(this.Text)) {
                    var dd = ExpressCraft.Helper.StripNonDateString(this.Text);
                    if (Bridge.equals(dd, System.DateTime.getMinValue())) {
                        return "";
                    } else {
                        return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(dd, System.DateTime, System.DateTime.format));
                    }
                } else {
                    return "";
                }
            },
            GetDateTime: function () {
                return ExpressCraft.Helper.StripNonDateString(this.Text);
            },
            IsNumericType: function () {
                return this.Type === "number";
            },
            IsDateType: function () {
                return this.Type === "date";
            }
        }
    });

    Bridge.ns("ExpressCraft.TextInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextInput, {
        f1: function (ev) {
            this.Content.style.zIndex = this.PreZIndex;

            this.formatText();

            if (!Bridge.staticEquals(this.OnLostFocus, null)) {
                this.OnLostFocus(this);
            }
        },
        f2: function (ev) {
            this.PreZIndex = this.Content.style.zIndex;
            this.Content.style.zIndex = "10000";

            this.OnFocus();
            var input1 = this.GetInput();
            if (input1 != null) {
                if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                    if (this.Type === "number") {
                        try {
                            this.Text = ExpressCraft.Helper.StripNonNumberString(this.Text).toString();
                        }
                        catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            this.Text = "0.00";
                        }
                    }

                    if (!ExpressCraft.Helper.IsFireFox() && !this.Readonly && this.Type !== "date") {
                        input1.type = this.Type;
                    }
                }
                if (this.Type !== "checkbox" && ExpressCraft.Settings.OnFocusSelectAll && !this.OnFocusDontSelectAll) {
                    input1.select();
                }
            }

            if (!Bridge.staticEquals(this.OnGotFocus, null)) {
                this.OnGotFocus(this);
            }

            if (!this.DisableFocusPopup && !this.Readonly && this.Enabled && ExpressCraft.Helper.NotDesktop && !(Bridge.is(this, ExpressCraft.TextInputDropDown)) && this.Controller == null) {
                if (!ExpressCraft.Settings.DisableTextPopupEditor) {
                    new ExpressCraft.TextForm(this).ShowPopup(new ExpressCraft.Vector2.$ctor1(0, 0));
                }
            }
        },
        f3: function (ev) {
            this.CheckTextChanged();
        },
        f4: function (ev) {
            ev.stopPropagation();
        },
        f5: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyPress, null)) {
                this.OnKeyPress(this, ev);
            }
        },
        f6: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyDown, null)) {
                this.OnKeyDown(this, ev);
            }
        },
        f7: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyUp, null)) {
                this.OnKeyUp(this, ev);
            }
        },
        f8: function () {
            this.CheckTextChanged();
        }
    });

    Bridge.define("ExpressCraft.ComboBoxEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            ComboBoxBase: null,
            previousSelectedIndex: 0,
            SelectedIndexChanged: null,
            enabled: false,
            _readonly: false
        },
        props: {
            Text: {
                get: function () {
                    if (this.ComboBoxBase.selectedIndex === -1) {
                        return "";
                    }
                    return this.ComboBoxBase.options[this.ComboBoxBase.selectedIndex].innerHTML;
                },
                set: function (value) {
                    for (var i = 0; i < this.ComboBoxBase.options.length; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(this.ComboBoxBase.options[i].innerHTML, value)) {
                            this.ComboBoxBase.selectedIndex = i;
                        }
                    }
                    this.ComboBoxBase.selectedIndex = -1;
                }
            },
            Value: {
                get: function () {
                    if (this.ComboBoxBase.selectedIndex === -1) {
                        return "";
                    }
                    return this.ComboBoxBase.options[this.ComboBoxBase.selectedIndex].value;
                },
                set: function (value) {
                    for (var i = 0; i < this.ComboBoxBase.options.length; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(this.ComboBoxBase.options[i].value, value)) {
                            this.ComboBoxBase.selectedIndex = i;
                        }
                    }
                    this.ComboBoxBase.selectedIndex = -1;
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.Content.setAttribute("disabled", System.Boolean.toString((!this.enabled)));
                }
            },
            Readonly: {
                get: function () {
                    return this._readonly;
                },
                set: function (value) {
                    this._readonly = value;
                    this.Content.setAttribute("readonly", System.Boolean.toString((this._readonly)));
                }
            }
        },
        ctors: {
            init: function () {
                this.previousSelectedIndex = -1;
                this.enabled = true;
                this._readonly = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor4.call(this, "inputcontrol", ExpressCraft.ComboBoxTypes.Default);
                this.ComboBoxBase = Bridge.as(this.Content, HTMLSelectElement);

                this.Content.oncontextmenu = $asm.$.ExpressCraft.ComboBoxEdit.f1;

                this.ComboBoxBase.onchange = Bridge.fn.bind(this, $asm.$.ExpressCraft.ComboBoxEdit.f2);
            }
        },
        methods: {
            FillData: function (dataitems) {
                var $t;
                if (dataitems === void 0) { dataitems = []; }
                $(this.ComboBoxBase).empty();

                if (dataitems == null) {
                    for (var i = 0; i < dataitems.length; i = (i + 1) | 0) {
                        this.ComboBoxBase.appendChild(($t = document.createElement("option"), $t.innerHTML = dataitems[System.Array.index(i, dataitems)].Text, $t.value = dataitems[System.Array.index(i, dataitems)].Value, $t));
                    }
                }
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
            }
        }
    });

    Bridge.ns("ExpressCraft.ComboBoxEdit", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ComboBoxEdit, {
        f1: function (ev) {
            ev.stopPropagation();
        },
        f2: function (ev) {
            if (this.previousSelectedIndex !== this.ComboBoxBase.selectedIndex) {
                if (!Bridge.staticEquals(this.SelectedIndexChanged, null)) {
                    this.SelectedIndexChanged(this);
                }

                this.previousSelectedIndex = this.ComboBoxBase.selectedIndex;
            }
            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.ContextMenu", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                TotalContextHandles: 0,
                MainContextMenu: null
            },
            ctors: {
                init: function () {
                    this.TotalContextHandles = 0;
                }
            }
        },
        fields: {
            /**
             * For internal use only - so if we click on document - we can close all context menus ---
             *
             * @instance
             * @protected
             * @memberof ExpressCraft.ContextMenu
             * @type ExpressCraft.ContextMenu
             */
            SubContextOpened: null,
            ContextItems: null,
            Visible: false
        },
        ctors: {
            init: function () {
                this.ContextItems = new (System.Collections.Generic.List$1(ExpressCraft.ContextItem))();
                this.Visible = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "contextmenu");
                this.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.ContextMenu.f1);
            }
        },
        methods: {
            RenderContextMenu: function () {
                // What we need to do first is get the maxed size text...
                var x = 0;
                var ii = -1;

                ExpressCraft.Helper.Empty(this.Content);

                for (var i = 0; i < this.ContextItems.Count; i = (i + 1) | 0) {
                    var y = this.ContextItems.getItem(i).Caption.length;
                    if (y > x) {
                        x = y;
                        ii = i;
                    }
                }

                if (ii === -1) {
                    return;
                }
                var calwidth = Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.ContextItems.getItem(ii).Caption, ExpressCraft.Settings.DefaultFont));
                if (calwidth < ExpressCraft.Settings.ContextMenuMinWidth) {
                    calwidth = ExpressCraft.Settings.ContextMenuMinWidth;
                }
                var width = (((((((calwidth + 34) | 0) + 8) | 0) + 2) | 0));

                var top = 1;

                for (var i1 = 0; i1 < this.ContextItems.Count; i1 = (i1 + 1) | 0) {
                    var contextItem = { v : this.ContextItems.getItem(i1) };
                    var y1 = contextItem.v.Caption.length;
                    var item = ExpressCraft.Control.Label$1(contextItem.v.Caption, 1, top, ((width - 2) | 0), false, false, "contextitem");

                    item.onclick = (function ($me, contextItem) {
                        return Bridge.fn.bind($me, function (ev) {
                            if (contextItem.v.Enabled) {
                                if (!Bridge.staticEquals(contextItem.v.OnItemClick, null)) {
                                    contextItem.v.OnItemClick(contextItem.v);
                                }
                                this.Close();
                            }
                        });
                    })(this, contextItem);

                    this.Content.appendChild(item);

                    top = (top + 24) | 0;

                    if (this.ContextItems.getItem(i1).BeginGroup && i1 !== this.ContextItems.Count) {
                        top = (top + 1) | 0;
                        var sep = ExpressCraft.Control.Div$1("contextitemseperator");

                        sep.style.top = ExpressCraft.Helper.ToPx(Bridge.box(top, System.Int32));
                        sep.style.width = ExpressCraft.Helper.ToPx(Bridge.box(calwidth, System.Int32));

                        this.Content.appendChild(sep);

                        top = (top + 2) | 0;
                    }
                }

                top = (top + 1) | 0;

                ExpressCraft.Helper.SetSize$1(this.Content, width, top);
            },
            Show: function (Location) {
                if (ExpressCraft.ContextMenu.MainContextMenu != null) {
                    ExpressCraft.ContextMenu.MainContextMenu.Close();
                    ExpressCraft.ContextMenu.MainContextMenu = null;
                }
                ExpressCraft.ContextMenu.MainContextMenu = this;

                if (this.Visible) {
                    this.Close();
                }
                if (!this.Visible) {
                    ExpressCraft.Helper.SetLocation(this.Content, ((Location.Xi - 5) | 0), ((Location.Yi - 5) | 0));
                    this.RenderContextMenu();

                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
                    this.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
                    document.body.appendChild(ExpressCraft.Control.op_Implicit(this));
                    this.Visible = true;
                }
            },
            Close: function () {
                if (this.Visible) {
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                    document.body.removeChild(ExpressCraft.Control.op_Implicit(this));
                    this.Visible = false;
                }

                if (this.SubContextOpened != null) {
                    this.SubContextOpened.Close();
                    this.SubContextOpened = null;
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ContextMenu", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ContextMenu, {
        f1: function (ev) {
            this.Close();
        }
    });

    Bridge.define("ExpressCraft.DataColumnBool", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Boolean)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Bool;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnByte", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Byte)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Byte;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDateTime", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.DateTime)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.DateTime;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDecimal", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Decimal)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Decimal;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDouble", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Double)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Double;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnFloat", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Single)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Float;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnInteger", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int32)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Integer;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnLong", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int64)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Long;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnObject", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Object))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Object;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnShort", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int16)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Short;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnString", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.String))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.String;
            }
        }
    });

    Bridge.define("ExpressCraft.DateControl", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                Days: null
            },
            ctors: {
                init: function () {
                    this.Days = System.Array.init(["MO", "TU", "WE", "TH", "FR", "SA", "SU"], System.String);
                }
            }
        },
        fields: {
            btnTop: null,
            btnSelectedRange: null,
            btnToday: null,
            btnLeft: null,
            btnRight: null,
            ContentRange: null,
            SelectedYear: 0,
            SelectedMonth: 0,
            SelectedDay: 0,
            _activeDisplayMode: 0,
            OnDateChanged: null,
            OnRequestToClose: null
        },
        props: {
            ActiveDisplayMode: {
                get: function () {
                    return this._activeDisplayMode;
                },
                set: function (value) {
                    if (this._activeDisplayMode !== value) {
                        this._activeDisplayMode = value;
                        this.RefreshView();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._activeDisplayMode = ExpressCraft.DateControl.DisplayMode.Day;
            },
            ctor: function (startDate) {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                var $t;
                this.Size = new ExpressCraft.Vector2.$ctor1(230, 245);

                var doc = document.createDocumentFragment();

                this.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnTop = new ExpressCraft.SimpleButton();
                this.btnTop.Style.transform = "translate(-50%, 0)";
                this.btnTop.Style.left = "50%";
                this.btnTop.Style.marginRight = "50%";
                this.btnTop.Top = 6;
                this.btnTop.Width = "auto";
                this.btnTop.Style.borderColor = "transparent";
                this.btnTop.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnSelectedRange = ($t = new ExpressCraft.SimpleButton(), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f1), $t);

                this.btnSelectedRange.Style.transform = "translate(-50%, 0)";
                this.btnSelectedRange.Style.left = "50%";
                this.btnSelectedRange.Style.marginRight = "50%";
                this.btnSelectedRange.Top = 30;
                this.btnSelectedRange.Width = "auto";
                this.btnSelectedRange.Style.borderColor = "transparent";
                this.btnSelectedRange.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnLeft = ($t = new ExpressCraft.SimpleButton(), $t.Text = "<", $t.Location = new ExpressCraft.Vector2.$ctor1(14, 36), $t.Size = new ExpressCraft.Vector2.$ctor1(13, 13), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f2), $t);
                this.btnLeft.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnRight = ($t = new ExpressCraft.SimpleButton(), $t.Text = ">", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 26px)", 36), $t.Size = new ExpressCraft.Vector2.$ctor1(13, 13), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f3), $t);
                this.btnRight.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnLeft.Style.borderRadius = "50%";
                this.btnRight.Style.borderRadius = "50%";

                this.btnLeft.Style.lineHeight = "0";
                this.btnRight.Style.lineHeight = "0";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnSelectedRange.Style.fontSize = "14px";
                    this.btnSelectedRange.Height = 36;
                    this.btnSelectedRange.Top = 42;

                    this.btnTop.Style.fontSize = "14px";
                    this.btnTop.Height = 36;

                    this.btnLeft.Size = new ExpressCraft.Vector2.$ctor1(36, 36);
                    this.btnLeft.Style.fontSize = "14px";
                    this.btnLeft.Top = 20;

                    this.btnRight.Size = new ExpressCraft.Vector2.$ctor1(36, 36);
                    this.btnRight.Style.fontSize = "14px";
                    this.btnRight.Top = 20;
                    this.btnRight.Left = "(100% - 50px)";

                    this.ContentRange = ($t = new ExpressCraft.Control.$ctor1(), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - 20px)", "(100% - 147px)"), $t.Location = new ExpressCraft.Vector2.$ctor1(11, 90), $t);
                } else {
                    this.ContentRange = ($t = new ExpressCraft.Control.$ctor1(), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - 20px)", "(100% - 92px)"), $t.Location = new ExpressCraft.Vector2.$ctor1(11, 60), $t);
                }

                this.ContentRange.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnToday = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Today", $t.Width = 50, $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f4), $t);

                this.btnToday.Style.transform = "translate(-50%, 0)";
                this.btnToday.Style.left = "50%";
                this.btnToday.Style.marginRight = "50%";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnToday.Top = "(100% - 51px)";
                    this.btnToday.Style.fontSize = "14px";
                    this.btnToday.Height = 45;
                    this.btnToday.Style.minWidth = "60px";
                    this.btnToday.Width = "(100% * 0.1428)";
                } else {
                    this.btnToday.Top = "(100% - 26px)";
                }

                this.btnToday.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                ExpressCraft.Helper.AppendChildren$2(doc, [this.btnTop, this.btnLeft, this.btnSelectedRange, this.btnRight, this.ContentRange, this.btnToday]);
                if (Bridge.equals(startDate, System.DateTime.getMinValue())) {
                    startDate = System.DateTime.getToday();
                }

                this.Content.appendChild(doc);

                this.SetViewDateTime(startDate);
        }
    },
    methods: {
        GetViewDateTime: function () {
            return System.DateTime.create(this.SelectedYear, this.SelectedMonth, this.SelectedDay);
        },
        SetViewDateTime: function (date) {
            var newSelectedYear = System.DateTime.getYear(date);
            var newSelectedMonth = System.DateTime.getMonth(date);
            var newSelectedDay = System.DateTime.getDay(date);

            if (newSelectedYear !== this.SelectedYear || newSelectedMonth !== this.SelectedMonth || newSelectedDay !== this.SelectedDay || Bridge.equals(date, System.DateTime.getToday())) {
                this.SelectedYear = newSelectedYear;
                this.SelectedMonth = newSelectedMonth;
                this.SelectedDay = newSelectedDay;

                if (!Bridge.staticEquals(this.OnDateChanged, null)) {
                    this.OnDateChanged(date);
                }

                this.RefreshView();
            }
        },
        RefreshView: function () {
            var $t;
            var date = this.GetViewDateTime();
            this.btnTop.Text = System.DateTime.format(date, "ddd, dd MMM yyyy");

            var doc = document.createDocumentFragment();

            switch (this._activeDisplayMode) {
                case ExpressCraft.DateControl.DisplayMode.Day: 
                    this.btnSelectedRange.Text = System.DateTime.format(date, "MMM yyyy");
                    var startDate = System.DateTime.create(System.DateTime.getYear(date), System.DateTime.getMonth(date), 1);
                    var endDate = System.DateTime.addDays(System.DateTime.addMonths(startDate, 1), -1);
                    var TotalDays = (System.DateTime.subdd(endDate, startDate)).getDays();
                    var startDayIndex = ((System.DateTime.getDayOfWeek(startDate) === System.DayOfWeek.Sunday ? 7 : System.DateTime.getDayOfWeek(startDate)) - 1) | 0;
                    var offsetStart = 0;
                    var row = 1;
                    var startOutside = startDayIndex === 0 ? startDate : System.DateTime.addDays(startDate, ((-startDayIndex) | 0));
                    var endDayIndex = ((System.DateTime.getDayOfWeek(endDate) === System.DayOfWeek.Sunday ? 7 : System.DateTime.getDayOfWeek(endDate)) - 1) | 0;
                    for (var i = 0; i < 42; i = (i + 1) | 0) {
                        var curDate = { v : startOutside };

                        var btn = ($t = new ExpressCraft.SimpleButton(), $t.Text = System.DateTime.getDay(curDate.v).toString(), $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% * " + System.Double.format((offsetStart * 0.1428)) + ")", "(((100% - " + (ExpressCraft.Helper.NotDesktop ? 29 : 16) + "px) * " + System.Double.format(((((row - 1) | 0)) * 0.1666)) + ") + " + (ExpressCraft.Helper.NotDesktop ? 29 : 16) + "px)", "(100% * 0.1428)", "((100% - " + (ExpressCraft.Helper.NotDesktop ? 29 : 16) + "px) * " + System.Double.format(0.1666) + ")"), $t.ItemClick = (function ($me, curDate) {
                            return Bridge.fn.bind($me, function (ev) {
                                if (Bridge.equals(this.GetViewDateTime(), curDate.v)) {
                                    if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                                        this.OnRequestToClose();
                                    }
                                }
                                this.SetViewDateTime(curDate.v);
                            });
                        })(this, curDate), $t);
                        if (ExpressCraft.Helper.NotDesktop) {
                            btn.Style.fontSize = "14px";
                            btn.Style.fontWeight = "bold";
                        }
                        if (Bridge.equals(curDate.v, date)) {
                            btn.ClassList.add("simplebutton-active");
                        }
                        btn.Style.borderColor = "transparent";

                        if (System.DateTime.lt(curDate.v, startDate) || System.DateTime.gt(curDate.v, endDate)) {
                            //btn.Style.Color = "rgb(211, 211, 211)";
                        } else if (System.DateTime.getDayOfWeek(curDate.v) === System.DayOfWeek.Saturday || System.DateTime.getDayOfWeek(curDate.v) === System.DayOfWeek.Sunday) {
                            btn.Style.color = "rgb(191, 11, 11)";
                            btn.Style.filter = "brightness(110%)";
                        } else {
                            btn.Style.filter = "brightness(110%)";
                        }
                        btn.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                        doc.appendChild(ExpressCraft.Control.op_Implicit(btn));

                        offsetStart = (offsetStart + 1) | 0;

                        if (offsetStart > 6) {
                            row = (row + 1) | 0;
                            offsetStart = 0;
                        }

                        startOutside = System.DateTime.addDays(System.DateTime.getDate(startOutside), 1);
                        if (System.DateTime.getHour(startOutside) === 23) {
                            startOutside = System.DateTime.addHours(startOutside, 1);
                        }
                    }
                    for (var x = 0; x < 7; x = (x + 1) | 0) {
                        var label = ExpressCraft.Control.Label(ExpressCraft.DateControl.Days[System.Array.index(x, ExpressCraft.DateControl.Days)], 0, 0);
                        ExpressCraft.Helper.SetLocation(label, "(100% * " + System.Double.format((x * 0.1428)) + " + ((100% * 0.1428) * 0.45) - 6px)", 0);
                        //Bounds = new Vector4("(100% * " + (offsetStart * 0.1428) + ")", "((100% * " + (row * 0.1666) + ") + (100% * 0.1666))", "(100% * 0.1428)", "((100% * " + 0.1666 + ") + (100% * 0.1666))"), //  offsetStart * 30,  (22 * row) - 6, 30, 22
                        if (ExpressCraft.Helper.NotDesktop) {
                            label.style.fontSize = "14px";
                        }

                        doc.appendChild(label);
                    }
                    break;
                case ExpressCraft.DateControl.DisplayMode.Month: 
                    break;
                case ExpressCraft.DateControl.DisplayMode.Year: 
                    break;
                default: 
                    break;
            }

            ExpressCraft.Helper.Empty(this.ContentRange.Content); // empty and re-create
            this.ContentRange.Content.appendChild(doc);
        },
        BlockTabEvent: function (ev) {
            if (ev.keyCode === 9) {
                if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                    this.OnRequestToClose();
                }
                ev.preventDefault();
            }
        },
        MoveLeft: function () {
            this.MoveLeftOrRight(-1);
        },
        MoveUp: function () {
            return;
        },
        MoveLeftOrRight: function (timesValue) {
            var date = this.GetViewDateTime();

            switch (this._activeDisplayMode) {
                default: 
                case ExpressCraft.DateControl.DisplayMode.Day: 
                    date = System.DateTime.addMonths(date, (Bridge.Int.mul(1, timesValue)));
                    break;
                case ExpressCraft.DateControl.DisplayMode.Month: 
                    date = System.DateTime.addMonths(date, (Bridge.Int.mul(12, timesValue)));
                    break;
                case ExpressCraft.DateControl.DisplayMode.Year: 
                    date = System.DateTime.addYears(date, (Bridge.Int.mul(120, timesValue)));
                    break;
            }

            this.SetViewDateTime(date);
        },
        MoveRight: function () {
            this.MoveLeftOrRight(1);
        }
    }
    });

    Bridge.ns("ExpressCraft.DateControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.DateControl, {
        f1: function (ev) {
            this.MoveUp();
        },
        f2: function (ev) {
            this.MoveLeft();
        },
        f3: function (ev) {
            this.MoveRight();
        },
        f4: function (ev) {
            this.ActiveDisplayMode = ExpressCraft.DateControl.DisplayMode.Day;
            this.SetViewDateTime(System.DateTime.getToday());

            if (!Bridge.staticEquals(this.OnDateChanged, null)) {
                this.OnDateChanged(System.DateTime.getToday());
            }

            if (Bridge.equals(this.GetViewDateTime(), System.DateTime.getToday())) {
                if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                    this.OnRequestToClose();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GridLookupEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            gridView: null,
            FieldName: null,
            DisplayName: null,
            Visible: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor4.call(this, "inputcontrol", ExpressCraft.ComboBoxTypes.Default);
                var $t;
                this.gridView = ($t = new ExpressCraft.GridView(true, true), $t.Size = new ExpressCraft.Vector2.$ctor1(250, 400), $t);
                this.gridView.ContextMenu = null;
                this.gridView.OnFocusedRowChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f1);

                this.gridView.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f2);
                this.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f3);
        }
    },
    methods: {
        ShowPopup: function () {
            if (this.Visible) {
                return;
            }
            var x = this.Content.getBoundingClientRect();
            this.gridView.Location = new ExpressCraft.Vector2.$ctor1(x.left, x.top + x.height);

            ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
            this.Content.parentElement.appendChild(ExpressCraft.Control.op_Implicit(this.gridView));

            this.gridView.RenderGrid();

            this.gridView.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
            this.Visible = true;
        },
        ClosePopup: function () {
            if (this.Visible) {
                this.gridView.Content.parentElement.removeChild(ExpressCraft.Control.op_Implicit(this.gridView));
                ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                this.Visible = false;
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.GridLookupEdit", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.GridLookupEdit, {
        f1: function (rowHandle, PrevRowhandle) {
            var $t1;
            ExpressCraft.Helper.Empty(this.Content);

            if (rowHandle > -1) {
                this.Content.appendChild(($t1 = document.createElement("option"), $t1.innerHTML = (Bridge.as(this.gridView.GetRowCellValue$3(rowHandle, this.DisplayName), System.String)), $t1.value = (Bridge.as(this.gridView.GetRowCellValue$3(rowHandle, this.FieldName), System.String)), $t1));
            }
            if (this.Visible) {
                this.ClosePopup();
            }
        },
        f2: function (ev) {
            this.ClosePopup();
        },
        f3: function (ev) {
            ev.preventDefault();
            ev.stopImmediatePropagation();
            if (this.Visible) {
                this.ClosePopup();
            } else {
                this.ShowPopup();
            }
        }
    });

    Bridge.define("ExpressCraft.GridView", {
        inherits: [ExpressCraft.Control],
        fields: {
            GridFindPanel: null,
            GridHeader: null,
            GridHeaderContainer: null,
            GridBodyContainer: null,
            GridBody: null,
            BottonOfTable: null,
            RightOfTable: null,
            RightOfTableHeader: null,
            SearchTextInput: null,
            btnFind: null,
            btnClear: null,
            btnClose: null,
            _showFindPanelContextItem: null,
            _findPanelVisible: false,
            _highlighSearchResults: false,
            _dataSource: null,
            OnFocusedRowChanged: null,
            OnRowDoubleClick: null,
            OnCustomRowStyle: null,
            OnRowClick: null,
            OnDoubleClick: null,
            OnCellRowMouseDown: null,
            SelectedRows: null,
            VisibleRowHandles: null,
            _allowRowDrag: false,
            AutoGenerateColumnsFromSource: false,
            AllowMultiSelection: false,
            showAutoFilterRow: false,
            UnitHeight: 0,
            _columnAutoWidth: false,
            _focusedcolumn: 0,
            _focusedDataHandle: 0,
            _columnHeadersVisible: false,
            _useEditForm: false,
            SortSettings: null,
            Columns: null,
            PrevRenderGridScrollId: 0,
            clickTimeDiff: null,
            headingClass: null,
            cellClass: null,
            CacheRow: null,
            CountOfDeletion: 0,
            _searchTimer: 0,
            DragIndex: 0,
            ResizeIndex: 0,
            ResizePageX: 0,
            ResizeSpan: null,
            OnColumnOnClick: null,
            OnColumnDragStart: null,
            OnColumnDragOver: null,
            OnColumnDrop: null,
            OnColumnMouseDown: null,
            OnColumnMouseMove: null,
            OnColumnMouseLeave: null,
            OnRowDragStart: null,
            lastId: 0,
            PrevScroll: 0,
            FilterRowOnChange: null,
            RenderTime: 0,
            renderGridInternal: null,
            _disableRender: false
        },
        props: {
            FindPanelVisible: {
                get: function () {
                    return this._findPanelVisible;
                },
                set: function (value) {
                    if (this._findPanelVisible !== value) {
                        if (value) {
                            this.ShowFindPanel();
                        } else {
                            this.CloseFindPanel();
                        }

                    }

                }
            },
            HighlighSearchResults: {
                get: function () {
                    return this._highlighSearchResults;
                },
                set: function (value) {
                    if (this._highlighSearchResults !== value) {
                        this._highlighSearchResults = value;
                        this.RenderGrid();
                    }
                }
            },
            AllowRowDrag: {
                get: function () {
                    return this._allowRowDrag;
                },
                set: function (value) {
                    if (this._allowRowDrag !== value) {
                        this._allowRowDrag = value;
                        this.RenderGrid();
                    }
                }
            },
            ShowAutoFilterRow: {
                get: function () {
                    return this.showAutoFilterRow;
                },
                set: function (value) {
                    if (this.showAutoFilterRow !== value) {
                        this.showAutoFilterRow = value;
                        if (!this.showAutoFilterRow) {
                            // Remove Filter.
                            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                                //FilterEdit = null;
                                this.Columns.getItem(i).FilterEdit = null;
                                this.Columns.getItem(i).FilterValue = null;
                            }
                            this.CalculateVisibleRows();
                        }
                        this.RenderGrid();
                    }
                }
            },
            FocusedColumn: {
                get: function () {
                    return this._focusedcolumn;
                },
                set: function (value) {
                    if (value !== this.FocusedColumn) {
                        var prev = this._focusedcolumn;
                        this._focusedcolumn = value;
                        //RenderGrid();
                    }
                }
            },
            FocusedDataHandle: {
                get: function () {
                    return this._focusedDataHandle;
                },
                set: function (value) {
                    if (value !== this._focusedDataHandle) {
                        var prev = this._focusedDataHandle;
                        this._focusedDataHandle = value;
                        this.RenderGrid();
                        if (!Bridge.staticEquals(this.OnFocusedRowChanged, null)) {
                            this.OnFocusedRowChanged(this._focusedDataHandle, prev);
                        }
                    }
                }
            },
            ColumnHeadersVisible: {
                get: function () {
                    return this._columnHeadersVisible;
                },
                set: function (value) {
                    if (value !== this._columnHeadersVisible) {
                        this._columnHeadersVisible = value;

                        this.SetDefaultSizes();

                        this.RenderGrid();
                    }
                }
            },
            ColumnAutoWidth: {
                get: function () {
                    return this._columnAutoWidth;
                },
                set: function (value) {
                    if (value) {
                        this.GridBodyContainer.style.overflowX = "hidden";
                    } else {
                        this.GridBodyContainer.style.overflowX = "auto";
                    }

                    if (this._columnAutoWidth !== value) {
                        this._columnAutoWidth = value;
                        this.RenderGrid();
                    }
                }
            },
            UseEditForm: {
                get: function () {
                    return this._useEditForm;
                },
                set: function (value) {
                    if (value !== this._useEditForm) {
                        this._useEditForm = value;
                        this.RenderGrid();
                    }
                }
            },
            DataSource: {
                get: function () {
                    return this._dataSource;
                },
                set: function (value) {
                    this.FocusedDataHandle = -1;
                    this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                    this.VisibleRowHandles = new (System.Collections.Generic.List$1(System.Int32))();

                    if (this._dataSource != null) {
                        this._dataSource.removeOnDataSourceChanged(Bridge.fn.cacheBind(this, this.DataSource_OnDataSourceChanged));
                    }

                    this._dataSource = value;

                    if (this._dataSource != null) {
                        this._dataSource.addOnDataSourceChanged(Bridge.fn.cacheBind(this, this.DataSource_OnDataSourceChanged));

                        if (this.Columns.Count === 0 && this.AutoGenerateColumnsFromSource) {
                            var sw = System.Diagnostics.Stopwatch.startNew();

                            for (var i = 0; i < this._dataSource.ColumnCount; i = (i + 1) | 0) {
                                var sw1 = System.Diagnostics.Stopwatch.startNew();

                                var gvc = new ExpressCraft.GridViewColumn(this);
                                gvc.Caption = this._dataSource.Columns.getItem(i).FieldName;
                                gvc.Column = this._dataSource.Columns.getItem(i);
                                gvc.Visible = true;

                                switch (this._dataSource.Columns.getItem(i).DataType) {
                                    case ExpressCraft.DataType.Byte: 
                                    case ExpressCraft.DataType.Short: 
                                    case ExpressCraft.DataType.Integer: 
                                    case ExpressCraft.DataType.Long: 
                                    case ExpressCraft.DataType.Float: 
                                    case ExpressCraft.DataType.Double: 
                                    case ExpressCraft.DataType.Decimal: 
                                        gvc.BodyApparence.Alignment = "right";
                                        break;
                                    case ExpressCraft.DataType.DateTime: 
                                        if (ExpressCraft.Settings.GridViewAutoColumnFormatDates) {
                                            if (ExpressCraft.Settings.GridViewAutoColumnGenerateFormatAsDate) {
                                                gvc.FormatString = "{0:d}";
                                            } else {
                                                gvc.FormatString = "{0:yyyy-MM-dd}";
                                            }
                                        }
                                        break;
                                    case ExpressCraft.DataType.Bool: 
                                        gvc.CellDisplay = new ExpressCraft.GridViewCellDisplayCheckBox();
                                        break;
                                }

                                this.Columns.add(gvc);

                                sw.stop();
                                System.Console.WriteLine("DataSource AddColumn Auto: " + sw1.milliseconds());
                            }

                            sw.stop();
                            System.Console.WriteLine("DataSource AutoColumns: " + sw.milliseconds());
                        }
                        this.RenderGrid();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._highlighSearchResults = true;
                this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                this._allowRowDrag = false;
                this.AutoGenerateColumnsFromSource = true;
                this.AllowMultiSelection = true;
                this.showAutoFilterRow = false;
                this.UnitHeight = 28.0;
                this._columnAutoWidth = false;
                this._focusedcolumn = -1;
                this._focusedDataHandle = -1;
                this._columnHeadersVisible = true;
                this._useEditForm = true;
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
                this.PrevRenderGridScrollId = -1;
                this.CacheRow = new (System.Collections.Generic.Dictionary$2(System.Int32,HTMLDivElement))();
                this.CountOfDeletion = 0;
                this._searchTimer = -1;
                this.DragIndex = -1;
                this.ResizeIndex = -1;
                this.ResizePageX = 0;
                this.lastId = -1;
                this.PrevScroll = -1;
                this.RenderTime = -1;
                this._disableRender = false;
            },
            ctor: function (autoGenerateColumns, columnAutoWidth) {
                if (autoGenerateColumns === void 0) { autoGenerateColumns = true; }
                if (columnAutoWidth === void 0) { columnAutoWidth = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "grid");
                var $t;
                if (ExpressCraft.Helper.NotDesktop) {
                    this.UnitHeight = 53;
                    this.headingClass = "heading heading-responsive";

                    this.cellClass = "cell cell-responsive";
                } else {
                    this.UnitHeight = 20;
                    this.headingClass = "heading";
                    this.cellClass = "cell";
                }

                this.Content.style.overflow = "hidden";
                // #FIND #RENDER#
                this.renderGridInternal = Bridge.fn.bind(this, function () {
                    if (this._disableRender) {
                        return;
                    }

                    var StartedWith = this.RenderTime;

                    this.GridHeaderContainer.scrollLeft = this.GridBodyContainer.scrollLeft;
                    if (ExpressCraft.Settings.GridViewBlurOnScroll) {
                        this.ProcessBlur();
                    }

                    this.ValidateGridSize();

                    if (this.ColumnCount() === 0) {
                        this.ClearGrid();
                        return;
                    }

                    var RawLeftCellIndex = 0;
                    var RawLeftCellScrollPadding = 0;

                    var RawLeftCellCount = this.Columns.Count;

                    var LeftLocation = 0;
                    var foundLeftLocation = false;
                    var foundRightLocation = false;

                    var ClientWidth = this.GridBodyContainer.clientWidth;


                    var ViewWidth = (this.GridBodyContainer.scrollLeft + ClientWidth) | 0;
                    var _columnAutoWidthSingle = 0.0;

                    if (this._columnAutoWidth) {
                        _columnAutoWidthSingle = ClientWidth === 0 ? 0.0 : ((Bridge.Int.div(ClientWidth, this.GetVisibleCount())) | 0);
                    }

                    var MaxWidth;
                    var LastWidth;

                    for (var x = 0; x < this.Columns.Count; x = (x + 1) | 0) {
                        if (!this.Columns.getItem(x).Visible) {
                            continue;
                        }

                        this.Columns.getItem(x).CachedX = LeftLocation;
                        LastWidth = this._columnAutoWidth ? _columnAutoWidthSingle : this.Columns.getItem(x).Width;
                        LeftLocation += LastWidth;
                        if (!foundLeftLocation && LeftLocation >= this.GridBodyContainer.scrollLeft) {
                            foundLeftLocation = true;
                            RawLeftCellIndex = x;
                            RawLeftCellScrollPadding = LeftLocation - this.GridBodyContainer.scrollLeft;
                        }
                        if (foundLeftLocation && !foundRightLocation && LeftLocation >= ViewWidth) {
                            foundRightLocation = true;
                            RawLeftCellCount = (x + 1) | 0;
                            break;
                        }
                        if (StartedWith !== this.RenderTime) {
                            return;
                        }
                    }

                    MaxWidth = LeftLocation;

                    var colFragment = document.createDocumentFragment();

                    var uboundRowCount = (RawLeftCellCount - 1) | 0;

                    if (this._columnHeadersVisible) {
                        for (var x1 = RawLeftCellIndex; x1 < RawLeftCellCount; x1 = (x1 + 1) | 0) {
                            if (x1 >= this.Columns.Count) {
                                break;
                            }
                            if (!this.Columns.getItem(x1).Visible) {
                                continue;
                            }

                            var gcol = this.Columns.getItem(x1);
                            var colIndex = x1;
                            var apparence = gcol.HeadingApparence;

                            var col = ExpressCraft.Control.Label$3(gcol.Caption, (this._columnAutoWidth ? gcol.CachedX : gcol.CachedX), 0, (this._columnAutoWidth ? _columnAutoWidthSingle : gcol.Width) - (x1 === uboundRowCount ? 0 : 1), apparence.IsBold, false, this.headingClass, apparence.Alignment, apparence.Forecolor);
                            if (gcol.SortedMode !== ExpressCraft.GridViewSortMode.None) {
                                var sortImage = ExpressCraft.Control.Div$1(gcol.SortedMode === ExpressCraft.GridViewSortMode.Asc ? "grid-sort-up" : "grid-sort-down");
                                ExpressCraft.Helper.SetBounds$1(sortImage, "(100% - 13px)", 11, 9, 5);
                                col.appendChild(sortImage);
                            }

                            this.SetupColumn(col, x1, gcol);

                            colFragment.appendChild(col);

                            if (StartedWith !== this.RenderTime) {
                                return;
                            }
                        }
                    }


                    if (this._dataSource == null || this._dataSource.RowCount === 0 || this._dataSource.ColumnCount === 0) {
                        this.ClearGrid();
                        this.GridHeader.appendChild(colFragment);
                        return;
                    }

                    var ppr = this.PixelsPerRow(this._dataSource.RowCount);

                    var RawTopRowIndex = this.GetRawTopRowIndex();
                    var RawTopRowScrollPadding = RawTopRowIndex % 1.0;
                    var RawVisibleRowCount = this.GetRawVisibleRowCount();

                    var Length = (Bridge.Int.clip32((RawVisibleRowCount + RawTopRowIndex)) + 1) | 0;
                    var start = Bridge.Int.clip32(RawTopRowIndex);


                    for (var x2 = (this.SelectedRows.SL.Count - 1) | 0; x2 >= 0; x2 = (x2 - 1) | 0) {
                        var Found = false;
                        for (var i = start; i < Length; i = (i + 1) | 0) {
                            if (i < this.DataSource.RowCount) {
                                var DataRowhandle = this.GetDataSourceRow(i);
                                if (this.SelectedRows.GetIndexValueByHardListIndex(this.SelectedRows.SL.getItem(x2)).Index === DataRowhandle) {
                                    Found = true;
                                    break;
                                }
                            }
                            if (StartedWith !== this.RenderTime) {
                                return;
                            }
                        }
                        if (StartedWith !== this.RenderTime) {
                            return;
                        }
                        if (!Found) {
                            this.SelectedRows.SL.removeAt(x2);
                        }
                    }


                    var rowFragment = document.createDocumentFragment();

                    if (ExpressCraft.Settings.GridViewRowScrollPadding > 0) {
                        start = (start - ExpressCraft.Settings.GridViewRowScrollPadding) | 0;
                        Length = (Length + ExpressCraft.Settings.GridViewRowScrollPadding) | 0;
                    }

                    var Y = (start * (ppr)) - RawTopRowScrollPadding;

                    if (this.ShowAutoFilterRow) {
                        Length = (Length - 1) | 0;
                        Y += this.UnitHeight;
                    }

                    // #TODO - CLEAN...
                    if (start < 0) {
                        start = 0;
                    }
                    if (Length > this.DataSource.RowCount) {
                        Length = this.DataSource.RowCount;
                    }

                    if (this.CacheRow.count > 10) {
                        if (this.CountOfDeletion > 8) {
                            this.CacheRow = new (System.Collections.Generic.Dictionary$2(System.Int32,HTMLDivElement))();
                            this.CountOfDeletion = 0;
                        } else {
                            var MaxDelete = (this.CacheRow.count - 10) | 0;
                            var __length = this.CacheRow.count;
                            var KeysToDelete = new (System.Collections.Generic.List$1(System.Int32))();
                            for (var i1 = 0; i1 < __length; i1 = (i1 + 1) | 0) {
                                var fieldIndex = System.Linq.Enumerable.from(this.CacheRow).elementAt(i1).key;
                                if (fieldIndex < start || fieldIndex >= Length) {
                                    KeysToDelete.add(fieldIndex);
                                    if (KeysToDelete.Count > MaxDelete) {
                                        break;
                                    }
                                }
                            }
                            __length = KeysToDelete.Count;
                            if (__length > 0) {
                                this.CountOfDeletion = (this.CountOfDeletion + 1) | 0;
                            }
                            for (var i2 = 0; i2 < __length; i2 = (i2 + 1) | 0) {
                                if (this.CacheRow.containsKey(KeysToDelete.getItem(i2))) {
                                    var x3 = this.CacheRow.get(KeysToDelete.getItem(i2));
                                    x3.onclick = null;
                                    x3.ondblclick = null;
                                    ExpressCraft.Helper.Empty(x3);
                                    x3.ondragstart = null;
                                    ExpressCraft.Helper.Delete(x3);

                                    this.CacheRow.remove(KeysToDelete.getItem(i2));
                                }
                            }
                        }

                    }

                    var prevRowCache = this.CacheRow.count;

                    for (var i3 = start; i3 < Length; i3 = (i3 + 1) | 0) {
                        if (!this.CacheRow.containsKey(i3)) {
                            var DataRowhandle1 = this.GetDataSourceRow(i3);
                            var dr = ExpressCraft.Control.Div$1(System.String.concat((i3 % 2 === 0 ? "cellrow even" : "cellrow"), (this.SelectedRows.GetValue(DataRowhandle1, true) ? " cellrow-selected" : ""), (DataRowhandle1 === this.FocusedDataHandle ? " focusedrow" : "")));

                            ExpressCraft.Helper.SetBounds$1(dr, 0, Y, this._columnAutoWidth ? ClientWidth : MaxWidth, this.UnitHeight);
                            dr.setAttribute("i", System.Convert.toString(Bridge.box(DataRowhandle1, System.Int32)));

                            dr.onclick = this.OnRowClick;
                            if (ExpressCraft.Settings.IsChrome) {
                                dr.ondblclick = this.OnDoubleClick;
                            }

                            for (var x4 = RawLeftCellIndex; x4 < RawLeftCellCount; x4 = (x4 + 1) | 0) {
                                var col1 = this.Columns.getItem(x4);
                                if (!col1.Visible) {
                                    continue;
                                }

                                var apparence1 = col1.BodyApparence;
                                var useDefault = false;
                                var cell;
                                if (col1.CellDisplay == null || ((useDefault = col1.CellDisplay.UseDefaultElement))) {
                                    var displayValue = col1.GetDisplayValueByDataRowHandle(DataRowhandle1, (this.VisibleRowHandles != null && this.VisibleRowHandles.Count > 0));
                                    cell = ExpressCraft.Control.Label$3(displayValue, col1.CachedX, 0, this._columnAutoWidth ? _columnAutoWidthSingle : col1.Width, apparence1.IsBold, false, this.cellClass, apparence1.Alignment, apparence1.Forecolor);

                                    var newCell = useDefault ? col1.CellDisplay.OnCreateDefault(cell, this, DataRowhandle1, x4) : cell;

                                    if (this._highlighSearchResults && this.DataSource._searchActive && !useDefault && !System.String.isNullOrWhiteSpace(displayValue) && System.String.startsWith(displayValue.toLowerCase(), this.DataSource.SearchString)) {
                                        ExpressCraft.Helper.Empty(newCell);
                                        var markelement = document.createElement("mark");
                                        var Slength = this.DataSource.SearchString.length;
                                        markelement.textContent = displayValue.substr(0, Slength);
                                        ExpressCraft.Helper.AppendChildren$1(newCell, [markelement, document.createTextNode(displayValue.substr(Slength))]);
                                    }

                                    dr.appendChild(newCell);
                                } else {
                                    cell = col1.CellDisplay.OnCreate(this, DataRowhandle1, x4);
                                    ExpressCraft.Helper.SetLocation(cell, col1.CachedX, 0);
                                    cell.style.width = ExpressCraft.Helper.ToPx(Bridge.box((this._columnAutoWidth ? _columnAutoWidthSingle : col1.Width), System.Single, System.Single.format, System.Single.getHashCode));

                                    dr.appendChild(cell);
                                }
                                cell.setAttribute("i", x4.toString());
                                cell.onmousedown = this.OnCellRowMouseDown;
                            }

                            if (this.AllowRowDrag) {
                                dr.setAttribute("draggable", "true");

                                dr.ondragstart = this.OnRowDragStart;
                            }

                            rowFragment.appendChild(dr);

                            this.CacheRow.set(i3, dr);
                        }

                        if (StartedWith !== this.RenderTime) {
                            if (prevRowCache === 0) {
                                this.ClearGrid();
                            }

                            this.GridBody.appendChild(rowFragment);

                            return;
                        }

                        Y += this.UnitHeight;
                    }
                    if (prevRowCache === 0) {
                        this.ClearGrid();
                    }

                    if (!Bridge.staticEquals(this.OnCustomRowStyle, null) && rowFragment.childNodes != null) {
                        var count = rowFragment.childNodes.length;
                        for (var i4 = 0; i4 < count; i4 = (i4 + 1) | 0) {
                            if (StartedWith !== this.RenderTime) {
                                this.GridBody.appendChild(rowFragment);

                                return;
                            }

                            try {
                                var child = Bridge.cast(rowFragment.childNodes[i4], HTMLElement);
                                this.OnCustomRowStyle(child, parseInt(child.getAttribute("i")));
                            }
                            catch (ex) {
                                ex = System.Exception.create(ex);
                                if (ExpressCraft.Application.AplicationDefition === ExpressCraft.ApplicationDefitnion.ExpressCraftConsole) {
                                    ExpressCraft.ConsoleForm.Log(ex.toString(), ExpressCraft.ConsoleLogType.Error);
                                }
                            }
                        }
                    }

                    this.GridHeader.appendChild(colFragment);
                    this.GridBody.appendChild(rowFragment);

                    if (StartedWith !== this.RenderTime) {
                        return;
                    }

                    this.RenderTime = -1;
                });

                this.GridHeaderContainer = ExpressCraft.Control.Div$1("heading-container");

                this.GridHeader = ExpressCraft.Control.Div();
                ExpressCraft.Helper.SetBounds$1(this.GridHeader, 0, 0, 0, "29px");
                this.GridBodyContainer = ExpressCraft.Control.Div();

                this.GridBodyContainer.style.overflowX = "auto";
                this.GridBodyContainer.style.overflowY = "auto";

                this.GridHeaderContainer.style.overflow = "hidden";

                this.GridBody = ExpressCraft.Control.Div();
                ExpressCraft.Helper.SetBounds$1(this.GridBody, 0, 0, 0, 0);

                this.GridBodyContainer.appendChild(this.GridBody);
                this.GridHeaderContainer.appendChild(this.GridHeader);

                this.GridFindPanel = ExpressCraft.Control.Div$1("heading-container");
                this.GridFindPanel.style.visibility = "hidden";
                ExpressCraft.Helper.SetBounds$1(this.GridFindPanel, 0, 0, "100%", 46);

                this.SearchTextInput = ($t = new ExpressCraft.TextInput.$ctor1(), $t.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f1), $t.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f2), $t);
                this.SearchTextInput.Bounds = new ExpressCraft.Vector4.$ctor1(30, 13, 350, 22);
                this.SearchTextInput.SetAttribute("placeholder", "Enter text to search...");

                this.btnFind = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Find", $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f3), $t.Bounds = new ExpressCraft.Vector4.$ctor1(385, 13, 60, 22), $t);
                this.btnClear = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Clear", $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f4), $t.Bounds = new ExpressCraft.Vector4.$ctor1(449, 13, 60, 22), $t);

                this.btnClose = ($t = new ExpressCraft.SimpleButton(), $t.Bounds = new ExpressCraft.Vector4.$ctor1(7, 15, 18, 18), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f5), $t);
                this.btnClose.Content.innerHTML = "&times;";


                ExpressCraft.Helper.AppendChildren$2(this.GridFindPanel, [this.btnClose, this.SearchTextInput, this.btnFind, this.btnClear]);

                this.SetDefaultSizes();

                this.Content.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f6);

                this.OnResize = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f7);
                var prevleft = 0;
                this.GridBodyContainer.onscroll = Bridge.fn.bind(this, function (ev) {
                    if (prevleft !== this.GridBodyContainer.scrollLeft) {
                        this.CacheRow = new (System.Collections.Generic.Dictionary$2(System.Int32,HTMLDivElement))();
                        prevleft = this.GridBodyContainer.scrollLeft;
                        this.DelayedRenderGrid();
                    } else {
                        this.DelayedRenderGrid(true);
                    }


                });
                this.OnLoaded = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f8);
                this.OnCellRowMouseDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f9);
                this.OnRowClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f10);
                this.Content.tabIndex = 0;
                this.OnDoubleClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f11);

                this.Content.onkeydown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f12);

                this.ContextMenu = new ExpressCraft.ContextMenu();

                this.ContextMenu.ContextItems.addRange(System.Array.init([new ExpressCraft.ContextItem.$ctor1("Sort Ascending", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f13)), new ExpressCraft.ContextItem.$ctor1("Sort Descending", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f14)), new ExpressCraft.ContextItem.$ctor1("Clear All Sorting", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f15), true), new ExpressCraft.ContextItem.$ctor1("Hide This Column", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f16)), new ExpressCraft.ContextItem.$ctor2("View Columns"), new ExpressCraft.ContextItem.$ctor2("Save Column Layout"), new ExpressCraft.ContextItem.$ctor1("Best Fit", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f17)), new ExpressCraft.ContextItem.$ctor1("Best Fit (all columns)", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f18), true), new ExpressCraft.ContextItem.$ctor2("Filter Editor...", true), (this._showFindPanelContextItem = ($t = new ExpressCraft.ContextItem.$ctor2("Show Find Panel"), $t.OnItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f19), $t)), new ExpressCraft.ContextItem.$ctor1("Select All", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f20)), new ExpressCraft.ContextItem.$ctor1("Unselect All", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f21))], ExpressCraft.ContextItem));

                this.Content.oncontextmenu = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f22);

                this.OnColumnOnClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f23);
                this.OnColumnDragStart = $asm.$.ExpressCraft.GridView.f24;
                this.OnColumnDragOver = $asm.$.ExpressCraft.GridView.f25;
                this.OnColumnDrop = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f26);
                this.OnColumnMouseDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f27);
                this.OnColumnMouseMove = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f28);

                this.OnColumnMouseLeave = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f29);

                this.OnRowDragStart = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f30);

                ExpressCraft.Helper.AppendChildren$1(this.Content, [this.GridFindPanel, this.GridHeaderContainer, this.GridBodyContainer]);

                this.FilterRowOnChange = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f31);

                this.AutoGenerateColumnsFromSource = autoGenerateColumns;
                this.ColumnAutoWidth = columnAutoWidth;
        }
    },
    methods: {
        ShowFindPanel: function () {
            if (!this._findPanelVisible) {
                this._showFindPanelContextItem.Caption = "Close Find Panel";
                this._findPanelVisible = true;
                this.GridFindPanel.style.visibility = "inherit";

                this.SetDefaultSizes();

                this.RenderGrid();
            }

        },
        CloseFindPanel: function () {
            if (this._findPanelVisible) {
                this._showFindPanelContextItem.Caption = "Show Find Panel";
                this._findPanelVisible = false;
                this.GridFindPanel.style.visibility = "hidden";

                this.SetDefaultSizes();

                this.RenderGrid();
            }
        },
        SetVisibleRowHandles: function (T, Cells, asc) {
            if (this.DataSource._searchActive) {
                if (asc) {
                    var sorted = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).where(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f32)).orderBy($asm.$.ExpressCraft.GridView.f33).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted).select($asm.$.ExpressCraft.GridView.f34).toList(System.Int32);
                } else {
                    var sorted1 = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).where(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f32)).orderByDescending($asm.$.ExpressCraft.GridView.f33).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted1).select($asm.$.ExpressCraft.GridView.f34).toList(System.Int32);
                }
            } else {
                if (asc) {
                    var sorted2 = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).orderBy($asm.$.ExpressCraft.GridView.f33).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted2).select($asm.$.ExpressCraft.GridView.f34).toList(System.Int32);
                } else {
                    var sorted3 = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).orderByDescending($asm.$.ExpressCraft.GridView.f33).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted3).select($asm.$.ExpressCraft.GridView.f34).toList(System.Int32);
                }
            }

        },
        CalculateVisibleRows: function () {
            var calcVisibleRows = new (System.Collections.Generic.List$1(System.Int32))();

            for (var y = 0; y < this.RowCount(); y = (y + 1) | 0) {
                var AddIndex = true;

                for (var x = 0; x < this.ColumnCount(); x = (x + 1) | 0) {
                    if (!this.Columns.getItem(x).ValueMatchFilter(y)) {
                        AddIndex = false;
                        break;
                    }
                }
                if (AddIndex) {
                    calcVisibleRows.add(y);
                }
            }

            this.VisibleRowHandles = calcVisibleRows;
            this.RenderGrid();
        },
        SetDefaultSizes: function () {
            if (this._columnHeadersVisible) {
                this.GridHeader.style.visibility = "inherit";
                this.GridHeaderContainer.style.visibility = "inherit";

                if (this.FindPanelVisible) {
                    ExpressCraft.Helper.SetBounds$1(this.GridHeaderContainer, 0, 47, "100%", this.UnitHeight + 1);
                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, this.UnitHeight + 3 + 47, "100%", "(100% - " + System.Single.format((this.UnitHeight + 3 + 47)) + "px)");
                } else {
                    ExpressCraft.Helper.SetBounds$1(this.GridHeaderContainer, 0, 0, "100%", this.UnitHeight + 1);
                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, this.UnitHeight + 3, "100%", "(100% - " + System.Single.format((this.UnitHeight + 3)) + "px)");
                }
            } else {
                this.GridHeader.style.visibility = "hidden";
                this.GridHeaderContainer.style.visibility = "hidden";

                if (this.FindPanelVisible) {
                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, 47, "100%", "(100% - " + (47) + "px)");
                } else {
                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, 1, "100%", "(100% - 1px)");
                }
            }
        },
        SortColumn: function () {
            if (this.SortSettings != null) {
                this.SortColumn$1(this.SortSettings.Column, this.SortSettings.SortMode);
            }
        },
        SortColumn$1: function (column, sort) {
            var $t;
            if (sort === void 0) { sort = 1; }
            column.SortedMode = sort;

            if (this.SortSettings != null && !Bridge.referenceEquals(this.SortSettings.Column, column)) {
                this.SortSettings.Column.SortedMode = ExpressCraft.GridViewSortMode.None;
                this.VisibleRowHandles = null;
            }

            if (sort === ExpressCraft.GridViewSortMode.None) {
                this.VisibleRowHandles = null;
            } else {
                var sort1 = sort === ExpressCraft.GridViewSortMode.Asc;

                switch (column.Column.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        this.SetVisibleRowHandles(System.Object, (Bridge.as(column.Column, ExpressCraft.DataColumnObject)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Bool: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Boolean), (Bridge.as(column.Column, ExpressCraft.DataColumnBool)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.DateTime: 
                        this.SetVisibleRowHandles(Bridge.global.System.Nullable$1(System.DateTime), (Bridge.as(column.Column, ExpressCraft.DataColumnDateTime)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.String: 
                        this.SetVisibleRowHandles(System.String, (Bridge.as(column.Column, ExpressCraft.DataColumnString)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Byte: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Byte), (Bridge.as(column.Column, ExpressCraft.DataColumnByte)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Short: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Int16), (Bridge.as(column.Column, ExpressCraft.DataColumnShort)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Integer: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Int32), (Bridge.as(column.Column, ExpressCraft.DataColumnInteger)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Long: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Int64), (Bridge.as(column.Column, ExpressCraft.DataColumnLong)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Float: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Single), (Bridge.as(column.Column, ExpressCraft.DataColumnFloat)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Double: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Double), (Bridge.as(column.Column, ExpressCraft.DataColumnDouble)).Cells, sort1);
                        break;
                    case ExpressCraft.DataType.Decimal: 
                        this.SetVisibleRowHandles(System.Nullable$1(System.Decimal), (Bridge.as(column.Column, ExpressCraft.DataColumnDecimal)).Cells, sort1);
                        break;
                }
            }

            this.RenderGrid();
            this.SortSettings = ($t = new ExpressCraft.SortSetting(), $t.Column = column, $t.SortMode = sort, $t);
        },
        ClearSortColumn: function () {
            if (this.SortSettings != null) {
                this.SortColumn$1(this.SortSettings.Column, ExpressCraft.GridViewSortMode.None);
            }
        },
        ColumnCount: function () {
            return this.Columns.Count;
        },
        RowCount: function () {
            if (this._dataSource == null) {
                return 0;
            }
            return this._dataSource.RowCount;
        },
        ScrollToBottom: function () {
            this.GridBodyContainer.scrollTop = (this.GridBody.clientHeight - this.GridBodyContainer.clientHeight) | 0;
        },
        ScrollToTop: function () {
            this.GridBodyContainer.scrollTop = 0;
        },
        GetColumn: function (i) {
            return this.Columns.getItem(i);
        },
        GetFocusedRowCellValue$2: function (columnIndex) {
            return this.GetFocusedRowCellValue$1(this.Columns.getItem(columnIndex));
        },
        GetFocusedRowCellValue$3: function (FieldName) {
            return this.GetFocusedRowCellValue(this.GetColumnByFieldName(FieldName));
        },
        GetFocusedRowCellValue$1: function (column) {
            return this.GetRowCellValue$1(this.FocusedDataHandle, column);
        },
        GetFocusedRowCellValue: function (column) {
            return this.GetRowCellValue(this.FocusedDataHandle, column);
        },
        GetGridViewColumnByFieldName: function (FieldName) {
            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                if (Bridge.referenceEquals(this.Columns.getItem(i).Column.FieldName, FieldName)) {
                    return this.Columns.getItem(i);
                }
            }
            return null;
        },
        GetGridViewColumnByFieldName$1: function (fieldName, IgnoreCase) {
            if (IgnoreCase === void 0) { IgnoreCase = false; }
            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                if (this.Columns.getItem(i) != null && this.Columns.getItem(i).Column != null && System.String.compare(this.Columns.getItem(i).Column.FieldName, fieldName, IgnoreCase) === 0) {
                    return this.Columns.getItem(i);
                }
            }

            return null;
        },
        GetRowCellValue$1: function (Datahandle, column) {
            return this.GetRowCellValue(Datahandle, column.Column);
        },
        GetRowCellValue: function (Datahandle, column) {
            if (Datahandle === -1) {
                return null;
            }
            return column.GetCellValue(Datahandle);
        },
        GetRowCellValue$3: function (Datahandle, FieldName) {
            return this.GetRowCellValue(Datahandle, this.GetColumnByFieldName(FieldName));
        },
        GetRowCellValue$2: function (Datahandle, columnIndex) {
            return this.GetRowCellValue$1(Datahandle, this.Columns.getItem(columnIndex));
        },
        GetColumnByFieldName: function (fieldName, IgnoreCase) {
            if (IgnoreCase === void 0) { IgnoreCase = false; }
            if (this.DataSource == null) {
                return null;
            }

            for (var i = 0; i < this.DataSource.ColumnCount; i = (i + 1) | 0) {
                if (this.DataSource.Columns.getItem(i) != null && System.String.compare(this.DataSource.Columns.getItem(i).FieldName, fieldName, IgnoreCase) === 0) {
                    return this.DataSource.Columns.getItem(i);
                }
            }

            return null;
        },
        AddColumn$2: function (caption, fieldname, width, formatstring, alignment, forecolor, isBold) {
            if (width === void 0) { width = 100; }
            if (formatstring === void 0) { formatstring = ""; }
            if (alignment === void 0) { alignment = 3; }
            if (forecolor === void 0) { forecolor = null; }
            if (isBold === void 0) { isBold = false; }
            var col = this.GetColumnByFieldName(fieldname);
            if (col == null) {
                return;
            }
            this.AddColumn$1(caption, col, width, formatstring, alignment, forecolor, isBold);
        },
        AddColumn$1: function (caption, column, width, formatstring, alignment, forecolor, isBold) {
            var $t;
            if (width === void 0) { width = 100; }
            if (formatstring === void 0) { formatstring = ""; }
            if (alignment === void 0) { alignment = 3; }
            if (forecolor === void 0) { forecolor = null; }
            if (isBold === void 0) { isBold = false; }
            this.AddColumn(($t = new ExpressCraft.GridViewColumn(this, width), $t.Caption = caption, $t.BodyApparence = new ExpressCraft.GridViewCellApparence.$ctor3(isBold, alignment, forecolor), $t.FormatString = formatstring, $t.Column = column, $t));
        },
        AddColumn: function (column) {
            if (column == null) {
                return;
            }

            this.Columns.add(column);

            this.RenderGrid();
        },
        AddColumns: function (columns) {
            if (columns === void 0) { columns = []; }
            if (columns == null || columns.length === 0) {
                return;
            }

            this.Columns.addRange(columns);

            this.RenderGrid();
        },
        RemoveColumn: function (column) {
            this.Columns.remove(column);

            this.RenderGrid();
        },
        GetDataSourceRow: function (i) {
            if (this.VisibleRowHandles == null || this.VisibleRowHandles.Count === 0) {
                return i;
            }
            return this.VisibleRowHandles.getItem(i);
        },
        GetColumnWidths: function () {
            if (this._columnAutoWidth) {
                return this.GridBodyContainer.clientWidth;
            } else {
                var width = 0.0;
                for (var i = 0; i < this.Columns.Count; i = (i + 1) | 0) {
                    if (this.Columns.getItem(i).Visible) {
                        width += this.Columns.getItem(i).Width;
                    }
                }
                return width;
            }
        },
        ClearSelection: function () {
            this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
            this.RenderGrid();
        },
        SelectAllRows: function () {
            var length = this.RowCount();
            if (length === 0) {
                this.SelectedRows.ClearAll();
            } else {
                var index = System.Array.init(length, 0, System.Int32);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    index[System.Array.index(i, index)] = this.GetDataSourceRow(i);
                }
                this.SelectedRows.ClearAllSetHardRange(true, index);
            }
            this.RenderGrid();
        },
        DelayedRenderGrid: function (renderNoLag) {
            if (renderNoLag === void 0) { renderNoLag = false; }
            if (renderNoLag) {
                this.RenderGrid(false);
            } else {
                if (ExpressCraft.Settings.GridViewScrollDelayed) {
                    if (this.PrevRenderGridScrollId !== -1) {
                        Bridge.global.clearTimeout(this.PrevRenderGridScrollId);
                        this.PrevRenderGridScrollId = -1;
                    }
                    this.PrevRenderGridScrollId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f35), Math.max(1, ExpressCraft.Settings.GridViewScrollDelayMS));
                } else {
                    this.RenderGrid();
                }
            }

        },
        GetFocusedRow: function () {
            if (this.FocusedDataHandle > -1) {
                return this.DataSource.getItem(this.GetDataSourceRow(this.FocusedDataHandle));
            } else {
                return null;
            }
        },
        GetVisibleCount: function () {
            if (this.Columns == null || this.Columns.Count === 0) {
                return 0;
            }
            var length = this.Columns.Count;
            var length1 = this.Columns.Count;

            for (var i = 0; i < length; i = (i + 1) | 0) {
                if (!this.Columns.getItem(i).Visible) {
                    length1 = (length1 - 1) | 0;
                }
            }
            return length1;
        },
        GetBestFitForColumn: function (column) {
            if (!column.Visible) {
                return 0;
            }

            var maxLength = 0;
            var maxIndex = -1;
            var maxStr = "";

            for (var i = 0; i < this.RowCount(); i = (i + 1) | 0) {
                var value = column.GetDisplayValueByDataRowHandle(i);
                if (!System.String.isNullOrWhiteSpace(value)) {
                    var v = value.length;
                    if (v > maxLength) {
                        maxLength = v;
                        maxIndex = i;
                        maxStr = value;
                    }
                }
            }

            if (maxIndex > -1) {
                return ((Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(maxStr, ExpressCraft.Settings.DefaultFont)) + 20) | 0);
            } else {
                return 0;
            }
        },
        BestFitAllColumns: function () {
            this._disableRender = true;
            for (var i = 0; i < this.Columns.Count; i = (i + 1) | 0) {
                if (this.Columns.getItem(i).Visible) {
                    this.Columns.getItem(i).Width = this.GetBestFitForColumn(this.Columns.getItem(i));
                }
            }
            this._disableRender = false;
            this.renderGridInternal();
        },
        _search: function () {
            if (this.DataSource == null || !this.FindPanelVisible) {
                return;
            }
            this.DataSource.Search(this.SearchTextInput.Text, this);
        },
        DataSource_OnDataSourceChanged: function (sender, e) {
            this.SortColumn();
            this.RenderGrid();
        },
        Render: function () {
            ExpressCraft.Control.prototype.Render.call(this);
            this.HasRendered = true;
            this.RenderGrid();

            if (this.Content.parentElement != null) {
            }
        },
        GetRawVisibleRowCount: function () {
            return this.GridBodyContainer.clientHeight === 0 ? 0.0 : this.GridBodyContainer.clientHeight / this.UnitHeight;
        },
        GetRawTopRowIndex: function () {
            return this.GridBodyContainer.scrollTop === 0 ? 0.0 : this.GridBodyContainer.scrollTop / this.PixelsPerRow(this.RowCount());
        },
        ValidateGridWidth: function () {
            var width = this.GetColumnWidths();
            this.GridBody.style.width = ExpressCraft.Helper.ToPx(Bridge.box((width), System.Single, System.Single.format, System.Single.getHashCode));
            this.GridHeader.style.width = ExpressCraft.Helper.ToPx(Bridge.box(((width) + 24), System.Single, System.Single.format, System.Single.getHashCode)); // (width).ToPx();
            if (this.RightOfTable == null) {
                this.RightOfTable = ExpressCraft.Control.Div();
                this.GridBody.appendChild(this.RightOfTable);
            }
            if (this.RightOfTableHeader == null) {
                this.RightOfTableHeader = ExpressCraft.Control.Div();
                this.GridHeader.appendChild(this.RightOfTableHeader);
            }
            ExpressCraft.Helper.SetBounds$1(this.RightOfTable, width - 1, 0, 1, 1);
            ExpressCraft.Helper.SetBounds$1(this.RightOfTableHeader, width - 1, 0, 1, 1);
        },
        PixelsPerRow: function (rowCount) {
            if (rowCount > ExpressCraft.Settings.MaximumPixelScrollingRows) {
                return 3.0;
            } else {
                return this.UnitHeight;
            }
        },
        ValidateGridHeight: function () {
            var i = this.RowCount();
            var ppr = this.PixelsPerRow(i);
            var height = ppr * i;

            if (i > ExpressCraft.Settings.MaximumPixelScrollingRows && this.GridBodyContainer.clientHeight > 0) {
                height += ((this.GridBodyContainer.clientHeight / this.UnitHeight) * ppr);
            }

            this.GridBody.style.height = ExpressCraft.Helper.ToPx(Bridge.box(height, System.Single, System.Single.format, System.Single.getHashCode));
            if (this.BottonOfTable == null) {
                this.BottonOfTable = ExpressCraft.Control.Div();
                this.GridBody.appendChild(this.BottonOfTable);
            }
            ExpressCraft.Helper.SetBounds$1(this.BottonOfTable, 0, height, 1, 1);
        },
        ValidateGridSize: function () {
            this.ValidateGridHeight();
            this.ValidateGridWidth();
        },
        ClearHeader: function () {
            ExpressCraft.Helper.Empty(this.GridHeader);
            this.GridHeader.appendChild(this.RightOfTableHeader);
        },
        ClearColumns: function () {
            this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
        },
        ClearView: function () {
            this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
            this.VisibleRowHandles = new (System.Collections.Generic.List$1(System.Int32))();
            this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
            this._dataSource = null;
        },
        ClearBody: function () {
            ExpressCraft.Helper.Empty(this.GridBody);
            ExpressCraft.Helper.AppendChildren$1(this.GridBody, [this.RightOfTable, this.BottonOfTable]);
        },
        ClearGrid: function () {
            this.ClearHeader();
            this.ClearBody();
        },
        SetupColumn: function (se, index, gcol) {
            se.setAttribute("i", System.Convert.toString(Bridge.box(index, System.Int32)));
            se.setAttribute("draggable", "true");
            se.onclick = this.OnColumnOnClick;
            se.ondragstart = this.OnColumnDragStart;
            se.ondragover = this.OnColumnDragOver;
            se.ondrop = this.OnColumnDrop;
            se.onmousedown = this.OnColumnMouseDown;
            se.onmousemove = this.OnColumnMouseMove;
            se.onmouseleave = this.OnColumnMouseLeave;
        },
        ProcessBlur: function () {
            if (this.PrevScroll !== this.GridBodyContainer.scrollTop) {
                this.GridBody.classList.add("blur");
                if (this.lastId !== -1) {
                    Bridge.global.clearTimeout(this.lastId);
                    this.lastId = -1;
                }

                this.lastId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f36), 100);
            }
            this.PrevScroll = this.GridBodyContainer.scrollTop;
        },
        RenderGrid: function (clear) {
            if (clear === void 0) { clear = true; }
            if (clear) {
                this.CacheRow = new (System.Collections.Generic.Dictionary$2(System.Int32,HTMLDivElement))();
            }

            if (this.RenderTime > -1) {
                Bridge.global.clearTimeout(this.RenderTime);
                this.RenderTime = Bridge.global.setTimeout(this.renderGridInternal, 1);
            } else {
                this.renderGridInternal();
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.GridView", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.GridView, {
        f1: function (sender) {
            if (this._searchTimer > -1) {
                Bridge.global.clearTimeout(this._searchTimer);
            }
            if (System.String.isNullOrWhiteSpace(this.SearchTextInput.Text)) {
                this._search();
            } else {
                this._searchTimer = Bridge.global.setTimeout(Bridge.fn.cacheBind(this, this._search), 500);
            }
        },
        f2: function (sender, ev) {
            if (ev.keyCode === ExpressCraft.KeyCodes.Enter) {
                this.btnFind.Content.click();
            }
        },
        f3: function (sender) {
            if (this._searchTimer > -1) {
                Bridge.global.clearTimeout(this._searchTimer);
            }
            this._search();
        },
        f4: function (sender) {
            if (this._searchTimer > -1) {
                Bridge.global.clearTimeout(this._searchTimer);
            }
            this.SearchTextInput.Text = "";
        },
        f5: function (sender) {
            this.btnClear.Content.click();
            this.CloseFindPanel();
        },
        f6: function (ev) {
            if (this.ResizeIndex === -1) {
                return;
            }
            var x = ev.pageX;
            x = (this.Columns.getItem(this.ResizeIndex).Width + (((x - this.ResizePageX) | 0))) | 0;
            if (x < 24) {
                x = 24;
            }
            this.Columns.getItem(this.ResizeIndex).Width = x;

            ExpressCraft.Form.SetCursor("default");

            ev.preventDefault();
            ev.stopImmediatePropagation();
            ev.stopPropagation();

            this.ResizeIndex = -1;
            this.ResizeSpan = null;
        },
        f7: function (ev) {
            this.CacheRow = new (System.Collections.Generic.Dictionary$2(System.Int32,HTMLDivElement))();
            this.DelayedRenderGrid();
        },
        f8: function (ev) {
            this.RenderGrid();
        },
        f9: function (ev) {
            this.FocusedColumn = parseInt(ev.currentTarget.getAttribute("i"));
        },
        f10: function (ev) {
            if (!ExpressCraft.Settings.IsChrome) {
                if (this.clickTimeDiff == null) {
                    this.clickTimeDiff = System.Diagnostics.Stopwatch.startNew();
                } else {
                    this.clickTimeDiff.stop();
                    var ems = this.clickTimeDiff.milliseconds();
                    this.clickTimeDiff = null;

                    if (ems.lt(System.Int64(200))) {
                        this.OnDoubleClick(ev);
                    }
                }
            }

            var DataRowHandle = parseInt(ev.currentTarget.getAttribute("i"));

            var mev = ev;
            if (this.AllowMultiSelection) {
                if (mev.ctrlKey) {
                    this.SelectedRows.AddOrSet(true, DataRowHandle, true);
                    this.RenderGrid();
                    return;
                } else if (mev.shiftKey) {
                    return;
                }
            }
            this.SelectedRows.ClearAndAddOrSet(true, DataRowHandle, true);
            if (DataRowHandle !== this._focusedDataHandle) {
                this.FocusedDataHandle = DataRowHandle;
            } else {
                this.RenderGrid();
            }
        },
        f11: function (ev) {
            var drh = parseInt(ev.currentTarget.getAttribute("i"));
            if (!Bridge.staticEquals(this.OnRowDoubleClick, null)) {
                this.OnRowDoubleClick(drh);
            }

            if (this._useEditForm) {
                var idr = this.DataSource.getItem(drh);

                var fdre = new ExpressCraft.DataRowEditForm(idr, this, true);
                fdre.ShowDialog();
            }
        },
        f12: function (ev) {
            var kev = ev;
            //Global.Alert("CONTROL + A");
            if (this.AllowMultiSelection && kev.ctrlKey && (kev.keyCode === 65 || kev.keyCode === 97)) {
                // keyCode == 65 || keyCode == 97
                //Global.Alert("AllowMultiSelection = TRUE");
                this.SelectAllRows();
            } else {
                //Global.Alert("AllowMultiSelection = FALSE");
            }
        },
        f13: function (cm) {
            if (this.FocusedColumn > -1) {
                this.SortColumn$1(this.Columns.getItem(this.FocusedColumn), ExpressCraft.GridViewSortMode.Asc);
            }
        },
        f14: function (cm) {
            if (this.FocusedColumn > -1) {
                this.SortColumn$1(this.Columns.getItem(this.FocusedColumn), ExpressCraft.GridViewSortMode.Desc);
            }
        },
        f15: function (cm) {
            this.ClearSortColumn();
        },
        f16: function (ci) {
            if (this.FocusedColumn > -1) {
                this.Columns.getItem(this.FocusedColumn).Visible = false;
                this.RenderGrid();
            }
        },
        f17: function (ci) {
            if (this.FocusedColumn > -1) {
                this.Columns.getItem(this.FocusedColumn).Width = this.GetBestFitForColumn(this.Columns.getItem(this.FocusedColumn));
            }
        },
        f18: function (ci) {
            this.BestFitAllColumns();
        },
        f19: function (sender) {
            if (this.FindPanelVisible) {
                this.FindPanelVisible = false;
            } else {
                this.FindPanelVisible = true;
            }
        },
        f20: function (cm) {
            this.SelectAllRows();
        },
        f21: function (cm) {
            this.ClearSelection();
        },
        f22: function (ev) {
            if (ExpressCraft.Helper.NotDesktop) {
                ev.preventDefault();
                ev.stopPropagation();

                this.OnDoubleClick(ev);
            } else {
                if (this.ContextMenu != null) {
                    this.ContextMenu.Show(ExpressCraft.Helper.GetClientMouseLocation(ev));
                    ev.preventDefault();
                    ev.stopPropagation();
                }
            }
        },
        f23: function (ev) {
            if (this.ResizeIndex >= 0) {
                return;
            }

            var gcol = this.Columns.getItem(parseInt(ev.currentTarget.getAttribute("i")));

            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                if (!Bridge.referenceEquals(this.Columns.getItem(i), gcol)) {
                    this.Columns.getItem(i).SortedMode = ExpressCraft.GridViewSortMode.None;
                }
            }
            switch (gcol.SortedMode) {
                default: 
                case ExpressCraft.GridViewSortMode.None: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.Asc);
                    break;
                case ExpressCraft.GridViewSortMode.Asc: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.Desc);
                    break;
                case ExpressCraft.GridViewSortMode.Desc: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.None);
                    break;
            }
        },
        f24: function (ev) {
            ev.dataTransfer.setData("gridviewColumnDrag", ev.currentTarget.getAttribute("i"));
        },
        f25: function (ev) {
            ev.preventDefault();
        },
        f26: function (ev) {
            if (ev.target == null || !(Bridge.is(ev.target, HTMLSpanElement))) {
                return;
            }

            var target = ev.target;

            if (!Bridge.referenceEquals(target.parentElement, this.GridHeader)) {
                return;
            }

            var HoverIndex = parseInt(target.getAttribute("i"));
            var SelectedIndex = parseInt(ev.dataTransfer.getData("gridviewColumnDrag"));
            if (SelectedIndex === HoverIndex) {
                return;
            }

            if (HoverIndex < 0) {
                return;
            }

            var x = ev.layerX;
            x = (x - target.clientLeft) | 0;
            var w = (Bridge.Int.div(target.clientWidth, 2)) | 0;

            if (HoverIndex === ((SelectedIndex - 1) | 0) && x > w) {
                return;
            }
            if (HoverIndex === ((SelectedIndex + 1) | 0) && x < w) {
                return;
            }

            if (x < w) {
                this.DragIndex = HoverIndex;
            } else {
                this.DragIndex = (HoverIndex + 1) | 0;
            }

            if (this.DragIndex < 0 || SelectedIndex < 0) {
                return;
            }
            var col = this.Columns.getItem(SelectedIndex);
            if (this.DragIndex === this.Columns.Count) {
                this.Columns.remove(col);
                this.Columns.add(col);
            } else {
                var col1 = this.Columns.getItem(this.DragIndex);
                this.Columns.remove(col);
                this.Columns.insert(this.Columns.indexOf(col1), col);
            }

            this.RenderGrid();
        },
        f27: function (ev) {
            var x = ev.layerX;
            var target = ev.target;
            x = (x - target.clientLeft) | 0;
            this.ResizePageX = ev.pageX;

            this.FocusedColumn = parseInt(ev.currentTarget.getAttribute("i"));

            if (x >= ((target.clientWidth - 2) | 0)) {
                this.ResizeIndex = parseInt(target.getAttribute("i"));
                this.ResizeSpan = target;
                ExpressCraft.Form.SetCursor("ew-resize");

                ev.preventDefault();
            } else {
                this.ResizeSpan = null;
                this.ResizeIndex = -1;
            }
        },
        f28: function (ev) {
            if (this.ResizeIndex === -1) {
                var x = ev.layerX;
                var target = ev.target;
                x = (x - target.clientLeft) | 0;

                if (x >= ((target.clientWidth - 2) | 0)) {
                    ExpressCraft.Form.SetCursor("ew-resize");
                    return;
                }
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f29: function (ev) {
            if (this.ResizeIndex === -1) {
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f30: function (ev) {
            ev.dataTransfer.setData("gridviewRowDrag", JSON.stringify(this.DataSource.getItem(parseInt(ev.currentTarget.getAttribute("i"))).GetOfflineDataRow()));
        },
        f31: function (te) {
            this.Columns.getItem(parseInt(te.Content.getAttribute("i"))).FilterValue = te.Text;
        },
        f32: function (p) {
            return this.DataSource._searchResults.contains(p.key);
        },
        f33: function (x) {
            return x.value;
        },
        f34: function (x) {
            return x.key;
        },
        f35: function () {
            this.RenderGrid();
        },
        f36: function () {
            this.GridBody.classList.remove("blur");
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplayCheckBox", {
        inherits: [ExpressCraft.GridViewCellDisplay],
        statics: {
            fields: {
                resource_checked: null
            },
            ctors: {
                init: function () {
                    this.resource_checked = "checked";
                }
            }
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                var value = gridView.GetRowCellValue$2(dataRowIndex, columnIndex);

                var cell = ExpressCraft.Control.Div$1("cell");
                var input = ExpressCraft.Control.Input("", "checkbox");
                ExpressCraft.Helper.SetBoundsFull$1(input);
                ExpressCraft.Helper.SetChecked(input, value);
                input.style.margin = "0";
                cell.appendChild(input);

                return cell;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplayImage", {
        inherits: [ExpressCraft.GridViewCellDisplay],
        fields: {
            UseBase64Resource: false
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                var src = ExpressCraft.Helper.HtmlUrlEscape((System.String.concat(gridView.GetRowCellValue$2(dataRowIndex, columnIndex), "")));
                var imgDiv = ExpressCraft.Control.Div$1("cell");

                ExpressCraft.Helper.SetImage(imgDiv, src, !this.UseBase64Resource);

                return imgDiv;
            }
        }
    });

    Bridge.define("ExpressCraft.ImageEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            _noImageDataText: null,
            _isURL: false,
            _image: null
        },
        props: {
            isUrl: {
                get: function () {
                    return this._isURL;
                },
                set: function (value) {
                    if (this._isURL !== value) {
                        this._isURL = value;
                        this.RefreshImage();
                    }
                }
            },
            Image: {
                get: function () {
                    return this._image;
                },
                set: function (value) {
                    if (Bridge.referenceEquals(this._image, value)) {
                        return;
                    }
                    this._image = value;
                    this.RefreshImage();
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "inputcontrol");
                this._noImageDataText = new ExpressCraft.Control.$ctor5("form-heading-title");
                this._noImageDataText.Content.innerHTML = "No image data";
                this._noImageDataText.Content.style.color = "black";
                this._noImageDataText.Content.style.visibility = "inherit";

                this.Content.appendChild(ExpressCraft.Control.op_Implicit(this._noImageDataText));
            }
        },
        methods: {
            RefreshImage: function () {
                if (!System.String.isNullOrWhiteSpace(this._image)) {
                    this._noImageDataText.Content.style.visibility = "hidden";
                } else {
                    this._image = "";
                    this._noImageDataText.Content.style.visibility = "inherit";
                }
                ExpressCraft.Helper.SetImage$1(this, this._image, this._isURL);
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutRowControl", {
        inherits: [ExpressCraft.LayoutRow],
        fields: {
            Height: 0,
            Control: null
        },
        ctors: {
            ctor: function (height, control) {
                this.$initialize();
                ExpressCraft.LayoutRow.ctor.call(this);
                this.Height = height;
                this.Label = "";
                this.Control = control;
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutRowGap", {
        inherits: [ExpressCraft.LayoutRow],
        fields: {
            Height: 0
        },
        ctors: {
            ctor: function (height, label) {
                if (label === void 0) { label = ""; }

                this.$initialize();
                ExpressCraft.LayoutRow.ctor.call(this);
                this.Height = height;
                this.Label = label;
            }
        }
    });

    Bridge.define("ExpressCraft.ProgressControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            position: 0,
            internalProgressControl: null,
            maximum: 0,
            Step: 0,
            DisableUpdate: false
        },
        props: {
            Maximum: {
                get: function () {
                    return this.maximum;
                },
                set: function (value) {
                    if (value < 1) {
                        value = 1;
                    }
                    if (value < this.position) {
                        this.position = value;
                    }
                    this.maximum = value;
                    if (!this.DisableUpdate) {
                        this.Update();
                    }
                }
            },
            Position: {
                get: function () {
                    return this.position;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    } else {
                        if (value > this.maximum) {
                            value = this.maximum;
                        }
                    }
                    this.position = value;
                    if (!this.DisableUpdate) {
                        this.Update();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.Step = 1;
                this.DisableUpdate = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "progressbar");
                this.internalProgressControl = ExpressCraft.Control.Div$1("progressbarbody");
            }
        },
        methods: {
            NextStep: function () {
                this.Position = (this.Position + this.Step) | 0;
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);

                this.Content.appendChild(this.internalProgressControl);

                this.Update();
            },
            Update: function () {
                if (this.DisableUpdate || this.internalProgressControl == null) {
                    return;
                }
                if (this.maximum === 0 || this.position === 0) {
                    this.internalProgressControl.style.width = "0%";
                } else {
                    var source = ((this.position / this.maximum) * 100.00) + '%';
                    this.internalProgressControl.style.width = System.String.concat("calc(", source, " - 2px)");
                }
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonButton", {
        inherits: [ExpressCraft.Control],
        fields: {
            _icon: null,
            _iconURL: null,
            _caption: null,
            BeginGroup: false,
            IsSmallCaption: false,
            OnItemClick: null,
            enabled: false,
            captionDiv: null,
            imageDiv: null,
            AfterItemClick: null
        },
        props: {
            Icon: {
                get: function () {
                    return this._icon;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._icon, value)) {
                        this._icon = value;
                        this.ProcessImage();
                    }
                }
            },
            IconURL: {
                get: function () {
                    return this._iconURL;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._iconURL, value)) {
                        this._iconURL = value;
                        this.ProcessImage();
                    }
                }
            },
            Caption: {
                get: function () {
                    return this._caption;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._caption, value)) {
                        this._caption = value;
                        this.ProcessCaption();
                    }
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.setEnabled(value);
                }
            }
        },
        ctors: {
            init: function () {
                this._icon = "";
                this._iconURL = "";
                this._caption = "";
                this.BeginGroup = false;
                this.IsSmallCaption = false;
                this.enabled = true;
            },
            ctor: function (caption, _isSmallCaption) {
                if (caption === void 0) { caption = ""; }
                if (_isSmallCaption === void 0) { _isSmallCaption = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, _isSmallCaption ? "ribbonbuttonsmall" : "ribbonbutton");
                this.Caption = caption;
                this.IsSmallCaption = _isSmallCaption;
            }
        },
        methods: {
            setEnabled: function (value) {
                this.ChangeState(value);
                if (value) {
                    if (this.imageDiv != null) {
                        this.imageDiv.classList.remove("disabled");
                    }
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.remove("disabled");
                    }
                } else {
                    if (this.imageDiv != null) {
                        this.imageDiv.classList.add("disabled");
                    }
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.add("disabled");
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;

                this.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.RibbonButton.f1);

                this.ProcessCaption();
                this.ProcessImage();

                this.setEnabled(this.enabled);
            },
            ProcessCaption: function () {
                if (this.captionDiv != null) {
                    this.captionDiv.remove();
                    this.captionDiv = null;
                }
                if (!System.String.isNullOrWhiteSpace(this.Caption)) {
                    this.captionDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallcaption" : "ribbonbuttoncaption");

                    this.captionDiv.innerHTML = this.Caption;

                    this.Content.appendChild(this.captionDiv);
                }
            },
            ProcessImage: function () {
                if (this.imageDiv == null) {
                    if (!System.String.isNullOrWhiteSpace(this.Icon)) {
                        this.imageDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallicon" : "ribbonbuttonicon");
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageString(this.Icon);
                    } else if (!System.String.isNullOrWhiteSpace(this.IconURL)) {
                        this.imageDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallicon" : "ribbonbuttonicon");
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    }
                    if (this.imageDiv != null) {
                        this.Content.appendChild(this.imageDiv);
                    }
                } else {
                    if (!System.String.isNullOrWhiteSpace(this.Icon)) {
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageString(this.Icon);
                    } else if (!System.String.isNullOrWhiteSpace(this.IconURL)) {
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    }
                }

                if (this.imageDiv != null) {
                    this.imageDiv.style.backgroundSize = "100% 100%";

                    if (this.captionDiv != null && this.IsSmallCaption) {
                        this.captionDiv.style.left = "28px";
                    }
                } else {
                    if (this.captionDiv != null && this.IsSmallCaption) {
                        this.captionDiv.style.left = "6px";
                    }
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.RibbonButton", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.RibbonButton, {
        f1: function (ev) {
            var wasEnabled = this.enabled;

            if (this.enabled && !Bridge.staticEquals(this.OnItemClick, null)) {
                this.OnItemClick(this);
            }
            if (wasEnabled && !Bridge.staticEquals(this.AfterItemClick, null)) {
                this.AfterItemClick(this);
            }

            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.RibbonControl", {
        inherits: [ExpressCraft.Control,ExpressCraft.IPages],
        fields: {
            IconURL: null,
            Type: 0,
            ApplicationIcon: null,
            OnSelectedPageChange: null,
            selectedindex: 0
        },
        props: {
            RibbonPages: null,
            SelectedIndex: {
                get: function () {
                    return this.selectedindex;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    if (this.selectedindex >= this.RibbonPages.Count) {
                        this.selectedindex = (this.RibbonPages.Count - 1) | 0;
                    }

                    if (this.selectedindex !== value) {
                        this.selectedindex = value;
                        if (!Bridge.staticEquals(this.OnSelectedPageChange, null)) {
                            this.OnSelectedPageChange(this.selectedindex, this.RibbonPages.getItem(this.selectedindex));
                        }
                    }
                    this.SetSelectedIndex(value);
                }
            }
        },
        alias: ["AddRibbonPages", "ExpressCraft$IPages$AddRibbonPages"],
        ctors: {
            init: function () {
                this.IconURL = "fav.ico";
                this.selectedindex = -1;
                this.RibbonPages = new (System.Collections.Generic.List$1(ExpressCraft.RibbonPage))();
            },
            ctor: function (type) {
                if (type === void 0) { type = 0; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, System.String.concat("ribboncontrol", (type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribboncontrol-compact")));
                this.Type = type;

                this.Content.oncontextmenu = $asm.$.ExpressCraft.RibbonControl.f1;
            }
        },
        methods: {
            AddRibbonPages: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonPages.addRange(pages);
                }
            },
            MenuClick: function () {
                if (ExpressCraft.Helper.NotDesktop) {
                }
            },
            SetSelectedIndex: function (index) {
                if (this.RibbonPages != null && this.RibbonPages.Count > 0) {
                    for (var i = 0; i < this.RibbonPages.Count; i = (i + 1) | 0) {
                        if (this.RibbonPages.getItem(i).RibbonHeader != null) {
                            this.RibbonPages.getItem(i).RibbonHeader.classList.remove("ribbonpageheader-hidden");
                            this.RibbonPages.getItem(i).RibbonHeader.classList.remove("ribbonpageheader-active");

                            if (i === index) {
                                this.RibbonPages.getItem(i).RibbonHeader.classList.add("ribbonpageheader-active");
                                this.RibbonPages.getItem(i).Content.style.visibility = "inherit";
                            } else {
                                this.RibbonPages.getItem(i).RibbonHeader.classList.add("ribbonpageheader-hidden");
                                this.RibbonPages.getItem(i).Content.style.visibility = "hidden";
                            }
                        }
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;
                if (this.Type === ExpressCraft.RibbonControl.RibbonType.Full) {
                    if (this.ApplicationIcon != null) {
                        ExpressCraft.Helper.Delete(this.ApplicationIcon);
                    }
                    this.ApplicationIcon = ExpressCraft.Control.Div$1("application-icon");
                    var appIconImage = ExpressCraft.Control.Div$1("fav-icon");
                    appIconImage.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    appIconImage.style.backgroundSize = "100% 100%";

                    this.ApplicationIcon.appendChild(appIconImage);

                    this.Content.appendChild(this.ApplicationIcon);
                }

                if (this.RibbonPages != null && this.RibbonPages.Count > 0) {
                    var width = 58;
                    for (var i = 0; i < this.RibbonPages.Count; i = (i + 1) | 0) {
                        if (this.Content.contains(ExpressCraft.Control.op_Implicit(this.RibbonPages.getItem(i)))) {
                            ExpressCraft.Helper.Delete(this.RibbonPages.getItem(i).Content);
                            ExpressCraft.Helper.Delete(this.RibbonPages.getItem(i).RibbonHeader);
                        }
                        this.RibbonPages.getItem(i).Render();

                        if (this.Type === ExpressCraft.RibbonControl.RibbonType.Compact) {
                            if (!System.String.contains(this.RibbonPages.getItem(i).Content.className,"ribbonpage-compact")) {
                                this.RibbonPages.getItem(i).Content.classList.add("ribbonpage-compact");
                            }
                        } else {
                            if (System.String.contains(this.RibbonPages.getItem(i).Content.className,"ribbonpage-compact")) {
                                this.RibbonPages.getItem(i).Content.classList.remove("ribbonpage-compact");
                            }
                        }

                        var index = { v : i };

                        if (i === this.selectedindex) {
                            this.RibbonPages.getItem(i).RibbonHeader = ExpressCraft.Control.Div$1(System.String.concat("ribbonpageheader ribbonpageheader-active", (this.Type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribbonpageheader-compact")));
                            this.RibbonPages.getItem(i).Content.style.visibility = "visible";
                        } else {
                            this.RibbonPages.getItem(i).RibbonHeader = ExpressCraft.Control.Div$1(System.String.concat("ribbonpageheader ribbonpageheader-hidden", (this.Type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribbonpageheader-compact")));
                            this.RibbonPages.getItem(i).Content.style.visibility = "hidden";
                        }

                        this.RibbonPages.getItem(i).RibbonHeader.onmousedown = (function ($me, index) {
                            return Bridge.fn.bind($me, function (ev) {
                                this.SelectedIndex = index.v;
                            });
                        })(this, index);
                        this.RibbonPages.getItem(i).RibbonHeader.ontouchstart = (function ($me, index) {
                            return Bridge.fn.bind($me, function (ev) {
                                this.SelectedIndex = index.v;
                            });
                        })(this, index);

                        this.RibbonPages.getItem(i).RibbonHeader.innerHTML = this.RibbonPages.getItem(i).Caption;

                        var inwidth = 24;

                        if (!System.String.isNullOrEmpty(this.RibbonPages.getItem(i).Caption)) {
                            inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.RibbonPages.getItem(i).Caption, ExpressCraft.Settings.DefaultFont))) | 0;
                        }

                        this.RibbonPages.getItem(i).RibbonHeader.style.left = width + "px";
                        this.RibbonPages.getItem(i).RibbonHeader.style.width = inwidth + "px";

                        this.Content.appendChild(this.RibbonPages.getItem(i).RibbonHeader);
                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.RibbonPages.getItem(i)));

                        width = (width + inwidth) | 0;
                    }
                }
                this.SelectedIndex = this.selectedindex;
            }
        }
    });

    Bridge.ns("ExpressCraft.RibbonControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.RibbonControl, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        }
    });

    Bridge.define("ExpressCraft.RibbonGroup", {
        inherits: [ExpressCraft.Control],
        fields: {
            enabled: false,
            captionDiv: null,
            riList: null
        },
        props: {
            Caption: null,
            Buttons: null,
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.setEnabled(value);
                }
            }
        },
        ctors: {
            init: function () {
                this.enabled = true;
            },
            ctor: function (_caption) {
                if (_caption === void 0) { _caption = ""; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbongroup");
                this.Caption = _caption;
                this.Buttons = new (System.Collections.Generic.List$1(ExpressCraft.RibbonButton))();
            },
            $ctor1: function (_caption, buttons) {
                if (buttons === void 0) { buttons = []; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbongroup");
                this.Caption = _caption;
                this.Buttons = new (System.Collections.Generic.List$1(ExpressCraft.RibbonButton))();
                if (buttons != null) {
                    this.Buttons.addRange(buttons);
                }
            }
        },
        methods: {
            setEnabled: function (value) {
                if (this.Buttons.Count > 0) {
                    for (var i = 0; i < this.Buttons.Count; i = (i + 1) | 0) {
                        if (!value) {
                            this.Buttons.getItem(i).setEnabled(value);
                        } else {
                            this.Buttons.getItem(i).setEnabled(this.Buttons.getItem(i).Enabled);
                        }
                    }
                }
                this.ChangeState(value);
                if (value) {
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.remove("disabled");
                    }
                } else {
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.add("disabled");
                    }
                }
            },
            CreateVerticalLine: function (height) {
                var htmlDiv = ExpressCraft.Control.Div$1("ribbonseperator");
                if (height !== 58) {
                    htmlDiv.style.height = height + "px";
                }

                return htmlDiv;
            },
            GenerateRList: function () {
                var ri = null;

                if (this.riList == null) {
                    this.riList = new (System.Collections.Generic.List$1(ExpressCraft.RibbonGroup.RenderInfo))();
                    for (var i = 0; i < this.Buttons.Count; i = (i + 1) | 0) {
                        if (ri == null) {
                            ri = new ExpressCraft.RibbonGroup.RenderInfo();
                            ri.FirstButton = this.Buttons.getItem(i);
                            ri.IsSmall = ri.FirstButton.IsSmallCaption;
                        } else {
                            if (ri.IsSmall !== this.Buttons.getItem(i).IsSmallCaption || this.Buttons.getItem(i).BeginGroup || !this.Buttons.getItem(i).IsSmallCaption || (ri.FirstButton != null && ri.SecondButton != null && ri.ThirdButton != null)) {
                                this.riList.add(ri);

                                ri = new ExpressCraft.RibbonGroup.RenderInfo();
                                ri.FirstButton = this.Buttons.getItem(i);
                                ri.IsSmall = this.Buttons.getItem(i).IsSmallCaption;
                                ri.BeginGroup = this.Buttons.getItem(i).BeginGroup;
                            } else {
                                if (ri.SecondButton == null) {
                                    ri.SecondButton = this.Buttons.getItem(i);
                                } else {
                                    ri.ThirdButton = this.Buttons.getItem(i);
                                }
                            }
                        }
                    }

                    if (ri != null) {
                        this.riList.add(ri);
                        ri = null;
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;

                this.GenerateRList();

                ExpressCraft.Helper.Empty(this.Content);

                var width = 0;

                for (var i = 0; i < this.riList.Count; i = (i + 1) | 0) {
                    var ri = this.riList.getItem(i);

                    if (ri.BeginGroup) {
                        width = (width + 3) | 0;
                        var vlbg = this.CreateVerticalLine(58);
                        vlbg.style.left = width + "px";

                        this.Content.appendChild(vlbg);
                    }

                    width = (width + 3) | 0;

                    if (ri.IsSmall) {
                        var MaxWidth;

                        if (ri.ThirdButton == null) {
                            if (ri.SecondButton == null) {
                                MaxWidth = Math.max(((((Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)) + 28) | 0) + 6) | 0), 64);

                                ri.FirstButton.Render();

                                ri.FirstButton.Content.style.left = width + "px";
                                ri.FirstButton.Content.style.width = MaxWidth + "px";

                                ri.FirstButton.Content.style.top = "26px";

                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                                // 1
                            } else {
                                MaxWidth = Math.max(((((Math.max(Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.SecondButton.Caption, ExpressCraft.Settings.DefaultFont))) + 28) | 0) + 6) | 0), 64);

                                ri.FirstButton.Render();
                                ri.SecondButton.Render();

                                ri.FirstButton.Content.style.left = width + "px";
                                ri.SecondButton.Content.style.left = width + "px";

                                ri.FirstButton.Content.style.top = (21) + "px";

                                ri.FirstButton.Content.style.width = MaxWidth + "px";
                                ri.SecondButton.Content.style.width = MaxWidth + "px";

                                ri.FirstButton.Content.style.top = "11px";
                                ri.SecondButton.Content.style.top = "41px";

                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.SecondButton));
                                // 2
                            }
                        } else {
                            MaxWidth = Math.max(((((Math.max(Math.max(Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.SecondButton.Caption, ExpressCraft.Settings.DefaultFont))), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.ThirdButton.Caption, ExpressCraft.Settings.DefaultFont))) + 28) | 0) + 6) | 0), 64);

                            ri.FirstButton.Render();
                            ri.SecondButton.Render();
                            ri.ThirdButton.Render();

                            ri.FirstButton.Content.style.left = width + "px";
                            ri.SecondButton.Content.style.left = width + "px";
                            ri.ThirdButton.Content.style.left = width + "px";

                            ri.FirstButton.Content.style.width = MaxWidth + "px";
                            ri.SecondButton.Content.style.width = MaxWidth + "px";
                            ri.ThirdButton.Content.style.width = MaxWidth + "px";

                            ri.FirstButton.Content.style.top = "3px";
                            ri.SecondButton.Content.style.top = "26px";
                            ri.ThirdButton.Content.style.top = "49px";
                            // 3

                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.SecondButton));
                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.ThirdButton));
                        }

                        width = (width + MaxWidth) | 0;
                    } else {
                        ri.FirstButton.Render();

                        ri.FirstButton.Content.style.left = width + "px";
                        var inwidth = 0;
                        if (System.String.contains(ri.FirstButton.Caption," ")) {
                            var strings = System.String.split(ri.FirstButton.Caption, [32].map(function(i) {{ return String.fromCharCode(i); }}));
                            var builder = new System.Text.StringBuilder();

                            var length = (Bridge.Int.div(ri.FirstButton.Caption.length, 2)) | 0;

                            for (var j = 0; j < strings.length; j = (j + 1) | 0) {
                                if (builder.getLength() > length) {
                                    inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(builder.toString(), ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                                    break;
                                }
                                if (builder.getLength() > 0) {
                                    builder.append(System.String.concat(" ", strings[System.Array.index(j, strings)]));
                                } else {
                                    builder.append(strings[System.Array.index(j, strings)]);
                                }
                            }
                            if (inwidth === 0) {
                                inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(builder.toString(), ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                            }
                        } else {
                            inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                        }

                        if (inwidth < 44) {
                            inwidth = 44;
                        }

                        ri.FirstButton.Content.style.width = inwidth + "px";

                        width = (width + inwidth) | 0;

                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                    }
                }

                var minWidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.Caption, ExpressCraft.Settings.DefaultFont)) + 20) | 0;

                if (width < minWidth) {
                    width = minWidth;
                }

                width = (width + 3) | 0;

                var vl = this.CreateVerticalLine(80);
                vl.style.left = ((width - 1) | 0) + "px";

                this.Content.appendChild(vl);

                this.Content.style.width = width + "px";

                if (!System.String.isNullOrWhiteSpace(this.Caption)) {
                    this.captionDiv = ExpressCraft.Control.Div$1("ribbongroupcaption");

                    this.captionDiv.innerHTML = this.Caption;
                    this.Content.appendChild(this.captionDiv);
                }

                this.setEnabled(this.enabled);
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonPage", {
        inherits: [ExpressCraft.Control],
        fields: {
            RibbonHeader: null
        },
        props: {
            Caption: null,
            RibbonGroups: null
        },
        ctors: {
            init: function () {
                this.RibbonGroups = new (System.Collections.Generic.List$1(ExpressCraft.RibbonGroup))();
            },
            ctor: function (_caption) {
                if (_caption === void 0) { _caption = ""; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbonpage");
                this.Caption = _caption;
            }
        },
        methods: {
            AddRibbonGroups: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonGroups.addRange(pages);
                }
            },
            Render: function () {
                this.HasRendered = true;
                if (this.RibbonGroups == null || this.RibbonGroups.Count === 0) {
                    return;
                }
                var width = 0;
                for (var i = 0; i < this.RibbonGroups.Count; i = (i + 1) | 0) {
                    this.RibbonGroups.getItem(i).Render();
                    this.RibbonGroups.getItem(i).Content.style.left = width + "px";
                    width = (width + (parseInt(this.RibbonGroups.getItem(i).Content.style.width))) | 0;
                    this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.RibbonGroups.getItem(i)));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.SimpleButton", {
        inherits: [ExpressCraft.Control],
        fields: {
            ItemClick: null,
            ParentForm: null,
            DialogResult: 0,
            _imageElement: null,
            _image: null,
            _useBase64Image: false,
            _imageRightAlign: false,
            _buttonImageSize: 0,
            enabled: false
        },
        props: {
            Image: {
                get: function () {
                    return this._image;
                },
                set: function (value) {
                    value = (System.String.concat(value, "")).trim();
                    if (!Bridge.referenceEquals(value, this._image)) {
                        this._image = value;
                        this._ProcessButtonImage();
                    }
                }
            },
            UseBase64Image: {
                get: function () {
                    return this._useBase64Image;
                },
                set: function (value) {
                    if (this._useBase64Image !== value) {
                        this._useBase64Image = value;
                        this._ProcessButtonImage();
                    }
                }
            },
            ImageRightAlign: {
                get: function () {
                    return this._imageRightAlign;
                },
                set: function (value) {
                    if (this._imageRightAlign !== value) {
                        this._imageRightAlign = value;
                        this._ProcessButtonImage();
                    }

                }
            },
            ButtonImageSize: {
                get: function () {
                    return this._buttonImageSize;
                },
                set: function (value) {
                    if (this._buttonImageSize !== value) {
                        this._buttonImageSize = value;
                        this._ProcessButtonImage();
                    }

                }
            },
            Text: {
                get: function () {
                    return this.Content.textContent;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this.Text, value)) {
                        this.Content.textContent = value;

                        if (this._imageElement != null) {
                            ExpressCraft.Helper.Delete(this._imageElement);
                            this._imageElement = null;
                        }
                        this._ProcessButtonImage();
                    }
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    if (this.enabled) {
                        this.Content.removeAttribute("disabled");
                    } else {
                        this.Content.setAttribute("disabled", System.Boolean.toString((!this.enabled)));
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.DialogResult = ExpressCraft.DialogResultEnum.None;
                this.enabled = true;
            },
            ctor: function (button, ac) {
                if (button === void 0) { button = 2; }
                if (ac === void 0) { ac = true; }

                this.$initialize();
                ExpressCraft.Control.$ctor2.call(this, "simplebutton", button, ac);
                this.Content.oncontextmenu = $asm.$.ExpressCraft.SimpleButton.f1;

                if (ac) {
                    this.Style.font = ExpressCraft.Settings.Font;
                }

                ExpressCraft.Helper.SetSize(this, "69px", "20px");

                this.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SimpleButton.f2);
                this.Content.ondblclick = $asm.$.ExpressCraft.SimpleButton.f3;
                this.Content.onmousedown = $asm.$.ExpressCraft.SimpleButton.f3;
                this.Content.onmouseup = $asm.$.ExpressCraft.SimpleButton.f3;
            }
        },
        methods: {
            _ProcessButtonImage: function () {
                if (System.String.isNullOrWhiteSpace(this._image)) {
                    if (this._imageElement != null) {
                        ExpressCraft.Helper.Delete(this._imageElement);
                        this._imageElement = null;
                    }
                } else {
                    if (this._imageElement == null) {
                        this._imageElement = new Image();
                    } else {
                        ExpressCraft.Helper.Delete(this._imageElement);
                    }
                    ExpressCraft.Helper.SetImage(this._imageElement, this._image, !this._useBase64Image, false);
                    var padding = this._buttonImageSize === 0 ? "16px" : ExpressCraft.Helper.ToPx(Bridge.box(this._buttonImageSize, System.Int32));

                    this._imageElement.style.height = padding;
                    this._imageElement.style.position = "absolute";
                    this._imageElement.style.top = "1px";

                    if (!this._imageRightAlign) {
                        this._imageElement.style.backgroundPosition = "left";
                        this._imageElement.style.paddingLeft = padding;
                        this._imageElement.style.paddingRight = "";

                        this._imageElement.style.left = "1px";

                        if (this.Content.lastChild == null) {
                            this.Content.appendChild(this._imageElement);
                        } else {
                            this.Content.insertBefore(this._imageElement, this.Content.lastChild);
                        }
                    } else {
                        this._imageElement.style.right = "1px";
                        this._imageElement.style.left = "";
                        this._imageElement.style.backgroundPosition = "right";
                        this._imageElement.style.paddingRight = padding;
                        this._imageElement.style.paddingLeft = "";

                        this.Content.appendChild(this._imageElement);
                    }
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.SimpleButton", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SimpleButton, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f2: function (ev) {
            if (this.enabled) {
                this.Content.blur();

                if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm != null && this.ParentForm.IsDialog()) {
                    this.ParentForm.DialogResult = this.DialogResult;
                }

                if (!Bridge.staticEquals(this.ItemClick, null)) {
                    this.ItemClick(this);
                }

                if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm != null && this.ParentForm.IsDialog()) {
                    this.ParentForm.Close();
                }
            }

            ev.stopPropagation();
            ev.stopImmediatePropagation();
        },
        f3: function (ev) {
            ev.stopPropagation();
            ev.stopImmediatePropagation();
        }
    });

    Bridge.define("ExpressCraft.SplitControlContainer", {
        inherits: [ExpressCraft.Control],
        fields: {
            Panel1: null,
            Panel2: null,
            Splitter: null,
            _prevClientRect: null,
            IsMouseDown: false,
            _mouseDownVector: null,
            _currentMouseDownVector: null,
            _startingSplitterPos: 0,
            _splitterPosition: 0,
            fixedSplitterPostion: 0,
            SplitterResizable: false,
            horizontal: false
        },
        props: {
            FixedSplitterPostion: {
                get: function () {
                    return this.fixedSplitterPostion;
                },
                set: function (value) {
                    this.fixedSplitterPostion = value;
                    this.RenderControls();
                }
            },
            SplitterPosition: {
                get: function () {
                    return this._splitterPosition;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    this._splitterPosition = value;
                    this.RenderControls();
                }
            },
            Horizontal: {
                get: function () {
                    return this.horizontal;
                },
                set: function (value) {
                    if (value !== this.horizontal) {
                        this.RenderControls();
                        this.horizontal = value;
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._mouseDownVector = new ExpressCraft.Vector2();
                this._currentMouseDownVector = new ExpressCraft.Vector2();
                this.IsMouseDown = false;
                this._splitterPosition = -1;
                this.fixedSplitterPostion = ExpressCraft.FixedSplitterPosition.Panel1;
                this.SplitterResizable = true;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "splitcontrol");
                var $t;
                this.Panel1 = ($t = new ExpressCraft.Control.$ctor1(), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                this.Panel2 = new ExpressCraft.Control.$ctor1();
                this.Panel1.Style.overflow = "auto";
                this.Panel2.Style.overflow = "auto";

                this.Splitter = new ExpressCraft.Control.$ctor1();

                this.Splitter.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f1);

                this.OnResize = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f2);

                this.Content.onmousemove = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f3);

                this.Content.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f4);

                ExpressCraft.Helper.AppendChildren(this, [this.Panel1, this.Splitter, this.Panel2]);
        }
    },
    methods: {
        Render: function () {
            ExpressCraft.Control.prototype.Render.call(this);

            this.RenderControls();
        },
        ResizeChildren: function () {
            if (this.LinkedForm != null && this.Content != null) {
                this.LinkedForm.ResizeChildren(this.Content);
            }
        },
        GetMaxSplitterSize: function () {
            var maxSize = (Bridge.Int.clip32((this.Horizontal ? this.Content.getBoundingClientRect().height : this.Content.getBoundingClientRect().width)) - 12) | 0;
            if (maxSize < 0) {
                maxSize = 0;
            }
            return maxSize;
        },
        RenderControls: function () {
            var sp = this.SplitterPosition;
            var maxSize = this.GetMaxSplitterSize();

            if (this._prevClientRect != null) {
                if (sp > maxSize) {
                    sp = maxSize;
                }
            }

            if (this.Horizontal) {
                ExpressCraft.Helper.ExchangeClass$1(this.Panel1, "splitvertical", "splithorizontal");
                ExpressCraft.Helper.ExchangeClass$1(this.Panel2, "splitvertical", "splithorizontal");
                ExpressCraft.Helper.ExchangeClass$1(this.Splitter, "splittervertical", "splitterhorizontal");

                this.Panel1.Width = "";
                this.Splitter.Width = "";
                this.Panel2.Width = "";

                if (this.fixedSplitterPostion !== ExpressCraft.FixedSplitterPosition.Panel2) {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(0, sp);

                    this.Panel1.Height = sp;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(0, ((sp + 12) | 0));
                    this.Panel2.Height = "(100% - " + (((sp + 12) | 0)) + "px)";
                    ;
                } else {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(0, "(100% - " + (sp) + "px)");

                    this.Panel1.Height = "(100% - " + sp + "px)";

                    this.Panel2.Height = (sp - 12) | 0;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(0, "(100% - " + (((sp - 12) | 0)) + "px)");
                }
            } else {
                ExpressCraft.Helper.ExchangeClass$1(this.Panel1, "splithorizontal", "splitvertical");
                ExpressCraft.Helper.ExchangeClass$1(this.Panel2, "splithorizontal", "splitvertical");
                ExpressCraft.Helper.ExchangeClass$1(this.Splitter, "splitterhorizontal", "splittervertical");

                this.Panel1.Height = "";
                this.Splitter.Height = "";
                this.Panel2.Height = "";

                if (this.fixedSplitterPostion !== ExpressCraft.FixedSplitterPosition.Panel2) {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(sp, 0);

                    this.Panel1.Width = sp;

                    this.Panel2.Width = "(100% - " + (((sp + 12) | 0)) + "px)";
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(((sp + 12) | 0), 0);
                } else {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + sp + "px)", 0);

                    this.Panel1.Width = "(100% - " + sp + "px)";

                    this.Panel2.Width = sp;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + (((sp + 12) | 0)) + "px)", 0);
                }
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.SplitControlContainer", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SplitControlContainer, {
        f1: function (ev) {
            if (!this.SplitterResizable) {
                return;
            }
            this.IsMouseDown = true;
            this._mouseDownVector = ExpressCraft.Helper.GetClientMouseLocation(ev);
            var maxSize = this.GetMaxSplitterSize();
            this._startingSplitterPos = this._splitterPosition > maxSize ? maxSize : this._splitterPosition;
            ev.stopImmediatePropagation();
        },
        f2: function (ev) {
            if (this.LinkedForm != null) {
                if (!this.LinkedForm.IsVisible()) {
                    return;
                }
            }
            var clientRec = this.Content.getBoundingClientRect();

            if (this._prevClientRect == null) {
                this._prevClientRect = clientRec;
            }

            if (this.fixedSplitterPostion === ExpressCraft.FixedSplitterPosition.None) {
                var V1 = 0;
                var V2 = 0;
                var dirty = false;

                if (this.Horizontal) {
                    if (clientRec.height !== this._prevClientRect.height) {
                        V1 = clientRec.height;
                        V2 = this._prevClientRect.height;
                        dirty = true;
                    }
                } else {
                    if (clientRec.width !== this._prevClientRect.width) {
                        V1 = clientRec.width;
                        V2 = this._prevClientRect.width;
                        dirty = true;
                    }
                }
                if (dirty) {
                    this.SplitterPosition = V1 === 0 || V2 === 0 ? 0 : Bridge.Int.clip32(this.SplitterPosition * (V1 / V2));
                }
            }

            this._prevClientRect = clientRec;

            this.RenderControls();

            this.ResizeChildren();
        },
        f3: function (ev) {
            if (this.IsMouseDown) {
                this._currentMouseDownVector = ExpressCraft.Helper.GetClientMouseLocation(ev);
                var x;
                var m = this.horizontal ? (((this._mouseDownVector.Yi - this._currentMouseDownVector.Yi) | 0)) : (((this._mouseDownVector.Xi - this._currentMouseDownVector.Xi) | 0));

                var y = this.GetMaxSplitterSize();
                if (((x = this.fixedSplitterPostion === ExpressCraft.FixedSplitterPosition.Panel2 ? ((this._startingSplitterPos + m) | 0) : ((this._startingSplitterPos - m) | 0))) > y) {
                    x = y;
                }
                this.SplitterPosition = x;
                this._currentMouseDownVector = this._mouseDownVector.$clone();

                this.ResizeChildren();
            }
        },
        f4: function (ev) {
            this.IsMouseDown = false;
            this.RenderControls();
        }
    });

    Bridge.define("ExpressCraft.SplitHideControlContainer", {
        inherits: [ExpressCraft.Control],
        fields: {
            Body: null,
            Slider: null,
            Panel: null,
            span: null,
            _slideWidth: 0,
            _sliderLocation: 0,
            _sliderVisible: false,
            refreshId: 0
        },
        props: {
            SlideWidth: {
                get: function () {
                    return this._slideWidth;
                },
                set: function (value) {
                    if (this._slideWidth !== value) {
                        this._slideWidth = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            },
            SliderLocation: {
                get: function () {
                    return this._sliderLocation;
                },
                set: function (value) {
                    if (this._sliderLocation !== value) {
                        this._sliderLocation = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            },
            SliderVisible: {
                get: function () {
                    return this._sliderVisible;
                },
                set: function (value) {
                    if (this._sliderVisible !== value) {
                        this._sliderVisible = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._sliderLocation = ExpressCraft.SliderLocation.Left;
                this._sliderVisible = false;
                this.refreshId = -1;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                this.Body = new ExpressCraft.Control.$ctor1();
                this.Slider = new ExpressCraft.Control.$ctor5("primary");
                this.Panel = new ExpressCraft.Control.$ctor1();
                this.span = ExpressCraft.Control.Span$1("form-heading-title");
                this.span.textContent = ">";

                this.span.style.fontWeight = "bold";
                this.span.style.color = "white";

                this.Slider.Content.appendChild(this.span);

                this.Slider.Content.onmouseenter = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f1);

                this.Slider.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f2);

                this.Slider.Style.transition = "width 1s, left 1s";
                this.Body.Style.transition = "left 1s, width 1s";
                this.Panel.Style.transition = "width 1s";

                this.Slider.Style.filter = "brightness(90%)";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.span.style.fontStyle = "36px";
                    this.Slider.Width = 65;
                } else {
                    this.span.style.fontStyle = "26px";
                    this.Slider.Width = 30;
                }

                this.Slider.Height = "100%";

                this.Slider.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f3);
                this._slideWidth = 250;
                ExpressCraft.Helper.AppendChildren$2(this.Content, [this.Panel, this.Slider, this.Body]);

                this.RenderControl();
            }
        },
        methods: {
            ResizeChildren: function () {
                if (this.LinkedForm != null && this.Content != null) {
                    if (this.refreshId !== -1) {
                        Bridge.global.clearTimeout(this.refreshId);
                    }
                    this.refreshId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f4), 1000);
                }
            },
            RenderControl: function () {
                var width;
                if (ExpressCraft.Helper.NotDesktop) {
                    width = 65;
                } else {
                    width = 30;
                }

                if (this.SliderLocation === ExpressCraft.SliderLocation.Left) {
                    if (this.SliderVisible) {
                        this.span.textContent = "<";
                        this.Panel.Width = this.SlideWidth;
                        this.Slider.Left = this.SlideWidth;
                        this.Body.Location = new ExpressCraft.Vector2.$ctor1(((width + this.SlideWidth) | 0), 0);
                        this.Body.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (((width + this.SlideWidth) | 0)) + "px)", "100%");
                    } else {
                        this.span.textContent = ">";
                        this.Slider.Left = 0;
                        this.Panel.Width = 0;
                        this.Body.Location = new ExpressCraft.Vector2.$ctor1(width, 0);
                        this.Body.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (width) + "px)", "100%");
                    }

                    this.Panel.Location = new ExpressCraft.Vector2.$ctor1(0, 0);
                    this.Panel.Height = "100%";
                } else {
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.SplitHideControlContainer", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SplitHideControlContainer, {
        f1: function (ev) {
            this.Slider.Style.filter = "brightness(110%)";
        },
        f2: function (ev) {
            this.Slider.Style.filter = "brightness(90%)";
        },
        f3: function (ev) {
            this.SliderVisible = !this.SliderVisible;
        },
        f4: function () {
            this.LinkedForm.ResizeChildren(this.Content);
            this.refreshId = -1;
        }
    });

    Bridge.define("ExpressCraft.TabControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            tabHeaders: null,
            tabHeaderContainer: null,
            showClosedButton: false,
            OnSelectedTabIndexChanged: null,
            selectedindex: 0
        },
        props: {
            TabPages: null,
            ShowClosedButton: {
                get: function () {
                    return this.showClosedButton;
                },
                set: function (value) {
                    if (value !== this.showClosedButton) {
                        this.showClosedButton = value;
                        this.ResizeTabHeaders();
                    }
                }
            },
            SelectedIndex: {
                get: function () {
                    return this.selectedindex;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    if (this.selectedindex !== value) {
                        this.selectedindex = value;
                        !Bridge.staticEquals(this.OnSelectedTabIndexChanged, null) ? this.OnSelectedTabIndexChanged(value) : null;
                    }

                    if (this.TabPages != null && this.TabPages.Count > 0) {
                        for (var i = 0; i < this.TabPages.Count; i = (i + 1) | 0) {
                            var page = { v : this.TabPages.getItem(i) };
                            this.TabControlActiveStyleChange(i, page);
                            this.TabPages.setItem(i, page.v);
                        }
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.selectedindex = 0;
                this.TabPages = new (System.Collections.Generic.List$1(ExpressCraft.TabControlPage))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tabcontrol");
                this.Content.oncontextmenu = $asm.$.ExpressCraft.TabControl.f1;
            }
        },
        methods: {
            AddPages: function (Pages) {
                if (Pages === void 0) { Pages = []; }
                this.TabPages.addRange(Pages);
                if (this.HasRendered) {
                    this.ResizeTabHeaders();
                }
            },
            TabControlActiveStyleChange: function (i, page) {
                var Isselected = i === this.selectedindex;

                var state = Isselected ? "active" : "hidden";
                if (page.v.TabPageHeader != null) {
                    page.v.TabPageHeader.classList.remove("tabcontrolpageheader-hidden");
                    page.v.TabPageHeader.classList.remove("tabcontrolpageheader-active");

                    page.v.TabPageHeader.classList.add(System.String.concat("tabcontrolpageheader-", state));
                } else {
                    page.v.TabPageHeader = ExpressCraft.Control.Div$1(System.String.concat("tabcontrolpageheader tabcontrolpageheader-", state));
                }
                if (ExpressCraft.Helper.NotDesktop) {
                    if (Isselected) {
                        page.v.TabPageHeader.style.lineHeight = "44px";
                    } else {
                        page.v.TabPageHeader.style.lineHeight = "46px";
                    }
                    page.v.TabPageHeader.style.height = "45px";
                }

                page.v.TabPageHeader.setAttribute("i", i.toString());
                if (this.showClosedButton) {
                    if (page.v.TabPageHeaderClose == null) {
                        page.v.TabPageHeaderClose = ExpressCraft.Control.Div$1("tabcontrolpageheader-closebutton");
                        page.v.TabPageHeaderClose.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f2);
                        page.v.TabPageHeader.appendChild(page.v.TabPageHeaderClose);
                    }
                } else {
                    if (page.v.TabPageHeaderClose != null) {
                        page.v.TabPageHeader.removeChild(page.v.TabPageHeaderClose);
                    }
                }

                page.v.Content.style.visibility = Isselected ? "inherit" : "collapse";
            },
            ResizeTabHeaders: function () {
                var $t, $t1;
                if (this.tabHeaders == null) {
                    this.tabHeaders = ($t = new ExpressCraft.Control.$ctor5("tabheader-container"), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.tabHeaders.Height = 47;
                        this.tabHeaderContainer = ($t = new ExpressCraft.Control.$ctor1(), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                        this.tabHeaderContainer.Width = "100%";
                        this.tabHeaderContainer.Height = 50;
                        ExpressCraft.Helper.AppendChild(this.tabHeaderContainer, this.tabHeaders);
                        this.tabHeaderContainer.Style.backgroundColor = "transparent";
                        this.tabHeaderContainer.Style.overflowX = "auto";

                        this.tabHeaders.Style.minWidth = "100%";

                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.tabHeaderContainer));
                    } else {
                        this.tabHeaders.Height = 23;
                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.tabHeaders));
                        this.tabHeaders.Width = "100%";
                    }
                }
                if (this.TabPages != null && this.TabPages.Count > 0) {
                    var width = 2;

                    for (var i = 0; i < this.TabPages.Count; i = (i + 1) | 0) {
                        var page = { v : this.TabPages.getItem(i) };

                        page.v.Render();

                        if (page.v.TabPageHeader == null) {
                            this.TabControlActiveStyleChange(i, page);
                            page.v.TabPageHeader.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f3);
                            page.v.TabPageHeader.ontouchstart = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f3);
                            this.tabHeaders.Content.appendChild(page.v.TabPageHeader);
                            this.Content.appendChild(page.v.Content);
                        }
                        page.v.TabPageHeader.setAttribute("i", i.toString());

                        var inwidth = 24;

                        if (!System.String.isNullOrEmpty(page.v.Caption)) {
                            if (ExpressCraft.Helper.NotDesktop) {
                                inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(page.v.Caption, "14px Tahoma"))) | 0;
                            } else {
                                inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(page.v.Caption, ExpressCraft.Settings.DefaultFont))) | 0;
                            }
                        }

                        if (this.showClosedButton) {
                            inwidth = (inwidth + 19) | 0;
                        }
                        var span = null;
                        $t = Bridge.getEnumerator(page.v.TabPageHeader.children);
                        try {
                            while ($t.moveNext()) {
                                var item = $t.Current;
                                if (Bridge.is(item, HTMLSpanElement)) {
                                    ((span = item)).innerHTML = page.v.Caption;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }if (span == null) {
                            span = ($t1 = document.createElement("span"), $t1.innerHTML = page.v.Caption, $t1);

                            page.v.TabPageHeader.appendChild(span);
                        }
                        if (ExpressCraft.Helper.NotDesktop) {
                            span.style.fontSize = "14px";
                        }

                        page.v.TabPageHeader.style.left = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                        page.v.TabPageHeader.style.width = ExpressCraft.Helper.ToPx(Bridge.box(inwidth, System.Int32));

                        //                height: calc(100% - 26px);
                        //top: 24px;

                        if (ExpressCraft.Helper.NotDesktop) {
                            page.v.Height = "(100% - 49px)";
                            page.v.Top = 49;
                        }

                        width = (width + (((inwidth + 2) | 0))) | 0;

                        this.TabPages.setItem(i, page.v);
                    }
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.tabHeaders.Width = width;
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;
                this.ResizeTabHeaders();
            }
        }
    });

    Bridge.ns("ExpressCraft.TabControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TabControl, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f2: function (ev) {
            var index = parseInt(ev.currentTarget.parentElement.getAttribute("i"));
            var cpage = this.TabPages.getItem(index);
            if (cpage.Content != null) {
                ExpressCraft.Helper.Empty(cpage.Content);
                ExpressCraft.Helper.Delete(cpage.Content);
            }
            if (cpage.TabPageHeader != null) {
                ExpressCraft.Helper.Empty(cpage.TabPageHeader);
                ExpressCraft.Helper.Delete(cpage.TabPageHeader);
            }
            this.TabPages.remove(cpage);
            if (index > ((this.TabPages.Count - 1) | 0)) {
                index = (this.TabPages.Count - 1) | 0;
            }

            ev.stopPropagation();

            this.SelectedIndex = index;

            this.ResizeTabHeaders();
        },
        f3: function (ev) {
            this.SelectedIndex = parseInt(ev.currentTarget.getAttribute("i"));
        }
    });

    Bridge.define("ExpressCraft.TabControlPage", {
        inherits: [ExpressCraft.Control],
        fields: {
            index: 0,
            TabPageHeader: null,
            TabPageHeaderClose: null
        },
        props: {
            Caption: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tabcontrolpage");
            }
        }
    });

    Bridge.define("ExpressCraft.TileControl", {
        inherits: [ExpressCraft.Control,ExpressCraft.IPages],
        fields: {
            _viewState: 0,
            prevOverFlow: null,
            ClearTimeOut: 0
        },
        props: {
            RibbonPages: null,
            ViewState: {
                get: function () {
                    return this._viewState;
                },
                set: function (value) {
                    if (this.ClearTimeOut !== -1) {
                        Bridge.global.clearTimeout(this.ClearTimeOut);
                        this.ClearTimeOut = -1;
                    }
                    if (value !== this._viewState) {
                        this._viewState = value;
                        if (this._viewState === ExpressCraft.TileViewState.Hidden) {
                            this.ClearTimeOut = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.TileControl.f1), 1000);
                            this.Location = new ExpressCraft.Vector2.$ctor1("(100% * -1)", 0);

                            if (this.Content.parentElement != null && this.prevOverFlow != null) {
                                this.Content.parentElement.style.overflow = this.prevOverFlow;
                            }
                        } else {
                            this.Location = new ExpressCraft.Vector2.$ctor1(0, 0);
                            this.Content.style.visibility = "inherit";
                            this.RenderTiles();
                            if (this.Content.parentElement != null) {
                                this.prevOverFlow = this.Content.parentElement.style.overflow;
                                this.Content.parentElement.style.overflow = "hidden";
                            }
                        }
                    }
                }
            }
        },
        alias: ["AddRibbonPages", "ExpressCraft$IPages$AddRibbonPages"],
        ctors: {
            init: function () {
                this._viewState = ExpressCraft.TileViewState.Hidden;
                this.ClearTimeOut = -1;
                this.RibbonPages = new (System.Collections.Generic.List$1(ExpressCraft.RibbonPage))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                this.Style.overflowY = "auto";
                this.Location = new ExpressCraft.Vector2.$ctor1("(100% * -1)", 0);
                this.Size = new ExpressCraft.Vector2.$ctor1("100%", "100%");

                this.Content.style.backgroundColor = "transparent";
                this.Content.style.visibility = "hidden";
                this.Content.style.transition = "left 1s ease";
            }
        },
        methods: {
            RenderTiles: function () {
                var $t, $t1, $t2;
                var x = 0;
                var y = 6;

                var doc = document.createDocumentFragment();
                var div = new ExpressCraft.Control.$ctor1();
                div.Width = "100%";
                ExpressCraft.Helper.SetLocation$2(div, 0, 0);
                div.Style.zIndex = "10";

                var div2 = new ExpressCraft.Control.$ctor5("primary");
                div2.Width = "100%";
                div2.Style.minHeight = "100%";
                ExpressCraft.Helper.SetLocation$2(div2, 0, 0);
                div2.Style.filter = "brightness(50%)";

                div2.Style.opacity = "0.9";
                div2.Style.zIndex = "9";

                $t = Bridge.getEnumerator(this.RibbonPages);
                try {
                    while ($t.moveNext()) {
                        var page = $t.Current;
                        if (!System.String.isNullOrWhiteSpace(page.Caption)) {
                            var llb = ExpressCraft.Control.Label(page.Caption, 6, y);
                            llb.style.fontSize = "14px";
                            llb.style.color = "white";
                            doc.appendChild(llb);
                            y = (y + 26) | 0;
                        }

                        $t1 = Bridge.getEnumerator(page.RibbonGroups);
                        try {
                            while ($t1.moveNext()) {
                                var group = $t1.Current;
                                $t2 = Bridge.getEnumerator(group.Buttons);
                                try {
                                    while ($t2.moveNext()) {
                                        var button = $t2.Current;
                                        ExpressCraft.Helper.ExchangeClass$1(button, "ribbonbuttonsmall", "ribbonbutton");
                                        button.Style.borderRadius = "4px";
                                        button.AfterItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TileControl.f2);
                                        if (button.Enabled) {
                                            ExpressCraft.Helper.ExchangeClass$1(button, "primary", "primary");
                                            button.Style.border = "0";
                                            button.Style.filter = "brightness(110%)";
                                        } else {
                                            ExpressCraft.Helper.ExchangeClass$1(button, "primary", "");
                                            button.Style.border = "1px";
                                            button.Style.filter = "";
                                        }
                                        button.Style.opacity = "1";
                                        button.Style.boxShadow = "0px 0px 10px -2px rgba(0,0,0,0.25)";
                                        button.IsSmallCaption = false;
                                        button.ProcessCaption();
                                        button.ProcessImage();
                                        button.Size = new ExpressCraft.Vector2.$ctor1("((100% - 24px) * 0.33)", 100);
                                        button.Location = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) * (" + (System.Decimal(x).mul(System.Decimal(0.33))) + ")) + (" + (Bridge.Int.mul(6, (x))) + "px) + 6px)", y);

                                        if (button.captionDiv != null) {
                                            if (button.Enabled) {
                                                button.captionDiv.style.color = "white";
                                            } else {
                                                button.captionDiv.style.color = "grey";
                                            }

                                            button.captionDiv.style.fontSize = "14px";
                                            button.captionDiv.style.top = "65px";
                                        }

                                        if (button.imageDiv != null) {
                                            ExpressCraft.Helper.ExchangeClass(button.imageDiv, "ribbonbuttonsmallicon", "ribbonbuttonicon");
                                            button.IconURL = System.String.replaceAll((System.String.concat(button.IconURL, "")), "x16x16", "x32x32");
                                            button.imageDiv.style.top = "27px";
                                            if (button.Enabled) {
                                                //  button.imageDiv.Style.Filter = "brightness(90%) grayscale(100%) contrast(60%) brightness(180%)";
                                            } else {
                                                //  button.imageDiv.Style.Filter = "";
                                            }
                                        }

                                        if (x === 2) {
                                            x = 0;
                                            y = (y + 106) | 0;
                                        } else {
                                            x = (x + 1) | 0;
                                        }
                                        button.Style.opacity = "1";
                                        doc.appendChild(ExpressCraft.Control.op_Implicit(button));
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (x !== 0) {
                            x = 0;
                            y = (y + 106) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                div.Height = y;
                div2.Height = y;

                ExpressCraft.Helper.Empty(this.Content);
                div.Content.appendChild(doc);

                div2.Content.onmousedown = $asm.$.ExpressCraft.TileControl.f3;

                this.Content.appendChild(ExpressCraft.Control.op_Implicit(div2));
                this.Content.appendChild(ExpressCraft.Control.op_Implicit(div));

                div.Content.click();
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
                this.RenderTiles();
            },
            AddRibbonPages: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonPages.addRange(pages);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.TileControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TileControl, {
        f1: function () {
            this.Content.style.visibility = "hidden";
        },
        f2: function (ev) {
            this.ViewState = ExpressCraft.TileViewState.Hidden;
        },
        f3: function (ev) {
            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.ToolTipControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            visible: false,
            _toolTip$1: null
        },
        ctors: {
            init: function () {
                this.visible = false;
            },
            ctor: function (toolTip) {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tool-tip");
                this._toolTip$1 = toolTip;
            }
        },
        methods: {
            Show: function (ev) {
                var $t;
                if (ExpressCraft.Helper.NotDesktop) {
                    return;
                }

                ExpressCraft.Helper.Empty(this.Content);

                if (this._toolTip$1 != null) {
                    if (!ExpressCraft.Helper.IsEmpty(this._toolTip$1.Heading)) {
                        this.Content.appendChild(($t = document.createElement("p"), $t.className = "tool-tip-heading", $t.innerHTML = System.String.replaceAll(ExpressCraft.Helper.HtmlEscape$1(this._toolTip$1.Heading), "\r\n", "<br>"), $t));
                    }
                    if (!ExpressCraft.Helper.IsEmpty(this._toolTip$1.Description)) {
                        this.Content.appendChild(($t = document.createElement("p"), $t.className = "tool-tip-body", $t.innerHTML = System.String.replaceAll(ExpressCraft.Helper.HtmlEscape$1(this._toolTip$1.Description), "\r\n", "<br>"), $t));
                    }
                }
                var mouse = ExpressCraft.Helper.GetClientMouseLocation(ev);

                this.Location = new ExpressCraft.Vector2.$ctor1(mouse.X, ((ExpressCraft.Helper.ToInt(mouse.Y) + 22) | 0));

                if (!this.visible) {
                    this.visible = true;
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
                    this.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
                    document.body.appendChild(ExpressCraft.Control.op_Implicit(this));
                }
            },
            Close: function () {
                if (this.visible) {
                    if (this.Content != null) {
                        $(this.Content).fadeOut(100, Bridge.fn.bind(this, $asm.$.ExpressCraft.ToolTipControl.f1));
                    }
                    this.visible = false;
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ToolTipControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ToolTipControl, {
        f1: function () {
            ExpressCraft.Helper.Delete(this.Content);
        }
    });

    Bridge.define("ExpressCraft.FormPopup", {
        inherits: [ExpressCraft.Form],
        statics: {
            methods: {
                GetPopupDefaultLocation: function (control, isControlChild) {
                    if (isControlChild === void 0) { isControlChild = false; }
                    if (ExpressCraft.Helper.NotDesktop) {
                        return new ExpressCraft.Vector2.$ctor1(0, 0);
                    }

                    if (isControlChild) {
                        var rec = control.Content.parentElement.getBoundingClientRect();
                        return new ExpressCraft.Vector2.$ctor1(rec.left, rec.top + rec.height);
                    } else {
                        var rec1 = control.Content.getBoundingClientRect();
                        return new ExpressCraft.Vector2.$ctor1(rec1.left, rec1.top + rec1.height);
                    }
                }
            }
        },
        fields: {
            PreviousScrollTop: 0,
            ParentContainer: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Heading.style.display = "none";
                ExpressCraft.Helper.SetLocation(this.Body, 0, 0);
                ExpressCraft.Helper.SetSize$1(this.Body, "100%", "100%");
                this.Content.classList.add("inputcontrol");
                this.Content.classList.remove("form-base");
                this.Content.style.boxShadow = "0 0 63px -17px rgba(0,0,0,0.75)";

                this.StartPosition = ExpressCraft.FormStartPosition.Manual;

                this.ShowClose = false;
                this.ShowMaximize = false;
                this.ShowMinimize = false;
                this.AllowMoveChange = false;
                this.AllowSizeChange = false;
            }
        },
        methods: {
            ShowPopup: function (location) {
                this.Location = location.$clone();
                this.ShowDialog();
            },
            MoveFormUp: function () {
                this.Location = new ExpressCraft.Vector2.$ctor1(this.Left, ExpressCraft.Helper.ToFloat(this.Top) - ExpressCraft.Helper.ToFloat(this.Height) - 20);
            },
            OnShowed: function () {
                ExpressCraft.Form.prototype.OnShowed.call(this);

                if (ExpressCraft.Helper.NotDesktop) {
                    this.AllowSizeChange = true;
                    this.WindowState = ExpressCraft.WindowStateType.Maximized;
                    this.AllowSizeChange = false;
                } else {
                    var rect = this.Content.getBoundingClientRect();

                    try {
                        if (rect.bottom > window.innerHeight || rect.bottom > document.documentElement.clientHeight) {
                            this.MoveFormUp();
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);
                    }
                }
            },
            OnClosed: function () {
                ExpressCraft.Form.prototype.OnClosed.call(this);
            }
        }
    });

    Bridge.define("ExpressCraft.ColorInput", {
        inherits: [ExpressCraft.TextInput],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInput.$ctor1.call(this, "color");
            }
        }
    });

    Bridge.define("ExpressCraft.ConsoleForm", {
        inherits: [ExpressCraft.Form],
        statics: {
            fields: {
                ConsoleVisible: false,
                _consoleForm: null,
                prevWindowState: 0,
                firstLoad: false,
                prevLocation: null,
                prevSize: null
            },
            ctors: {
                init: function () {
                    this.prevLocation = new ExpressCraft.Vector2();
                    this.prevSize = new ExpressCraft.Vector2();
                    this.ConsoleVisible = false;
                    this.prevWindowState = ExpressCraft.WindowStateType.Normal;
                    this.firstLoad = true;
                    this.prevSize = ExpressCraft.Settings.ConsoleDefaultSize.$clone();
                }
            },
            methods: {
                CheckConsoleState: function () {
                    if (!ExpressCraft.ConsoleForm.ConsoleVisible) {
                        ExpressCraft.ConsoleForm._consoleForm = new ExpressCraft.ConsoleForm();
                        ExpressCraft.ConsoleForm._consoleForm.Show(true);
                    }
                },
                Log: function (source, logType) {
                    if (logType === void 0) { logType = 0; }
                    ExpressCraft.ConsoleForm.CheckConsoleState();
                    ExpressCraft.ConsoleForm._consoleForm.InternalLog(source, logType);
                },
                Clear: function () {
                    ExpressCraft.ConsoleForm.CheckConsoleState();
                    ExpressCraft.ConsoleForm._consoleForm.InternalClear();
                }
            }
        },
        fields: {
            logContent: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.logContent = ExpressCraft.Control.Div$1("console-body");
                this.Body.appendChild(this.logContent);
                this.Body.style.background = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.Black.$clone());
                this.Body.style.overflowY = "scroll";

                this.Text = System.String.concat(document.title, " - Console");
                if (ExpressCraft.ConsoleForm.firstLoad) {
                    this.StartPosition = ExpressCraft.FormStartPosition.Center;
                    this.Size = ExpressCraft.ConsoleForm.prevSize.$clone();
                } else {
                    this.StartPosition = ExpressCraft.FormStartPosition.Manual;
                    this.Location = ExpressCraft.ConsoleForm.prevLocation.$clone();

                    if (ExpressCraft.ConsoleForm.prevWindowState === ExpressCraft.WindowStateType.Maximized) {
                        ExpressCraft.ConsoleForm.prevSize = ExpressCraft.Settings.ConsoleDefaultSize.$clone();
                    }

                    this.Size = ExpressCraft.ConsoleForm.prevSize.$clone();

                    if (ExpressCraft.ConsoleForm.prevWindowState === ExpressCraft.WindowStateType.Maximized) {
                        this.SetWindowState(ExpressCraft.ConsoleForm.prevWindowState);
                    }
                }
            }
        },
        methods: {
            InternalClear: function () {
                ExpressCraft.Helper.Empty(this.logContent);
            },
            InternalLog: function (source, logType) {
                var $t;
                if (logType === void 0) { logType = 0; }
                var para = ($t = document.createElement("p"), $t.className = "console-para", $t);
                switch (logType) {
                    case ExpressCraft.ConsoleLogType.Debug: 
                        para.style.color = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.ForestGreen.$clone());
                        break;
                    case ExpressCraft.ConsoleLogType.Error: 
                        para.style.color = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.Red.$clone());
                        break;
                }

                para.innerHTML = source;
                this.logContent.appendChild(para);
                if (this.logContent.children.length > 1000) {
                    this.logContent.removeChild(this.logContent.children[0]);
                }
                para.scrollIntoView(false);
            },
            OnGotFocus: function () {
                if (this.Content != null) {
                    this.Style.opacity = "1";
                }
                ExpressCraft.Form.prototype.OnGotFocus.call(this);
            },
            OnLostFocus: function () {
                if (this.Content != null) {
                    this.Style.opacity = "0.5";
                }
                ExpressCraft.Form.prototype.OnLostFocus.call(this);
            },
            OnShowed: function () {
                ExpressCraft.Form.prototype.OnShowed.call(this);
                ExpressCraft.ConsoleForm.ConsoleVisible = true;
                ExpressCraft.ConsoleForm.firstLoad = false;
            },
            OnClosing: function () {
                ExpressCraft.Form.prototype.OnClosing.call(this);

                ExpressCraft.ConsoleForm.prevSize = this.Size.$clone();
                ExpressCraft.ConsoleForm.prevLocation = this.Location.$clone();
                ExpressCraft.ConsoleForm.prevWindowState = this.WindowState;
            },
            OnClosed: function () {
                ExpressCraft.Form.prototype.OnClosed.call(this);
                ExpressCraft.ConsoleForm.ConsoleVisible = false;
            }
        }
    });

    Bridge.define("ExpressCraft.DialogForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            _buttonCollection: null,
            ButtonSection: null
        },
        ctors: {
            ctor: function (text) {
                if (text === void 0) { text = ""; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Text = text;
                this.Body.style.backgroundColor = "white";

                //           top:calc(100% - 70px);
                //width:100%;
                //height:70px;

                this.ButtonSection = new ExpressCraft.Control.$ctor5("dialogbuttonsection");

                if (ExpressCraft.Helper.NotDesktop) {
                    this.ButtonSection.Top = "(100% - 70px)";
                    this.ButtonSection.Size = new ExpressCraft.Vector2.$ctor1("100%", 70);
                }
            }
        },
        methods: {
            OnShowing: function () {
                this.Body.appendChild(ExpressCraft.Control.op_Implicit(this.ButtonSection));
                ExpressCraft.Form.prototype.OnShowing.call(this);
            }
        }
    });

    Bridge.define("ExpressCraft.TextInputDropDown", {
        inherits: [ExpressCraft.TextInput],
        fields: {
            DropDownButton: null,
            UsedEdit: null
        },
        ctors: {
            ctor: function (inputType) {
                if (inputType === void 0) { inputType = 19; }

                this.$initialize();
                ExpressCraft.TextInput.ctor.call(this, document.createElement("div"), true, false);
                var $t;
                var dropDownWidth = 17;

                if (ExpressCraft.Helper.NotDesktop) {
                    dropDownWidth = 45;
                }

                this.Type = inputType;

                this.UsedEdit = ($t = new ExpressCraft.TextInput.$ctor1(inputType), $t.DisableFocusPopup = true, $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (((dropDownWidth - 1) | 0)) + "px)", "100%"), $t);
                this.UsedEdit.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInputDropDown.f1);

                this._displayFormat = this.UsedEdit.DisplayFormat;

                this.DropDownButton = ($t = new ExpressCraft.SimpleButton(), $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + dropDownWidth + "px)", 0), $t.Size = new ExpressCraft.Vector2.$ctor1(dropDownWidth, "100%"), $t);
                this.DropDownButton.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInputDropDown.f2);

                this.Style.border = "0";

                this.DropDownButton.ClassList.add("dropdown");

                if (ExpressCraft.Helper.NotDesktop) {
                    this.DropDownButton.Style.backgroundPosition = "right 16px center";
                }

                ExpressCraft.Helper.AppendChildren$2(this.Content, [this.UsedEdit, this.DropDownButton]);
        }
    },
    methods: {
        GetDisplayFormat: function () {
            return this.UsedEdit.GetDisplayFormat();
        },
        GetDropdownWidth: function () {
            return this.Content.getBoundingClientRect().width;
        },
        SetDisplayFormat: function (value) {
            this.UsedEdit.SetDisplayFormat(value);
        },
        OnFocus: function () {
            this.UsedEdit.Focus();
        },
        GetInput: function () {
            return this.UsedEdit.GetInput();
        },
        GetValue: function () {
            return this.UsedEdit.Text;
        },
        SetValue: function (value) {
            this.UsedEdit.Text = value;
        },
        OnDropDownClicked: function (mouseEvent) { }
    }
    });

    Bridge.ns("ExpressCraft.TextInputDropDown", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextInputDropDown, {
        f1: function (sender) {
            if (!Bridge.staticEquals(this.OnTextChanged, null)) {
                this.OnTextChanged(sender);
            }
        },
        f2: function (ev) {
            if (!this.Readonly && this.Enabled) {
                this.OnDropDownClicked(ev);
            }
        }
    });

    Bridge.define("ExpressCraft.MemoInput", {
        inherits: [ExpressCraft.TextInput],
        fields: {
            PreSize: null,
            PrePreSize: null,
            PreZIndex$1: null,
            _hasGotFocus: false
        },
        props: {
            Rows: {
                get: function () {
                    return this.Content.rows;
                },
                set: function (value) {
                    this.Content.rows = value;
                }
            },
            Cols: {
                get: function () {
                    return this.Content.cols;
                },
                set: function (value) {
                    this.Content.cols = value;
                }
            },
            DisableResize: false
        },
        ctors: {
            init: function () {
                this.PreSize = new ExpressCraft.Vector2();
                this.PrePreSize = new ExpressCraft.Vector2();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInput.ctor.call(this, document.createElement("textarea"));
                this.Style.resize = "none";

                this.OnGotFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.MemoInput.f1);
                this.OnLostFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.MemoInput.f2);
            }
        },
        methods: {
            GetValue: function () {
                return this.Content.value;
            },
            SetValue: function (value) {
                this.Content.value = value;
            }
        }
    });

    Bridge.ns("ExpressCraft.MemoInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.MemoInput, {
        f1: function (memo) {
            if (this.DisableResize) {
                return;
            }

            this.Style.resize = "both";
            this.PrePreSize = this.Size.$clone();

            if (this._hasGotFocus) {
                this.Size = this.PreSize.$clone();
            } else {
                this._hasGotFocus = true;
                this.PreSize = this.Size.$clone();
            }
        },
        f2: function (memo) {
            this.Style.resize = "none";
            this.PreSize = this.Size.$clone();
            this.Size = this.PrePreSize.$clone();
        }
    });

    Bridge.define("ExpressCraft.Network.NetworkProgressForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            progressControl: null,
            buttonCancel: null
        },
        ctors: {
            ctor: function (_text) {
                if (_text === void 0) { _text = "Loading..."; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                var $t;
                this.Text = _text;
                this.Width = 400;
                this.Height = 200;

                this.progressControl = new ExpressCraft.ProgressControl();
                ExpressCraft.Helper.SetBounds(this.progressControl, 50, 50, "(100% - 100px)", "23px");

                this.buttonCancel = ($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t);
                ExpressCraft.Helper.SetLocation$1(this.buttonCancel, "(100% - 78px)", "(100% - 26px)");
                this.buttonCancel.Content.tabIndex = 0;

                ExpressCraft.Helper.AppendChildren$2(this.Body, [this.buttonCancel, this.progressControl]);

                this.AllowSizeChange = false;
        }
    }
    });

    Bridge.define("ExpressCraft.PDFPreviewForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            Source: null,
            PDFSourceType: 0,
            PdfViewer: null
        },
        ctors: {
            ctor: function (source, pdfSourceType) {
                if (pdfSourceType === void 0) { pdfSourceType = 0; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Source = source;
                this.PDFSourceType = pdfSourceType;

                this.PdfViewer = document.createElement(Bridge.Browser.isIE ? "iframe" : pdfSourceType === ExpressCraft.PdfSourceType.Url ? "embed" : "object");
                this.PdfViewer.className = "control";

                ExpressCraft.Helper.SetBounds$1(this.PdfViewer, 0, 0, "100%", "100%");
                this.PdfViewer.setAttribute("alt", "pdf");
                this.PdfViewer.setAttribute("type", "application/pdf");
                //object

                this.Body.appendChild(this.PdfViewer);
            }
        },
        methods: {
            OnShowing: function () {
                ExpressCraft.Form.prototype.OnShowing.call(this);
                //data
                if (this.PDFSourceType === ExpressCraft.PdfSourceType.Url) {
                    this.PdfViewer.setAttribute("Src", this.Source);
                } else {
                    this.PdfViewer.setAttribute("data", ExpressCraft.Control.GetPdfString(this.Source));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.SimpleDialogButton", {
        inherits: [ExpressCraft.SimpleButton],
        ctors: {
            ctor: function (parentForm, dialogResult) {
                if (dialogResult === void 0) { dialogResult = 0; }

                this.$initialize();
                ExpressCraft.SimpleButton.ctor.call(this);
                this.ParentForm = parentForm;
                this.DialogResult = dialogResult;

                ExpressCraft.Helper.SetSize(this, 75, 23);
            }
        }
    });

    Bridge.define("ExpressCraft.CalcForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            InputControl: null,
            CalControl: null,
            ClickedClose: false
        },
        ctors: {
            init: function () {
                this.ClickedClose = false;
            },
            ctor: function (inputControl) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                if (inputControl.Content.parentElement != null && inputControl.Content.parentElement.parentElement != null && inputControl.Content.parentElement.parentElement.parentElement != null) {
                    this.PreviousScrollTop = inputControl.Content.parentElement.parentElement.parentElement.scrollTop;
                    this.ParentContainer = inputControl.Content.parentElement.parentElement.parentElement;
                }

                this.InputControl = inputControl;
                this.CalControl = new ExpressCraft.CalculatorControl(this.InputControl.GetNumberValue(), true);
                ExpressCraft.Helper.SetBoundsFull(this.CalControl);
                this.CalControl.OnClose = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalcForm.f1);

                this.CalControl.OnEqual = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalcForm.f2);

                this.AppendChild$1(this.CalControl);

                this.Size = new ExpressCraft.Vector2.$ctor1(182, 157);
            }
        },
        methods: {
            OnClosed: function () {
                ExpressCraft.FormPopup.prototype.OnClosed.call(this);
                this.InputControl.ValidateData();
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.InputControl.Focus();
                } else {
                    this.InputControl.Scroll(this.PreviousScrollTop, this.ParentContainer);
                }
            },
            OnClosing: function () {
                ExpressCraft.FormPopup.prototype.OnClosing.call(this);

                if (!this.ClickedClose) {
                    this.CalControl.DontRefresh = true;
                    this.CalControl.AddOperator(this.CalControl.btnEq);
                }
            },
            OnShowed: function () {
                ExpressCraft.FormPopup.prototype.OnShowed.call(this);
                if (this.InputControl == null) {
                    this.Close();
                }

                this.CalControl.btnEq.Focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.CalcForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.CalcForm, {
        f1: function () {
            this.ClickedClose = true;
            this.Close();
        },
        f2: function (value) {
            this.InputControl.Text = value.toString();
        }
    });

    Bridge.define("ExpressCraft.DataRowEditForm", {
        inherits: [ExpressCraft.DialogForm],
        fields: {
            LiveData: false,
            GridView: null,
            DataRow: null,
            Panel: null,
            prevData: null
        },
        ctors: {
            ctor: function (_dataRow, _gridView, _liveData) {
                if (_liveData === void 0) { _liveData = true; }

                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this);
                this.prevData = System.Array.init(_dataRow.ParentTable.ColumnCount, null, System.Object);

                for (var i = 0; i < _dataRow.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    this.prevData[System.Array.index(i, this.prevData)] = _dataRow.getItem(i);
                }

                this.DataRow = _dataRow;
                this.GridView = _gridView;
                this.LiveData = _liveData;

                this.Text = "Row Edit Form";
                this.Width = "400px"; // 25px - 25px 350px width;
                this.Height = "600px";
                this.Body.style.overflowY = "auto";

                this.Panel = ExpressCraft.Control.Div();
                this.Panel.style.overflowY = "auto";
                ExpressCraft.Helper.SetBounds$1(this.Panel, "0", "0", "100%", "(100% - 60px)");
                this.Body.style.backgroundColor = "white";

                this._buttonCollection = Bridge.fn.bind(this, function (_o3) {
                        var $t;
                        _o3.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", "(100% - 35px)"), $t.ItemClick = Bridge.fn.bind(this, function (ev) {
                            for (var i1 = 0; i1 < this.DataRow.ParentTable.ColumnCount; i1 = (i1 + 1) | 0) {
                                _dataRow.setItem(i1, this.prevData[System.Array.index(i1, this.prevData)]);
                            }

                            this.GridView.RenderGrid();
                        }), $t));
                        _o3.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "OK", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", "(100% - 35px)"), $t));
                        return _o3;
                    })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                this.Body.appendChild(this.Panel);

                this.AllowSizeChange = false;
            }
        },
        methods: {
            OnClosed: function () {
                this.GridView.DataSource.EndDataUpdate();

                ExpressCraft.DialogForm.prototype.OnClosed.call(this);
            },
            OnShowed: function () {
                ExpressCraft.DialogForm.prototype.OnShowed.call(this);

                if (this.DataRow == null) {
                    this.DialogResult = ExpressCraft.DialogResultEnum.Cancel;
                    this.Close();
                } else {
                    this.GridView.DataSource.BeginDataUpdate();

                    this.GenerateForm();
                }
            },
            GenerateForm: function () {
                ExpressCraft.Helper.Empty(this.Panel);
                var length = this.GridView.ColumnCount();

                var col = 0;
                var height = 25;

                var defaultHeight = 54;
                var defaultHeight2X = Bridge.Int.mul(defaultHeight, 3);
                var incrementHeight = defaultHeight;

                var eachWidth = 113;

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    incrementHeight = defaultHeight;
                    var grCol = this.GridView.GetColumn(i);

                    if (!grCol.AllowEdit) {
                        continue;
                    }

                    var dtCol = grCol.Column;

                    var dtIndex = { v : grCol.GetDataColumnIndex() };

                    if (Bridge.referenceEquals(grCol.Column.FieldName.toLowerCase(), "cntr")) {
                        grCol.ReadOnly = true;
                    }

                    switch (dtCol.DataType) {
                        case ExpressCraft.DataType.DateTime: 
                            var lbldate = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputDate = { v : new ExpressCraft.TextInput.$ctor1("date") };
                            ExpressCraft.Helper.SetBounds(inputDate.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputDate.v.SetDate(System.Convert.toString(this.DataRow.getItem(dtIndex.v)));
                            inputDate.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputDate.v.OnTextChanged = (function ($me, dtIndex, inputDate) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        this.DataRow.setItem(dtIndex.v, inputDate.v.GetDate());
                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, dtIndex, inputDate);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lbldate, ExpressCraft.Control.op_Implicit(inputDate.v)]);
                            break;
                        case ExpressCraft.DataType.Integer: 
                        case ExpressCraft.DataType.Long: 
                        case ExpressCraft.DataType.Float: 
                        case ExpressCraft.DataType.Double: 
                        case ExpressCraft.DataType.Decimal: 
                        case ExpressCraft.DataType.Bool: 
                        case ExpressCraft.DataType.Byte: 
                        case ExpressCraft.DataType.Short: 
                            var lblnmb = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputNum = { };
                            if (Bridge.is(grCol.CellDisplay, ExpressCraft.GridViewCellDisplayCheckBox)) {
                                inputNum.v = new ExpressCraft.TextInput.$ctor1("checkbox");
                                ExpressCraft.Helper.SetChecked$1(inputNum.v, this.DataRow.getItem(dtIndex.v));
                            } else {
                                inputNum.v = new ExpressCraft.TextInput.$ctor1("number");
                                inputNum.v.Text = System.Convert.toString(this.DataRow.getItem(dtIndex.v));
                            }
                            ExpressCraft.Helper.SetBounds(inputNum.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputNum.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputNum.v.OnTextChanged = (function ($me, inputNum, dtIndex) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        if (inputNum.v.Type === "checkbox") {
                                            this.DataRow.setItem(dtIndex.v, Bridge.box(ExpressCraft.Helper.IsTrue(inputNum.v.Text) === 1, System.Boolean, System.Boolean.toString));
                                        } else {
                                            this.DataRow.setItem(dtIndex.v, inputNum.v.Text);
                                        }
                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, inputNum, dtIndex);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lblnmb, ExpressCraft.Control.op_Implicit(inputNum.v)]);
                            break;
                        default: 
                        case ExpressCraft.DataType.Object: 
                        case ExpressCraft.DataType.String: 
                            var lblstr = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputstr = { v : new ExpressCraft.TextInput.$ctor1("text") };
                            ExpressCraft.Helper.SetBounds(inputstr.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputstr.v.Text = System.Convert.toString(this.DataRow.getItem(dtIndex.v));
                            inputstr.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputstr.v.OnTextChanged = (function ($me, dtIndex, inputstr) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        this.DataRow.setItem(dtIndex.v, inputstr.v.Text);

                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, dtIndex, inputstr);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lblstr, ExpressCraft.Control.op_Implicit(inputstr.v)]);
                            //if(obj.Length > 100)
                            //{
                            //	incrementHeight = defaultHeight2X;
                            //	col = 2;
                            //}
                            //else
                            //{
                            //}
                            break;
                    }
                    if (col === 2) {
                        height = (height + (((incrementHeight + 3) | 0))) | 0;
                        col = 0;
                    } else {
                        col = (col + 1) | 0;
                    }
                }
                // Add Accept Changes
            }
        }
    });

    Bridge.define("ExpressCraft.DateForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            InputControl: null,
            DateControl: null,
            ClickedClose: false
        },
        ctors: {
            init: function () {
                this.ClickedClose = false;
            },
            ctor: function (inputControl) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                if (inputControl.Content.parentElement != null && inputControl.Content.parentElement.parentElement != null && inputControl.Content.parentElement.parentElement.parentElement != null) {
                    this.PreviousScrollTop = inputControl.Content.parentElement.parentElement.parentElement.scrollTop;
                    this.ParentContainer = inputControl.Content.parentElement.parentElement.parentElement;
                }

                this.Size = new ExpressCraft.Vector2.$ctor1(232, 247);

                this.InputControl = inputControl;
                this.DateControl = new ExpressCraft.DateControl(inputControl.GetDateTime());
                ExpressCraft.Helper.SetBoundsFull(this.DateControl);

                this.DateControl.OnDateChanged = function (date) {
                    if (Bridge.equals(date, System.DateTime.getMinValue())) {
                        inputControl.SetDate("");
                    } else {
                        inputControl.SetDate(System.String.format(System.String.concat("{0:", inputControl.DisplayFormat, "}"), Bridge.box(date, System.DateTime, System.DateTime.format)));
                    }
                };

                this.DateControl.OnRequestToClose = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateForm.f1);

                this.Content.onkeydown = Bridge.fn.cacheBind(this.DateControl, this.DateControl.BlockTabEvent);

                this.AppendChild$1(this.DateControl);
            }
        },
        methods: {
            OnClosed: function () {
                ExpressCraft.FormPopup.prototype.OnClosed.call(this);
                this.InputControl.ValidateData();
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.InputControl.Focus();
                } else {
                    this.InputControl.Scroll(this.PreviousScrollTop, this.ParentContainer);
                }
            },
            OnShowed: function () {
                ExpressCraft.FormPopup.prototype.OnShowed.call(this);
                if (this.InputControl == null) {
                    this.Close();
                }

                this.DateControl.btnToday.Focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.DateForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.DateForm, {
        f1: function () {
            this.Close();
        }
    });

    Bridge.define("ExpressCraft.DateInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "date");
            }
        },
        methods: {
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    (new ExpressCraft.DateForm(this.UsedEdit)).ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogBase", {
        inherits: [ExpressCraft.DialogForm],
        props: {
            QuestionSize: 0,
            Wrapper: null,
            QuestionDiv: null,
            AnswerDiv: null,
            ImageDiv: null
        },
        ctors: {
            ctor: function (title, width, question) {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this, title);
                this.Width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                this.Wrapper = ExpressCraft.Control.Div();
                this.QuestionDiv = ExpressCraft.Control.Div();
                this.AnswerDiv = ExpressCraft.Control.Div();
                this._buttonCollection = Bridge.fn.bind(this, $asm.$.ExpressCraft.InputDialogBase.f1)(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());

                this.Wrapper.style.overflowY = "hidden";
                ExpressCraft.Helper.SetBounds$1(this.Wrapper, "0px", "0px", "100%", "(100% - 60px)");
                this.QuestionDiv.style.position = "relative";
                this.QuestionDiv.style.height = "auto";
                this.QuestionDiv.style.marginLeft = "10px";
                this.QuestionDiv.style.marginRight = "10px";
                this.QuestionDiv.style.marginTop = "10px";
                this.AnswerDiv.style.position = "relative";
                this.AnswerDiv.style.height = "auto";
                ExpressCraft.Helper.SetLocation$1(this._buttonCollection.getItem(0), "(100% - 170px)", "(100% - 35px)");
                ExpressCraft.Helper.SetLocation$1(this._buttonCollection.getItem(1), "(100% - 85px)", "(100% - 35px)");

                var tb = new ExpressCraft.TextBlock(question, ((width - 25) | 0));
                tb.ComputeString();

                if (!tb.ElelemtsOverMax) {
                    width = (((Bridge.Int.clip32(tb.MaxCalculatedWidth) + 65) | 0) + 37) | 0;
                    if (width < ExpressCraft.Settings.MessageFormMinimumWidthInPx) {
                        width = ExpressCraft.Settings.MessageFormMinimumWidthInPx;
                    }
                }
                if (tb.ComputedHeight > ExpressCraft.Settings.MessageFormTextMaximumHeightInPx) {
                    tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMaximumHeightInPx;
                }
                if (tb.ComputedHeight < ExpressCraft.Settings.MessageFormTextMinimumHeightInPx) {
                    tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMinimumHeightInPx;
                }

                this.QuestionDiv.innerHTML = question;
                this.QuestionSize = System.Convert.toInt32(Bridge.box(tb.ComputedHeight, System.Single, System.Single.format, System.Single.getHashCode));
            }
        },
        methods: {
            Create: function (height) {
                this.Wrapper.appendChild(this.QuestionDiv);
                this.Wrapper.appendChild(document.createElement("br"));
                this.Wrapper.appendChild(this.AnswerDiv);
                this.Body.appendChild(this.Wrapper);

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                this.Height = ExpressCraft.Helper.ToPx(Bridge.box(height, System.Int32));
                this.AllowSizeChange = false;
            }
        }
    });

    Bridge.ns("ExpressCraft.InputDialogBase", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.InputDialogBase, {
        f1: function (_o1) {
            var $t;
            _o1.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "Accept", $t));
            _o1.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t));
            return _o1;
        }
    });

    Bridge.define("ExpressCraft.MessageBoxForm", {
        inherits: [ExpressCraft.DialogForm],
        statics: {
            fields: {
                snd: null
            },
            methods: {
                Beep: function () {
                    if (!ExpressCraft.Settings.MessageFormBeep) {
                        return;
                    }
                    if (ExpressCraft.MessageBoxForm.snd == null) {
                        ExpressCraft.MessageBoxForm.snd = new Audio(ExpressCraft.ResourceManager.GetResourceString("beepSound"));
                    }
                    ExpressCraft.MessageBoxForm.snd.play();
                }
            }
        },
        fields: {
            _prompt: null,
            _buttons: 0
        },
        ctors: {
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                           prompt    The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}    ui        The UI settings to be applied to the form
             * @return  {void}
             */
            ctor: function (prompt, ui) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, ExpressCraft.MessageBoxButtons.Auto, System.Enum.toString(ExpressCraft.MessageBoxLayout, ui));
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                           prompt    The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}    ui        The UI settings to be applied to the form
             * @param   {string}                           title     The title of the message box
             * @return  {void}
             */
            $ctor3: function (prompt, ui, title) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, ExpressCraft.MessageBoxButtons.Auto, title);
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                            prompt     The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}     ui         The UI settings to be applied to the form
             * @param   {ExpressCraft.MessageBoxButtons}    buttons    The Type of button to be displayed with this message
             * @return  {void}
             */
            $ctor1: function (prompt, ui, buttons) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, buttons, System.Enum.toString(ExpressCraft.MessageBoxLayout, ui));
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                            prompt     The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}     ui         The UI settings  to be applied to the form
             * @param   {ExpressCraft.MessageBoxButtons}    buttons    The Type of button to be displayed with this message
             * @param   {string}                            title      The title of the message box
             * @return  {void}
             */
            $ctor2: function (prompt, ui, buttons, title) {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this, title);
                var section = ExpressCraft.Control.Div();
                var pic = ExpressCraft.Control.Div$1("image32");
                var textContent = ExpressCraft.Control.Div$1("messag-box-content");
                this._prompt = prompt;
                this._buttons = buttons;

                switch (ui) {
                    case ExpressCraft.MessageBoxLayout.Exclamation: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.Ok;
                        }
                        pic.classList.add("imagewarning");
                        break;
                    case ExpressCraft.MessageBoxLayout.Information: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.Ok;
                        }
                        pic.classList.add("imageinfo");
                        break;
                    case ExpressCraft.MessageBoxLayout.Question: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.YesNo;
                        }
                        pic.classList.add("imageindex");
                        break;
                    case ExpressCraft.MessageBoxLayout.Error: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.AbortSendCancel;
                        }
                        pic.classList.add("imageerror");
                        break;
                    default: 
                        throw new System.ArgumentOutOfRangeException("ui", null, null, Bridge.box(ui, ExpressCraft.MessageBoxLayout, System.Enum.toStringFn(ExpressCraft.MessageBoxLayout)));
                }
                var heightCalc = ExpressCraft.Helper.NotDesktop ? "(100% - 60px)" : "(100% - 35px)";
                switch (this._buttons) {
                    case ExpressCraft.MessageBoxButtons.Ok: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o4) {
                                var $t;
                                _o4.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "Ok", $t.Location = new ExpressCraft.Vector2.$ctor1("(50% - 37.5px)", heightCalc), $t));
                                return _o4;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.YesNo: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o5) {
                                var $t;
                                _o5.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.No), $t.Text = "No", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o5.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Yes), $t.Text = "Yes", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t));
                                return _o5;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.YesNoCancel: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o6) {
                                var $t;
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.No), $t.Text = "No", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t));
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Yes), $t.Text = "Yes", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 255px)", heightCalc), $t));
                                return _o6;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.AbortSendCancel: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o7) {
                                var $t;
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Send), $t.Text = "Send", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.MessageBoxForm.f1), $t));
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Abort), $t.Text = "Abort", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 255px)", heightCalc), $t.ItemClick = $asm.$.ExpressCraft.MessageBoxForm.f2, $t));
                                return _o7;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    default: 
                        throw new System.ArgumentOutOfRangeException();
                }
                var tb = null;

                var width = 480;

                if (!ExpressCraft.Helper.NotDesktop) {
                    tb = new ExpressCraft.TextBlock(prompt, 455);
                    tb.ComputeString();
                    if (this._buttonCollection.Count > 2) {
                        if (width < 320) {
                            width = 320;
                        }
                    }
                    if (!tb.ElelemtsOverMax) {
                        width = (((Bridge.Int.clip32(tb.MaxCalculatedWidth) + 65) | 0) + 37) | 0;
                        if (width < ExpressCraft.Settings.MessageFormMinimumWidthInPx) {
                            width = ExpressCraft.Settings.MessageFormMinimumWidthInPx;
                        }
                    }
                } else {
                    var count = this._buttonCollection.Count;
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        var but = this._buttonCollection.getItem(i);
                        but.Height = 45;
                        but.Style.borderRadius = "4px";
                        but.Style.fontSize = "14px";
                        if (but.DialogResult === ExpressCraft.DialogResultEnum.OK || but.DialogResult === ExpressCraft.DialogResultEnum.Yes) {
                            but.ClassList.add("primary");
                            but.Style.color = "white";
                            but.Style.border = "0";
                        }
                    }
                }

                textContent.innerHTML = prompt;

                section.style.overflowY = "auto";
                section.style.height = "100%";
                section.style.maxHeight = ExpressCraft.Helper.ToPx(Bridge.box(ExpressCraft.Settings.MessageFormTextMaximumHeightInPx, System.Int32));
                section.appendChild(textContent);
                section.style.top = "32px";
                section.style.width = "90%";

                ExpressCraft.Helper.AppendChildren$1(this.Body, [pic, section]);

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());
                if (ExpressCraft.Helper.NotDesktop) {
                    section.style.textAlign = "center";
                    section.style.lineHeight = "100%";

                    this.WindowState = ExpressCraft.WindowStateType.Maximized;
                    this.Heading.style.display = "none";
                    ExpressCraft.Helper.SetLocation(this.Body, 0, 0);
                    ExpressCraft.Helper.SetSize$1(this.Body, "100%", "100%");
                    this.StartPosition = ExpressCraft.FormStartPosition.Manual;
                    this.AllowSizeChange = false;
                    this.AllowMoveChange = false;

                    this.ShowMaximize = false;
                    this.ShowMinimize = false;
                    this.ShowClose = false;

                    textContent.style.display = "inline-block";
                    textContent.style.fontSize = "14px";
                    textContent.style.verticalAlign = "middle";
                    textContent.style.lineHeight = "normal";
                } else {
                    if (tb.ComputedHeight > ExpressCraft.Settings.MessageFormTextMaximumHeightInPx) {
                        tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMaximumHeightInPx;
                    }
                    if (tb.ComputedHeight < ExpressCraft.Settings.MessageFormTextMinimumHeightInPx) {
                        tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMinimumHeightInPx;
                    }

                    this.Height = System.Single.format(tb.ComputedHeight + 77 + 29 + 32) + "px";
                    this.Width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                }

                this.AllowSizeChange = false;
            }
        },
        methods: {
            OnShowed: function () {
                ExpressCraft.MessageBoxForm.Beep();

                ExpressCraft.DialogForm.prototype.OnShowed.call(this);
                this._buttonCollection.getItem(0).Content.focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.MessageBoxForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.MessageBoxForm, {
        f1: function (ev) {
            if (!Bridge.staticEquals(ExpressCraft.Settings.OnSendError, null)) {
                ExpressCraft.Settings.OnSendError(this._prompt);
            }
        },
        f2: function (ev) {
            var pre = ExpressCraft.Settings.AllowCloseWithoutQuestion;

            ExpressCraft.Settings.AllowCloseWithoutQuestion = false;
            ExpressCraft.Application.Close();
            ExpressCraft.Settings.AllowCloseWithoutQuestion = pre;
        }
    });

    Bridge.define("ExpressCraft.NumberInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "number");
                this.UsedEdit.SetAttribute("step", "any");
            }
        },
        methods: {
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    var calcEdit = new ExpressCraft.CalcForm(this.UsedEdit);
                    calcEdit.ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                    calcEdit.OnFormClosed = Bridge.fn.bind(this, $asm.$.ExpressCraft.NumberInput.f1);
                }

            }
        }
    });

    Bridge.ns("ExpressCraft.NumberInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.NumberInput, {
        f1: function () {
            this.ValidateData();
        }
    });

    Bridge.define("ExpressCraft.SearchInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        fields: {
            OnSearch: null
        },
        props: {
            EditValue: null,
            DisplayMember: null,
            ValueMember: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "text");
                this.UsedEdit.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchInput.f1);
                this.UsedEdit.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchInput.f2);
            }
        },
        methods: {
            SetValues: function (editValue, text) {
                this.Text = text;
                this.EditValue = this.EditValue;
            },
            ClearOnOpen: function () {
                return false;
            },
            OnRequestSearch: function (searchValue, grid) {
                if (!Bridge.staticEquals(this.OnSearch, null)) {
                    this.OnSearch(searchValue, grid);
                }
            },
            SearchOnLoad: function () {
                return false;
            },
            OnAcceptResult: function (value) {
                if (value == null) {
                    this.EditValue = null;
                    this.Text = "";
                } else {
                    if (!Bridge.referenceEquals(this.ValueMember, "")) {
                        this.EditValue = value.GetValue$1(this.ValueMember);
                    }
                    if (this.DisplayMember != null) {
                        this.Text = (System.String.concat(value.GetValue$1(this.DisplayMember), ""));
                    }
                }
            },
            OnRequestNew: function (grid) { },
            OnClosed: function (value) { },
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    (new ExpressCraft.SearchLookupForm(this)).ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.SearchInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SearchInput, {
        f1: function (obj, ev) {
            if (ev.keyCode === 13 || ev.keyCode === 40) {
                this.OnDropDownClicked(new MouseEvent("onmousedown"));
            }
        },
        f2: function (ev) {
            this.OnDropDownClicked(new MouseEvent("onmousedown"));
        }
    });

    Bridge.define("ExpressCraft.SearchLookupForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            SearchInput: null,
            FocusedRow: null,
            View: null,
            SearchEdit: null,
            btnSearch: null,
            btnClose: null,
            btnNew: null,
            btnUse: null,
            btnClear: null
        },
        ctors: {
            ctor: function (searchInput) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                var $t;
                if (searchInput.Content.parentElement != null && searchInput.Content.parentElement.parentElement != null) {
                    this.PreviousScrollTop = searchInput.Content.parentElement.parentElement.scrollTop;
                    this.ParentContainer = searchInput.Content.parentElement.parentElement;
                }
                var x = searchInput.Content.getBoundingClientRect();

                this.MinHeight = 100;
                this.MinWidth = 150;

                var wid = searchInput.GetDropdownWidth();
                if (wid < 150) {
                    wid = 150;
                }

                this.Size = new ExpressCraft.Vector2.$ctor1(wid, 250);

                this.AllowSizeChange = true;

                this.SearchInput = searchInput;

                var frag = document.createDocumentFragment();

                ExpressCraft.Helper.AppendChildren$2(frag, [(this.SearchEdit = ($t = new ExpressCraft.TextInput.$ctor1(), $t.Text = searchInput.ClearOnOpen() ? "" : this.SearchInput.Text, $t.OnFocusDontSelectAll = true, $t.DisableFocusPopup = true, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 4, "(100% - 68px)", 20), $t.ToolTip = new ExpressCraft.ToolTip.$ctor1("Help:", "[Enter] to Search, [CTRL] + [Enter] to Search and Use, [ESC] to close"), $t)), (this.btnSearch = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Search", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 65px)", 4, 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f1), $t)), (this.View = ($t = new ExpressCraft.GridView(true, true), $t.AllowMultiSelection = false, $t.UseEditForm = false, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 28, "(100% - 10px)", "(100% - 60px)"), $t)), (this.btnClose = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, "(100% - 25px)", 20, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f2), $t)), (this.btnNew = ($t = new ExpressCraft.SimpleButton(), $t.Text = "New", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 65px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f3), $t)), (this.btnUse = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Use", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 132px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f4), $t)), (this.btnClear = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Clear", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 199px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f5), $t))]);

                this.btnClose.Style.color = "red";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.SearchEdit.Style.fontSize = "14px";
                    this.SearchEdit.Height = "45px";

                    this.btnSearch.Style.fontSize = "14px";
                    this.btnSearch.Height = 45;

                    this.View.Top = 55;
                    this.View.Height = "(100% - 112px)";

                    this.btnClear.Style.fontSize = "14px";
                    this.btnClear.Height = 45;
                    this.btnClear.Top = "(100% - 51px)";

                    this.btnUse.Style.fontSize = "14px";
                    this.btnUse.Height = 45;
                    this.btnUse.Top = "(100% - 51px)";

                    this.btnNew.Style.fontSize = "14px";
                    this.btnNew.Height = 45;
                    this.btnNew.Top = "(100% - 51px)";

                    this.btnClose.Style.fontSize = "26px";
                    this.btnClose.Style.fontWeight = "bold";
                    this.btnClose.Height = 45;
                    this.btnClose.Width = 61;
                    this.btnClose.Top = "(100% - 51px)";
                }

                this.SearchEdit.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f6);

                this.View.OnFocusedRowChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f7);

                this.View.OnRowDoubleClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f8);

                this.Body.appendChild(frag);

                this.SearchEdit.OnGotFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f9);

                this.LinkchildToForm(this.View);
        }
    },
    methods: {
        OnShowed: function () {
            ExpressCraft.FormPopup.prototype.OnShowed.call(this);

            this.SearchEdit.Focus();

            if (this.SearchInput.SearchOnLoad()) {
                this.btnSearch.Content.click();
            }
        },
        OnClosed: function () {
            ExpressCraft.FormPopup.prototype.OnClosed.call(this);

            this.SearchInput.OnClosed(this.FocusedRow);
            this.SearchInput.ValidateData();
            if (!ExpressCraft.Helper.NotDesktop) {
                this.SearchInput.GetInput().focus();
            } else {
                this.SearchInput.Scroll(this.PreviousScrollTop, this.ParentContainer);
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.SearchLookupForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SearchLookupForm, {
        f1: function (s) {
            this.SearchInput.OnRequestSearch(this.SearchEdit.Text, this.View);
        },
        f2: function (s) {
            this.Close();
        },
        f3: function (s) {
            this.SearchInput.OnRequestNew(this.View);
        },
        f4: function (s) {
            if (this.View.FocusedDataHandle === -1 && this.View.RowCount() > 0) {
                this.View.FocusedDataHandle = 0;
            }
            if (this.FocusedRow != null) {
                this.SearchInput.OnAcceptResult(this.FocusedRow);
                this.Close();
            }
        },
        f5: function (s) {
            this.FocusedRow = null;
            this.SearchInput.OnAcceptResult(this.FocusedRow);
            this.Close();
        },
        f6: function (obj, ev) {
            if (ev.keyCode === 9) {
                this.Close();
                ev.preventDefault();
            } else if (ev.keyCode === 13) {
                this.SearchInput.OnRequestSearch(this.SearchEdit.Text, this.View);
                if (ev.ctrlKey) {
                    this.btnUse.Content.click();
                }
                ev.preventDefault();
            } else if (ev.keyCode === 27) {
                this.FocusedRow = null;
                this.Close();
                ev.preventDefault();
            }
        },
        f7: function (row, col) {
            if (this.View.FocusedDataHandle > -1) {
                this.FocusedRow = this.View.DataSource.getItem(this.View.GetDataSourceRow(this.View.FocusedDataHandle));
            } else {
                this.FocusedRow = null;
            }
            this.SearchInput.OnAcceptResult(this.FocusedRow);
        },
        f8: function (row) {
            if (this.View.FocusedDataHandle > -1) {
                this.FocusedRow = this.View.DataSource.getItem(this.View.GetDataSourceRow(this.View.FocusedDataHandle));
            } else {
                this.FocusedRow = null;
            }
            this.SearchInput.OnAcceptResult(this.FocusedRow);
            this.Close();
        },
        f9: function (obj) {
            this.SearchEdit.GetInput().selectionStart = this.SearchEdit.Text.length;
        }
    });

    Bridge.define("ExpressCraft.TextForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            ReadInput: null,
            EditInput: null,
            btnDone: null
        },
        ctors: {
            ctor: function (input) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                var $t;
                if (input.Content.parentElement != null && input.Content.parentElement.parentElement != null) {
                    this.PreviousScrollTop = input.Content.parentElement.parentElement.scrollTop;
                    this.ParentContainer = input.Content.parentElement.parentElement;
                }

                this.WindowState = ExpressCraft.WindowStateType.Maximized;

                this.ReadInput = input;

                if (Bridge.is(this.ReadInput, ExpressCraft.MemoInput)) {
                    this.EditInput = new ExpressCraft.MemoInput();
                } else {
                    this.EditInput = ($t = new ExpressCraft.TextInput.$ctor1(input.Type), $t.DisplayFormat = this.ReadInput.DisplayFormat, $t);
                    this.EditInput.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f1);
                }

                this.EditInput.Text = input.Text;
                this.EditInput.Style.fontSize = "14px";

                this.EditInput.DisableFocusPopup = true;
                this.EditInput.Size = new ExpressCraft.Vector2.$ctor1("(100% - 112px)", "100%");
                this.EditInput.Location = new ExpressCraft.Vector2.$ctor1(0, 0);

                this.btnDone = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 106px)", "(50% - 22.5px)", 100, 45), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f2), $t);

                this.btnDone.Style.borderRadius = "4px";
                this.btnDone.ClassList.add("primary");
                this.btnDone.Style.borderWidth = "0";

                this.btnDone.Text = "&times;";
                this.btnDone.Style.fontSize = "26px";
                this.btnDone.Style.color = "white";
                this.btnDone.Style.fontWeight = "bold";

                this.EditInput.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f3);

                this.AppendChildren$1([this.EditInput, this.btnDone]);
        }
    },
    methods: {
        OnShowed: function () {
            ExpressCraft.FormPopup.prototype.OnShowed.call(this);

            var dataP = this.ReadInput.GetAttribute("data-placeholder");
            if (!System.String.isNullOrWhiteSpace(dataP)) {
                this.EditInput.SetAttribute("placeholder", dataP);
            } else {
                if (!System.String.isNullOrWhiteSpace(this.ReadInput.GetAttribute("placeholder"))) {
                    this.EditInput.SetAttribute("placeholder", this.ReadInput.GetAttribute("placeholder"));
                }
            }

            this.EditInput.Focus();
        },
        OnClosed: function () {
            this.ReadInput.Scroll(this.PreviousScrollTop, this.ParentContainer);
            this.ReadInput.ValidateData();
            ExpressCraft.FormPopup.prototype.OnClosed.call(this);
        }
    }
    });

    Bridge.ns("ExpressCraft.TextForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextForm, {
        f1: function (s, ev) {
            if (ev.keyCode === 13) {
                this.btnDone.Content.click();
            }
        },
        f2: function (sender) {
            this.Close();
            if (!Bridge.referenceEquals(this.EditInput.GetEditValue(), this.ReadInput.GetEditValue())) {
                this.ReadInput.Text = this.EditInput.Text;

                if (this.ReadInput.IsSubmit) {
                    var e = $.Event("keypress");
                    e.which = 13;
                    e.keyCode = 13;
                    $(this.ReadInput.Content).trigger(Bridge.cast(e, jQuery.Event));
                } else if (this.ReadInput.GoNext) {
                    var x = document.querySelectorAll("input, textarea, button");
                    var tabPlus1 = (this.ReadInput.Content.tabIndex + 1) | 0;
                    for (var i = 0; i < x.length; i = (i + 1) | 0) {
                        if (x[i].tabIndex === tabPlus1) {
                            ExpressCraft.Helper.FocusElement(x[i]);
                            break;
                        }
                    }
                }
            }
        },
        f3: function (sender) {
            if (Bridge.referenceEquals(this.EditInput.GetEditValue(), this.ReadInput.GetEditValue())) {
                this.btnDone.Text = "&times;";
                this.btnDone.Style.fontSize = "26px";
                this.btnDone.Style.fontWeight = "bold";
            } else {
                this.btnDone.Text = this.ReadInput.IsSubmit ? "Submit" : this.ReadInput.GoNext ? "Next" : "Done";
                this.btnDone.Style.fontSize = "14px";
                this.btnDone.Style.fontWeight = "";
            }
        }
    });

    Bridge.define("ExpressCraft.ThemeForm", {
        inherits: [ExpressCraft.DialogForm],
        statics: {
            fields: {
                _themeVisible: false,
                themeForm: null
            },
            methods: {
                ShowThemeForm: function () {
                    if (!ExpressCraft.ThemeForm._themeVisible) {
                        ExpressCraft.ThemeForm.themeForm = new ExpressCraft.ThemeForm();
                        ExpressCraft.ThemeForm.themeForm.Show(true);

                        ExpressCraft.ThemeForm._themeVisible = true;
                    }
                }
            }
        },
        fields: {
            currentTheme: null,
            prevTheme: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this);
                var $t, $t1;
                this.prevTheme = ExpressCraft.Settings.ActiveTheme;
                this.currentTheme = Newtonsoft.Json.JsonConvert.DeserializeObject(Newtonsoft.Json.JsonConvert.SerializeObject(this.prevTheme, ($t = new Newtonsoft.Json.JsonSerializerSettings(), $t.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Objects, $t)), ExpressCraft.Theme, ($t = new Newtonsoft.Json.JsonSerializerSettings(), $t.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Objects, $t));

                ExpressCraft.Settings.ActiveTheme = this.currentTheme;

                this._buttonCollection = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f3)(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                var length = this.currentTheme.Colors.length;
                var y = 20;
                var x = 20;

                var Panel = ExpressCraft.Control.Div();
                Panel.style.overflowY = "auto";
                ExpressCraft.Helper.SetBounds$1(Panel, 0, 0, "100%", "(100% - 60px)");

                this.Body.style.backgroundColor = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.White.$clone());

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    Panel.appendChild(ExpressCraft.Control.op_Implicit(ExpressCraft.Helper.SetBounds(($t = new ExpressCraft.ColorInput(), $t.Text = ($t1 = this.currentTheme.Colors)[System.Array.index(i, $t1)].toString(), $t.ToolTip = new ExpressCraft.ToolTip.$ctor1("This is a heading test.", "This is a description test."), $t.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f4), $t).SetAttribute("i", i), x, y, 95, 20)));

                    x = (x + 100) | 0;

                    if (i % 2 !== 0) {
                        y = (y + 30) | 0;
                        x = 20;
                    }
                }

                this.Body.appendChild(Panel);

                this.Size = new ExpressCraft.Vector2.$ctor1(250, 300);
                this.Text = "Theme Form Editor";

                this.AllowMoveChange = true;
                this.AllowSizeChange = false;

                this.ShowClose = false;
                this.ShowMaximize = false;
                this.ShowMinimize = false;
        }
    },
    methods: {
        OnClosed: function () {
            ExpressCraft.DialogForm.prototype.OnClosed.call(this);
            ExpressCraft.ThemeForm._themeVisible = false;
        },
        OnGotFocus: function () {
            if (this.Content != null) {
                this.Style.opacity = "1";
            }
            ExpressCraft.DialogForm.prototype.OnGotFocus.call(this);
        },
        OnLostFocus: function () {
            if (this.Content != null) {
                this.Style.opacity = "0.5";
            }
            ExpressCraft.DialogForm.prototype.OnLostFocus.call(this);
        }
    }
    });

    Bridge.ns("ExpressCraft.ThemeForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ThemeForm, {
        f1: function (ev) {
            ExpressCraft.Settings.ActiveTheme = this.prevTheme;
            this.Close();
        },
        f2: function (ev) {
            ExpressCraft.Settings.ApplyActiveTheme();
            this.Close();
        },
        f3: function (_o2) {
            var $t1;
            _o2.add(($t1 = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t1.Text = "Cancel", $t1.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", "(100% - 35px)"), $t1.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f1), $t1));
            _o2.add(($t1 = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t1.Text = "OK", $t1.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", "(100% - 35px)"), $t1.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f2), $t1));
            return _o2;
        },
        f4: function (tx) {
            var $t2;
            var index = tx.GetAttributei("i");
            ($t2 = this.currentTheme.Colors)[System.Array.index(index, $t2)] = tx.Text;

            ExpressCraft.Settings.ApplyActiveTheme();
        }
    });

    Bridge.define("ExpressCraft.InputDialogCheckbox", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: false
        },
        ctors: {
            /**
             * Creates a Question Dialog with a checkbox
                 The Result Property contains a boolean value of the checkbox state
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogCheckbox
             * @memberof ExpressCraft.InputDialogCheckbox
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogCheckbox.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a checkbox
                 The Result Property contains a boolean value of the checkbox state
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogCheckbox
             * @memberof ExpressCraft.InputDialogCheckbox
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "checkbox");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "40px");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.checked;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 40) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogColour", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a colour selector
                 The Result Property contains the HexCode for the selected colour
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogColour
             * @memberof ExpressCraft.InputDialogColour
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogColour.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a colour selector
                 The Result Property contains the HexCode for the selected colour
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogColour
             * @memberof ExpressCraft.InputDialogColour
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "color");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "40px");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 40) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogDate", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDate
             * @memberof ExpressCraft.InputDialogDate
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogDate.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDate
             * @memberof ExpressCraft.InputDialogDate
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "date");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogDateTimeLocal", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            init: function () {
                this.Result = System.DateTime.getDefaultValue();
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDateTimeLocal
             * @memberof ExpressCraft.InputDialogDateTimeLocal
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogDateTimeLocal.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDateTimeLocal
             * @memberof ExpressCraft.InputDialogDateTimeLocal
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                this.Result = System.DateTime.getNow();
                var input = ExpressCraft.Control.Input("inputcontrol", "datetime-local");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = System.DateTime.parseExact(input.value, "yyyy-MM-ddTHH:mm", System.Globalization.CultureInfo.invariantCulture);
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogEmail", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with an email input
                 The Result Property contains the Entered email address
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogEmail
             * @memberof ExpressCraft.InputDialogEmail
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogEmail.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with an email input
                 The Result Property contains the Entered email
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogEmail
             * @memberof ExpressCraft.InputDialogEmail
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "email");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    //todo css for email input not showing up
                    //todo could always validate email here
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogMonth", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Month input
                 The Result Property contains the Entered Month
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogMonth
             * @memberof ExpressCraft.InputDialogMonth
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogMonth.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Month input
                 The Result Property contains the Entered Month
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogMonth
             * @memberof ExpressCraft.InputDialogMonth
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "month");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogNumber", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: 0
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Number Selector
                 The Result Property contains the selected value
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogNumber
             * @memberof ExpressCraft.InputDialogNumber
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogNumber.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Number Selector
                 The Result Property contains the selected value
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogNumber
             * @memberof ExpressCraft.InputDialogNumber
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "number");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.valueAsNumber;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogText", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Text input
                 The Result Property contains the Entered Text
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogText
             * @memberof ExpressCraft.InputDialogText
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogText.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Text input
                 The Result Property contains the Entered Text
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogText
             * @memberof ExpressCraft.InputDialogText
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "text");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogWeek", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Week input
                 The Result Property contains the Entered week
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogWeek
             * @memberof ExpressCraft.InputDialogWeek
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogWeek.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Week input
                 The Result Property contains the Entered Week
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogWeek
             * @memberof ExpressCraft.InputDialogWeek
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "week");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJFeHByZXNzQ3JhZnQuanMiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbImNvbnRyb2xzL0NvbnRyb2wuY3MiLCJBcHAuY3MiLCJ1dGlscy9BcHBsaWNhdGlvbi5jcyIsInV0aWxzL0JhcmNvZGVRdWFnZ2FKUy5jcyIsInV0aWxzL0NvbG9yLmNzIiwiY29udHJvbHMvQ29udGV4dE1lbnUuY3MiLCJ1dGlscy9EYXRhVGFibGUuY3MiLCJjb250cm9scy9Db21ib0JveEVkaXQuY3MiLCJmb3Jtcy9EaWFsb2dSZXN1bHQuY3MiLCJ1dGlscy9FeHRlcm5hbFBsdWdpbi5jcyIsInV0aWxzL0ZpcmViYXNlLmNzIiwiZm9ybXMvRm9ybUNvbGxlY3Rpb24uY3MiLCJ1dGlscy9HbWFpbC5jcyIsInV0aWxzL0dvb2dsZUNsb3VkUHJpbnQuY3MiLCJncmlkL0dyaWRWaWV3Q2VsbEFwcGFyZW5jZS5jcyIsImdyaWQvR3JpZFZpZXdDZWxsRGlzcGxheS5jcyIsImdyaWQvR3JpZFZpZXdDb2x1bW4uY3MiLCJ1dGlscy9IYXJkU29mdExpc3QuY3MiLCJ1dGlscy9IZWxwZXIuY3MiLCJ1dGlscy9LZXlDb2Rlcy5jcyIsImNvbXBvbmVudHMvTGF5b3V0Q29udGFpbmVyLmNzIiwidXRpbHMvTmV0d29yay5jcyIsInV0aWxzL1Jlc291cmNlTWFuYWdlci5jcyIsInV0aWxzL1NldHRpbmdzLmNzIiwidXRpbHMvVGV4dEJsb2NrLmNzIiwiY29udHJvbHMvVG9vbFRpcENvbnRyb2wuY3MiLCJ1dGlscy9WZWN0b3IyLmNzIiwidXRpbHMvVmVjdG9yNC5jcyIsImNvbnRyb2xzL0FjZUNvZGVFZGl0b3IuY3MiLCJmb3Jtcy9Gb3JtLmNzIiwiY29udHJvbHMvQ2FsY3VsYXRvckNvbnRyb2wuY3MiLCJjb250cm9scy9DaGVja0VkaXQuY3MiLCJjb250cm9scy9UZXh0SW5wdXQuY3MiLCJjb250cm9scy9EYXRlQ29udHJvbC5jcyIsImNvbnRyb2xzL0dyaWRMb29rdXBFZGl0LmNzIiwiZ3JpZC9HcmlkVmlldy5jcyIsImdyaWQvR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94LmNzIiwiZ3JpZC9HcmlkVmlld0NlbGxEaXNwbGF5SW1hZ2UuY3MiLCJjb250cm9scy9JbWFnZUVkaXQuY3MiLCJjb250cm9scy9Qcm9ncmVzc0NvbnRyb2wuY3MiLCJjb250cm9scy9SaWJib25CdXR0b24uY3MiLCJjb250cm9scy9SaWJib25Db250cm9sLmNzIiwiY29udHJvbHMvUmliYm9uR3JvdXAuY3MiLCJjb250cm9scy9SaWJib25QYWdlLmNzIiwiY29udHJvbHMvU2ltcGxlQnV0dG9uLmNzIiwiY29udHJvbHMvU3BsaXRDb250cm9sQ29udGFpbmVyLmNzIiwiY29udHJvbHMvU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lci5jcyIsImNvbnRyb2xzL1RhYkNvbnRyb2wuY3MiLCJjb250cm9scy9UYWJDb250cm9sUGFnZS5jcyIsImNvbnRyb2xzL1RpbGVDb250cm9sLmNzIiwiZm9ybXMvRm9ybVBvcHVwLmNzIiwiY29udHJvbHMvQ29sb3JJbnB1dC5jcyIsImZvcm1zL0NvbnNvbGVGb3JtLmNzIiwiZm9ybXMvRGlhbG9nRm9ybS5jcyIsImNvbnRyb2xzL1RleHRJbnB1dERyb3BEb3duLmNzIiwiY29udHJvbHMvTWVtb0lucHV0LmNzIiwiZm9ybXMvUGRmUHJldmlld0Zvcm0uY3MiLCJjb250cm9scy9TaW1wbGVEaWFsb2dCdXR0b24uY3MiLCJmb3Jtcy9wb3B1cGZvcm1zL0NhbGNGb3JtLmNzIiwiZm9ybXMvRGF0YVJvd0VkaXRGb3JtLmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9EYXRlRm9ybS5jcyIsImNvbnRyb2xzL0RhdGVJbnB1dC5jcyIsImZvcm1zL0lucHV0RGlhbG9nLmNzIiwiZm9ybXMvTWVzc2FnZUJveEZvcm0uY3MiLCJjb250cm9scy9OdW1iZXJJbnB1dC5jcyIsImNvbnRyb2xzL1NlYXJjaElucHV0LmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9TZWFyY2hMb29rdXBGb3JtLmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9UZXh0Rm9ybS5jcyIsImZvcm1zL1RoZW1lRm9ybS5jcyJdLAogICJuYW1lcyI6IFsiIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7O3FCQTRjK0NBOzs7Ozs7OztxQ0EzVlJBLEtBQWlCQTs7O29CQUU1Q0EsT0FBT0EsS0FBS0EsQ0FBQ0EsTUFBTUEsYUFDZkE7OzBDQXVHNEJBO29CQUVoQ0EsT0FBT0EsbUVBQTREQTs7d0NBR3JDQTtvQkFFOUJBLE9BQU9BLHdEQUFpREE7OzZDQUdyQkEsR0FBVUE7O29CQUU3Q0EsT0FBT0EsZ0RBQXlDQSxpQkFBaUJBLHdDQUEyQkE7OytCQXNDL0RBOzs7b0JBRTdCQSxPQUFPQSxvREFBbUNBLHNDQUFpQkE7O2lDQTBLOUJBLElBQVdBOzs7b0JBRXhDQSxPQUFPQSxvREFBbUNBLHlCQUFLQSxxQ0FBZ0JBOztnQ0F6S2hDQTs7O29CQUUvQkEsT0FBT0EscURBQW9DQSxzQ0FBaUJBOztrQ0FrSjdCQSxJQUFXQTs7O29CQUUxQ0EsT0FBT0EscURBQW9DQSx5QkFBS0EscUNBQWdCQTs7bUNBakpoQ0EsU0FBZ0JBLEdBQVNBLEdBQVNBLFFBQXFCQSxRQUFxQkE7Ozs7O29CQUU1R0EsVUFBVUEscURBQW9DQSxzQ0FBaUJBOztvQkFFL0RBLGdCQUFnQkE7b0JBQ2hCQSxxQ0FBZ0JBLEdBQUdBO29CQUNuQkEsMkJBQU1BLEtBQUtBLFFBQVFBOztvQkFFbkJBLE9BQU9BOzttQ0FHeUJBLFNBQWdCQSxHQUFTQSxHQUFTQSxPQUFhQSxRQUFjQSxRQUFxQkEsUUFBcUJBLFFBQW9CQSxXQUFzQ0EsV0FBeUJBOzs7Ozs7OztvQkFFMU5BLFVBQVVBLHFEQUFvQ0EsNkJBQVNBLCtCQUFVQSxDQUFDQSxpQ0FBMEJBLFNBQVNBOztvQkFFckdBLGdCQUFnQkE7b0JBQ2hCQSxxQ0FBY0EsR0FBR0EsR0FBR0EsT0FBT0E7b0JBQzNCQSxJQUFHQSxjQUFhQTt3QkFFWkEsc0JBQXNCQTs7b0JBRTFCQSwyQkFBTUEsS0FBS0EsUUFBUUE7b0JBQ25CQSxJ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QSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBUWpCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQVFqQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFRakJBLE9BQU9BLElBQUlBLDBC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QkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBLDhDQUFpQkE7OztvQkFLakJBLFFBQVVBOztvQkFFVkE7b0JBQ0FBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBUUE7b0JBQ1JBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFRQTtvQkFDUkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVFBO29CQUNSQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBUUE7b0JBQ1JBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFRQTtvQkFDUkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVFBO29CQUNSQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBUUE7b0JBQ1JBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLGdDQUFTQTtvQkFDVEEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVNBO29CQUNUQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBU0E7b0JBQ1RBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFTQTtvQkFDVEEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVNBO29CQUNUQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBU0E7b0JBQ1RBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFTQTtvQkFDVEEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdD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T0FBY0EsVUFBaUJBOzs2REFBaUJBLE9BQU9BLE1BQU1BO2dCQUVoRkEsWUFBWUEsMkNBQXNCQTtnQkFDbENBO2dCQUNBQTtnQkFDQUEsaUJBQWlCQTtvQkFBUUEsY0FBU0E7O2dCQUNsQ0EsMkJBQXNCQTtnQkFDdEJBLFlBQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkE5SFlBLE9BQWNBOytEQUF3QkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs4QkFXN0NBLE9BQWNBLFVBQWlCQTs7NkRBQWlCQSxPQUFPQSxNQUFNQTtnQkFFaEZBLFlBQVlBLDJDQUFzQkE7Z0JBQ2xDQTtnQkFDQUE7Z0JBQ0FBLGlCQUFpQkE7b0JBRWJBLGNBQVNBOztnQkFFYkEsMkJBQXNCQTtnQkFDdEJBLFlBQU9BIiwKICAic291cmNlc0NvbnRlbnQiOiBbInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBlbnVtIENvbWJvQm94VHlwZXNcclxuICAgIHtcclxuICAgICAgICBEZWZhdWx0XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgSFRNTEVsZW1lbnQgQ29udGVudDtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcbiAgICAgICAgcHVibGljIGJvb2wgSGFzUmVuZGVyZWQgPSBmYWxzZTtcclxuICAgICAgICBwdWJsaWMgY29uc3Qgc3RyaW5nIENvbnRyb2xDbGFzcyA9IFwiY29udHJvbFwiO1xyXG5cclxuICAgICAgICBwcml2YXRlIFRvb2xUaXAgX3Rvb2xUaXAgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgQWN0aW9uPE1vdXNlRXZlbnQ+IF9Pbk1vdXNlRW50ZXJUb29sVGlwID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIEFjdGlvbjxNb3VzZUV2ZW50PiBfT25Nb3VzZUxlYXZlVG9vbFRpcCA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUb29sVGlwIFRvb2xUaXBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3Rvb2xUaXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF90b29sVGlwICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZS5BdHRhY2hlZENvbnRyb2wgIT0gbnVsbCAmJiB2YWx1ZS5BdHRhY2hlZENvbnRyb2wgIT0gdGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuQXR0YWNoZWRDb250cm9sID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdG9vbFRpcCA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihfdG9vbFRpcCAhPSBudWxsICYmICghX3Rvb2xUaXAuSGVhZGluZy5Jc0VtcHR5KCkgfHwgIV90b29sVGlwLkRlc2NyaXB0aW9uLklzRW1wdHkoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfT25Nb3VzZUVudGVyVG9vbFRpcCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISh0aGlzIGlzIFRvb2xUaXBDb250cm9sKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtLkFjdGl2ZVRvb2xUaXAgPSBfdG9vbFRpcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX09uTW91c2VMZWF2ZVRvb2xUaXAgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEodGhpcyBpcyBUb29sVGlwQ29udHJvbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybS5BY3RpdmVUb29sVGlwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VFbnRlciwgX09uTW91c2VFbnRlclRvb2xUaXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTGVhdmUsIF9Pbk1vdXNlTGVhdmVUb29sVGlwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX09uTW91c2VFbnRlclRvb2xUaXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuUmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VFbnRlciwgX09uTW91c2VFbnRlclRvb2xUaXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfT25Nb3VzZUVudGVyVG9vbFRpcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9Pbk1vdXNlTGVhdmVUb29sVGlwICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LlJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTGVhdmUsIF9Pbk1vdXNlTGVhdmVUb29sVGlwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX09uTW91c2VMZWF2ZVRvb2xUaXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxDb250cm9sPiBPblJlc2l6ZSA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxDb250cm9sPiBPbkxvYWRlZCA9IG51bGw7ICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIENvbnRleHRNZW51IENvbnRleHRNZW51ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIENTU1N0eWxlRGVjbGFyYXRpb24gU3R5bGUge2dldHtyZXR1cm4gQ29udGVudC5TdHlsZTt9fVxyXG4gICAgICAgIHB1YmxpYyBET01Ub2tlbkxpc3QgQ2xhc3NMaXN0IHtnZXR7cmV0dXJuIENvbnRlbnQuQ2xhc3NMaXN0O319XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIFNldEF0dHJpYnV0ZShzdHJpbmcgbmFtZSwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUuVG9TdHIoKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgR2V0QXR0cmlidXRlKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ29udGVudC5HZXRBdHRyaWJ1dGUobmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldEF0dHJpYnV0ZWkoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2xvYmFsLlBhcnNlSW50KHRoaXMuQ29udGVudC5HZXRBdHRyaWJ1dGUobmFtZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IEdldEF0dHJpYnV0ZWYoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KHRoaXMuQ29udGVudC5HZXRBdHRyaWJ1dGUobmFtZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZvcm0gTGlua2VkRm9ybSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEJhc2VDbGFzcyhib29sIGFkZCA9IHRydWUsIGJvb2wgYWMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFjID8gKGFkZCA/IFwiIFwiICsgQ29udHJvbENsYXNzIDpcclxuICAgICAgICAgICAgICAgIENvbnRyb2xDbGFzcykgOiBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gV2lkdGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB0aGlzLkNvbnRlbnQuU3R5bGUuV2lkdGg7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gdmFsdWUuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHggPSBWZWN0b3IyLnBmKHgpO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5Db250ZW50LlN0eWxlLldpZHRoICE9IHgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LlN0eWxlLldpZHRoID0geDtcclxuICAgICAgICAgICAgICAgICAgICBPblNpemVDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IEhlaWdodFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRoaXMuQ29udGVudC5TdHlsZS5IZWlnaHQ7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gdmFsdWUuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHggPSBWZWN0b3IyLnBmKHgpO1xyXG4gICAgICAgICAgICAgICAgaWYoeCAhPSB0aGlzLkNvbnRlbnQuU3R5bGUuSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5TdHlsZS5IZWlnaHQgPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIE9uU2l6ZUNoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gTGVmdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRoaXMuQ29udGVudC5TdHlsZS5MZWZ0OyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHZhbHVlLlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gVmVjdG9yMi5wZih4KTtcclxuICAgICAgICAgICAgICAgIGlmKHggIT0gdGhpcy5Db250ZW50LlN0eWxlLkxlZnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LlN0eWxlLkxlZnQgPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIE9uTG9jYXRpb25DaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFRvcFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIHRoaXMuQ29udGVudC5TdHlsZS5Ub3A7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gdmFsdWUuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHggPSBWZWN0b3IyLnBmKHgpO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5Db250ZW50LlN0eWxlLlRvcCAhPSB4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5TdHlsZS5Ub3AgPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIE9uTG9jYXRpb25DaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Mb2NhdGlvbkNoYW5nZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25TaXplQ2hhbmdlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlY3RvcjIgU2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuV2lkdGgsIHRoaXMuSGVpZ2h0KTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5XaWR0aCA9IHZhbHVlLlg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkhlaWdodCA9IHZhbHVlLlk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3IyIExvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5MZWZ0LCB0aGlzLlRvcCk7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuTGVmdCA9IHZhbHVlLlg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRvcCA9IHZhbHVlLlk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZWN0b3I0IEJvdW5kc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIG5ldyBWZWN0b3I0KHRoaXMuTGVmdCwgdGhpcy5Ub3AsIHRoaXMuV2lkdGgsIHRoaXMuSGVpZ2h0KTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5MZWZ0ID0gdmFsdWUuWDtcclxuICAgICAgICAgICAgICAgIHRoaXMuVG9wID0gdmFsdWUuWTtcclxuICAgICAgICAgICAgICAgIHRoaXMuV2lkdGggPSB2YWx1ZS5aO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5IZWlnaHQgPSB2YWx1ZS5NO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRJbWFnZVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwidXJsKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsezB9Jykgbm8tcmVwZWF0XCIsIHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0UGRmU3RyaW5nKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsezB9XCIsIHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0SW1hZ2VTdHJpbmdVUkkoc3RyaW5nIHMsIGJvb2wgdXNlUmVzb3VyY2VVUkwgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ1cmwoJ3swfXsxfScpIG5vLXJlcGVhdFwiLCB1c2VSZXNvdXJjZVVSTCA/IFNldHRpbmdzLlJlc291cmNlVVJMIDogXCJcIiwgcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ29udHJvbChib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRlbnQgPSBEaXYoYWMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2woSFRNTEVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRlbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2woc3RyaW5nIGNuLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRlbnQgPSBEaXYoY24sIGFjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sKHN0cmluZyBjbiwgQnV0dG9uVHlwZSBidCwgYm9vbCBhYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb250ZW50ID0gQnV0dG9uKGNuLCBidCwgYWMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2woc3RyaW5nIGNuLCBDb21ib0JveFR5cGVzIGN0LCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRlbnQgPSBDb21ib0JveChjbiwgY3QsIGFjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sKHN0cmluZyBjbiwgSW5wdXRUeXBlIGl0LCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbnRlbnQgPSBJbnB1dChjbiwgaXQsIGFjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEhhc1JlbmRlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTERpdkVsZW1lbnQgRGl2KGJvb2wgYWMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIVE1MRGl2RWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gQmFzZUNsYXNzKGZhbHNlLCBhYykgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IFNwYW4oYm9vbCBhYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEhUTUxTcGFuRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gQmFzZUNsYXNzKGZhbHNlLCBhYykgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBDYXB0aW9uLCBmbG9hdCBYLCBmbG9hdCBZLCBib29sIElzQm9sZCA9IGZhbHNlLCBib29sIElzVGlueSA9IGZhbHNlLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYmwgPSBuZXcgSFRNTFNwYW5FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBCYXNlQ2xhc3MoZmFsc2UsIGFjKSB9O1xyXG5cclxuICAgICAgICAgICAgbGJsLklubmVySFRNTCA9IENhcHRpb24uSHRtbEVzY2FwZSgpO1xyXG4gICAgICAgICAgICBsYmwuU2V0TG9jYXRpb24oWCwgWSk7XHJcbiAgICAgICAgICAgIFNldEJUKGxibCwgSXNCb2xkLCBJc1RpbnkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxibDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBDYXB0aW9uLCBmbG9hdCBYLCBmbG9hdCBZLCBmbG9hdCB3aWR0aCwgZmxvYXQgaGVpZ2h0LCBib29sIElzQm9sZCA9IGZhbHNlLCBib29sIElzVGlueSA9IGZhbHNlLCBzdHJpbmcgY2xhc3NyID0gXCJcIiwgVGV4dEFsaWduIEFsaWdubWVudCA9IFRleHRBbGlnbi5MZWZ0LCBzdHJpbmcgRm9yZWNvbG9yID0gbnVsbCwgYm9vbCBhYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGJsID0gbmV3IEhUTUxTcGFuRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gY2xhc3NyICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNsYXNzciksIGFjKSB9O1xyXG5cclxuICAgICAgICAgICAgbGJsLklubmVySFRNTCA9IENhcHRpb24uSHRtbEVzY2FwZSgpO1xyXG4gICAgICAgICAgICBsYmwuU2V0Qm91bmRzKFgsIFksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICBpZihBbGlnbm1lbnQgIT0gVGV4dEFsaWduLkxlZnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxibC5TdHlsZS5UZXh0QWxpZ24gPSBBbGlnbm1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgU2V0QlQobGJsLCBJc0JvbGQsIElzVGlueSk7XHJcbiAgICAgICAgICAgIGlmKEZvcmVjb2xvciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYmwuU3R5bGUuQ29sb3IgPSBGb3JlY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsYmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxEaXZFbGVtZW50IERpdkxhYmVsKHN0cmluZyBDYXB0aW9uLCBmbG9hdCBYLCBmbG9hdCBZLCBmbG9hdCB3aWR0aCwgYm9vbCBJc0JvbGQgPSBmYWxzZSwgYm9vbCBJc1RpbnkgPSBmYWxzZSwgc3RyaW5nIGNsYXNzciA9IFwiXCIsIFRleHRBbGlnbiBBbGlnbm1lbnQgPSBUZXh0QWxpZ24uTGVmdCwgc3RyaW5nIEZvcmVjb2xvciA9IG51bGwsIGJvb2wgYWMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxibCA9IG5ldyBIVE1MRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBsYmwuQ2xhc3NOYW1lID0gY2xhc3NyICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNsYXNzciksIGFjKTtcclxuICAgICAgICAgICAgbGJsLlRleHRDb250ZW50ID0gQ2FwdGlvbjtcclxuICAgICAgICAgICAgbGJsLlN0eWxlLkxlZnQgPSBYLlRvUHgoKTtcclxuICAgICAgICAgICAgbGJsLlN0eWxlLlRvcCA9IFkuVG9QeCgpO1xyXG4gICAgICAgICAgICBsYmwuU3R5bGUuV2lkdGggPSB3aWR0aC5Ub1B4KCk7XHJcblxyXG4gICAgICAgICAgICBpZihBbGlnbm1lbnQgIT0gVGV4dEFsaWduLkxlZnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEFsaWdubWVudCA9PSBUZXh0QWxpZ24uUmlnaHQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGJsLlN0eWxlLkRpcmVjdGlvbiA9IERpcmVjdGlvbi5SdGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGJsLlN0eWxlLlRleHRBbGlnbiA9IEFsaWdubWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihJc0JvbGQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxibC5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoSXNUaW55KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYmwuU3R5bGUuRm9udFNpemUgPSBcIjYuNzVwdFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKEZvcmVjb2xvciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYmwuU3R5bGUuQ29sb3IgPSBGb3JlY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsYmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxTcGFuRWxlbWVudCBMYWJlbChzdHJpbmcgQ2FwdGlvbiwgZmxvYXQgWCwgZmxvYXQgWSwgZmxvYXQgd2lkdGgsIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIHN0cmluZyBjbGFzc3IgPSBcIlwiLCBUZXh0QWxpZ24gQWxpZ25tZW50ID0gVGV4dEFsaWduLkxlZnQsIHN0cmluZyBGb3JlY29sb3IgPSBudWxsLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYmwgPSBuZXcgSFRNTFNwYW5FbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGxibC5DbGFzc05hbWUgPSBjbGFzc3IgKyBCYXNlQ2xhc3MoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY2xhc3NyKSwgYWMpO1xyXG4gICAgICAgICAgICBsYmwuVGV4dENvbnRlbnQgPSBDYXB0aW9uO1xyXG4gICAgICAgICAgICBsYmwuU3R5bGUuTGVmdCA9IFguVG9QeCgpO1xyXG4gICAgICAgICAgICBsYmwuU3R5bGUuVG9wID0gWS5Ub1B4KCk7XHJcbiAgICAgICAgICAgIGxibC5TdHlsZS5XaWR0aCA9IHdpZHRoLlRvUHgoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEFsaWdubWVudCAhPSBUZXh0QWxpZ24uTGVmdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQWxpZ25tZW50ID09IFRleHRBbGlnbi5SaWdodClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYmwuU3R5bGUuRGlyZWN0aW9uID0gRGlyZWN0aW9uLlJ0bDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYmwuU3R5bGUuVGV4dEFsaWduID0gQWxpZ25tZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNldEJUKGxibCwgSXNCb2xkLCBJc1RpbnkpO1xyXG4gICAgICAgICAgICBpZihGb3JlY29sb3IgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGJsLlN0eWxlLkNvbG9yID0gRm9yZWNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRm9jdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgU2V0QlQoSFRNTFNwYW5FbGVtZW50IGxibCwgYm9vbCBJc0JvbGQsIGJvb2wgSXNUaW55KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSXNCb2xkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYmwuU3R5bGUuRm9udFdlaWdodCA9IFwiYm9sZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKElzVGlueSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGJsLlN0eWxlLkZvbnRTaXplID0gXCI2Ljc1cHRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MU3BhbkVsZW1lbnQgTGFiZWwoc3RyaW5nIGMsIGZsb2F0IFgsIGZsb2F0IFksIGZsb2F0IHdpZHRoLCBmbG9hdCBoZWlnaHQsIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIHN0cmluZyBjbGFzc3IgPSBcIlwiLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYmwgPSBuZXcgSFRNTFNwYW5FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbGFzc3IgKyBCYXNlQ2xhc3MoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY2xhc3NyKSwgYWMpIH07XHJcblxyXG4gICAgICAgICAgICBsYmwuSW5uZXJIVE1MID0gYy5IdG1sRXNjYXBlKCk7XHJcbiAgICAgICAgICAgIGxibC5TZXRCb3VuZHMoWCwgWSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIFNldEJUKGxibCwgSXNCb2xkLCBJc1RpbnkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxibDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBjLCBpbnQgWCwgaW50IFksIGludCB3aWR0aCwgYm9vbCBJc0JvbGQgPSBmYWxzZSwgYm9vbCBJc1RpbnkgPSBmYWxzZSwgc3RyaW5nIGNsYXNzciA9IFwiXCIsIGJvb2wgYWMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxibCA9IG5ldyBIVE1MU3BhbkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IGNsYXNzciArIEJhc2VDbGFzcyghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShjbGFzc3IpLCBhYykgfTtcclxuXHJcbiAgICAgICAgICAgIGxibC5Jbm5lckhUTUwgPSBjLkh0bWxFc2NhcGUoKTtcclxuICAgICAgICAgICAgbGJsLlNldExvY2F0aW9uKFgsIFkpO1xyXG4gICAgICAgICAgICBsYmwuU3R5bGUuV2lkdGggPSB3aWR0aC5Ub1B4KCk7XHJcbiAgICAgICAgICAgIFNldEJUKGxibCwgSXNCb2xkLCBJc1RpbnkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxibDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBjLCBpbnQgWCwgaW50IFksIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIGJvb2wgYWMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExhYmVsKGMsIChmbG9hdClYLCAoZmxvYXQpWSwgSXNCb2xkLCBJc1RpbnksIGFjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IFNwYW4oc3RyaW5nIGNuLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSFRNTFNwYW5FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbiArIEJhc2VDbGFzcyh0cnVlLCBhYykgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTFNlbGVjdEVsZW1lbnQgQ29tYm9Cb3goc3RyaW5nIGNuLCBDb21ib0JveFR5cGVzIGN0LCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb21ibyA9IG5ldyBIVE1MU2VsZWN0RWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gY24gKyBCYXNlQ2xhc3ModHJ1ZSwgYWMpIH07XHJcbiAgICAgICAgICAgIGlmKGN0ID09IENvbWJvQm94VHlwZXMuRGVmYXVsdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjb21ibztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSFRNTEJ1dHRvbkVsZW1lbnQgQnV0dG9uKHN0cmluZyBjbiwgQnV0dG9uVHlwZSBidCwgYm9vbCBhYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEhUTUxCdXR0b25FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbiArIEJhc2VDbGFzcyh0cnVlLCBhYyksIFR5cGUgPSBidCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MRGl2RWxlbWVudCBEaXYoc3RyaW5nIGNuLCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSFRNTERpdkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IGNuICsgQmFzZUNsYXNzKHRydWUsIGFjKSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MSW5wdXRFbGVtZW50IElucHV0KHN0cmluZyBjbiwgSW5wdXRUeXBlIGl0LCBib29sIGFjID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IG5ldyBIVE1MSW5wdXRFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGlucHV0LkNsYXNzTmFtZSA9IGNuICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNuKSwgYWMpO1xyXG4gICAgICAgICAgICBkeW5hbWljIHR5ID0gaXQ7XHJcbiAgICAgICAgICAgIGlmKEJyb3dzZXIuSXNJRSAmJiAodHkgPT0gXCJ0ZXh0XCIgfHwgdHkgPT0gXCJkYXRlXCIgfHwgdHkgPT0gXCJjb2xvclwiIHx8IHR5ID09IDE5IHx8IHR5ID09IDMgfHwgdHkgPT0gMikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbnB1dC5UeXBlID0gaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBIVE1MQ2FudmFzRWxlbWVudCBjdmEgPSBudWxsO1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgVGV4dCBNZXRyaWNzIGZvciBhIGdpdmVuIHN0cmluZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidFwiPnRoZSBzdHJpbmc8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImZcIj50aGUgZm9udCB1c2VkPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+VGV4dE1ldHJpY3M8L3JldHVybnM+XHJcblx0XHRwdWJsaWMgc3RhdGljIFRleHRNZXRyaWNzIEdldFRleHRNZXRyaWNzKHN0cmluZyB0LCBzdHJpbmcgZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGYgPT0gXCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZiA9IFwiOC4yNXB0IFRhaG9tYVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjID0gKGN2YSA/PyAoY3ZhID0gbmV3IEhUTUxDYW52YXNFbGVtZW50KCkpKS5HZXRDb250ZXh0KENhbnZhc1R5cGVzLkNhbnZhc0NvbnRleHQyRFR5cGUuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKS5BczxDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ+KCk7XHJcbiAgICAgICAgICAgIGMuRm9udCA9IGY7XHJcbiAgICAgICAgICAgIHJldHVybiBjLk1lYXN1cmVUZXh0KHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBSZXR1cm5zIHRleHQgd2lkdGhcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRcIj50aGUgc3RyaW5nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJmXCI+dGhlIGZvbnQgdXNlZDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPmRvdWJsZTwvcmV0dXJucz5cclxuXHRcdHB1YmxpYyBzdGF0aWMgZG91YmxlIEdldFRleHRXaWR0aChzdHJpbmcgdCwgc3RyaW5nIGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0VGV4dE1ldHJpY3ModCwgZikuV2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIE5vZGUoQ29udHJvbCBjb250cm9sKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoU2V0dGluZ3MuQXV0b1JlbmRlciAmJiAhY29udHJvbC5IYXNSZW5kZXJlZClcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuUmVuZGVyKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sLkNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDaGFuZ2VTdGF0ZShib29sIHMsIHN0cmluZyBzZiA9IFwiZGlzYWJsZWRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuQ2xhc3NMaXN0LlJlbW92ZShzZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LkNsYXNzTGlzdC5BZGQoc2YpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXBwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIE1haW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2V0dGluZ3MuU2V0dXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBlbnVtIEFwcGxpY2F0aW9uRGVmaXRuaW9uXHJcbiAgICB7XHJcbiAgICAgICAgTm9uZSxcclxuICAgICAgICBCcm93c2VyQ29uc29sZSxcclxuICAgICAgICBCcmlkZ2VDb25zb2xlLFxyXG4gICAgICAgIEV4cHJlc3NDcmFmdENvbnNvbGVcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFwcGxpY2F0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGb3JtIE1haW5Gb3JtID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIENsb3NlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE1haW5Gb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE1haW5Gb3JtLkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgV2luZG93LkNsb3NlKCk7XHJcbiAgICAgICAgICAgIFdpbmRvdy5Mb2NhdGlvbi5SZWxvYWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEFwcGxpY2F0aW9uRGVmaXRuaW9uIF9hcHBsaWNhdGlvbkRlZml0aW9uID0gQXBwbGljYXRpb25EZWZpdG5pb24uQnJpZGdlQ29uc29sZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFwcGxpY2F0aW9uRGVmaXRuaW9uIEFwbGljYXRpb25EZWZpdGlvbiB7IGdldCB7IHJldHVybiBfYXBwbGljYXRpb25EZWZpdGlvbjsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSdW4oRm9ybSBfTWFpbmZvcm0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNYWluRm9ybSA9IF9NYWluZm9ybTtcclxuICAgICAgICAgICAgTWFpbkZvcm0uU2hvd1N0YXJ0TmV3TGV2ZWwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCYXJjb2RlUXVhZ2dhSlNcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBFeHRlcm5hbFBsdWdpbiBFeHRlcm5hbFF1YWdnYUpTID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcXVhZ2dhLzAuMTIuMS9xdWFnZ2EubWluLmpzXCIpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRXh0ZXJuYWxRdWFnZ2FKUy5TZXR1cCh0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNvZGVTaW5nbGUoc3RyaW5nIHNvdXJjZSwgQWN0aW9uPHN0cmluZz4gb25EZXRlY3QsIEFjdGlvbiBvbk5vRGV0ZWN0ID0gbnVsbCwgYm9vbCBsb2NhdGUgPSB0cnVlLCBSZWFkZXJzIHJlYWRlciA9IFJlYWRlcnMuQ29kZV8zOV9SZWFkZXIsIGJvb2wgc291cmNlSXNCYXNlNjQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFFeHRlcm5hbFF1YWdnYUpTLlNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYob25EZXRlY3QgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBjb2RlTmFtZSA9IHJlYWRlci5Ub1N0cmluZyhcIkdcIikuVG9Mb3dlcigpO1xyXG4gICAgICAgICAgICBpZihjb2RlTmFtZS5TdGFydHNXaXRoKFwiX1wiKSlcclxuICAgICAgICAgICAgICAgIGNvZGVOYW1lID0gY29kZU5hbWUuU3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICBpZihzb3VyY2VJc0Jhc2U2NCAmJiAhc291cmNlLlN0YXJ0c1dpdGgoXCJkYXRhOmltYWdlXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBcImRhdGE6aW1hZ2UvanBnO2Jhc2U2NCxcIiArIHNvdXJjZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKkBcclxuICAgICAgICAgICAgUXVhZ2dhLmRlY29kZVNpbmdsZSh7XHJcbiAgICAgICAgICAgICAgICBkZWNvZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyczogW2NvZGVOYW1lXSAvLyBMaXN0IG9mIGFjdGl2ZSByZWFkZXJzXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbG9jYXRlOiBsb2NhdGUsXHJcbiAgICAgICAgICAgICAgICBzcmM6IHNvdXJjZVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihvbmQsIG9ubmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5jb2RlUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZChyZXN1bHQuY29kZVJlc3VsdC5jb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvbm5kICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfShvbkRldGVjdCwgb25Ob0RldGVjdCkpO1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGVudW0gUmVhZGVyc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29kZV8xMjhfUmVhZGVyLFxyXG4gICAgICAgICAgICBFYW5fUmVhZGVyLFxyXG4gICAgICAgICAgICBFYW5fOF9SZWFkZXIsXHJcbiAgICAgICAgICAgIENvZGVfMzlfUmVhZGVyLFxyXG4gICAgICAgICAgICBDb2RlXzM5X1Zpbl9SZWFkZXIsXHJcbiAgICAgICAgICAgIENvZGFiYXJfUmVhZGVyLFxyXG4gICAgICAgICAgICBVcGNfUmVhZGVyLFxyXG4gICAgICAgICAgICBVcGNfZV9SZWFkZXIsXHJcbiAgICAgICAgICAgIEkyb2Y1X1JlYWRlcixcclxuICAgICAgICAgICAgXzJvZjVfUmVhZGVyLFxyXG4gICAgICAgICAgICBDb2RlXzkzX1JlYWRlcixcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICBRdWFnZ2EuZGVjb2RlU2luZ2xlKHtcclxuICAgICAgICAvLyAgICBkZWNvZGVyOiB7XHJcbiAgICAgICAgLy8gICAgICAgIHJlYWRlcnM6IFtcImNvZGVfMTI4X3JlYWRlclwiXSAvLyBMaXN0IG9mIGFjdGl2ZSByZWFkZXJzXHJcbiAgICAgICAgLy8gICAgfSxcclxuICAgICAgICAvLyAgICBsb2NhdGU6IHRydWUsIC8vIHRyeSB0byBsb2NhdGUgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlXHJcbiAgICAgICAgLy8gICAgc3JjOiAnL3Rlc3QvZml4dHVyZXMvY29kZV8xMjgvaW1hZ2UtMDAxLmpwZycgLy8gb3IgJ2RhdGE6aW1hZ2UvanBnO2Jhc2U2NCwnICsgZGF0YVxyXG4gICAgICAgIC8vfSwgZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAvLyAgICBpZihyZXN1bHQuY29kZVJlc3VsdCkge1xyXG4gICAgICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhcInJlc3VsdFwiLCByZXN1bHQuY29kZVJlc3VsdC5jb2RlKTtcclxuICAgICAgICAvLyAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCBkZXRlY3RlZFwiKTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99KTtcclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIHN0cnVjdCBDb2xvclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ29sb3IgRW1wdHk7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc2hvcnQgU3RhdGVLbm93bkNvbG9yVmFsaWQ7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc2hvcnQgU3RhdGVBUkdCVmFsdWVWYWxpZDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzaG9ydCBTdGF0ZVZhbHVlTWFzaztcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzaG9ydCBTdGF0ZU5hbWVWYWxpZDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBsb25nIE5vdERlZmluZWRWYWx1ZTtcclxuICAgICAgICBwcml2YXRlIGNvbnN0IGludCBBUkdCQWxwaGFTaGlmdCA9IDB4MTg7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgQVJHQlJlZFNoaWZ0ID0gMHgxMDtcclxuICAgICAgICBwcml2YXRlIGNvbnN0IGludCBBUkdCR3JlZW5TaGlmdCA9IDg7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgQVJHQkJsdWVTaGlmdCA9IDA7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdHJpbmcgbmFtZTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGxvbmcgdmFsdWU7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzaG9ydCBrbm93bkNvbG9yO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2hvcnQgc3RhdGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgVHJhbnNwYXJlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVHJhbnNwYXJlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEFsaWNlQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5BbGljZUJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEFudGlxdWVXaGl0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5BbnRpcXVlV2hpdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEFxdWFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQXF1YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgQXF1YW1hcmluZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5BcXVhbWFyaW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBBenVyZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5BenVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgQmVpZ2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQmVpZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEJpc3F1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5CaXNxdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEJsYWNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkJsYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBCbGFuY2hlZEFsbW9uZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5CbGFuY2hlZEFsbW9uZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5CbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBCbHVlVmlvbGV0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkJsdWVWaW9sZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEJyb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkJyb3duKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBCdXJseVdvb2RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQnVybHlXb29kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBDYWRldEJsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ2FkZXRCbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBDaGFydHJldXNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkNoYXJ0cmV1c2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIENob2NvbGF0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5DaG9jb2xhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIENvcmFsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkNvcmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBDb3JuZmxvd2VyQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Db3JuZmxvd2VyQmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgQ29ybnNpbGtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ29ybnNpbGspO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIENyaW1zb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ3JpbXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgQ3lhblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5DeWFuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrQmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya0N5YW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0N5YW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtHb2xkZW5yb2RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0dvbGRlbnJvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya0dyYXlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0dyYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtLaGFraVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrS2hha2kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtNYWdlbnRhXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtNYWdlbnRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrT2xpdmVHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrT2xpdmVHcmVlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya09yYW5nZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrT3JhbmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrT3JjaGlkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtPcmNoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtSZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya1JlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya1NhbG1vblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrU2FsbW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrU2VhR3JlZW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya1NlYUdyZWVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrU2xhdGVCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtTbGF0ZUJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERhcmtTbGF0ZUdyYXlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya1NsYXRlR3JheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya1R1cnF1b2lzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrVHVycXVvaXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEYXJrVmlvbGV0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtWaW9sZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIERlZXBQaW5rXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRlZXBQaW5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEZWVwU2t5Qmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EZWVwU2t5Qmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRGltR3JheVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EaW1HcmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBEb2RnZXJCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRvZGdlckJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZpcmVicmlja1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5GaXJlYnJpY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZsb3JhbFdoaXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkZsb3JhbFdoaXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBGb3Jlc3RHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Gb3Jlc3RHcmVlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRnVjaHNpYVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5GdWNoc2lhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBHYWluc2Jvcm9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuR2FpbnNib3JvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBHaG9zdFdoaXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkdob3N0V2hpdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEdvbGRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuR29sZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgR29sZGVucm9kXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkdvbGRlbnJvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgR3JheVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5HcmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5HcmVlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgR3JlZW5ZZWxsb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuR3JlZW5ZZWxsb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEhvbmV5ZGV3XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkhvbmV5ZGV3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBIb3RQaW5rXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkhvdFBpbmspO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEluZGlhblJlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5JbmRpYW5SZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEluZGlnb1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5JbmRpZ28pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEl2b3J5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkl2b3J5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBLaGFraVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5LaGFraSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGF2ZW5kZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGF2ZW5kZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIExhdmVuZGVyQmx1c2hcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGF2ZW5kZXJCbHVzaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGF3bkdyZWVuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxhd25HcmVlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGVtb25DaGlmZm9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxlbW9uQ2hpZmZvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0Qmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRDb3JhbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodENvcmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodEN5YW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRDeWFuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodEdvbGRlbnJvZFllbGxvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodEdvbGRlbnJvZFllbGxvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodEdyZWVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodEdyYXlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRHcmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodFBpbmtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRQaW5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodFNhbG1vblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodFNhbG1vbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRTZWFHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodFNlYUdyZWVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodFNreUJsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRTa3lCbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaWdodFNsYXRlR3JheVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodFNsYXRlR3JheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRTdGVlbEJsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRTdGVlbEJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0WWVsbG93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0WWVsbG93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBMaW1lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIExpbWVHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaW1lR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIExpbmVuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpbmVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBNYWdlbnRhXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1hZ2VudGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1hcm9vblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NYXJvb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bUFxdWFtYXJpbmVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtQXF1YW1hcmluZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NZWRpdW1CbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1PcmNoaWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtT3JjaGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1QdXJwbGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtUHVycGxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1TZWFHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NZWRpdW1TZWFHcmVlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtU2xhdGVCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1lZGl1bVNsYXRlQmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtU3ByaW5nR3JlZW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtU3ByaW5nR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bVR1cnF1b2lzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NZWRpdW1UdXJxdW9pc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bVZpb2xldFJlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NZWRpdW1WaW9sZXRSZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1pZG5pZ2h0Qmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NaWRuaWdodEJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1pbnRDcmVhbVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NaW50Q3JlYW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1pc3R5Um9zZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NaXN0eVJvc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE1vY2Nhc2luXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1vY2Nhc2luKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBOYXZham9XaGl0ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5OYXZham9XaGl0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgTmF2eVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5OYXZ5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBPbGRMYWNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9sZExhY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIE9saXZlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9saXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBPbGl2ZURyYWJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuT2xpdmVEcmFiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBPcmFuZ2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuT3JhbmdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBPcmFuZ2VSZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuT3JhbmdlUmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBPcmNoaWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuT3JjaGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBQYWxlR29sZGVucm9kXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBhbGVHb2xkZW5yb2QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFBhbGVHcmVlblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QYWxlR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFBhbGVUdXJxdW9pc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGFsZVR1cnF1b2lzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUGFsZVZpb2xldFJlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QYWxlVmlvbGV0UmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBQYXBheWFXaGlwXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBhcGF5YVdoaXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFBlYWNoUHVmZlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QZWFjaFB1ZmYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFBlcnVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGVydSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUGlua1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QaW5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBQbHVtXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBsdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFBvd2RlckJsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUG93ZGVyQmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUHVycGxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlB1cnBsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUmVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlJlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUm9zeUJyb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlJvc3lCcm93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgUm95YWxCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlJveWFsQmx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgU2FkZGxlQnJvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2FkZGxlQnJvd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNhbG1vblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5TYWxtb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNhbmR5QnJvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2FuZHlCcm93bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgU2VhR3JlZW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2VhR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNlYVNoZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNlYVNoZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBTaWVubmFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2llbm5hKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBTaWx2ZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2lsdmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBTa3lCbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNreUJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNsYXRlQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5TbGF0ZUJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNsYXRlR3JheVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5TbGF0ZUdyYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFNub3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU25vdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgU3ByaW5nR3JlZW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU3ByaW5nR3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFN0ZWVsQmx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5TdGVlbEJsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFRhblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5UYW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFRlYWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVGVhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgVGhpc3RsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5UaGlzdGxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBUb21hdG9cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVG9tYXRvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBUdXJxdW9pc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVHVycXVvaXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBWaW9sZXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVmlvbGV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBXaGVhdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5XaGVhdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgV2hpdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuV2hpdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIFdoaXRlU21va2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuV2hpdGVTbW9rZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgWWVsbG93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlllbGxvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgWWVsbG93R3JlZW5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuWWVsbG93R3JlZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBDb2xvcihLbm93bkNvbG9yIGtub3duQ29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gMEw7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTdGF0ZUtub3duQ29sb3JWYWxpZDtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5rbm93bkNvbG9yID0gKHNob3J0KWtub3duQ29sb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIENvbG9yKGxvbmcgdmFsdWUsIHNob3J0IHN0YXRlLCBzdHJpbmcgbmFtZSwgS25vd25Db2xvciBrbm93bkNvbG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMua25vd25Db2xvciA9IChzaG9ydClrbm93bkNvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJ5dGUgUlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYnl0ZSkoKHRoaXMuVmFsdWUgPj4gMHgxMCkgJiAweGZmTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBieXRlIEdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGJ5dGUpKCh0aGlzLlZhbHVlID4+IDgpICYgMHhmZkwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnl0ZSBCXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChieXRlKSh0aGlzLlZhbHVlICYgMHhmZkwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnl0ZSBBXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChieXRlKSgodGhpcy5WYWx1ZSA+PiAweDE4KSAmIDB4ZmZMKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bkNvbG9yXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgodGhpcy5zdGF0ZSAmIFN0YXRlS25vd25Db2xvclZhbGlkKSA+IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0VtcHR5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnN0YXRlID09IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc05hbWVkQ29sb3JcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZigodGhpcy5zdGF0ZSAmIFN0YXRlTmFtZVZhbGlkKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLklzS25vd25Db2xvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1N5c3RlbUNvbG9yXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuSXNLbm93bkNvbG9yKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMua25vd25Db2xvciA+IDB4MWEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLmtub3duQ29sb3IgPiAweGE3KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIHN0cmluZyhDb2xvciBjb2xvcikgIC8vIGltcGxpY2l0IGRpZ2l0IHRvIGJ5dGUgY29udmVyc2lvbiBvcGVyYXRvclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yLlRvSGV4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIENvbG9yKHN0cmluZyBoZXhWYWx1ZSkgIC8vIGltcGxpY2l0IGRpZ2l0IHRvIGJ5dGUgY29udmVyc2lvbiBvcGVyYXRvclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbG9yLkZyb21IZXgoaGV4VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgTmFtZUFuZEFSR0JWYWx1ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwie3tOYW1lPXswfSwgQVJHQj0oezF9LCB7Mn0sIHszfSwgezR9KX19XCIsIHRoaXMuTmFtZSwgdGhpcy5BLCB0aGlzLlIsIHRoaXMuRywgdGhpcy5CKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBOYW1lXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoKHRoaXMuc3RhdGUgJiBTdGF0ZU5hbWVWYWxpZCkgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuSXNLbm93bkNvbG9yKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKHRoaXMudmFsdWUsIDB4MTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHN0ciA9IEtub3duQ29sb3JUYWJsZS5Lbm93bkNvbG9yVG9OYW1lKChLbm93bkNvbG9yKXRoaXMua25vd25Db2xvcik7XHJcbiAgICAgICAgICAgICAgICBpZihzdHIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMua25vd25Db2xvci5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGxvbmcgVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZigodGhpcy5zdGF0ZSAmIFN0YXRlVmFsdWVNYXNrKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5Jc0tub3duQ29sb3IpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChsb25nKUtub3duQ29sb3JUYWJsZS5Lbm93bkNvbG9yVG9BcmdiKChLbm93bkNvbG9yKXRoaXMua25vd25Db2xvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTm90RGVmaW5lZFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIENoZWNrQnl0ZShpbnQgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZigodmFsdWUgPCAwKSB8fCAodmFsdWUgPiAweGZmKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZEV4MkJvdW5kQXJndW1lbnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGxvbmcgTWFrZUFyZ2IoYnl0ZSBhbHBoYSwgYnl0ZSByZWQsIGJ5dGUgZ3JlZW4sIGJ5dGUgYmx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAobG9uZykoKCh1bG9uZykoKCgocmVkIDw8IDB4MTApIHwgKGdyZWVuIDw8IDgpKSB8IGJsdWUpIHwgKGFscGhhIDw8IDB4MTgpKSkgJiAweGZmZmZmZmZmTCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZyb21BcmdiKGludCBhcmdiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihhcmdiICYgKChsb25nKTB4ZmZmZmZmZmZMKSwgU3RhdGVBUkdCVmFsdWVWYWxpZCwgbnVsbCwgKEtub3duQ29sb3IpMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZyb21BcmdiKGludCBhbHBoYSwgaW50IHJlZCwgaW50IGdyZWVuLCBpbnQgYmx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENoZWNrQnl0ZShhbHBoYSk7XHJcbiAgICAgICAgICAgIENoZWNrQnl0ZShyZWQpO1xyXG4gICAgICAgICAgICBDaGVja0J5dGUoZ3JlZW4pO1xyXG4gICAgICAgICAgICBDaGVja0J5dGUoYmx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoTWFrZUFyZ2IoKGJ5dGUpYWxwaGEsIChieXRlKXJlZCwgKGJ5dGUpZ3JlZW4sIChieXRlKWJsdWUpLCBTdGF0ZUFSR0JWYWx1ZVZhbGlkLCBudWxsLCAoS25vd25Db2xvcikwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29sb3IgRnJvbUFyZ2IoaW50IGFscGhhLCBDb2xvciBiYXNlQ29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja0J5dGUoYWxwaGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKE1ha2VBcmdiKChieXRlKWFscGhhLCBiYXNlQ29sb3IuUiwgYmFzZUNvbG9yLkcsIGJhc2VDb2xvci5CKSwgU3RhdGVBUkdCVmFsdWVWYWxpZCwgbnVsbCwgKEtub3duQ29sb3IpMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZyb21BcmdiKGludCByZWQsIGludCBncmVlbiwgaW50IGJsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRnJvbUFyZ2IoMHhmZiwgcmVkLCBncmVlbiwgYmx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNFbnVtVmFsaWQoRW51bSBlbnVtVmFsdWUsIGludCB2YWx1ZSwgaW50IG1pblZhbHVlLCBpbnQgbWF4VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKCh2YWx1ZSA+PSBtaW5WYWx1ZSkgJiYgKHZhbHVlIDw9IG1heFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbG9yIEZyb21Lbm93bkNvbG9yKEtub3duQ29sb3IgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKGNvbG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgY29tcG9uZW50VG9IZXgoYnl0ZSB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gdmFsdWUuVG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICByZXR1cm4gKHguTGVuZ3RoID09IDEgPyBcIjBcIiA6IFwiXCIpICsgeDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9IZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoQSAhPSAyNTUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwiI3swfXsxfXsyfXszfVwiLCBjb21wb25lbnRUb0hleChBKSwgY29tcG9uZW50VG9IZXgoUiksIGNvbXBvbmVudFRvSGV4KEcpLCBjb21wb25lbnRUb0hleChCKSk7IC8vIFwiI1wiICsgKDE1NSkudG9TdHJpbmcoMTYpICsgKDEwMikudG9TdHJpbmcoMTYpICsgKDEwMikudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCIjezB9ezF9ezJ9XCIsIGNvbXBvbmVudFRvSGV4KFIpLCBjb21wb25lbnRUb0hleChHKSwgY29tcG9uZW50VG9IZXgoQikpOyAvLyBcIiNcIiArICgxNTUpLnRvU3RyaW5nKDE2KSArICgxMDIpLnRvU3RyaW5nKDE2KSArICgxMDIpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBGcm9tSGV4KHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlLlN0YXJ0c1dpdGgoXCIjXCIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZyb21IZXgodmFsdWUuU3Vic3RyaW5nKDEpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29sb3IuRnJvbUFyZ2IoR2xvYmFsLlBhcnNlSW50KHZhbHVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBHZXRCcmlnaHRuZXNzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZsb2F0IHogPSBSIC8gcTtcclxuICAgICAgICAgICAgZmxvYXQgeCA9IEcgLyBxO1xyXG4gICAgICAgICAgICBmbG9hdCBjID0gQiAvIHE7XHJcbiAgICAgICAgICAgIGZsb2F0IHYgPSB6O1xyXG4gICAgICAgICAgICBmbG9hdCBiID0gejtcclxuICAgICAgICAgICAgaWYoeCA+IHYpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHYgPSB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGMgPiB2KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ID0gYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih4IDwgYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYiA9IHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoYyA8IGIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGIgPSBjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoKHYgKyBiKSAvIDJmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBHZXRIdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoKHRoaXMuUiA9PSB0aGlzLkcpICYmICh0aGlzLkcgPT0gdGhpcy5CKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDBmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZsb2F0IHogPSBSIC8gcTtcclxuICAgICAgICAgICAgZmxvYXQgeCA9IEcgLyBxO1xyXG4gICAgICAgICAgICBmbG9hdCBjID0gQiAvIHE7XHJcbiAgICAgICAgICAgIGZsb2F0IHYgPSAwZjtcclxuICAgICAgICAgICAgZmxvYXQgYiA9IHo7XHJcbiAgICAgICAgICAgIGZsb2F0IG4gPSB6O1xyXG4gICAgICAgICAgICBpZih4ID4gYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYiA9IHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoYyA+IGIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGIgPSBjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHggPCBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuID0geDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjIDwgbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbiA9IGM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmxvYXQgbnVtNiA9IGIgLSBuO1xyXG4gICAgICAgICAgICBpZih6ID09IGIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHYgPSAoeCAtIGMpIC8gbnVtNjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHggPT0gYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdiA9IDJmICsgKChjIC0geikgLyBudW02KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGMgPT0gYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdiA9IDRmICsgKCh6IC0geCkgLyBudW02KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2ICo9IDYwZjtcclxuICAgICAgICAgICAgaWYodiA8IDBmKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ICs9IDM2MGY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmbG9hdCBxID0gMjU1ZjtcclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IEdldFNhdHVyYXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmxvYXQgeiA9IFIgLyBxO1xyXG4gICAgICAgICAgICBmbG9hdCB4ID0gRyAvIHE7XHJcbiAgICAgICAgICAgIGZsb2F0IGMgPSBCIC8gcTtcclxuICAgICAgICAgICAgZmxvYXQgdiA9IDBmO1xyXG4gICAgICAgICAgICBmbG9hdCBiID0gejtcclxuICAgICAgICAgICAgZmxvYXQgbiA9IHo7XHJcbiAgICAgICAgICAgIGlmKHggPiBiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiID0geDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjID4gYilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYiA9IGM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoeCA8IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG4gPSB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGMgPCBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuID0gYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihiID09IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZsb2F0IG0gPSAoYiArIG4pIC8gMmY7XHJcbiAgICAgICAgICAgIGlmKG0gPD0gMC41KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKChiIC0gbikgLyAoYiArIG4pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKChiIC0gbikgLyAoKDJmIC0gYikgLSBuKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFRvQXJnYigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGludCl0aGlzLlZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEtub3duQ29sb3IgVG9Lbm93bkNvbG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoS25vd25Db2xvcil0aGlzLmtub3duQ29sb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKDB4MjApO1xyXG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChiYXNlLkdldFR5cGUoKS5OYW1lKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCIgW1wiKTtcclxuICAgICAgICAgICAgaWYoKHRoaXMuc3RhdGUgJiBTdGF0ZU5hbWVWYWxpZCkgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQodGhpcy5OYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKCh0aGlzLnN0YXRlICYgU3RhdGVLbm93bkNvbG9yVmFsaWQpICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHRoaXMuTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZigodGhpcy5zdGF0ZSAmIFN0YXRlVmFsdWVNYXNrKSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZEZvcm1hdChcIkE9ezB9LCBSPXsxfSwgRz17Mn0sIEI9ezN9XCIsIEEsIFIsIEcsIEIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJFbXB0eVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIl1cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oQ29sb3IgbGVmdCwgQ29sb3IgcmlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZigoKGxlZnQudmFsdWUgIT0gcmlnaHQudmFsdWUpIHx8IChsZWZ0LnN0YXRlICE9IHJpZ2h0LnN0YXRlKSkgfHwgKGxlZnQua25vd25Db2xvciAhPSByaWdodC5rbm93bkNvbG9yKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoKGxlZnQubmFtZSA9PSByaWdodC5uYW1lKSB8fCAoKChsZWZ0Lm5hbWUgIT0gbnVsbCkgJiYgKHJpZ2h0Lm5hbWUgIT0gbnVsbCkpICYmIGxlZnQubmFtZS5FcXVhbHMocmlnaHQubmFtZSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShDb2xvciBsZWZ0LCBDb2xvciByaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKGxlZnQgPT0gcmlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihvYmogaXMgQ29sb3IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbG9yIGNvbG9yID0gKENvbG9yKW9iajtcclxuICAgICAgICAgICAgICAgIGlmKCgodGhpcy52YWx1ZSA9PSBjb2xvci52YWx1ZSkgJiYgKHRoaXMuc3RhdGUgPT0gY29sb3Iuc3RhdGUpKSAmJiAodGhpcy5rbm93bkNvbG9yID09IGNvbG9yLmtub3duQ29sb3IpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKHRoaXMubmFtZSA9PSBjb2xvci5uYW1lKSB8fCAoKCh0aGlzLm5hbWUgIT0gbnVsbCkgJiYgKGNvbG9yLm5hbWUgIT0gbnVsbCkpICYmIHRoaXMubmFtZS5FcXVhbHModGhpcy5uYW1lKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgodGhpcy52YWx1ZS5HZXRIYXNoQ29kZSgpIF4gdGhpcy5zdGF0ZS5HZXRIYXNoQ29kZSgpKSBeIHRoaXMua25vd25Db2xvci5HZXRIYXNoQ29kZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBDb2xvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbXB0eSA9IG5ldyBDb2xvcigpO1xyXG4gICAgICAgICAgICBTdGF0ZUtub3duQ29sb3JWYWxpZCA9IDE7XHJcbiAgICAgICAgICAgIFN0YXRlQVJHQlZhbHVlVmFsaWQgPSAyO1xyXG4gICAgICAgICAgICBTdGF0ZVZhbHVlTWFzayA9IFN0YXRlQVJHQlZhbHVlVmFsaWQ7XHJcbiAgICAgICAgICAgIFN0YXRlTmFtZVZhbGlkID0gODtcclxuICAgICAgICAgICAgTm90RGVmaW5lZFZhbHVlID0gMEw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIEtub3duQ29sb3JcclxuICAgIHtcclxuICAgICAgICBBY3RpdmVCb3JkZXIgPSAxLFxyXG4gICAgICAgIEFjdGl2ZUNhcHRpb24gPSAyLFxyXG4gICAgICAgIEFjdGl2ZUNhcHRpb25UZXh0ID0gMyxcclxuICAgICAgICBBbGljZUJsdWUgPSAweDFjLFxyXG4gICAgICAgIEFudGlxdWVXaGl0ZSA9IDB4MWQsXHJcbiAgICAgICAgQXBwV29ya3NwYWNlID0gNCxcclxuICAgICAgICBBcXVhID0gMzAsXHJcbiAgICAgICAgQXF1YW1hcmluZSA9IDB4MWYsXHJcbiAgICAgICAgQXp1cmUgPSAweDIwLFxyXG4gICAgICAgIEJlaWdlID0gMHgyMSxcclxuICAgICAgICBCaXNxdWUgPSAweDIyLFxyXG4gICAgICAgIEJsYWNrID0gMHgyMyxcclxuICAgICAgICBCbGFuY2hlZEFsbW9uZCA9IDB4MjQsXHJcbiAgICAgICAgQmx1ZSA9IDB4MjUsXHJcbiAgICAgICAgQmx1ZVZpb2xldCA9IDB4MjYsXHJcbiAgICAgICAgQnJvd24gPSAweDI3LFxyXG4gICAgICAgIEJ1cmx5V29vZCA9IDQwLFxyXG4gICAgICAgIEJ1dHRvbkZhY2UgPSAweGE4LFxyXG4gICAgICAgIEJ1dHRvbkhpZ2hsaWdodCA9IDB4YTksXHJcbiAgICAgICAgQnV0dG9uU2hhZG93ID0gMTcwLFxyXG4gICAgICAgIENhZGV0Qmx1ZSA9IDB4MjksXHJcbiAgICAgICAgQ2hhcnRyZXVzZSA9IDB4MmEsXHJcbiAgICAgICAgQ2hvY29sYXRlID0gMHgyYixcclxuICAgICAgICBDb250cm9sID0gNSxcclxuICAgICAgICBDb250cm9sRGFyayA9IDYsXHJcbiAgICAgICAgQ29udHJvbERhcmtEYXJrID0gNyxcclxuICAgICAgICBDb250cm9sTGlnaHQgPSA4LFxyXG4gICAgICAgIENvbnRyb2xMaWdodExpZ2h0ID0gOSxcclxuICAgICAgICBDb250cm9sVGV4dCA9IDEwLFxyXG4gICAgICAgIENvcmFsID0gMHgyYyxcclxuICAgICAgICBDb3JuZmxvd2VyQmx1ZSA9IDB4MmQsXHJcbiAgICAgICAgQ29ybnNpbGsgPSAweDJlLFxyXG4gICAgICAgIENyaW1zb24gPSAweDJmLFxyXG4gICAgICAgIEN5YW4gPSAweDMwLFxyXG4gICAgICAgIERhcmtCbHVlID0gMHgzMSxcclxuICAgICAgICBEYXJrQ3lhbiA9IDUwLFxyXG4gICAgICAgIERhcmtHb2xkZW5yb2QgPSAweDMzLFxyXG4gICAgICAgIERhcmtHcmF5ID0gMHgzNCxcclxuICAgICAgICBEYXJrR3JlZW4gPSAweDM1LFxyXG4gICAgICAgIERhcmtLaGFraSA9IDB4MzYsXHJcbiAgICAgICAgRGFya01hZ2VudGEgPSAweDM3LFxyXG4gICAgICAgIERhcmtPbGl2ZUdyZWVuID0gMHgzOCxcclxuICAgICAgICBEYXJrT3JhbmdlID0gMHgzOSxcclxuICAgICAgICBEYXJrT3JjaGlkID0gMHgzYSxcclxuICAgICAgICBEYXJrUmVkID0gMHgzYixcclxuICAgICAgICBEYXJrU2FsbW9uID0gNjAsXHJcbiAgICAgICAgRGFya1NlYUdyZWVuID0gMHgzZCxcclxuICAgICAgICBEYXJrU2xhdGVCbHVlID0gMHgzZSxcclxuICAgICAgICBEYXJrU2xhdGVHcmF5ID0gMHgzZixcclxuICAgICAgICBEYXJrVHVycXVvaXNlID0gMHg0MCxcclxuICAgICAgICBEYXJrVmlvbGV0ID0gMHg0MSxcclxuICAgICAgICBEZWVwUGluayA9IDB4NDIsXHJcbiAgICAgICAgRGVlcFNreUJsdWUgPSAweDQzLFxyXG4gICAgICAgIERlc2t0b3AgPSAxMSxcclxuICAgICAgICBEaW1HcmF5ID0gMHg0NCxcclxuICAgICAgICBEb2RnZXJCbHVlID0gMHg0NSxcclxuICAgICAgICBGaXJlYnJpY2sgPSA3MCxcclxuICAgICAgICBGbG9yYWxXaGl0ZSA9IDB4NDcsXHJcbiAgICAgICAgRm9yZXN0R3JlZW4gPSAweDQ4LFxyXG4gICAgICAgIEZ1Y2hzaWEgPSAweDQ5LFxyXG4gICAgICAgIEdhaW5zYm9ybyA9IDB4NGEsXHJcbiAgICAgICAgR2hvc3RXaGl0ZSA9IDB4NGIsXHJcbiAgICAgICAgR29sZCA9IDB4NGMsXHJcbiAgICAgICAgR29sZGVucm9kID0gMHg0ZCxcclxuICAgICAgICBHcmFkaWVudEFjdGl2ZUNhcHRpb24gPSAweGFiLFxyXG4gICAgICAgIEdyYWRpZW50SW5hY3RpdmVDYXB0aW9uID0gMHhhYyxcclxuICAgICAgICBHcmF5ID0gMHg0ZSxcclxuICAgICAgICBHcmF5VGV4dCA9IDEyLFxyXG4gICAgICAgIEdyZWVuID0gMHg0ZixcclxuICAgICAgICBHcmVlblllbGxvdyA9IDgwLFxyXG4gICAgICAgIEhpZ2hsaWdodCA9IDEzLFxyXG4gICAgICAgIEhpZ2hsaWdodFRleHQgPSAxNCxcclxuICAgICAgICBIb25leWRldyA9IDB4NTEsXHJcbiAgICAgICAgSG90UGluayA9IDB4NTIsXHJcbiAgICAgICAgSG90VHJhY2sgPSAxNSxcclxuICAgICAgICBJbmFjdGl2ZUJvcmRlciA9IDB4MTAsXHJcbiAgICAgICAgSW5hY3RpdmVDYXB0aW9uID0gMHgxMSxcclxuICAgICAgICBJbmFjdGl2ZUNhcHRpb25UZXh0ID0gMHgxMixcclxuICAgICAgICBJbmRpYW5SZWQgPSAweDUzLFxyXG4gICAgICAgIEluZGlnbyA9IDB4NTQsXHJcbiAgICAgICAgSW5mbyA9IDB4MTMsXHJcbiAgICAgICAgSW5mb1RleHQgPSAyMCxcclxuICAgICAgICBJdm9yeSA9IDB4NTUsXHJcbiAgICAgICAgS2hha2kgPSAweDU2LFxyXG4gICAgICAgIExhdmVuZGVyID0gMHg1NyxcclxuICAgICAgICBMYXZlbmRlckJsdXNoID0gMHg1OCxcclxuICAgICAgICBMYXduR3JlZW4gPSAweDU5LFxyXG4gICAgICAgIExlbW9uQ2hpZmZvbiA9IDkwLFxyXG4gICAgICAgIExpZ2h0Qmx1ZSA9IDB4NWIsXHJcbiAgICAgICAgTGlnaHRDb3JhbCA9IDB4NWMsXHJcbiAgICAgICAgTGlnaHRDeWFuID0gMHg1ZCxcclxuICAgICAgICBMaWdodEdvbGRlbnJvZFllbGxvdyA9IDB4NWUsXHJcbiAgICAgICAgTGlnaHRHcmF5ID0gMHg1ZixcclxuICAgICAgICBMaWdodEdyZWVuID0gMHg2MCxcclxuICAgICAgICBMaWdodFBpbmsgPSAweDYxLFxyXG4gICAgICAgIExpZ2h0U2FsbW9uID0gMHg2MixcclxuICAgICAgICBMaWdodFNlYUdyZWVuID0gMHg2MyxcclxuICAgICAgICBMaWdodFNreUJsdWUgPSAxMDAsXHJcbiAgICAgICAgTGlnaHRTbGF0ZUdyYXkgPSAweDY1LFxyXG4gICAgICAgIExpZ2h0U3RlZWxCbHVlID0gMHg2NixcclxuICAgICAgICBMaWdodFllbGxvdyA9IDB4NjcsXHJcbiAgICAgICAgTGltZSA9IDB4NjgsXHJcbiAgICAgICAgTGltZUdyZWVuID0gMHg2OSxcclxuICAgICAgICBMaW5lbiA9IDB4NmEsXHJcbiAgICAgICAgTWFnZW50YSA9IDB4NmIsXHJcbiAgICAgICAgTWFyb29uID0gMHg2YyxcclxuICAgICAgICBNZWRpdW1BcXVhbWFyaW5lID0gMHg2ZCxcclxuICAgICAgICBNZWRpdW1CbHVlID0gMTEwLFxyXG4gICAgICAgIE1lZGl1bU9yY2hpZCA9IDB4NmYsXHJcbiAgICAgICAgTWVkaXVtUHVycGxlID0gMHg3MCxcclxuICAgICAgICBNZWRpdW1TZWFHcmVlbiA9IDB4NzEsXHJcbiAgICAgICAgTWVkaXVtU2xhdGVCbHVlID0gMHg3MixcclxuICAgICAgICBNZWRpdW1TcHJpbmdHcmVlbiA9IDB4NzMsXHJcbiAgICAgICAgTWVkaXVtVHVycXVvaXNlID0gMHg3NCxcclxuICAgICAgICBNZWRpdW1WaW9sZXRSZWQgPSAweDc1LFxyXG4gICAgICAgIE1lbnUgPSAweDE1LFxyXG4gICAgICAgIE1lbnVCYXIgPSAweGFkLFxyXG4gICAgICAgIE1lbnVIaWdobGlnaHQgPSAweGFlLFxyXG4gICAgICAgIE1lbnVUZXh0ID0gMHgxNixcclxuICAgICAgICBNaWRuaWdodEJsdWUgPSAweDc2LFxyXG4gICAgICAgIE1pbnRDcmVhbSA9IDB4NzcsXHJcbiAgICAgICAgTWlzdHlSb3NlID0gMTIwLFxyXG4gICAgICAgIE1vY2Nhc2luID0gMHg3OSxcclxuICAgICAgICBOYXZham9XaGl0ZSA9IDB4N2EsXHJcbiAgICAgICAgTmF2eSA9IDB4N2IsXHJcbiAgICAgICAgT2xkTGFjZSA9IDB4N2MsXHJcbiAgICAgICAgT2xpdmUgPSAweDdkLFxyXG4gICAgICAgIE9saXZlRHJhYiA9IDB4N2UsXHJcbiAgICAgICAgT3JhbmdlID0gMHg3ZixcclxuICAgICAgICBPcmFuZ2VSZWQgPSAweDgwLFxyXG4gICAgICAgIE9yY2hpZCA9IDB4ODEsXHJcbiAgICAgICAgUGFsZUdvbGRlbnJvZCA9IDEzMCxcclxuICAgICAgICBQYWxlR3JlZW4gPSAweDgzLFxyXG4gICAgICAgIFBhbGVUdXJxdW9pc2UgPSAweDg0LFxyXG4gICAgICAgIFBhbGVWaW9sZXRSZWQgPSAweDg1LFxyXG4gICAgICAgIFBhcGF5YVdoaXAgPSAweDg2LFxyXG4gICAgICAgIFBlYWNoUHVmZiA9IDB4ODcsXHJcbiAgICAgICAgUGVydSA9IDB4ODgsXHJcbiAgICAgICAgUGluayA9IDB4ODksXHJcbiAgICAgICAgUGx1bSA9IDB4OGEsXHJcbiAgICAgICAgUG93ZGVyQmx1ZSA9IDB4OGIsXHJcbiAgICAgICAgUHVycGxlID0gMTQwLFxyXG4gICAgICAgIFJlZCA9IDB4OGQsXHJcbiAgICAgICAgUm9zeUJyb3duID0gMHg4ZSxcclxuICAgICAgICBSb3lhbEJsdWUgPSAweDhmLFxyXG4gICAgICAgIFNhZGRsZUJyb3duID0gMHg5MCxcclxuICAgICAgICBTYWxtb24gPSAweDkxLFxyXG4gICAgICAgIFNhbmR5QnJvd24gPSAweDkyLFxyXG4gICAgICAgIFNjcm9sbEJhciA9IDB4MTcsXHJcbiAgICAgICAgU2VhR3JlZW4gPSAweDkzLFxyXG4gICAgICAgIFNlYVNoZWxsID0gMHg5NCxcclxuICAgICAgICBTaWVubmEgPSAweDk1LFxyXG4gICAgICAgIFNpbHZlciA9IDE1MCxcclxuICAgICAgICBTa3lCbHVlID0gMHg5NyxcclxuICAgICAgICBTbGF0ZUJsdWUgPSAweDk4LFxyXG4gICAgICAgIFNsYXRlR3JheSA9IDB4OTksXHJcbiAgICAgICAgU25vdyA9IDB4OWEsXHJcbiAgICAgICAgU3ByaW5nR3JlZW4gPSAweDliLFxyXG4gICAgICAgIFN0ZWVsQmx1ZSA9IDB4OWMsXHJcbiAgICAgICAgVGFuID0gMHg5ZCxcclxuICAgICAgICBUZWFsID0gMHg5ZSxcclxuICAgICAgICBUaGlzdGxlID0gMHg5ZixcclxuICAgICAgICBUb21hdG8gPSAxNjAsXHJcbiAgICAgICAgVHJhbnNwYXJlbnQgPSAweDFiLFxyXG4gICAgICAgIFR1cnF1b2lzZSA9IDB4YTEsXHJcbiAgICAgICAgVmlvbGV0ID0gMHhhMixcclxuICAgICAgICBXaGVhdCA9IDB4YTMsXHJcbiAgICAgICAgV2hpdGUgPSAweGE0LFxyXG4gICAgICAgIFdoaXRlU21va2UgPSAweGE1LFxyXG4gICAgICAgIFdpbmRvdyA9IDB4MTgsXHJcbiAgICAgICAgV2luZG93RnJhbWUgPSAweDE5LFxyXG4gICAgICAgIFdpbmRvd1RleHQgPSAweDFhLFxyXG4gICAgICAgIFllbGxvdyA9IDB4YTYsXHJcbiAgICAgICAgWWVsbG93R3JlZW4gPSAweGE3XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJuYWwgc3RhdGljIGNsYXNzIEtub3duQ29sb3JUYWJsZVxyXG4gICAge1xyXG4gICAgICAgIC8vIEZpZWxkc1xyXG4gICAgICAgIHByaXZhdGUgY29uc3QgaW50IEFscGhhU2hpZnQgPSAweDE4O1xyXG5cclxuICAgICAgICBwcml2YXRlIGNvbnN0IGludCBCbHVlU2hpZnQgPSAwO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0cmluZ1tdIGNvbG9yTmFtZVRhYmxlO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludFtdIGNvbG9yVGFibGU7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgR3JlZW5TaGlmdCA9IDg7XHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgUmVkU2hpZnQgPSAweDEwO1xyXG4gICAgICAgIHByaXZhdGUgY29uc3QgaW50IFdpbjMyQmx1ZVNoaWZ0ID0gMHgxMDtcclxuICAgICAgICBwcml2YXRlIGNvbnN0IGludCBXaW4zMkdyZWVuU2hpZnQgPSA4O1xyXG4gICAgICAgIHByaXZhdGUgY29uc3QgaW50IFdpbjMyUmVkU2hpZnQgPSAwO1xyXG5cclxuICAgICAgICAvLyBNZXRob2RzXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb2xvciBBcmdiVG9Lbm93bkNvbG9yKGludCB0YXJnZXRBUkdCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRW5zdXJlQ29sb3JUYWJsZSgpO1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY29sb3JUYWJsZS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG51bTIgPSBjb2xvclRhYmxlW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYobnVtMiA9PSB0YXJnZXRBUkdCKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yIGNvbG9yID0gQ29sb3IuRnJvbUtub3duQ29sb3IoKEtub3duQ29sb3IpaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWNvbG9yLklzU3lzdGVtQ29sb3IpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBDb2xvci5Gcm9tQXJnYih0YXJnZXRBUkdCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBFbmNvZGUoaW50IGFscGhhLCBpbnQgcmVkLCBpbnQgZ3JlZW4sIGludCBibHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICgoKChyZWQgPDwgMHgxMCkgfCAoZ3JlZW4gPDwgOCkpIHwgYmx1ZSkgfCAoYWxwaGEgPDwgMHgxOCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBFbnN1cmVDb2xvck5hbWVUYWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjb2xvck5hbWVUYWJsZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJbml0Q29sb3JOYW1lVGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBFbnN1cmVDb2xvclRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGNvbG9yVGFibGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5pdENvbG9yVGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW50IEZyb21XaW4zMlZhbHVlKGludCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbmNvZGUoMHhmZiwgdmFsdWUgJiAweGZmLCAodmFsdWUgPj4gOCkgJiAweGZmLCAodmFsdWUgPj4gMHgxMCkgJiAweGZmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgSW5pdENvbG9yTmFtZVRhYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZ1tdIHMgPSBuZXcgc3RyaW5nWzB4YWZdO1xyXG4gICAgICAgICAgICBzWzFdID0gXCJBY3RpdmVCb3JkZXJcIjtcclxuICAgICAgICAgICAgc1syXSA9IFwiQWN0aXZlQ2FwdGlvblwiO1xyXG4gICAgICAgICAgICBzWzNdID0gXCJBY3RpdmVDYXB0aW9uVGV4dFwiO1xyXG4gICAgICAgICAgICBzWzRdID0gXCJBcHBXb3Jrc3BhY2VcIjtcclxuICAgICAgICAgICAgc1sweGE4XSA9IFwiQnV0dG9uRmFjZVwiO1xyXG4gICAgICAgICAgICBzWzB4YTldID0gXCJCdXR0b25IaWdobGlnaHRcIjtcclxuICAgICAgICAgICAgc1sxNzBdID0gXCJCdXR0b25TaGFkb3dcIjtcclxuICAgICAgICAgICAgc1s1XSA9IFwiQ29udHJvbFwiO1xyXG4gICAgICAgICAgICBzWzZdID0gXCJDb250cm9sRGFya1wiO1xyXG4gICAgICAgICAgICBzWzddID0gXCJDb250cm9sRGFya0RhcmtcIjtcclxuICAgICAgICAgICAgc1s4XSA9IFwiQ29udHJvbExpZ2h0XCI7XHJcbiAgICAgICAgICAgIHNbOV0gPSBcIkNvbnRyb2xMaWdodExpZ2h0XCI7XHJcbiAgICAgICAgICAgIHNbMTBdID0gXCJDb250cm9sVGV4dFwiO1xyXG4gICAgICAgICAgICBzWzExXSA9IFwiRGVza3RvcFwiO1xyXG4gICAgICAgICAgICBzWzB4YWJdID0gXCJHcmFkaWVudEFjdGl2ZUNhcHRpb25cIjtcclxuICAgICAgICAgICAgc1sweGFjXSA9IFwiR3JhZGllbnRJbmFjdGl2ZUNhcHRpb25cIjtcclxuICAgICAgICAgICAgc1sxMl0gPSBcIkdyYXlUZXh0XCI7XHJcbiAgICAgICAgICAgIHNbMTNdID0gXCJIaWdobGlnaHRcIjtcclxuICAgICAgICAgICAgc1sxNF0gPSBcIkhpZ2hsaWdodFRleHRcIjtcclxuICAgICAgICAgICAgc1sxNV0gPSBcIkhvdFRyYWNrXCI7XHJcbiAgICAgICAgICAgIHNbMHgxMF0gPSBcIkluYWN0aXZlQm9yZGVyXCI7XHJcbiAgICAgICAgICAgIHNbMHgxMV0gPSBcIkluYWN0aXZlQ2FwdGlvblwiO1xyXG4gICAgICAgICAgICBzWzB4MTJdID0gXCJJbmFjdGl2ZUNhcHRpb25UZXh0XCI7XHJcbiAgICAgICAgICAgIHNbMHgxM10gPSBcIkluZm9cIjtcclxuICAgICAgICAgICAgc1syMF0gPSBcIkluZm9UZXh0XCI7XHJcbiAgICAgICAgICAgIHNbMHgxNV0gPSBcIk1lbnVcIjtcclxuICAgICAgICAgICAgc1sweGFkXSA9IFwiTWVudUJhclwiO1xyXG4gICAgICAgICAgICBzWzB4YWVdID0gXCJNZW51SGlnaGxpZ2h0XCI7XHJcbiAgICAgICAgICAgIHNbMHgxNl0gPSBcIk1lbnVUZXh0XCI7XHJcbiAgICAgICAgICAgIHNbMHgxN10gPSBcIlNjcm9sbEJhclwiO1xyXG4gICAgICAgICAgICBzWzB4MThdID0gXCJXaW5kb3dcIjtcclxuICAgICAgICAgICAgc1sweDE5XSA9IFwiV2luZG93RnJhbWVcIjtcclxuICAgICAgICAgICAgc1sweDFhXSA9IFwiV2luZG93VGV4dFwiO1xyXG4gICAgICAgICAgICBzWzB4MWJdID0gXCJUcmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBzWzB4MWNdID0gXCJBbGljZUJsdWVcIjtcclxuICAgICAgICAgICAgc1sweDFkXSA9IFwiQW50aXF1ZVdoaXRlXCI7XHJcbiAgICAgICAgICAgIHNbMzBdID0gXCJBcXVhXCI7XHJcbiAgICAgICAgICAgIHNbMHgxZl0gPSBcIkFxdWFtYXJpbmVcIjtcclxuICAgICAgICAgICAgc1sweDIwXSA9IFwiQXp1cmVcIjtcclxuICAgICAgICAgICAgc1sweDIxXSA9IFwiQmVpZ2VcIjtcclxuICAgICAgICAgICAgc1sweDIyXSA9IFwiQmlzcXVlXCI7XHJcbiAgICAgICAgICAgIHNbMHgyM10gPSBcIkJsYWNrXCI7XHJcbiAgICAgICAgICAgIHNbMHgyNF0gPSBcIkJsYW5jaGVkQWxtb25kXCI7XHJcbiAgICAgICAgICAgIHNbMHgyNV0gPSBcIkJsdWVcIjtcclxuICAgICAgICAgICAgc1sweDI2XSA9IFwiQmx1ZVZpb2xldFwiO1xyXG4gICAgICAgICAgICBzWzB4MjddID0gXCJCcm93blwiO1xyXG4gICAgICAgICAgICBzWzQwXSA9IFwiQnVybHlXb29kXCI7XHJcbiAgICAgICAgICAgIHNbMHgyOV0gPSBcIkNhZGV0Qmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4MmFdID0gXCJDaGFydHJldXNlXCI7XHJcbiAgICAgICAgICAgIHNbMHgyYl0gPSBcIkNob2NvbGF0ZVwiO1xyXG4gICAgICAgICAgICBzWzB4MmNdID0gXCJDb3JhbFwiO1xyXG4gICAgICAgICAgICBzWzB4MmRdID0gXCJDb3JuZmxvd2VyQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4MmVdID0gXCJDb3Juc2lsa1wiO1xyXG4gICAgICAgICAgICBzWzB4MmZdID0gXCJDcmltc29uXCI7XHJcbiAgICAgICAgICAgIHNbMHgzMF0gPSBcIkN5YW5cIjtcclxuICAgICAgICAgICAgc1sweDMxXSA9IFwiRGFya0JsdWVcIjtcclxuICAgICAgICAgICAgc1s1MF0gPSBcIkRhcmtDeWFuXCI7XHJcbiAgICAgICAgICAgIHNbMHgzM10gPSBcIkRhcmtHb2xkZW5yb2RcIjtcclxuICAgICAgICAgICAgc1sweDM0XSA9IFwiRGFya0dyYXlcIjtcclxuICAgICAgICAgICAgc1sweDM1XSA9IFwiRGFya0dyZWVuXCI7XHJcbiAgICAgICAgICAgIHNbMHgzNl0gPSBcIkRhcmtLaGFraVwiO1xyXG4gICAgICAgICAgICBzWzB4MzddID0gXCJEYXJrTWFnZW50YVwiO1xyXG4gICAgICAgICAgICBzWzB4MzhdID0gXCJEYXJrT2xpdmVHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4MzldID0gXCJEYXJrT3JhbmdlXCI7XHJcbiAgICAgICAgICAgIHNbMHgzYV0gPSBcIkRhcmtPcmNoaWRcIjtcclxuICAgICAgICAgICAgc1sweDNiXSA9IFwiRGFya1JlZFwiO1xyXG4gICAgICAgICAgICBzWzYwXSA9IFwiRGFya1NhbG1vblwiO1xyXG4gICAgICAgICAgICBzWzB4M2RdID0gXCJEYXJrU2VhR3JlZW5cIjtcclxuICAgICAgICAgICAgc1sweDNlXSA9IFwiRGFya1NsYXRlQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4M2ZdID0gXCJEYXJrU2xhdGVHcmF5XCI7XHJcbiAgICAgICAgICAgIHNbMHg0MF0gPSBcIkRhcmtUdXJxdW9pc2VcIjtcclxuICAgICAgICAgICAgc1sweDQxXSA9IFwiRGFya1Zpb2xldFwiO1xyXG4gICAgICAgICAgICBzWzB4NDJdID0gXCJEZWVwUGlua1wiO1xyXG4gICAgICAgICAgICBzWzB4NDNdID0gXCJEZWVwU2t5Qmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NDRdID0gXCJEaW1HcmF5XCI7XHJcbiAgICAgICAgICAgIHNbMHg0NV0gPSBcIkRvZGdlckJsdWVcIjtcclxuICAgICAgICAgICAgc1s3MF0gPSBcIkZpcmVicmlja1wiO1xyXG4gICAgICAgICAgICBzWzB4NDddID0gXCJGbG9yYWxXaGl0ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NDhdID0gXCJGb3Jlc3RHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4NDldID0gXCJGdWNoc2lhXCI7XHJcbiAgICAgICAgICAgIHNbMHg0YV0gPSBcIkdhaW5zYm9yb1wiO1xyXG4gICAgICAgICAgICBzWzB4NGJdID0gXCJHaG9zdFdoaXRlXCI7XHJcbiAgICAgICAgICAgIHNbMHg0Y10gPSBcIkdvbGRcIjtcclxuICAgICAgICAgICAgc1sweDRkXSA9IFwiR29sZGVucm9kXCI7XHJcbiAgICAgICAgICAgIHNbMHg0ZV0gPSBcIkdyYXlcIjtcclxuICAgICAgICAgICAgc1sweDRmXSA9IFwiR3JlZW5cIjtcclxuICAgICAgICAgICAgc1s4MF0gPSBcIkdyZWVuWWVsbG93XCI7XHJcbiAgICAgICAgICAgIHNbMHg1MV0gPSBcIkhvbmV5ZGV3XCI7XHJcbiAgICAgICAgICAgIHNbMHg1Ml0gPSBcIkhvdFBpbmtcIjtcclxuICAgICAgICAgICAgc1sweDUzXSA9IFwiSW5kaWFuUmVkXCI7XHJcbiAgICAgICAgICAgIHNbMHg1NF0gPSBcIkluZGlnb1wiO1xyXG4gICAgICAgICAgICBzWzB4NTVdID0gXCJJdm9yeVwiO1xyXG4gICAgICAgICAgICBzWzB4NTZdID0gXCJLaGFraVwiO1xyXG4gICAgICAgICAgICBzWzB4NTddID0gXCJMYXZlbmRlclwiO1xyXG4gICAgICAgICAgICBzWzB4NThdID0gXCJMYXZlbmRlckJsdXNoXCI7XHJcbiAgICAgICAgICAgIHNbMHg1OV0gPSBcIkxhd25HcmVlblwiO1xyXG4gICAgICAgICAgICBzWzkwXSA9IFwiTGVtb25DaGlmZm9uXCI7XHJcbiAgICAgICAgICAgIHNbMHg1Yl0gPSBcIkxpZ2h0Qmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NWNdID0gXCJMaWdodENvcmFsXCI7XHJcbiAgICAgICAgICAgIHNbMHg1ZF0gPSBcIkxpZ2h0Q3lhblwiO1xyXG4gICAgICAgICAgICBzWzB4NWVdID0gXCJMaWdodEdvbGRlbnJvZFllbGxvd1wiO1xyXG4gICAgICAgICAgICBzWzB4NWZdID0gXCJMaWdodEdyYXlcIjtcclxuICAgICAgICAgICAgc1sweDYwXSA9IFwiTGlnaHRHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4NjFdID0gXCJMaWdodFBpbmtcIjtcclxuICAgICAgICAgICAgc1sweDYyXSA9IFwiTGlnaHRTYWxtb25cIjtcclxuICAgICAgICAgICAgc1sweDYzXSA9IFwiTGlnaHRTZWFHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzEwMF0gPSBcIkxpZ2h0U2t5Qmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NjVdID0gXCJMaWdodFNsYXRlR3JheVwiO1xyXG4gICAgICAgICAgICBzWzB4NjZdID0gXCJMaWdodFN0ZWVsQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NjddID0gXCJMaWdodFllbGxvd1wiO1xyXG4gICAgICAgICAgICBzWzB4NjhdID0gXCJMaW1lXCI7XHJcbiAgICAgICAgICAgIHNbMHg2OV0gPSBcIkxpbWVHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4NmFdID0gXCJMaW5lblwiO1xyXG4gICAgICAgICAgICBzWzB4NmJdID0gXCJNYWdlbnRhXCI7XHJcbiAgICAgICAgICAgIHNbMHg2Y10gPSBcIk1hcm9vblwiO1xyXG4gICAgICAgICAgICBzWzB4NmRdID0gXCJNZWRpdW1BcXVhbWFyaW5lXCI7XHJcbiAgICAgICAgICAgIHNbMTEwXSA9IFwiTWVkaXVtQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NmZdID0gXCJNZWRpdW1PcmNoaWRcIjtcclxuICAgICAgICAgICAgc1sweDcwXSA9IFwiTWVkaXVtUHVycGxlXCI7XHJcbiAgICAgICAgICAgIHNbMHg3MV0gPSBcIk1lZGl1bVNlYUdyZWVuXCI7XHJcbiAgICAgICAgICAgIHNbMHg3Ml0gPSBcIk1lZGl1bVNsYXRlQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NzNdID0gXCJNZWRpdW1TcHJpbmdHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4NzRdID0gXCJNZWRpdW1UdXJxdW9pc2VcIjtcclxuICAgICAgICAgICAgc1sweDc1XSA9IFwiTWVkaXVtVmlvbGV0UmVkXCI7XHJcbiAgICAgICAgICAgIHNbMHg3Nl0gPSBcIk1pZG5pZ2h0Qmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4NzddID0gXCJNaW50Q3JlYW1cIjtcclxuICAgICAgICAgICAgc1sxMjBdID0gXCJNaXN0eVJvc2VcIjtcclxuICAgICAgICAgICAgc1sweDc5XSA9IFwiTW9jY2FzaW5cIjtcclxuICAgICAgICAgICAgc1sweDdhXSA9IFwiTmF2YWpvV2hpdGVcIjtcclxuICAgICAgICAgICAgc1sweDdiXSA9IFwiTmF2eVwiO1xyXG4gICAgICAgICAgICBzWzB4N2NdID0gXCJPbGRMYWNlXCI7XHJcbiAgICAgICAgICAgIHNbMHg3ZF0gPSBcIk9saXZlXCI7XHJcbiAgICAgICAgICAgIHNbMHg3ZV0gPSBcIk9saXZlRHJhYlwiO1xyXG4gICAgICAgICAgICBzWzB4N2ZdID0gXCJPcmFuZ2VcIjtcclxuICAgICAgICAgICAgc1sweDgwXSA9IFwiT3JhbmdlUmVkXCI7XHJcbiAgICAgICAgICAgIHNbMHg4MV0gPSBcIk9yY2hpZFwiO1xyXG4gICAgICAgICAgICBzWzEzMF0gPSBcIlBhbGVHb2xkZW5yb2RcIjtcclxuICAgICAgICAgICAgc1sweDgzXSA9IFwiUGFsZUdyZWVuXCI7XHJcbiAgICAgICAgICAgIHNbMHg4NF0gPSBcIlBhbGVUdXJxdW9pc2VcIjtcclxuICAgICAgICAgICAgc1sweDg1XSA9IFwiUGFsZVZpb2xldFJlZFwiO1xyXG4gICAgICAgICAgICBzWzB4ODZdID0gXCJQYXBheWFXaGlwXCI7XHJcbiAgICAgICAgICAgIHNbMHg4N10gPSBcIlBlYWNoUHVmZlwiO1xyXG4gICAgICAgICAgICBzWzB4ODhdID0gXCJQZXJ1XCI7XHJcbiAgICAgICAgICAgIHNbMHg4OV0gPSBcIlBpbmtcIjtcclxuICAgICAgICAgICAgc1sweDhhXSA9IFwiUGx1bVwiO1xyXG4gICAgICAgICAgICBzWzB4OGJdID0gXCJQb3dkZXJCbHVlXCI7XHJcbiAgICAgICAgICAgIHNbMTQwXSA9IFwiUHVycGxlXCI7XHJcbiAgICAgICAgICAgIHNbMHg4ZF0gPSBcIlJlZFwiO1xyXG4gICAgICAgICAgICBzWzB4OGVdID0gXCJSb3N5QnJvd25cIjtcclxuICAgICAgICAgICAgc1sweDhmXSA9IFwiUm95YWxCbHVlXCI7XHJcbiAgICAgICAgICAgIHNbMHg5MF0gPSBcIlNhZGRsZUJyb3duXCI7XHJcbiAgICAgICAgICAgIHNbMHg5MV0gPSBcIlNhbG1vblwiO1xyXG4gICAgICAgICAgICBzWzB4OTJdID0gXCJTYW5keUJyb3duXCI7XHJcbiAgICAgICAgICAgIHNbMHg5M10gPSBcIlNlYUdyZWVuXCI7XHJcbiAgICAgICAgICAgIHNbMHg5NF0gPSBcIlNlYVNoZWxsXCI7XHJcbiAgICAgICAgICAgIHNbMHg5NV0gPSBcIlNpZW5uYVwiO1xyXG4gICAgICAgICAgICBzWzE1MF0gPSBcIlNpbHZlclwiO1xyXG4gICAgICAgICAgICBzWzB4OTddID0gXCJTa3lCbHVlXCI7XHJcbiAgICAgICAgICAgIHNbMHg5OF0gPSBcIlNsYXRlQmx1ZVwiO1xyXG4gICAgICAgICAgICBzWzB4OTldID0gXCJTbGF0ZUdyYXlcIjtcclxuICAgICAgICAgICAgc1sweDlhXSA9IFwiU25vd1wiO1xyXG4gICAgICAgICAgICBzWzB4OWJdID0gXCJTcHJpbmdHcmVlblwiO1xyXG4gICAgICAgICAgICBzWzB4OWNdID0gXCJTdGVlbEJsdWVcIjtcclxuICAgICAgICAgICAgc1sweDlkXSA9IFwiVGFuXCI7XHJcbiAgICAgICAgICAgIHNbMHg5ZV0gPSBcIlRlYWxcIjtcclxuICAgICAgICAgICAgc1sweDlmXSA9IFwiVGhpc3RsZVwiO1xyXG4gICAgICAgICAgICBzWzE2MF0gPSBcIlRvbWF0b1wiO1xyXG4gICAgICAgICAgICBzWzB4YTFdID0gXCJUdXJxdW9pc2VcIjtcclxuICAgICAgICAgICAgc1sweGEyXSA9IFwiVmlvbGV0XCI7XHJcbiAgICAgICAgICAgIHNbMHhhM10gPSBcIldoZWF0XCI7XHJcbiAgICAgICAgICAgIHNbMHhhNF0gPSBcIldoaXRlXCI7XHJcbiAgICAgICAgICAgIHNbMHhhNV0gPSBcIldoaXRlU21va2VcIjtcclxuICAgICAgICAgICAgc1sweGE2XSA9IFwiWWVsbG93XCI7XHJcbiAgICAgICAgICAgIHNbMHhhN10gPSBcIlllbGxvd0dyZWVuXCI7XHJcbiAgICAgICAgICAgIGNvbG9yTmFtZVRhYmxlID0gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgSW5pdENvbG9yVGFibGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50W10gYyA9IG5ldyBpbnRbMHhhZl07XHJcblxyXG4gICAgICAgICAgICBjWzB4MWJdID0gMHhmZmZmZmY7XHJcbiAgICAgICAgICAgIGNbMHgxY10gPSAtOTg0ODMzO1xyXG4gICAgICAgICAgICBjWzB4MWRdID0gLTMzMjg0MTtcclxuICAgICAgICAgICAgY1szMF0gPSAtMTY3MTE2ODE7XHJcbiAgICAgICAgICAgIGNbMHgxZl0gPSAtODM4ODY1MjtcclxuICAgICAgICAgICAgY1sweDIwXSA9IC05ODMwNDE7XHJcbiAgICAgICAgICAgIGNbMHgyMV0gPSAtNjU3OTU2O1xyXG4gICAgICAgICAgICBjWzB4MjJdID0gLTY5NzI7XHJcbiAgICAgICAgICAgIGNbMHgyM10gPSAtMTY3NzcyMTY7XHJcbiAgICAgICAgICAgIGNbMHgyNF0gPSAtNTE3MTtcclxuICAgICAgICAgICAgY1sweDI1XSA9IC0xNjc3Njk2MTtcclxuICAgICAgICAgICAgY1sweDI2XSA9IC03NzIyMDE0O1xyXG4gICAgICAgICAgICBjWzB4MjddID0gLTU5NTI5ODI7XHJcbiAgICAgICAgICAgIGNbNDBdID0gLTIxODA5ODU7XHJcbiAgICAgICAgICAgIGNbMHgyOV0gPSAtMTA1MTA2ODg7XHJcbiAgICAgICAgICAgIGNbMHgyYV0gPSAtODM4ODg2NDtcclxuICAgICAgICAgICAgY1sweDJiXSA9IC0yOTg3NzQ2O1xyXG4gICAgICAgICAgICBjWzB4MmNdID0gLTMyOTQ0O1xyXG4gICAgICAgICAgICBjWzB4MmRdID0gLTEwMTg1MjM1O1xyXG4gICAgICAgICAgICBjWzB4MmVdID0gLTE4Mjg7XHJcbiAgICAgICAgICAgIGNbMHgyZl0gPSAtMjM1NDExNjtcclxuICAgICAgICAgICAgY1sweDMwXSA9IC0xNjcxMTY4MTtcclxuICAgICAgICAgICAgY1sweDMxXSA9IC0xNjc3NzA3NztcclxuICAgICAgICAgICAgY1s1MF0gPSAtMTY3NDE0OTM7XHJcbiAgICAgICAgICAgIGNbMHgzM10gPSAtNDY4NDI3NztcclxuICAgICAgICAgICAgY1sweDM0XSA9IC01NjU4MTk5O1xyXG4gICAgICAgICAgICBjWzB4MzVdID0gLTE2NzUxNjE2O1xyXG4gICAgICAgICAgICBjWzB4MzZdID0gLTQzNDM5NTc7XHJcbiAgICAgICAgICAgIGNbMHgzN10gPSAtNzY2NzU3MztcclxuICAgICAgICAgICAgY1sweDM4XSA9IC0xMTE3OTIxNztcclxuICAgICAgICAgICAgY1sweDM5XSA9IC0yOTY5NjtcclxuICAgICAgICAgICAgY1sweDNhXSA9IC02NzM3MjA0O1xyXG4gICAgICAgICAgICBjWzB4M2JdID0gLTc2Njc3MTI7XHJcbiAgICAgICAgICAgIGNbNjBdID0gLTE0Njg4MDY7XHJcbiAgICAgICAgICAgIGNbMHgzZF0gPSAtNzM1NzMwMTtcclxuICAgICAgICAgICAgY1sweDNlXSA9IC0xMjA0Mjg2OTtcclxuICAgICAgICAgICAgY1sweDNmXSA9IC0xMzY3NjcyMTtcclxuICAgICAgICAgICAgY1sweDQwXSA9IC0xNjcyNDI3MTtcclxuICAgICAgICAgICAgY1sweDQxXSA9IC03MDc3Njc3O1xyXG4gICAgICAgICAgICBjWzB4NDJdID0gLTYwMjY5O1xyXG4gICAgICAgICAgICBjWzB4NDNdID0gLTE2NzI4MDY1O1xyXG4gICAgICAgICAgICBjWzB4NDRdID0gLTk4Njg5NTE7XHJcbiAgICAgICAgICAgIGNbMHg0NV0gPSAtMTQ3NzQwMTc7XHJcbiAgICAgICAgICAgIGNbNzBdID0gLTUxMDMwNzA7XHJcbiAgICAgICAgICAgIGNbMHg0N10gPSAtMTI5NjtcclxuICAgICAgICAgICAgY1sweDQ4XSA9IC0xNDUxMzM3NDtcclxuICAgICAgICAgICAgY1sweDQ5XSA9IC02NTI4MTtcclxuICAgICAgICAgICAgY1sweDRhXSA9IC0yMzAyNzU2O1xyXG4gICAgICAgICAgICBjWzB4NGJdID0gLTQ2MDU0NTtcclxuICAgICAgICAgICAgY1sweDRjXSA9IC0xMDQ5NjtcclxuICAgICAgICAgICAgY1sweDRkXSA9IC0yNDQ4MDk2O1xyXG4gICAgICAgICAgICBjWzB4NGVdID0gLTgzNTU3MTI7XHJcbiAgICAgICAgICAgIGNbMHg0Zl0gPSAtMTY3NDQ0NDg7XHJcbiAgICAgICAgICAgIGNbODBdID0gLTUzNzQxNjE7XHJcbiAgICAgICAgICAgIGNbMHg1MV0gPSAtOTgzMDU2O1xyXG4gICAgICAgICAgICBjWzB4NTJdID0gLTM4NDc2O1xyXG4gICAgICAgICAgICBjWzB4NTNdID0gLTMzMTg2OTI7XHJcbiAgICAgICAgICAgIGNbMHg1NF0gPSAtMTE4NjE4ODY7XHJcbiAgICAgICAgICAgIGNbMHg1NV0gPSAtMTY7XHJcbiAgICAgICAgICAgIGNbMHg1Nl0gPSAtOTg5NTU2O1xyXG4gICAgICAgICAgICBjWzB4NTddID0gLTE2NDQ4MDY7XHJcbiAgICAgICAgICAgIGNbMHg1OF0gPSAtMzg1MTtcclxuICAgICAgICAgICAgY1sweDU5XSA9IC04NTg2MjQwO1xyXG4gICAgICAgICAgICBjWzkwXSA9IC0xMzMxO1xyXG4gICAgICAgICAgICBjWzB4NWJdID0gLTUzODM5NjI7XHJcbiAgICAgICAgICAgIGNbMHg1Y10gPSAtMTAxNTY4MDtcclxuICAgICAgICAgICAgY1sweDVkXSA9IC0yMDMxNjE3O1xyXG4gICAgICAgICAgICBjWzB4NWVdID0gLTMyOTAwNjtcclxuICAgICAgICAgICAgY1sweDVmXSA9IC0yODk0ODkzO1xyXG4gICAgICAgICAgICBjWzB4NjBdID0gLTcyNzg5NjA7XHJcbiAgICAgICAgICAgIGNbMHg2MV0gPSAtMTg3NTE7XHJcbiAgICAgICAgICAgIGNbMHg2Ml0gPSAtMjQ0NTQ7XHJcbiAgICAgICAgICAgIGNbMHg2M10gPSAtMTQ2MzQzMjY7XHJcbiAgICAgICAgICAgIGNbMTAwXSA9IC03ODc2ODcwO1xyXG4gICAgICAgICAgICBjWzB4NjVdID0gLTg5NDM0NjM7XHJcbiAgICAgICAgICAgIGNbMHg2Nl0gPSAtNTE5MjQ4MjtcclxuICAgICAgICAgICAgY1sweDY3XSA9IC0zMjtcclxuICAgICAgICAgICAgY1sweDY4XSA9IC0xNjcxMTkzNjtcclxuICAgICAgICAgICAgY1sweDY5XSA9IC0xMzQ0Nzg4NjtcclxuICAgICAgICAgICAgY1sweDZhXSA9IC0zMzE1NDY7XHJcbiAgICAgICAgICAgIGNbMHg2Yl0gPSAtNjUyODE7XHJcbiAgICAgICAgICAgIGNbMHg2Y10gPSAtODM4ODYwODtcclxuICAgICAgICAgICAgY1sweDZkXSA9IC0xMDAzOTg5NDtcclxuICAgICAgICAgICAgY1sxMTBdID0gLTE2Nzc3MDExO1xyXG4gICAgICAgICAgICBjWzB4NmZdID0gLTQ1NjU1NDk7XHJcbiAgICAgICAgICAgIGNbMHg3MF0gPSAtNzExNDUzMztcclxuICAgICAgICAgICAgY1sweDcxXSA9IC0xMjc5OTExOTtcclxuICAgICAgICAgICAgY1sweDcyXSA9IC04Njg5NDI2O1xyXG4gICAgICAgICAgICBjWzB4NzNdID0gLTE2NzEzMDYyO1xyXG4gICAgICAgICAgICBjWzB4NzRdID0gLTEyMDA0OTE2O1xyXG4gICAgICAgICAgICBjWzB4NzVdID0gLTM3MzAwNDM7XHJcbiAgICAgICAgICAgIGNbMHg3Nl0gPSAtMTUxMzIzMDQ7XHJcbiAgICAgICAgICAgIGNbMHg3N10gPSAtNjU1MzY2O1xyXG4gICAgICAgICAgICBjWzEyMF0gPSAtNjk0MztcclxuICAgICAgICAgICAgY1sweDc5XSA9IC02OTg3O1xyXG4gICAgICAgICAgICBjWzB4N2FdID0gLTg1MzE7XHJcbiAgICAgICAgICAgIGNbMHg3Yl0gPSAtMTY3NzcwODg7XHJcbiAgICAgICAgICAgIGNbMHg3Y10gPSAtMTMzNjU4O1xyXG4gICAgICAgICAgICBjWzB4N2RdID0gLTgzNTU4NDA7XHJcbiAgICAgICAgICAgIGNbMHg3ZV0gPSAtOTcyODQ3NztcclxuICAgICAgICAgICAgY1sweDdmXSA9IC0yMzI5NjtcclxuICAgICAgICAgICAgY1sweDgwXSA9IC00Nzg3MjtcclxuICAgICAgICAgICAgY1sweDgxXSA9IC0yNDYxNDgyO1xyXG4gICAgICAgICAgICBjWzEzMF0gPSAtMTEyMDA4NjtcclxuICAgICAgICAgICAgY1sweDgzXSA9IC02NzUxMzM2O1xyXG4gICAgICAgICAgICBjWzB4ODRdID0gLTUyNDcyNTA7XHJcbiAgICAgICAgICAgIGNbMHg4NV0gPSAtMjM5NjAxMztcclxuICAgICAgICAgICAgY1sweDg2XSA9IC00MTM5O1xyXG4gICAgICAgICAgICBjWzB4ODddID0gLTk1NDM7XHJcbiAgICAgICAgICAgIGNbMHg4OF0gPSAtMzMwODIyNTtcclxuICAgICAgICAgICAgY1sweDg5XSA9IC0xNjE4MTtcclxuICAgICAgICAgICAgY1sweDhhXSA9IC0yMjUyNTc5O1xyXG4gICAgICAgICAgICBjWzB4OGJdID0gLTUxODUzMDY7XHJcbiAgICAgICAgICAgIGNbMTQwXSA9IC04Mzg4NDgwO1xyXG4gICAgICAgICAgICBjWzB4OGRdID0gLTY1NTM2O1xyXG4gICAgICAgICAgICBjWzB4OGVdID0gLTQ0MTk2OTc7XHJcbiAgICAgICAgICAgIGNbMHg4Zl0gPSAtMTI0OTAyNzE7XHJcbiAgICAgICAgICAgIGNbMHg5MF0gPSAtNzY1MDAyOTtcclxuICAgICAgICAgICAgY1sweDkxXSA9IC0zNjAzMzQ7XHJcbiAgICAgICAgICAgIGNbMHg5Ml0gPSAtNzQ0MzUyO1xyXG4gICAgICAgICAgICBjWzB4OTNdID0gLTEzNzI2ODg5O1xyXG4gICAgICAgICAgICBjWzB4OTRdID0gLTI1Nzg7XHJcbiAgICAgICAgICAgIGNbMHg5NV0gPSAtNjI3MDQxOTtcclxuICAgICAgICAgICAgY1sxNTBdID0gLTQxNDQ5NjA7XHJcbiAgICAgICAgICAgIGNbMHg5N10gPSAtNzg3Njg4NTtcclxuICAgICAgICAgICAgY1sweDk4XSA9IC05ODA3MTU1O1xyXG4gICAgICAgICAgICBjWzB4OTldID0gLTk0MDQyNzI7XHJcbiAgICAgICAgICAgIGNbMHg5YV0gPSAtMTI4NjtcclxuICAgICAgICAgICAgY1sweDliXSA9IC0xNjcxMTgwOTtcclxuICAgICAgICAgICAgY1sweDljXSA9IC0xMjE1NjIzNjtcclxuICAgICAgICAgICAgY1sweDlkXSA9IC0yOTY4NDM2O1xyXG4gICAgICAgICAgICBjWzB4OWVdID0gLTE2NzQ0MzIwO1xyXG4gICAgICAgICAgICBjWzB4OWZdID0gLTI1NzIzMjg7XHJcbiAgICAgICAgICAgIGNbMTYwXSA9IC00MDEyMTtcclxuICAgICAgICAgICAgY1sweGExXSA9IC0xMjUyNTM2MDtcclxuICAgICAgICAgICAgY1sweGEyXSA9IC0xMTQ2MTMwO1xyXG4gICAgICAgICAgICBjWzB4YTNdID0gLTY2Mzg4NTtcclxuICAgICAgICAgICAgY1sweGE0XSA9IC0xO1xyXG4gICAgICAgICAgICBjWzB4YTVdID0gLTY1NzkzMTtcclxuICAgICAgICAgICAgY1sweGE2XSA9IC0yNTY7XHJcbiAgICAgICAgICAgIGNbMHhhN10gPSAtNjYzMjE0MjtcclxuICAgICAgICAgICAgY29sb3JUYWJsZSA9IGM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBLbm93bkNvbG9yVG9BcmdiKEtub3duQ29sb3IgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbnN1cmVDb2xvclRhYmxlKCk7XHJcbiAgICAgICAgICAgIGlmKGNvbG9yIDw9IEtub3duQ29sb3IuTWVudUhpZ2hsaWdodClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yVGFibGVbKGludCljb2xvcl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBLbm93bkNvbG9yVG9OYW1lKEtub3duQ29sb3IgY29sb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFbnN1cmVDb2xvck5hbWVUYWJsZSgpO1xyXG4gICAgICAgICAgICBpZihjb2xvciA8PSBLbm93bkNvbG9yLk1lbnVIaWdobGlnaHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvck5hbWVUYWJsZVsoaW50KWNvbG9yXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb250ZXh0TWVudSA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEZvciBpbnRlcm5hbCB1c2Ugb25seSAtIHNvIGlmIHdlIGNsaWNrIG9uIGRvY3VtZW50IC0gd2UgY2FuIGNsb3NlIGFsbCBjb250ZXh0IG1lbnVzIC0tLVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHJvdGVjdGVkIENvbnRleHRNZW51IFN1YkNvbnRleHRPcGVuZWQgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxDb250ZXh0SXRlbT4gQ29udGV4dEl0ZW1zID0gbmV3IExpc3Q8Q29udGV4dEl0ZW0+KCk7XHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFRvdGFsQ29udGV4dEhhbmRsZXMgPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbnRleHRNZW51IE1haW5Db250ZXh0TWVudSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250ZXh0TWVudSgpIDogYmFzZShcImNvbnRleHRtZW51XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25Nb3VzZUxlYXZlID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBSZW5kZXJDb250ZXh0TWVudSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBXaGF0IHdlIG5lZWQgdG8gZG8gZmlyc3QgaXMgZ2V0IHRoZSBtYXhlZCBzaXplIHRleHQuLi5cclxuICAgICAgICAgICAgaW50IHggPSAwO1xyXG4gICAgICAgICAgICBpbnQgaWkgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5FbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbnRleHRJdGVtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgeSA9IENvbnRleHRJdGVtc1tpXS5DYXB0aW9uLkxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmKHkgPiB4KSB7IHggPSB5OyBpaSA9IGk7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaWkgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGludCBjYWx3aWR0aCA9IChpbnQpR2V0VGV4dFdpZHRoKENvbnRleHRJdGVtc1tpaV0uQ2FwdGlvbiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpO1xyXG4gICAgICAgICAgICBpZihjYWx3aWR0aCA8IFNldHRpbmdzLkNvbnRleHRNZW51TWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICBjYWx3aWR0aCA9IFNldHRpbmdzLkNvbnRleHRNZW51TWluV2lkdGg7XHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IChjYWx3aWR0aCArIDM0ICsgOCArIDIpO1xyXG5cclxuICAgICAgICAgICAgaW50IHRvcCA9IDE7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29udGV4dEl0ZW1zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0SXRlbSA9IENvbnRleHRJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIGludCB5ID0gY29udGV4dEl0ZW0uQ2FwdGlvbi5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IExhYmVsKGNvbnRleHRJdGVtLkNhcHRpb24sIDEsIHRvcCwgd2lkdGggLSAyLCBmYWxzZSwgZmFsc2UsIFwiY29udGV4dGl0ZW1cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbS5PbkNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbnRleHRJdGVtLkVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250ZXh0SXRlbS5Pbkl0ZW1DbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0SXRlbS5Pbkl0ZW1DbGljayhjb250ZXh0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b3AgKz0gMjQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoQ29udGV4dEl0ZW1zW2ldLkJlZ2luR3JvdXAgJiYgaSAhPSBDb250ZXh0SXRlbXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcCA9IERpdihcImNvbnRleHRpdGVtc2VwZXJhdG9yXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXAuU3R5bGUuVG9wID0gdG9wLlRvUHgoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXAuU3R5bGUuV2lkdGggPSBjYWx3aWR0aC5Ub1B4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoc2VwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wICs9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRvcCsrO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5Db250ZW50LlNldFNpemUod2lkdGgsIHRvcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93KFZlY3RvcjIgTG9jYXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihNYWluQ29udGV4dE1lbnUgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWFpbkNvbnRleHRNZW51LkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBNYWluQ29udGV4dE1lbnUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE1haW5Db250ZXh0TWVudSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZihWaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIVZpc2libGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU2V0TG9jYXRpb24oTG9jYXRpb24uWGkgLSA1LCBMb2NhdGlvbi5ZaSAtIDUpO1xyXG4gICAgICAgICAgICAgICAgUmVuZGVyQ29udGV4dE1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBUb3RhbENvbnRleHRIYW5kbGVzKys7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlpJbmRleCA9IChUb3RhbENvbnRleHRIYW5kbGVzICsgU2V0dGluZ3MuQ29udGV4dE1lbnVTdGFydGluZ1pJbmRleCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG90YWxDb250ZXh0SGFuZGxlcy0tO1xyXG4gICAgICAgICAgICAgICAgRG9jdW1lbnQuQm9keS5SZW1vdmVDaGlsZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoU3ViQ29udGV4dE9wZW5lZCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTdWJDb250ZXh0T3BlbmVkLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBTdWJDb250ZXh0T3BlbmVkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQ29udGV4dEl0ZW1cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIENhcHRpb24gPSBcIlwiO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248Q29udGV4dEl0ZW0+IE9uSXRlbUNsaWNrID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBCZWdpbkdyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIGJvb2wgRW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250ZXh0SXRlbSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENvbnRleHRJdGVtKHN0cmluZyBjYXB0aW9uLCBib29sIGJlZ2luR3JvdXAgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhcHRpb24gPSBjYXB0aW9uO1xyXG4gICAgICAgICAgICBCZWdpbkdyb3VwID0gYmVnaW5Hcm91cDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250ZXh0SXRlbShzdHJpbmcgY2FwdGlvbiwgQWN0aW9uPENvbnRleHRJdGVtPiBfT25JdGVtQ2xpY2ssIGJvb2wgYmVnaW5Hcm91cCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FwdGlvbiA9IGNhcHRpb247XHJcbiAgICAgICAgICAgIEJlZ2luR3JvdXAgPSBiZWdpbkdyb3VwO1xyXG4gICAgICAgICAgICBPbkl0ZW1DbGljayA9IF9Pbkl0ZW1DbGljaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgZW51bSBEYXRhVHlwZVxyXG4gICAge1xyXG4gICAgICAgIE9iamVjdCxcclxuICAgICAgICBEYXRlVGltZSxcclxuICAgICAgICBTdHJpbmcsXHJcbiAgICAgICAgSW50ZWdlcixcclxuICAgICAgICBMb25nLFxyXG4gICAgICAgIEZsb2F0LFxyXG4gICAgICAgIERvdWJsZSxcclxuICAgICAgICBEZWNpbWFsLFxyXG4gICAgICAgIEJvb2wsXHJcbiAgICAgICAgQnl0ZSxcclxuICAgICAgICBTaG9ydFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhVGFibGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxEYXRhQ29sdW1uPiBDb2x1bW5zID0gbmV3IExpc3Q8RGF0YUNvbHVtbj4oKTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IF9zZWFyY2hSZXN1bHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBfc2VhcmNoQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgX3NlYXJjaFN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTZWFyY2hTdHJpbmdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfc2VhcmNoU3RyaW5nOyB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZWFyY2goc3RyaW5nIHNlYXJjaERhdGEsIEdyaWRWaWV3IHZpZXcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih2aWV3ID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9zZWFyY2hTdHJpbmcgPSBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoUmVzdWx0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIFJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfc2VhcmNoU3RyaW5nID0gc2VhcmNoRGF0YS5Ub0xvd2VyKCk7XHJcbiAgICAgICAgICAgIF9zZWFyY2hBY3RpdmUgPSAhc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShfc2VhcmNoU3RyaW5nKTtcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZihfc2VhcmNoQWN0aXZlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoUmVzdWx0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIGludCBjb3VudCA9IHZpZXcuQ29sdW1uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIFVzZUZvcm1hdCA9IG5ldyBMaXN0PFR1cGxlPGJvb2wsIHN0cmluZz4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgY291bnQ7IHgrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZENvbCA9IHZpZXcuR2V0Q29sdW1uKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGdyaWRDb2wuVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBGb3JtYXRTdHJpbmcgPSBncmlkQ29sLkZvcm1hdFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXNlRm9ybWF0LkFkZChuZXcgVHVwbGU8Ym9vbCwgc3RyaW5nPihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKEZvcm1hdFN0cmluZyksIEZvcm1hdFN0cmluZykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVc2VGb3JtYXQuQWRkKG5ldyBUdXBsZTxib29sLCBzdHJpbmc+KGZhbHNlLCBzdHJpbmcuRW1wdHkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCB5ID0gMDsgeSA8IF9Sb3dDb3VudDsgeSsrKVxyXG4gICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IGNvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZENvbCA9IHZpZXcuR2V0Q29sdW1uKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihncmlkQ29sLlZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDb2x1bW4gPSBncmlkQ29sLkNvbHVtbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWxwZXJXaGF0VG9EbyA9IFVzZUZvcm1hdFt4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihoZWxwZXJXaGF0VG9Eby5JdGVtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IENvbHVtbi5HZXREaXNwbGF5VmFsdWUoeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBDb2x1bW4uR2V0RGlzcGxheVZhbHVlKHksIGhlbHBlcldoYXRUb0RvLkl0ZW0yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh2YWx1ZSkgJiYgdmFsdWUuVG9Mb3dlcigpLlN0YXJ0c1dpdGgoc2VhcmNoRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NlYXJjaFJlc3VsdHMuQWRkKHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoUmVzdWx0cyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGV2ZW50IEV2ZW50SGFuZGxlciBPbkRhdGFTb3VyY2VDaGFuZ2VkID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIF9pbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIGJvb2wgX3JlcXVlc3RlZE9uRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIV9pbkRhdGFDaGFuZ2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmKE9uRGF0YVNvdXJjZUNoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbkRhdGFTb3VyY2VDaGFuZ2VkKHRoaXMsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3RlZE9uRGF0YUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyUm93cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfUm93Q291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29sdW1ucy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDbGVhckNlbGxzKENvbHVtbnNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBfQ29sQ291bnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sdW1uQ291bnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0NvbENvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IF9Sb3dDb3VudDtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBSb3dDb3VudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9zZWFyY2hBY3RpdmUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zZWFyY2hSZXN1bHRzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Sb3dDb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBMaXN0PERhdGFSb3c+IE5ld1Jvd3MgPSBuZXcgTGlzdDxEYXRhUm93PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhckNlbGxzPFQ+KERhdGFDb2x1bW4gX2NvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGR5bmFtaWMgX2NvbCA9IF9jb2x1bW47XHJcbiAgICAgICAgICAgIF9jb2wuQ2VsbHMgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJDZWxscyhEYXRhQ29sdW1uIF9jb2x1bW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2goX2NvbHVtbi5EYXRhVHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8b2JqZWN0PihfY29sdW1uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8RGF0ZVRpbWU/PihfY29sdW1uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlN0cmluZzpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPHN0cmluZz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5JbnRlZ2VyOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8aW50Pz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Mb25nOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8bG9uZz8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRmxvYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xlYXJDZWxsczxmbG9hdD8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8ZG91YmxlPz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8ZGVjaW1hbD8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQm9vbDpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPGJvb2w/PihfY29sdW1uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xlYXJDZWxsczxieXRlPz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPHNob3J0Pz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbiBHZXRDb2x1bW5CeURhdGFUeXBlKERhdGFUeXBlIHR5cGUgPSBEYXRhVHlwZS5PYmplY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2godHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbk9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRGF0ZVRpbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uRGF0ZVRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlN0cmluZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFDb2x1bW5TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uSW50ZWdlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuTG9uZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFDb2x1bW5Mb25nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5GbG9hdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFDb2x1bW5GbG9hdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbkRvdWJsZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRGVjaW1hbDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFDb2x1bW5EZWNpbWFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Cb29sOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbkJvb2woKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uQnl0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU2hvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uU2hvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQ29sdW1uKHN0cmluZyBmaWVsZE5hbWUsIERhdGFUeXBlIHR5cGUgPSBEYXRhVHlwZS5PYmplY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sID0gR2V0Q29sdW1uQnlEYXRhVHlwZSh0eXBlKTtcclxuICAgICAgICAgICAgY29sLkZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcclxuXHJcbiAgICAgICAgICAgIENvbHVtbnMuQWRkKGNvbCk7XHJcbiAgICAgICAgICAgIF9Db2xDb3VudCA9IENvbHVtbnMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBSZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IHRoaXNbaW50IHJvd0luZGV4XVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YVJvdyh0aGlzLCByb3dJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEJlZ2luTmV3Um93KGludCBFc3RpbWF0ZWROZXdSb3dzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTmV3Um93cyA9IG5ldyBMaXN0PERhdGFSb3c+KEVzdGltYXRlZE5ld1Jvd3MpO1xyXG4gICAgICAgICAgICBCZWdpbkRhdGFVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IEFkZFJvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZHIgPSBuZXcgRGF0YVJvdyh0aGlzLCBfUm93Q291bnQrKyk7XHJcbiAgICAgICAgICAgIGludCBjb2xMZW5ndGggPSBDb2x1bW5zLkNvdW50O1xyXG4gICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgY29sTGVuZ3RoOyB4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGR5bmFtaWMgY29sID0gQ29sdW1uc1t4XTtcclxuICAgICAgICAgICAgICAgIGNvbC5DZWxscy5hZGQobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkUm93KHBhcmFtcyBvYmplY3RbXSByb3cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihyb3cuTGVuZ3RoID09IENvbHVtbkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfUm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgIGludCBjb2xMZW5ndGggPSBDb2x1bW5zLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IGNvbExlbmd0aDsgeCsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWMgY29sID0gQ29sdW1uc1t4XTtcclxuICAgICAgICAgICAgICAgICAgICBjb2wuQ2VsbHMuYWRkKHJvd1t4XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBSZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERhdGFSb3cgTmV3Um93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkciA9IG5ldyBEYXRhUm93KHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgTmV3Um93cy5BZGQoZHIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWNjZXB0TmV3Um93cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihOZXdSb3dzID09IG51bGwgfHwgTmV3Um93cy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpbnQgY29sTGVuZ3RoID0gQ29sdW1ucy5Db3VudDtcclxuICAgICAgICAgICAgaW50IHJvd0xlbmd0aCA9IE5ld1Jvd3MuQ291bnQ7XHJcbiAgICAgICAgICAgIGludCBjb2xOMSA9IGNvbExlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgY29sTGVuZ3RoOyB4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGR5bmFtaWMgY29sID0gQ29sdW1uc1t4XTtcclxuICAgICAgICAgICAgICAgIHZhciBEYXRhQ2VsbHMgPSBuZXcgb2JqZWN0W3Jvd0xlbmd0aF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoeCA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5ld1Jvd3NbeV0uUm93SW5kZXggPSBfUm93Q291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGF0YUNlbGxzW3ldID0gTmV3Um93c1t5XS5iYXRjaERhdGFbeF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih4ID09IGNvbE4xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFDZWxsc1t5XSA9IE5ld1Jvd3NbeV0uYmF0Y2hEYXRhW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBOZXdSb3dzW3ldLmJhdGNoRGF0YSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGFDZWxsc1t5XSA9IE5ld1Jvd3NbeV0uYmF0Y2hEYXRhW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbC5DZWxscy5hZGRSYW5nZShEYXRhQ2VsbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE5ld1Jvd3MuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgIEVuZERhdGFVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEJlZ2luRGF0YVVwZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaW5EYXRhQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3JlcXVlc3RlZE9uRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRW5kRGF0YVVwZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaW5EYXRhQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmKF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmKE9uRGF0YVNvdXJjZUNoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbkRhdGFTb3VyY2VDaGFuZ2VkKHRoaXMsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWplY3ROZXdSb3dzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5ld1Jvd3MuQ2xlYXIoKTtcclxuICAgICAgICAgICAgX2luRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0YVJvd1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRhVGFibGUgUGFyZW50VGFibGU7XHJcbiAgICAgICAgcHVibGljIGludCBSb3dJbmRleCA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBvYmplY3RbXSBiYXRjaERhdGE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IEdldE9mZmxpbmVEYXRhUm93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkciA9IG5ldyBEYXRhUm93KFBhcmVudFRhYmxlLkNvbHVtbkNvdW50KTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgb2JqZWN0W1BhcmVudFRhYmxlLkNvbHVtbkNvdW50XTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFBhcmVudFRhYmxlLkNvbHVtbkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0gPSB0aGlzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRyLmJhdGNoRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBkcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YVJvdyhpbnQgY29sdW1uTGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFyZW50VGFibGUgPSBudWxsO1xyXG4gICAgICAgICAgICBSb3dJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBiYXRjaERhdGEgPSBuZXcgb2JqZWN0W2NvbHVtbkxlbmd0aF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YVJvdyhEYXRhVGFibGUgcGFyZW50VGFibGUsIGludCByb3dJbmRleCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFyZW50VGFibGUgPSBwYXJlbnRUYWJsZTtcclxuICAgICAgICAgICAgUm93SW5kZXggPSByb3dJbmRleDtcclxuICAgICAgICAgICAgaWYocm93SW5kZXggPT0gLTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJhdGNoRGF0YSA9IG5ldyBvYmplY3RbcGFyZW50VGFibGUuQ29sdW1uQ291bnRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRWYWx1ZShzdHJpbmcgZmllbGROYW1lLCBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgUGFyZW50VGFibGUuQ29sdW1uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoUGFyZW50VGFibGUuQ29sdW1uc1tpXS5GaWVsZE5hbWUgPT0gZmllbGROYW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFJvd0luZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYmF0Y2hEYXRhW2ldICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaERhdGFbaV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmVudFRhYmxlLlJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWMgY29sID0gUGFyZW50VGFibGUuQ29sdW1uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb2wuQ2VsbHMuaXRlbXNbUm93SW5kZXhdICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLkNlbGxzLml0ZW1zW1Jvd0luZGV4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJlbnRUYWJsZS5SZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFZhbHVlKHN0cmluZyBmaWVsZE5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgUGFyZW50VGFibGUuQ29sdW1uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoUGFyZW50VGFibGUuQ29sdW1uc1tpXS5GaWVsZE5hbWUgPT0gZmllbGROYW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFJvd0luZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoRGF0YVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2wuQ2VsbHMuaXRlbXNbUm93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBHZXRWYWx1ZShpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihSb3dJbmRleCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoRGF0YVtjb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2NvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbC5DZWxscy5pdGVtc1tSb3dJbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRWYWx1ZShpbnQgY29sdW1uSW5kZXgsIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFJvd0luZGV4ID09IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihiYXRjaERhdGFbY29sdW1uSW5kZXhdICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoRGF0YVtjb2x1bW5JbmRleF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBQYXJlbnRUYWJsZS5SZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2NvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgaWYoY29sLkNlbGxzLml0ZW1zW1Jvd0luZGV4XSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sLkNlbGxzLml0ZW1zW1Jvd0luZGV4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgUGFyZW50VGFibGUuUmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgdGhpc1tpbnQgY29sdW1uSW5kZXhdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFZhbHVlKGNvbHVtbkluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2V0VmFsdWUoY29sdW1uSW5kZXgsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0YUNvbHVtblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRmllbGROYW1lO1xyXG4gICAgICAgIHB1YmxpYyBEYXRhVHlwZSBEYXRhVHlwZTtcclxuICAgICAgICBwdWJsaWMgZHluYW1pYyBTZWxmO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTZWxmID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vcHVibGljIExpc3Q8b2JqZWN0PiBDZWxscyA9IG5ldyBMaXN0PG9iamVjdD4oKTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldERpc3BsYXlWYWx1ZShpbnQgcm93SW5kZXgsIHN0cmluZyBmb3JtYXRTdHJpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2goRGF0YVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLk9iamVjdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoKERhdGFDb2x1bW5PYmplY3QpdGhpcykuQ2VsbHNbcm93SW5kZXhdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuICAgICAgICAgICAgICAgICAgICBkeW5hbWljIG9iaiA9ICgoRGF0YUNvbHVtbkRhdGVUaW1lKXRoaXMpLkNlbGxzW3Jvd0luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZihvYmogPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iaiBpcyBEYXRlVGltZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKERhdGVUaW1lKW9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIERhdGVUaW1lIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRGF0ZVRpbWUuVHJ5UGFyc2Uob2JqLCBvdXQgZCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsIGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gb2JqIGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHN0cikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsIHN0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TdHJpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5TdHJpbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5JbnRlZ2VyKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Mb25nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKChEYXRhQ29sdW1uTG9uZyl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRmxvYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5GbG9hdCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKChEYXRhQ29sdW1uRG91YmxlKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKChEYXRhQ29sdW1uRGVjaW1hbCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQnl0ZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoRGF0YUNvbHVtbkJ5dGUpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlNob3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKChEYXRhQ29sdW1uU2hvcnQpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJvb2w6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5Cb29sKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0Q2VsbFZhbHVlKGludCByb3dJbmRleClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKFNlbGYuQ2VsbHMuQ291bnQgPD0gcm93SW5kZXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2goRGF0YVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLk9iamVjdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKChEYXRhQ29sdW1uT2JqZWN0KXRoaXMpLkNlbGxzW3Jvd0luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKERhdGFDb2x1bW5EYXRlVGltZSl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TdHJpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoRGF0YUNvbHVtblN0cmluZyl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5JbnRlZ2VyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKChEYXRhQ29sdW1uSW50ZWdlcil0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuTG9uZzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCgoRGF0YUNvbHVtbkxvbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKChEYXRhQ29sdW1uRmxvYXQpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRvdWJsZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCgoRGF0YUNvbHVtbkRvdWJsZSl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRGVjaW1hbDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCgoRGF0YUNvbHVtbkRlY2ltYWwpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoKERhdGFDb2x1bW5CeXRlKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Cb29sOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKChEYXRhQ29sdW1uQm9vbCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU2hvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoKERhdGFDb2x1bW5TaG9ydCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldERpc3BsYXlWYWx1ZShpbnQgcm93SW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihTZWxmLkNlbGxzLkNvdW50IDw9IHJvd0luZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoKERhdGFUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5PYmplY3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uT2JqZWN0KXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5EYXRlVGltZSl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKERhdGFDb2x1bW5TdHJpbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuSW50ZWdlcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5JbnRlZ2VyKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Mb25nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkxvbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkZsb2F0KXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Eb3VibGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uRG91YmxlKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkRlY2ltYWwpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uQnl0ZSl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQm9vbDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5Cb29sKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5TaG9ydCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uU3RyaW5nIDogRGF0YUNvbHVtblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRhQ29sdW1uU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5TdHJpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxzdHJpbmc+IENlbGxzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uRGF0ZVRpbWUgOiBEYXRhQ29sdW1uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIERhdGFDb2x1bW5EYXRlVGltZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuRGF0ZVRpbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxEYXRlVGltZT8+IENlbGxzID0gbmV3IExpc3Q8RGF0ZVRpbWU/PigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uSW50ZWdlciA6IERhdGFDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbkludGVnZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkludGVnZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ/PiBDZWxscyA9IG5ldyBMaXN0PGludD8+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIERhdGFDb2x1bW5Mb25nIDogRGF0YUNvbHVtblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRhQ29sdW1uTG9uZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuTG9uZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGxvbmc/PiBDZWxscyA9IG5ldyBMaXN0PGxvbmc/PigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uT2JqZWN0IDogRGF0YUNvbHVtblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRhQ29sdW1uT2JqZWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5PYmplY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxvYmplY3Q+IENlbGxzID0gbmV3IExpc3Q8b2JqZWN0PigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uRGVjaW1hbCA6IERhdGFDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbkRlY2ltYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkRlY2ltYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxkZWNpbWFsPz4gQ2VsbHMgPSBuZXcgTGlzdDxkZWNpbWFsPz4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkZsb2F0IDogRGF0YUNvbHVtblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRhQ29sdW1uRmxvYXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkZsb2F0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8ZmxvYXQ/PiBDZWxscyA9IG5ldyBMaXN0PGZsb2F0Pz4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkRvdWJsZSA6IERhdGFDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbkRvdWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuRG91YmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8ZG91YmxlPz4gQ2VsbHMgPSBuZXcgTGlzdDxkb3VibGU/PigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uQm9vbCA6IERhdGFDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtbkJvb2woKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkJvb2w7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxib29sPz4gQ2VsbHMgPSBuZXcgTGlzdDxib29sPz4oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkJ5dGUgOiBEYXRhQ29sdW1uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIERhdGFDb2x1bW5CeXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5CeXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8Ynl0ZT8+IENlbGxzID0gbmV3IExpc3Q8Ynl0ZT8+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIERhdGFDb2x1bW5TaG9ydCA6IERhdGFDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGF0YUNvbHVtblNob3J0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5TaG9ydDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PHNob3J0Pz4gQ2VsbHMgPSBuZXcgTGlzdDxzaG9ydD8+KCk7XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBTeXN0ZW07XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb21ib0JveEVkaXQgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEhUTUxTZWxlY3RFbGVtZW50IENvbWJvQm94QmFzZTtcclxuICAgICAgICBwcml2YXRlIGludCBwcmV2aW91c1NlbGVjdGVkSW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxDb21ib0JveEVkaXQ+IFNlbGVjdGVkSW5kZXhDaGFuZ2VkID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIENvbWJvQm94RWRpdCgpIDogYmFzZShcImlucHV0Y29udHJvbFwiLCBDb21ib0JveFR5cGVzLkRlZmF1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb21ib0JveEJhc2UgPSB0aGlzLkNvbnRlbnQgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25Db250ZXh0TWVudSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBDb21ib0JveEJhc2UuT25DaGFuZ2UgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHByZXZpb3VzU2VsZWN0ZWRJbmRleCAhPSBDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihTZWxlY3RlZEluZGV4Q2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RlZEluZGV4Q2hhbmdlZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNTZWxlY3RlZEluZGV4ID0gQ29tYm9Cb3hCYXNlLlNlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZpbGxEYXRhKHBhcmFtcyBEYXRhSXRlbVtdIGRhdGFpdGVtcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoQ29tYm9Cb3hCYXNlKS5FbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgaWYoZGF0YWl0ZW1zID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBkYXRhaXRlbXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29tYm9Cb3hCYXNlLkFwcGVuZENoaWxkKG5ldyBIVE1MT3B0aW9uRWxlbWVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbm5lckhUTUwgPSBkYXRhaXRlbXNbaV0uVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWUgPSBkYXRhaXRlbXNbaV0uVmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuUmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleCA9PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbWJvQm94QmFzZS5PcHRpb25zW0NvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4XS5Jbm5lckhUTUw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBDb21ib0JveEJhc2UuT3B0aW9ucy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihDb21ib0JveEJhc2UuT3B0aW9uc1tpXS5Jbm5lckhUTUwgPT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleCA9PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbWJvQm94QmFzZS5PcHRpb25zW0NvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4XS5WYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbWJvQm94QmFzZS5PcHRpb25zLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbWJvQm94QmFzZS5PcHRpb25zW2ldLlZhbHVlID09IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVuYWJsZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBlbmFibGVkOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgKCFlbmFibGVkKS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIF9yZWFkb25seSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZWFkb25seVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9yZWFkb25seTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3JlYWRvbmx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgKF9yZWFkb25seSkuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIERhdGFJdGVtXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUZXh0O1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVmFsdWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhSXRlbShzdHJpbmcgdGV4dCwgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YUl0ZW0oc3RyaW5nIHRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgVmFsdWUgPSB0ZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERpYWxvZ1Jlc3VsdFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEaWFsb2dSZXN1bHRFbnVtIFJlc3VsdEVudW0gPSBEaWFsb2dSZXN1bHRFbnVtLk5vbmU7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbiBDYWxsQmFjayA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEaWFsb2dSZXN1bHQoRGlhbG9nUmVzdWx0RW51bSByZXN1bHRFbnVtLCBBY3Rpb24gY2FsbEJhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBSZXN1bHRFbnVtID0gcmVzdWx0RW51bTtcclxuICAgICAgICAgICAgQ2FsbEJhY2sgPSBjYWxsQmFjaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludm9rZUlmUmVzdWx0KERpYWxvZ1Jlc3VsdEVudW0gcmVzdWx0RW51bSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdEVudW0gPT0gUmVzdWx0RW51bSAmJiBDYWxsQmFjayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQ2FsbEJhY2suSW52b2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIERpYWxvZ1Jlc3VsdEVudW1cclxuICAgIHtcclxuICAgICAgICBOb25lLFxyXG4gICAgICAgIE9LLFxyXG4gICAgICAgIENhbmNlbCxcclxuICAgICAgICBBYm9ydCxcclxuICAgICAgICBTZW5kLFxyXG4gICAgICAgIElnbm9yZSxcclxuICAgICAgICBZZXMsXHJcbiAgICAgICAgTm9cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRXh0ZXJuYWxQbHVnaW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNvdXJjZVVybDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBTZXR1cENvbXBsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIEluTG9hZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uIE9uUmVhZHkgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgRXh0ZXJuYWxQbHVnaW4oc3RyaW5nIHNvdXJjZVVybClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNvdXJjZVVybCA9IHNvdXJjZVVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldHVwKGJvb2wgYXN5bmMgPSBmYWxzZSwgYm9vbCBkZWZlciA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIVNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihJbkxvYWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIEluTG9hZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gbmV3IEhUTUxTY3JpcHRFbGVtZW50KClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBPbkxvYWQgPSAoZWxlKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbkxvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoT25SZWFkeSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT25SZWFkeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgU3JjID0gU291cmNlVXJsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYoYXN5bmMpXHJcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0LkFzeW5jID0gYXN5bmM7XHJcbiAgICAgICAgICAgICAgICBpZihkZWZlcilcclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuRGVmZXIgPSBkZWZlcjtcclxuICAgICAgICAgICAgICAgIERvY3VtZW50LkhlYWQuQXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVXNhZ2VDaGVjaygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighU2V0dXBDb21wbGV0ZWQpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiJ1wiICsgU291cmNlVXJsICsgXCInIHJlcXVpcmVzIHRvIGJlIHNldHVwIVwiKTtcclxuICAgICAgICAgICAgaWYoSW5Mb2FkKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIidcIiArIFNvdXJjZVVybCArIFwiJyBpcyBjdXJyZW50bHkgbG9hZGluZywgUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIGZldyBzZWNvbmRzIVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZpcmViYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxGaXJlQmFzZSA9IG5ldyBFeHRlcm5hbFBsdWdpbihcImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvMy42LjgvZmlyZWJhc2UuanNcIik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIERpc3BsYXlOYW1lO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFBob3RvVVJMO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBVc2VyU2lnbmVkSW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXR1cChBY3Rpb24gT25SZWFkeSA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFeHRlcm5hbEZpcmVCYXNlLk9uUmVhZHkgPSBPblJlYWR5O1xyXG4gICAgICAgICAgICBFeHRlcm5hbEZpcmVCYXNlLlNldHVwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5pdGlhbGl6ZUFwcChzdHJpbmcgQXBpS2V5LCBzdHJpbmcgQXV0aERvbWFpbiwgc3RyaW5nIERhdGFiYXNlVVJMLCBzdHJpbmcgUHJvamVjdElkLCBzdHJpbmcgU3RvcmFnZUJ1Y2tldCwgc3RyaW5nIE1lc3NhZ2luZ1NlbmRlcklkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRXh0ZXJuYWxGaXJlQmFzZS5Vc2FnZUNoZWNrKCk7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoQXBpS2V5KSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oc3RyaW5nLkZvcm1hdChcIkludmFsaWQgRmlyZWJhc2UgezB9ICFcIixcIkFwaUtleVwiKSk7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoQXV0aERvbWFpbikpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIkF1dGhEb21haW5cIikpO1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKERhdGFiYXNlVVJMKSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oc3RyaW5nLkZvcm1hdChcIkludmFsaWQgRmlyZWJhc2UgezB9IVwiLFwiRGF0YWJhc2VVUkxcIikpO1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKFByb2plY3RJZCkpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIlByb2plY3RJZFwiKSk7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoU3RvcmFnZUJ1Y2tldCkpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIlN0b3JhZ2VCdWNrZXRcIikpO1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKE1lc3NhZ2luZ1NlbmRlcklkKSlcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oc3RyaW5nLkZvcm1hdChcIkludmFsaWQgRmlyZWJhc2UgezB9IVwiLFwiTWVzc2FnaW5nU2VuZGVySWRcIikpO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGZpcmViYXNlLmluaXRpYWxpemVBcHAoe2FwaUtleTogQXBpS2V5LCBhdXRoRG9tYWluOiBBdXRoRG9tYWluLCBkYXRhYmFzZVVSTDogRGF0YWJhc2VVUkwsIHByb2plY3RJZCA6IFByb2plY3RJZCwgc3RvcmFnZUJ1Y2tldDogU3RvcmFnZUJ1Y2tldCwgbWVzc2FnaW5nU2VuZGVySWQ6IE1lc3NhZ2luZ1NlbmRlcklkIH0pO1xyXG5cdFx0XHRmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uKHVzZXIpIHtcclxuXHRcdFx0XHRpZiAodXNlcikge1xyXG5cdFx0XHRcdFx0dGhpcy5Vc2VyU2lnbmVkSW4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5EaXNwbGF5TmFtZSA9IHVzZXIuZGlzcGxheU5hbWU7XHJcblx0XHRcdFx0XHR0aGlzLlBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHRoaXMuVXNlclNpZ25lZEluID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Ki9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaWduSW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUG9wdXAobmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCkpO1xyXG5cdFx0XHQqL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNpZ25PdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCk7XHJcblx0XHRcdCovXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIG9iamVjdCBEYXRhYmFzZVJlZihzdHJpbmcgbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhUmVmID0gU2NyaXB0LldyaXRlPGR5bmFtaWM+KFwiZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYobmFtZSlcIik7XHJcbiAgICAgICAgICAgIGRhdGFSZWYub2ZmKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzU2lnbmVkSW5XaXRoRmlyZWJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdC5Xcml0ZTxib29sPihAXCJcclxuXHRcdFx0aWYoZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1lbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGb3JtQ29sbGVjdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBGb3JtIEZvcm1Pd25lcjtcclxuICAgICAgICBwdWJsaWMgTGlzdDxGb3JtPiBWaXNpYmxlRm9ybXMgPSBuZXcgTGlzdDxGb3JtPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRm9ybUNvbGxlY3Rpb24oRm9ybSBmb3JtT3duZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGb3JtT3duZXIgPSBmb3JtT3duZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR21haWxcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEV4dGVybmFsUGx1Z2luIEV4dGVybmFsR21haWwgPSBuZXcgRXh0ZXJuYWxQbHVnaW4oXCJodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanNcIik7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgQ2xpZW50SWQ7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBvYmplY3QgR29vZ2xlQXV0aDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTGlzdDxBY3Rpb24+IF9vbmVUaW1lQ2FsbCA9IG5ldyBMaXN0PEFjdGlvbj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEF1dGhvcml6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighRXh0ZXJuYWxHbWFpbC5TZXR1cENvbXBsZXRlZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmKElzU2lnbmVkSW4oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8qQFxyXG4gICAgICAgICAgICAgICAgRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGggPSBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpXHJcbiAgICAgICAgICAgICAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIF9oYXNSYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIFB1c2hFdmVudHNUaW1lQ2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgV2luZG93LkZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJvb2wgX2hhc1JhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgUHVzaEV2ZW50c1RpbWVDYWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKF9oYXNSYW4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIF9oYXNSYW4gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGNhbGxwdW1wIGluIF9vbmVUaW1lQ2FsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjYWxscHVtcCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxscHVtcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9vbmVUaW1lQ2FsbCA9IG5ldyBMaXN0PEFjdGlvbj4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBPblNpZ25lZEluKEFjdGlvbiBtZXRob2QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtZXRob2QgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmKF9oYXNSYW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX29uZVRpbWVDYWxsLkFkZCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKW1ldGhvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc1NpZ25lZEluKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFFeHRlcm5hbEdtYWlsLlNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiU2V0dXAgZm9yIGdtYWlsIGlzIG5vdCByZWFkeSB5ZXQhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKEdvb2dsZUF1dGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIkdvb2dsZUF1dGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYm9vbCBzaWduZWRJbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdHNpZ25lZEluID0gRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGguaXNTaWduZWRJbi5nZXQoKTtcclxuXHRcdFx0Ki9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaWduZWRJbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEFjY2Vzc1Rva2VuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFFeHRlcm5hbEdtYWlsLlNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiU2V0dXAgZm9yIGdtYWlsIGlzIG5vdCByZWFkeSB5ZXQhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKEdvb2dsZUF1dGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIkdvb2dsZUF1dGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBhY2Nlc3NfdG9rZW4gPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGFjY2Vzc190b2tlbiA9IEV4cHJlc3NDcmFmdC5HbWFpbC5Hb29nbGVBdXRoLmN1cnJlbnRVc2VyLkFiLlppLmFjY2Vzc190b2tlbjtcclxuXHRcdFx0Ki9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3NfdG9rZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBGdWxsbmFtZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighRXh0ZXJuYWxHbWFpbC5TZXR1cENvbXBsZXRlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlNldHVwIGZvciBnbWFpbCBpcyBub3QgcmVhZHkgeWV0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihHb29nbGVBdXRoID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJHb29nbGVBdXRoXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgZnVsbG5hbWUgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGZ1bGxuYW1lID0gRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGguY3VycmVudFVzZXIuQWIudzMuaWc7XHJcblx0XHRcdCovXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVsbG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBFbWFpbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighRXh0ZXJuYWxHbWFpbC5TZXR1cENvbXBsZXRlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlNldHVwIGZvciBnbWFpbCBpcyBub3QgcmVhZHkgeWV0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihHb29nbGVBdXRoID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJHb29nbGVBdXRoXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgZW1haWwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGVtYWlsID0gRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGguY3VycmVudFVzZXIuQWIudzMuVTM7XHJcblx0XHRcdCovXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZW1haWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRDb250ZW50VHlwZUZyb21GaWxlTmFtZShzdHJpbmcgZmlsZW5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGZpbGVuYW1lKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiO1xyXG5cclxuICAgICAgICAgICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5Ub0xvd2VyKCk7XHJcblxyXG4gICAgICAgICAgICBpZihmaWxlbmFtZS5FbmRzV2l0aChcIi5wZGZcIikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcHBsaWNhdGlvbi9wZGZcIjtcclxuICAgICAgICAgICAgZWxzZSBpZihmaWxlbmFtZS5FbmRzV2l0aChcIi5wbmdcIikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbWFnZS9wbmdcIjtcclxuICAgICAgICAgICAgZWxzZSBpZihmaWxlbmFtZS5FbmRzV2l0aChcIi5qcGdcIikgfHwgZmlsZW5hbWUuRW5kc1dpdGgoXCIuanBlZ1wiKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImltYWdlL2pwZWdcIjtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2VuZEVtYWlsKEdtYWlsTWVzc2FnZSBtZXNzYWdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJDb250ZW50LVR5cGU6IG11bHRpcGFydC9taXhlZDsgYm91bmRhcnk9XFxcIl9pbnRlbG9neV84YWIzMzdlYzJlMzhlMWE4YjgyYTAxYTU3MTJhOGJkYlxcXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiTUlNRS1WZXJzaW9uOiAxLjBcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiRnJvbTogXCIgKyBFbWFpbCgpICsgXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiVG86IFwiICsgbWVzc2FnZS5Ub0VtYWlsICsgXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiU3ViamVjdDogXCIgKyBtZXNzYWdlLlN1YmplY3QgKyBcIlxcclxcblxcclxcblwiKTtcclxuXHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiLS1faW50ZWxvZ3lfOGFiMzM3ZWMyZTM4ZTFhOGI4MmEwMWE1NzEyYThiZGJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiQ29udGVudC1UeXBlOiB0ZXh0L1wiICsgKG1lc3NhZ2UuSXNIVE1MID8gXCJodG1sXCIgOiBcInBsYWluXCIpICsgXCI7IGNoYXJzZXQ9XFxcIlVURi04XFxcIlxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJNSU1FLVZlcnNpb246IDEuMFxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiA3Yml0XFxyXFxuXFxyXFxuXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYobWVzc2FnZS5Jc0hUTUwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKChtZXNzYWdlLkJvZHkgKyBcIlwiKS5SZXBsYWNlKFwiXFxyXFxuXCIsIFwiPGJyIC8+XCIpICsgXCJcXHJcXG5cXHJcXG5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChtZXNzYWdlLkJvZHkgKyBcIlxcclxcblxcclxcblwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCItLV9pbnRlbG9neV84YWIzMzdlYzJlMzhlMWE4YjgyYTAxYTU3MTJhOGJkYlxcclxcblwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2UuQXR0YWNobWVudHMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYXR0YWNobWVudCBpbiBtZXNzYWdlLkF0dGFjaG1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGF0dGFjaG1lbnQuRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIi0tX2ludGVsb2d5XzhhYjMzN2VjMmUzOGUxYThiODJhMDFhNTcxMmE4YmRiXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtVHlwZTogXCIgKyBHZXRDb250ZW50VHlwZUZyb21GaWxlTmFtZShhdHRhY2htZW50LkZpbGVuYW1lKSArIFwiOyBjaGFyc2V0PVxcXCJVVEYtOFxcXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiTUlNRS1WZXJzaW9uOiAxLjBcXHJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogYmFzZTY0XFxyXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPVxcXCJcIiArIChhdHRhY2htZW50LkZpbGVuYW1lKS5SZXBsYWNlKFwiXFxcIlwiLCBcIlwiKSArIFwiXFxcIlxcclxcblxcclxcblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGF0dGFjaG1lbnQuSXNCYXNlNjQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKGF0dGFjaG1lbnQuRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChHbG9iYWwuQnRvYShhdHRhY2htZW50LkRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJcXHJcXG5cXHJcXG5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIi0tX2ludGVsb2d5XzhhYjMzN2VjMmUzOGUxYThiODJhMDFhNTcxMmE4YmRiXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gbmV3IEFqYXhPcHRpb25zKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZSA9IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS91cGxvYWQvZ21haWwvdjEvdXNlcnMvbWUvbWVzc2FnZXMvc2VuZD91cGxvYWRUeXBlPW11bHRpcGFydFwiLFxyXG4gICAgICAgICAgICAgICAgQ29udGVudFR5cGUgPSBcIm1lc3NhZ2UvcmZjODIyXCIsXHJcbiAgICAgICAgICAgICAgICBEYXRhID0gYnVpbGRlci5Ub1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgSGVhZGVycyA9IG5ld1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIiArIEFjY2Vzc1Rva2VuKClcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBFcnJvciA9IChhLCBiLCBjKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIENvbXBsZXRlID0gKGpxLCBkYXRhKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPSAob2JqLCBkYXRhLCBqcSkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5BamF4KHNldHRpbmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEljb25VUkwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUV4dGVybmFsR21haWwuU2V0dXBDb21wbGV0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJTZXR1cCBmb3IgZ21haWwgaXMgbm90IHJlYWR5IHlldCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoR29vZ2xlQXV0aCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiR29vZ2xlQXV0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3RyaW5nIGljb25VcmwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcblx0XHRcdGljb25VcmwgPSBFeHByZXNzQ3JhZnQuR21haWwuR29vZ2xlQXV0aC5jdXJyZW50VXNlci5BYi53My5QYWE7XHJcblx0XHRcdCovXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaWNvblVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXR1cChzdHJpbmcgY2xpZW50SWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDbGllbnRJZCA9IGNsaWVudElkO1xyXG5cclxuICAgICAgICAgICAgRXh0ZXJuYWxHbWFpbC5PblJlYWR5ID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLypAXHJcblx0XHRcdCAgICBnYXBpLmxvYWQoJ2NsaWVudDphdXRoMicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhcGkuY2xpZW50LmluaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJ5RG9jczogW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZ21haWwvdjEvcmVzdFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkOiBFeHByZXNzQ3JhZnQuR21haWwuQ2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZ21haWwuc2VuZCdcclxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIExpc3RlbiBmb3Igc2lnbi1pbiBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGggPSBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIEV4cHJlc3NDcmFmdC5HbWFpbC5QdXNoRXZlbnRzVGltZUNhbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cdFx0XHQgICAgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgRXh0ZXJuYWxHbWFpbC5TZXR1cCh0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEdtYWlsTWVzc2FnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9FbWFpbCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3ViamVjdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBCb2R5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0hUTUwgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR21haWxNZXNzYWdlKHN0cmluZyB0b0VtYWlsLCBzdHJpbmcgc3ViamVjdCwgc3RyaW5nIGJvZHksIGJvb2wgaXNIVE1MKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG9FbWFpbCA9IHRvRW1haWw7XHJcbiAgICAgICAgICAgIFN1YmplY3QgPSBzdWJqZWN0O1xyXG4gICAgICAgICAgICBCb2R5ID0gYm9keTtcclxuICAgICAgICAgICAgSXNIVE1MID0gaXNIVE1MO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8R21haWxNZXNzYWdlQXR0YWNobWVudD4gQXR0YWNobWVudHMgeyBnZXQ7IHNldDsgfVxyXG5cbiAgICBcbnByaXZhdGUgTGlzdDxHbWFpbE1lc3NhZ2VBdHRhY2htZW50PiBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fQXR0YWNobWVudHM9bmV3IExpc3Q8R21haWxNZXNzYWdlQXR0YWNobWVudD4oKTt9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEdtYWlsTWVzc2FnZUF0dGFjaG1lbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEZpbGVuYW1lIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIERhdGEgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQmFzZTY0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdtYWlsTWVzc2FnZUF0dGFjaG1lbnQoc3RyaW5nIGZpbGVuYW1lLCBzdHJpbmcgZGF0YSwgYm9vbCBpc0Jhc2U2NCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmlsZW5hbWUgPSBmaWxlbmFtZTsgRGF0YSA9IGRhdGE7IElzQmFzZTY0ID0gaXNCYXNlNjQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdvb2dsZUNsb3VkUHJpbnRcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIHN0cmluZyBfc291cmNlO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF9taW1ldHlwZTtcclxuICAgICAgICBwcml2YXRlIHN0cmluZyBfZW5jb2RpbmcgPSBcIlwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF90aXRsZTtcclxuICAgICAgICBwcml2YXRlIG9iamVjdCBfZ2FkZ2V0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxHb29nbGVDbG91ZFByaW50ID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jbG91ZHByaW50L2NsaWVudC9jcGdhZGdldC5qc1wiKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldHVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV4dGVybmFsR29vZ2xlQ2xvdWRQcmludC5TZXR1cCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdvb2dsZUNsb3VkUHJpbnQoc3RyaW5nIHNvdXJjZSwgc3RyaW5nIHRpdGxlID0gXCJcIiwgR29vZ2xlQ2xvdWRQcmludGluZ01pbWVUeXBlIGdjcG10ID0gR29vZ2xlQ2xvdWRQcmludGluZ01pbWVUeXBlLlVybCwgc3RyaW5nIGVuY29kaW5nID0gXCJcIikgOiBiYXNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgICAgICBfc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICBfZW5jb2RpbmcgPSBlbmNvZGluZztcclxuICAgICAgICAgICAgX21pbWV0eXBlID0gZ2NwbXQuVG9TdHJpbmcoXCJHXCIpLlRvTG93ZXIoKS5SZXBsYWNlKFwiX1wiLCBcIi5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV4dGVybmFsR29vZ2xlQ2xvdWRQcmludC5Vc2FnZUNoZWNrKCk7XHJcblxyXG4gICAgICAgICAgICAvKkBcclxuXHRcdFx0dGhpcy5fZ2FkZ2V0ID0gbmV3IGNsb3VkcHJpbnQuR2FkZ2V0KCk7XHJcblx0XHRcdCovXHJcbiAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKF9lbmNvZGluZykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8qQFxyXG5cdFx0XHRcdHRoaXMuX2dhZGdldC5zZXRQcmludERvY3VtZW50KHRoaXMuX21pbWV0eXBlLCB0aGlzLl90aXRsZSwgdGhpcy5fc291cmNlLCB0aGlzLl9lbmNvZGluZyk7XHJcblx0XHRcdFx0Ki9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8qQFxyXG5cdFx0XHRcdHRoaXMuX2dhZGdldC5zZXRQcmludERvY3VtZW50KHRoaXMuX21pbWV0eXBlLCB0aGlzLl90aXRsZSwgdGhpcy5fc291cmNlKTtcclxuXHRcdFx0XHQqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qQFxyXG5cdFx0XHR0aGlzLl9nYWRnZXQub3BlblByaW50RGlhbG9nKCk7XHJcblx0XHRcdHRoaXMuX2dhZGdldC5zZXRPbkNsb3NlQ2FsbGJhY2sodGhpcy5jbGVhckNvbnRlbnQpO1xyXG5cdFx0XHQqL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgY2xlYXJDb250ZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiLl9fZ2NwX2RpYWxvZ19jb250YWluZXJfY2xzXCIpLlBhcmVudCgpLkdldCgwKS5EZWxldGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5fZ2FkZ2V0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8qQFxyXG5cdFx0XHRcdHRoaXMuX2dhZGdldC5jbG9zZVByaW50RGlhbG9nKCk7XHJcblx0XHRcdFx0dGhpcy5fZ2FkZ2V0ID0gbnVsbDtcclxuXHRcdFx0XHQqL1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLzxzY3JpcHQgc3JjID0gXCJodHRwczovL3d3dy5nb29nbGUuY29tL2Nsb3VkcHJpbnQvY2xpZW50L2NwZ2FkZ2V0LmpzXCIgPlxyXG4vLzwvIHNjcmlwdCA+XHJcbi8vPCBzY3JpcHQgPlxyXG4vLyAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4vLyAgICB2YXIgZ2FkZ2V0ID0gbmV3IGNsb3VkcHJpbnQuR2FkZ2V0KCk7XHJcbi8vZ2FkZ2V0LnNldFByaW50RG9jdW1lbnQoXCJ1cmxcIiwgXCJUZXN0IFBhZ2VcIiwgXCJodHRwczovL3d3dy5nb29nbGUuY29tLmF1Lz9nZmVfcmQ9Y3ImZWk9SnBxR1dKdzV4T3Z3QjhHV29jQUJcIik7XHJcbi8vXHRnYWRnZXQub3BlblByaW50RGlhbG9nKCk7XHJcbi8vICB9XHJcbi8vPC9zY3JpcHQ+IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JpZFZpZXdDZWxsQXBwYXJlbmNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNCb2xkID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIFRleHRBbGlnbiBBbGlnbm1lbnQgPSBUZXh0QWxpZ24uTGVmdDtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEZvcmVjb2xvciA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoYm9vbCBpc0JvbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJc0JvbGQgPSBpc0JvbGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDZWxsQXBwYXJlbmNlKGJvb2wgaXNCb2xkLCBUZXh0QWxpZ24gYWxpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSXNCb2xkID0gaXNCb2xkO1xyXG4gICAgICAgICAgICBBbGlnbm1lbnQgPSBhbGlnbm1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDZWxsQXBwYXJlbmNlKGJvb2wgaXNCb2xkLCBUZXh0QWxpZ24gYWxpZ25tZW50LCBzdHJpbmcgZm9yZWNvbG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSXNCb2xkID0gaXNCb2xkO1xyXG4gICAgICAgICAgICBBbGlnbm1lbnQgPSBhbGlnbm1lbnQ7XHJcbiAgICAgICAgICAgIEZvcmVjb2xvciA9IGZvcmVjb2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBHcmlkVmlld0NlbGxEaXNwbGF5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlRGVmYXVsdEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIEhUTUxFbGVtZW50IE9uQ3JlYXRlKEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIEhUTUxFbGVtZW50IE9uQ3JlYXRlRGVmYXVsdChIVE1MRWxlbWVudCBvcmlnaW5hbEVsZW1lbnQsIEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyaWRWaWV3Q29sdW1uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIERhdGFDb2x1bW4gQ29sdW1uO1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlldyBWaWV3O1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvbjtcclxuICAgICAgICBwdWJsaWMgYm9vbCBWaXNpYmxlO1xyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBDYWNoZWRYO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRm9ybWF0U3RyaW5nID0gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UgSGVhZGluZ0FwcGFyZW5jZSA9IG5ldyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoKTtcclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDZWxsQXBwYXJlbmNlIEJvZHlBcHBhcmVuY2UgPSBuZXcgR3JpZFZpZXdDZWxsQXBwYXJlbmNlKCk7XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3Q2VsbERpc3BsYXkgQ2VsbERpc3BsYXkgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld1NvcnRNb2RlIFNvcnRlZE1vZGUgPSBHcmlkVmlld1NvcnRNb2RlLk5vbmU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQgRmlsdGVyRWRpdCA9IG51bGw7XHJcblxyXG4gICAgICAgIHByaXZhdGUgb2JqZWN0IGZpbHRlclZhbHVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEZpbHRlclZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmlsdGVyVmFsdWU7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGZpbHRlclZhbHVlICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVmlldy5TaG93QXV0b0ZpbHRlclJvdylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZpZXcuQ2FsY3VsYXRlVmlzaWJsZVJvd3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFZhbHVlTWF0Y2hGaWx0ZXIoaW50IGluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoZmlsdGVyVmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0IGFiYyA9IEdldERpc3BsYXlWYWx1ZUJ5RGF0YVJvd0hhbmRsZShpbmRleCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2goQ29sdW1uLkRhdGFUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5PYmplY3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkxvbmc6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Eb3VibGU6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJvb2w6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlNob3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhYmMgPT0gZmlsdGVyVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYWJjICsgXCJcIikuU3RhcnRzV2l0aChmaWx0ZXJWYWx1ZSArIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbGxvd0VkaXQgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIFJlYWRPbmx5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2V0RGF0YUNvbHVtbkluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBWaWV3LkRhdGFTb3VyY2UuQ29sdW1uQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoVmlldy5EYXRhU291cmNlLkNvbHVtbnNbaV0gPT0gQ29sdW1uKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgR2V0RGlzcGxheVZhbHVlQnlEYXRhUm93SGFuZGxlKGludCBSb3dIYW5kbGUsIGJvb2wgaGFzRGF0YVJvd0luZGV4ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihWaWV3LkRhdGFTb3VyY2UuX3NlYXJjaEFjdGl2ZSAmJiAhaGFzRGF0YVJvd0luZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSb3dIYW5kbGUgPSBWaWV3LkRhdGFTb3VyY2UuX3NlYXJjaFJlc3VsdHNbUm93SGFuZGxlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKEZvcm1hdFN0cmluZykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb2x1bW4uR2V0RGlzcGxheVZhbHVlKFJvd0hhbmRsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29sdW1uLkdldERpc3BsYXlWYWx1ZShSb3dIYW5kbGUsIEZvcm1hdFN0cmluZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgR2V0RGlzcGxheVZhbHVlKGludCBSb3dIYW5kbGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihWaWV3LlZpc2libGVSb3dIYW5kbGVzICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJvd0hhbmRsZSA9IFZpZXcuVmlzaWJsZVJvd0hhbmRsZXNbUm93SGFuZGxlXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShGb3JtYXRTdHJpbmcpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29sdW1uLkdldERpc3BsYXlWYWx1ZShSb3dIYW5kbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbHVtbi5HZXREaXNwbGF5VmFsdWUoUm93SGFuZGxlLCBGb3JtYXRTdHJpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBfd2lkdGg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgV2lkdGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3dpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSA8IDI0KVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMjQ7XHJcbiAgICAgICAgICAgICAgICBpZihfd2lkdGggIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgVmlldy5SZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NvbHVtbihHcmlkVmlldyB2aWV3LCBpbnQgd2lkdGggPSAxMDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWaWV3ID0gdmlldztcclxuICAgICAgICAgICAgX3dpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbmRleFZhbHVlPFQ+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGludCBJbmRleDtcclxuICAgICAgICBwdWJsaWMgVCBWYWx1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIEluZGV4VmFsdWUoaW50IGluZGV4LCBUIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIEhhcmRTb2Z0TGlzdDxUPlxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgTGlzdDxUPiBfaGhsID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICBwcm90ZWN0ZWQgTGlzdDxJbmRleFZhbHVlPFQ+PiBfaGwgPSBuZXcgTGlzdDxJbmRleFZhbHVlPFQ+PigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gU0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IExpbWl0O1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBIYXJkTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgcHVibGljIEluZGV4VmFsdWU8VD4gR2V0SW5kZXhWYWx1ZUJ5SGFyZExpc3RJbmRleChpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hsW2luZGV4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUIERlZmF1bHRWYWx1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhcmRTb2Z0TGlzdChUIGRlZmF1bHRWYWx1ZSwgaW50IGxpbWl0ID0gMTAwMDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgIExpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhckFsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGhsID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgX2hsID0gbmV3IExpc3Q8SW5kZXhWYWx1ZTxUPj4oKTtcclxuICAgICAgICAgICAgU0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIEhhcmRMZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJBbGxTZXRIYXJkUmFuZ2UoVCB2YWx1ZSwgcGFyYW1zIGludFtdIEluZGV4cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEhhcmRMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBpZihJbmRleHMgPT0gbnVsbCB8fCBJbmRleHMuTGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgICAgICBDbGVhckFsbCgpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEluZGV4cy5MZW5ndGggPiBMaW1pdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBIYXJkTGVuZ3RoID0gSW5kZXhzLkxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBfaGwgPSBuZXcgTGlzdDxJbmRleFZhbHVlPFQ+PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIFNMID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgbWF4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgSGFyZExlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoSW5kZXhzW2ldID4gbWF4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gSW5kZXhzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoID0gbWF4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBfaGhsID0gbmV3IExpc3Q8VD4obGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYobGVuZ3RoID09IEluZGV4cy5MZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgSGFyZExlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGhsLkFkZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGhsLkFkZChEZWZhdWx0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBIYXJkTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaGxbSW5kZXhzW2ldXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9oaGwgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIEhhcmRMZW5ndGggPSBJbmRleHMuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIF9obCA9IG5ldyBMaXN0PEluZGV4VmFsdWU8VD4+KEhhcmRMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBIYXJkTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGwuQWRkKG5ldyBJbmRleFZhbHVlPFQ+KEluZGV4c1tpXSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgU0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyU29mdExpc3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhckFuZEFkZE9yU2V0KFQgdmFsdWUsIGludCBpbmRleCwgYm9vbCBBZGRUb1NvZnRMaXN0ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGhsID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgX2hsID0gbmV3IExpc3Q8SW5kZXhWYWx1ZTxUPj4oKTtcclxuICAgICAgICAgICAgU0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIEhhcmRMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBBZGRPclNldCh2YWx1ZSwgaW5kZXgsIEFkZFRvU29mdExpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIEluZGV4VmFsdWU8VD4gR2V0SGFyZE9yU29mdEluZGV4VmFsdWUoaW50IGluZGV4LCBib29sIEFkZFRvU29mdExpc3QgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBTTC5Db3VudDtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xJID0gU0xbaV07XHJcbiAgICAgICAgICAgICAgICBpZihfaGxbc2xJXS5JbmRleCA9PSBpbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2hsW3NsSV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IF9obC5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhsaSA9IF9obFtpXTtcclxuICAgICAgICAgICAgICAgIGlmKGhsaS5JbmRleCA9PSBpbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihBZGRUb1NvZnRMaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU0wuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGxpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBJbmRleFZhbHVlPFQ+IEdldEhhcmRJbmRleFZhbHVlKHJlZiBpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbGVuZ3RoID0gX2hsLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGxpID0gX2hsW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYoaGxpLkluZGV4ID09IGluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGxpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4ID0gbGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVCBHZXRWYWx1ZShpbnQgaW5kZXgsIGJvb2wgQWRkVG9Tb2Z0TGlzdCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSGFyZExlbmd0aCA+IExpbWl0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2hobFtpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGhpdiA9IEdldEhhcmRPclNvZnRJbmRleFZhbHVlKGluZGV4LCBBZGRUb1NvZnRMaXN0KTtcclxuICAgICAgICAgICAgaWYoaGl2ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gaGl2LlZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRJbmRleChpbnQgaW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihIYXJkTGVuZ3RoID4gTGltaXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGhpdiA9IEdldEhhcmRPclNvZnRJbmRleFZhbHVlKGluZGV4KTtcclxuICAgICAgICAgICAgaWYoaGl2ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIHJldHVybiBoaXYuSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRPclNldChUIHZhbHVlLCBpbnQgaW5kZXgsIGJvb2wgQWRkVG9Tb2Z0TGlzdCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSGFyZExlbmd0aCA+IExpbWl0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA+PSBIYXJkTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBhZGREaWZmID0gKGluZGV4ICsgMSkgLSBfaGhsLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFkZERpZmYgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVFtdIGRhdGEgPSBuZXcgVFthZGREaWZmXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGFkZERpZmY7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtpXSA9IERlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGhsLkFkZFJhbmdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfaGhsLkFkZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgSGFyZExlbmd0aCA9IF9oaGwuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hobFtpbmRleF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGxlbmd0aCA9IFNMLkNvdW50O1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBobGkgPSBfaGxbU0xbaV1dO1xyXG4gICAgICAgICAgICAgICAgaWYoaGxpLkluZGV4ID09IGluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGhsaS5WYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGhpbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICB2YXIgaGl2ID0gR2V0SGFyZEluZGV4VmFsdWUocmVmIGhpbmRleCk7XHJcbiAgICAgICAgICAgIGlmKGhpdiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgX2hsLkFkZCgoaGl2ID0gbmV3IEluZGV4VmFsdWU8VD4oaW5kZXgsIHZhbHVlKSkpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBoaXYuVmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKEFkZFRvU29mdExpc3QpXHJcbiAgICAgICAgICAgICAgICBTTC5BZGQoaGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbW92ZShpbnQgaW5kZXgsIGJvb2wgT25seVNvZnRMaXN0ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihIYXJkTGVuZ3RoID4gTGltaXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEhhcmRMZW5ndGggLSAxID4gTGltaXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hobFtpbmRleF0gPSBEZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IEhhcmRMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgIT0gaW5kZXggJiYgIV9oaGxbaV0uRXF1YWxzKERlZmF1bHRWYWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9obC5BZGQobmV3IEluZGV4VmFsdWU8VD4oaSwgX2hobFtpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBIYXJkTGVuZ3RoIC09IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgTGVuZ3RoID0gU0wuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaSA9IFNMW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9obFtzbGldLkluZGV4ID09IGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU0wuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE9ubHlTb2Z0TGlzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hsLlJlbW92ZUF0KHNsaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoID0gX2hsLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGxpID0gX2hsW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGhsaS5JbmRleCA9PSBpbmRleClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9obC5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEhlbHBlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBEYXRhVGFibGVKc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RyaW5nW10gZmllbGROYW1lcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHB1YmxpYyBvYmplY3RbXVtdIHJvd3MgPSBudWxsO1xyXG4gICAgICAgICAgICBwdWJsaWMgRGF0YVR5cGVbXSBkYXRhVHlwZXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBEYXRhVGFibGVKc29uIEZyb21FeHRlcm5hbChvYmplY3QgbylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGF0YVRhYmxlSnNvbiB4O1xyXG4gICAgICAgICAgICAgICAgeCA9IFNjcmlwdC5Xcml0ZTxEYXRhVGFibGVKc29uPihcIkJyaWRnZS5tZXJnZShCcmlkZ2UuY3JlYXRlSW5zdGFuY2UoRXhwcmVzc0NyYWZ0LkhlbHBlci5EYXRhVGFibGVKc29uKSwgbyk7XCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0YVRhYmxlIFBhcnNlKGR5bmFtaWMgbylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGF0YVRhYmxlIGR0ID0gbmV3IERhdGFUYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IG8uZmllbGROYW1lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHQuQWRkQ29sdW1uKG8uZmllbGROYW1lc1tpXSwgby5kYXRhVHlwZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoby5yb3dzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gby5yb3dzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBkdC5CZWdpbk5ld1JvdyhsZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHIgPSBkdC5OZXdSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHIuYmF0Y2hEYXRhID0gby5yb3dzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkdC5BY2NlcHROZXdSb3dzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBEYXRhVGFibGUgVG9UYWJsZSgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkdCA9IG5ldyBEYXRhVGFibGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgZmllbGROYW1lcy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkdC5BZGRDb2x1bW4oZmllbGROYW1lc1tpXSwgZGF0YVR5cGVzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihyb3dzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHQuQmVnaW5OZXdSb3cocm93cy5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgcm93cy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkciA9IGR0Lk5ld1JvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkci5iYXRjaERhdGEgPSByb3dzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkdC5BY2NlcHROZXdSb3dzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGR0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNJUGhvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCByID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8qQFxyXG4gICAgICAgICAgIHIgPSAhIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKTtcclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0lQYWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCByID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8qQFxyXG4gICAgICAgICAgIHIgPSAhIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSk7XHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBib29sIF9ub3REZXNrdG9wO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBfc2V0dXBEZXNrdG9wO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTm90RGVza3RvcFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBfc2V0dXBEZXNrdG9wID8gX25vdERlc2t0b3AgOiBfbm90RGVza3RvcCA9ICghQnJvd3Nlci5Jc0Rlc2t0b3AgfHwgSXNJUGhvbmUoKSB8fCBJc0lQYWQoKSk7XHJcbiAgICAgICAgICAgICAgICBfc2V0dXBEZXNrdG9wID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IElzVHJ1ZSh0aGlzIHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKHZhbHVlID0gdmFsdWUuVG9Mb3dlcigpKSA9PSBcInRydWVcIiB8fCB2YWx1ZSA9PSBcIjFcIiB8fCB2YWx1ZSA9PSBcIm9uXCIpID8gMSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBUb0ludCh0aGlzIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2xvYmFsLlBhcnNlSW50KHZhbHVlLkFzPHN0cmluZz4oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZsb2F0IFRvRmxvYXQodGhpcyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdCh2YWx1ZS5BczxzdHJpbmc+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TdHIodGhpcyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLkFzPHN0cmluZz4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0ZpcmVGb3goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCB2YWx1ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypAXHJcbmlmKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmaXJlZm94JykgPiAtMSlcclxue1xyXG4gICAgdmFsdWUgPSB0cnVlO1xyXG59XHJcblx0XHRcdCovXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBGb2N1c0VsZW1lbnQodGhpcyBIVE1MRWxlbWVudCBlbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5Gb2N1cygpO1xyXG4gICAgICAgICAgICB9KSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWwgU3RyaXBOb25OdW1iZXJTdHJpbmcodGhpcyBzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgYm9vbCBBZGRlZERpZ2l0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IHZhbHVlLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihjaGFyLklzRGlnaXQodmFsdWVbaV0pIHx8IHZhbHVlW2ldID09ICcuJylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZCh2YWx1ZVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgQWRkZWREaWdpdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih2YWx1ZVtpXSA9PSAnLScgJiYgIUFkZGVkRGlnaXRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBBZGRlZERpZ2l0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlY2ltYWwgdmFsdWUxID0gMDtcclxuICAgICAgICAgICAgZGVjaW1hbC5UcnlQYXJzZShidWlsZGVyLlRvU3RyaW5nKCksIG91dCB2YWx1ZTEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVRpbWUgU3RyaXBOb25EYXRlU3RyaW5nKHRoaXMgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuTWluVmFsdWU7XHJcblxyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5UcmltKCkuUmVwbGFjZSgnXFxcXCcsIEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlU2VwZXJhdG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib29sIHN0YXJ0c1dpdGhQbHVzID0gKHZhbHVlLlN0YXJ0c1dpdGgoXCIrXCIpKTtcclxuICAgICAgICAgICAgICAgIGJvb2wgc3RhcnRzV2l0aE11bnVzID0gIXN0YXJ0c1dpdGhQbHVzICYmICh2YWx1ZS5TdGFydHNXaXRoKFwiLVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc3RhcnRzV2l0aE11bnVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuU3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuUmVwbGFjZSgnLScsIEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlU2VwZXJhdG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib29sIGVuZHNXaXRoTW9udGggPSAoc3RhcnRzV2l0aFBsdXMgfHwgc3RhcnRzV2l0aE11bnVzKSAmJiAodmFsdWUuVG9Mb3dlcigpLkVuZHNXaXRoKFwibVwiKSk7XHJcbiAgICAgICAgICAgICAgICBib29sIGVuZHNXaXRoeWVhciA9ICFlbmRzV2l0aE1vbnRoICYmIChzdGFydHNXaXRoUGx1cyB8fCBzdGFydHNXaXRoTXVudXMpICYmICh2YWx1ZS5Ub0xvd2VyKCkuRW5kc1dpdGgoXCJ5XCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZS5Ub0xvd2VyKCkgPT0gXCJkXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGVUaW1lLlRvZGF5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBMaXN0PGludD4gVmFsdWVzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCB2YWx1ZS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaGFyLklzRGlnaXQodmFsdWVbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZCh2YWx1ZVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih2YWx1ZVtpXSA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVNlcGVyYXRvcilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlcy5BZGQoaW50LlBhcnNlKGJ1aWxkZXIuVG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoYnVpbGRlci5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFZhbHVlcy5BZGQoaW50LlBhcnNlKGJ1aWxkZXIuVG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYoVmFsdWVzLkNvdW50ID49IDMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShWYWx1ZXNbKGludClFeHByZXNzQ3JhZnQuU2V0dGluZ3MuWWVhclBvc2l0aW9uXSwgVmFsdWVzWyhpbnQpRXhwcmVzc0NyYWZ0LlNldHRpbmdzLk1vbnRoUG9zaXRpb25dLCBWYWx1ZXNbKGludClFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF5UG9zaXRpb25dKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoVmFsdWVzLkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRheVBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uRmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdGFydHNXaXRoUGx1cyB8fCBzdGFydHNXaXRoTXVudXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gRGF0ZVRpbWUuVG9kYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbmRzV2l0aE1vbnRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlLkFkZE1vbnRocyhzdGFydHNXaXRoTXVudXMgPyAtVmFsdWVzWzBdIDogVmFsdWVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoZW5kc1dpdGh5ZWFyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXJ0c1dpdGhNdW51cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlLkFkZFllYXJzKC1WYWx1ZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gZGF0ZS5BZGRZZWFycyhWYWx1ZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gZGF0ZS5BZGREYXlzKHN0YXJ0c1dpdGhNdW51cyA/IC1WYWx1ZXNbMF0gOiBWYWx1ZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0ZS5Ib3VyID09IDIzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuQWRkSG91cnMoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoRGF0ZVRpbWUuVG9kYXkuWWVhciwgRGF0ZVRpbWUuVG9kYXkuTW9udGgsIFZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuTW9udGhQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uLkZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShEYXRlVGltZS5Ub2RheS5ZZWFyLCBWYWx1ZXNbMF0sIERhdGVUaW1lLlRvZGF5LkRheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLlllYXJQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uLkZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShWYWx1ZXNbMF0sIERhdGVUaW1lLlRvZGF5Lk1vbnRoLCBEYXRlVGltZS5Ub2RheS5EYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoVmFsdWVzLkNvdW50ID09IDIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRheVBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24gLkZpcnN0ICYmIEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5Nb250aFBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uU2Vjb25kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShEYXRlVGltZS5Ub2RheS5ZZWFyLCBWYWx1ZXNbMV0sIFZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRheVBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24gLlNlY29uZCAmJiBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuTW9udGhQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uLkZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShEYXRlVGltZS5Ub2RheS5ZZWFyLCBWYWx1ZXNbMF0sIFZhbHVlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLlllYXJQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uIC5TZWNvbmQgJiYgRXhwcmVzc0NyYWZ0LlNldHRpbmdzLk1vbnRoUG9zaXRpb24gPT0gRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVQb3NpdGlvbi5GaXJzdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoVmFsdWVzWzFdLCBWYWx1ZXNbMF0sIERhdGVUaW1lLlRvZGF5LkRheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRXhwcmVzc0NyYWZ0LlNldHRpbmdzLlllYXJQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uIC5GaXJzdCAmJiBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuTW9udGhQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uLlNlY29uZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoVmFsdWVzWzBdLCBWYWx1ZXNbMV0sIERhdGVUaW1lLlRvZGF5LkRheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuTWluVmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWwgQWRkVGF4KGRlY2ltYWwgdmFsdWUsIGRlY2ltYWwgdGF4UGVyY2VudCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICB0YXhQZXJjZW50ID0gU2V0dGluZ3MuVGF4UGVyY2VudDtcclxuICAgICAgICAgICAgaWYodGF4UGVyY2VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogKDEgKyB0YXhQZXJjZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjaW1hbCBHZXRQb3J0aW9uVGF4KGRlY2ltYWwgdmFsdWUsIGRlY2ltYWwgdGF4UGVyY2VudCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICB0YXhQZXJjZW50ID0gU2V0dGluZ3MuVGF4UGVyY2VudDtcclxuICAgICAgICAgICAgaWYodGF4UGVyY2VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgLSB2YWx1ZSAvICgxICsgdGF4UGVyY2VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWwgRGVkdWN0VGF4KGRlY2ltYWwgdmFsdWUsIGRlY2ltYWwgdGF4UGVyY2VudCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICB0YXhQZXJjZW50ID0gU2V0dGluZ3MuVGF4UGVyY2VudDtcclxuICAgICAgICAgICAgaWYodGF4UGVyY2VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC0gR2V0UG9ydGlvblRheCh2YWx1ZSwgdGF4UGVyY2VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNOdW1iZXIodGhpcyBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgaXMgc2J5dGVcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyBieXRlXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgdmFsdWUgaXMgc2hvcnRcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyB1c2hvcnRcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyBpbnRcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyB1aW50XHJcbiAgICAgICAgICAgICAgICAgICAgfHwgdmFsdWUgaXMgbG9uZ1xyXG4gICAgICAgICAgICAgICAgICAgIHx8IHZhbHVlIGlzIHVsb25nXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgdmFsdWUgaXMgZmxvYXRcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyBkb3VibGVcclxuICAgICAgICAgICAgICAgICAgICB8fCB2YWx1ZSBpcyBkZWNpbWFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEVtcHR5KHRoaXMgSFRNTEVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8qQFxyXG5cdFx0XHR2YXIgbGVuID0gZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDtcclxuXHRcdFx0d2hpbGUobGVuLS0pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQubGFzdENoaWxkKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0Ki9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMiBHZXRDbGllbnRNb3VzZUxvY2F0aW9uKG9iamVjdCBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgICAgIC8qQFxyXG5cdFx0XHQgIGlmICghZSkgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7XHJcblxyXG5cdFx0XHQgIGlmIChlLnBhZ2VYIHx8IGUucGFnZVkpIHtcclxuXHRcdFx0XHR4ID0gZS5wYWdlWDtcclxuXHRcdFx0XHR5ID0gZS5wYWdlWTtcclxuXHRcdFx0ICB9IGVsc2UgaWYgKGUuY2xpZW50WCB8fCBlLmNsaWVudFkpIHtcclxuXHRcdFx0XHR4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICtcclxuXHRcdFx0XHRcdFx0XHRcdCAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG5cdFx0XHRcdHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArXHJcblx0XHRcdFx0XHRcdFx0XHQgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG5cdFx0XHQgIH1cclxuXHRcdFx0Ki9cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgsIHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldENoZWNrZWQodGhpcyBDb250cm9sIGlucHV0LCBvYmplY3QgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnB1dC5Db250ZW50LlNldENoZWNrZWQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldENoZWNrZWQodGhpcyBIVE1MRWxlbWVudCBpbnB1dCwgb2JqZWN0IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCBjaGVjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZih2YWx1ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSBpcyBib29sIHx8IHZhbHVlLklzTnVtYmVyKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSAoYm9vbCl2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodmFsdWUgaXMgc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBzdHJWYWx1ZSA9ICgoc3RyaW5nKXZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IChzdHJWYWx1ZSA9PSBcIjFcIiB8fCBzdHJpbmcuQ29tcGFyZShzdHJWYWx1ZS5Ub0xvd2VyKCksIFwidHJ1ZVwiKSA9PSAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighY2hlY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LlJlbW92ZUF0dHJpYnV0ZShHcmlkVmlld0NlbGxEaXNwbGF5Q2hlY2tCb3gucmVzb3VyY2VfY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5TZXRBdHRyaWJ1dGUoR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94LnJlc291cmNlX2NoZWNrZWQsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIElFIGRvZXMgbm90IHN1cHBvcnQgLnJlbW92ZSBvbiBFbGVtZW50IHVzZSBkZWxldGVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNcIj48L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWxldGUodGhpcyBFbGVtZW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIGMuUGFyZW50RWxlbWVudCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBjLlBhcmVudEVsZW1lbnQuQ29udGFpbnMoYykpXHJcbiAgICAgICAgICAgICAgICBjLlBhcmVudEVsZW1lbnQuUmVtb3ZlQ2hpbGQoYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1B4KHRoaXMgb2JqZWN0IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU2NyaXB0LldyaXRlPHN0cmluZz4oXCJpICsgJ3B4J1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBMb2cob2JqZWN0IGpzbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNjcmlwdC5DYWxsKFwiY29uc29sZS5sb2dcIiwganNvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBcHBlbmRDaGlsZHJlbih0aGlzIE5vZGUgYywgcGFyYW1zIE5vZGVbXSBOb2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE5vZGVzICE9IG51bGwgJiYgTm9kZXMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IE5vZGVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuQXBwZW5kQ2hpbGQoTm9kZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXBwZW5kQ2hpbGRyZW5UYWJJbmRleCh0aGlzIE5vZGUgYywgcGFyYW1zIENvbnRyb2xbXSBOb2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE5vZGVzICE9IG51bGwgJiYgTm9kZXMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IE5vZGVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE5vZGVzW2ldLkNvbnRlbnQuVGFiSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGMuQXBwZW5kQ2hpbGQoTm9kZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXBwZW5kQ2hpbGRyZW5UYWJJbmRleCh0aGlzIENvbnRyb2wgYywgcGFyYW1zIENvbnRyb2xbXSBOb2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGMuQ29udGVudC5BcHBlbmRDaGlsZHJlblRhYkluZGV4KE5vZGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29udHJvbCBBcHBlbmRDaGlsZCh0aGlzIENvbnRyb2wgYywgQ29udHJvbCBOb2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5Db250ZW50LkFwcGVuZENoaWxkKE5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQ29udHJvbCBBcHBlbmRDaGlsZHJlbih0aGlzIENvbnRyb2wgYywgcGFyYW1zIENvbnRyb2xbXSBOb2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGMuQ29udGVudC5BcHBlbmRDaGlsZHJlbihOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBcHBlbmRDaGlsZHJlbih0aGlzIE5vZGUgYywgcGFyYW1zIENvbnRyb2xbXSBOb2RlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE5vZGVzICE9IG51bGwgJiYgTm9kZXMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IE5vZGVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGMuQXBwZW5kQ2hpbGQoTm9kZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbnRyb2wgU2V0Qm91bmRzKHRoaXMgQ29udHJvbCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHdpZHRoLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGMuQ29udGVudC5TZXRCb3VuZHMobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb250cm9sIFNldEJvdW5kc0Z1bGwodGhpcyBDb250cm9sIGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLkNvbnRlbnQuU2V0Qm91bmRzRnVsbCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0Qm91bmRzRnVsbCh0aGlzIEhUTUxFbGVtZW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLlNldEJvdW5kcygwLCAwLCBcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb250cm9sIFNldFNpemUodGhpcyBDb250cm9sIGMsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gd2lkdGgsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5Db250ZW50LlNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRCb3VuZHModGhpcyBIVE1MRWxlbWVudCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHdpZHRoLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGMuU3R5bGUuTGVmdCA9IGxlZnQuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgYy5TdHlsZS5Ub3AgPSB0b3AuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgYy5TdHlsZS5XaWR0aCA9IHdpZHRoLlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgICAgIGMuU3R5bGUuSGVpZ2h0ID0gaGVpZ2h0LlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0h0bWxWYWx1ZSh0aGlzIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih2YWx1ZS5JczxzdHJpbmc+KCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVmVjdG9yMi5wZih2YWx1ZS5BczxzdHJpbmc+KCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmKHZhbHVlLklzPGludD4oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5BczxpbnQ+KCkuVG9QeCgpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuQXM8ZmxvYXQ+KCkuVG9QeCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldEltYWdlKHRoaXMgQ29udHJvbCBjLCBzdHJpbmcgc3RyLCBib29sIHVzZVVSTCA9IHRydWUsIGJvb2wgdXNlUmVzb3VyY2UgPSB0cnVlLCBib29sIGNlbnRlciA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighc3RyLlN0YXJ0c1dpdGgoXCJ1cmwoXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSB1c2VVUkwgPyBDb250cm9sLkdldEltYWdlU3RyaW5nVVJJKHN0ciwgdXNlUmVzb3VyY2UpIDogQ29udHJvbC5HZXRJbWFnZVN0cmluZyhzdHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNldEltYWdlKGMuQ29udGVudCwgc3RyLCB1c2VVUkwsIGNlbnRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0SW1hZ2UodGhpcyBIVE1MRWxlbWVudCBjLCBzdHJpbmcgc3RyLCBib29sIHVzZVVSTCA9IHRydWUsIGJvb2wgY2VudGVyID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2Uoc3RyKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYy5TdHlsZS5CYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGMuU3R5bGUuQmFja2dyb3VuZFNpemUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoIXN0ci5TdGFydHNXaXRoKFwidXJsKFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gdXNlVVJMID8gQ29udHJvbC5HZXRJbWFnZVN0cmluZ1VSSShzdHIpIDogQ29udHJvbC5HZXRJbWFnZVN0cmluZyhzdHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGMuU3R5bGUuQmFja2dyb3VuZCA9IHN0cjtcclxuICAgICAgICAgICAgaWYoY2VudGVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjLlN0eWxlLkJhY2tncm91bmRTaXplID0gXCIxMDAlIDEwMCVcIjtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTaXplKHRoaXMgSFRNTEVsZW1lbnQgYywgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB3aWR0aCwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLlN0eWxlLldpZHRoID0gd2lkdGguVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgYy5TdHlsZS5IZWlnaHQgPSBoZWlnaHQuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRMb2NhdGlvbih0aGlzIENvbnRyb2wgYywgaW50IGxlZnQsIGludCB0b3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLkNvbnRlbnQuU2V0TG9jYXRpb24obGVmdC5Ub1B4KCksIHRvcC5Ub1B4KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldExvY2F0aW9uKHRoaXMgQ29udHJvbCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5Db250ZW50LlNldExvY2F0aW9uKGxlZnQsIHRvcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0TG9jYXRpb24odGhpcyBIVE1MRWxlbWVudCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5TdHlsZS5MZWZ0ID0gbGVmdC5Ub0h0bWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICBjLlN0eWxlLlRvcCA9IHRvcC5Ub0h0bWxWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBIdG1sRXNjYXBlIFhTU1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2JqXCI+PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEh0bWxFc2NhcGUodGhpcyBvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChvYmogYXMgc3RyaW5nKS5IdG1sRXNjYXBlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEh0bWxVcmxVbmVzY2FwZSBYU1NcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgSHRtbFVybFVuZXNjYXBlKHRoaXMgc3RyaW5nIGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFzdHJpbmcuSXNOdWxsT3JFbXB0eShpbnB1dClcclxuICAgICAgICAgICAgICAgID8gaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAuUmVwbGFjZShcIiZhbXBcIiwgXCImXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLlJlcGxhY2UoXCImbHRcIiwgXCI8XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLlJlcGxhY2UoXCImZ3RcIiwgXCI+XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLlJlcGxhY2UoXCImI3gyN1wiLCBcIidcIilcclxuICAgICAgICAgICAgICAgIDogXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gSHRtbFVybEVzY2FwZSBYU1NcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImlucHV0XCI+PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEh0bWxVcmxFc2NhcGUodGhpcyBzdHJpbmcgaW5wdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIXN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0KVxyXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIC5SZXBsYWNlKFwiJlwiLCBcIiZhbXBcIilcclxuICAgICAgICAgICAgICAgICAgICAuUmVwbGFjZShcIjxcIiwgXCImbHRcIilcclxuICAgICAgICAgICAgICAgICAgICAuUmVwbGFjZShcIj5cIiwgXCImZ3RcIilcclxuICAgICAgICAgICAgICAgICAgICAuUmVwbGFjZShcIidcIiwgXCImI3gyN1wiKVxyXG4gICAgICAgICAgICAgICAgOiBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEh0bWxFc2NhcGUgWFNTXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJpbnB1dFwiPjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBIdG1sRXNjYXBlKHRoaXMgc3RyaW5nIGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFzdHJpbmcuSXNOdWxsT3JFbXB0eShpbnB1dCkgP1xyXG4gICAgICAgICAgICAgICAgSHRtbFVybEVzY2FwZShpbnB1dCkuUmVwbGFjZShAXCJcXC9cIiwgXCImI3gyRlwiKS5SZXBsYWNlKFwiXFxcIlwiLCBcIiZxdW90XCIpIDpcclxuICAgICAgICAgICAgICAgIHN0cmluZy5FbXB0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gSHRtbFVuZXNjYXBlIFhTU1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBIdG1sVW5lc2NhcGUodGhpcyBzdHJpbmcgaW5wdXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIUlzRW1wdHkoaW5wdXQpID9cclxuICAgICAgICAgICAgICAgIEh0bWxVcmxVbmVzY2FwZShpbnB1dCkuUmVwbGFjZShcIiYjeDJGXCIsIEBcIlxcL1wiKS5SZXBsYWNlKFwiJnF1b3RcIiwgXCJcXFwiXCIpIDpcclxuICAgICAgICAgICAgICAgIHN0cmluZy5FbXB0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBFeGNoYW5nZUNsYXNzKHRoaXMgQ29udHJvbCBjb250cm9sLCBzdHJpbmcgb2xkQ2xhc3MsIHN0cmluZyBuZXdDbGFzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV4Y2hhbmdlQ2xhc3MoY29udHJvbC5Db250ZW50LCBvbGRDbGFzcywgbmV3Q2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEV4Y2hhbmdlQ2xhc3ModGhpcyBIVE1MRWxlbWVudCBjb250cm9sLCBzdHJpbmcgb2xkQ2xhc3MsIHN0cmluZyBuZXdDbGFzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFJc0VtcHR5KG9sZENsYXNzKSAmJiBjb250cm9sLkNsYXNzTGlzdC5Db250YWlucyhvbGRDbGFzcykpXHJcbiAgICAgICAgICAgICAgICBjb250cm9sLkNsYXNzTGlzdC5SZW1vdmUob2xkQ2xhc3MpO1xyXG4gICAgICAgICAgICBpZighSXNFbXB0eShuZXdDbGFzcykgJiYgIWNvbnRyb2wuQ2xhc3NMaXN0LkNvbnRhaW5zKG5ld0NsYXNzKSlcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuQ2xhc3NMaXN0LkFkZChuZXdDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNFbXB0eSh0aGlzIHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTdG9wQW5kTG9nKHRoaXMgU3RvcHdhdGNoIHN3LCBzdHJpbmcgbG9nTmFtZSA9IFwiVGFza1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3cuU3RvcCgpO1xyXG4gICAgICAgICAgICBDb25zb2xlRm9ybS5Mb2cobG9nTmFtZSArIFwiIHRvb2sgXCIgKyBzdy5FbGFwc2VkTWlsbGlzZWNvbmRzICsgXCJtcyB0byBmaW5pc2hcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEtleUNvZGVzXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IGludCBNb2RpZmllcnMgPSAtNjU1MzYsXHJcbiAgICAgICAgTm9uZSA9IDAsXHJcbiAgICAgICAgTEJ1dHRvbiA9IDEsXHJcbiAgICAgICAgUkJ1dHRvbiA9IDIsXHJcbiAgICAgICAgQ2FuY2VsID0gMyxcclxuICAgICAgICBNQnV0dG9uID0gNCxcclxuICAgICAgICBYQnV0dG9uMSA9IDUsXHJcbiAgICAgICAgWEJ1dHRvbjIgPSA2LFxyXG4gICAgICAgIEJhY2sgPSA4LFxyXG4gICAgICAgIFRhYiA9IDksXHJcbiAgICAgICAgTGluZUZlZWQgPSAxMCxcclxuICAgICAgICBDbGVhciA9IDEyLFxyXG4gICAgICAgIFJldHVybiA9IDEzLFxyXG4gICAgICAgIEVudGVyID0gMTMsXHJcbiAgICAgICAgU2hpZnRLZXkgPSAxNixcclxuICAgICAgICBDb250cm9sS2V5ID0gMTcsXHJcbiAgICAgICAgTWVudSA9IDE4LFxyXG4gICAgICAgIFBhdXNlID0gMTksXHJcbiAgICAgICAgQ2FwaXRhbCA9IDIwLFxyXG4gICAgICAgIENhcHNMb2NrID0gMjAsXHJcbiAgICAgICAgS2FuYU1vZGUgPSAyMSxcclxuICAgICAgICBIYW5ndWVsTW9kZSA9IDIxLFxyXG4gICAgICAgIEhhbmd1bE1vZGUgPSAyMSxcclxuICAgICAgICBKdW5qYU1vZGUgPSAyMyxcclxuICAgICAgICBGaW5hbE1vZGUgPSAyNCxcclxuICAgICAgICBIYW5qYU1vZGUgPSAyNSxcclxuICAgICAgICBLYW5qaU1vZGUgPSAyNSxcclxuICAgICAgICBFc2NhcGUgPSAyNyxcclxuICAgICAgICBJTUVDb252ZXJ0ID0gMjgsXHJcbiAgICAgICAgSU1FTm9uY29udmVydCA9IDI5LFxyXG4gICAgICAgIElNRUFjY2VwdCA9IDMwLFxyXG4gICAgICAgIElNRUFjZWVwdCA9IDMwLFxyXG4gICAgICAgIElNRU1vZGVDaGFuZ2UgPSAzMSxcclxuICAgICAgICBTcGFjZSA9IDMyLFxyXG4gICAgICAgIFByaW9yID0gMzMsXHJcbiAgICAgICAgUGFnZVVwID0gMzMsXHJcbiAgICAgICAgTmV4dCA9IDM0LFxyXG4gICAgICAgIFBhZ2VEb3duID0gMzQsXHJcbiAgICAgICAgRW5kID0gMzUsXHJcbiAgICAgICAgSG9tZSA9IDM2LFxyXG4gICAgICAgIExlZnQgPSAzNyxcclxuICAgICAgICBVcCA9IDM4LFxyXG4gICAgICAgIFJpZ2h0ID0gMzksXHJcbiAgICAgICAgRG93biA9IDQwLFxyXG4gICAgICAgIFNlbGVjdCA9IDQxLFxyXG4gICAgICAgIFByaW50ID0gNDIsXHJcbiAgICAgICAgRXhlY3V0ZSA9IDQzLFxyXG4gICAgICAgIFNuYXBzaG90ID0gNDQsXHJcbiAgICAgICAgUHJpbnRTY3JlZW4gPSA0NCxcclxuICAgICAgICBJbnNlcnQgPSA0NSxcclxuICAgICAgICBEZWxldGUgPSA0NixcclxuICAgICAgICBIZWxwID0gNDcsXHJcbiAgICAgICAgRDAgPSA0OCxcclxuICAgICAgICBEMSA9IDQ5LFxyXG4gICAgICAgIEQyID0gNTAsXHJcbiAgICAgICAgRDMgPSA1MSxcclxuICAgICAgICBENCA9IDUyLFxyXG4gICAgICAgIEQ1ID0gNTMsXHJcbiAgICAgICAgRDYgPSA1NCxcclxuICAgICAgICBENyA9IDU1LFxyXG4gICAgICAgIEQ4ID0gNTYsXHJcbiAgICAgICAgRDkgPSA1NyxcclxuICAgICAgICBBID0gNjUsXHJcbiAgICAgICAgQiA9IDY2LFxyXG4gICAgICAgIEMgPSA2NyxcclxuICAgICAgICBEID0gNjgsXHJcbiAgICAgICAgRSA9IDY5LFxyXG4gICAgICAgIEYgPSA3MCxcclxuICAgICAgICBHID0gNzEsXHJcbiAgICAgICAgSCA9IDcyLFxyXG4gICAgICAgIEkgPSA3MyxcclxuICAgICAgICBKID0gNzQsXHJcbiAgICAgICAgSyA9IDc1LFxyXG4gICAgICAgIEwgPSA3NixcclxuICAgICAgICBNID0gNzcsXHJcbiAgICAgICAgTiA9IDc4LFxyXG4gICAgICAgIE8gPSA3OSxcclxuICAgICAgICBQID0gODAsXHJcbiAgICAgICAgUSA9IDgxLFxyXG4gICAgICAgIFIgPSA4MixcclxuICAgICAgICBTID0gODMsXHJcbiAgICAgICAgVCA9IDg0LFxyXG4gICAgICAgIFUgPSA4NSxcclxuICAgICAgICBWID0gODYsXHJcbiAgICAgICAgVyA9IDg3LFxyXG4gICAgICAgIFggPSA4OCxcclxuICAgICAgICBZID0gODksXHJcbiAgICAgICAgWiA9IDkwLFxyXG4gICAgICAgIExXaW4gPSA5MSxcclxuICAgICAgICBSV2luID0gOTIsXHJcbiAgICAgICAgQXBwcyA9IDkzLFxyXG4gICAgICAgIFNsZWVwID0gOTUsXHJcbiAgICAgICAgTnVtUGFkMCA9IDk2LFxyXG4gICAgICAgIE51bVBhZDEgPSA5NyxcclxuICAgICAgICBOdW1QYWQyID0gOTgsXHJcbiAgICAgICAgTnVtUGFkMyA9IDk5LFxyXG4gICAgICAgIE51bVBhZDQgPSAxMDAsXHJcbiAgICAgICAgTnVtUGFkNSA9IDEwMSxcclxuICAgICAgICBOdW1QYWQ2ID0gMTAyLFxyXG4gICAgICAgIE51bVBhZDcgPSAxMDMsXHJcbiAgICAgICAgTnVtUGFkOCA9IDEwNCxcclxuICAgICAgICBOdW1QYWQ5ID0gMTA1LFxyXG4gICAgICAgIE11bHRpcGx5ID0gMTA2LFxyXG4gICAgICAgIEFkZCA9IDEwNyxcclxuICAgICAgICBTZXBhcmF0b3IgPSAxMDgsXHJcbiAgICAgICAgU3VidHJhY3QgPSAxMDksXHJcbiAgICAgICAgRGVjaW1hbCA9IDExMCxcclxuICAgICAgICBEaXZpZGUgPSAxMTEsXHJcbiAgICAgICAgRjEgPSAxMTIsXHJcbiAgICAgICAgRjIgPSAxMTMsXHJcbiAgICAgICAgRjMgPSAxMTQsXHJcbiAgICAgICAgRjQgPSAxMTUsXHJcbiAgICAgICAgRjUgPSAxMTYsXHJcbiAgICAgICAgRjYgPSAxMTcsXHJcbiAgICAgICAgRjcgPSAxMTgsXHJcbiAgICAgICAgRjggPSAxMTksXHJcbiAgICAgICAgRjkgPSAxMjAsXHJcbiAgICAgICAgRjEwID0gMTIxLFxyXG4gICAgICAgIEYxMSA9IDEyMixcclxuICAgICAgICBGMTIgPSAxMjMsXHJcbiAgICAgICAgRjEzID0gMTI0LFxyXG4gICAgICAgIEYxNCA9IDEyNSxcclxuICAgICAgICBGMTUgPSAxMjYsXHJcbiAgICAgICAgRjE2ID0gMTI3LFxyXG4gICAgICAgIEYxNyA9IDEyOCxcclxuICAgICAgICBGMTggPSAxMjksXHJcbiAgICAgICAgRjE5ID0gMTMwLFxyXG4gICAgICAgIEYyMCA9IDEzMSxcclxuICAgICAgICBGMjEgPSAxMzIsXHJcbiAgICAgICAgRjIyID0gMTMzLFxyXG4gICAgICAgIEYyMyA9IDEzNCxcclxuICAgICAgICBGMjQgPSAxMzUsXHJcbiAgICAgICAgTnVtTG9jayA9IDE0NCxcclxuICAgICAgICBTY3JvbGwgPSAxNDUsXHJcbiAgICAgICAgTFNoaWZ0S2V5ID0gMTYwLFxyXG4gICAgICAgIFJTaGlmdEtleSA9IDE2MSxcclxuICAgICAgICBMQ29udHJvbEtleSA9IDE2MixcclxuICAgICAgICBSQ29udHJvbEtleSA9IDE2MyxcclxuICAgICAgICBMTWVudSA9IDE2NCxcclxuICAgICAgICBSTWVudSA9IDE2NSxcclxuICAgICAgICBCcm93c2VyQmFjayA9IDE2NixcclxuICAgICAgICBCcm93c2VyRm9yd2FyZCA9IDE2NyxcclxuICAgICAgICBCcm93c2VyUmVmcmVzaCA9IDE2OCxcclxuICAgICAgICBCcm93c2VyU3RvcCA9IDE2OSxcclxuICAgICAgICBCcm93c2VyU2VhcmNoID0gMTcwLFxyXG4gICAgICAgIEJyb3dzZXJGYXZvcml0ZXMgPSAxNzEsXHJcbiAgICAgICAgQnJvd3NlckhvbWUgPSAxNzIsXHJcbiAgICAgICAgVm9sdW1lTXV0ZSA9IDE3MyxcclxuICAgICAgICBWb2x1bWVEb3duID0gMTc0LFxyXG4gICAgICAgIFZvbHVtZVVwID0gMTc1LFxyXG4gICAgICAgIE1lZGlhTmV4dFRyYWNrID0gMTc2LFxyXG4gICAgICAgIE1lZGlhUHJldmlvdXNUcmFjayA9IDE3NyxcclxuICAgICAgICBNZWRpYVN0b3AgPSAxNzgsXHJcbiAgICAgICAgTWVkaWFQbGF5UGF1c2UgPSAxNzksXHJcbiAgICAgICAgTGF1bmNoTWFpbCA9IDE4MCxcclxuICAgICAgICBTZWxlY3RNZWRpYSA9IDE4MSxcclxuICAgICAgICBMYXVuY2hBcHBsaWNhdGlvbjEgPSAxODIsXHJcbiAgICAgICAgTGF1bmNoQXBwbGljYXRpb24yID0gMTgzLFxyXG4gICAgICAgIE9lbVNlbWljb2xvbiA9IDE4NixcclxuICAgICAgICBPZW0xID0gMTg2LFxyXG4gICAgICAgIE9lbXBsdXMgPSAxODcsXHJcbiAgICAgICAgT2VtY29tbWEgPSAxODgsXHJcbiAgICAgICAgT2VtTWludXMgPSAxODksXHJcbiAgICAgICAgT2VtUGVyaW9kID0gMTkwLFxyXG4gICAgICAgIE9lbVF1ZXN0aW9uID0gMTkxLFxyXG4gICAgICAgIE9lbTIgPSAxOTEsXHJcbiAgICAgICAgT2VtdGlsZGUgPSAxOTIsXHJcbiAgICAgICAgT2VtMyA9IDE5MixcclxuICAgICAgICBPZW1PcGVuQnJhY2tldHMgPSAyMTksXHJcbiAgICAgICAgT2VtNCA9IDIxOSxcclxuICAgICAgICBPZW1QaXBlID0gMjIwLFxyXG4gICAgICAgIE9lbTUgPSAyMjAsXHJcbiAgICAgICAgT2VtQ2xvc2VCcmFja2V0cyA9IDIyMSxcclxuICAgICAgICBPZW02ID0gMjIxLFxyXG4gICAgICAgIE9lbVF1b3RlcyA9IDIyMixcclxuICAgICAgICBPZW03ID0gMjIyLFxyXG4gICAgICAgIE9lbTggPSAyMjMsXHJcbiAgICAgICAgT2VtQmFja3NsYXNoID0gMjI2LFxyXG4gICAgICAgIE9lbTEwMiA9IDIyNixcclxuICAgICAgICBQcm9jZXNzS2V5ID0gMjI5LFxyXG4gICAgICAgIFBhY2tldCA9IDIzMSxcclxuICAgICAgICBBdHRuID0gMjQ2LFxyXG4gICAgICAgIENyc2VsID0gMjQ3LFxyXG4gICAgICAgIEV4c2VsID0gMjQ4LFxyXG4gICAgICAgIEVyYXNlRW9mID0gMjQ5LFxyXG4gICAgICAgIFBsYXkgPSAyNTAsXHJcbiAgICAgICAgWm9vbSA9IDI1MSxcclxuICAgICAgICBOb05hbWUgPSAyNTIsXHJcbiAgICAgICAgUGExID0gMjUzLFxyXG4gICAgICAgIE9lbUNsZWFyID0gMjU0LFxyXG4gICAgICAgIEtleUNvZGUgPSA2NTUzNSxcclxuICAgICAgICBTaGlmdCA9IDY1NTM2LFxyXG4gICAgICAgIENvbnRyb2wgPSAxMzEwNzIsXHJcbiAgICAgICAgQWx0ID0gMjYyMTQ0O1xyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIExheW91dENvbnRhaW5lclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PExheW91dENvbHVtbj4gQ29sdW1ucyA9IG5ldyBMaXN0PExheW91dENvbHVtbj4oKTtcclxuICAgICAgICBwdWJsaWMgaW50IENvbHVtbldpZHRoO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29udHJvbE1hcmdpbjtcclxuICAgICAgICBwcml2YXRlIGJvb2wgYXBwbGllZExheW91dCA9IGZhbHNlO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQnV0dGluV2lkdGggPSA3MztcclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRDb250cm9sPiBDb250cm9scyA9IG5ldyBMaXN0PExheW91dENvbnRyb2w+KCk7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGF5b3V0Q29udHJvbD4gQ29udHJvbEVkaXRhYmxlID0gbmV3IExpc3Q8TGF5b3V0Q29udHJvbD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkSW5wdXQoc3RyaW5nIGxpbmtGaWVsZCwgVGV4dElucHV0IGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsID0gbmV3IExheW91dENvbnRyb2wobGlua0ZpZWxkLCBpbnB1dCk7XHJcbiAgICAgICAgICAgIENvbnRyb2xzLkFkZChjbCk7XHJcbiAgICAgICAgICAgIGlmKCFpbnB1dC5SZWFkb25seSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29udHJvbEVkaXRhYmxlLkFkZChjbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFRhYkluZGV4ID0gMjtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQXBwbGllZExheW91dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBwbGllZExheW91dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250cm9sIEdldENvbnRyb2woc3RyaW5nIG5hbWUsIGJvb2wgYWxsb3dSZWFkb25seSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZSA9IG5hbWUuVG9Mb3dlcigpO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihhbGxvd1JlYWRvbmx5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29udHJvbHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihDb250cm9sc1tpXS5MaW5rRmllbGROYW1lLlRvTG93ZXIoKSA9PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbnRyb2xFZGl0YWJsZS5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbnRyb2xFZGl0YWJsZVtpXS5MaW5rRmllbGROYW1lLlRvTG93ZXIoKSA9PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xFZGl0YWJsZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBHZXRUZXh0KHN0cmluZyBuYW1lLCBib29sIGFsbG93UmVhZHlPbmx5ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LlRvVGVtcChcImtleTFcIixHZXRDb250cm9sKG5hbWUsIGFsbG93UmVhZHlPbmx5KSkhPW51bGwmJmdsb2JhbDo6QnJpZGdlLlNjcmlwdC5Ub1RlbXAoXCJrZXkyXCIsZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21UZW1wPExheW91dENvbnRyb2w+KFwia2V5MVwiKS5JbnB1dCkhPW51bGw/Z2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkZyb21UZW1wPFRleHRJbnB1dD4oXCJrZXkyXCIpLlRleHQ6KHN0cmluZyludWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBHZXRFZGl0VmFsdWUoc3RyaW5nIG5hbWUsIGJvb2wgYWxsb3dSZWFkeU9ubHkgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuVG9UZW1wKFwia2V5M1wiLEdldENvbnRyb2wobmFtZSwgYWxsb3dSZWFkeU9ubHkpKSE9bnVsbCYmZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LlRvVGVtcChcImtleTRcIixnbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbVRlbXA8TGF5b3V0Q29udHJvbD4oXCJrZXkzXCIpLklucHV0KSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbVRlbXA8VGV4dElucHV0PihcImtleTRcIikuR2V0RWRpdFZhbHVlKCk6KG9iamVjdCludWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0VGV4dChzdHJpbmcgbmFtZSwgc3RyaW5nIHZhbHVlLCBib29sIGFsbG93UmVhZHlPbmx5ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuVG9UZW1wKFwia2V5NVwiLEdldENvbnRyb2wobmFtZSwgYWxsb3dSZWFkeU9ubHkpKSE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbVRlbXA8TGF5b3V0Q29udHJvbD4oXCJrZXk1XCIpLklucHV0OihUZXh0SW5wdXQpbnVsbDtcclxuICAgICAgICAgICAgaWYoaW5wdXQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGlucHV0LlRleHQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZihDb250cm9scyA9PSBudWxsIHx8IENvbnRyb2xzLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpFeHByZXNzQ3JhZnQuTGF5b3V0Q29udHJvbD4oQ29udHJvbHMpLklucHV0O1xyXG4gICAgICAgICAgICB2YXIgeCA9IGlucHV0LkdldElucHV0KCk7XHJcblxyXG4gICAgICAgICAgICBpZih4ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHguRm9jdXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5Db250ZW50LkZvY3VzRWxlbWVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Q29udGFpbmVyKGludCBjb2x1bW5XaWR0aCA9IDUwMCwgaW50IGNvbnRyb2xNYXJnaW4gPSA2LCBwYXJhbXMgTGF5b3V0Q29sdW1uW10gY29sdW1ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbHVtbldpZHRoID0gY29sdW1uV2lkdGg7XHJcbiAgICAgICAgICAgIENvbnRyb2xNYXJnaW4gPSBjb250cm9sTWFyZ2luO1xyXG5cclxuICAgICAgICAgICAgaWYoY29sdW1ucyAhPSBudWxsICYmIGNvbHVtbnMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIENvbHVtbnMuQWRkUmFuZ2UoY29sdW1ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Q29udGFpbmVyKGludCBjb2x1bW5XaWR0aCA9IDUwMCwgaW50IGNvbnRyb2xNYXJnaW4gPSA2LCBpbnQgYnV0dG9uV2lkdGggPSA3MywgcGFyYW1zIExheW91dENvbHVtbltdIGNvbHVtbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2x1bW5XaWR0aCA9IGNvbHVtbldpZHRoO1xyXG4gICAgICAgICAgICBDb250cm9sTWFyZ2luID0gY29udHJvbE1hcmdpbjtcclxuICAgICAgICAgICAgQnV0dGluV2lkdGggPSBidXR0b25XaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGlmKGNvbHVtbnMgIT0gbnVsbCAmJiBjb2x1bW5zLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICBDb2x1bW5zLkFkZFJhbmdlKGNvbHVtbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExheW91dENvbnRhaW5lcihwYXJhbXMgTGF5b3V0Q29sdW1uW10gY29sdW1ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbHVtbldpZHRoID0gNTAwO1xyXG4gICAgICAgICAgICBDb250cm9sTWFyZ2luID0gNjtcclxuXHJcbiAgICAgICAgICAgIGlmKGNvbHVtbnMgIT0gbnVsbCAmJiBjb2x1bW5zLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICBDb2x1bW5zLkFkZFJhbmdlKGNvbHVtbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDcmVhdGVMb2FkU1FMKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyU1FMID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBDb250cm9scy5Db3VudDtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihDb250cm9sc1tpXSA9PSBudWxsIHx8IENvbnRyb2xzW2ldLklucHV0ID09IG51bGwgfHwgc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShDb250cm9sc1tpXS5MaW5rRmllbGROYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXJTUUwuQXBwZW5kKFwiYFwiICsgQ29udHJvbHNbaV0uTGlua0ZpZWxkTmFtZSArIFwiYCwgXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sID0gQ29udHJvbHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dCBpcyBTZWFyY2hJbnB1dClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gY29udHJvbC5JbnB1dC5BczxTZWFyY2hJbnB1dD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRWYWx1ZSA9IChzZWFyY2guRWRpdFZhbHVlICsgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VhcmNoLkRpc3BsYXlNZW1iZXIgPT0gc2VhcmNoLlZhbHVlTWVtYmVyIHx8IHNlYXJjaC5WYWx1ZU1lbWJlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRUcmFuc2FjdGlvbi5BZGRDb21ibyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VhcmNoLlRleHQsIHNlYXJjaC5UZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9uZyBlZGl0diA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvbmcuVHJ5UGFyc2UoZWRpdFZhbHVlLCBvdXQgZWRpdHYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRUcmFuc2FjdGlvbi5BZGRDb21ibyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZWRpdHYsIHNlYXJjaC5UZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgaXMgQ2hlY2tFZGl0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZEJvb2xlYW4oY29udHJvbC5MaW5rRmllbGROYW1lLCAoY29udHJvbC5JbnB1dC5Db250cm9sbGVyLkFzPENoZWNrRWRpdD4oKS5DaGVja2VkKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dC5Jc051bWVyaWNUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGVjID0gY29udHJvbC5JbnB1dC5HZXROdW1iZXJWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50VHJhbnNhY3Rpb24uQWRkTnVtZXIoY29udHJvbC5MaW5rRmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGVjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoY29udHJvbC5JbnB1dC5Jc0RhdGVUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGF0ZSA9IGNvbnRyb2wuSW5wdXQuR2V0RGF0ZVRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZERhdGUoY29udHJvbC5MaW5rRmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZFN0cmluZyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb250cm9sLklucHV0LlRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlclNRTC5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQXBwbHlSZWFkT25seShib29sIGRvY3VtZW50cmVhZG9ubHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbGVuZ3RoID0gQ29udHJvbEVkaXRhYmxlLkNvdW50O1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcGx5UmVhZE9ubHlPbkNvbnRyb2woZG9jdW1lbnRyZWFkb25seSwgQ29udHJvbEVkaXRhYmxlW2ldLklucHV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQXBwbHlSZWFkT25seU9uQ29udHJvbChib29sIGRvY3VtZW50cmVhZG9ubHksIFRleHRJbnB1dCBpbnB1dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGlucHV0LkNvbnRyb2xsZXIgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5wdXQuQ29udHJvbGxlciBpcyBDaGVja0VkaXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuRW5hYmxlZCA9ICFkb2N1bWVudHJlYWRvbmx5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoaW5wdXQgaXMgVGV4dElucHV0RHJvcERvd24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuQXM8VGV4dElucHV0RHJvcERvd24+KCkuR2V0SW5wdXQoKS5SZWFkT25seSA9IGRvY3VtZW50cmVhZG9ubHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5SZWFkb25seSA9IGRvY3VtZW50cmVhZG9ubHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Db250cm9sQ3JlYXRlZChMYXlvdXRDb250cm9sIENvbnRyb2wpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQXBwbHkoQ29udHJvbCBwYXJlbnQsIGJvb2wgZG9jdW1lbnRyZWFkb25seSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFyZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBpZihhcHBsaWVkTGF5b3V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBhcHBsaWVkTGF5b3V0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGludCBsZWZ0TWFyZ2luID0gMTA7XHJcbiAgICAgICAgICAgIGludCB0b3BNYXJnaW4gPSA1O1xyXG5cclxuICAgICAgICAgICAgaW50IGxlZnRMYWJlbCA9IDE1O1xyXG5cclxuICAgICAgICAgICAgaW50IGN1cnJlbnRMZWZ0ID0gbGVmdE1hcmdpbjtcclxuICAgICAgICAgICAgaW50IEFwcGVuZFggPSAwO1xyXG4gICAgICAgICAgICBpbnQgQXBwZW5kWSA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgRWRpdFN0YXJ0WCA9IDEyNTtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0U3RhcnRYID0gMTU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpbnQgWEluY3JlbWVudCA9IGxlZnRNYXJnaW4gKyBDb2x1bW5XaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGludCBpbnB1dEhlaWdodDtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJ1dHRpbldpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgIGlucHV0SGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEhlaWdodCA9IDIwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludCBHcm91cExhYmVsSW5jcmVtZW50ID0gQ29udHJvbE1hcmdpbiArIChIZWxwZXIuTm90RGVza3RvcCA/IChpbnB1dEhlaWdodCAtIDMwKSA6IChpbnB1dEhlaWdodCAtIDQpKTtcclxuICAgICAgICAgICAgaW50IFJvd0luY3JlbWVudCA9IGlucHV0SGVpZ2h0ICsgQ29udHJvbE1hcmdpbjtcclxuXHJcbiAgICAgICAgICAgIGludCBUaW55TGFiZWxJbmNyZW1lbnQgPSBpbnB1dEhlaWdodCAtIDg7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBjb2x1bW4gaW4gQ29sdW1ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF1dG9EaXYgPSBuZXcgQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgeSA9IHRvcE1hcmdpbjtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9EaXYuV2lkdGggPSBcIigxMDAlIC0gMTJweClcIjtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvRGl2LlRvcCA9IEFwcGVuZFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b0Rpdi5Ub3AgPSB5O1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9EaXYuV2lkdGggPSBDb2x1bW5XaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF1dG9EaXYuTGVmdCA9IEFwcGVuZFg7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRvY0ZyYWdtZW50ID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBjb2x1bW4uR3JvdXBzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGdyb3VwIGluIGdyb3VwcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShncm91cC5Hcm91cExhYmVsKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IENvbnRyb2wuTGFiZWwoZ3JvdXAuR3JvdXBMYWJlbCwgY3VycmVudExlZnQsIHksIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gR3JvdXBMYWJlbEluY3JlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBncm91cC5Sb3dzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciByb3cgaW4gcm93cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvdyBpcyBMYXlvdXRSb3dDb250cm9sKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCBoZWlnaHQgPSByb3cuQXM8TGF5b3V0Um93Q29udHJvbD4oKS5IZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSByb3cuQXM8TGF5b3V0Um93Q29udHJvbD4oKS5Db250cm9sO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLkhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLkxlZnQgPSBjdXJyZW50TGVmdCArIGxlZnRMYWJlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuVG9wID0geTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLldpZHRoID0gXCIoMTAwJSAtIFwiICsgKGN1cnJlbnRMZWZ0ICsgKGxlZnRMYWJlbCAqIDIuMGYpKSArIFwicHgpXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuV2lkdGggPSBDb2x1bW5XaWR0aCAtIGN1cnJlbnRMZWZ0IC0gKGxlZnRMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChjb250cm9sKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBDb250cm9sTWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2Uocm93LkxhYmVsKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gQ29udHJvbC5MYWJlbChyb3cuTGFiZWwsIGN1cnJlbnRMZWZ0ICsgbGVmdExhYmVsICsgKGZsb2F0KXJvdy5PZmZzZXQsIHksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLlN0eWxlLkZvbnRTaXplID0gXCIxMnB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBHcm91cExhYmVsSW5jcmVtZW50IC0gNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY0ZyYWdtZW50LkFwcGVuZENoaWxkKGxhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocm93IGlzIExheW91dFJvd0dhcClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSByb3cuQXM8TGF5b3V0Um93R2FwPigpLkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyb3cuQnV0dG9uICE9IG51bGwgJiYgIUhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuQnV0dG9uLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoQ29sdW1uV2lkdGggLSBCdXR0aW5XaWR0aCArIDYsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LkJ1dHRvbi5XaWR0aCA9IEJ1dHRpbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jRnJhZ21lbnQuQXBwZW5kQ2hpbGQocm93LkJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9scyA9IHJvdy5Db250cm9scztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBIYXNUaW55TGFiZWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2xzLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjaW1hbCBUb3RhbFBlcmNlbnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsUGVyY2VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgQWRkV2lkdGggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgY29udHJvbCBpbiBjb250cm9scylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLlBlcmNlbnQgPiAxLjBtIHx8IGNvbnRyb2wuUGVyY2VudCA8PSAwLjBtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLlBlcmNlbnQgPSAxLjBtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb3RhbFBlcmNlbnQgKz0gY29udHJvbC5QZXJjZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihUb3RhbFBlcmNlbnQgPiAxLjBtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dCBpcyBNZW1vSW5wdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gY29udHJvbC5JbnB1dC5IZWlnaHQuVG9JbnQoKSArIENvbnRyb2xNYXJnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICs9IFJvd0luY3JlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocm93Lk5vR2FwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSAtPSBDb250cm9sTWFyZ2luICsgMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhhc1RpbnlMYWJlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBUaW55TGFiZWxJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYXNUaW55TGFiZWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG90YWxQZXJjZW50IC09IDEuMG07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZFdpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQgQWRkID0gKGN1cnJlbnRMZWZ0ICsgQWRkV2lkdGggKyBFZGl0U3RhcnRYICsgQnV0dGluV2lkdGggKyAoZmxvYXQpcm93Lk9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG8xMDBQZXJjZW50ID0gXCIoKDEwMCUgLSBcIiArIEFkZC5Ub1B4KCkgKyBcIikgKiBcIiArIChUb3RhbFBlcmNlbnQgLSBjb250cm9sLlBlcmNlbnQpICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG8xMDBQZXJjZW50MiA9IFwiKDEwMCUgLSBcIiArIEFkZC5Ub1B4KCkgKyBcIilcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB3aWR0aCA9IFwiKFwiICsgbzEwMFBlcmNlbnQyICsgXCIgKiBcIiArIGNvbnRyb2wuUGVyY2VudCArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjIgbG9jID0gbmV3IFZlY3RvcjIoXCIoXCIgKyBvMTAwUGVyY2VudCArIFwiICsgXCIgKyAoQWRkIC0gQnV0dGluV2lkdGgpLlRvUHgoKSArIFwiKVwiLCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcm93Lk5vR2FwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkV2lkdGggKz0gNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5Db250cm9sbGVyLldpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlci5Mb2NhdGlvbiA9IGxvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5Db250ZW50LlRhYkluZGV4ID0gVGFiSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuQ2xhc3NMaXN0LlJlbW92ZShcImNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlciBpcyBDaGVja0VkaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gY29udHJvbC5JbnB1dC5Db250cm9sbGVyLkFzPENoZWNrRWRpdD4oKS5zcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5TdHlsZS5Ub3AgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuTGVmdCA9IChpbnB1dEhlaWdodCAtIDIpLlRvUHgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLlN0eWxlLlBvc2l0aW9uID0gUG9zaXRpb24uQWJzb2x1dGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5TdHlsZS5XaGl0ZVNwYWNlID0gV2hpdGVTcGFjZS5QcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NwYW4uU3R5bGUuVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoM3B4LCA1MCUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5TdHlsZS5XaGl0ZVNwYWNlID0gV2hpdGVTcGFjZS5Ob3JtYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dC5Db250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCkuVHlwZSA9PSBJbnB1dFR5cGUuQ2hlY2tib3gpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5XaWR0aCA9IChpbnB1dEhlaWdodCAtIDQpLlRvUHgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkhlaWdodCA9IChpbnB1dEhlaWdodCAtIDQpLlRvUHgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jRnJhZ21lbnQuQXBwZW5kQ2hpbGQoY29udHJvbC5JbnB1dC5Db250cm9sbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5XaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkxvY2F0aW9uID0gbG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkdldElucHV0KCkuVGFiSW5kZXggPSBUYWJJbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY0ZyYWdtZW50LkFwcGVuZENoaWxkKGNvbnRyb2wuSW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuSGVpZ2h0ID0gaW5wdXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuR2V0SW5wdXQoKSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkdldElucHV0KCkuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT25Db250cm9sQ3JlYXRlZChjb250cm9sKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJvdy5Ob0dhcCAmJiAhcm93LkhpZGVUaW55TGFiZWwgJiYgIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY29udHJvbC5UaW55TGFiZWwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gQ29udHJvbC5MYWJlbChjb250cm9sLlRpbnlMYWJlbCwgMCwgeSArIChpbnB1dEhlaWdodCArIDMpLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLlN0eWxlLkxlZnQgPSBcImNhbGMoXCIgKyBvMTAwUGVyY2VudCArIFwiICsgXCIgKyAoQWRkIC0gQnV0dGluV2lkdGgpLlRvUHgoKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5TdHlsZS5Gb250U2l6ZSA9IFwiMTJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhhc1RpbnlMYWJlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyb3cuVXNlUGxhY2Vob2xkZXIgJiYgIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY29udHJvbC5UaW55TGFiZWwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5TZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBjb250cm9sLlRpbnlMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuVG9vbFRpcCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHJvdy5MYWJlbCkgJiYgc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShncm91cC5Hcm91cExhYmVsKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LlRvb2xUaXAgPSBuZXcgVG9vbFRpcChjb250cm9sLlRpbnlMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5Ub29sVGlwID0gbmV3IFRvb2xUaXAoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShyb3cuTGFiZWwpID8gZ3JvdXAuR3JvdXBMYWJlbCA6IHJvdy5MYWJlbCwgY29udHJvbC5UaW55TGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYWJJbmRleCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY29udHJvbC5JbnB1dC5SZWFkb25seSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFwcGx5UmVhZE9ubHlPbkNvbnRyb2woZG9jdW1lbnRyZWFkb25seSwgY29udHJvbC5JbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2xFZGl0YWJsZS5BZGQoY29udHJvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2xzLkFkZChjb250cm9sKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIYXNUaW55TGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBUaW55TGFiZWxJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdE9yRGVmYXVsdDxnbG9iYWw6OkV4cHJlc3NDcmFmdC5MYXlvdXRDb250cm9sPihyb3cuQ29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGFzdCAhPSBudWxsICYmIGxhc3QuSW5wdXQgaXMgTWVtb0lucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gbGFzdC5JbnB1dC5IZWlnaHQuVG9JbnQoKSArIENvbnRyb2xNYXJnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBSb3dJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhdXRvRGl2LkhlaWdodCA9IHk7XHJcbiAgICAgICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXBwZW5kWCArPSBYSW5jcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEFwcGVuZFkgKz0gKGludCl5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXV0b0Rpdi5Db250ZW50LkFwcGVuZENoaWxkKGRvY0ZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5Db250ZW50LkFwcGVuZENoaWxkKGF1dG9EaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBMYXN0Q29udHJvbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdE9yRGVmYXVsdDxnbG9iYWw6OkV4cHJlc3NDcmFmdC5MYXlvdXRDb250cm9sPihDb250cm9scyk7XHJcbiAgICAgICAgICAgIGlmKExhc3RDb250cm9sICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBGaXJzdENvbnRyb2wgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6RXhwcmVzc0NyYWZ0LkxheW91dENvbnRyb2w+KENvbnRyb2xzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBBY3Rpb248S2V5Ym9hcmRFdmVudD4gUHJldmVudERlZmF1bHRNb3ZlRm9yd2FyZCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkgJiYgIWV2LlNoaWZ0S2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBGaXJzdENvbnRyb2wuSW5wdXQuR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYXN0Q29udHJvbC5JbnB1dC5Db250ZW50LkZvY3VzRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBBY3Rpb248S2V5Ym9hcmRFdmVudD4gUHJldmVudERlZmF1bHRNb3ZlQmFjayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkgJiYgZXYuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IExhc3RDb250cm9sLklucHV0LkdldElucHV0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguRm9jdXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFzdENvbnRyb2wuSW5wdXQuQ29udGVudC5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgTGFzdENvbnRyb2wuSW5wdXQuQ29udGVudC5PbktleURvd24gPSBQcmV2ZW50RGVmYXVsdE1vdmVGb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgRmlyc3RDb250cm9sLklucHV0LkNvbnRlbnQuT25LZXlEb3duID0gUHJldmVudERlZmF1bHRNb3ZlQmFjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTGF5b3V0Q29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGlua0ZpZWxkTmFtZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dCBJbnB1dCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaW55TGFiZWwgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIFBlcmNlbnQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENhbGN1bGF0ZWRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgV2lkdGggeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENhbGN1bGF0ZWRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIExpbmVOdW1iZXIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Q29udHJvbChzdHJpbmcgbGlua0ZpZWxkTmFtZSwgVGV4dElucHV0IGlucHV0LCBzdHJpbmcgdGlueUxhYmVsID0gXCJcIiwgZGVjaW1hbCBwZXJjZW50ID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpbmtGaWVsZE5hbWUgPSBsaW5rRmllbGROYW1lO1xyXG4gICAgICAgICAgICBJbnB1dCA9IGlucHV0O1xyXG4gICAgICAgICAgICBUaW55TGFiZWwgPSB0aW55TGFiZWw7XHJcbiAgICAgICAgICAgIFBlcmNlbnQgPSBwZXJjZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExheW91dENvbnRyb2woc3RyaW5nIGxpbmtGaWVsZE5hbWUsIFRleHRJbnB1dCBpbnB1dCwgZGVjaW1hbCBwZXJjZW50ID0gMSkgOiB0aGlzKGxpbmtGaWVsZE5hbWUsIGlucHV0LCBcIlwiLCBwZXJjZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250cm9sKHN0cmluZyBsaW5rRmllbGROYW1lLCBUZXh0SW5wdXQgaW5wdXQpIDogdGhpcyhsaW5rRmllbGROYW1lLCBpbnB1dCwgXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRDb2x1bW5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRHcm91cD4gR3JvdXBzID0gbmV3IExpc3Q8TGF5b3V0R3JvdXA+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb2x1bW4ocGFyYW1zIExheW91dEdyb3VwW10gZ3JvdXBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoZ3JvdXBzICE9IG51bGwgJiYgZ3JvdXBzLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICBHcm91cHMuQWRkUmFuZ2UoZ3JvdXBzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIExheW91dEdyb3VwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGF5b3V0Um93PiBSb3dzID0gbmV3IExpc3Q8TGF5b3V0Um93PigpO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgR3JvdXBMYWJlbCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRHcm91cChwYXJhbXMgTGF5b3V0Um93W10gcm93cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyb3VwTGFiZWwgPSBzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgICAgIGlmKHJvd3MgIT0gbnVsbCAmJiByb3dzLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICBSb3dzLkFkZFJhbmdlKHJvd3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExheW91dEdyb3VwKHN0cmluZyBncm91cExhYmVsLCBwYXJhbXMgTGF5b3V0Um93W10gcm93cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyb3VwTGFiZWwgPSBncm91cExhYmVsO1xyXG4gICAgICAgICAgICBpZihyb3dzICE9IG51bGwgJiYgcm93cy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgUm93cy5BZGRSYW5nZShyb3dzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIExheW91dFJvd0dhcCA6IExheW91dFJvd1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBIZWlnaHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3dHYXAoZmxvYXQgaGVpZ2h0LCBzdHJpbmcgbGFiZWwgPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBMYWJlbCA9IGxhYmVsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTGF5b3V0Um93Q29udHJvbCA6IExheW91dFJvd1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBIZWlnaHQ7XHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgQ29udHJvbDtcclxuXHJcbiAgICAgICAgcHVibGljIExheW91dFJvd0NvbnRyb2woZmxvYXQgaGVpZ2h0LCBDb250cm9sIGNvbnRyb2wpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIExhYmVsID0gXCJcIjtcclxuICAgICAgICAgICAgQ29udHJvbCA9IGNvbnRyb2w7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRSb3dcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRDb250cm9sPiBDb250cm9scyA9IG5ldyBMaXN0PExheW91dENvbnRyb2w+KCk7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBCdXR0b24geyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIElmIHRoaXMgaXMgdHJ1ZSAtIHRpbnkgbGFiZWxzIGFyZSBpZ25vcmVkXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOb0dhcCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFVzZVBsYWNlaG9sZGVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBIaWRlVGlueUxhYmVsIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZGVjaW1hbCBPZmZzZXQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Um93KHN0cmluZyBsYWJlbCwgcGFyYW1zIExheW91dENvbnRyb2xbXSBjb250cm9scylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgICAgIGlmKGNvbnRyb2xzICE9IG51bGwgJiYgY29udHJvbHMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIENvbnRyb2xzLkFkZFJhbmdlKGNvbnRyb2xzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3cocGFyYW1zIExheW91dENvbnRyb2xbXSBjb250cm9scykgOiB0aGlzKFwiXCIsIGNvbnRyb2xzKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3coZGVjaW1hbCBvZmZzZXQsIHBhcmFtcyBMYXlvdXRDb250cm9sW10gY29udHJvbHMpIDogdGhpcyhcIlwiLCBjb250cm9scylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3coc3RyaW5nIGxhYmVsLCBTaW1wbGVCdXR0b24gYnV0dG9uLCBwYXJhbXMgTGF5b3V0Q29udHJvbFtdIGNvbnRyb2xzKSA6IHRoaXMobGFiZWwsIGNvbnRyb2xzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnV0dG9uID0gYnV0dG9uO1xyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIGJvb2wgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX05vR2FwPWZhbHNlO3ByaXZhdGUgYm9vbCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fVXNlUGxhY2Vob2xkZXI9ZmFsc2U7cHJpdmF0ZSBib29sIF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19IaWRlVGlueUxhYmVsPWZhbHNlO3ByaXZhdGUgZGVjaW1hbCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fT2Zmc2V0PTA7fVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxudXNpbmcgU3lzdGVtO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE5ldHdvcmtcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBBamF4T3B0aW9ucyBHZXRBamF4T3B0aW9ucyhvYmplY3QgSnNvbkZpbGUsIGJvb2wgQXN5bmMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBamF4T3B0aW9ucygpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFzeW5jID0gQXN5bmMsXHJcbiAgICAgICAgICAgICAgICBVcmwgPSBTZXR0aW5ncy5OZXR3b3JrVVJMLFxyXG4gICAgICAgICAgICAgICAgQ2FjaGUgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIERhdGEgPSBKc29uRmlsZSA9PSBudWxsID8gc3RyaW5nLkVtcHR5IDogSlNPTi5TdHJpbmdpZnkoSnNvbkZpbGUpLFxyXG4gICAgICAgICAgICAgICAgRGF0YVR5cGUgPSBcImpzb25cIixcclxuICAgICAgICAgICAgICAgIENvbnRlbnRUeXBlID0gXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICBUeXBlID0gXCJQT1NUXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBNZXRob2RSZXF1ZXN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgc3RyaW5nIE1ldGhvZDtcclxuICAgICAgICAgICAgcHVibGljIG9iamVjdFtdIEFyZ3VtZW50cztcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBJbnRlcmZhY2U7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgTWV0aG9kUmVxdWVzdChzdHJpbmcgaW50ZXJmYWNlTmFtZSwgc3RyaW5nIG1ldGhvZCwgcGFyYW1zIG9iamVjdFtdIGFyZ3VtZW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWV0aG9kID0gbWV0aG9kO1xyXG4gICAgICAgICAgICAgICAgQXJndW1lbnRzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgSW50ZXJmYWNlID0gaW50ZXJmYWNlTmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEludm9rZU1ldGhvZFVJKHN0cmluZyBpbnRlcmZhY2VOYW1lLCBzdHJpbmcgbWV0aG9kLCBBY3Rpb248b2JqZWN0LCBzdHJpbmcsIGpxWEhSPiBTdWNjZXNzID0gbnVsbCwgQWN0aW9uPGpxWEhSLCBzdHJpbmcsIHN0cmluZz4gRXJyb3IgPSBudWxsLCBwYXJhbXMgb2JqZWN0W10gYXJndW1lbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUG9zdEpzb25Qcm9ncmVzc0Zvcm0obmV3IE1ldGhvZFJlcXVlc3QoaW50ZXJmYWNlTmFtZSwgbWV0aG9kLCBhcmd1bWVudHMpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBnbG9iYWw6OkJyaWRnZS5qUXVlcnkyLmpxWEhSPilTdWNjZXNzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFIsIHN0cmluZywgc3RyaW5nPilFcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW52b2tlTWV0aG9kVUlDb250cm9sKHN0cmluZyBpbnRlcmZhY2VOYW1lLCBzdHJpbmcgbWV0aG9kLCBQcm9ncmVzc0NvbnRyb2wgcHJvZ3Jlc3NDb250cm9sLCBBY3Rpb248b2JqZWN0LCBzdHJpbmcsIGpxWEhSPiBTdWNjZXNzID0gbnVsbCwgQWN0aW9uPGpxWEhSLCBzdHJpbmcsIHN0cmluZz4gRXJyb3IgPSBudWxsLCBwYXJhbXMgb2JqZWN0W10gYXJndW1lbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUG9zdEpzb25Qcm9ncmVzc0NvbnRyb2wobmV3IE1ldGhvZFJlcXVlc3QoaW50ZXJmYWNlTmFtZSwgbWV0aG9kLCBhcmd1bWVudHMpLCBwcm9ncmVzc0NvbnRyb2wsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBzdHJpbmcsIGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFI+KVN1Y2Nlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qcVhIUiwgc3RyaW5nLCBzdHJpbmc+KUVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBJbnZva2VNZXRob2Qoc3RyaW5nIGludGVyZmFjZU5hbWUsIHN0cmluZyBtZXRob2QsIEFjdGlvbjxvYmplY3QsIHN0cmluZywganFYSFI+IFN1Y2Nlc3MgPSBudWxsLCBBY3Rpb248anFYSFIsIHN0cmluZywgc3RyaW5nPiBFcnJvciA9IG51bGwsIHBhcmFtcyBvYmplY3RbXSBhcmd1bWVudHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQb3N0SnNvbihuZXcgTWV0aG9kUmVxdWVzdChpbnRlcmZhY2VOYW1lLCBtZXRob2QsIGFyZ3VtZW50cyksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBzdHJpbmcsIGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFI+KVN1Y2Nlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qcVhIUiwgc3RyaW5nLCBzdHJpbmc+KUVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBQb3N0SnNvbihvYmplY3QgSnNvbkZpbGUsIEFjdGlvbjxvYmplY3QsIHN0cmluZywganFYSFI+IFN1Y2Nlc3MgPSBudWxsLCBBY3Rpb248anFYSFIsIHN0cmluZywgc3RyaW5nPiBFcnJvciA9IG51bGwsIGJvb2wgQXN5bmMgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gbGV0cyBjb252ZXJ0IHRoZSBKc29uRmlsZU9iamVjdCB0byBhIHN0cmluZztcclxuICAgICAgICAgICAgdmFyIGFqbyA9IEdldEFqYXhPcHRpb25zKEpzb25GaWxlLCBBc3luYyk7XHJcbiAgICAgICAgICAgIGFqby5TdWNjZXNzID0gU3VjY2VzcztcclxuICAgICAgICAgICAgYWpvLkVycm9yID0gRXJyb3I7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuQWpheChham8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFBvc3RKc29uUHJvZ3Jlc3NDb250cm9sKG9iamVjdCBKc29uRmlsZSwgUHJvZ3Jlc3NDb250cm9sIHByb2dyZXNzQ29udHJvbCwgQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBqcVhIUj4gU3VjY2VzcyA9IG51bGwsIEFjdGlvbjxqcVhIUiwgc3RyaW5nLCBzdHJpbmc+IEVycm9yID0gbnVsbCwgYm9vbCBBc3luYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBsZXRzIGNvbnZlcnQgdGhlIEpzb25GaWxlT2JqZWN0IHRvIGEgc3RyaW5nO1xyXG4gICAgICAgICAgICB2YXIgYWpvID0gR2V0QWpheE9wdGlvbnMoSnNvbkZpbGUsIEFzeW5jKTtcclxuICAgICAgICAgICAgYWpvLlhociA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4bWxSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICB4bWxSZXF1ZXN0LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlByb2dyZXNzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGUpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlID0gZSBhcyBQcm9ncmVzc0V2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHByb2dyZXNzQ29udHJvbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gcHJvZ3Jlc3NDb250cm9sO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBQZXJjZW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGUuTG9hZGVkICE9IDAgJiYgcGUuVG90YWwgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBlcmNlbnQgPSAoKGZsb2F0KXBlLkxvYWRlZCAvIChmbG9hdClwZS5Ub3RhbCkgKiAxMDAuMGY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBjLmludGVybmFsUHJvZ3Jlc3NDb250cm9sLlN0eWxlLldpZHRoID0gUGVyY2VudC5Ub1N0cmluZygpICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHhtbFJlcXVlc3Q7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFqby5TdWNjZXNzID0gU3VjY2VzcztcclxuICAgICAgICAgICAgYWpvLkVycm9yID0gRXJyb3I7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuQWpheChham8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFBvc3RKc29uUHJvZ3Jlc3NGb3JtKG9iamVjdCBKc29uRmlsZSwgQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBqcVhIUj4gU3VjY2VzcyA9IG51bGwsIEFjdGlvbjxqcVhIUiwgc3RyaW5nLCBzdHJpbmc+IEVycm9yID0gbnVsbCwgYm9vbCBBc3luYyA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBsZXRzIGNvbnZlcnQgdGhlIEpzb25GaWxlT2JqZWN0IHRvIGEgc3RyaW5nO1xyXG4gICAgICAgICAgICB2YXIgbnBmID0gbmV3IE5ldHdvcmtQcm9ncmVzc0Zvcm0oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBham8gPSBHZXRBamF4T3B0aW9ucyhKc29uRmlsZSwgQXN5bmMpO1xyXG4gICAgICAgICAgICBham8uWGhyID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHhtbFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgIHhtbFJlcXVlc3QuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUHJvZ3Jlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZSkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGUgPSBlIGFzIFByb2dyZXNzRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobnBmID09IG51bGwgfHwgbnBmLnByb2dyZXNzQ29udHJvbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gbnBmLnByb2dyZXNzQ29udHJvbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgUGVyY2VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBlLkxvYWRlZCAhPSAwICYmIHBlLlRvdGFsICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQZXJjZW50ID0gKChmbG9hdClwZS5Mb2FkZWQgLyAoZmxvYXQpcGUuVG90YWwpICogMTAwLjBmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYy5pbnRlcm5hbFByb2dyZXNzQ29udHJvbC5TdHlsZS5XaWR0aCA9IFBlcmNlbnQuVG9TdHJpbmcoKSArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB4bWxSZXF1ZXN0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBham8uU3VjY2VzcyA9IChvLCBzLCBqcSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbnBmLkRpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdEVudW0uT0s7XHJcbiAgICAgICAgICAgICAgICBTdWNjZXNzKG8sIHMsIGpxKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYWpvLkVycm9yID0gKGpxLCBzMSwgczIpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5wZi5EaWFsb2dSZXN1bHQgPSBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbDtcclxuICAgICAgICAgICAgICAgIEVycm9yKGpxLCBzMSwgczIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBham8uQ29tcGxldGUgPSAoanEsIHN0cikgPT4geyBucGYuQ2xvc2UoKTsgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhanIgPSBqUXVlcnkuQWpheChham8pO1xyXG5cclxuICAgICAgICAgICAgbnBmLlNob3dEaWFsb2cobmV3IERpYWxvZ1Jlc3VsdChEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCwgKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWpyLkFib3J0KCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBOZXR3b3JrUHJvZ3Jlc3NGb3JtIDogRm9ybVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIFByb2dyZXNzQ29udHJvbCBwcm9ncmVzc0NvbnRyb2w7XHJcbiAgICAgICAgICAgIHB1YmxpYyBTaW1wbGVEaWFsb2dCdXR0b24gYnV0dG9uQ2FuY2VsO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIE5ldHdvcmtQcm9ncmVzc0Zvcm0oc3RyaW5nIF90ZXh0ID0gXCJMb2FkaW5nLi4uXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuVGV4dCA9IF90ZXh0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5XaWR0aCA9IDQwMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuSGVpZ2h0ID0gMjAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29udHJvbCA9IG5ldyBQcm9ncmVzc0NvbnRyb2woKTtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29udHJvbC5TZXRCb3VuZHMoNTAsIDUwLCBcIigxMDAlIC0gMTAwcHgpXCIsIFwiMjNweFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwgPSBuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsKSB7IFRleHQgPSBcIkNhbmNlbFwiIH07XHJcbiAgICAgICAgICAgICAgICBidXR0b25DYW5jZWwuU2V0TG9jYXRpb24oXCIoMTAwJSAtIDc4cHgpXCIsIFwiKDEwMCUgLSAyNnB4KVwiKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkNhbmNlbC5Db250ZW50LlRhYkluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBCb2R5LkFwcGVuZENoaWxkcmVuKGJ1dHRvbkNhbmNlbCwgcHJvZ3Jlc3NDb250cm9sKTtcclxuXHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFJlc291cmNlTWFuYWdlclxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+IGNhY2hlUmVzb3VyY2VTdHJpbmcgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0UmVzb3VyY2VTdHJpbmcoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjYWNoZVJlc291cmNlU3RyaW5nLkNvbnRhaW5zS2V5KG5hbWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlUmVzb3VyY2VTdHJpbmdbbmFtZV07XHJcbiAgICAgICAgICAgIHJldHVybiAoY2FjaGVSZXNvdXJjZVN0cmluZ1tuYW1lXSA9IFNldHRpbmdzLkdldFN0eWxlUnVsZVZhbHVlKFNldHRpbmdzLnJlc291cmNlTWFuYW5nZXJTaGVldHMsIFwiY29udGVudFwiLCBcIi5cIiArIG5hbWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBTZXR0aW5nc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIE5ldHdvcmtVUkwgPSBcIkhvc3QuYXNoeFwiO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFJlc291cmNlVVJMID0gXCIuL2ltYWdlcy9cIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQXV0b1JlbmRlciA9IHRydWU7XHJcbiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBGb250ID0gXCI4LjI1cHQgVGFob21hXCI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsIFRheFBlcmNlbnQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBEZWZhdWx0Rm9udCA9IEZvbnQ7XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gT25seSBmb3IgZmlyZWZveCAtIGFzIG5vIGVycm9yIHdpdGggbnVtYmVyIGlucHV0XHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgT25Gb2N1c1NlbGVjdEFsbCA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgU3R5bGVTaGVldCBEZWZhdWx0U3R5bGVTaGVldDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIFN0eWxlU2hlZXQgUGx1Z2luU3R5bGVTaGVldDtcclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgTGlzdDxTdHlsZVNoZWV0PiByZXNvdXJjZU1hbmFuZ2VyU2hlZXRzID0gbmV3IExpc3Q8U3R5bGVTaGVldD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEdyaWRWaWV3QXV0b0NvbHVtbkdlbmVyYXRlRm9ybWF0QXNEYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEdyaWRWaWV3QXV0b0NvbHVtbkZvcm1hdERhdGVzID0gdHJ1ZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgR3JpZFZpZXdCbHVyT25TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHcmlkVmlld1Jvd1Njcm9sbFBhZGRpbmcgPSAwO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgR3JpZFZpZXdTY3JvbGxEZWxheWVkID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR3JpZFZpZXdTY3JvbGxEZWxheU1TID0gMjU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IENvbnRleHRNZW51U3RhcnRpbmdaSW5kZXggPSA1MDA7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgQ29udGV4dE1lbnVNaW5XaWR0aCA9IDIwMDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTWVzc2FnZUZvcm1UZXh0TWF4aW11bUhlaWdodEluUHggPSA1MDA7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTWVzc2FnZUZvcm1UZXh0TWluaW11bUhlaWdodEluUHggPSAzMjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNZXNzYWdlRm9ybU1pbmltdW1XaWR0aEluUHggPSAxOTU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIERheVBvc2l0aW9uID0gRGF0ZVBvc2l0aW9uLkZpcnN0O1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIE1vbnRoUG9zaXRpb24gPSBEYXRlUG9zaXRpb24uU2Vjb25kO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIFllYXJQb3NpdGlvbiA9IERhdGVQb3NpdGlvbi5UaGlyZDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIERpc2FibGVUZXh0UG9wdXBFZGl0b3IgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjaGFyIERhdGVTZXBlcmF0b3IgPSAnLyc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIERhdGVQb3NpdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRmlyc3QsXHJcbiAgICAgICAgICAgIFNlY29uZCxcclxuICAgICAgICAgICAgVGhpcmRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMiBDb25zb2xlRGVmYXVsdFNpemUgPSBuZXcgVmVjdG9yMig1NDAsIDI0MCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNZXNzYWdlRm9ybUJlZXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTWF4aW11bVBpeGVsU2Nyb2xsaW5nUm93cyA9IDUwMDAwMDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBY3Rpb248c3RyaW5nPiBPblNlbmRFcnJvciA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nocm9tZSA9IEJyb3dzZXIuSXNDaHJvbWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBBbGxvd0Nsb3NlV2l0aG91dFF1ZXN0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQWN0aW9uIE9uQXBwbGljYXRpb25DbG9zZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTaG93RXhjZXB0aW9uRGlhbG9nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgRm9ybUZhZGVEdXJhdGlvbiA9IDEwMDtcclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBJbmNyZWFzZSBSZW5kZXIgU3BlZWRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBSZW1vdmVBdHRyaWJ1dGVzT2ZmRWxlbWVudHNXaGVuTG9zZUZvY3VzO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWN0aXZlVGhlbWUgPSBUaGVtZS5UaGVtZTE7XHJcbiAgICAgICAgICAgIFNldHVwU3R5bGVEZWZhdWx0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldHVwU3R5bGVEZWZhdWx0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3R5bGVTaGVldExpc3Qgc2hlZXRzID0gRG9jdW1lbnQuU3R5bGVTaGVldHM7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgc2hlZXRzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvd25lck5vZGUgPSBzaGVldHNbaV0uT3duZXJOb2RlIGFzIEhUTUxMaW5rRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZihvd25lck5vZGUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYob3duZXJOb2RlLklkLlRvTG93ZXIoKSA9PSBcImV4cHJlc3NjcmFmdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdFN0eWxlU2hlZXQgPSBzaGVldHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG93bmVyTm9kZS5JZC5Ub0xvd2VyKCkgPT0gXCJleHByZXNzY3JhZnRwbHVnaW5cIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBsdWdpblN0eWxlU2hlZXQgPSBzaGVldHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG93bmVyTm9kZS5JZC5Ub0xvd2VyKCkgPT0gXCJyZXNvdXJjZW1hbmFnZXJcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlTWFuYW5nZXJTaGVldHMuQWRkKHNoZWV0c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoRGVmYXVsdFN0eWxlU2hlZXQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgZGYgPSBHZXRFeHByZXNzU3R5bGVSdWxlVmFsdWUoXCJmb250XCIsIFwiLmNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgICAgICBpZihkZiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIERlZmF1bHRGb250ID0gZGY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZHluYW1pYyBHZXRTdHlsZVJ1bGVWYWx1ZShMaXN0PFN0eWxlU2hlZXQ+IGNzc0ZpbGUsIHN0cmluZyBzdHlsZSwgc3RyaW5nIGNsYXNzTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihjc3NGaWxlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgaXRlbSBpbiBjc3NGaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pYyB2YWx1ZSA9IEdldFN0eWxlUnVsZVZhbHVlKGl0ZW0sIHN0eWxlLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGR5bmFtaWMgR2V0U3R5bGVSdWxlVmFsdWUoU3R5bGVTaGVldCBjc3NGaWxlLCBzdHJpbmcgc3R5bGUsIHN0cmluZyBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoY3NzRmlsZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWMgcFN0eWxlcyA9IGNzc0ZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocFN0eWxlcy5jc3NSdWxlcylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBwU3R5bGVzLmNzc1J1bGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljIHJ1bGUgPSBwU3R5bGVzLmNzc1J1bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocnVsZS5zZWxlY3RvclRleHQgJiYgcnVsZS5zZWxlY3RvclRleHQuc3BsaXQoJywnKS5pbmRleE9mKGNsYXNzTmFtZSkgIT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGUuc3R5bGVbc3R5bGVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkeW5hbWljIEdldEV4cHJlc3NTdHlsZVJ1bGVWYWx1ZShzdHJpbmcgc3R5bGUsIHN0cmluZyBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkeW5hbWljIHZhbHVlID0gR2V0U3R5bGVSdWxlVmFsdWUoUGx1Z2luU3R5bGVTaGVldCwgc3R5bGUsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gR2V0U3R5bGVSdWxlVmFsdWUoRGVmYXVsdFN0eWxlU2hlZXQsIHN0eWxlLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEhUTUxTdHlsZUVsZW1lbnQgdGhlbWVFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFwcGx5QWN0aXZlVGhlbWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhlbWVFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoZW1lRWxlbWVudC5QYXJlbnRFbGVtZW50LlJlbW92ZUNoaWxkKHRoZW1lRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoX2FjdGl2ZVRoZW1lID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBfYWN0aXZlVGhlbWUgPSBUaGVtZS5UaGVtZTE7XHJcbiAgICAgICAgICAgIHZhciBvYmpMaXN0ID0gbmV3IExpc3Q8b2JqZWN0PigpO1xyXG4gICAgICAgICAgICBvYmpMaXN0LkFkZFJhbmdlKF9hY3RpdmVUaGVtZS5Db2xvcnMpO1xyXG4gICAgICAgICAgICBvYmpMaXN0LkFkZFJhbmdlKG5ldyBvYmplY3RbXSB7IFwiY29udHJvbFwiLCBcImJhY2tncm91bmQtY29sb3JcIiwgXCJib3JkZXJcIiwgXCJyaWJib25cIiwgXCItbGVmdC1jb2xvclwiLCBcIi10b3AtY29sb3JcIiwgXCItcmlnaHQtY29sb3JcIiwgXCItYm90dG9tLWNvbG9yXCIsIFwiYnV0dG9uXCIsIFwiZm9ybS1oZWFkaW5nXCIsIFwicGFnZWhlYWRlclwiLCBcImhlYWRpbmdcIiB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoZW1lRWxlbWVudCA9IG5ldyBIVE1MU3R5bGVFbGVtZW50KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5uZXJIVE1MID0gc3RyaW5nLkZvcm1hdCh0aGVtZVRlbXBsYXRlLlJlcGxhY2UoXCIjZm9jdXNMaW5lO1wiLCBfaW5jbHVkZUZvY3VzUmVnaW9uID8gdGhlbWVmb2N1c1ZhbHVlIDogc3RyaW5nLkVtcHR5KSxcclxuICAgICAgICAgICAgICAgIG9iakxpc3QuVG9BcnJheSgpKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgRG9jdW1lbnQuQm9keS5BcHBlbmRDaGlsZCh0aGVtZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCBfaW5jbHVkZUZvY3VzUmVnaW9uID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEluY2x1ZGVGb2N1c1JlZ2lvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfaW5jbHVkZUZvY3VzUmVnaW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfaW5jbHVkZUZvY3VzUmVnaW9uICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbmNsdWRlRm9jdXNSZWdpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBBcHBseUFjdGl2ZVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFRoZW1lIF9hY3RpdmVUaGVtZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGhlbWUgQWN0aXZlVGhlbWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfYWN0aXZlVGhlbWU7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9hY3RpdmVUaGVtZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlVGhlbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBBcHBseUFjdGl2ZVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vVGhlbWVGb3JtXHJcblxyXG4gICAgICAgICNyZWdpb24gVGhlbWVUZW1wbGF0ZUNvZGVcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc3RyaW5nIHRoZW1lZm9jdXNWYWx1ZSA9IEBcIi57MjV9OmZvY3VzOm5vdCguZ3JpZCl7e1xyXG5ib3JkZXI6IHNvbGlkIDFweCB7MH07XHJcbn19XCI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0cmluZyB0aGVtZVRlbXBsYXRlID0gQFwiLnsyNX17e1xyXG4gICAgY29sb3I6ezIyfTtcclxufX1cclxuI2ZvY3VzTGluZTtcclxuLnsyNX06OnNlbGVjdGlvbnt7XHJcbnsyNn06ezF9O1xyXG59fVxyXG4uezI1fTo6LW1vei1zZWxlY3Rpb257e1xyXG57MjZ9OnsxfTtcclxufX1cclxuLnsyNX06ZGlzYWJsZWR7e1xyXG57MjZ9OnsyfTtcclxufX1cclxuLmlucHV0ezI1fTpyZWFkLW9ubHl7e1xyXG57MjZ9OnszfTtcclxufX1cclxuLnsyOH17MjV9e3tcclxuezI2fTp7MH07XHJcbnsyN317Mjl9OnswfTtcclxuezI3fXszMX06ezB9O1xyXG57Mjd9ezMyfTp7MX07XHJcbn19XHJcbi57Mjh9cGFnZXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4uezI4fWdyb3Vwe3tcclxuezI2fTp7M307XHJcbn19XHJcbi57Mjh9ezMzfXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4uezI4fXszM306aG92ZXI6bm90KDphY3RpdmUpOm5vdCguZGlzYWJsZWQpXHJcbnt7XHJcbnsyNn06ezR9O1xyXG59fVxyXG4uezI4fXszM306YWN0aXZlOm5vdCguZGlzYWJsZWQpe3tcclxuezI2fTp7NX07XHJcbn19XHJcbi57Mjh9ezMzfXNtYWxse3tcclxuezI2fTp7M307XHJcbn19XHJcbi57Mjh9ezMzfXNtYWxsOmhvdmVyOm5vdCg6YWN0aXZlKTpub3QoLmRpc2FibGVkKVxyXG57e1xyXG57MjZ9Ons0fTtcclxufX1cclxuLnsyOH17MzN9c21hbGw6YWN0aXZlOm5vdCguZGlzYWJsZWQpe3tcclxuezI2fTp7NX07XHJcbn19XHJcbi57Mjh9c2VwZXJhdG9ye3tcclxuezI2fTp7MX07XHJcbn19XHJcbi57Mjh9ezM1fS1oaWRkZW57e1xyXG57MjZ9OnswfTtcclxuY29sb3I6ezIzfTtcclxufX1cclxuLnsyOH17MzV9LWhpZGRlbjpob3Zlcnt7XHJcbnsyNn06ezZ9O1xyXG59fVxyXG4uezI4fXszNX0tYWN0aXZle3tcclxuezI2fTp7M307XHJcbn19XHJcbi50YWJ7MjV9e3tcclxuezI2fTp7M307XHJcbn19XHJcbi50YWJ7MjV9cGFnZXt7XHJcbnsyNn06ezN9O1xyXG57Mjd9ezI5fTp7MX07XHJcbnsyN317MzF9OnsxfTtcclxuezI3fXszMn06ezF9O1xyXG59fVxyXG4udGFiezI1fXszNX0ge3tcclxuezI2fTp7M307XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1oaWRkZW57e1xyXG57Mjd9ezMwfTp7M307XHJcbnsyN317Mjl9OnszfTtcclxuezI3fXszMX06ezN9O1xyXG57Mjd9ezMyfTp0cmFuc3BhcmVudDtcclxufX1cclxuLnRhYnsyNX17MzV9LWhpZGRlbjpob3Zlcnt7XHJcbnsyNn06ezd9O1xyXG57Mjd9ezI5fTp7N307XHJcbnsyN317MzF9Ons3fTtcclxufX1cclxuLnRhYnsyNX17MzV9LWFjdGl2ZXt7XHJcbnsyN317MzB9OnswfTtcclxuezI3fXsyOX06ezF9O1xyXG57Mjd9ezMxfTp7MX07XHJcbnsyN317MzJ9OnszfTtcclxuYm9yZGVyLXRvcC13aWR0aDoycHg7XHJcbmxpbmUtaGVpZ2h0OjE4cHg7XHJcbnRvcDoycHg7XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1jbG9zZXszM317e1xyXG5jb2xvcjp7MX07XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1jbG9zZXszM306aG92ZXJ7e1xyXG5jb2xvcjp7MjR9O1xyXG5cdHsyNn06ezJ9O1xyXG5cdHsyN306MXB4IHNvbGlkIHsxOX07XHJcbn19XHJcbi5pbnB1dHsyNX0ge3tcclxuezI3fToxcHggc29saWQgezF9O1xyXG57MjZ9OnsxNH07XHJcbn19XHJcbi5zaW1wbGV7MzN9e3tcclxuezI3fToxcHggc29saWQgezE5fTtcclxuezI2fTp7M307XHJcbn19XHJcbi5zaW1wbGV7MzN9OmhvdmVyOm5vdCguZGlzYWJsZWQpXHJcbnt7XHJcblx0ezI2fTp7MX07XHJcbn19XHJcbi5zaW1wbGV7MzN9OmFjdGl2ZTpub3QoLmRpc2FibGVkKVxyXG57e1xyXG5cdHsyNn06ezEyfTtcclxuezI3fTogMXB4IHNvbGlkIHsyMH07XHJcbn19XHJcbkBrZXlmcmFtZXMgQ29sb3JGbGFzaCB7e1xyXG5mcm9tIHt7IHsyNn06IHsyM307fX1cclxudG8ge3sgezI2fTogezB9O319XHJcbn19XHJcbi5mb3JtLWJhc2V7e1xyXG57Mjd9LWNvbG9yOnswfTtcclxufX1cclxuLnszNH17e1xyXG57MjZ9OnswfTtcclxufX1cclxuLnszNH0tdGl0bGV7e1xyXG5jb2xvcjp7MjN9O1xyXG59fVxyXG4uezM0fS17MzN9e3tcclxuY29sb3I6ezIzfTtcclxufX1cclxuLnszNH0tezMzfTpob3Zlcjpub3QoLnszNH0tezMzfS1jbG9zZSl7e1xyXG57MjZ9Ons4fTtcclxufX1cclxuLnszNH0tezMzfTphY3RpdmU6bm90KC57MzR9LXszM30tY2xvc2Upe3tcclxuezI2fTp7OX07XHJcbn19XHJcbi57MzR9LXszM30tY2xvc2U6aG92ZXJ7e1xyXG57MjZ9OnsxMH07XHJcbn19XHJcbi57MzR9LXszM30tY2xvc2U6YWN0aXZle3tcclxuezI2fTp7MTF9O1xyXG59fVxyXG4uY2VsbHt7XHJcbnsyN306IDFweCBzb2xpZCB7M307XHJcbn19XHJcbi5jZWxscm93e3tcclxuezI2fTp7MTR9O1xyXG59fVxyXG4uY2VsbHJvdzpob3Zlcnt7XHJcbnsyNn06ezN9ICFpbXBvcnRhbnQ7XHJcbn19XHJcbi5jZWxscm93OmFjdGl2ZXt7XHJcbnsyNn06ezEyfSAhaW1wb3J0YW50O1xyXG59fVxyXG4uZXZlbnt7XHJcbiAgIHsyNn06ezEzfSAhaW1wb3J0YW50O1xyXG59fVxyXG4uY2VsbHJvdy1zZWxlY3RlZHt7XHJcbnsyNn06ezE3fSAhaW1wb3J0YW50O1xyXG59fVxyXG4uY2VsbHJvdy1zZWxlY3RlZDpob3Zlcnt7XHJcbnsyNn06ezE4fSAhaW1wb3J0YW50O1xyXG59fVxyXG4uezM2fXt7XHJcbnsyNn06ezN9O1xyXG57Mjd9LXJpZ2h0OjFweCBzb2xpZCB7MTl9ICFpbXBvcnRhbnQ7XHJcbn19XHJcbi57MzZ9OmhvdmVye3tcclxuezI2fTp7MX07XHJcbn19XHJcbi57MzZ9OmFjdGl2ZXt7XHJcbnsyNn06ezEyfTtcclxufX1cclxuLnszNn0tY29udGFpbmVye3tcclxuezI2fTp7M307XHJcbnsyN30tYm90dG9tOjFweCBzb2xpZCB7MTl9ICFpbXBvcnRhbnQ7XHJcbn19XHJcbi5ncmlke3tcclxuezI2fTp7MTR9O1xyXG57Mjd9OjFweCBzb2xpZCB7MTl9O1xyXG59fVxyXG4ucHJvZ3Jlc3NiYXJ7e1xyXG57Mjd9OjFweCBzb2xpZCB7MTl9O1xyXG57MjZ9OnsxNH07XHJcbn19XHJcbi5wcm9ncmVzc2JhcmJvZHl7e1xyXG57MjZ9OnswfTtcclxufX1cclxuLmNvbnRleHRtZW51e3tcclxuezI2fTp7MTR9O1xyXG57Mjd9OiBzb2xpZCAxcHggezIxfTtcclxufX1cclxuLmNvbnRleHRpdGVtOmhvdmVye3tcclxuezI2fTp7MTV9O1xyXG59fVxyXG4uY29udGV4dGl0ZW1zZXBlcmF0b3J7e1xyXG57MjZ9OnsxNn07XHJcbn19XHJcbi5kaWFsb2d7MzN9c2VjdGlvbnt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4uc3BsaXR7MjV9XHJcbnt7XHJcbnsyN306MXB4IHNvbGlkIHsxOX07XHJcbn19XHJcbi5zcGxpdHRlcnZlcnRpY2FsIHt7XHJcbnsyN30tbGVmdDogMXB4IHs0fSBzb2xpZDtcclxuezI3fS1yaWdodDogMXB4IHs0fSBzb2xpZDtcclxufX1cclxuLnNwbGl0dGVyaG9yaXpvbnRhbCB7e1xyXG57Mjd9LXRvcDogMXB4IHs0fSBzb2xpZDtcclxuezI3fS1ib3R0b206IDFweCB7NH0gc29saWQ7XHJcbn19XHJcbi5zcGxpdHRlcmhvcml6b250YWw6aG92ZXIge3tcclxuezI2fTp7NH07XHJcbn19XHJcbi5zcGxpdHRlcnZlcnRpY2FsOmhvdmVyIHt7XHJcbnsyNn06ezR9O1xyXG59fVxyXG4udG9vbC10aXB7e1xyXG57MjZ9OnsxNH07XHJcbnsyN306IHNvbGlkIDFweCB7MjF9O1xyXG59fVxyXG4uezM0fS1taW46aG92ZXJ7e1xyXG5cdHsyNn06ezh9O1xyXG59fVxyXG4uc2ltcGxlYnV0dG9uLWFjdGl2ZVxyXG57e1xyXG5cdHsyNn06ezEyfTtcclxuezI3fTogMXB4IHNvbGlkIHsyMH07XHJcbn19XHJcbi5wcmltYXJ5e3tcclxuICAgIHsyNn06ezB9O1xyXG59fVxyXG4udGFiaGVhZGVyLWNvbnRhaW5lcnt7XHJcbiAgICBib3JkZXItYm90dG9tOiAycHggezB9IHNvbGlkO1xyXG59fVxyXG5cIjtcclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvbiBUaGVtZVRlbXBsYXRlQ29kZVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgT25GMlNob3dUaGVtZUZvcm0gPSB0cnVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBUb29sVGlwUG9wdXBEZWxheU1zID0gMTAwMDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBUb29sVGlwUG9wdXBTdGF5T3BlbkRlbGF5UGVyV29yZE1zID0gMjUwO1xyXG5cbiAgICBcbnByaXZhdGUgc3RhdGljIGRlY2ltYWwgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1RheFBlcmNlbnQ9MC4xbTt9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIFRoZW1lXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZ1tdIENvbG9ycyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjE7IC8vICMwMTczQzcgezB9IGZvcm0gaGVhZGVyIGNvbG9yIHJpYmJvbiBjb2xvciBldGMsIHJpYmJvbiBoZWFkZXIgaGlkZGVuIC0gbm90IGFjdGl2ZS4uXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjI7IC8vICNDNUM1QzUgezF9IHRleHQgc2VsZWN0aW9uIGJhY2sgY29sb3IsIHJpYmJvbiBzcGxpdGVyXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjM7IC8vICNDQ0NDQ0MgezJ9IGRpc2FibGVkIGJhY2tjb2xvclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I0OyAvLyAjRjBGMEYwIHszfSBpbnB1dCBiYWNrY29sb3IuLi4gLSByaWJib24gcGFnZSBiYWNrLCByaWJib24gZ3JvdXAsIHJpYmJvbiBidXR0b24sIHJpYmJvbnNtYWxsLCByaWJib24gaGVhZGVyIGFjdGl2ZSBjb2xyb1xyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I1OyAvLyAjQzNDM0MzIHs0fXJpYmJvbiBpdGVtcyBkaXNhYmxlZCwgcmliYm9uIGhvdmVyXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjY7IC8vICNBREFEQUQgezV9IHJpYmJvbiBidXR0b24gQWN0aXZlXHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I3OyAvLyAjMkE4QUQwIHs2fSByaWJib24gaGVhZGVyIGhpZGRlbiBob3ZlclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I4OyAvLyAjRDNEM0QzIHs3fSB0YWJjb250cm9sIGhlYWRlciBoaWRkZW5cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yOTsgLy8gIzJBOEFENCB7OH0gRm9ybSBIZWFkaW5nIEJ1dHRvbiBub3QgY2xvc2UgSG92ZXIuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjEwOyAvLyAjMDE1QzlGIHs5fSBGb3JtIEhlYWRpbmcgQnV0dG9uIG5vdCBjbG9zZSBBY3RpdmUuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjExOyAvLyAjRTgxMTIzIHsxMH0gRm9ybSBIZWFkaW5nIEJ1dHRvbiBjbG9zZSBIb3Zlci5cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTI7IC8vICNGMTcwN0EgezExfSBGb3JtIEhlYWRpbmcgQnV0dG9uIGNsb3NlIEFjdGl2ZS5cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTM7IC8vICNBRUFFQUUgezEyfSBDZWxsUm93IEFjdGl2ZVxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxNDsgLy8gI0ZBRkFGQSB7MTN9OyBSb3cgRXZlblxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxNTsgLy8gd2hpdGUgezE0fSBDb250ZXh0IE1lbnUgQmFjayBDb2xvclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxNjsgLy8gI0NGQ0ZDRiB7MTV9IENvbnRleHQgTWVudSBJdGVtIEhvdmVyXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjE3OyAvLyAjQjlCOUI5IHsxNn0gQ29udGV4dCBNZW51IEl0ZW0gU3BsaXR0ZXJcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjE4OyAvLyByZ2JhKDEsIDExNSwgMTk5LCAwLjMpIHsxN30gQ2VsbFJvdy1TZWxlY3RlZFxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxOTsgLy8gcmdiYSgxLCAxMTUsIDE5OSwgMC41KSB7MTh9IENlbGxSb3ctU2VsZWN0ZWRcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJvcmRlckNvbG9yMTsgLy8gI0E2QTZBNiB7MTl9IEJ1dHRvbiBCb3JkZXIsIHNwbGl0dGVyIEJvcmRlclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCb3JkZXJDb2xvcjI7IC8vICM3Nzc3NzcgezIwfSBidXR0b24gQm9yZGVyIEFjdGl2ZVxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCb3JkZXJDb2xvcjM7IC8vICM4MDg2OEEgezIxfSBDb250ZXh0IE1lbnUgQm9yZGVyIENvbG9yXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEZvcmVDb2xvcjE7IC8vICM0MDQwNDAgezIyfVxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBGb3JlQ29sb3IyOyAvLyByaWJib25wYWdlaGVhZGVyIHdoaXRlIHsyM30gcmliYm9ucGFnZWhlYWRlci1oaWRkZW5cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgRm9yZUNvbG9yMzsgLy8gcmliYm9ucGFnZWhlYWRlciBibGFjayB7MjR9IEhvdmVyIHRhYmNvbnRyb2xwYWdlaGVhZGVyLWNsb3NlYnV0dG9uXHJcbiAgICAgICAgLy8gY29udHJvbCB7MjV9XHJcbiAgICAgICAgLy8gYmFja2dyb3VuZC1jb2xvciB7MjZ9XHJcbiAgICAgICAgLy8gYm9yZGVyIHsyN31cclxuICAgICAgICAvLyByaWJib24gezI4fVxyXG4gICAgICAgIC8vIC1sZWZ0LWNvbG9yIHsyOX1cclxuICAgICAgICAvLyAtdG9wLWNvbG9yIHszMH1cclxuICAgICAgICAvLyAtcmlnaHQtY29sb3IgezMxfVxyXG4gICAgICAgIC8vIC1ib3R0b20tY29sb3IgezMyfVxyXG4gICAgICAgIC8vIGJ1dHRvbiB7MzN9XHJcbiAgICAgICAgLy8gZm9ybS1oZWFkaW5nIHszNH1cclxuICAgICAgICAvLyBwYWdlaGVhZGVyIHszNX1cclxuICAgICAgICAvLyBoZWFkaW5nIHszNn1cclxuXHJcbiAgICAgICAgcHVibGljIFRoZW1lKHBhcmFtcyBzdHJpbmdbXSBjb2xvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjb2xvcnMgIT0gbnVsbCAmJiBjb2xvcnMuTGVuZ3RoID09IDI1KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb2xvcnMgPSBjb2xvcnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMSA9IGJnYzE7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMiA9IGJnYzI7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMyA9IGJnYzM7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yNCA9IGJnYzQ7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yNSA9IGJnYzU7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yNiA9IGJnYzY7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yNyA9IGJnYzc7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yOCA9IGJnYzg7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yOSA9IGJnYzk7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMTAgPSBiZ2MxMDtcclxuICAgICAgICAgICAgLy9CYWNrZ3JvdW5kQ29sb3IxMSA9IGJnYzExO1xyXG4gICAgICAgICAgICAvL0JhY2tncm91bmRDb2xvcjEyID0gYmdjMTI7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMTMgPSBiZ2MxMztcclxuICAgICAgICAgICAgLy9CYWNrZ3JvdW5kQ29sb3IxNCA9IGJnYzE0O1xyXG4gICAgICAgICAgICAvL0JhY2tncm91bmRDb2xvcjE1ID0gYmdjMTU7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMTYgPSBiZ2MxNjtcclxuICAgICAgICAgICAgLy9CYWNrZ3JvdW5kQ29sb3IxNyA9IGJnYzE3O1xyXG4gICAgICAgICAgICAvL0JhY2tncm91bmRDb2xvcjE4ID0gYmdjMTg7XHJcbiAgICAgICAgICAgIC8vQmFja2dyb3VuZENvbG9yMTkgPSBiZ2MxOTtcclxuICAgICAgICAgICAgLy9Cb3JkZXJDb2xvcjEgPSBiYzE7XHJcbiAgICAgICAgICAgIC8vQm9yZGVyQ29sb3IyID0gYmMyO1xyXG4gICAgICAgICAgICAvL0JvcmRlckNvbG9yMyA9IGJjMztcclxuICAgICAgICAgICAgLy9Gb3JlQ29sb3IxID0gZmMxO1xyXG4gICAgICAgICAgICAvL0ZvcmVDb2xvcjIgPSBmYzI7XHJcbiAgICAgICAgICAgIC8vRm9yZUNvbG9yMyA9IGZjMztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVGhlbWUgVGhlbWUxID0gbmV3IFRoZW1lKFxyXG4gICAgICAgICAgICBcIiMwMTczQzdcIiwgXCIjQzVDNUM1XCIsIFwiI0NDQ0NDQ1wiLFxyXG4gICAgICAgICAgICBcIiNGMEYwRjBcIiwgXCIjQzNDM0MzXCIsIFwiI0FEQURBRFwiLFxyXG4gICAgICAgICAgICBcIiMyQThBRDBcIiwgXCIjRDNEM0QzXCIsIFwiIzJBOEFENFwiLFxyXG4gICAgICAgICAgICBcIiMwMTVDOUZcIiwgXCIjRTgxMTIzXCIsIFwiI0YxNzA3QVwiLFxyXG4gICAgICAgICAgICBcIiNBRUFFQUVcIiwgXCIjRkFGQUZBXCIsIFwiI2ZmZmZmZlwiLFxyXG4gICAgICAgICAgICBcIiNDRkNGQ0ZcIiwgXCIjQjlCOUI5XCIsIFwicmdiYSgxLCAxMTUsIDE5OSwgMC4zKVwiLFxyXG4gICAgICAgICAgICBcInJnYmEoMSwgMTE1LCAxOTksIDAuNSlcIiwgXCIjQTZBNkE2XCIsXHJcbiAgICAgICAgICAgIFwiIzc3Nzc3N1wiLCBcIiM4MDg2OEFcIiwgXCIjNDA0MDQwXCIsXHJcbiAgICAgICAgICAgIFwiI2ZmZmZmZlwiLCBcIiMwMDAwMDBcIik7XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRleHRCbG9ja1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgT3JpZ2luYWxTb3VyY2U7XHJcbiAgICAgICAgcHVibGljIGludCBNYXhXaWR0aDtcclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IENvbXB1dGVkSGVpZ2h0O1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTGluZXNDb21wdXRlZDtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRWxlbGVtdHNPdmVyTWF4ID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIGZsb2F0IE1heENhbGN1bGF0ZWRXaWR0aCA9IDA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0QmxvY2soc3RyaW5nIHNvdXJjZSwgaW50IG1heFdpZHRoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgT3JpZ2luYWxTb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIE1heFdpZHRoID0gbWF4V2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb21wdXRlU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVsZWxlbXRzT3Zlck1heCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzdHJpbmdbXSBMaW5lcyA9IE9yaWdpbmFsU291cmNlLlNwbGl0KG5ldyBjaGFyW10geyAnXFxyJywgJ1xcbicgfSk7XHJcblxyXG4gICAgICAgICAgICBkb3VibGUgc2l6ZVBlckNoYXIgPSBDb250cm9sLkdldFRleHRXaWR0aChcIk1cIiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpO1xyXG5cclxuICAgICAgICAgICAgTGluZXNDb21wdXRlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgTGluZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZyBsaW5lID0gTGluZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgZG91YmxlIGxpbmVXaWR0aCA9IENvbnRyb2wuR2V0VGV4dFdpZHRoKE9yaWdpbmFsU291cmNlLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYobGluZVdpZHRoID4gTWF4V2lkdGgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRWxlbGVtdHNPdmVyTWF4ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBNYXhDYWxjdWxhdGVkV2lkdGggPSBNYXhXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgeXkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeCA9IDA7IHggPCBsaW5lLkxlbmd0aDsgeCsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeXkrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHl5ICogc2l6ZVBlckNoYXIgPiBNYXhXaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGluZXNDb21wdXRlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeXkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZih5eSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMaW5lc0NvbXB1dGVkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExpbmVzQ29tcHV0ZWQrKztcclxuICAgICAgICAgICAgICAgICAgICBpZihsaW5lV2lkdGggPiBNYXhDYWxjdWxhdGVkV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXhDYWxjdWxhdGVkV2lkdGggPSAoZmxvYXQpbGluZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBDb21wdXRlZEhlaWdodCA9IEdldEZvbnRTaXplKFNldHRpbmdzLkRlZmF1bHRGb250KSAqIExpbmVzQ29tcHV0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgR2V0Rm9udFNpemUoc3RyaW5nIGZvbnRXaXRoU2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0cmluZ1tdIHN0cnMgPSBmb250V2l0aFNpemUuU3BsaXQobmV3IGNoYXJbXSB7ICcgJyB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBzdHJzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihzdHJzW2ldLkVuZHNXaXRoKFwicHRcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdChzdHJzW2ldKSAqIDEuMzMzMzMzRjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoc3Ryc1tpXS5FbmRzV2l0aChcInB4XCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZmxvYXQpR2xvYmFsLlBhcnNlRmxvYXQoc3Ryc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiA4LjI1RiAqIDEuMzMzMzMzRjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgaW50ZXJuYWwgY2xhc3MgVG9vbFRpcENvbnRyb2wgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIHZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIFRvb2xUaXAgX3Rvb2xUaXA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUb29sVGlwQ29udHJvbChUb29sVGlwIHRvb2xUaXApIDogYmFzZShcInRvb2wtdGlwXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdG9vbFRpcCA9IHRvb2xUaXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93KE1vdXNlRXZlbnQgZXYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5FbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgaWYoX3Rvb2xUaXAgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIV90b29sVGlwLkhlYWRpbmcuSXNFbXB0eSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5BcHBlbmRDaGlsZChuZXcgSFRNTFBhcmFncmFwaEVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IFwidG9vbC10aXAtaGVhZGluZ1wiLCBJbm5lckhUTUwgPSBfdG9vbFRpcC5IZWFkaW5nLkh0bWxFc2NhcGUoKS5SZXBsYWNlKFwiXFxyXFxuXCIsIFwiPGJyPlwiKSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCFfdG9vbFRpcC5EZXNjcmlwdGlvbi5Jc0VtcHR5KCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkFwcGVuZENoaWxkKG5ldyBIVE1MUGFyYWdyYXBoRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gXCJ0b29sLXRpcC1ib2R5XCIsIElubmVySFRNTCA9IF90b29sVGlwLkRlc2NyaXB0aW9uLkh0bWxFc2NhcGUoKS5SZXBsYWNlKFwiXFxyXFxuXCIsIFwiPGJyPlwiKSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbW91c2UgPSBIZWxwZXIuR2V0Q2xpZW50TW91c2VMb2NhdGlvbihldik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIobW91c2UuWCwgbW91c2UuWS5Ub0ludCgpICsgMjIpO1xyXG5cclxuICAgICAgICAgICAgaWYoIXZpc2libGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQ29udGV4dE1lbnUuVG90YWxDb250ZXh0SGFuZGxlcysrO1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5aSW5kZXggPSAoQ29udGV4dE1lbnUuVG90YWxDb250ZXh0SGFuZGxlcyArIFNldHRpbmdzLkNvbnRleHRNZW51U3RhcnRpbmdaSW5kZXgpLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBEb2N1bWVudC5Cb2R5LkFwcGVuZENoaWxkKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbG9zZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih2aXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLkNvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuU2VsZWN0KHRoaXMuQ29udGVudCkuRmFkZU91dCgxMDAsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgQ29udGV4dE1lbnUuVG90YWxDb250ZXh0SGFuZGxlcy0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBUb29sVGlwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEhlYWRpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIEF0dGFjaGVkQ29udHJvbDtcclxuXHJcbiAgICAgICAgcHVibGljIFRvb2xUaXAoc3RyaW5nIGNvbnRlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEZXNjcmlwdGlvbiA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVG9vbFRpcChzdHJpbmcgaGVhZGluZywgc3RyaW5nIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgSGVhZGluZyA9IGhlYWRpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldFdvcmRDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZnVsbENvbnRlbnQgPSBzdHJpbmcuQ29uY2F0KEhlYWRpbmcsIFwiIFwiLCBEZXNjcmlwdGlvbikuVHJpbSgpO1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gZnVsbENvbnRlbnQuTGVuZ3RoO1xyXG4gICAgICAgICAgICBjaGFyIHByZXZDaGFyID0gJ1xcMCc7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuICAgICAgICAgICAgY2hhciBjdXJyZW50O1xyXG4gICAgICAgICAgICBpbnQgV29yZENvdW50ID0gMTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gZnVsbENvbnRlbnRbaV07XHJcbiAgICAgICAgICAgICAgICBpZihjaGFyLklzV2hpdGVTcGFjZShjdXJyZW50KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaGFyLklzV2hpdGVTcGFjZShwcmV2Q2hhcikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2Q2hhciA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBXb3JkQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmV2Q2hhciA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFdvcmRDb3VudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBzdHJ1Y3QgVmVjdG9yMlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFg7XHJcbiAgICAgICAgcHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gWTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBYaVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChpbnQpWDsgfVxyXG4gICAgICAgICAgICBzZXQgeyBYID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgWWlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoaW50KVk7IH1cclxuICAgICAgICAgICAgc2V0IHsgWSA9IHZhbHVlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgWGZcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiAoZmxvYXQpWDsgfVxyXG4gICAgICAgICAgICBzZXQgeyBYID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBZZlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIChmbG9hdClZOyB9XHJcbiAgICAgICAgICAgIHNldCB7IFkgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBhZGRzIGNhbGMgdG8gKDEwMCUgLSA1MHB4KSB0dXJucyB0byBjYWxjKDEwMCUgLSA1MHB4KVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYVwiPjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIHBmKHN0cmluZyBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGEpICYmIGEuU3RhcnRzV2l0aChcIihcIikgJiYgYS5FbmRzV2l0aChcIilcIikgPyBcImNhbGNcIiArIGEgOiBhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlY3RvcjIoVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB4LCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBYID0geDtcclxuICAgICAgICAgICAgWSA9IHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RydWN0IFZlY3RvcjRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiBYO1xyXG4gICAgICAgIHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFk7XHJcbiAgICAgICAgcHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gWjtcclxuICAgICAgICBwdWJsaWMgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiBNO1xyXG5cclxuICAgICAgICBwdWJsaWMgVmVjdG9yNChVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHgsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4geSwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB6LCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBYID0geDtcclxuICAgICAgICAgICAgWSA9IHk7XHJcbiAgICAgICAgICAgIFogPSB6O1xyXG4gICAgICAgICAgICBNID0gbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFjZUNvZGVFZGl0b3IgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxBY2VDb2RlRWRpdG9yID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly9hY2UuYzkuaW8vYnVpbGQvc3JjL2FjZS5qc1wiKTtcclxuICAgICAgICBwdWJsaWMgb2JqZWN0IGVkaXRvciA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyU2VsZWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNjcmlwdC5DYWxsKFwidGhpcy5lZGl0b3IuY2xlYXJTZWxlY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZWFkT25seVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTY3JpcHQuV3JpdGU8Ym9vbD4oXCJ0aGlzLmVkaXRvci5nZXRSZWFkT25seSgpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldCB7IFNjcmlwdC5DYWxsKFwidGhpcy5lZGl0b3Iuc2V0UmVhZE9ubHlcIiwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFNvdXJjZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTY3JpcHQuV3JpdGU8c3RyaW5nPihcInRoaXMuZWRpdG9yLmdldFZhbHVlKClcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldCB7IFNjcmlwdC5DYWxsKFwidGhpcy5lZGl0b3Iuc2V0VmFsdWVcIiwgdmFsdWUpOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRXh0ZXJuYWxBY2VDb2RlRWRpdG9yLlNldHVwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIEFjZU1vZGVUeXBlcyBfbW9kZVR5cGU7XHJcbiAgICAgICAgcHJpdmF0ZSBBY2VUaGVtZVR5cGVzIF90aGVtZVR5cGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY2VDb2RlRWRpdG9yKEFjZU1vZGVUeXBlcyBtb2RlVHlwZSA9IEFjZU1vZGVUeXBlcy5jc2hhcnAsIEFjZVRoZW1lVHlwZXMgdGhlbWVUeXBlID0gQWNlVGhlbWVUeXBlcy54Y29kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9tb2RlVHlwZSA9IG1vZGVUeXBlO1xyXG4gICAgICAgICAgICBfdGhlbWVUeXBlID0gdGhlbWVUeXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV4dGVybmFsQWNlQ29kZUVkaXRvci5Vc2FnZUNoZWNrKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGhlbWUgPSBfbW9kZVR5cGUuVG9TdHJpbmcoXCJHXCIpO1xyXG4gICAgICAgICAgICB2YXIgbW9kZSA9IF9tb2RlVHlwZS5Ub1N0cmluZyhcIkdcIik7XHJcblxyXG4gICAgICAgICAgICAvKkBcclxuXHRcdFx0dGhpcy5lZGl0b3IgPSBhY2UuZWRpdCh0aGlzLmNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLmVkaXRvci5zZXRUaGVtZShcImFjZS90aGVtZS9cIiArIHRoZW1lKTtcclxuXHRcdFx0dGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoXCJhY2UvbW9kZS9cIiArIG1vZGUpO1xyXG5cdFx0XHQqL1xyXG4gICAgICAgICAgICB0aGlzLk9uUmVzaXplID0gKGNvbnQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8qQFxyXG5cdFx0XHRcdHRoaXMuZWRpdG9yLnJlc2l6ZSh0cnVlKTtcclxuXHRcdFx0XHQqL1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5Db250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRm9ybS5JbkV4dGVybmFsTW91c2VFdmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZVVwLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBGb3JtLkluRXh0ZXJuYWxNb3VzZUV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGJhc2UuUmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIEFjZVRoZW1lVHlwZXNcclxuICAgIHtcclxuICAgICAgICBsYWJlbCwgLy8gYnJpZ2h0XHJcbiAgICAgICAgY2hyb21lLCAvLyBjaHJvbWVcclxuICAgICAgICBjbG91ZHMsIC8vIGNsb3Vkc1xyXG4gICAgICAgIGNyaW1zb25fZWRpdG9yLCAvLyBjcmltc29uX2VkaXRvclxyXG4gICAgICAgIGRhd24sIC8vIGRhd25cclxuICAgICAgICBkcmVhbXdlYXZlciwgLy8gZHJlYW13ZWF2ZXJcclxuICAgICAgICBlY2xpcHNlLCAvLyBlY2xpcHNlXHJcbiAgICAgICAgZ2l0aHViLCAvLyBnaXRodWJcclxuICAgICAgICBzb2xhcml6ZWRfbGlnaHQsIC8vIHNvbGFyaXplZF9saWdodFxyXG4gICAgICAgIHRleHRtYXRlLCAvLyB0ZXh0bWF0ZVxyXG4gICAgICAgIHRvbW9ycm93LCAvLyB0b21vcnJvd1xyXG4gICAgICAgIHhjb2RlLCAvLyB4Y29kZVxyXG4gICAgICAgIGNsb3Vkc19taWRuaWdodCwgLy8gY2xvdWRzX21pZG5pZ2h0XHJcbiAgICAgICAgY29iYWx0LCAvLyBjb2JhbHRcclxuICAgICAgICBpZGxlX2ZpbmdlcnMsIC8vIGlkbGVfZmluZ2Vyc1xyXG4gICAgICAgIGtyX3RoZW1lLCAvLyBrcl90aGVtZVxyXG4gICAgICAgIG1lcmJpdm9yZSwgLy8gbWVyYml2b3JlXHJcbiAgICAgICAgbWVyYml2b3JlX3NvZnQsIC8vIG1lcmJpdm9yZV9zb2Z0XHJcbiAgICAgICAgbW9ub19pbmR1c3RyaWFsLCAvLyBtb25vX2luZHVzdHJpYWxcclxuICAgICAgICBtb25va2FpLCAvLyBtb25va2FpXHJcbiAgICAgICAgcGFzdGVsX29uX2RhcmssIC8vIHBhc3RlbF9vbl9kYXJrXHJcbiAgICAgICAgc29sYXJpemVkX2RhcmssIC8vIHNvbGFyaXplZF9kYXJrXHJcbiAgICAgICAgdGVybWluYWwsIC8vIHRlcm1pbmFsXHJcbiAgICAgICAgdG9tb3Jyb3dfbmlnaHQsIC8vIHRvbW9ycm93X25pZ2h0XHJcbiAgICAgICAgdG9tb3Jyb3dfbmlnaHRfYmx1ZSwgLy8gdG9tb3Jyb3dfbmlnaHRfYmx1ZVxyXG4gICAgICAgIHRvbW9ycm93X25pZ2h0X2JyaWdodCwgLy8gdG9tb3Jyb3dfbmlnaHRfYnJpZ2h0XHJcbiAgICAgICAgdG9tb3Jyb3dfbmlnaHRfZWlnaHRpZXMsIC8vIHRvbW9ycm93X25pZ2h0X2VpZ2h0aWVzXHJcbiAgICAgICAgdHdpbGlnaHQsIC8vIHR3aWxpZ2h0XHJcbiAgICAgICAgdmlicmFudF9pbmsgLy8gdmlicmFudF9pbms8L29wdGlvbj48L29wdGdyb3VwPlxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIEFjZU1vZGVUeXBlc1xyXG4gICAge1xyXG4gICAgICAgIGFiYXAsIC8vIEFCQVBcclxuICAgICAgICBhYmMsIC8vIEFCQ1xyXG4gICAgICAgIGFjdGlvbnNjcmlwdCwgLy8gQWN0aW9uU2NyaXB0XHJcbiAgICAgICAgYWRhLCAvLyBBREFcclxuICAgICAgICBhcGFjaGVfY29uZiwgLy8gQXBhY2hlLCAvLyBDb25mXHJcbiAgICAgICAgYXNjaWlkb2MsIC8vIEFzY2lpRG9jXHJcbiAgICAgICAgYXNzZW1ibHlfeDg2LCAvLyBBc3NlbWJseSwgLy8geDg2XHJcbiAgICAgICAgYXV0b2hvdGtleSwgLy8gQXV0b0hvdEtleVxyXG4gICAgICAgIGJhdGNoZmlsZSwgLy8gQmF0Y2hGaWxlXHJcbiAgICAgICAgYnJvLCAvLyBCcm9cclxuICAgICAgICBjX2NwcCwgLy8gQywgLy8gYW5kLCAvLyBDKytcclxuICAgICAgICBjOXNlYXJjaCwgLy8gQzlTZWFyY2hcclxuICAgICAgICBjaXJydSwgLy8gQ2lycnVcclxuICAgICAgICBjbG9qdXJlLCAvLyBDbG9qdXJlXHJcbiAgICAgICAgY29ib2wsIC8vIENvYm9sXHJcbiAgICAgICAgY29mZmVlLCAvLyBDb2ZmZWVTY3JpcHRcclxuICAgICAgICBjb2xkZnVzaW9uLCAvLyBDb2xkRnVzaW9uXHJcbiAgICAgICAgY3NoYXJwLCAvLyBDI1xyXG4gICAgICAgIGNzcywgLy8gQ1NTXHJcbiAgICAgICAgY3VybHksIC8vIEN1cmx5XHJcbiAgICAgICAgZCwgLy8gRFxyXG4gICAgICAgIGRhcnQsIC8vIERhcnRcclxuICAgICAgICBkaWZmLCAvLyBEaWZmXHJcbiAgICAgICAgZG9ja2VyZmlsZSwgLy8gRG9ja2VyZmlsZVxyXG4gICAgICAgIGRvdCwgLy8gRG90XHJcbiAgICAgICAgZHJvb2xzLCAvLyBEcm9vbHNcclxuICAgICAgICBkdW1teSwgLy8gRHVtbXlcclxuICAgICAgICBkdW1teXN5bnRheCwgLy8gRHVtbXlTeW50YXhcclxuICAgICAgICBlaWZmZWwsIC8vIEVpZmZlbFxyXG4gICAgICAgIGVqcywgLy8gRUpTXHJcbiAgICAgICAgZWxpeGlyLCAvLyBFbGl4aXJcclxuICAgICAgICBlbG0sIC8vIEVsbVxyXG4gICAgICAgIGVybGFuZywgLy8gRXJsYW5nXHJcbiAgICAgICAgZm9ydGgsIC8vIEZvcnRoXHJcbiAgICAgICAgZm9ydHJhbiwgLy8gRm9ydHJhblxyXG4gICAgICAgIGZ0bCwgLy8gRnJlZU1hcmtlclxyXG4gICAgICAgIGdjb2RlLCAvLyBHY29kZVxyXG4gICAgICAgIGdoZXJraW4sIC8vIEdoZXJraW5cclxuICAgICAgICBnaXRpZ25vcmUsIC8vIEdpdGlnbm9yZVxyXG4gICAgICAgIGdsc2wsIC8vIEdsc2xcclxuICAgICAgICBnb2JzdG9uZXMsIC8vIEdvYnN0b25lc1xyXG4gICAgICAgIGdvbGFuZywgLy8gR29cclxuICAgICAgICBncm9vdnksIC8vIEdyb292eVxyXG4gICAgICAgIGhhbWwsIC8vIEhBTUxcclxuICAgICAgICBoYW5kbGViYXJzLCAvLyBIYW5kbGViYXJzXHJcbiAgICAgICAgaGFza2VsbCwgLy8gSGFza2VsbFxyXG4gICAgICAgIGhhc2tlbGxfY2FiYWwsIC8vIEhhc2tlbGwsIC8vIENhYmFsXHJcbiAgICAgICAgaGF4ZSwgLy8gaGFYZVxyXG4gICAgICAgIGhqc29uLCAvLyBIanNvblxyXG4gICAgICAgIGh0bWwsIC8vIEhUTUxcclxuICAgICAgICBodG1sX2VsaXhpciwgLy8gSFRNTCwgLy8gKEVsaXhpcilcclxuICAgICAgICBodG1sX3J1YnksIC8vIEhUTUwsIC8vIChSdWJ5KVxyXG4gICAgICAgIGluaSwgLy8gSU5JXHJcbiAgICAgICAgaW8sIC8vIElvXHJcbiAgICAgICAgamFjaywgLy8gSmFja1xyXG4gICAgICAgIGphZGUsIC8vIEphZGVcclxuICAgICAgICBqYXZhLCAvLyBKYXZhXHJcbiAgICAgICAgamF2YXNjcmlwdCwgLy8gSmF2YVNjcmlwdFxyXG4gICAgICAgIGpzb24sIC8vIEpTT05cclxuICAgICAgICBqc29uaXEsIC8vIEpTT05pcVxyXG4gICAgICAgIGpzcCwgLy8gSlNQXHJcbiAgICAgICAganN4LCAvLyBKU1hcclxuICAgICAgICBqdWxpYSwgLy8gSnVsaWFcclxuICAgICAgICBrb3RsaW4sIC8vIEtvdGxpblxyXG4gICAgICAgIGxhdGV4LCAvLyBMYVRlWFxyXG4gICAgICAgIGxlc3MsIC8vIExFU1NcclxuICAgICAgICBsaXF1aWQsIC8vIExpcXVpZFxyXG4gICAgICAgIGxpc3AsIC8vIExpc3BcclxuICAgICAgICBsaXZlc2NyaXB0LCAvLyBMaXZlU2NyaXB0XHJcbiAgICAgICAgbG9naXFsLCAvLyBMb2dpUUxcclxuICAgICAgICBsc2wsIC8vIExTTFxyXG4gICAgICAgIGx1YSwgLy8gTHVhXHJcbiAgICAgICAgbHVhcGFnZSwgLy8gTHVhUGFnZVxyXG4gICAgICAgIGx1Y2VuZSwgLy8gTHVjZW5lXHJcbiAgICAgICAgbWFrZWZpbGUsIC8vIE1ha2VmaWxlXHJcbiAgICAgICAgbWFya2Rvd24sIC8vIE1hcmtkb3duXHJcbiAgICAgICAgbWFzaywgLy8gTWFza1xyXG4gICAgICAgIG1hdGxhYiwgLy8gTUFUTEFCXHJcbiAgICAgICAgbWF6ZSwgLy8gTWF6ZVxyXG4gICAgICAgIG1lbCwgLy8gTUVMXHJcbiAgICAgICAgbXVzaGNvZGUsIC8vIE1VU0hDb2RlXHJcbiAgICAgICAgbXlzcWwsIC8vIE15U1FMXHJcbiAgICAgICAgbml4LCAvLyBOaXhcclxuICAgICAgICBuc2lzLCAvLyBOU0lTXHJcbiAgICAgICAgb2JqZWN0aXZlYywgLy8gT2JqZWN0aXZlLUNcclxuICAgICAgICBvY2FtbCwgLy8gT0NhbWxcclxuICAgICAgICBwYXNjYWwsIC8vIFBhc2NhbFxyXG4gICAgICAgIHBlcmwsIC8vIFBlcmxcclxuICAgICAgICBwZ3NxbCwgLy8gcGdTUUxcclxuICAgICAgICBwaHAsIC8vIFBIUFxyXG4gICAgICAgIHBvd2Vyc2hlbGwsIC8vIFBvd2Vyc2hlbGxcclxuICAgICAgICBwcmFhdCwgLy8gUHJhYXRcclxuICAgICAgICBwcm9sb2csIC8vIFByb2xvZ1xyXG4gICAgICAgIHByb3BlcnRpZXMsIC8vIFByb3BlcnRpZXNcclxuICAgICAgICBwcm90b2J1ZiwgLy8gUHJvdG9idWZcclxuICAgICAgICBweXRob24sIC8vIFB5dGhvblxyXG4gICAgICAgIHIsIC8vIFJcclxuICAgICAgICByYXpvciwgLy8gUmF6b3JcclxuICAgICAgICByZG9jLCAvLyBSRG9jXHJcbiAgICAgICAgcmh0bWwsIC8vIFJIVE1MXHJcbiAgICAgICAgcnN0LCAvLyBSU1RcclxuICAgICAgICBydWJ5LCAvLyBSdWJ5XHJcbiAgICAgICAgcnVzdCwgLy8gUnVzdFxyXG4gICAgICAgIHNhc3MsIC8vIFNBU1NcclxuICAgICAgICBzY2FkLCAvLyBTQ0FEXHJcbiAgICAgICAgc2NhbGEsIC8vIFNjYWxhXHJcbiAgICAgICAgc2NoZW1lLCAvLyBTY2hlbWVcclxuICAgICAgICBzY3NzLCAvLyBTQ1NTXHJcbiAgICAgICAgc2gsIC8vIFNIXHJcbiAgICAgICAgc2pzLCAvLyBTSlNcclxuICAgICAgICBzbWFydHksIC8vIFNtYXJ0eVxyXG4gICAgICAgIHNuaXBwZXRzLCAvLyBzbmlwcGV0c1xyXG4gICAgICAgIHNveV90ZW1wbGF0ZSwgLy8gU295LCAvLyBUZW1wbGF0ZVxyXG4gICAgICAgIHNwYWNlLCAvLyBTcGFjZVxyXG4gICAgICAgIHNxbCwgLy8gU1FMXHJcbiAgICAgICAgc3Fsc2VydmVyLCAvLyBTUUxTZXJ2ZXJcclxuICAgICAgICBzdHlsdXMsIC8vIFN0eWx1c1xyXG4gICAgICAgIHN2ZywgLy8gU1ZHXHJcbiAgICAgICAgc3dpZnQsIC8vIFN3aWZ0XHJcbiAgICAgICAgdGNsLCAvLyBUY2xcclxuICAgICAgICB0ZXgsIC8vIFRleFxyXG4gICAgICAgIHRleHQsIC8vIFRleHRcclxuICAgICAgICB0ZXh0aWxlLCAvLyBUZXh0aWxlXHJcbiAgICAgICAgdG9tbCwgLy8gVG9tbFxyXG4gICAgICAgIHRzeCwgLy8gVFNYXHJcbiAgICAgICAgdHdpZywgLy8gVHdpZ1xyXG4gICAgICAgIHR5cGVzY3JpcHQsIC8vIFR5cGVzY3JpcHRcclxuICAgICAgICB2YWxhLCAvLyBWYWxhXHJcbiAgICAgICAgdmJzY3JpcHQsIC8vIFZCU2NyaXB0XHJcbiAgICAgICAgdmVsb2NpdHksIC8vIFZlbG9jaXR5XHJcbiAgICAgICAgdmVyaWxvZywgLy8gVmVyaWxvZ1xyXG4gICAgICAgIHZoZGwsIC8vIFZIRExcclxuICAgICAgICB3b2xsb2ssIC8vIFdvbGxva1xyXG4gICAgICAgIHhtbCwgLy8gWE1MXHJcbiAgICAgICAgeHF1ZXJ5LCAvLyBYUXVlcnlcclxuICAgICAgICB5YW1sLCAvLyBZQU1MXHJcbiAgICAgICAgZGphbmdvIC8vIERqYW5nb1xyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZvcm0gOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MRGl2RWxlbWVudCBXaW5kb3dIb2xkZXI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PEZvcm0+IE1pbmltaXplZEZvcm1zID0gbmV3IExpc3Q8Rm9ybT4oKTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxEaXZFbGVtZW50IFdpbmRvd0xvYWRlcjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVG9vbFRpcCBfYWN0aXZlVG9vbFRpcDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpbnQgX3Rvb2xUaXBUaW1lckhhbmRsZSA9IC0xO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEFjdGlvbjxNb3VzZUV2ZW50PiBfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBUb29sVGlwQ29udHJvbCBfYWN0aXZlVG9vbFRpcENvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBfb2VwbnRvb2xUaXBUaW1lckhhbmRsZSA9IC0xO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRvb2xUaXAgQWN0aXZlVG9vbFRpcFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9hY3RpdmVUb29sVGlwOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfYWN0aXZlVG9vbFRpcCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSBudWxsICYmIHZhbHVlLkF0dGFjaGVkQ29udHJvbCAhPSBudWxsICYmIHZhbHVlLkF0dGFjaGVkQ29udHJvbC5Db250ZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5BdHRhY2hlZENvbnRyb2wuQ29udGVudC5SZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZU1vdmUsIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihfYWN0aXZlVG9vbFRpcENvbnRyb2wgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwQ29udHJvbC5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWN0aXZlVG9vbFRpcENvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihfdG9vbFRpcFRpbWVySGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KF90b29sVGlwVGltZXJIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdG9vbFRpcFRpbWVySGFuZGxlID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlVG9vbFRpcCA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgbWVzc2FnZUxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZihfYWN0aXZlVG9vbFRpcCAhPSBudWxsICYmIChtZXNzYWdlTGVuZ3RoID0gX2FjdGl2ZVRvb2xUaXAuR2V0V29yZENvdW50KCkpID4gMCAmJiBfYWN0aXZlVG9vbFRpcC5BdHRhY2hlZENvbnRyb2wgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfdG9vbFRpcFRpbWVySGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2xvYmFsLkNsZWFyVGltZW91dChfdG9vbFRpcFRpbWVySGFuZGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90b29sVGlwVGltZXJIYW5kbGUgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9hY3RpdmVUb29sVGlwQ29udHJvbCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGl2ZVRvb2xUaXBDb250cm9sLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9vZXBudG9vbFRpcFRpbWVySGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KF9vZXBudG9vbFRpcFRpbWVySGFuZGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX29lcG50b29sVGlwVGltZXJIYW5kbGUgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FjdGl2ZVRvb2xUaXBDb250cm9sID0gbmV3IFRvb2xUaXBDb250cm9sKF9hY3RpdmVUb29sVGlwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aXZlVG9vbFRpcENvbnRyb2wuU2hvdyhldik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vZXBudG9vbFRpcFRpbWVySGFuZGxlID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9hY3RpdmVUb29sVGlwQ29udHJvbCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWN0aXZlVG9vbFRpcENvbnRyb2wuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgTWF0aC5NYXgoMTAwMCwgbWVzc2FnZUxlbmd0aCAqIE1hdGguTWF4KFNldHRpbmdzLlRvb2xUaXBQb3B1cFN0YXlPcGVuRGVsYXlQZXJXb3JkTXMsIDEwKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuQXR0YWNoZWRDb250cm9sLkNvbnRlbnQuUmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VNb3ZlLCBfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgTWF0aC5NYXgoMSwgU2V0dGluZ3MuVG9vbFRpcFBvcHVwRGVsYXlNcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5BdHRhY2hlZENvbnRyb2wuQ29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZU1vdmUsIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEluRGVzaWduID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFJlc2l6ZUNvcm5lcnMgPSAyO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRm9ybSBNb3ZpbmdGb3JtID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxFbGVtZW50IFBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE1vdXNlX0Rvd24gPSBmYWxzZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTWVudU9wZW4gPSBmYWxzZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxFbGVtZW50IEZvcm1PdmVyTGF5O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJvb2wgX2hhc1NldHVwID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEhhc1NldHVwIHsgZ2V0IHsgcmV0dXJuIF9oYXNTZXR1cDsgfSB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBQcmV2aW91c1NpemVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBQcmV2aW91c01vdmVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBQcmV2aW91c1Nob3dNYXggPSB0cnVlO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBQcmV2aW91c1Nob3dNaW4gPSB0cnVlO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIFByZXZpb3VzT3BhY2l0eSA9IFwiXCI7XHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgSGFzUmVtb3ZlZFBsYWNlSG9sZGVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbGxvd1NpemVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIEFsbG93TW92ZUNoYW5nZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIVE1MQ29sbGVjdGlvbiBDb250cm9scyB7Z2V0e3JldHVybiBCb2R5LkNoaWxkcmVuO319XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJbkV4dGVybmFsTW91c2VFdmVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBTaG93TWluaW1pemVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBCdXR0b25NaW5pbWl6ZSAhPSBudWxsOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDaGFuZ2VIZWFkaW5nQnV0dG9uKEZvcm1CdXR0b25UeXBlLk1pbmltaXplLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDU1NTdHlsZURlY2xhcmF0aW9uIEJvZHlTdHlsZSB7Z2V0e3JldHVybiBCb2R5LlN0eWxlO319XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFNob3dDbG9zZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEJ1dHRvbkNsb3NlICE9IG51bGw7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuQ2xvc2UsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgU2hvd01heGltaXplXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gQnV0dG9uRXhwYW5kICE9IG51bGw7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuTWF4aW1pemUsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgU2hvd01lbnVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBCdXR0b25NZW51ICE9IG51bGw7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuTWVudSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBGb3JSZXVzZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIGJvb2wgSW5FcnJvckRpYWxvZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgalF1ZXJ5IFNlbGY7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBib29sIF9Jc0RpYWxvZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0RpYWxvZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX0lzRGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBMaXN0PENvbnRyb2w+IENoaWxkcmVuID0gbmV3IExpc3Q8Q29udHJvbD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTGlua2NoaWxkVG9Gb3JtKENvbnRyb2wgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjaGlsZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBDaGlsZHJlbi5BZGQoY2hpbGQpO1xyXG4gICAgICAgICAgICBjaGlsZC5MaW5rZWRGb3JtID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIExpbmtjaGlsZHJlblRvRm9ybShwYXJhbXMgQ29udHJvbFtdIGNoaWxkcmVuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY2hpbGRyZW4gPT0gbnVsbCB8fCBjaGlsZHJlbi5MZW5ndGggPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgQ2hpbGRyZW4uQWRkUmFuZ2UoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY2hpbGRyZW4uTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ldLkxpbmtlZEZvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRm9ybSBBcHBlbmRDaGlsZChDb250cm9sIG5vZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJvZHkuQXBwZW5kQ2hpbGQobm9kZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb3JtIEFwcGVuZENoaWxkcmVuKHBhcmFtcyBDb250cm9sW10gbm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQm9keS5BcHBlbmRDaGlsZHJlbihub2RlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZvcm0gQXBwZW5kQ2hpbGQoSFRNTEVsZW1lbnQgbm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQm9keS5BcHBlbmRDaGlsZChub2RlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZvcm0gQXBwZW5kQ2hpbGRyZW4ocGFyYW1zIEhUTUxFbGVtZW50W10gbm9kZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQm9keS5BcHBlbmRDaGlsZHJlbihub2RlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyBGb3JtQ29sbGVjdGlvbiBzdGFuZEFsb25lRm9ybXMgPSBuZXcgRm9ybUNvbGxlY3Rpb24obnVsbCk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PEZvcm1Db2xsZWN0aW9uPiBGb3JtQ29sbGVjdGlvbnMgPSBuZXcgTGlzdDxGb3JtQ29sbGVjdGlvbj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEZvcm1TdGFydFBvc2l0aW9uIFN0YXJ0UG9zaXRpb24gPSBGb3JtU3RhcnRQb3NpdGlvbi5XaW5kb3dzRGVmYXVsdExvY2F0aW9uO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU2hvd0JvZHlPdmVyTGF5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFdpbmRvd19EZWZhdWx0SGVpZ2h0ID0gNDgwO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFdpbmRvd19EZWZhdWx0V2lkdGggPSA2NDA7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEZvcm0gX0FjdGl2ZUZvcm07XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgRm9ybSBfUHJldkFjdGl2ZUZvcm07XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTW91c2VNb3ZlQWN0aW9uIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uTW92ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgVG9wTW9zdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGlhbG9nUmVzdWx0RW51bSBEaWFsb2dSZXN1bHQgPSBEaWFsb2dSZXN1bHRFbnVtLk5vbmU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveFg7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94WTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94WE9mZjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3hZT2ZmO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgSFRNTERpdkVsZW1lbnQgSGVhZGluZztcclxuICAgICAgICBwcm90ZWN0ZWQgSFRNTERpdkVsZW1lbnQgQnV0dG9uQ2xvc2U7XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEJ1dHRvbkV4cGFuZDtcclxuICAgICAgICBwcm90ZWN0ZWQgSFRNTERpdkVsZW1lbnQgQnV0dG9uTWluaW1pemU7XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEJ1dHRvbk1lbnU7XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxTcGFuRWxlbWVudCBIZWFkaW5nVGl0bGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBCb2R5O1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBCb2R5T3ZlckxheTtcclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IHByZXZfcHg7XHJcbiAgICAgICAgcHVibGljIGZsb2F0IHByZXZfcHk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IHByZXZfd2lkdGg7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgcHJldl9oZWlnaHQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IHByZXZfdG9wO1xyXG4gICAgICAgIHByaXZhdGUgaW50IHByZXZfbGVmdDtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBNaW5XaWR0aCA9IDIwMDtcclxuICAgICAgICBwdWJsaWMgaW50IE1pbkhlaWdodCA9IDUwO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNpemVDaGlsZHJlbihIVE1MRWxlbWVudCBwYXJlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihPblJlc2l6ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgT25SZXNpemUodGhpcyk7XHJcbiAgICAgICAgICAgIE9uUmVzaXppbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgeCA9IDA7IHggPCBwYXJlbnQuQ2hpbGRyZW4uTGVuZ3RoOyB4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFwYXJlbnQuQ2hpbGRyZW5beF0uQ2xhc3NMaXN0LkNvbnRhaW5zKFwiY29udHJvbFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBDaGlsZHJlbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENoaWxkcmVuW2ldICE9IG51bGwgJiYgQ2hpbGRyZW5baV0uT25SZXNpemUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKENoaWxkcmVuW2ldLkNvbnRlbnQgPT0gcGFyZW50LkNoaWxkcmVuW3hdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGlsZHJlbltpXS5PblJlc2l6ZShDaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKHBhcmVudC5DaGlsZHJlblt4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlc2l6aW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE9uUmVzaXplICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBPblJlc2l6ZSh0aGlzKTtcclxuICAgICAgICAgICAgT25SZXNpemluZygpO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENoaWxkcmVuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKENoaWxkcmVuW2ldICE9IG51bGwgJiYgQ2hpbGRyZW5baV0uT25SZXNpemUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDaGlsZHJlbltpXS5PblJlc2l6ZShDaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25SZXNpemluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBXaW5kb3dTdGF0ZVR5cGUgd2luZG93U3RhdGU7XHJcbiAgICAgICAgcHJpdmF0ZSBXaW5kb3dTdGF0ZVR5cGUgX3ByZXZ3aW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5Ob3JtYWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXaW5kb3dTdGF0ZVR5cGUgV2luZG93U3RhdGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB3aW5kb3dTdGF0ZTsgfVxyXG4gICAgICAgICAgICBzZXQgeyBTZXRXaW5kb3dTdGF0ZSh2YWx1ZSk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNaWRsZU9mQWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBNb3ZpbmdGb3JtICE9IG51bGw7IC8vIFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsIHx8XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbnRlbnRWaXNpYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50ICE9IG51bGwgJiYgQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5LkVxdWFscyhWaXNpYmlsaXR5LlZpc2libGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2hhbmdlSGVhZGluZ0J1dHRvbihGb3JtQnV0dG9uVHlwZSBidXR0b24sIGJvb2wgdmlzaWJsZSA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2goYnV0dG9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLk1pbmltaXplOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEJ1dHRvbk1pbmltaXplICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25NaW5pbWl6ZS5EZWxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uTWluaW1pemUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih2aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uTWluaW1pemUgPSBDcmVhdGVGb3JtQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLk1heGltaXplOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEJ1dHRvbkV4cGFuZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhwYW5kLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25FeHBhbmQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih2aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhwYW5kID0gQ3JlYXRlRm9ybUJ1dHRvbihidXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLkNsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEJ1dHRvbkNsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25DbG9zZS5EZWxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uQ2xvc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih2aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uQ2xvc2UgPSBDcmVhdGVGb3JtQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRm9ybUJ1dHRvblR5cGUuTWVudTpcclxuICAgICAgICAgICAgICAgICAgICBpZihCdXR0b25NZW51ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25NZW51LkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25NZW51ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbk1lbnUgPSBDcmVhdGVGb3JtQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENhbGN1bGF0ZUJ1dHRvbkxvY2F0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBJbml0aWFsaXNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uU2hvd2luZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkNsb3NpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb24gT25Gb3JtQ2xvc2VkID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGb3JtQ29sbGVjdGlvbiBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSBGb3JtQ29sbGVjdGlvbnMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZybUNvbCA9IEZvcm1Db2xsZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmKGZybUNvbC5Gb3JtT3duZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgZnJtQ29sLlZpc2libGVGb3Jtcy5Db3VudDsgeCsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZnJtQ29sLlZpc2libGVGb3Jtc1t4XSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm1Db2wuVmlzaWJsZUZvcm1zW3hdLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgRm9ybUNvbGxlY3Rpb25zLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmcm1Db2w7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldEJvZHlPdmVyTGF5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBBY3RpdmVDb2xsZWN0aW9uID0gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKTtcclxuICAgICAgICAgICAgaWYoQWN0aXZlQ29sbGVjdGlvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgQWN0aXZlQ29sbGVjdGlvbi5Gb3JtT3duZXIuU2hvd0JvZHlPdmVyTGF5U3R5bGUoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBWaXNpYmxlRm9ybXMgPSBBY3RpdmVDb2xsZWN0aW9uLlZpc2libGVGb3JtcztcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBWaXNpYmxlRm9ybXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBWaXNpYmxlRm9ybXNbaV07XHJcbiAgICAgICAgICAgICAgICBpZihmb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5TaG93Qm9keU92ZXJMYXlTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93Qm9keU92ZXJMYXlTdHlsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihCb2R5T3ZlckxheSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBCb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5LkVxdWFscyhWaXNpYmlsaXR5LkNvbGxhcHNlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5EZXNpZ24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkdvdEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uTG9zdEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEZvcm0gQWN0aXZlRm9ybVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9BY3RpdmVGb3JtOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfQWN0aXZlRm9ybSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfUHJldkFjdGl2ZUZvcm0gPSBfQWN0aXZlRm9ybTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX0FjdGl2ZUZvcm0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9BY3RpdmVGb3JtLk9uTG9zdEZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9BY3RpdmVGb3JtLkNvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX0FjdGl2ZUZvcm0uSW5EZXNpZ24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0FjdGl2ZUZvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX0FjdGl2ZUZvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfQWN0aXZlRm9ybSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9BY3RpdmVGb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfQWN0aXZlRm9ybS5PbkdvdEZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9BY3RpdmVGb3JtLkNvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX0FjdGl2ZUZvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfQWN0aXZlRm9ybS5CcmluZ1RvRnJvbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihfUHJldkFjdGl2ZUZvcm0gaXMgRm9ybVBvcHVwICYmICgoX0FjdGl2ZUZvcm0gIT0gbnVsbCAmJiAhKF9BY3RpdmVGb3JtIGlzIEZvcm1Qb3B1cCkpIHx8IF9BY3RpdmVGb3JtID09IG51bGwpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2VGb3JtUG9wdXBzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQ2hhbmdlU3RhdGVUZXh0U2VsZWN0aW9uKEhUTUxFbGVtZW50IGVsZW1lbnQsIGJvb2wgc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KGVsZW1lbnQpLkNzcyhcInVzZXItc2VsZWN0XCIsIHN0YXRlID8gXCJ0ZXh0XCIgOiBcIm5vbmVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgUGVyZm9ybUZvY3VzU2hha2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoQWN0aXZlRm9ybSAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IEFjdGl2ZUZvcm07XHJcbiAgICAgICAgICAgICAgICBmb3JtLkhlYWRpbmcuQ2xhc3NMaXN0LkFkZChcImZvcm0taGVhZGluZy1mbGFzaFwiKTtcclxuICAgICAgICAgICAgICAgIEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5IZWFkaW5nLkNsYXNzTGlzdC5SZW1vdmUoXCJmb3JtLWhlYWRpbmctZmxhc2hcIik7XHJcbiAgICAgICAgICAgICAgICB9KSwgODAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERpc2FibGVTdGF0ZURyYWcoSFRNTEVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGVsZW1lbnQgaXMgSFRNTEltYWdlRWxlbWVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5BczxIVE1MSW1hZ2VFbGVtZW50PigpLk9uRHJhZ1N0YXJ0ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChlbGVtZW50KS5Dc3MoXCJ1c2VyLWRyYWc6XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldHVwSGlkZUVsZW1lbnRzT25WaWV3KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpbmRvdy5PbkJsdXIgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuTm9kZT4oRG9jdW1lbnQuQm9keS5DaGlsZE5vZGVzLFdpbmRvd0hvbGRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgRG9jdW1lbnQuQm9keS5SZW1vdmVDaGlsZChXaW5kb3dIb2xkZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgV2luZG93Lk9uRm9jdXMgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGdsb2JhbDo6QnJpZGdlLkh0bWw1Lk5vZGU+KERvY3VtZW50LkJvZHkuQ2hpbGROb2RlcyxXaW5kb3dIb2xkZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQoV2luZG93SG9sZGVyKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBDbG9zZUZvcm1Qb3B1cHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgeC5WaXNpYmxlRm9ybXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih4LlZpc2libGVGb3Jtc1tpXSAhPSBudWxsICYmIHguVmlzaWJsZUZvcm1zW2ldIGlzIEZvcm1Qb3B1cCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4LlZpc2libGVGb3Jtc1tpXS5Jc0NvbnRlbnRWaXNpYmxlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4LlZpc2libGVGb3Jtc1tpXS5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHguRm9ybU93bmVyIGlzIEZvcm1Qb3B1cClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4LkZvcm1Pd25lci5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpbnQgTG9hZGluZ0NvdW50ID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQmVnaW5Mb2FkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvYWRpbmdDb3VudCsrOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLldhaXQpO1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLk9wYWNpdHkgPSBcIjAuNFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEVuZExvYWRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9hZGluZ0NvdW50LS07XHJcbiAgICAgICAgICAgIGlmKExvYWRpbmdDb3VudCA9PSAwKVxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcbiAgICAgICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuT3BhY2l0eSA9IFwiMFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoSFRNTEVsZW1lbnQgcGFyZW50ID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vU2V0dGluZ3MuU2V0dXAoKTtcclxuICAgICAgICAgICAgaWYoX2hhc1NldHVwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBfaGFzU2V0dXAgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYocGFyZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBQYXJlbnQgPSBEb2N1bWVudC5Cb2R5O1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBQYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBXaW5kb3dIb2xkZXIgPSBEaXYoXCJmb3JtLWNvbnRhaW5lclwiKTtcclxuXHJcbiAgICAgICAgICAgIEZvcm1PdmVyTGF5ID0gRGl2KFwic3lzdGVtLWZvcm0tY29sbGVjdGlvbi1vdmVybGF5XCIpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93TG9hZGVyID0gbmV3IEhUTUxEaXZFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5DbGFzc05hbWUgPSBcImFqYXgtbG9hZGluZy1zY3JlZW5cIjtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkhpZGRlbjtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLk9wYWNpdHkgPSBcIjBcIjtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLkJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlNldEJvdW5kc0Z1bGwoKTtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLlBvc2l0aW9uID0gUG9zaXRpb24uRml4ZWQ7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5aSW5kZXggPSBcIjEwMDAwMFwiO1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuT25Db250ZXh0TWVudSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5UcmFuc2l0aW9uID0gXCJvcGFjaXR5IDFzIGVhc2VcIjtcclxuXHJcbiAgICAgICAgICAgIERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQoV2luZG93TG9hZGVyKTtcclxuXHJcbiAgICAgICAgICAgIEZvcm1PdmVyTGF5Lk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihBY3RpdmVGb3JtIGlzIEZvcm1Qb3B1cClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbG9zZUZvcm1Qb3B1cHMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihEb2N1bWVudC5BY3RpdmVFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Gb3JtUG9wdXBcclxuICAgICAgICAgICAgICAgICAgICBEb2N1bWVudC5BY3RpdmVFbGVtZW50LkZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5PbkNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQZXJmb3JtRm9jdXNTaGFrZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5PbkNvbnRleHRNZW51ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEZvcm1PdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuT25LZXlVcCA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoU2V0dGluZ3MuT25GMlNob3dUaGVtZUZvcm0gJiYgZXYuS2V5Q29kZSA9PSBLZXlDb2Rlcy5GMilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFRoZW1lRm9ybS5TaG93VGhlbWVGb3JtKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuT25SZXNpemUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEZvcm1Db2xsZWN0aW9ucyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgRm9ybUNvbGxlY3Rpb25zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRm9ybUNvbGxlY3Rpb25zW2ldID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYyA9IEZvcm1Db2xsZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihmYy5Gb3JtT3duZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmMuRm9ybU93bmVyLlJlc2l6aW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IGZjLlZpc2libGVGb3Jtcy5Db3VudDsgeCsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmMuVmlzaWJsZUZvcm1zW3hdICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYy5WaXNpYmxlRm9ybXNbeF0uUmVzaXppbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBXaW5kb3cuT25Nb3VzZU1vdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEluRXh0ZXJuYWxNb3VzZUV2ZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWV2ID0gZXYuQXM8TW91c2VFdmVudD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybS5TdHlsZS5Cb3hTaGFkb3cgPSBcIm5vbmVcIjsgLy8gYm94IC0gc2hhZG93OiBub25lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkuRXF1YWxzKFZpc2liaWxpdHkuQ29sbGFwc2UpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybS5JbkRlc2lnbilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX0FjdGl2ZUZvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uSGVhZGluZy5Gb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vdXNlUG9zID0gSGVscGVyLkdldENsaWVudE1vdXNlTG9jYXRpb24oZXYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBtWDtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBtWTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ggPSAoKG1YID0gbW91c2VQb3MuWGYpICsgTW92aW5nRm9ybS5wcmV2X3B4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3WSA9ICgobVkgPSBtb3VzZVBvcy5ZZikgKyBNb3ZpbmdGb3JtLnByZXZfcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtLndpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uTW92ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uY2hhbmdlV2luZG93U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3WCA9IG1vdXNlUG9zLlhmIC0gKE1vdmluZ0Zvcm0ucHJldl93aWR0aCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLnByZXZfcHggPSBuZXdYIC0gbW91c2VQb3MuWGY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB4ID0gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KE1vdmluZ0Zvcm0uU3R5bGUuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgeSA9IChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdChNb3ZpbmdGb3JtLlN0eWxlLlRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgdyA9IChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdChNb3ZpbmdGb3JtLlN0eWxlLldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBoID0gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KE1vdmluZ0Zvcm0uU3R5bGUuSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgcHggPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHB5ID0geTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBwdyA9IHc7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgcGggPSBoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdZIDwgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3WSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3WCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ggPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihtWCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1YID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZihtWSA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ZID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKE1vdmVBY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Nb3ZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG5ld1g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3WTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb3VzZU1vdmVBY3Rpb24uVG9wTGVmdFJlc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgLT0gbmV3WCAtIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoIC09IG5ld1kgLSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHcgPCBNb3ZpbmdGb3JtLk1pbldpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ggLT0gTW92aW5nRm9ybS5NaW5XaWR0aCAtIHc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IE1vdmluZ0Zvcm0uTWluV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihoIDwgTW92aW5nRm9ybS5NaW5IZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3WSAtPSBNb3ZpbmdGb3JtLk1pbkhlaWdodCAtIGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IE1vdmluZ0Zvcm0uTWluSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG5ld1g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3WTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW91c2VNb3ZlQWN0aW9uLlRvcFJlc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggLT0gbmV3WSAtIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaCA8IE1vdmluZ0Zvcm0uTWluSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1kgLT0gTW92aW5nRm9ybS5NaW5IZWlnaHQgLSBoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBNb3ZpbmdGb3JtLk1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3WTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW91c2VNb3ZlQWN0aW9uLlRvcFJpZ2h0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCAtPSBuZXdZIC0geTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBtWCAtIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaCA8IE1vdmluZ0Zvcm0uTWluSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1kgLT0gTW92aW5nRm9ybS5NaW5IZWlnaHQgLSBoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBNb3ZpbmdGb3JtLk1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHcgPCBNb3ZpbmdGb3JtLk1pbldpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNb3ZpbmdGb3JtLk1pbldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBuZXdZO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb3VzZU1vdmVBY3Rpb24uTGVmdFJlc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgLT0gbmV3WCAtIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodyA8IE1vdmluZ0Zvcm0uTWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3WCAtPSBNb3ZpbmdGb3JtLk1pbldpZHRoIC0gdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gTW92aW5nRm9ybS5NaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gbmV3WDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW91c2VNb3ZlQWN0aW9uLkJvdHRvbUxlZnRSZXNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3IC09IG5ld1ggLSB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG1ZIC0geTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih3IDwgTW92aW5nRm9ybS5NaW5XaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdYIC09IE1vdmluZ0Zvcm0uTWluV2lkdGggLSB3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNb3ZpbmdGb3JtLk1pbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGggPCBNb3ZpbmdGb3JtLk1pbkhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTW92aW5nRm9ybS5NaW5IZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG5ld1g7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21SZXNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gbVkgLSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGggPCBNb3ZpbmdGb3JtLk1pbkhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTW92aW5nRm9ybS5NaW5IZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5SaWdodFJlc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBtWCAtIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodyA8IE1vdmluZ0Zvcm0uTWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IE1vdmluZ0Zvcm0uTWluV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21SaWdodFJlc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBtWCAtIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG1ZIC0geTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihoIDwgTW92aW5nRm9ybS5NaW5IZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IE1vdmluZ0Zvcm0uTWluSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodyA8IE1vdmluZ0Zvcm0uTWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IE1vdmluZ0Zvcm0uTWluV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJvb2wgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHB4ICE9IHgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uU3R5bGUuTGVmdCA9IFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwieCArICdweCdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHkgIT0geSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybS5TdHlsZS5Ub3AgPSBTY3JpcHQuV3JpdGU8c3RyaW5nPihcInkgKyAncHgnXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHB3ICE9IHcgJiYgKGNoYW5nZWQgPSB0cnVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybS5TdHlsZS5XaWR0aCA9IFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwidyArICdweCdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGggIT0gaCAmJiAoY2hhbmdlZCA9IHRydWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLlN0eWxlLkhlaWdodCA9IFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwiaCArICdweCdcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoYW5nZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uUmVzaXppbmcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFdpbmRvdy5Pbk1vdXNlVXAgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEluRXh0ZXJuYWxNb3VzZUV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybS5TdHlsZS5Cb3hTaGFkb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgTW92aW5nRm9ybSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBNb3VzZV9Eb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk1vdmU7XHJcbiAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXaW5kb3cuT25CZWZvcmVVbmxvYWQgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFTZXR0aW5ncy5BbGxvd0Nsb3NlV2l0aG91dFF1ZXN0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInJldHVybiAnV291bGQgeW91IGxpa2UgdG8gY2xvc2UgdGhpcyBhcHBsaWNhdGlvbj8nXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXaW5kb3cuT25VbmxvYWQgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFNldHRpbmdzLk9uQXBwbGljYXRpb25DbG9zZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLk9uQXBwbGljYXRpb25DbG9zZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXaW5kb3cuT25FcnJvciArPSBuZXcgRXJyb3JFdmVudEhhbmRsZXIoKHN0cmluZyBtZXNzYWdlLCBzdHJpbmcgdXJsLCBpbnQgbGluZU51bWJlciwgaW50IGNvbHVtbk51bWJlciwgb2JqZWN0IGVycm9yKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihJbkVycm9yRGlhbG9nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEluRXJyb3JEaWFsb2cgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBlcnJTdHI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShtZXNzYWdlKSB8fCBtZXNzYWdlID09IFwiU2NyaXB0IGVycm9yLlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyU3RyID0gXCJTY3JpcHQgRXJyb3I6IFNlZSBCcm93c2VyIENvbnNvbGUgZm9yIERldGFpbCdzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyclN0ciA9IFwiU2NyaXB0IEVycm9yOiBcIiArIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihBcHBsaWNhdGlvbi5BcGxpY2F0aW9uRGVmaXRpb24gPT0gQXBwbGljYXRpb25EZWZpdG5pb24uRXhwcmVzc0NyYWZ0Q29uc29sZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGVGb3JtLkxvZyhlcnJTdHIsIENvbnNvbGVMb2dUeXBlLkVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKFNldHRpbmdzLlNob3dFeGNlcHRpb25EaWFsb2cpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnQm94ID0gbmV3IE1lc3NhZ2VCb3hGb3JtKGVyclN0ciwgTWVzc2FnZUJveExheW91dC5FcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZ0JveC5TaG93RGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmluYWxseVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEluRXJyb3JEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgV2luZG93SG9sZGVyLkFwcGVuZENoaWxkKEZvcm1PdmVyTGF5KTtcclxuXHJcbiAgICAgICAgICAgIFBhcmVudC5BcHBlbmRDaGlsZHJlbihXaW5kb3dIb2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldEN1cnNvcihDdXJzb3IgY3Vyc29yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRG9jdW1lbnQuQm9keS5TdHlsZS5DdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgICAgIHZhciB4ID0gRG9jdW1lbnQuQm9keS5TdHlsZS5CYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgIERvY3VtZW50LkJvZHkuU3R5bGUuQmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgICAgICBEb2N1bWVudC5Cb2R5LlN0eWxlLkJhY2tncm91bmRDb2xvciA9IHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIFVuaW9uPHN0cmluZywgRGlzcGxheT4gcHJldmlvdXNEaXNwbGF5O1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRXaW5kb3dTdGF0ZShXaW5kb3dTdGF0ZVR5cGUgU3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihTdGF0ZSA9PSB3aW5kb3dTdGF0ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIF9wcmV2d2luZG93U3RhdGUgPSB3aW5kb3dTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQm9keS5TdHlsZS5PcGFjaXR5ID0gUHJldmlvdXNPcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gUHJldmlvdXNTaXplQ2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgQWxsb3dNb3ZlQ2hhbmdlID0gUHJldmlvdXNNb3ZlQ2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgU2hvd01heGltaXplID0gUHJldmlvdXNTaG93TWF4O1xyXG4gICAgICAgICAgICAgICAgU2hvd01pbmltaXplID0gUHJldmlvdXNTaG93TWluO1xyXG4gICAgICAgICAgICAgICAgSGVhZGluZ1RpdGxlLlN0eWxlLkxlZnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgSGVhZGluZ1RpdGxlLlN0eWxlLk1hcmdpblJpZ2h0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmdUaXRsZS5TdHlsZS5UcmFuc2Zvcm0gPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKEJ1dHRvbk1pbmltaXplICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnV0dG9uTWluaW1pemUuSW5uZXJIVE1MID0gXCItXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nLkNsYXNzTGlzdC5SZW1vdmUoXCJmb3JtLWhlYWRpbmctbWluXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIE1pbmltaXplZEZvcm1zLlJlbW92ZSh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBCb2R5LlN0eWxlLkRpc3BsYXkgPSBwcmV2aW91c0Rpc3BsYXk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCFBbGxvd1NpemVDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZigod2luZG93U3RhdGUgPSBTdGF0ZSkgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRCb3VuZHMocHJldl9sZWZ0LCBwcmV2X3RvcCwgcHJldl93aWR0aCwgcHJldl9oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgUmVzaXppbmcoKTtcclxuICAgICAgICAgICAgICAgIFN0eWxlLkJvcmRlcldpZHRoID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2xlZnQgPSBMZWZ0LlRvSW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldl90b3AgPSBUb3AuVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X3dpZHRoID0gV2lkdGguVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2hlaWdodCA9IEhlaWdodC5Ub0ludCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFN0eWxlLkJvcmRlcldpZHRoID0gXCIwXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRCb3VuZHMoMCwgMCwgXCIxMDAlXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NaW5pbWl6ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2l6ZUNoYW5nZSA9IEFsbG93U2l6ZUNoYW5nZTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzTW92ZUNoYW5nZSA9IEFsbG93TW92ZUNoYW5nZTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzT3BhY2l0eSA9IEJvZHkuU3R5bGUuT3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2hvd01heCA9IFNob3dNYXhpbWl6ZTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2hvd01pbiA9IFNob3dNaW5pbWl6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEJvZHkuU3R5bGUuT3BhY2l0eSA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgU2hvd01heGltaXplID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBTaG93TWluaW1pemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEFsbG93TW92ZUNoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2xlZnQgPSBMZWZ0LlRvSW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldl90b3AgPSBUb3AuVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X3dpZHRoID0gV2lkdGguVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2hlaWdodCA9IEhlaWdodC5Ub0ludCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFN0eWxlLkJvcmRlcldpZHRoID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nVGl0bGUuU3R5bGUuTWFyZ2luUmlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmdUaXRsZS5TdHlsZS5MZWZ0ID0gXCIzcHhcIjtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmdUaXRsZS5TdHlsZS5UcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgwLCAtNTAlKVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAoU2hvd0Nsb3NlID8gNDUuNWYgOiAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBXaWR0aCA9IChmbG9hdClNYXRoLk1heChHZXRUZXh0V2lkdGgoVGV4dCwgXCIxMHB0IFRhaG9tYVwiKSArIDMyLCAxMDApICsgb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgSGVpZ2h0ID0gMzA7XHJcblxyXG4gICAgICAgICAgICAgICAgSGVhZGluZy5DbGFzc0xpc3QuQWRkKFwiZm9ybS1oZWFkaW5nLW1pblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihCdXR0b25NaW5pbWl6ZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRvbk1pbmltaXplLklubmVySFRNTCA9IFwiK1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHByZXZpb3VzRGlzcGxheSA9IEJvZHkuU3R5bGUuRGlzcGxheTtcclxuICAgICAgICAgICAgICAgIEJvZHkuU3R5bGUuRGlzcGxheSA9IERpc3BsYXkuTm9uZTtcclxuXHJcbiAgICAgICAgICAgICAgICBNaW5pbWl6ZWRGb3Jtcy5BZGQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlc2l6aW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIENhbGN1bGF0ZU1pbm1pemVkRm9ybXNMb2NhdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNaW5pbWl6ZWRGb3Jtcy5SZW1vdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHZhciBSZW1vdmVMaXN0ID0gbmV3IExpc3Q8Rm9ybT4oKTtcclxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgZmxvYXQgd2lkdGhUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGludCB5ID0gMzA7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmlld1NpemUgPSBQYXJlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBpdGVtIGluIE1pbmltaXplZEZvcm1zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtLkNvbnRlbnQgPT0gbnVsbCB8fCBpdGVtLndpbmRvd1N0YXRlICE9IFdpbmRvd1N0YXRlVHlwZS5NaW5pbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVtb3ZlTGlzdC5BZGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFRvSW5jcmVtZW50ID0gMyArIGl0ZW0uV2lkdGguVG9GbG9hdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZih3aWR0aFRvdGFsICsgVG9JbmNyZW1lbnQgPiB2aWV3U2l6ZS5XaWR0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoVG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIod2lkdGhUb3RhbCwgXCIoMTAwJSAtIFwiICsgKHkgKyAyKSArIFwicHgpXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aWR0aFRvdGFsICs9IFRvSW5jcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGl0ZW0gaW4gUmVtb3ZlTGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWluaW1pemVkRm9ybXMuUmVtb3ZlKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0xlZnQgPSAwO1xyXG4gICAgICAgICAgICAvL1RvcCA9IFwiY2FsYygxMDAlIC0gMzBweClcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBjaGFuZ2VXaW5kb3dTdGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXRXaW5kb3dTdGF0ZShXaW5kb3dTdGF0ZVR5cGUuTm9ybWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NaW5pbWl6ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNldFdpbmRvd1N0YXRlKF9wcmV2d2luZG93U3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2V0V2luZG93U3RhdGUoV2luZG93U3RhdGVUeXBlLk1heGltaXplZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENhbGN1bGF0ZUJ1dHRvbkxvY2F0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmbG9hdCBSaWdodE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIGZsb2F0IGFwcGVuZCA9IDQ1LjVmO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFwcGVuZCA9IDY1LjVmO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihTaG93Q2xvc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRvbkNsb3NlLlN0eWxlLkxlZnQgPSBcImNhbGMoMTAwJSAtIFwiICsgYXBwZW5kICsgXCJweClcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFJpZ2h0T2Zmc2V0ICs9IGFwcGVuZDtcclxuICAgICAgICAgICAgICAgIGlmKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkhUTUxFbGVtZW50PihIZWFkaW5nLkNoaWxkcmVuLEJ1dHRvbkNsb3NlKSlcclxuICAgICAgICAgICAgICAgICAgICBIZWFkaW5nLkFwcGVuZENoaWxkKEJ1dHRvbkNsb3NlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoU2hvd01heGltaXplKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSaWdodE9mZnNldCArPSBhcHBlbmQ7XHJcbiAgICAgICAgICAgICAgICBCdXR0b25FeHBhbmQuU3R5bGUuTGVmdCA9IFwiY2FsYygxMDAlIC0gXCIgKyBSaWdodE9mZnNldCArIFwicHgpXCI7XHJcbiAgICAgICAgICAgICAgICBpZighU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxnbG9iYWw6OkJyaWRnZS5IdG1sNS5IVE1MRWxlbWVudD4oSGVhZGluZy5DaGlsZHJlbixCdXR0b25FeHBhbmQpKVxyXG4gICAgICAgICAgICAgICAgICAgIEhlYWRpbmcuQXBwZW5kQ2hpbGQoQnV0dG9uRXhwYW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihTaG93TWluaW1pemUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJpZ2h0T2Zmc2V0ICs9IGFwcGVuZDtcclxuICAgICAgICAgICAgICAgIEJ1dHRvbk1pbmltaXplLlN0eWxlLkxlZnQgPSBcImNhbGMoMTAwJSAtIFwiICsgUmlnaHRPZmZzZXQgKyBcInB4KVwiO1xyXG4gICAgICAgICAgICAgICAgaWYoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuSFRNTEVsZW1lbnQ+KEhlYWRpbmcuQ2hpbGRyZW4sQnV0dG9uTWluaW1pemUpKVxyXG4gICAgICAgICAgICAgICAgICAgIEhlYWRpbmcuQXBwZW5kQ2hpbGQoQnV0dG9uTWluaW1pemUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihTaG93TWVudSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQnV0dG9uTWVudS5TdHlsZS5MZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICBpZighU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxnbG9iYWw6OkJyaWRnZS5IdG1sNS5IVE1MRWxlbWVudD4oSGVhZGluZy5DaGlsZHJlbixCdXR0b25NZW51KSlcclxuICAgICAgICAgICAgICAgICAgICBIZWFkaW5nLkFwcGVuZENoaWxkKEJ1dHRvbk1lbnUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIEhUTUxEaXZFbGVtZW50IENyZWF0ZUZvcm1CdXR0b24oRm9ybUJ1dHRvblR5cGUgVHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidXR0ID0gRGl2KFwiZm9ybS1oZWFkaW5nLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaChUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLkNsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuQ2xhc3NMaXN0LkFkZChcImZvcm0taGVhZGluZy1idXR0b24tY2xvc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dC5Jbm5lckhUTUwgPSBcIiZ0aW1lcztcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdXNlX0Rvd24gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBY3RpdmVGb3JtID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy98fCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihJbkRlc2lnbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLk1heGltaXplOlxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuSW5uZXJIVE1MID0gXCImIzk2MzM7XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyAgfHwgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ICE9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTW91c2VfRG93biA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlV2luZG93U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLk1pbmltaXplOlxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuSW5uZXJIVE1MID0gXCItXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyB8fCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihidXR0LklubmVySFRNTCA9PSBcIi1cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dC5Jbm5lckhUTUwgPSBcIitcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRvd1N0YXRlID0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRvd1N0YXRlID0gX3ByZXZ3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWluaW1pemVkID8gV2luZG93U3RhdGVUeXBlLk5vcm1hbCA6IF9wcmV2d2luZG93U3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0LklubmVySFRNTCA9IFwiLVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3VzZV9Eb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBGb3JtQnV0dG9uVHlwZS5SZXN0b3JlOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEZvcm1CdXR0b25UeXBlLkhlbHA6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdXNlX0Rvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRm9ybUJ1dHRvblR5cGUuTWVudTpcclxuICAgICAgICAgICAgICAgICAgICBidXR0LklubmVySFRNTCA9IFwiJiM5Nzc2O1wiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdXNlX0Rvd24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9uTWVudUNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ1dHQuT25Nb3VzZUVudGVyID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtICE9IG51bGwpIC8vICB8fCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBidXR0Lk9uRGJsQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYnV0dC5Pbk1vdXNlTW92ZSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyAgfHwgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ICE9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYoVHlwZSAhPSBGb3JtQnV0dG9uVHlwZS5DbG9zZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnV0dC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtICE9IG51bGwpIC8vIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTW91c2VfRG93biA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ1dHQuU3R5bGUuV2lkdGggPSBcIjY1cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ1dHQuU3R5bGUuSGVpZ2h0ID0gXCI0OXB4XCI7XHJcbiAgICAgICAgICAgICAgICBidXR0LlN0eWxlLkZvbnRTaXplID0gXCIxNnB0XCI7XHJcbiAgICAgICAgICAgICAgICBidXR0LlN0eWxlLkxpbmVIZWlnaHQgPSBcIjQ5cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ1dHQuRXhjaGFuZ2VDbGFzcyhcInByaW1hcnlcIiwgXCJwcmltYXJ5XCIpO1xyXG4gICAgICAgICAgICAgICAgYnV0dC5TdHlsZS5GaWx0ZXIgPSBcImJyaWdodG5lc3MoMTEwJSlcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJ1dHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIE9uTWVudUNsaWNrKClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRm9ybSgpIDogYmFzZShcImZvcm0tYmFzZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGVhZGluZyA9IERpdihcImZvcm0taGVhZGluZ1wiKTtcclxuXHJcbiAgICAgICAgICAgIEhlYWRpbmcuT25Db250ZXh0TWVudSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgSGVhZGluZ1RpdGxlID0gU3BhbihcImZvcm0taGVhZGluZy10aXRsZVwiKTtcclxuXHJcbiAgICAgICAgICAgIEJvZHkgPSBEaXYoXCJmb3JtLWJvZHlcIik7XHJcblxyXG4gICAgICAgICAgICBCb2R5Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGV2LlRhcmdldCA9PSBCb2R5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBCYWNrQ29sb3IgPSBcIiNGMEYwRjBcIjtcclxuXHJcbiAgICAgICAgICAgIEJvZHlPdmVyTGF5ID0gRGl2KFwiZm9ybS1ib2R5LW92ZXJsYXlcIik7XHJcblxyXG4gICAgICAgICAgICBCb2R5T3ZlckxheS5TdHlsZS5PcGFjaXR5ID0gU2hvd0JvZHlPdmVyTGF5ID8gXCIwLjVcIiA6IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgQ2hhbmdlSGVhZGluZ0J1dHRvbihGb3JtQnV0dG9uVHlwZS5DbG9zZSk7XHJcbiAgICAgICAgICAgIGlmKCFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2hhbmdlSGVhZGluZ0J1dHRvbihGb3JtQnV0dG9uVHlwZS5NYXhpbWl6ZSk7XHJcbiAgICAgICAgICAgICAgICBDaGFuZ2VIZWFkaW5nQnV0dG9uKEZvcm1CdXR0b25UeXBlLk1pbmltaXplKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmcuU3R5bGUuSGVpZ2h0ID0gXCI1MHB4XCI7XHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nVGl0bGUuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBCb2R5LlN0eWxlLlRvcCA9IFwiNTBweFwiO1xyXG4gICAgICAgICAgICAgICAgQm9keS5TdHlsZS5IZWlnaHQgPSBcImNhbGMoMTAwJSAtIDUwcHgpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuVG9wID0gXCI1MHB4XCI7XHJcbiAgICAgICAgICAgICAgICBCb2R5T3ZlckxheS5TdHlsZS5IZWlnaHQgPSBcImNhbGMoMTAwJSAtIDUwcHgpXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG5cclxuICAgICAgICAgICAgU2VsZiA9IGpRdWVyeS5TZWxlY3QoQ29udGVudCk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5FeHRlcm5hbE1vdXNlRXZlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1ldiA9IGV2LkFzPE1vdXNlRXZlbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgbWV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFJc0FjdGl2ZUZvcm1Db2xsZWN0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIE1vdXNlX0Rvd24gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgQWN0aXZlRm9ybSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgU2V0Qm9keU92ZXJMYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50UmVjID0gdGhpcy5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtb3VzZVBvcyA9IEhlbHBlci5HZXRDbGllbnRNb3VzZUxvY2F0aW9uKGV2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcmV2X3B4ID0gKGZsb2F0KWNsaWVudFJlYy5MZWZ0IC0gbW91c2VQb3MuWGY7XHJcbiAgICAgICAgICAgICAgICBwcmV2X3B5ID0gKGZsb2F0KWNsaWVudFJlYy5Ub3AgLSBtb3VzZVBvcy5ZZjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSAoZmxvYXQpY2xpZW50UmVjLldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IChmbG9hdCljbGllbnRSZWMuSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IFggPSBtb3VzZVBvcy5YZiAtIChmbG9hdCljbGllbnRSZWMuTGVmdDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IFkgPSBtb3VzZVBvcy5ZZiAtIChmbG9hdCljbGllbnRSZWMuVG9wO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk1vdmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NaW5pbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlV2luZG93U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihJbkRlc2lnbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihIZWFkaW5nVGl0bGUgIT0gbnVsbCAmJiBldi5UYXJnZXQgPT0gSGVhZGluZ1RpdGxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihBbGxvd1NpemVDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFggPD0gUmVzaXplQ29ybmVycyAmJiBZIDw9IFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Ob3J0aFdlc3RTb3V0aEVhc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uVG9wTGVmdFJlc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoWSA8PSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuTm9ydGhFYXN0U291dGhXZXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLlRvcFJpZ2h0UmVzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihZIDw9IFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Ob3J0aFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Ub3BSZXNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKFggPD0gUmVzaXplQ29ybmVycyAmJiBZID49IGhlaWdodCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Ob3J0aEVhc3RTb3V0aFdlc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uQm90dG9tTGVmdFJlc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoWSA+PSBoZWlnaHQgLSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuTm9ydGhXZXN0U291dGhFYXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLkJvdHRvbVJpZ2h0UmVzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihZID49IGhlaWdodCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Tb3V0aFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21SZXNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKFggPD0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLldlc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uTGVmdFJlc2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoWCA+PSB3aWR0aCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5FYXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLlJpZ2h0UmVzaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFBbGxvd01vdmVDaGFuZ2UgJiYgTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uTW92ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uTm9uZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgSGVhZGluZy5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5EYmxDbGljaywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQWxsb3dTaXplQ2hhbmdlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVdpbmRvd1N0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTGVhdmUsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBCb2R5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRW50ZXIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VNb3ZlLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihJbkV4dGVybmFsTW91c2VFdmVudClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZXYuVGFyZ2V0ID09IEhlYWRpbmdUaXRsZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgbWV2ID0gZXYuQXM8TW91c2VFdmVudD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBDb250ZW50LkNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IENvbnRlbnQuQ2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaW50IFggPSBtZXYuUGFnZVggLSBDb250ZW50Lk9mZnNldExlZnQ7XHJcbiAgICAgICAgICAgICAgICBpbnQgWSA9IG1ldi5QYWdlWSAtIENvbnRlbnQuT2Zmc2V0VG9wO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCAmJiBNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoSW5EZXNpZ24pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKEFsbG93U2l6ZUNoYW5nZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Ub3BMZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycyAmJiBZIDw9IFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoV2VzdFNvdXRoRWFzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uVG9wUmlnaHRSZXNpemUgfHwgWSA8PSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Ob3J0aEVhc3RTb3V0aFdlc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKFkgPD0gUmVzaXplQ29ybmVycyB8fCBNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Ub3BSZXNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoUmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21MZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycyAmJiBZID49IGhlaWdodCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoRWFzdFNvdXRoV2VzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uQm90dG9tUmlnaHRSZXNpemUgfHwgWSA+PSBoZWlnaHQgLSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5Ob3J0aFdlc3RTb3V0aEVhc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKE1vdmVBY3Rpb24gPT0gTW91c2VNb3ZlQWN0aW9uLkJvdHRvbVJlc2l6ZSB8fCBZID49IGhlaWdodCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLlNvdXRoUmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5MZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuV2VzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uUmlnaHRSZXNpemUgfHwgWCA+PSB3aWR0aCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkVhc3RSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBIZWFkaW5nLkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2V0Qm9keU92ZXJMYXkoKTtcclxuICAgICAgICAgICAgICAgIGlmKCFJc0FjdGl2ZUZvcm1Db2xsZWN0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBCb2R5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5FeHRlcm5hbE1vdXNlRXZlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYoIUlzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgQWN0aXZlRm9ybSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBCb2R5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTW92ZSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5FeHRlcm5hbE1vdXNlRXZlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighSXNBY3RpdmVGb3JtQ29sbGVjdGlvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIEJvZHlPdmVyTGF5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5EZXNpZ24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoIUlzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBCb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Db2xsYXBzZTtcclxuICAgICAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBCb2R5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTGVhdmUsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEluRGVzaWduKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0Qm9keU92ZXJMYXkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgQm9keU92ZXJMYXkuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VFbnRlciwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSW5EZXNpZ24pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSA9PSBudWxsICYmIElzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSkgLy8gV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ID09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoQ29udGVudClcclxuICAgICAgICAgICAgICAgIC5Dc3MoXCJ3aWR0aFwiLCBXaW5kb3dfRGVmYXVsdFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgLkNzcyhcImhlaWdodFwiLCBXaW5kb3dfRGVmYXVsdEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKEhlYWRpbmcpO1xyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKEJvZHkpO1xyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKEJvZHlPdmVyTGF5KTtcclxuXHJcbiAgICAgICAgICAgIEhlYWRpbmcuQXBwZW5kQ2hpbGQoSGVhZGluZ1RpdGxlKTtcclxuXHJcbiAgICAgICAgICAgIGNsb3NlQWN0aW9uID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5FbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgaWYoQ29udGVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuRGVsZXRlKCk7IENvbnRlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgSW5pdGlhbGlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBUaXRsZUJhckhlaWdodCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSGVhZGluZy5DbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFRpdGxlQmFyV2lkdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEhlYWRpbmcuQ2xpZW50V2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENsaWVudFgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvZHkuQ2xpZW50TGVmdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ2xpZW50WSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9keS5DbGllbnRUb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBIZWFkaW5nVGl0bGUuSW5uZXJIVE1MOyB9XHJcbiAgICAgICAgICAgIHNldCB7IEhlYWRpbmdUaXRsZS5Jbm5lckhUTUwgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBCYWNrQ29sb3JcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBCb2R5LlN0eWxlLkJhY2tncm91bmRDb2xvcjsgfVxyXG4gICAgICAgICAgICBzZXQgeyBCb2R5LlN0eWxlLkJhY2tncm91bmRDb2xvciA9IHZhbHVlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEZvcmVDb2xvclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEJvZHkuU3R5bGUuQ29sb3I7IH1cclxuICAgICAgICAgICAgc2V0IHsgQm9keS5TdHlsZS5Db2xvciA9IHZhbHVlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxEaWFsb2dSZXN1bHQ+IERpYWxvZ1Jlc3VsdHMgPSBuZXcgTGlzdDxEaWFsb2dSZXN1bHQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb3JtQ29sbGVjdGlvbiBHZXRGb3JtQ29sbGVjdGlvbkZyb21Gb3JtKEZvcm0gZm9ybSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGZvcm0uX3NlcGVyYXRlSW5zdGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2aXNpYmxlRm9ybXMgPSBzdGFuZEFsb25lRm9ybXMuVmlzaWJsZUZvcm1zO1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IHZpc2libGVGb3Jtcy5Db3VudDsgeCsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHZpc2libGVGb3Jtc1t4XSA9PSB0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRBbG9uZUZvcm1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IEZvcm1Db2xsZWN0aW9ucy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMgPT0gRm9ybUNvbGxlY3Rpb25zW2ldLkZvcm1Pd25lcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZvcm1Db2xsZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlzaWJsZUZvcm1zID0gRm9ybUNvbGxlY3Rpb25zW2ldLlZpc2libGVGb3JtcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgdmlzaWJsZUZvcm1zLkNvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2aXNpYmxlRm9ybXNbeF0gPT0gdGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGb3JtQ29sbGVjdGlvbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5fc2VwZXJhdGVJbnN0YW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldEZvcm1Db2xsZWN0aW9uRnJvbUZvcm0odGhpcykgPT0gc3RhbmRBbG9uZUZvcm1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldEZvcm1Db2xsZWN0aW9uRnJvbUZvcm0odGhpcykgPT0gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNWaXNpYmxlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRGb3JtQ29sbGVjdGlvbkZyb21Gb3JtKHRoaXMpICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93U3RhcnROZXdMZXZlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighSGFzU2V0dXApXHJcbiAgICAgICAgICAgICAgICBTZXR1cCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoSXNWaXNpYmxlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgT3Blbj8/P1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkludmFsaWQgcmVxdWVzdCB0byBvcGVuIGZvcm0gYXMgYSBkaWFsb2cgdGhhdCBpcyBhbHJlYWR5IHZpc2libGUhXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBGb3JtQ29sbGVjdGlvbnMuQWRkKG5ldyBGb3JtQ29sbGVjdGlvbih0aGlzKSk7XHJcbiAgICAgICAgICAgIFdpbmRvd0hvbGRlci5BcHBlbmRDaGlsZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIENhbGN1bGF0ZVpPcmRlcigpO1xyXG5cclxuICAgICAgICAgICAgaWYoU3RhcnRQb3NpdGlvbiA9PSBGb3JtU3RhcnRQb3NpdGlvbi5DZW50ZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENlbnRyZUZvcm0oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgT25TaG93ZWQoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgQm9keS5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNob3dEaWFsb2cocGFyYW1zIERpYWxvZ1Jlc3VsdFtdIGRpYWxvZ1Jlc3VsdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighSGFzU2V0dXApXHJcbiAgICAgICAgICAgICAgICBTZXR1cCgpO1xyXG5cclxuICAgICAgICAgICAgSW5EaWFsb2dSZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmKEJ1dHRvbk1pbmltaXplICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBCdXR0b25NaW5pbWl6ZS5EZWxldGUoKTtcclxuICAgICAgICAgICAgaWYoQnV0dG9uRXhwYW5kICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBCdXR0b25FeHBhbmQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGlmKEJ1dHRvbkNsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBCdXR0b25DbG9zZS5EZWxldGUoKTtcclxuXHJcbiAgICAgICAgICAgIF9Jc0RpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKFN0YXJ0UG9zaXRpb24gIT0gRm9ybVN0YXJ0UG9zaXRpb24uTWFudWFsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgU3RhcnRQb3NpdGlvbiA9IEZvcm1TdGFydFBvc2l0aW9uLkNlbnRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTaG93U3RhcnROZXdMZXZlbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoZGlhbG9nUmVzdWx0cyAhPSBudWxsICYmIGRpYWxvZ1Jlc3VsdHMuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRGlhbG9nUmVzdWx0cy5BZGRSYW5nZShkaWFsb2dSZXN1bHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBmbG9hdCBNaW5aZXJvKGZsb2F0IGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlucHV0IDwgMCA/IDAgOiBpbnB1dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IE1pblplcm8oaW50IGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlucHV0IDwgMCA/IDAgOiBpbnB1dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENlbnRyZUZvcm0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoV2luZG93SG9sZGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBTZWxmXHJcbiAgICAgICAgICAgIC5Dc3MoXCJsZWZ0XCIsIE1pblplcm8oKFdpbmRvd0hvbGRlci5DbGllbnRXaWR0aCAvIDIpIC0gKEdsb2JhbC5QYXJzZUludCh0aGlzLldpZHRoLlRvSHRtbFZhbHVlKCkpIC8gMikpKVxyXG4gICAgICAgICAgICAuQ3NzKFwidG9wXCIsIE1pblplcm8oKFdpbmRvd0hvbGRlci5DbGllbnRIZWlnaHQgLyAyKSAtIChHbG9iYWwuUGFyc2VJbnQodGhpcy5IZWlnaHQuVG9IdG1sVmFsdWUoKSkgLyAyKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFIYXNSZW5kZXJlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmFzZS5SZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIE9uU2hvd2luZygpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFNob3duKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNob3duKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEluQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYoQ2hpbGRyZW4gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENoaWxkcmVuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKENoaWxkcmVuW2ldICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICBDaGlsZHJlbltpXS5PbkxvYWRlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENoaWxkcmVuW2ldLk9uTG9hZGVkKENoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBDaGlsZHJlbi5SZW1vdmUobnVsbCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYm9vbCBfc2VwZXJhdGVJbnN0YW5jZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93KGJvb2wgc2VwZXJhdGVJbnN0YW5jZSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUhhc1NldHVwKVxyXG4gICAgICAgICAgICAgICAgU2V0dXAoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKF9Jc0RpYWxvZylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgX3NlcGVyYXRlSW5zdGFuY2UgPSBzZXBlcmF0ZUluc3RhbmNlO1xyXG4gICAgICAgICAgICBpZighc2VwZXJhdGVJbnN0YW5jZSAmJiAoRm9ybUNvbGxlY3Rpb25zID09IG51bGwgfHwgRm9ybUNvbGxlY3Rpb25zLkNvdW50ID09IDApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTaG93U3RhcnROZXdMZXZlbCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYWN0aXZlQ29sbGVjdCA9ICFzZXBlcmF0ZUluc3RhbmNlID8gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKSA6IHN0YW5kQWxvbmVGb3JtcztcclxuICAgICAgICAgICAgdmFyIHZpc2JpbGVGb3JtcyA9IGFjdGl2ZUNvbGxlY3QuVmlzaWJsZUZvcm1zO1xyXG5cclxuICAgICAgICAgICAgaWYoIXZpc2JpbGVGb3Jtcy5Db250YWlucyh0aGlzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmlzYmlsZUZvcm1zLkFkZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIFdpbmRvd0hvbGRlci5BcHBlbmRDaGlsZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlWk9yZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoU3RhcnRQb3NpdGlvbiAhPSBGb3JtU3RhcnRQb3NpdGlvbi5NYW51YWwgJiYgd2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihTdGFydFBvc2l0aW9uID09IEZvcm1TdGFydFBvc2l0aW9uLkNlbnRlciB8fCAoYWN0aXZlQ29sbGVjdCA9PSBudWxsIHx8IHZpc2JpbGVGb3JtcyA9PSBudWxsIHx8IHZpc2JpbGVGb3Jtcy5Db3VudCA9PSAwIHx8IHZpc2JpbGVGb3Jtc1t2aXNiaWxlRm9ybXMuQ291bnQgLSAxXS53aW5kb3dTdGF0ZSAhPSBXaW5kb3dTdGF0ZVR5cGUuTm9ybWFsIHx8IHZpc2JpbGVGb3Jtc1t2aXNiaWxlRm9ybXMuQ291bnQgLSAxXS5Db250ZW50ID09IG51bGwpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2VudHJlRm9ybSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKFN0YXJ0UG9zaXRpb24gPT0gRm9ybVN0YXJ0UG9zaXRpb24uV2luZG93c0RlZmF1bHRMb2NhdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB2aXNiaWxlRm9ybXNbdmlzYmlsZUZvcm1zLkNvdW50IC0gMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgeCA9IEdsb2JhbC5QYXJzZUludChvYmouTGVmdC5Ub0h0bWxWYWx1ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IHkgPSBHbG9iYWwuUGFyc2VJbnQob2JqLlRvcC5Ub0h0bWxWYWx1ZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEdsb2JhbC5Jc05hTih4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoR2xvYmFsLklzTmFOKHkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlYyA9IFdpbmRvd0hvbGRlci5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBwdzI1ID0gcmVjLldpZHRoICogMC4xNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHBoMjUgPSByZWMuSGVpZ2h0ICogMC4xNTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBwdzc1ID0gcmVjLldpZHRoICogMC41NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHBoNzUgPSByZWMuSGVpZ2h0ICogMC41NTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChpbnQpeCA8IHB3MjUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gKGludClwdzI1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigoaW50KXkgPCBwaDI1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IChpbnQpcGgyNTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChpbnQpeCA+IHB3NzUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gKGludClwdzI1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigoaW50KXkgPiBwaDc1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IChpbnQpcGgyNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IChpbnQpeCArIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gKGludCl5ICsgMTA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWxmLkNzcyhcImxlZnRcIiwgTWluWmVybygoaW50KXgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLkNzcyhcInRvcFwiLCBNaW5aZXJvKChpbnQpeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgT25TaG93ZWQoKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuRm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuQ2xpY2soKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSksIDApOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBCcmluZ1RvRnJvbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZUNvbGxlY3QgPSBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZihhY3RpdmVDb2xsZWN0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGFjdGl2ZUNvbGxlY3QuRm9ybU93bmVyID09IHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpc2libGVGb3JtcyA9IGFjdGl2ZUNvbGxlY3QuVmlzaWJsZUZvcm1zO1xyXG4gICAgICAgICAgICAgICAgaWYodmlzaWJsZUZvcm1zICE9IG51bGwgJiYgdmlzaWJsZUZvcm1zLkNvdW50ID4gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlRm9ybXMuUmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVGb3Jtcy5BZGQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlWk9yZGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFpJbmRleChyZWYgaW50IHpJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5TdHlsZS5aSW5kZXggPSAoekluZGV4KyspLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIENsZWFyWkluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKS5Gb3JtT3duZXI7XHJcbiAgICAgICAgICAgIFdpbmRvd0hvbGRlci5TdHlsZS5aSW5kZXggPSBcIi1cIiArIFdpbmRvd0hvbGRlci5DaGlsZEVsZW1lbnRDb3VudDtcclxuICAgICAgICAgICAgYm9vbCBGb3VuZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFdpbmRvd0hvbGRlci5DaGlsZEVsZW1lbnRDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihGb3VuZCB8fCB4LkNvbnRlbnQgPT0gV2luZG93SG9sZGVyLkNoaWxkcmVuW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFdpbmRvd0hvbGRlci5DaGlsZHJlbltpXS5TdHlsZS5aSW5kZXggPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBXaW5kb3dIb2xkZXIuQ2hpbGRyZW5baV0uU3R5bGUuWkluZGV4ID0gKGkgLSBXaW5kb3dIb2xkZXIuQ2hpbGRFbGVtZW50Q291bnQgLSAxKS5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIEFwcGx5WkluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpbmRvd0hvbGRlci5TdHlsZS5aSW5kZXggPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgV2luZG93SG9sZGVyLkNoaWxkRWxlbWVudENvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFdpbmRvd0hvbGRlci5DaGlsZHJlbltpXS5TdHlsZS5aSW5kZXggPSBpLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGludCBDYWxjdWxhdGVaT3JkZXIoRm9ybUNvbGxlY3Rpb24gZm9ybUNvbGxlY3Rpb24sIGludCB6SW5kZXgpIC8vICwgRG9jdW1lbnRGcmFnbWVudCBmcmFnXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PEZvcm0+IFRvcE1vc3RGb3JtcyA9IG5ldyBMaXN0PEZvcm0+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgVmlzaWJsZUZvcm1zID0gZm9ybUNvbGxlY3Rpb24uVmlzaWJsZUZvcm1zO1xyXG4gICAgICAgICAgICBpZihWaXNpYmxlRm9ybXMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFZpc2libGVGb3Jtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFZpc2libGVGb3Jtc1tpXS5Db250ZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUb0NsZWFuLkFkZChWaXNpYmxlRm9ybXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihWaXNpYmxlRm9ybXNbaV0uVG9wTW9zdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvcE1vc3RGb3Jtcy5BZGQoVmlzaWJsZUZvcm1zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgVG9DbGVhbi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFZpc2libGVGb3Jtcy5Db250YWlucyhUb0NsZWFuW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZpc2libGVGb3Jtcy5SZW1vdmUoVG9DbGVhbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRvQ2xlYW5baV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUb0NsZWFuLlJlbW92ZShudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihmb3JtQ29sbGVjdGlvbi5Gb3JtT3duZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtQ29sbGVjdGlvbi5Gb3JtT3duZXIuTWFuYWdlUGxhY2VIb2xkZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybUNvbGxlY3Rpb24uRm9ybU93bmVyLlN0eWxlLlpJbmRleCA9IHpJbmRleC5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZnJhZy5BcHBlbmRDaGlsZChmb3JtQ29sbGVjdGlvbi5Gb3JtT3duZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2lmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGlmKFZpc2libGVGb3Jtcy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgZm9ybUNvbGxlY3Rpb24uRm9ybU93bmVyLk1hbmFnZVBsYWNlSG9sZGVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBmcmFnLkFwcGVuZENoaWxkKGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIHJldHVybiB6SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lci5NYW5hZ2VQbGFjZUhvbGRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBmcmFnLkFwcGVuZENoaWxkKGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFRvcE1vc3RGb3Jtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtID0gVG9wTW9zdEZvcm1zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIFZpc2libGVGb3Jtcy5SZW1vdmUoZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zLkFkZChmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGludCBsZW5ndGggPSBWaXNpYmxlRm9ybXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVmlzaWJsZUZvcm1zW2ldICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zW2ldLkNvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZpc2libGVGb3Jtc1tpXS5NYW5hZ2VQbGFjZUhvbGRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zW2ldLlN0eWxlLlpJbmRleCA9IHpJbmRleC5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6SW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9mcmFnLkFwcGVuZENoaWxkKFZpc2libGVGb3Jtc1tpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgaWYobGVuZ3RoIC0gMSA9PSBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBWaXNpYmxlRm9ybXNbaV0uTWFuYWdlUGxhY2VIb2xkZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBmcmFnLkFwcGVuZENoaWxkKFZpc2libGVGb3Jtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICByZXR1cm4gekluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfWVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIFZpc2libGVGb3Jtc1tpXS5NYW5hZ2VQbGFjZUhvbGRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgZnJhZy5BcHBlbmRDaGlsZChWaXNpYmxlRm9ybXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB6SW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBNYW5hZ2VQbGFjZUhvbGRlcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIVNldHRpbmdzLlJlbW92ZUF0dHJpYnV0ZXNPZmZFbGVtZW50c1doZW5Mb3NlRm9jdXMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBib29sIHNob3VsZEhpZGVQbGFjZWhvbGRlcnMgPSBBY3RpdmVGb3JtICE9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZihzaG91bGRIaWRlUGxhY2Vob2xkZXJzICE9IEhhc1JlbW92ZWRQbGFjZUhvbGRlcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSGFzUmVtb3ZlZFBsYWNlSG9sZGVyID0gc2hvdWxkSGlkZVBsYWNlaG9sZGVycztcclxuICAgICAgICAgICAgICAgIHZhciBxdWUgPSBuZXcgUXVldWU8SFRNTEVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBxdWUuRW5xdWV1ZShCb2R5KTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZShxdWUuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gcXVlLkRlcXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihzaG91bGRIaWRlUGxhY2Vob2xkZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlbGVtZW50LkdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5SZW1vdmVBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuU2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiLCBhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGVsZW1lbnQuR2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoYSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuUmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuU2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGxlbmd0aCA9IGVsZW1lbnQuQ2hpbGRFbGVtZW50Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlLkVucXVldWUoZWxlbWVudC5DaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBDYWxjdWxhdGVaT3JkZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEZvcm1Db2xsZWN0aW9ucyA9PSBudWxsICYmIHN0YW5kQWxvbmVGb3Jtcy5WaXNpYmxlRm9ybXMuQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgRm9ybUNvbGxlY3Rpb25zLlJlbW92ZShudWxsKTtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gRm9ybUNvbGxlY3Rpb25zLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgekluZGV4ID0gMTtcclxuXHJcbiAgICAgICAgICAgIC8vdmFyIGZyYWcgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5TdHlsZS5PcGFjaXR5ID0gY291bnQgPT0gMCA/IFwiXCIgOiBjb3VudCA9PSAxID8gXCIwXCIgOiBcIjAuNFwiO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IGNvdW50OyB4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgICAgIC8vICAgIGlmKHggPT0gY291bnQgLSAxKVxyXG4gICAgICAgICAgICAgICAgLy8gICAge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGZyYWcuQXBwZW5kQ2hpbGQoRm9ybU92ZXJMYXkpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHpJbmRleCA9IENhbGN1bGF0ZVpPcmRlcihGb3JtQ29sbGVjdGlvbnNbeF0sIHpJbmRleCwgZnJhZyk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgIC8vZWxzZVxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgICAgIGlmKHggPT0gY291bnQgLSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZnJhZy5BcHBlbmRDaGlsZChGb3JtT3ZlckxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRm9ybU92ZXJMYXkuU3R5bGUuWkluZGV4ID0gekluZGV4LlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgekluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB6SW5kZXggPSBDYWxjdWxhdGVaT3JkZXIoRm9ybUNvbGxlY3Rpb25zW3hdLCB6SW5kZXgpOyAvLyBmcmFnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgekluZGV4ID0gQ2FsY3VsYXRlWk9yZGVyKHN0YW5kQWxvbmVGb3JtcywgekluZGV4KTsgLy8gZnJhZ1xyXG5cclxuICAgICAgICAgICAgLy9XaW5kb3dIb2xkZXIuRW1wdHkoKTtcclxuICAgICAgICAgICAgLy9XaW5kb3dIb2xkZXIuQXBwZW5kQ2hpbGQoZnJhZyk7XHJcblxyXG4gICAgICAgICAgICBpZihBY3RpdmVGb3JtICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFjdGl2ZUZvcm0uQm9keS5Gb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8Rm9ybT4gVG9DbGVhbiA9IG5ldyBMaXN0PEZvcm0+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb24gY2xvc2VBY3Rpb247XHJcbiAgICAgICAgcHJvdGVjdGVkIGJvb2wgSW5DbG9zZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbG9zZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihfSXNEaWFsb2cgJiYgSW5EaWFsb2dSZXN1bHQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBJbkNsb3NlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIE9uQ2xvc2luZygpO1xyXG5cclxuICAgICAgICAgICAgVG9DbGVhbi5BZGQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3duZXJGb3JtQ29sbGVjdGlvbiA9IEdldEZvcm1Db2xsZWN0aW9uRnJvbUZvcm0odGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZihvd25lckZvcm1Db2xsZWN0aW9uICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKG93bmVyRm9ybUNvbGxlY3Rpb24uRm9ybU93bmVyID09IHRoaXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3duZXJGb3JtQ29sbGVjdGlvbi5Gb3JtT3duZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBvd25lckZvcm1Db2xsZWN0aW9uLlZpc2libGVGb3Jtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob3duZXJGb3JtQ29sbGVjdGlvbi5WaXNpYmxlRm9ybXNbaV0gPT0gdGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lckZvcm1Db2xsZWN0aW9uLlZpc2libGVGb3Jtc1tpXS5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihGb3JtQ29sbGVjdGlvbnMuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZvcm1Db2xsZWN0aW9ucyA9IG5ldyBMaXN0PEZvcm1Db2xsZWN0aW9uPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lckZvcm1Db2xsZWN0aW9uLlZpc2libGVGb3Jtcy5SZW1vdmUodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKENvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIUZvclJldXNlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFNldHRpbmdzLkZvcm1GYWRlRHVyYXRpb24gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VsZi5GYWRlT3V0KFNldHRpbmdzLkZvcm1GYWRlRHVyYXRpb24sIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pY2xvc2VBY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUFjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDYWxjdWxhdGVaT3JkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIEFjdGl2ZUZvcm0gPSBfUHJldkFjdGl2ZUZvcm07XHJcbiAgICAgICAgICAgIGlmKF9Jc0RpYWxvZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5EaWFsb2dSZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYoRGlhbG9nUmVzdWx0ICE9IERpYWxvZ1Jlc3VsdEVudW0uTm9uZSAmJlxyXG4gICAgICAgICAgICAgICAgRGlhbG9nUmVzdWx0cyAhPSBudWxsICYmIERpYWxvZ1Jlc3VsdHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBEaWFsb2dSZXN1bHRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEaWFsb2dSZXN1bHRzW2ldLkludm9rZUlmUmVzdWx0KERpYWxvZ1Jlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihPbkZvcm1DbG9zZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE9uRm9ybUNsb3NlZCgpO1xyXG4gICAgICAgICAgICBPbkNsb3NlZCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoV2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTWluaW1pemVkRm9ybXMuUmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEluQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBJbkRpYWxvZ1Jlc3VsdCA9IGZhbHNlO1xyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDYWxjdWxhdG9yQ29udHJvbCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTWVtb0lucHV0IERpc3BsYXlJbnB1dDtcclxuXHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5DbG9zZTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkJhY2s7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5DRTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkM7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5QVEFYO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuTVRBWDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blRBWDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkRibDtcclxuXHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG43O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuODtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjk7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5EaXY7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5TcXJ0O1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjQ7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG41O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuNjtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bk11bDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blBlcjtcclxuXHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG4xO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuMjtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjM7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5NaW51cztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjFPdmVyWDtcclxuXHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG4wO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRucGx1c09yTmVnO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuRG90O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuUGx1cztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkVxO1xyXG5cclxuICAgICAgICBwdWJsaWMgZGVjaW1hbCBWYWx1ZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBMaXN0PHN0cmluZz4gX2NvbW1hbmRzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBBZGRUZXh0VG9Db21tYW5kKFNpbXBsZUJ1dHRvbiBidXR0b24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihidXR0b24uVGV4dCA9PSBcIi5cIiAmJiBjdXJyZW50X2NvbW1hbmQuQ29udGFpbnMoXCIuXCIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYoY3VycmVudF9jb21tYW5kID09IFwiMFwiKVxyXG4gICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCArPSBidXR0b24uVGV4dDtcclxuXHJcbiAgICAgICAgICAgIFJlZnJlc2hWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxkZWNpbWFsPiBPbkVxdWFsID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2FsY3VsYXRlQW5kQ2xvc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBDYWxjdWxhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKE9uRXF1YWwgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE9uRXF1YWwoeCk7XHJcbiAgICAgICAgICAgIGlmKCFEb250UmVmcmVzaClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoT25DbG9zZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbiBPbkNsb3NlO1xyXG5cclxuICAgICAgICBwdWJsaWMgZGVjaW1hbCBDYWxjdWxhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGVjaW1hbCBwcmV2aW91c1ZhbHVlID0gMDtcclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IF9jb21tYW5kcy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBfY29tbWFuZHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY29tbWFuZC5FbmRzV2l0aChcIiVcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9IGNvbW1hbmQuU3Vic3RyaW5nKDAsIGNvbW1hbmQuTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGVjaW1hbCB0cnlEZWM7XHJcbiAgICAgICAgICAgICAgICBpZihkZWNpbWFsLlRyeVBhcnNlKGNvbW1hbmQsIG91dCB0cnlEZWMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHByZXZpb3VzT3AgIT0gXCJcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9jb21tYW5kc1tpXS5FbmRzV2l0aChcIiVcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeURlYyA9IHByZXZpb3VzVmFsdWUgKiAodHJ5RGVjIC8gMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlEZWMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcmV2aW91c09wID09IFwiK1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZSArIHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCItXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlIC0gdHJ5RGVjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIi9cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWUgLyB0cnlEZWM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwiKlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZSAqIHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCIqXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlICogdHJ5RGVjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IGNvbW1hbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldmlvdXNPcCA9PSBcIitUQVhcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBIZWxwZXIuQWRkVGF4KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwiLVRBWFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IEhlbHBlci5EZWR1Y3RUYXgocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzT3AgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCJUQVhcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBIZWxwZXIuR2V0UG9ydGlvblRheChwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIkRibFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWUgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwic3FydFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSAoZGVjaW1hbClNYXRoLlNxcnQoKGRvdWJsZSlwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzT3AgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCIxL3hcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gMS4wbSAvIHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIisvLVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IC1wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmcmVzaFZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKERvbnRSZWZyZXNoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gX2NvbW1hbmRzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChfY29tbWFuZHNbaV0gKyBcIiBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoY3VycmVudF9jb21tYW5kKTtcclxuICAgICAgICAgICAgRGlzcGxheUlucHV0LlRleHQgPSBcIlwiO1xyXG4gICAgICAgICAgICBEaXNwbGF5SW5wdXQuVGV4dCA9IGJ1aWxkZXIuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWxsTnVtYmVycyhzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkZWNpbWFsIHg7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWNpbWFsLlRyeVBhcnNlKHZhbHVlLCBvdXQgeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQmFjayhTaW1wbGVCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY3VycmVudF9jb21tYW5kICE9IFwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IGN1cnJlbnRfY29tbWFuZC5TdWJzdHJpbmcoMCwgY3VycmVudF9jb21tYW5kLkxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2NvbW1hbmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxzdHJpbmc+KF9jb21tYW5kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoSXNBbGxOdW1iZXJzKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0geDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gY3VycmVudF9jb21tYW5kLlN1YnN0cmluZygwLCBjdXJyZW50X2NvbW1hbmQuTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcy5SZW1vdmVBdChfY29tbWFuZHMuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSZWZyZXNoVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU2luZ2xlT3BlcmF0b3Ioc3RyaW5nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHguQ29udGFpbnMoXCJUQVhcIikgfHwgeCA9PSBcIkRibFwiIHx8IHggPT0gXCIxL3hcIiB8fCB4ID09IFwiKy8tXCIgfHwgeCA9PSBcInNxcnRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBEb250UmVmcmVzaCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRPcGVyYXRvcihTaW1wbGVCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSXNTaW5nbGVPcGVyYXRvcihidXR0b24uVGV4dCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9jb21tYW5kcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8c3RyaW5nPihfY29tbWFuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFJc1NpbmdsZU9wZXJhdG9yKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudF9jb21tYW5kID09IFwiXCIgJiYgIUlzQWxsTnVtYmVycyh4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRfY29tbWFuZCAhPSBcIlwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcy5BZGQoY3VycmVudF9jb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NvbW1hbmQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9jb21tYW5kcy5BZGQoYnV0dG9uLlRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlZnJlc2hWYWx1ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoY3VycmVudF9jb21tYW5kID09IFwiXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLlRleHQgPT0gXCI9XCIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYWxjdWxhdGVBbmRDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9jb21tYW5kcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PHN0cmluZz4oX2NvbW1hbmRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFJc1NpbmdsZU9wZXJhdG9yKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihidXR0b24uVGV4dCA9PSBcIiVcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihfY29tbWFuZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8c3RyaW5nPihfY29tbWFuZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIUlzU2luZ2xlT3BlcmF0b3IoeCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCArPSBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcy5BZGQoY3VycmVudF9jb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbW1hbmRzLkFkZChjdXJyZW50X2NvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJ1dHRvbi5UZXh0ID09IFwiPVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FsY3VsYXRlQW5kQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbW1hbmRzLkFkZChidXR0b24uVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgUmVmcmVzaFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBDYWxjdWxhdG9yQ29udHJvbChkZWNpbWFsIHN0YXJ0aW5nVmFsdWUsIGJvb2wgQ2xvc2VCdXR0b25WaXNpYmxlID0gZmFsc2UpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWYWx1ZSA9IHN0YXJ0aW5nVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50X2NvbW1hbmQgPSBWYWx1ZS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRvYyA9IERvY3VtZW50LkNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIGludCBBZGRIZWlnaHQgPSAoSGVscGVyLk5vdERlc2t0b3AgPyA0NSA6IDIyKTtcclxuXHJcbiAgICAgICAgICAgIC8vMjcuNzc3NzhcclxuXHJcbiAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZChcclxuICAgICAgICAgICAgICAgIChEaXNwbGF5SW5wdXQgPSBuZXcgTWVtb0lucHV0KClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZWFkb25seSA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoNCwgNCwgXCIoMTAwJSAtIDhweClcIiwgQWRkSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgfSkuQ29udGVudFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5SW5wdXQuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIERpc3BsYXlJbnB1dC5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTGlzdDxTaW1wbGVCdXR0b24+IGJ1dHRvbnMgPSBuZXcgTGlzdDxTaW1wbGVCdXR0b24+KCk7XHJcblxyXG4gICAgICAgICAgICBidXR0b25zLkFkZFJhbmdlKFxyXG4gICAgICAgICAgICAgICAgbmV3IFNpbXBsZUJ1dHRvbltdIHtcclxuICAgICAgICAgICAgICAgIGJ0blBUQVggPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIrVEFYXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG43ID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiN1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZFRleHRUb0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG44ID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiOFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZFRleHRUb0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG45ID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiOVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZFRleHRUb0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5EaXYgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5TcXJ0ID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwic3FydFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuTVRBWCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIi1UQVhcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjQgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjUgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjYgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI2XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bk11bCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIipcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blBlciA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blRBWCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIlRBWFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjFcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMiA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjJcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMyA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjNcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuTWludXMgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCItXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG4xT3ZlclggPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIxL3hcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bkRibCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIkRibFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjBcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRucGx1c09yTmVnID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiKy8tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5Eb3QgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blBsdXMgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5FcSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIj1cIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGludCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGludCB5ID0gMDtcclxuICAgICAgICAgICAgaW50IHlPZmZzZXQgPSAyOCArIEFkZEhlaWdodDtcclxuICAgICAgICAgICAgYnRuQ2xvc2UgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiJnRpbWVzO1wiLFxyXG4gICAgICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKCgxMDAlIC0gMjhweCkgKiAwLjE2NjY2NjY2NjY2NjY2NjcpXCIsIFwiKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiAwLjIpXCIpLFxyXG4gICAgICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigoKDEwMCUgLSAyOHB4KSAqIFwiICsgKDUgKiAwLjE2NjY2NjY2NjY2NjY2NjdtKSArIFwiKSArIFwiICsgKCg1ICogNCkgKyA0KSArIFwicHgpXCIsIFwiKCgoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogXCIgKyAoeSAqIDAuMm0pICsgXCIpICsgXCIgKyAoKCh5ICogNCkgKyA4KSArIEFkZEhlaWdodCkgKyBcInB4KVwiKSxcclxuICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE9uQ2xvc2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250U2l6ZSA9IFwiMjZweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuRm9udFdlaWdodCA9IFwiYm9sZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ0bkJhY2sgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiQmFja1wiLFxyXG4gICAgICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKCgoMTAwJSAtIDI0cHgpIC0gKCgxMDAlIC0gMjhweCkgKiAwLjE2NjY2NjY2NjY2NjY2NjcpKSAqIDAuMzMzKVwiLCBcIigoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogMC4yKVwiKSxcclxuICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgoKDEwMCUgLSAyNHB4KSAtICgoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KSkgKiAwLjMzMykgKiAwKSArIDRweClcIiwgXCIoKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiBcIiArICh5ICogMC4ybSkgKyBcIikgKyBcIiArICgoKHkgKiA0KSArIDgpICsgQWRkSGVpZ2h0KSArIFwicHgpXCIpLFxyXG4gICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQmFja1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIGJ0bkJhY2suU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgYnRuQ0UgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiQ0VcIixcclxuICAgICAgICAgICAgICAgIFNpemUgPSBuZXcgVmVjdG9yMihcIigoKDEwMCUgLSAyNHB4KSAtICgoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KSkgKiAwLjMzMylcIiwgXCIoKDEwMCUgLSBcIiArIHlPZmZzZXQgKyBcInB4KSAqIDAuMilcIiksXHJcbiAgICAgICAgICAgICAgICBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKCgoKCgxMDAlIC0gMjRweCkgLSAoKDEwMCUgLSAyOHB4KSAqIDAuMTY2NjY2NjY2NjY2NjY2NykpICogMC4zMzMpICogMSkgKyA4cHgpXCIsIFwiKCgoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogXCIgKyAoeSAqIDAuMm0pICsgXCIpICsgXCIgKyAoKCh5ICogNCkgKyA4KSArIEFkZEhlaWdodCkgKyBcInB4KVwiKSxcclxuICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NvbW1hbmQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlZnJlc2hWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIGJ0bkNFLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgIGJ0bkMgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiQ1wiLFxyXG4gICAgICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKCgoKDEwMCUgLSAyNHB4KSAtICgoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KSkgKiAwLjMzMykgKyA0cHgpXCIsIFwiKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiAwLjIpXCIpLFxyXG4gICAgICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigoKCgoMTAwJSAtIDI0cHgpIC0gKCgxMDAlIC0gMjhweCkgKiAwLjE2NjY2NjY2NjY2NjY2NjcpKSAqIDAuMzMzKSAqIDIpICsgMTJweClcIiwgXCIoKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiBcIiArICh5ICogMC4ybSkgKyBcIikgKyBcIiArICgoKHkgKiA0KSArIDgpICsgQWRkSGVpZ2h0KSArIFwicHgpXCIpLFxyXG4gICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcyA9IG5ldyBMaXN0PHN0cmluZz4oKTsgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBSZWZyZXNoVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICBidG5DLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcblxyXG4gICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGRyZW4oYnRuQ2xvc2UuQ29udGVudCwgYnRuQmFjay5Db250ZW50LCBidG5DRS5Db250ZW50LCBidG5DLkNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgeSsrO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGJ1dHRvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uc1tpXS5TaXplID0gbmV3IFZlY3RvcjIoXCIoKDEwMCUgLSAyOHB4KSAqIDAuMTY2NjY2NjY2NjY2NjY2NylcIiwgXCIoKDEwMCUgLSBcIiArIHlPZmZzZXQgKyBcInB4KSAqIDAuMilcIik7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zW2ldLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgxMDAlIC0gMjhweCkgKiBcIiArIChpbmRleCAqIDAuMTY2NjY2NjY2NjY2NjY2N20pICsgXCIpICsgXCIgKyAoKGluZGV4ICogNCkgKyA0KSArIFwicHgpXCIsIFwiKCgoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogXCIgKyAoeSAqIDAuMm0pICsgXCIpICsgXCIgKyAoKCh5ICogNCkgKyA4KSArIEFkZEhlaWdodCkgKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNbaV0uU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGQoYnV0dG9uc1tpXS5Db250ZW50KTtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PSA2KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB5Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ0bkRibC5TdHlsZS5Gb250U2l6ZSA9IFwiNi41cHRcIjtcclxuICAgICAgICAgICAgYnRuVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG4gICAgICAgICAgICBidG5QVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG4gICAgICAgICAgICBidG5NVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG5cclxuICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuQ29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcblxyXG4gICAgICAgICAgICBpZighQ2xvc2VCdXR0b25WaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlZnJlc2hWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChkb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENoZWNrRWRpdCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0IEVkaXQ7XHJcbiAgICAgICAgcHVibGljIEhUTUxTcGFuRWxlbWVudCBzcGFuO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDaGVja2VkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRWRpdC5UZXh0LklzVHJ1ZSgpID09IDE7IH1cclxuICAgICAgICAgICAgc2V0IHsgRWRpdC5UZXh0ID0gdmFsdWUuVG9TdHJpbmcoKTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENoZWNrRWRpdChzdHJpbmcgbGFiZWwgPSBcIlwiKSA6IGJhc2UobmV3IEhUTUxMYWJlbEVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IEJhc2VDbGFzcyhmYWxzZSwgdHJ1ZSkgfSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVkaXQgPSBuZXcgVGV4dElucHV0KElucHV0VHlwZS5DaGVja2JveCk7XHJcbiAgICAgICAgICAgIEVkaXQuQ29udHJvbGxlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNwYW4gPSBuZXcgSFRNTFNwYW5FbGVtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBUZXh0ID0gbGFiZWw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuQXBwZW5kQ2hpbGRyZW4oRWRpdCwgc3Bhbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIFRleHRJbnB1dChDaGVja0VkaXQgY2hlY2tFZGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrRWRpdC5FZGl0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUZXh0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gc3Bhbi5Jbm5lckhUTUw7IH1cclxuICAgICAgICAgICAgc2V0IHsgc3Bhbi5Jbm5lckhUTUwgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRleHRJbnB1dCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIHN0cmluZyBwcmV2VGV4dCA9IFwiXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248VGV4dElucHV0PiBPblRleHRDaGFuZ2VkID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFRleHRJbnB1dCwgS2V5Ym9hcmRFdmVudD4gT25LZXlEb3duID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFRleHRJbnB1dCwgS2V5Ym9hcmRFdmVudD4gT25LZXlVcCA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxUZXh0SW5wdXQsIEtleWJvYXJkRXZlbnQ+IE9uS2V5UHJlc3MgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248VGV4dElucHV0PiBPbkdvdEZvY3VzID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFRleHRJbnB1dD4gT25Mb3N0Rm9jdXMgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248VGV4dElucHV0PiBPblZhbGlkYXRlRGF0YSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgVmFsaWRhdGVEYXRhKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMgaXMgVGV4dElucHV0RHJvcERvd24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5BczxUZXh0SW5wdXREcm9wRG93bj4oKTtcclxuICAgICAgICAgICAgICAgIGlmKGMuVXNlZEVkaXQgIT0gbnVsbCAmJiBjLk9uVmFsaWRhdGVEYXRhICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgYy5PblZhbGlkYXRlRGF0YShjLlVzZWRFZGl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihPblZhbGlkYXRlRGF0YSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgT25WYWxpZGF0ZURhdGEodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1N1Ym1pdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgR29OZXh0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgT25Gb2N1c0RvbnRTZWxlY3RBbGwgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RyaW5nIF9kaXNwbGF5Rm9ybWF0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBTZXREaXNwbGF5Rm9ybWF0KHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9kaXNwbGF5Rm9ybWF0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGZvcm1hdFRleHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHN0cmluZyBHZXREaXNwbGF5Rm9ybWF0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfZGlzcGxheUZvcm1hdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRGlzcGxheUZvcm1hdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9kaXNwbGF5Rm9ybWF0OyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXREaXNwbGF5Rm9ybWF0KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgQ29udHJvbGxlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBJbnB1dFR5cGUgVHlwZTtcclxuICAgICAgICBwdWJsaWMgYm9vbCBEaXNhYmxlRm9jdXNQb3B1cDtcclxuICAgICAgICBwcml2YXRlIGJvb2wgSXNPdmVycmlkZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0VmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuSW5uZXJIVE1MO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBTZXRWYWx1ZShzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb250ZW50LklubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0RGF0ZVRpbWUoRGF0ZVRpbWUgZGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNldERhdGUoc3RyaW5nLkZvcm1hdChcInswOlwiICsgR2V0RGlzcGxheUZvcm1hdCgpICsgXCJ9XCIsIGRhdGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQoSFRNTEVsZW1lbnQgb3ZlcnJpZGVFbGVtZW50LCBib29sIGFkZElucHV0Q29udHJvbCA9IHRydWUsIGJvb2wgYWRkRXZlbnRzT25Db250cm9sID0gdHJ1ZSkgOiBiYXNlKG92ZXJyaWRlRWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG92ZXJyaWRlRWxlbWVudC5DbGFzc05hbWUgPSAoYWRkSW5wdXRDb250cm9sID8gXCJpbnB1dGNvbnRyb2xcIiA6IFwiXCIpICsgQmFzZUNsYXNzKGFkZElucHV0Q29udHJvbCk7XHJcbiAgICAgICAgICAgIElzT3ZlcnJpZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZihhZGRFdmVudHNPbkNvbnRyb2wpXHJcbiAgICAgICAgICAgICAgICBhZGRFdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Gb2N1cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgSFRNTElucHV0RWxlbWVudCBHZXRJbnB1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihDb250ZW50LklzPEhUTUxJbnB1dEVsZW1lbnQ+KCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVjaW1hbCBHZXROdW1iZXJWYWx1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkZWNpbWFsIHZhbHVlID0gVGV4dC5TdHJpcE5vbk51bWJlclN0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldEVkaXRWYWx1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzIGlzIFNlYXJjaElucHV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoKFNlYXJjaElucHV0KXRoaXMpLkVkaXRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVjaW1hbCB2YWx1ZSA9IFRleHQuU3RyaXBOb25OdW1iZXJTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKFR5cGUgPT0gSW5wdXRUeXBlLkRhdGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgZGF0ZSA9IEdldERhdGVUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNjcm9sbChpbnQgdmFsdWUsIEhUTUxFbGVtZW50IHBhcmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHBhcmVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBwYXJlbnQuU2Nyb2xsVG9wID0gdmFsdWU7XHJcbiAgICAgICAgICAgIC8vR2xvYmFsLlNldFRpbWVvdXQoKCkgPT5cclxuICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgIC8vICAgIGlmKHRoaXMuQ29udGVudC5QYXJlbnRFbGVtZW50ID09IG51bGwgfHwgdGhpcy5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyAgICB0aGlzLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50LlNjcm9sbFRvcCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAvL30sIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBHZXREaXNwbGF5VmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShEaXNwbGF5Rm9ybWF0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVjaW1hbCB2YWx1ZSA9IFRleHQuU3RyaXBOb25OdW1iZXJTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihEaXNwbGF5Rm9ybWF0LlRvTG93ZXIoKS5TdGFydHNXaXRoKFwiY1wiKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgd2FzTmVnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FzTmVnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gLXZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHdhc05lZyA/IFwiLVwiIDogXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nLkZvcm1hdChcIiR7MDpcIiArIERpc3BsYXlGb3JtYXQuUmVwbGFjZShcImNcIiwgXCJuXCIpLlJlcGxhY2UoXCJDXCIsIFwiTlwiKSArIFwifVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoRGlzcGxheUZvcm1hdC5Ub0xvd2VyKCkuU3RhcnRzV2l0aChcInBcIikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCB2YWx1ZSA9PSAwID8gMCA6IHZhbHVlIC8gMTAwLjBtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MDpcIiArIERpc3BsYXlGb3JtYXQgKyBcIn1cIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoVHlwZSA9PSBJbnB1dFR5cGUuRGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEYXRlVGltZSB2YWx1ZSA9IFRleHQuU3RyaXBOb25EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUgPT0gRGF0ZVRpbWUuTWluVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MDpcIiArIERpc3BsYXlGb3JtYXQgKyBcIn1cIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCBUZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIGZvcm1hdFRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgaWYoaW5wdXQgIT0gbnVsbCAmJiBpbnB1dCAhPSBEb2N1bWVudC5BY3RpdmVFbGVtZW50KSAvLyBJcyBBY3RpdmVcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoRGlzcGxheUZvcm1hdCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuVHlwZSA9IElucHV0VHlwZS5UZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZyBuZXdUZXh0ID0gR2V0RGlzcGxheVZhbHVlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld1RleHQgIT0gVGV4dClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSBuZXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgUHJlWkluZGV4O1xyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgYWRkRXZlbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFJc092ZXJyaWRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBHZXRJbnB1dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoaW5wdXQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShEaXNwbGF5Rm9ybWF0KSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFR5cGUgPT0gSW5wdXRUeXBlLlBhc3N3b3JkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5UeXBlID0gSW5wdXRUeXBlLlRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25CbHVyID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlpJbmRleCA9IFByZVpJbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JtYXRUZXh0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoT25Mb3N0Rm9jdXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbkxvc3RGb2N1cyh0aGlzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uRm9jdXMgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFByZVpJbmRleCA9IENvbnRlbnQuU3R5bGUuWkluZGV4O1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5aSW5kZXggPSBcIjEwMDAwXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgT25Gb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgICAgIGlmKGlucHV0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoRGlzcGxheUZvcm1hdCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSBUZXh0LlN0cmlwTm9uTnVtYmVyU3RyaW5nKCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIwLjAwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFIZWxwZXIuSXNGaXJlRm94KCkgJiYgIVJlYWRvbmx5ICYmIFR5cGUgIT0gSW5wdXRUeXBlLkRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LlR5cGUgPSBUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKFR5cGUgIT0gSW5wdXRUeXBlLkNoZWNrYm94ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3MuT25Gb2N1c1NlbGVjdEFsbCAmJiAhT25Gb2N1c0RvbnRTZWxlY3RBbGwpIC8vICYmIEhlbHBlci5Jc0ZpcmVGb3goKSAmJiBCcm93c2VyLklzSUVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuU2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoT25Hb3RGb2N1cyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uR290Rm9jdXModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIURpc2FibGVGb2N1c1BvcHVwICYmICFSZWFkb25seSAmJiBFbmFibGVkICYmIEhlbHBlci5Ob3REZXNrdG9wICYmICEodGhpcyBpcyBUZXh0SW5wdXREcm9wRG93bikgJiYgQ29udHJvbGxlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFTZXR0aW5ncy5EaXNhYmxlVGV4dFBvcHVwRWRpdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dEZvcm0odGhpcykuU2hvd1BvcHVwKG5ldyBWZWN0b3IyKDAsIDApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uQ2hhbmdlID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDaGVja1RleHRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5PbkNvbnRleHRNZW51ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uS2V5UHJlc3MgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoZWNrVGV4dENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIGlmKE9uS2V5UHJlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbktleVByZXNzKHRoaXMsIGV2KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uS2V5RG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2hlY2tUZXh0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoT25LZXlEb3duICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgT25LZXlEb3duKHRoaXMsIGV2KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uS2V5VXAgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoZWNrVGV4dENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIGlmKE9uS2V5VXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbktleVVwKHRoaXMsIGV2KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlBhc3RlLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDaGVja1RleHRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkN1dCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2hlY2tUZXh0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElucHV0VHlwZSBGaXhJbnB1dChJbnB1dFR5cGUgdHlwZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHR5cGUgPT0gSW5wdXRUeXBlLkRhdGUgfHwgKEhlbHBlci5Jc0ZpcmVGb3goKSAmJiB0eXBlICE9IElucHV0VHlwZS5QYXNzd29yZCAmJiB0eXBlICE9IElucHV0VHlwZS5DaGVja2JveCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBJbnB1dFR5cGUuVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0KElucHV0VHlwZSB0eXBlID0gSW5wdXRUeXBlLlRleHQsIGJvb2wgYWMgPSB0cnVlKSA6IGJhc2UoXCJpbnB1dGNvbnRyb2xcIiwgRml4SW5wdXQodHlwZSksIGFjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVHlwZSA9IHR5cGU7XHJcblxyXG4gICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVGV4dEFsaWduID0gVGV4dEFsaWduLlJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5UZXh0SW5kZW50ID0gXCIzcHhcIjtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuUGFkZGluZ1JpZ2h0ID0gXCIzcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5Rm9ybWF0ID0gXCJuMlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoVHlwZSA9PSBJbnB1dFR5cGUuRGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9IG5ldyBzdHJpbmdbM107XHJcbiAgICAgICAgICAgICAgICBzdHJbKGludClTZXR0aW5ncy5EYXlQb3NpdGlvbl0gPSBcImRkXCI7XHJcbiAgICAgICAgICAgICAgICBzdHJbKGludClTZXR0aW5ncy5Nb250aFBvc2l0aW9uXSA9IFwiTU1cIjtcclxuICAgICAgICAgICAgICAgIHN0clsoaW50KVNldHRpbmdzLlllYXJQb3NpdGlvbl0gPSBcInl5eXlcIjtcclxuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgMzsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHN0cltpXSArIFNldHRpbmdzLkRhdGVTZXBlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5MZW5ndGgtLTtcclxuICAgICAgICAgICAgICAgIERpc3BsYXlGb3JtYXQgPSBidWlsZGVyLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFkZEV2ZW50cygpO1xyXG5cclxuICAgICAgICAgICAgZm9ybWF0VGV4dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIENoZWNrVGV4dENoYW5nZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoVGV4dCAhPSBwcmV2VGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoT25UZXh0Q2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uVGV4dENoYW5nZWQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dCA9IFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlbmRlcigpO1xyXG4gICAgICAgICAgICBwcmV2VGV4dCA9IFRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihJc092ZXJyaWRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFR5cGUgPT0gSW5wdXRUeXBlLkNoZWNrYm94KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpLkNoZWNrZWQuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSXNPdmVycmlkZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVHlwZSA9PSBJbnB1dFR5cGUuQ2hlY2tib3gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLlRvTG93ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCkuQ2hlY2tlZCA9IHZhbHVlLklzVHJ1ZSgpID09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpLlZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgQ2hlY2tUZXh0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXREYXRlKHN0cmluZyBkYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGF0ZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZCA9IGRhdGUuU3RyaXBOb25EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZihkZCA9PSBEYXRlVGltZS5NaW5WYWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCBkZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBHZXREYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKFRleHQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGQgPSBUZXh0LlN0cmlwTm9uRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGQgPT0gRGF0ZVRpbWUuTWluVmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MDpcIiArIERpc3BsYXlGb3JtYXQgKyBcIn1cIiwgZGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBHZXREYXRlVGltZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVGV4dC5TdHJpcE5vbkRhdGVTdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzTnVtZXJpY1R5cGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFR5cGUgPT0gSW5wdXRUeXBlLk51bWJlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRGF0ZVR5cGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFR5cGUgPT0gSW5wdXRUeXBlLkRhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVuYWJsZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBlbmFibGVkOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZihlbmFibGVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5SZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfcmVhZG9ubHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVhZG9ubHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfcmVhZG9ubHk7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9yZWFkb25seSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYoX3JlYWRvbmx5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCAoX3JlYWRvbmx5KS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuUmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERhdGVDb250cm9sIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuVG9wO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuU2VsZWN0ZWRSYW5nZTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blRvZGF5O1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkxlZnQ7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5SaWdodDtcclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgQ29udGVudFJhbmdlO1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBTZWxlY3RlZFllYXI7XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgU2VsZWN0ZWRNb250aDtcclxuICAgICAgICBwcml2YXRlIGludCBTZWxlY3RlZERheTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBEaXNwbGF5TW9kZSBfYWN0aXZlRGlzcGxheU1vZGUgPSBEaXNwbGF5TW9kZS5EYXk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEaXNwbGF5TW9kZSBBY3RpdmVEaXNwbGF5TW9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9hY3RpdmVEaXNwbGF5TW9kZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2FjdGl2ZURpc3BsYXlNb2RlICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hY3RpdmVEaXNwbGF5TW9kZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlZnJlc2hWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBHZXRWaWV3RGF0ZVRpbWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShTZWxlY3RlZFllYXIsIFNlbGVjdGVkTW9udGgsIFNlbGVjdGVkRGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFZpZXdEYXRlVGltZShEYXRlVGltZSBkYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG5ld1NlbGVjdGVkWWVhciA9IGRhdGUuWWVhcjtcclxuICAgICAgICAgICAgdmFyIG5ld1NlbGVjdGVkTW9udGggPSBkYXRlLk1vbnRoO1xyXG4gICAgICAgICAgICB2YXIgbmV3U2VsZWN0ZWREYXkgPSBkYXRlLkRheTtcclxuXHJcbiAgICAgICAgICAgIGlmKG5ld1NlbGVjdGVkWWVhciAhPSBTZWxlY3RlZFllYXIgfHxcclxuICAgICAgICAgICAgICAgIG5ld1NlbGVjdGVkTW9udGggIT0gU2VsZWN0ZWRNb250aCB8fFxyXG4gICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWREYXkgIT0gU2VsZWN0ZWREYXkgfHwgZGF0ZSA9PSBEYXRlVGltZS5Ub2RheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRZZWFyID0gbmV3U2VsZWN0ZWRZZWFyO1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRNb250aCA9IG5ld1NlbGVjdGVkTW9udGg7XHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZERheSA9IG5ld1NlbGVjdGVkRGF5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE9uRGF0ZUNoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbkRhdGVDaGFuZ2VkKGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlZnJlc2hWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248RGF0ZVRpbWU+IE9uRGF0ZUNoYW5nZWQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0cmluZ1tdIERheXMgPSBuZXcgc3RyaW5nW10ge1xyXG4gICAgICAgICAgICBcIk1PXCIsXHJcbiAgICAgICAgICAgIFwiVFVcIixcclxuICAgICAgICAgICAgXCJXRVwiLFxyXG4gICAgICAgICAgICBcIlRIXCIsXHJcbiAgICAgICAgICAgIFwiRlJcIixcclxuICAgICAgICAgICAgXCJTQVwiLFxyXG4gICAgICAgICAgICBcIlNVXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWZyZXNoVmlldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IEdldFZpZXdEYXRlVGltZSgpO1xyXG4gICAgICAgICAgICBidG5Ub3AuVGV4dCA9IGRhdGUuVG9TdHJpbmcoXCJkZGQsIGRkIE1NTSB5eXl5XCIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRvYyA9IERvY3VtZW50LkNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaChfYWN0aXZlRGlzcGxheU1vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGlzcGxheU1vZGUuRGF5OlxyXG4gICAgICAgICAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuVGV4dCA9IGRhdGUuVG9TdHJpbmcoXCJNTU0geXl5eVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgc3RhcnREYXRlID0gbmV3IERhdGVUaW1lKGRhdGUuWWVhciwgZGF0ZS5Nb250aCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgZW5kRGF0ZSA9IHN0YXJ0RGF0ZS5BZGRNb250aHMoMSkuQWRkRGF5cygtMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGludCBUb3RhbERheXMgPSAoZW5kRGF0ZSAtIHN0YXJ0RGF0ZSkuRGF5cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0RGF5SW5kZXggPSAoc3RhcnREYXRlLkRheU9mV2VlayA9PSBEYXlPZldlZWsuU3VuZGF5ID8gNyA6IChpbnQpc3RhcnREYXRlLkRheU9mV2VlaykgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBvZmZzZXRTdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHJvdyA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIERhdGVUaW1lIHN0YXJ0T3V0c2lkZSA9IHN0YXJ0RGF5SW5kZXggPT0gMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSA6IHN0YXJ0RGF0ZS5BZGREYXlzKC1zdGFydERheUluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZERheUluZGV4ID0gKGVuZERhdGUuRGF5T2ZXZWVrID09IERheU9mV2Vlay5TdW5kYXkgPyA3IDogKGludCllbmREYXRlLkRheU9mV2VlaykgLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgNDI7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGVUaW1lIGN1ckRhdGUgPSBzdGFydE91dHNpZGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnRuID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSBjdXJEYXRlLkRheS5Ub1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoXCIoMTAwJSAqIFwiICsgKG9mZnNldFN0YXJ0ICogMC4xNDI4KSArIFwiKVwiLCBcIigoKDEwMCUgLSBcIiArIChIZWxwZXIuTm90RGVza3RvcCA/IDI5IDogMTYpICsgXCJweCkgKiBcIiArICgocm93IC0gMSkgKiAwLjE2NjYpICsgXCIpICsgXCIgKyAoSGVscGVyLk5vdERlc2t0b3AgPyAyOSA6IDE2KSArIFwicHgpXCIsIFwiKDEwMCUgKiAwLjE0MjgpXCIsIFwiKCgxMDAlIC0gXCIgKyAoSGVscGVyLk5vdERlc2t0b3AgPyAyOSA6IDE2KSArIFwicHgpICogXCIgKyAwLjE2NjYgKyBcIilcIiksIC8vICBvZmZzZXRTdGFydCAqIDMwLCAgKDIyICogcm93KSAtIDYsIDMwLCAyMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEdldFZpZXdEYXRlVGltZSgpID09IGN1ckRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihPblJlcXVlc3RUb0Nsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPblJlcXVlc3RUb0Nsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpZXdEYXRlVGltZShjdXJEYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlN0eWxlLkZvbnRXZWlnaHQgPSBcImJvbGRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJEYXRlID09IGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5DbGFzc0xpc3QuQWRkKFwic2ltcGxlYnV0dG9uLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uU3R5bGUuQm9yZGVyQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJEYXRlIDwgc3RhcnREYXRlIHx8IGN1ckRhdGUgPiBlbmREYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2J0bi5TdHlsZS5Db2xvciA9IFwicmdiKDIxMSwgMjExLCAyMTEpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjdXJEYXRlLkRheU9mV2VlayA9PSBEYXlPZldlZWsuU2F0dXJkYXkgfHwgY3VyRGF0ZS5EYXlPZldlZWsgPT0gRGF5T2ZXZWVrLlN1bmRheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlN0eWxlLkNvbG9yID0gXCJyZ2IoMTkxLCAxMSwgMTEpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLkNvbnRlbnQuT25LZXlEb3duID0gQmxvY2tUYWJFdmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZChidG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U3RhcnQrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9mZnNldFN0YXJ0ID4gNilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRTdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0T3V0c2lkZSA9IHN0YXJ0T3V0c2lkZS5EYXRlLkFkZERheXMoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXJ0T3V0c2lkZS5Ib3VyID09IDIzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE91dHNpZGUgPSBzdGFydE91dHNpZGUuQWRkSG91cnMoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeCA9IDA7IHggPCA3OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBMYWJlbChEYXlzW3hdLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuU2V0TG9jYXRpb24oXCIoMTAwJSAqIFwiICsgKHggKiAwLjE0MjgpICsgXCIgKyAoKDEwMCUgKiAwLjE0MjgpICogMC40NSkgLSA2cHgpXCIsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0JvdW5kcyA9IG5ldyBWZWN0b3I0KFwiKDEwMCUgKiBcIiArIChvZmZzZXRTdGFydCAqIDAuMTQyOCkgKyBcIilcIiwgXCIoKDEwMCUgKiBcIiArIChyb3cgKiAwLjE2NjYpICsgXCIpICsgKDEwMCUgKiAwLjE2NjYpKVwiLCBcIigxMDAlICogMC4xNDI4KVwiLCBcIigoMTAwJSAqIFwiICsgMC4xNjY2ICsgXCIpICsgKDEwMCUgKiAwLjE2NjYpKVwiKSwgLy8gIG9mZnNldFN0YXJ0ICogMzAsICAoMjIgKiByb3cpIC0gNiwgMzAsIDIyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5Nb250aDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERpc3BsYXlNb2RlLlllYXI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udGVudFJhbmdlLkNvbnRlbnQuRW1wdHkoKTsgLy8gZW1wdHkgYW5kIHJlLWNyZWF0ZVxyXG4gICAgICAgICAgICBDb250ZW50UmFuZ2UuQ29udGVudC5BcHBlbmRDaGlsZChkb2MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbiBPblJlcXVlc3RUb0Nsb3NlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBCbG9ja1RhYkV2ZW50KEtleWJvYXJkRXZlbnQgZXYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKE9uUmVxdWVzdFRvQ2xvc2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPblJlcXVlc3RUb0Nsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZUNvbnRyb2woRGF0ZVRpbWUgc3RhcnREYXRlKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKDIzMCwgMjQ1KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uS2V5RG93biA9IEJsb2NrVGFiRXZlbnQ7XHJcblxyXG4gICAgICAgICAgICBidG5Ub3AgPSBuZXcgU2ltcGxlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIGJ0blRvcC5TdHlsZS5UcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgtNTAlLCAwKVwiO1xyXG4gICAgICAgICAgICBidG5Ub3AuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvcC5TdHlsZS5NYXJnaW5SaWdodCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvcC5Ub3AgPSA2O1xyXG4gICAgICAgICAgICBidG5Ub3AuV2lkdGggPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgYnRuVG9wLlN0eWxlLkJvcmRlckNvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBidG5Ub3AuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgYnRuU2VsZWN0ZWRSYW5nZSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTW92ZVVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlN0eWxlLlRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKC01MCUsIDApXCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuTWFyZ2luUmlnaHQgPSBcIjUwJVwiO1xyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlRvcCA9IDMwO1xyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLldpZHRoID0gXCJhdXRvXCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuQm9yZGVyQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgYnRuTGVmdCA9IG5ldyBTaW1wbGVCdXR0b24oKSB7IFRleHQgPSBcIjxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigxNCwgMzYpLCBTaXplID0gbmV3IFZlY3RvcjIoMTMsIDEzKSwgSXRlbUNsaWNrID0gKGV2KSA9PiB7IE1vdmVMZWZ0KCk7IH0gfTtcclxuICAgICAgICAgICAgYnRuTGVmdC5Db250ZW50Lk9uS2V5RG93biA9IEJsb2NrVGFiRXZlbnQ7XHJcblxyXG4gICAgICAgICAgICBidG5SaWdodCA9IG5ldyBTaW1wbGVCdXR0b24oKSB7IFRleHQgPSBcIj5cIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMjZweClcIiwgMzYpLCBTaXplID0gbmV3IFZlY3RvcjIoMTMsIDEzKSwgSXRlbUNsaWNrID0gKGV2KSA9PiB7IE1vdmVSaWdodCgpOyB9IH07XHJcbiAgICAgICAgICAgIGJ0blJpZ2h0LkNvbnRlbnQuT25LZXlEb3duID0gQmxvY2tUYWJFdmVudDtcclxuXHJcbiAgICAgICAgICAgIGJ0bkxlZnQuU3R5bGUuQm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcclxuICAgICAgICAgICAgYnRuUmlnaHQuU3R5bGUuQm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcclxuXHJcbiAgICAgICAgICAgIGJ0bkxlZnQuU3R5bGUuTGluZUhlaWdodCA9IFwiMFwiO1xyXG4gICAgICAgICAgICBidG5SaWdodC5TdHlsZS5MaW5lSGVpZ2h0ID0gXCIwXCI7XHJcblxyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnRuU2VsZWN0ZWRSYW5nZS5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuU2VsZWN0ZWRSYW5nZS5IZWlnaHQgPSAzNjtcclxuICAgICAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuVG9wID0gNDI7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuVG9wLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5Ub3AuSGVpZ2h0ID0gMzY7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuTGVmdC5TaXplID0gbmV3IFZlY3RvcjIoMzYsIDM2KTtcclxuICAgICAgICAgICAgICAgIGJ0bkxlZnQuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ0bkxlZnQuVG9wID0gMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuUmlnaHQuU2l6ZSA9IG5ldyBWZWN0b3IyKDM2LCAzNik7XHJcbiAgICAgICAgICAgICAgICBidG5SaWdodC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuUmlnaHQuVG9wID0gMjA7XHJcbiAgICAgICAgICAgICAgICBidG5SaWdodC5MZWZ0ID0gXCIoMTAwJSAtIDUwcHgpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgQ29udGVudFJhbmdlID0gbmV3IENvbnRyb2woKSB7IFNpemUgPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMjBweClcIiwgXCIoMTAwJSAtIDE0N3B4KVwiKSwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigxMSwgOTApIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50UmFuZ2UgPSBuZXcgQ29udHJvbCgpIHsgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAyMHB4KVwiLCBcIigxMDAlIC0gOTJweClcIiksIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMTEsIDYwKSB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDb250ZW50UmFuZ2UuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgYnRuVG9kYXkgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiVG9kYXlcIixcclxuICAgICAgICAgICAgICAgIFdpZHRoID0gNTAsXHJcbiAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aXZlRGlzcGxheU1vZGUgPSBEaXNwbGF5TW9kZS5EYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0Vmlld0RhdGVUaW1lKERhdGVUaW1lLlRvZGF5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoT25EYXRlQ2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPbkRhdGVDaGFuZ2VkKERhdGVUaW1lLlRvZGF5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoR2V0Vmlld0RhdGVUaW1lKCkgPT0gRGF0ZVRpbWUuVG9kYXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihPblJlcXVlc3RUb0Nsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPblJlcXVlc3RUb0Nsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYnRuVG9kYXkuU3R5bGUuVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoLTUwJSwgMClcIjtcclxuICAgICAgICAgICAgYnRuVG9kYXkuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLk1hcmdpblJpZ2h0ID0gXCI1MCVcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuICAgICAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLk1pbldpZHRoID0gXCI2MHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5XaWR0aCA9IFwiKDEwMCUgKiAwLjE0MjgpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5Ub3AgPSBcIigxMDAlIC0gMjZweClcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnRuVG9kYXkuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgZG9jLkFwcGVuZENoaWxkcmVuKGJ0blRvcCwgYnRuTGVmdCwgYnRuU2VsZWN0ZWRSYW5nZSwgYnRuUmlnaHQsIENvbnRlbnRSYW5nZSwgYnRuVG9kYXkpO1xyXG4gICAgICAgICAgICBpZihzdGFydERhdGUgPT0gRGF0ZVRpbWUuTWluVmFsdWUpXHJcbiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSBEYXRlVGltZS5Ub2RheTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoZG9jKTtcclxuXHJcbiAgICAgICAgICAgIFNldFZpZXdEYXRlVGltZShzdGFydERhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW92ZUxlZnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTW92ZUxlZnRPclJpZ2h0KC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1vdmVVcCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmKF9hY3RpdmVEaXNwbGF5TW9kZSAhPSBEaXNwbGF5TW9kZS5ZZWFyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfYWN0aXZlRGlzcGxheU1vZGUrKztcclxuICAgICAgICAgICAgICAgIFJlZnJlc2hWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1vdmVMZWZ0T3JSaWdodChpbnQgdGltZXNWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gR2V0Vmlld0RhdGVUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2goX2FjdGl2ZURpc3BsYXlNb2RlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5EYXk6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkTW9udGhzKCgxICogdGltZXNWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgRGlzcGxheU1vZGUuTW9udGg6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkTW9udGhzKCgxMiAqIHRpbWVzVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIERpc3BsYXlNb2RlLlllYXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkWWVhcnMoKDEyMCAqIHRpbWVzVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2V0Vmlld0RhdGVUaW1lKGRhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW92ZVJpZ2h0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1vdmVMZWZ0T3JSaWdodCgxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIERpc3BsYXlNb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEYXksXHJcbiAgICAgICAgICAgIE1vbnRoLFxyXG4gICAgICAgICAgICBZZWFyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JpZExvb2t1cEVkaXQgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3IGdyaWRWaWV3O1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRmllbGROYW1lO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRGlzcGxheU5hbWU7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFZpc2libGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkTG9va3VwRWRpdCgpIDogYmFzZShcImlucHV0Y29udHJvbFwiLCBDb21ib0JveFR5cGVzLkRlZmF1bHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBncmlkVmlldyA9IG5ldyBHcmlkVmlldyh0cnVlLCB0cnVlKSB7IFNpemUgPSBuZXcgVmVjdG9yMigyNTAsIDQwMCkgfTtcclxuICAgICAgICAgICAgZ3JpZFZpZXcuQ29udGV4dE1lbnUgPSBudWxsO1xyXG4gICAgICAgICAgICBncmlkVmlldy5PbkZvY3VzZWRSb3dDaGFuZ2VkID0gKHJvd0hhbmRsZSwgUHJldlJvd2hhbmRsZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocm93SGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkFwcGVuZENoaWxkKG5ldyBIVE1MT3B0aW9uRWxlbWVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbm5lckhUTUwgPSAoZ3JpZFZpZXcuR2V0Um93Q2VsbFZhbHVlKHJvd0hhbmRsZSwgRGlzcGxheU5hbWUpIGFzIHN0cmluZyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlID0gKGdyaWRWaWV3LkdldFJvd0NlbGxWYWx1ZShyb3dIYW5kbGUsIEZpZWxkTmFtZSkgYXMgc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBncmlkVmlldy5Db250ZW50Lk9uTW91c2VMZWF2ZSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmKFZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIFNob3dQb3B1cCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2hvd1BvcHVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFZpc2libGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciB4ID0gdGhpcy5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBncmlkVmlldy5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKChpbnQpeC5MZWZ0LCAoaW50KSh4LlRvcCArIHguSGVpZ2h0KSk7XHJcblxyXG4gICAgICAgICAgICBDb250ZXh0TWVudS5Ub3RhbENvbnRleHRIYW5kbGVzKys7XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5QYXJlbnRFbGVtZW50LkFwcGVuZENoaWxkKGdyaWRWaWV3KTtcclxuXHJcbiAgICAgICAgICAgIGdyaWRWaWV3LlJlbmRlckdyaWQoKTtcclxuXHJcbiAgICAgICAgICAgIGdyaWRWaWV3LkNvbnRlbnQuU3R5bGUuWkluZGV4ID0gKENvbnRleHRNZW51LlRvdGFsQ29udGV4dEhhbmRsZXMgKyBTZXR0aW5ncy5Db250ZXh0TWVudVN0YXJ0aW5nWkluZGV4KS5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICBWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsb3NlUG9wdXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ3JpZFZpZXcuQ29udGVudC5QYXJlbnRFbGVtZW50LlJlbW92ZUNoaWxkKGdyaWRWaWV3KTtcclxuICAgICAgICAgICAgICAgIENvbnRleHRNZW51LlRvdGFsQ29udGV4dEhhbmRsZXMtLTtcclxuICAgICAgICAgICAgICAgIFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JpZFZpZXcgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEhUTUxEaXZFbGVtZW50IEdyaWRGaW5kUGFuZWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBHcmlkSGVhZGVyO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBHcmlkSGVhZGVyQ29udGFpbmVyO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBHcmlkQm9keUNvbnRhaW5lcjtcclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgR3JpZEJvZHk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgSFRNTERpdkVsZW1lbnQgQm90dG9uT2ZUYWJsZTtcclxuICAgICAgICBwcml2YXRlIEhUTUxEaXZFbGVtZW50IFJpZ2h0T2ZUYWJsZTtcclxuICAgICAgICBwcml2YXRlIEhUTUxEaXZFbGVtZW50IFJpZ2h0T2ZUYWJsZUhlYWRlcjtcclxuXHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dCBTZWFyY2hUZXh0SW5wdXQ7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5GaW5kO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuQ2xlYXI7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5DbG9zZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBDb250ZXh0SXRlbSBfc2hvd0ZpbmRQYW5lbENvbnRleHRJdGVtO1xyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgX2ZpbmRQYW5lbFZpc2libGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEZpbmRQYW5lbFZpc2libGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfZmluZFBhbmVsVmlzaWJsZTsgfVxyXG4gICAgICAgICAgICBzZXQge1xyXG4gICAgICAgICAgICAgICAgaWYoX2ZpbmRQYW5lbFZpc2libGUgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNob3dGaW5kUGFuZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsb3NlRmluZFBhbmVsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgX2hpZ2hsaWdoU2VhcmNoUmVzdWx0cyA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEhpZ2hsaWdoU2VhcmNoUmVzdWx0c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9oaWdobGlnaFNlYXJjaFJlc3VsdHM7IH1cclxuICAgICAgICAgICAgc2V0IHtcclxuICAgICAgICAgICAgICAgIGlmKF9oaWdobGlnaFNlYXJjaFJlc3VsdHMgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hpZ2hsaWdoU2VhcmNoUmVzdWx0cyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93RmluZFBhbmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFfZmluZFBhbmVsVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3Nob3dGaW5kUGFuZWxDb250ZXh0SXRlbS5DYXB0aW9uID0gXCJDbG9zZSBGaW5kIFBhbmVsXCI7XHJcbiAgICAgICAgICAgICAgICBfZmluZFBhbmVsVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBHcmlkRmluZFBhbmVsLlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkluaGVyaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgU2V0RGVmYXVsdFNpemVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsb3NlRmluZFBhbmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKF9maW5kUGFuZWxWaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfc2hvd0ZpbmRQYW5lbENvbnRleHRJdGVtLkNhcHRpb24gPSBcIlNob3cgRmluZCBQYW5lbFwiO1xyXG4gICAgICAgICAgICAgICAgX2ZpbmRQYW5lbFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEdyaWRGaW5kUGFuZWwuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG5cclxuICAgICAgICAgICAgICAgIFNldERlZmF1bHRTaXplcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByaXZhdGUgRGF0YVRhYmxlIF9kYXRhU291cmNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxpbnQsIGludD4gT25Gb2N1c2VkUm93Q2hhbmdlZCA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxpbnQ+IE9uUm93RG91YmxlQ2xpY2sgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248SFRNTEVsZW1lbnQsIGludD4gT25DdXN0b21Sb3dTdHlsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBBY3Rpb248TW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4+IE9uUm93Q2xpY2s7XHJcbiAgICAgICAgcHJvdGVjdGVkIEFjdGlvbjxNb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50Pj4gT25Eb3VibGVDbGljaztcclxuICAgICAgICBwcm90ZWN0ZWQgQWN0aW9uPE1vdXNlRXZlbnQ+IE9uQ2VsbFJvd01vdXNlRG93bjtcclxuXHJcbiAgICAgICAgcHVibGljIEhhcmRTb2Z0TGlzdDxib29sPiBTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFZpc2libGVSb3dIYW5kbGVzID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0VmlzaWJsZVJvd0hhbmRsZXM8VD4oTGlzdDxUPiBDZWxscywgYm9vbCBhc2MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihEYXRhU291cmNlLl9zZWFyY2hBY3RpdmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGFzYylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+PihDZWxsc1xyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgaW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+PikoKHgsIGkpID0+IG5ldyBLZXlWYWx1ZVBhaXI8aW50LCBUPihpLCB4KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBib29sPikoKHApID0+IERhdGFTb3VyY2UuX3NlYXJjaFJlc3VsdHMuQ29udGFpbnMocC5LZXkpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLk9yZGVyQnk8VD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPiwgVD4pKHggPT4geC5WYWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVmlzaWJsZVJvd0hhbmRsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LGludD4oc29ydGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4sIGludD4pKHggPT4geC5LZXkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+PihDZWxsc1xyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgaW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+PikoKHgsIGkpID0+IG5ldyBLZXlWYWx1ZVBhaXI8aW50LCBUPihpLCB4KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBib29sPikoKHApID0+IERhdGFTb3VyY2UuX3NlYXJjaFJlc3VsdHMuQ29udGFpbnMocC5LZXkpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLk9yZGVyQnlEZXNjZW5kaW5nPFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4sIFQ+KSh4ID0+IHguVmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFZpc2libGVSb3dIYW5kbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPixpbnQ+KHNvcnRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBpbnQ+KSh4ID0+IHguS2V5KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihhc2MpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4oQ2VsbHNcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4pKCh4LCBpKSA9PiBuZXcgS2V5VmFsdWVQYWlyPGludCwgVD4oaSwgeCkpKSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuT3JkZXJCeTxUPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBUPikoeCA9PiB4LlZhbHVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBWaXNpYmxlUm93SGFuZGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4saW50Pihzb3J0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPiwgaW50PikoeCA9PiB4LktleSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxULGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4+KENlbGxzXHJcbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4+KSgoeCwgaSkgPT4gbmV3IEtleVZhbHVlUGFpcjxpbnQsIFQ+KGksIHgpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLk9yZGVyQnlEZXNjZW5kaW5nPFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4sIFQ+KSh4ID0+IHguVmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFZpc2libGVSb3dIYW5kbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPixpbnQ+KHNvcnRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBpbnQ+KSh4ID0+IHguS2V5KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBfYWxsb3dSb3dEcmFnID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFsbG93Um93RHJhZ1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9hbGxvd1Jvd0RyYWc7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9hbGxvd1Jvd0RyYWcgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2FsbG93Um93RHJhZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQXV0b0dlbmVyYXRlQ29sdW1uc0Zyb21Tb3VyY2UgPSB0cnVlO1xyXG4gICAgICAgIHB1YmxpYyBib29sIEFsbG93TXVsdGlTZWxlY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgc2hvd0F1dG9GaWx0ZXJSb3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgU2hvd0F1dG9GaWx0ZXJSb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBzaG93QXV0b0ZpbHRlclJvdzsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoc2hvd0F1dG9GaWx0ZXJSb3cgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0F1dG9GaWx0ZXJSb3cgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZighc2hvd0F1dG9GaWx0ZXJSb3cpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgRmlsdGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29sdW1uQ291bnQoKTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpbHRlckVkaXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uc1tpXS5GaWx0ZXJFZGl0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbHVtbnNbaV0uRmlsdGVyVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhbGN1bGF0ZVZpc2libGVSb3dzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2FsY3VsYXRlVmlzaWJsZVJvd3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxpbnQ+IGNhbGNWaXNpYmxlUm93cyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgeSA9IDA7IHkgPCBSb3dDb3VudCgpOyB5KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvb2wgQWRkSW5kZXggPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgeCA9IDA7IHggPCBDb2x1bW5Db3VudCgpOyB4KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIUNvbHVtbnNbeF0uVmFsdWVNYXRjaEZpbHRlcih5KSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFkZEluZGV4ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKEFkZEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGNWaXNpYmxlUm93cy5BZGQoeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFZpc2libGVSb3dIYW5kbGVzID0gY2FsY1Zpc2libGVSb3dzO1xyXG4gICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmxvYXQgVW5pdEhlaWdodCA9IDI4LjBmO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfY29sdW1uQXV0b1dpZHRoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9mb2N1c2VkY29sdW1uID0gLTE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRm9jdXNlZENvbHVtblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfZm9jdXNlZGNvbHVtbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgIT0gRm9jdXNlZENvbHVtbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldiA9IF9mb2N1c2VkY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgIF9mb2N1c2VkY29sdW1uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9SZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9mb2N1c2VkRGF0YUhhbmRsZSA9IC0xO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEZvY3VzZWREYXRhSGFuZGxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mb2N1c2VkRGF0YUhhbmRsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgIT0gX2ZvY3VzZWREYXRhSGFuZGxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2ID0gX2ZvY3VzZWREYXRhSGFuZGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIF9mb2N1c2VkRGF0YUhhbmRsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihPbkZvY3VzZWRSb3dDaGFuZ2VkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9uRm9jdXNlZFJvd0NoYW5nZWQoX2ZvY3VzZWREYXRhSGFuZGxlLCBwcmV2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0RGVmYXVsdFNpemVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKF9jb2x1bW5IZWFkZXJzVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR3JpZEhlYWRlci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG4gICAgICAgICAgICAgICAgR3JpZEhlYWRlckNvbnRhaW5lci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKEZpbmRQYW5lbFZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgR3JpZEhlYWRlckNvbnRhaW5lci5TZXRCb3VuZHMoMCwgNDcsIFwiMTAwJVwiLCBVbml0SGVpZ2h0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIuU2V0Qm91bmRzKDAsIFVuaXRIZWlnaHQgKyAzICsgNDcsIFwiMTAwJVwiLCBcIigxMDAlIC0gXCIgKyAoVW5pdEhlaWdodCArIDMgKyA0NykgKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHcmlkSGVhZGVyQ29udGFpbmVyLlNldEJvdW5kcygwLCAwLCBcIjEwMCVcIiwgVW5pdEhlaWdodCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdyaWRCb2R5Q29udGFpbmVyLlNldEJvdW5kcygwLCBVbml0SGVpZ2h0ICsgMywgXCIxMDAlXCIsIFwiKDEwMCUgLSBcIiArIChVbml0SGVpZ2h0ICsgMykgKyBcInB4KVwiKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdyaWRIZWFkZXIuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgR3JpZEhlYWRlckNvbnRhaW5lci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoRmluZFBhbmVsVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHcmlkQm9keUNvbnRhaW5lci5TZXRCb3VuZHMoMCwgMSArIDQ2LCBcIjEwMCVcIiwgXCIoMTAwJSAtIFwiICsgKDEgKyA0NikgICsgXCJweClcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIuU2V0Qm91bmRzKDAsIDEsIFwiMTAwJVwiLCBcIigxMDAlIC0gMXB4KVwiKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfY29sdW1uSGVhZGVyc1Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb2x1bW5IZWFkZXJzVmlzaWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfY29sdW1uSGVhZGVyc1Zpc2libGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9IF9jb2x1bW5IZWFkZXJzVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29sdW1uSGVhZGVyc1Zpc2libGUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0RGVmYXVsdFNpemVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29sdW1uQXV0b1dpZHRoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb2x1bW5BdXRvV2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIEdyaWRCb2R5Q29udGFpbmVyLlN0eWxlLk92ZXJmbG93WCA9IE92ZXJmbG93LkhpZGRlbjtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBHcmlkQm9keUNvbnRhaW5lci5TdHlsZS5PdmVyZmxvd1ggPSBPdmVyZmxvdy5BdXRvO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKF9jb2x1bW5BdXRvV2lkdGggIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbHVtbkF1dG9XaWR0aCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIF91c2VFZGl0Rm9ybSA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFVzZUVkaXRGb3JtXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF91c2VFZGl0Rm9ybTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgIT0gX3VzZUVkaXRGb3JtKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF91c2VFZGl0Rm9ybSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBTb3J0U2V0dGluZyBTb3J0U2V0dGluZ3M7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNvcnRDb2x1bW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoU29ydFNldHRpbmdzICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNvcnRDb2x1bW4oU29ydFNldHRpbmdzLkNvbHVtbiwgU29ydFNldHRpbmdzLlNvcnRNb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJTb3J0Q29sdW1uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFNvcnRTZXR0aW5ncyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTb3J0Q29sdW1uKFNvcnRTZXR0aW5ncy5Db2x1bW4sIEdyaWRWaWV3U29ydE1vZGUuTm9uZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNvcnRDb2x1bW4oR3JpZFZpZXdDb2x1bW4gY29sdW1uLCBHcmlkVmlld1NvcnRNb2RlIHNvcnQgPSBHcmlkVmlld1NvcnRNb2RlLkFzYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbHVtbi5Tb3J0ZWRNb2RlID0gc29ydDtcclxuXHJcbiAgICAgICAgICAgIGlmKFNvcnRTZXR0aW5ncyAhPSBudWxsICYmIFNvcnRTZXR0aW5ncy5Db2x1bW4gIT0gY29sdW1uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTb3J0U2V0dGluZ3MuQ29sdW1uLlNvcnRlZE1vZGUgPSBHcmlkVmlld1NvcnRNb2RlLk5vbmU7XHJcbiAgICAgICAgICAgICAgICBWaXNpYmxlUm93SGFuZGxlcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKHNvcnQgPT0gR3JpZFZpZXdTb3J0TW9kZS5Ob25lKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBWaXNpYmxlUm93SGFuZGxlcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBib29sIHNvcnQxID0gc29ydCA9PSBHcmlkVmlld1NvcnRNb2RlLkFzYztcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goY29sdW1uLkNvbHVtbi5EYXRhVHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRWaXNpYmxlUm93SGFuZGxlczxvYmplY3Q+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5PYmplY3QpLkNlbGxzLCBzb3J0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJvb2w6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpc2libGVSb3dIYW5kbGVzPGJvb2w/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uQm9vbCkuQ2VsbHMsIHNvcnQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRGF0ZVRpbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpc2libGVSb3dIYW5kbGVzPGdsb2JhbDo6U3lzdGVtLkRhdGVUaW1lPz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkRhdGVUaW1lKS5DZWxscywgc29ydDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TdHJpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpc2libGVSb3dIYW5kbGVzPHN0cmluZz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtblN0cmluZykuQ2VsbHMsIHNvcnQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQnl0ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0VmlzaWJsZVJvd0hhbmRsZXM8Ynl0ZT8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5CeXRlKS5DZWxscywgc29ydDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0VmlzaWJsZVJvd0hhbmRsZXM8c2hvcnQ/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uU2hvcnQpLkNlbGxzLCBzb3J0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpc2libGVSb3dIYW5kbGVzPGludD8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5JbnRlZ2VyKS5DZWxscywgc29ydDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Mb25nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRWaXNpYmxlUm93SGFuZGxlczxsb25nPz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkxvbmcpLkNlbGxzLCBzb3J0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRWaXNpYmxlUm93SGFuZGxlczxmbG9hdD8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5GbG9hdCkuQ2VsbHMsIHNvcnQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRWaXNpYmxlUm93SGFuZGxlczxkb3VibGU/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uRG91YmxlKS5DZWxscywgc29ydDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRWaXNpYmxlUm93SGFuZGxlczxkZWNpbWFsPz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkRlY2ltYWwpLkNlbGxzLCBzb3J0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgIFNvcnRTZXR0aW5ncyA9IG5ldyBTb3J0U2V0dGluZygpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbHVtbiA9IGNvbHVtbixcclxuICAgICAgICAgICAgICAgIFNvcnRNb2RlID0gc29ydFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb2x1bW5Db3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29sdW1ucy5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgUm93Q291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoX2RhdGFTb3VyY2UgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICByZXR1cm4gX2RhdGFTb3VyY2UuUm93Q291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTY3JvbGxUb0JvdHRvbSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxUb3AgPSBHcmlkQm9keS5DbGllbnRIZWlnaHQgLSBHcmlkQm9keUNvbnRhaW5lci5DbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTY3JvbGxUb1RvcCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERhdGFUYWJsZSBEYXRhU291cmNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9kYXRhU291cmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBGb2N1c2VkRGF0YUhhbmRsZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRSb3dzID0gbmV3IEhhcmRTb2Z0TGlzdDxib29sPihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBWaXNpYmxlUm93SGFuZGxlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihfZGF0YVNvdXJjZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRhU291cmNlLk9uRGF0YVNvdXJjZUNoYW5nZWQgLT0gRGF0YVNvdXJjZV9PbkRhdGFTb3VyY2VDaGFuZ2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9kYXRhU291cmNlID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoX2RhdGFTb3VyY2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfZGF0YVNvdXJjZS5PbkRhdGFTb3VyY2VDaGFuZ2VkICs9IERhdGFTb3VyY2VfT25EYXRhU291cmNlQ2hhbmdlZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoQ29sdW1ucy5Db3VudCA9PSAwICYmIEF1dG9HZW5lcmF0ZUNvbHVtbnNGcm9tU291cmNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3ID0gU3RvcHdhdGNoLlN0YXJ0TmV3KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgX2RhdGFTb3VyY2UuQ29sdW1uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3MSA9IFN0b3B3YXRjaC5TdGFydE5ldygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBndmMgPSBuZXcgR3JpZFZpZXdDb2x1bW4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndmMuQ2FwdGlvbiA9IF9kYXRhU291cmNlLkNvbHVtbnNbaV0uRmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3ZjLkNvbHVtbiA9IF9kYXRhU291cmNlLkNvbHVtbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndmMuVmlzaWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKF9kYXRhU291cmNlLkNvbHVtbnNbaV0uRGF0YVR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5CeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU2hvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5JbnRlZ2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuTG9uZzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRGVjaW1hbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3ZjLkJvZHlBcHBhcmVuY2UuQWxpZ25tZW50ID0gVGV4dEFsaWduLlJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoU2V0dGluZ3MuR3JpZFZpZXdBdXRvQ29sdW1uRm9ybWF0RGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFNldHRpbmdzLkdyaWRWaWV3QXV0b0NvbHVtbkdlbmVyYXRlRm9ybWF0QXNEYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd2Yy5Gb3JtYXRTdHJpbmcgPSBcInswOmR9XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3ZjLkZvcm1hdFN0cmluZyA9IFwiezA6eXl5eS1NTS1kZH1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQm9vbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3ZjLkNlbGxEaXNwbGF5ID0gbmV3IEdyaWRWaWV3Q2VsbERpc3BsYXlDaGVja0JveCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb2x1bW5zLkFkZChndmMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3LlN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKFwiRGF0YVNvdXJjZSBBZGRDb2x1bW4gQXV0bzogXCIgKyBzdzEuRWxhcHNlZE1pbGxpc2Vjb25kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3LlN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoXCJEYXRhU291cmNlIEF1dG9Db2x1bW5zOiBcIiArIHN3LkVsYXBzZWRNaWxsaXNlY29uZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEdyaWRWaWV3Q29sdW1uPiBDb2x1bW5zID0gbmV3IExpc3Q8R3JpZFZpZXdDb2x1bW4+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NvbHVtbiBHZXRDb2x1bW4oaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29sdW1uc1tpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShDb2x1bW5zW2NvbHVtbkluZGV4XSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDb2x1bW4gR2V0R3JpZFZpZXdDb2x1bW5CeUZpZWxkTmFtZShzdHJpbmcgRmllbGROYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbHVtbkNvdW50KCk7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQ29sdW1uc1tpXS5Db2x1bW4uRmllbGROYW1lID09IEZpZWxkTmFtZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29sdW1uc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShzdHJpbmcgRmllbGROYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEZvY3VzZWRSb3dDZWxsVmFsdWUoR2V0Q29sdW1uQnlGaWVsZE5hbWUoRmllbGROYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldEZvY3VzZWRSb3dDZWxsVmFsdWUoR3JpZFZpZXdDb2x1bW4gY29sdW1uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFJvd0NlbGxWYWx1ZShGb2N1c2VkRGF0YUhhbmRsZSwgY29sdW1uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShEYXRhQ29sdW1uIGNvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRSb3dDZWxsVmFsdWUoRm9jdXNlZERhdGFIYW5kbGUsIGNvbHVtbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFJvd0NlbGxWYWx1ZShpbnQgRGF0YWhhbmRsZSwgR3JpZFZpZXdDb2x1bW4gY29sdW1uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFJvd0NlbGxWYWx1ZShEYXRhaGFuZGxlLCBjb2x1bW4uQ29sdW1uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0Um93Q2VsbFZhbHVlKGludCBEYXRhaGFuZGxlLCBEYXRhQ29sdW1uIGNvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKERhdGFoYW5kbGUgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5HZXRDZWxsVmFsdWUoRGF0YWhhbmRsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFJvd0NlbGxWYWx1ZShpbnQgRGF0YWhhbmRsZSwgc3RyaW5nIEZpZWxkTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRSb3dDZWxsVmFsdWUoRGF0YWhhbmRsZSwgR2V0Q29sdW1uQnlGaWVsZE5hbWUoRmllbGROYW1lKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEdldFJvd0NlbGxWYWx1ZShpbnQgRGF0YWhhbmRsZSwgaW50IGNvbHVtbkluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFJvd0NlbGxWYWx1ZShEYXRhaGFuZGxlLCBDb2x1bW5zW2NvbHVtbkluZGV4XSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDb2x1bW4gR2V0R3JpZFZpZXdDb2x1bW5CeUZpZWxkTmFtZShzdHJpbmcgZmllbGROYW1lLCBib29sIElnbm9yZUNhc2UgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBDb2x1bW5Db3VudCgpOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKENvbHVtbnNbaV0gIT0gbnVsbCAmJiBDb2x1bW5zW2ldLkNvbHVtbiAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLkNvbXBhcmUoQ29sdW1uc1tpXS5Db2x1bW4uRmllbGROYW1lLCBmaWVsZE5hbWUsIElnbm9yZUNhc2UpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbHVtbnNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERhdGFDb2x1bW4gR2V0Q29sdW1uQnlGaWVsZE5hbWUoc3RyaW5nIGZpZWxkTmFtZSwgYm9vbCBJZ25vcmVDYXNlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihEYXRhU291cmNlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBEYXRhU291cmNlLkNvbHVtbkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKERhdGFTb3VyY2UuQ29sdW1uc1tpXSAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLkNvbXBhcmUoRGF0YVNvdXJjZS5Db2x1bW5zW2ldLkZpZWxkTmFtZSwgZmllbGROYW1lLCBJZ25vcmVDYXNlKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhU291cmNlLkNvbHVtbnNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQ29sdW1uKHN0cmluZyBjYXB0aW9uLCBzdHJpbmcgZmllbGRuYW1lLCBpbnQgd2lkdGggPSAxMDAsIHN0cmluZyBmb3JtYXRzdHJpbmcgPSBcIlwiLCBUZXh0QWxpZ24gYWxpZ25tZW50ID0gVGV4dEFsaWduLkxlZnQsIHN0cmluZyBmb3JlY29sb3IgPSBudWxsLCBib29sIGlzQm9sZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbCA9IEdldENvbHVtbkJ5RmllbGROYW1lKGZpZWxkbmFtZSk7XHJcbiAgICAgICAgICAgIGlmKGNvbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBBZGRDb2x1bW4oY2FwdGlvbiwgY29sLCB3aWR0aCwgZm9ybWF0c3RyaW5nLCBhbGlnbm1lbnQsIGZvcmVjb2xvciwgaXNCb2xkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZENvbHVtbihzdHJpbmcgY2FwdGlvbiwgRGF0YUNvbHVtbiBjb2x1bW4sIGludCB3aWR0aCA9IDEwMCwgc3RyaW5nIGZvcm1hdHN0cmluZyA9IFwiXCIsIFRleHRBbGlnbiBhbGlnbm1lbnQgPSBUZXh0QWxpZ24uTGVmdCwgc3RyaW5nIGZvcmVjb2xvciA9IG51bGwsIGJvb2wgaXNCb2xkID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBZGRDb2x1bW4obmV3IEdyaWRWaWV3Q29sdW1uKHRoaXMsIHdpZHRoKSB7IENhcHRpb24gPSBjYXB0aW9uLCBCb2R5QXBwYXJlbmNlID0gbmV3IEdyaWRWaWV3Q2VsbEFwcGFyZW5jZShpc0JvbGQsIGFsaWdubWVudCwgZm9yZWNvbG9yKSwgRm9ybWF0U3RyaW5nID0gZm9ybWF0c3RyaW5nLCBDb2x1bW4gPSBjb2x1bW4gfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRDb2x1bW4oR3JpZFZpZXdDb2x1bW4gY29sdW1uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY29sdW1uID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBDb2x1bW5zLkFkZChjb2x1bW4pO1xyXG5cclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQ29sdW1ucyhwYXJhbXMgR3JpZFZpZXdDb2x1bW5bXSBjb2x1bW5zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY29sdW1ucyA9PSBudWxsIHx8IGNvbHVtbnMuTGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBDb2x1bW5zLkFkZFJhbmdlKGNvbHVtbnMpO1xyXG5cclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVtb3ZlQ29sdW1uKEdyaWRWaWV3Q29sdW1uIGNvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbHVtbnMuUmVtb3ZlKGNvbHVtbik7XHJcblxyXG4gICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldERhdGFTb3VyY2VSb3coaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihWaXNpYmxlUm93SGFuZGxlcyA9PSBudWxsIHx8IFZpc2libGVSb3dIYW5kbGVzLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgcmV0dXJuIFZpc2libGVSb3dIYW5kbGVzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IEdldENvbHVtbldpZHRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihfY29sdW1uQXV0b1dpZHRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gR3JpZEJvZHlDb250YWluZXIuQ2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCB3aWR0aCA9IDAuMGY7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29sdW1ucy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbHVtbnNbaV0uVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gQ29sdW1uc1tpXS5XaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJTZWxlY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2VsZWN0ZWRSb3dzID0gbmV3IEhhcmRTb2Z0TGlzdDxib29sPihmYWxzZSk7XHJcbiAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNlbGVjdEFsbFJvd3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGxlbmd0aCA9IFJvd0NvdW50KCk7XHJcbiAgICAgICAgICAgIGlmKGxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZFJvd3MuQ2xlYXJBbGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludFtdIGluZGV4ID0gbmV3IGludFtsZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4W2ldID0gR2V0RGF0YVNvdXJjZVJvdyhpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNlbGVjdGVkUm93cy5DbGVhckFsbFNldEhhcmRSYW5nZSh0cnVlLCBpbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgUHJldlJlbmRlckdyaWRTY3JvbGxJZCA9IC0xO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEZWxheWVkUmVuZGVyR3JpZChib29sIHJlbmRlck5vTGFnID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihyZW5kZXJOb0xhZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVuZGVyR3JpZChmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihTZXR0aW5ncy5HcmlkVmlld1Njcm9sbERlbGF5ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoUHJldlJlbmRlckdyaWRTY3JvbGxJZCAhPSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdsb2JhbC5DbGVhclRpbWVvdXQoUHJldlJlbmRlckdyaWRTY3JvbGxJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByZXZSZW5kZXJHcmlkU2Nyb2xsSWQgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgUHJldlJlbmRlckdyaWRTY3JvbGxJZCA9IEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSksIE1hdGguTWF4KDEsIFNldHRpbmdzLkdyaWRWaWV3U2Nyb2xsRGVsYXlNUykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgU3RvcHdhdGNoIGNsaWNrVGltZURpZmYgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0YVJvdyBHZXRGb2N1c2VkUm93KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEZvY3VzZWREYXRhSGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRhU291cmNlW0dldERhdGFTb3VyY2VSb3coRm9jdXNlZERhdGFIYW5kbGUpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldFZpc2libGVDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihDb2x1bW5zID09IG51bGwgfHwgQ29sdW1ucy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBDb2x1bW5zLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgbGVuZ3RoMSA9IENvbHVtbnMuQ291bnQ7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFDb2x1bW5zW2ldLlZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoMS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsZW5ndGgxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRCZXN0Rml0Rm9yQ29sdW1uKEdyaWRWaWV3Q29sdW1uIGNvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFjb2x1bW4uVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgaW50IG1heExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGludCBtYXhJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBzdHJpbmcgbWF4U3RyID0gXCJcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBSb3dDb3VudCgpOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0cmluZyB2YWx1ZSA9IGNvbHVtbi5HZXREaXNwbGF5VmFsdWVCeURhdGFSb3dIYW5kbGUoaSk7XHJcbiAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IHYgPSB2YWx1ZS5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodiA+IG1heExlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aCA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3RyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihtYXhJbmRleCA+IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGludClHZXRUZXh0V2lkdGgobWF4U3RyLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyMDtcclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEJlc3RGaXRBbGxDb2x1bW5zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9kaXNhYmxlUmVuZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbHVtbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQ29sdW1uc1tpXS5WaXNpYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbHVtbnNbaV0uV2lkdGggPSBHZXRCZXN0Rml0Rm9yQ29sdW1uKENvbHVtbnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9kaXNhYmxlUmVuZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJlbmRlckdyaWRJbnRlcm5hbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgaGVhZGluZ0NsYXNzO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIGNlbGxDbGFzcztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBEaWN0aW9uYXJ5PGludCwgSFRNTERpdkVsZW1lbnQ+IENhY2hlUm93ID0gbmV3IERpY3Rpb25hcnk8aW50LCBIVE1MRGl2RWxlbWVudD4oKTtcclxuICAgICAgICBpbnQgQ291bnRPZkRlbGV0aW9uID0gMDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgX3NlYXJjaFRpbWVyID0gLTE7XHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIF9zZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5EYXRhU291cmNlID09IG51bGwgfHwgIUZpbmRQYW5lbFZpc2libGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuRGF0YVNvdXJjZS5TZWFyY2goU2VhcmNoVGV4dElucHV0LlRleHQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3KGJvb2wgYXV0b0dlbmVyYXRlQ29sdW1ucyA9IHRydWUsIGJvb2wgY29sdW1uQXV0b1dpZHRoID0gZmFsc2UpIDogYmFzZShcImdyaWRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBVbml0SGVpZ2h0ID0gNTM7XHJcbiAgICAgICAgICAgICAgICBoZWFkaW5nQ2xhc3MgPSBcImhlYWRpbmcgaGVhZGluZy1yZXNwb25zaXZlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgY2VsbENsYXNzID0gXCJjZWxsIGNlbGwtcmVzcG9uc2l2ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVW5pdEhlaWdodCA9IDIwO1xyXG4gICAgICAgICAgICAgICAgaGVhZGluZ0NsYXNzID0gXCJoZWFkaW5nXCI7XHJcbiAgICAgICAgICAgICAgICBjZWxsQ2xhc3MgPSBcImNlbGxcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5Db250ZW50LlN0eWxlLk92ZXJmbG93ID0gT3ZlcmZsb3cuSGlkZGVuO1xyXG4gICAgICAgICAgICAvLyAjRklORCAjUkVOREVSI1xyXG4gICAgICAgICAgICByZW5kZXJHcmlkSW50ZXJuYWwgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfZGlzYWJsZVJlbmRlcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IFN0YXJ0ZWRXaXRoID0gUmVuZGVyVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICBHcmlkSGVhZGVyQ29udGFpbmVyLlNjcm9sbExlZnQgPSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICAgICAgaWYoU2V0dGluZ3MuR3JpZFZpZXdCbHVyT25TY3JvbGwpXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvY2Vzc0JsdXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBWYWxpZGF0ZUdyaWRTaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoQ29sdW1uQ291bnQoKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgUmF3TGVmdENlbGxJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBSYXdMZWZ0Q2VsbFNjcm9sbFBhZGRpbmcgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBSYXdMZWZ0Q2VsbENvdW50ID0gQ29sdW1ucy5Db3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCBMZWZ0TG9jYXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBmb3VuZExlZnRMb2NhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBmb3VuZFJpZ2h0TG9jYXRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgQ2xpZW50V2lkdGggPSBHcmlkQm9keUNvbnRhaW5lci5DbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAjcmVnaW9uIFwiQ29sdW1uc1wiXHJcblxyXG4gICAgICAgICAgICAgICAgZmxvYXQgVmlld1dpZHRoID0gR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsTGVmdCArIENsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgX2NvbHVtbkF1dG9XaWR0aFNpbmdsZSA9IDAuMGY7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoX2NvbHVtbkF1dG9XaWR0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29sdW1uQXV0b1dpZHRoU2luZ2xlID0gQ2xpZW50V2lkdGggPT0gMCA/IDAuMGYgOiBDbGllbnRXaWR0aCAvIEdldFZpc2libGVDb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IE1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgTGFzdFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgeCA9IDA7IHggPCBDb2x1bW5zLkNvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIUNvbHVtbnNbeF0uVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIENvbHVtbnNbeF0uQ2FjaGVkWCA9IExlZnRMb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBMYXN0V2lkdGggPSBfY29sdW1uQXV0b1dpZHRoID8gX2NvbHVtbkF1dG9XaWR0aFNpbmdsZSA6IENvbHVtbnNbeF0uV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgTGVmdExvY2F0aW9uICs9IExhc3RXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZighZm91bmRMZWZ0TG9jYXRpb24gJiYgTGVmdExvY2F0aW9uID49IEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbExlZnQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZExlZnRMb2NhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJhd0xlZnRDZWxsSW5kZXggPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSYXdMZWZ0Q2VsbFNjcm9sbFBhZGRpbmcgPSBMZWZ0TG9jYXRpb24gLSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihmb3VuZExlZnRMb2NhdGlvbiAmJiAhZm91bmRSaWdodExvY2F0aW9uICYmIExlZnRMb2NhdGlvbiA+PSBWaWV3V2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFJpZ2h0TG9jYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSYXdMZWZ0Q2VsbENvdW50ID0geCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBNYXhXaWR0aCA9IExlZnRMb2NhdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29sRnJhZ21lbnQgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IHVib3VuZFJvd0NvdW50ID0gUmF3TGVmdENlbGxDb3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoX2NvbHVtbkhlYWRlcnNWaXNpYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgeCA9IFJhd0xlZnRDZWxsSW5kZXg7IHggPCBSYXdMZWZ0Q2VsbENvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih4ID49IENvbHVtbnMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIUNvbHVtbnNbeF0uVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdjb2wgPSBDb2x1bW5zW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sSW5kZXggPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXBwYXJlbmNlID0gZ2NvbC5IZWFkaW5nQXBwYXJlbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IExhYmVsKGdjb2wuQ2FwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfY29sdW1uQXV0b1dpZHRoID8gZ2NvbC5DYWNoZWRYIDogZ2NvbC5DYWNoZWRYKSwgMCwgKF9jb2x1bW5BdXRvV2lkdGggPyBfY29sdW1uQXV0b1dpZHRoU2luZ2xlIDogZ2NvbC5XaWR0aCkgLSAoeCA9PSB1Ym91bmRSb3dDb3VudCA/IDAgOiAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGFyZW5jZS5Jc0JvbGQsIGZhbHNlLCBoZWFkaW5nQ2xhc3MsIGFwcGFyZW5jZS5BbGlnbm1lbnQsIGFwcGFyZW5jZS5Gb3JlY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihnY29sLlNvcnRlZE1vZGUgIT0gR3JpZFZpZXdTb3J0TW9kZS5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc29ydEltYWdlID0gRGl2KGdjb2wuU29ydGVkTW9kZSA9PSBHcmlkVmlld1NvcnRNb2RlLkFzYyA/IFwiZ3JpZC1zb3J0LXVwXCIgOiBcImdyaWQtc29ydC1kb3duXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydEltYWdlLlNldEJvdW5kcyhcIigxMDAlIC0gMTNweClcIiwgMTEsIDksIDUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLkFwcGVuZENoaWxkKHNvcnRJbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldHVwQ29sdW1uKGNvbCwgeCwgZ2NvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xGcmFnbWVudC5BcHBlbmRDaGlsZChjb2wpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoU3RhcnRlZFdpdGggIT0gUmVuZGVyVGltZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICNlbmRyZWdpb24gXCJDb2x1bW5zXCJcclxuXHJcbiAgICAgICAgICAgICAgICBpZihfZGF0YVNvdXJjZSA9PSBudWxsIHx8IF9kYXRhU291cmNlLlJvd0NvdW50ID09IDAgfHwgX2RhdGFTb3VyY2UuQ29sdW1uQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckdyaWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBHcmlkSGVhZGVyLkFwcGVuZENoaWxkKGNvbEZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBwciA9IFBpeGVsc1BlclJvdyhfZGF0YVNvdXJjZS5Sb3dDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZmxvYXQgUmF3VG9wUm93SW5kZXggPSBHZXRSYXdUb3BSb3dJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgUmF3VG9wUm93U2Nyb2xsUGFkZGluZyA9IFJhd1RvcFJvd0luZGV4ICUgMS4wZjtcclxuICAgICAgICAgICAgICAgIGZsb2F0IFJhd1Zpc2libGVSb3dDb3VudCA9IEdldFJhd1Zpc2libGVSb3dDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBMZW5ndGggPSAoaW50KShSYXdWaXNpYmxlUm93Q291bnQgKyBSYXdUb3BSb3dJbmRleCkgKyAxO1xyXG4gICAgICAgICAgICAgICAgaW50IHN0YXJ0ID0gKGludClSYXdUb3BSb3dJbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAjcmVnaW9uIFwiU2VsZWN0aW9uXCJcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IHggPSBTZWxlY3RlZFJvd3MuU0wuQ291bnQgLSAxOyB4ID49IDA7IHgtLSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBib29sIEZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gc3RhcnQ7IGkgPCBMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPCBEYXRhU291cmNlLlJvd0NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRGF0YVJvd2hhbmRsZSA9IEdldERhdGFTb3VyY2VSb3coaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihTZWxlY3RlZFJvd3MuR2V0SW5kZXhWYWx1ZUJ5SGFyZExpc3RJbmRleChTZWxlY3RlZFJvd3MuU0xbeF0pLkluZGV4ID09IERhdGFSb3doYW5kbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFN0YXJ0ZWRXaXRoICE9IFJlbmRlclRpbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZighRm91bmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RlZFJvd3MuU0wuUmVtb3ZlQXQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICNlbmRyZWdpb24gXCJTZWxlY3Rpb25cIlxyXG5cclxuICAgICAgICAgICAgICAgIHZhciByb3dGcmFnbWVudCA9IERvY3VtZW50LkNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihTZXR0aW5ncy5HcmlkVmlld1Jvd1Njcm9sbFBhZGRpbmcgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0IC09IFNldHRpbmdzLkdyaWRWaWV3Um93U2Nyb2xsUGFkZGluZztcclxuICAgICAgICAgICAgICAgICAgICBMZW5ndGggKz0gU2V0dGluZ3MuR3JpZFZpZXdSb3dTY3JvbGxQYWRkaW5nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IFkgPSAoc3RhcnQgKiAocHByKSkgLSBSYXdUb3BSb3dTY3JvbGxQYWRkaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKFNob3dBdXRvRmlsdGVyUm93KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExlbmd0aCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIFkgKz0gVW5pdEhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAjVE9ETyAtIENMRUFOLi4uXHJcbiAgICAgICAgICAgICAgICBpZihzdGFydCA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYoTGVuZ3RoID4gRGF0YVNvdXJjZS5Sb3dDb3VudClcclxuICAgICAgICAgICAgICAgICAgICBMZW5ndGggPSBEYXRhU291cmNlLlJvd0NvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKENhY2hlUm93LkNvdW50ID4gMTApXHJcbiAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvdW50T2ZEZWxldGlvbiA+IDgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYWNoZVJvdyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgSFRNTERpdkVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvdW50T2ZEZWxldGlvbiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBNYXhEZWxldGUgPSBDYWNoZVJvdy5Db3VudCAtIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQgX19sZW5ndGggPSBDYWNoZVJvdy5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxpbnQ+IEtleXNUb0RlbGV0ZSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IF9fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBmaWVsZEluZGV4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBnbG9iYWw6OkJyaWRnZS5IdG1sNS5IVE1MRGl2RWxlbWVudD4+KENhY2hlUm93LGkpLktleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZpZWxkSW5kZXggPCBzdGFydCB8fCBmaWVsZEluZGV4ID49IExlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLZXlzVG9EZWxldGUuQWRkKGZpZWxkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEtleXNUb0RlbGV0ZS5Db3VudCA+IE1heERlbGV0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2xlbmd0aCA9IEtleXNUb0RlbGV0ZS5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoX19sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ291bnRPZkRlbGV0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBfX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihDYWNoZVJvdy5Db250YWluc0tleShLZXlzVG9EZWxldGVbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gQ2FjaGVSb3dbS2V5c1RvRGVsZXRlW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lk9uQ2xpY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguT25EYmxDbGljayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5FbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguT25EcmFnU3RhcnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguRGVsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhY2hlUm93LlJlbW92ZShLZXlzVG9EZWxldGVbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgcHJldlJvd0NhY2hlID0gQ2FjaGVSb3cuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IHN0YXJ0OyBpIDwgTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIUNhY2hlUm93LkNvbnRhaW5zS2V5KGkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIERhdGFSb3doYW5kbGUgPSBHZXREYXRhU291cmNlUm93KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHIgPSBEaXYoKGkgJSAyID09IDAgPyBcImNlbGxyb3cgZXZlblwiIDogXCJjZWxscm93XCIpICsgKFNlbGVjdGVkUm93cy5HZXRWYWx1ZShEYXRhUm93aGFuZGxlLCB0cnVlKSA/IFwiIGNlbGxyb3ctc2VsZWN0ZWRcIiA6IFwiXCIpICsgKERhdGFSb3doYW5kbGUgPT0gRm9jdXNlZERhdGFIYW5kbGUgPyBcIiBmb2N1c2Vkcm93XCIgOiBcIlwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkci5TZXRCb3VuZHMoMCwgWSwgX2NvbHVtbkF1dG9XaWR0aCA/IENsaWVudFdpZHRoIDogTWF4V2lkdGgsIFVuaXRIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkci5TZXRBdHRyaWJ1dGUoXCJpXCIsIENvbnZlcnQuVG9TdHJpbmcoRGF0YVJvd2hhbmRsZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHIuT25DbGljayA9IE9uUm93Q2xpY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFNldHRpbmdzLklzQ2hyb21lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkci5PbkRibENsaWNrID0gT25Eb3VibGVDbGljaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCB4ID0gUmF3TGVmdENlbGxJbmRleDsgeCA8IFJhd0xlZnRDZWxsQ291bnQ7IHgrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbCA9IENvbHVtbnNbeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY29sLlZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFwcGFyZW5jZSA9IGNvbC5Cb2R5QXBwYXJlbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCB1c2VEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIVE1MRWxlbWVudCBjZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sLkNlbGxEaXNwbGF5ID09IG51bGwgfHwgKHVzZURlZmF1bHQgPSBjb2wuQ2VsbERpc3BsYXkuVXNlRGVmYXVsdEVsZW1lbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5VmFsdWUgPSBjb2wuR2V0RGlzcGxheVZhbHVlQnlEYXRhUm93SGFuZGxlKERhdGFSb3doYW5kbGUsIChWaXNpYmxlUm93SGFuZGxlcyAhPSBudWxsICYmIFZpc2libGVSb3dIYW5kbGVzLkNvdW50ID4gMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwgPSBMYWJlbChkaXNwbGF5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLkNhY2hlZFgsIDAsIF9jb2x1bW5BdXRvV2lkdGggPyBfY29sdW1uQXV0b1dpZHRoU2luZ2xlIDogY29sLldpZHRoLCBhcHBhcmVuY2UuSXNCb2xkLCBmYWxzZSwgY2VsbENsYXNzLCBhcHBhcmVuY2UuQWxpZ25tZW50LCBhcHBhcmVuY2UuRm9yZWNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Q2VsbCA9IHVzZURlZmF1bHQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wuQ2VsbERpc3BsYXkuT25DcmVhdGVEZWZhdWx0KGNlbGwsIHRoaXMsIERhdGFSb3doYW5kbGUsIHgpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfaGlnaGxpZ2hTZWFyY2hSZXN1bHRzICYmIERhdGFTb3VyY2UuX3NlYXJjaEFjdGl2ZSAmJiAhdXNlRGVmYXVsdCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGlzcGxheVZhbHVlKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGlzcGxheVZhbHVlLlRvTG93ZXIoKS5TdGFydHNXaXRoKERhdGFTb3VyY2UuU2VhcmNoU3RyaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NlbGwuRW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlbGVtZW50ID0gRG9jdW1lbnQuQ3JlYXRlRWxlbWVudChcIm1hcmtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBTbGVuZ3RoID0gRGF0YVNvdXJjZS5TZWFyY2hTdHJpbmcuTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWxlbWVudC5UZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZS5TdWJzdHJpbmcoMCwgU2xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NlbGwuQXBwZW5kQ2hpbGRyZW4obWFya2VsZW1lbnQsIERvY3VtZW50LkNyZWF0ZVRleHROb2RlKGRpc3BsYXlWYWx1ZS5TdWJzdHJpbmcoU2xlbmd0aCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyLkFwcGVuZENoaWxkKG5ld0NlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwgPSBjb2wuQ2VsbERpc3BsYXkuT25DcmVhdGUodGhpcywgRGF0YVJvd2hhbmRsZSwgeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5TZXRMb2NhdGlvbihjb2wuQ2FjaGVkWCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5TdHlsZS5XaWR0aCA9IChfY29sdW1uQXV0b1dpZHRoID8gX2NvbHVtbkF1dG9XaWR0aFNpbmdsZSA6IGNvbC5XaWR0aCkuVG9QeCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkci5BcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuU2V0QXR0cmlidXRlKFwiaVwiLCB4LlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5Pbk1vdXNlRG93biA9IE9uQ2VsbFJvd01vdXNlRG93bjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoQWxsb3dSb3dEcmFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkci5TZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyLk9uRHJhZ1N0YXJ0ID0gT25Sb3dEcmFnU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0ZyYWdtZW50LkFwcGVuZENoaWxkKGRyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhY2hlUm93W2ldID0gZHI7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocHJldlJvd0NhY2hlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbGVhckdyaWQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdyaWRCb2R5LkFwcGVuZENoaWxkKHJvd0ZyYWdtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFkgKz0gVW5pdEhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHByZXZSb3dDYWNoZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE9uQ3VzdG9tUm93U3R5bGUgIT0gbnVsbCAmJiByb3dGcmFnbWVudC5DaGlsZE5vZGVzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gcm93RnJhZ21lbnQuQ2hpbGROb2Rlcy5MZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcmlkQm9keS5BcHBlbmRDaGlsZChyb3dGcmFnbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gKEhUTUxFbGVtZW50KXJvd0ZyYWdtZW50LkNoaWxkTm9kZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbkN1c3RvbVJvd1N0eWxlKGNoaWxkLCBHbG9iYWwuUGFyc2VJbnQoY2hpbGQuR2V0QXR0cmlidXRlKFwiaVwiKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbiBleClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoQXBwbGljYXRpb24uQXBsaWNhdGlvbkRlZml0aW9uID09IEFwcGxpY2F0aW9uRGVmaXRuaW9uLkV4cHJlc3NDcmFmdENvbnNvbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZUZvcm0uTG9nKGV4LlRvU3RyaW5nKCksIENvbnNvbGVMb2dUeXBlLkVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBHcmlkSGVhZGVyLkFwcGVuZENoaWxkKGNvbEZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgIEdyaWRCb2R5LkFwcGVuZENoaWxkKHJvd0ZyYWdtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBSZW5kZXJUaW1lID0gLTE7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBHcmlkSGVhZGVyQ29udGFpbmVyID0gRGl2KFwiaGVhZGluZy1jb250YWluZXJcIik7XHJcblxyXG4gICAgICAgICAgICBHcmlkSGVhZGVyID0gRGl2KCk7XHJcbiAgICAgICAgICAgIEdyaWRIZWFkZXIuU2V0Qm91bmRzKDAsIDAsIDAsIFwiMjlweFwiKTtcclxuICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIgPSBEaXYoKTtcclxuXHJcbiAgICAgICAgICAgIEdyaWRCb2R5Q29udGFpbmVyLlN0eWxlLk92ZXJmbG93WCA9IE92ZXJmbG93LkF1dG87XHJcbiAgICAgICAgICAgIEdyaWRCb2R5Q29udGFpbmVyLlN0eWxlLk92ZXJmbG93WSA9IE92ZXJmbG93LkF1dG87XHJcblxyXG4gICAgICAgICAgICBHcmlkSGVhZGVyQ29udGFpbmVyLlN0eWxlLk92ZXJmbG93ID0gT3ZlcmZsb3cuSGlkZGVuO1xyXG5cclxuICAgICAgICAgICAgR3JpZEJvZHkgPSBEaXYoKTtcclxuICAgICAgICAgICAgR3JpZEJvZHkuU2V0Qm91bmRzKDAsIDAsIDAsIDApO1xyXG5cclxuICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIuQXBwZW5kQ2hpbGQoR3JpZEJvZHkpO1xyXG4gICAgICAgICAgICBHcmlkSGVhZGVyQ29udGFpbmVyLkFwcGVuZENoaWxkKEdyaWRIZWFkZXIpO1xyXG5cclxuICAgICAgICAgICAgR3JpZEZpbmRQYW5lbCA9IERpdihcImhlYWRpbmctY29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICBHcmlkRmluZFBhbmVsLlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkhpZGRlbjtcclxuICAgICAgICAgICAgR3JpZEZpbmRQYW5lbC5TZXRCb3VuZHMoMCwgMCwgXCIxMDAlXCIsIDQ2KTtcclxuXHJcbiAgICAgICAgICAgIFNlYXJjaFRleHRJbnB1dCA9IG5ldyBUZXh0SW5wdXQoKSB7IE9uVGV4dENoYW5nZWQgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihfc2VhcmNoVGltZXIgPiAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KF9zZWFyY2hUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKFNlYXJjaFRleHRJbnB1dC5UZXh0KSlcclxuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgX3NlYXJjaFRpbWVyID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbilfc2VhcmNoLCA1MDApO1xyXG4gICAgICAgICAgICB9LCBPbktleURvd24gPSAoc2VuZGVyLCBldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoZXYuS2V5Q29kZSA9PSBLZXlDb2Rlcy5FbnRlcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidG5GaW5kLkNvbnRlbnQuQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSB9O1xyXG4gICAgICAgICAgICBTZWFyY2hUZXh0SW5wdXQuQm91bmRzID0gbmV3IFZlY3RvcjQoMzAsIDEzLCAzNTAsIDIyKTtcclxuICAgICAgICAgICAgU2VhcmNoVGV4dElucHV0LlNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRW50ZXIgdGV4dCB0byBzZWFyY2guLi5cIik7XHJcblxyXG4gICAgICAgICAgICBidG5GaW5kID0gbmV3IFNpbXBsZUJ1dHRvbigpIHsgVGV4dCA9IFwiRmluZFwiLCBJdGVtQ2xpY2sgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihfc2VhcmNoVGltZXIgPiAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KF9zZWFyY2hUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfc2VhcmNoKCk7XHJcbiAgICAgICAgICAgIH0sIEJvdW5kcyA9IG5ldyBWZWN0b3I0KDM4NSwgMTMsIDYwLCAyMikgfTtcclxuICAgICAgICAgICAgYnRuQ2xlYXIgPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBUZXh0ID0gXCJDbGVhclwiLCBJdGVtQ2xpY2sgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihfc2VhcmNoVGltZXIgPiAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KF9zZWFyY2hUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBTZWFyY2hUZXh0SW5wdXQuVGV4dCA9IHN0cmluZy5FbXB0eTtcclxuICAgICAgICAgICAgfSwgQm91bmRzID0gbmV3IFZlY3RvcjQoNDQ5LCAxMywgNjAsIDIyKSB9O1xyXG5cclxuICAgICAgICAgICAgYnRuQ2xvc2UgPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBCb3VuZHMgPSBuZXcgVmVjdG9yNCg3LCAxNSwgMTgsIDE4KSwgSXRlbUNsaWNrID0gKHNlbmRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xlYXIuQ29udGVudC5DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgQ2xvc2VGaW5kUGFuZWwoKTtcclxuICAgICAgICAgICAgfSB9O1xyXG4gICAgICAgICAgICBidG5DbG9zZS5Db250ZW50LklubmVySFRNTCA9IFwiJnRpbWVzO1wiO1xyXG5cclxuXHJcbiAgICAgICAgICAgIEdyaWRGaW5kUGFuZWwuQXBwZW5kQ2hpbGRyZW4oYnRuQ2xvc2UsIFNlYXJjaFRleHRJbnB1dCwgYnRuRmluZCwgYnRuQ2xlYXIpO1xyXG5cclxuICAgICAgICAgICAgU2V0RGVmYXVsdFNpemVzKCk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uTW91c2VVcCA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoUmVzaXplSW5kZXggPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaW50IHggPSBTY3JpcHQuV3JpdGU8aW50PihcImV2LnBhZ2VYXCIpO1xyXG4gICAgICAgICAgICAgICAgeCA9IENvbHVtbnNbUmVzaXplSW5kZXhdLldpZHRoICsgKHggLSBSZXNpemVQYWdlWCk7XHJcbiAgICAgICAgICAgICAgICBpZih4IDwgMjQpXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IDI0O1xyXG4gICAgICAgICAgICAgICAgQ29sdW1uc1tSZXNpemVJbmRleF0uV2lkdGggPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgIEZvcm0uU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBSZXNpemVJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgUmVzaXplU3BhbiA9IG51bGw7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBPblJlc2l6ZSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2FjaGVSb3cgPSBuZXcgRGljdGlvbmFyeTxpbnQsIEhUTUxEaXZFbGVtZW50PigpO1xyXG4gICAgICAgICAgICAgICAgRGVsYXllZFJlbmRlckdyaWQoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW50IHByZXZsZWZ0ID0gMDtcclxuICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIuT25TY3JvbGwgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHByZXZsZWZ0ICE9IEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbExlZnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FjaGVSb3cgPSBuZXcgRGljdGlvbmFyeTxpbnQsIEhUTUxEaXZFbGVtZW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZsZWZ0ID0gR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBEZWxheWVkUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEZWxheWVkUmVuZGVyR3JpZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9uTG9hZGVkID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9uQ2VsbFJvd01vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRm9jdXNlZENvbHVtbiA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkFzPEhUTUxFbGVtZW50PigpLkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPblJvd0NsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighU2V0dGluZ3MuSXNDaHJvbWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2xpY2tUaW1lRGlmZiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tUaW1lRGlmZiA9IFN0b3B3YXRjaC5TdGFydE5ldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja1RpbWVEaWZmLlN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtcyA9IGNsaWNrVGltZURpZmYuRWxhcHNlZE1pbGxpc2Vjb25kcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tUaW1lRGlmZiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlbXMgPCAyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9uRG91YmxlQ2xpY2soZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBEYXRhUm93SGFuZGxlID0gR2xvYmFsLlBhcnNlSW50KGV2LkN1cnJlbnRUYXJnZXQuR2V0QXR0cmlidXRlKFwiaVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1ldiA9IGV2LkFzPE1vdXNlRXZlbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBpZihBbGxvd011bHRpU2VsZWN0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1ldi5DdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRSb3dzLkFkZE9yU2V0KHRydWUsIERhdGFSb3dIYW5kbGUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihtZXYuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRSb3dzLkNsZWFyQW5kQWRkT3JTZXQodHJ1ZSwgRGF0YVJvd0hhbmRsZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZihEYXRhUm93SGFuZGxlICE9IF9mb2N1c2VkRGF0YUhhbmRsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkRGF0YUhhbmRsZSA9IERhdGFSb3dIYW5kbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBDb250ZW50LlRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgT25Eb3VibGVDbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGRyaCA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG4gICAgICAgICAgICAgICAgaWYoT25Sb3dEb3VibGVDbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uUm93RG91YmxlQ2xpY2soZHJoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihfdXNlRWRpdEZvcm0pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkciA9IERhdGFTb3VyY2VbZHJoXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZkcmUgPSBuZXcgRGF0YVJvd0VkaXRGb3JtKGlkciwgdGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmRyZS5TaG93RGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uS2V5RG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtldiA9IGV2LkFzPEtleWJvYXJkRXZlbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAvL0dsb2JhbC5BbGVydChcIkNPTlRST0wgKyBBXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYoQWxsb3dNdWx0aVNlbGVjdGlvbiAmJiBrZXYuQ3RybEtleSAmJiAoa2V2LktleUNvZGUgPT0gNjUgfHwga2V2LktleUNvZGUgPT0gOTcpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleUNvZGUgPT0gNjUgfHwga2V5Q29kZSA9PSA5N1xyXG4gICAgICAgICAgICAgICAgICAgIC8vR2xvYmFsLkFsZXJ0KFwiQWxsb3dNdWx0aVNlbGVjdGlvbiA9IFRSVUVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VsZWN0QWxsUm93cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vR2xvYmFsLkFsZXJ0KFwiQWxsb3dNdWx0aVNlbGVjdGlvbiA9IEZBTFNFXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQ29udGV4dE1lbnUgPSBuZXcgQ29udGV4dE1lbnUoKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRleHRNZW51LkNvbnRleHRJdGVtcy5BZGRSYW5nZShuZXcgQ29udGV4dEl0ZW1bXSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgQ29udGV4dEl0ZW0oXCJTb3J0IEFzY2VuZGluZ1wiLCAoY20pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihGb2N1c2VkQ29sdW1uID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb3J0Q29sdW1uKENvbHVtbnNbRm9jdXNlZENvbHVtbl0sIEdyaWRWaWV3U29ydE1vZGUuQXNjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBDb250ZXh0SXRlbShcIlNvcnQgRGVzY2VuZGluZ1wiLCAoY20pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihGb2N1c2VkQ29sdW1uID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb3J0Q29sdW1uKENvbHVtbnNbRm9jdXNlZENvbHVtbl0sIEdyaWRWaWV3U29ydE1vZGUuRGVzYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgQ29udGV4dEl0ZW0oXCJDbGVhciBBbGwgU29ydGluZ1wiLCAoY20pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBDbGVhclNvcnRDb2x1bW4oKTtcclxuICAgICAgICAgICAgICAgIH0sICB0cnVlKSxcclxuICAgICAgICAgICAgICAgIC8vbmV3IENvbnRleHRJdGVtKFwiR3JvdXAgQnkgVGhpcyBDb2x1bW5cIiksXHJcbiAgICAgICAgICAgICAgICAvL25ldyBDb250ZXh0SXRlbShcIkhpZGUgR3JvdXAgQnkgQm94XCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiSGlkZSBUaGlzIENvbHVtblwiLCAoY2kpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihGb2N1c2VkQ29sdW1uID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb2x1bW5zW0ZvY3VzZWRDb2x1bW5dLlZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiVmlldyBDb2x1bW5zXCIpLFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiU2F2ZSBDb2x1bW4gTGF5b3V0XCIpLFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiQmVzdCBGaXRcIiwgKGNpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRm9jdXNlZENvbHVtbiA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uc1tGb2N1c2VkQ29sdW1uXS5XaWR0aCA9IEdldEJlc3RGaXRGb3JDb2x1bW4oQ29sdW1uc1tGb2N1c2VkQ29sdW1uXSk7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkgLFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiQmVzdCBGaXQgKGFsbCBjb2x1bW5zKVwiLCAoY2kpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBCZXN0Rml0QWxsQ29sdW1ucygpO1xyXG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICBuZXcgQ29udGV4dEl0ZW0oXCJGaWx0ZXIgRWRpdG9yLi4uXCIsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgX3Nob3dGaW5kUGFuZWxDb250ZXh0SXRlbSA9IG5ldyBDb250ZXh0SXRlbShcIlNob3cgRmluZCBQYW5lbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT25JdGVtQ2xpY2sgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEZpbmRQYW5lbFZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaW5kUGFuZWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaW5kUGFuZWxWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3IENvbnRleHRJdGVtKFwiU2VsZWN0IEFsbFwiLCAoY20pID0+IHsgU2VsZWN0QWxsUm93cygpOyB9KSxcclxuICAgICAgICAgICAgICAgIG5ldyBDb250ZXh0SXRlbShcIlVuc2VsZWN0IEFsbFwiLCAoY20pID0+IHsgQ2xlYXJTZWxlY3Rpb24oKTsgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE9uRG91YmxlQ2xpY2soZXYuQXM8TW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4+KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbnRleHRNZW51ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZXh0TWVudS5TaG93KEhlbHBlci5HZXRDbGllbnRNb3VzZUxvY2F0aW9uKGV2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIE9uQ29sdW1uT25DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoUmVzaXplSW5kZXggPj0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdjb2wgPSBDb2x1bW5zW0dsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQ29sdW1uQ291bnQoKTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbHVtbnNbaV0gIT0gZ2NvbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbHVtbnNbaV0uU29ydGVkTW9kZSA9IEdyaWRWaWV3U29ydE1vZGUuTm9uZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goZ2NvbC5Tb3J0ZWRNb2RlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHcmlkVmlld1NvcnRNb2RlLk5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRDb2x1bW4oZ2NvbCwgR3JpZFZpZXdTb3J0TW9kZS5Bc2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHcmlkVmlld1NvcnRNb2RlLkFzYzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU29ydENvbHVtbihnY29sLCBHcmlkVmlld1NvcnRNb2RlLkRlc2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHcmlkVmlld1NvcnRNb2RlLkRlc2M6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRDb2x1bW4oZ2NvbCwgR3JpZFZpZXdTb3J0TW9kZS5Ob25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9uQ29sdW1uRHJhZ1N0YXJ0ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTY3JpcHQuQ2FsbChcImV2LmRhdGFUcmFuc2Zlci5zZXREYXRhXCIsIFwiZ3JpZHZpZXdDb2x1bW5EcmFnXCIsIGV2LkN1cnJlbnRUYXJnZXQuR2V0QXR0cmlidXRlKFwiaVwiKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9uQ29sdW1uRHJhZ092ZXIgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE9uQ29sdW1uRHJvcCA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoZXYuVGFyZ2V0ID09IG51bGwgfHwgIShldi5UYXJnZXQgaXMgSFRNTFNwYW5FbGVtZW50KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2LlRhcmdldC5BczxIVE1MU3BhbkVsZW1lbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGFyZ2V0LlBhcmVudEVsZW1lbnQgIT0gR3JpZEhlYWRlcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIEhvdmVySW5kZXggPSBHbG9iYWwuUGFyc2VJbnQodGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG4gICAgICAgICAgICAgICAgdmFyIFNlbGVjdGVkSW5kZXggPSBTY3JpcHQuV3JpdGU8aW50PihcInBhcnNlSW50KGV2LmRhdGFUcmFuc2Zlci5nZXREYXRhKFxcXCJncmlkdmlld0NvbHVtbkRyYWdcXFwiKSk7XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYoU2VsZWN0ZWRJbmRleCA9PSBIb3ZlckluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihIb3ZlckluZGV4IDwgMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IHggPSBTY3JpcHQuV3JpdGU8aW50PihcImV2LmxheWVyWFwiKTtcclxuICAgICAgICAgICAgICAgIHggLT0gdGFyZ2V0LkNsaWVudExlZnQ7XHJcbiAgICAgICAgICAgICAgICBpbnQgdyA9IHRhcmdldC5DbGllbnRXaWR0aCAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoSG92ZXJJbmRleCA9PSBTZWxlY3RlZEluZGV4IC0gMSAmJiB4ID4gdylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZihIb3ZlckluZGV4ID09IFNlbGVjdGVkSW5kZXggKyAxICYmIHggPCB3KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZih4IDwgdylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBEcmFnSW5kZXggPSBIb3ZlckluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERyYWdJbmRleCA9IEhvdmVySW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKERyYWdJbmRleCA8IDAgfHwgU2VsZWN0ZWRJbmRleCA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IENvbHVtbnNbU2VsZWN0ZWRJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZihEcmFnSW5kZXggPT0gQ29sdW1ucy5Db3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDb2x1bW5zLlJlbW92ZShjb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbHVtbnMuQWRkKGNvbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbDEgPSBDb2x1bW5zW0RyYWdJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgQ29sdW1ucy5SZW1vdmUoY29sKTtcclxuICAgICAgICAgICAgICAgICAgICBDb2x1bW5zLkluc2VydChDb2x1bW5zLkluZGV4T2YoY29sMSksIGNvbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBPbkNvbHVtbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IHggPSBTY3JpcHQuV3JpdGU8aW50PihcImV2LmxheWVyWFwiKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldi5UYXJnZXQuQXM8SFRNTFNwYW5FbGVtZW50PigpO1xyXG4gICAgICAgICAgICAgICAgeCAtPSB0YXJnZXQuQ2xpZW50TGVmdDtcclxuICAgICAgICAgICAgICAgIFJlc2l6ZVBhZ2VYID0gU2NyaXB0LldyaXRlPGludD4oXCJldi5wYWdlWFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBGb2N1c2VkQ29sdW1uID0gR2xvYmFsLlBhcnNlSW50KGV2LkN1cnJlbnRUYXJnZXQuR2V0QXR0cmlidXRlKFwiaVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoeCA+PSB0YXJnZXQuQ2xpZW50V2lkdGggLSAyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUluZGV4ID0gR2xvYmFsLlBhcnNlSW50KHRhcmdldC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBSZXNpemVTcGFuID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIEZvcm0uU2V0Q3Vyc29yKEN1cnNvci5FYXN0V2VzdFJlc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVzaXplU3BhbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVzaXplSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgT25Db2x1bW5Nb3VzZU1vdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFJlc2l6ZUluZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB4ID0gU2NyaXB0LldyaXRlPGludD4oXCJldi5sYXllclhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2LlRhcmdldC5BczxIVE1MU3BhbkVsZW1lbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgeCAtPSB0YXJnZXQuQ2xpZW50TGVmdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoeCA+PSB0YXJnZXQuQ2xpZW50V2lkdGggLSAyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRm9ybS5TZXRDdXJzb3IoQ3Vyc29yLkVhc3RXZXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBGb3JtLlNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBPbkNvbHVtbk1vdXNlTGVhdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFJlc2l6ZUluZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZvcm0uU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIE9uUm93RHJhZ1N0YXJ0ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTY3JpcHQuQ2FsbChcImV2LmRhdGFUcmFuc2Zlci5zZXREYXRhXCIsIFwiZ3JpZHZpZXdSb3dEcmFnXCIsIEpTT04uU3RyaW5naWZ5KERhdGFTb3VyY2VbR2xvYmFsLlBhcnNlSW50KGV2LkN1cnJlbnRUYXJnZXQuR2V0QXR0cmlidXRlKFwiaVwiKSldLkdldE9mZmxpbmVEYXRhUm93KCkpKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGRyZW4oR3JpZEZpbmRQYW5lbCwgR3JpZEhlYWRlckNvbnRhaW5lciwgR3JpZEJvZHlDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgRmlsdGVyUm93T25DaGFuZ2UgPSAodGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbHVtbnNbR2xvYmFsLlBhcnNlSW50KHRlLkNvbnRlbnQuR2V0QXR0cmlidXRlKFwiaVwiKSldLkZpbHRlclZhbHVlID0gdGUuVGV4dDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIEF1dG9HZW5lcmF0ZUNvbHVtbnNGcm9tU291cmNlID0gYXV0b0dlbmVyYXRlQ29sdW1ucztcclxuICAgICAgICAgICAgQ29sdW1uQXV0b1dpZHRoID0gY29sdW1uQXV0b1dpZHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIERhdGFTb3VyY2VfT25EYXRhU291cmNlQ2hhbmdlZChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFNvcnRDb2x1bW4oKTtcclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuUmVuZGVyKCk7XHJcbiAgICAgICAgICAgIEhhc1JlbmRlcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IEdldFJhd1Zpc2libGVSb3dDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR3JpZEJvZHlDb250YWluZXIuQ2xpZW50SGVpZ2h0ID09IDAgPyAwLjBmIDogR3JpZEJvZHlDb250YWluZXIuQ2xpZW50SGVpZ2h0IC8gVW5pdEhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBHZXRSYXdUb3BSb3dJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsVG9wID09IDAgPyAwLjBmIDogR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsVG9wIC8gUGl4ZWxzUGVyUm93KFJvd0NvdW50KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVmFsaWRhdGVHcmlkV2lkdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gR2V0Q29sdW1uV2lkdGhzKCk7XHJcbiAgICAgICAgICAgIEdyaWRCb2R5LlN0eWxlLldpZHRoID0gKHdpZHRoKS5Ub1B4KCk7XHJcbiAgICAgICAgICAgIEdyaWRIZWFkZXIuU3R5bGUuV2lkdGggPSAoKHdpZHRoKSArIDI0KS5Ub1B4KCk7IC8vICh3aWR0aCkuVG9QeCgpO1xyXG4gICAgICAgICAgICBpZihSaWdodE9mVGFibGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmlnaHRPZlRhYmxlID0gRGl2KCk7XHJcbiAgICAgICAgICAgICAgICBHcmlkQm9keS5BcHBlbmRDaGlsZChSaWdodE9mVGFibGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKFJpZ2h0T2ZUYWJsZUhlYWRlciA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSaWdodE9mVGFibGVIZWFkZXIgPSBEaXYoKTtcclxuICAgICAgICAgICAgICAgIEdyaWRIZWFkZXIuQXBwZW5kQ2hpbGQoUmlnaHRPZlRhYmxlSGVhZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSaWdodE9mVGFibGUuU2V0Qm91bmRzKHdpZHRoIC0gMSwgMCwgMSwgMSk7XHJcbiAgICAgICAgICAgIFJpZ2h0T2ZUYWJsZUhlYWRlci5TZXRCb3VuZHMod2lkdGggLSAxLCAwLCAxLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBQaXhlbHNQZXJSb3coaW50IHJvd0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocm93Q291bnQgPiBTZXR0aW5ncy5NYXhpbXVtUGl4ZWxTY3JvbGxpbmdSb3dzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMy4wZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVbml0SGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBWYWxpZGF0ZUdyaWRIZWlnaHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBSb3dDb3VudCgpO1xyXG4gICAgICAgICAgICB2YXIgcHByID0gUGl4ZWxzUGVyUm93KGkpO1xyXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcHByICogaTtcclxuXHJcbiAgICAgICAgICAgIGlmKGkgPiBTZXR0aW5ncy5NYXhpbXVtUGl4ZWxTY3JvbGxpbmdSb3dzICYmIEdyaWRCb2R5Q29udGFpbmVyLkNsaWVudEhlaWdodCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodCArPSAoKEdyaWRCb2R5Q29udGFpbmVyLkNsaWVudEhlaWdodCAvIFVuaXRIZWlnaHQpICogcHByKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgR3JpZEJvZHkuU3R5bGUuSGVpZ2h0ID0gaGVpZ2h0LlRvUHgoKTtcclxuICAgICAgICAgICAgaWYoQm90dG9uT2ZUYWJsZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCb3R0b25PZlRhYmxlID0gRGl2KCk7XHJcbiAgICAgICAgICAgICAgICBHcmlkQm9keS5BcHBlbmRDaGlsZChCb3R0b25PZlRhYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCb3R0b25PZlRhYmxlLlNldEJvdW5kcygwLCBoZWlnaHQsIDEsIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVmFsaWRhdGVHcmlkU2l6ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWYWxpZGF0ZUdyaWRIZWlnaHQoKTtcclxuICAgICAgICAgICAgVmFsaWRhdGVHcmlkV2lkdGgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFySGVhZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyaWRIZWFkZXIuRW1wdHkoKTtcclxuICAgICAgICAgICAgR3JpZEhlYWRlci5BcHBlbmRDaGlsZChSaWdodE9mVGFibGVIZWFkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJDb2x1bW5zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbHVtbnMgPSBuZXcgTGlzdDxHcmlkVmlld0NvbHVtbj4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyVmlldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2x1bW5zID0gbmV3IExpc3Q8R3JpZFZpZXdDb2x1bW4+KCk7XHJcbiAgICAgICAgICAgIFZpc2libGVSb3dIYW5kbGVzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuICAgICAgICAgICAgX2RhdGFTb3VyY2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJCb2R5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyaWRCb2R5LkVtcHR5KCk7XHJcbiAgICAgICAgICAgIEdyaWRCb2R5LkFwcGVuZENoaWxkcmVuKFJpZ2h0T2ZUYWJsZSwgQm90dG9uT2ZUYWJsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhckdyaWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2xlYXJIZWFkZXIoKTtcclxuICAgICAgICAgICAgQ2xlYXJCb2R5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludCBEcmFnSW5kZXggPSAtMTtcclxuICAgICAgICBwcml2YXRlIGludCBSZXNpemVJbmRleCA9IC0xO1xyXG4gICAgICAgIHByaXZhdGUgaW50IFJlc2l6ZVBhZ2VYID0gMDtcclxuICAgICAgICBwcml2YXRlIEhUTUxTcGFuRWxlbWVudCBSZXNpemVTcGFuID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbk9uQ2xpY2s7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb248RXZlbnQ8SFRNTFNwYW5FbGVtZW50Pj4gT25Db2x1bW5EcmFnU3RhcnQ7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb248RXZlbnQ8SFRNTFNwYW5FbGVtZW50Pj4gT25Db2x1bW5EcmFnT3ZlcjtcclxuICAgICAgICBwcml2YXRlIEFjdGlvbjxFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbkRyb3A7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbk1vdXNlRG93bjtcclxuICAgICAgICBwcml2YXRlIEFjdGlvbjxNb3VzZUV2ZW50PEhUTUxTcGFuRWxlbWVudD4+IE9uQ29sdW1uTW91c2VNb3ZlO1xyXG4gICAgICAgIHByaXZhdGUgQWN0aW9uPE1vdXNlRXZlbnQ8SFRNTFNwYW5FbGVtZW50Pj4gT25Db2x1bW5Nb3VzZUxlYXZlO1xyXG5cclxuICAgICAgICBwcml2YXRlIEFjdGlvbjxFdmVudDxIVE1MRGl2RWxlbWVudD4+IE9uUm93RHJhZ1N0YXJ0O1xyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgU2V0dXBDb2x1bW4oSFRNTFNwYW5FbGVtZW50IHNlLCBpbnQgaW5kZXgsIEdyaWRWaWV3Q29sdW1uIGdjb2wpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzZS5TZXRBdHRyaWJ1dGUoXCJpXCIsIENvbnZlcnQuVG9TdHJpbmcoaW5kZXgpKTtcclxuICAgICAgICAgICAgc2UuU2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgc2UuT25DbGljayA9IE9uQ29sdW1uT25DbGljaztcclxuICAgICAgICAgICAgc2UuT25EcmFnU3RhcnQgPSBPbkNvbHVtbkRyYWdTdGFydDtcclxuICAgICAgICAgICAgc2UuT25EcmFnT3ZlciA9IE9uQ29sdW1uRHJhZ092ZXI7XHJcbiAgICAgICAgICAgIHNlLk9uRHJvcCA9IE9uQ29sdW1uRHJvcDtcclxuICAgICAgICAgICAgc2UuT25Nb3VzZURvd24gPSBPbkNvbHVtbk1vdXNlRG93bjtcclxuICAgICAgICAgICAgc2UuT25Nb3VzZU1vdmUgPSBPbkNvbHVtbk1vdXNlTW92ZTtcclxuICAgICAgICAgICAgc2UuT25Nb3VzZUxlYXZlID0gT25Db2x1bW5Nb3VzZUxlYXZlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgbGFzdElkID0gLTE7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IFByZXZTY3JvbGwgPSAtMTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFByb2Nlc3NCbHVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFByZXZTY3JvbGwgIT0gR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsVG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBHcmlkQm9keS5DbGFzc0xpc3QuQWRkKFwiYmx1clwiKTtcclxuICAgICAgICAgICAgICAgIGlmKGxhc3RJZCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KGxhc3RJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdElkID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGFzdElkID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHcmlkQm9keS5DbGFzc0xpc3QuUmVtb3ZlKFwiYmx1clwiKTtcclxuICAgICAgICAgICAgICAgIH0pLCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFByZXZTY3JvbGwgPSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxUb3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIEFjdGlvbjxUZXh0SW5wdXQ+IEZpbHRlclJvd09uQ2hhbmdlO1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBSZW5kZXJUaW1lID0gLTE7XHJcbiAgICAgICAgcHJpdmF0ZSBBY3Rpb24gcmVuZGVyR3JpZEludGVybmFsO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfZGlzYWJsZVJlbmRlciA9IGZhbHNlO1xyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbmRlckdyaWQoYm9vbCBjbGVhciA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihjbGVhcilcclxuICAgICAgICAgICAgICAgIENhY2hlUm93ID0gbmV3IERpY3Rpb25hcnk8aW50LCBIVE1MRGl2RWxlbWVudD4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKFJlbmRlclRpbWUgPiAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR2xvYmFsLkNsZWFyVGltZW91dChSZW5kZXJUaW1lKTtcclxuICAgICAgICAgICAgICAgIFJlbmRlclRpbWUgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKXJlbmRlckdyaWRJbnRlcm5hbCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJHcmlkSW50ZXJuYWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgU29ydFNldHRpbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgR3JpZFZpZXdDb2x1bW4gQ29sdW1uO1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld1NvcnRNb2RlIFNvcnRNb2RlO1xyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94IDogR3JpZFZpZXdDZWxsRGlzcGxheVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIHJlc291cmNlX2NoZWNrZWQgPSBcImNoZWNrZWRcIjtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIEhUTUxFbGVtZW50IE9uQ3JlYXRlKEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBncmlkVmlldy5HZXRSb3dDZWxsVmFsdWUoZGF0YVJvd0luZGV4LCBjb2x1bW5JbmRleCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IENvbnRyb2wuRGl2KFwiY2VsbFwiKTtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gQ29udHJvbC5JbnB1dChcIlwiLCBJbnB1dFR5cGUuQ2hlY2tib3gpO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHNGdWxsKCk7XHJcbiAgICAgICAgICAgIGlucHV0LlNldENoZWNrZWQodmFsdWUpO1xyXG4gICAgICAgICAgICBpbnB1dC5TdHlsZS5NYXJnaW4gPSBcIjBcIjtcclxuICAgICAgICAgICAgY2VsbC5BcHBlbmRDaGlsZChpbnB1dCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2VsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmlkVmlld0NlbGxEaXNwbGF5SW1hZ2UgOiBHcmlkVmlld0NlbGxEaXNwbGF5XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlQmFzZTY0UmVzb3VyY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBIVE1MRWxlbWVudCBPbkNyZWF0ZShHcmlkVmlldyBncmlkVmlldywgaW50IGRhdGFSb3dJbmRleCwgaW50IGNvbHVtbkluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNyYyA9IChncmlkVmlldy5HZXRSb3dDZWxsVmFsdWUoZGF0YVJvd0luZGV4LCBjb2x1bW5JbmRleCkgKyBcIlwiKS5IdG1sVXJsRXNjYXBlKCk7XHJcbiAgICAgICAgICAgIHZhciBpbWdEaXYgPSBDb250cm9sLkRpdihcImNlbGxcIik7XHJcblxyXG4gICAgICAgICAgICBpbWdEaXYuU2V0SW1hZ2Uoc3JjLCAhVXNlQmFzZTY0UmVzb3VyY2UpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGltZ0RpdjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbWFnZUVkaXQgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBDb250cm9sIF9ub0ltYWdlRGF0YVRleHQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfaXNVUkw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIGlzVXJsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2lzVVJMOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfaXNVUkwgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2lzVVJMID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVmcmVzaEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJbWFnZUVkaXQoKSA6IGJhc2UoXCJpbnB1dGNvbnRyb2xcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQgPSBuZXcgQ29udHJvbChcImZvcm0taGVhZGluZy10aXRsZVwiKTtcclxuICAgICAgICAgICAgX25vSW1hZ2VEYXRhVGV4dC5Db250ZW50LklubmVySFRNTCA9IFwiTm8gaW1hZ2UgZGF0YVwiO1xyXG4gICAgICAgICAgICBfbm9JbWFnZURhdGFUZXh0LkNvbnRlbnQuU3R5bGUuQ29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQuQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChfbm9JbWFnZURhdGFUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF9pbWFnZTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmcmVzaEltYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKF9pbWFnZSkpXHJcbiAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBfbm9JbWFnZURhdGFUZXh0LkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2ltYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQuQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuU2V0SW1hZ2UoX2ltYWdlLCBfaXNVUkwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBJbWFnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9pbWFnZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2ltYWdlID09IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIF9pbWFnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgUmVmcmVzaEltYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFByb2dyZXNzQ29udHJvbCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIGludCBwb3NpdGlvbjtcclxuXHJcbiAgICAgICAgcHVibGljIEhUTUxEaXZFbGVtZW50IGludGVybmFsUHJvZ3Jlc3NDb250cm9sO1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBtYXhpbXVtO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IFN0ZXAgPSAxO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBEaXNhYmxlVXBkYXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE5leHRTdGVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBvc2l0aW9uICs9IFN0ZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE1heGltdW1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBtYXhpbXVtOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAxO1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgPCBwb3NpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbWF4aW11bSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYoIURpc2FibGVVcGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgUG9zaXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBwb3NpdGlvbjsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodmFsdWUgPiBtYXhpbXVtKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWF4aW11bTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZighRGlzYWJsZVVwZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICBVcGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb2dyZXNzQ29udHJvbCgpIDogYmFzZShcInByb2dyZXNzYmFyXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnRlcm5hbFByb2dyZXNzQ29udHJvbCA9IERpdihcInByb2dyZXNzYmFyYm9keVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChpbnRlcm5hbFByb2dyZXNzQ29udHJvbCk7XHJcblxyXG4gICAgICAgICAgICBVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVwZGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihEaXNhYmxlVXBkYXRlIHx8IGludGVybmFsUHJvZ3Jlc3NDb250cm9sID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmKG1heGltdW0gPT0gMCB8fCBwb3NpdGlvbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxQcm9ncmVzc0NvbnRyb2wuU3R5bGUuV2lkdGggPSBcIjAlXCI7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHNvdXJjZSA9IFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwiKCh0aGlzLnBvc2l0aW9uIC8gdGhpcy5tYXhpbXVtKSAqIDEwMC4wMCkgKyAnJSdcIik7XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbFByb2dyZXNzQ29udHJvbC5TdHlsZS5XaWR0aCA9IFwiY2FsYyhcIiArIHNvdXJjZSArIFwiIC0gMnB4KVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgW05hbWVzcGFjZSh0cnVlKV1cclxuICAgIHB1YmxpYyBjbGFzcyBSaWJib25CdXR0b24gOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgX2ljb24gPSBcIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEljb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2ljb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9pY29uICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pY29uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvY2Vzc0ltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF9pY29uVVJMID0gXCJcIjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBJY29uVVJMXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pY29uVVJMO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfaWNvblVSTCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfaWNvblVSTCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFByb2Nlc3NJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBfY2FwdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfY2FwdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2NhcHRpb24gIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NhcHRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBQcm9jZXNzQ2FwdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBCZWdpbkdyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTbWFsbENhcHRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxSaWJib25CdXR0b24+IE9uSXRlbUNsaWNrO1xyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBjYXB0aW9uRGl2ID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgaW1hZ2VEaXYgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBzZXRFbmFibGVkKGJvb2wgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGFuZ2VTdGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihpbWFnZURpdiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGl2LkNsYXNzTGlzdC5SZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGNhcHRpb25EaXYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LkNsYXNzTGlzdC5SZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGltYWdlRGl2ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEaXYuQ2xhc3NMaXN0LkFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoY2FwdGlvbkRpdiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcHRpb25EaXYuQ2xhc3NMaXN0LkFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFbmFibGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHNldEVuYWJsZWQodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUmliYm9uQnV0dG9uKHN0cmluZyBjYXB0aW9uID0gXCJcIiwgYm9vbCBfaXNTbWFsbENhcHRpb24gPSBmYWxzZSkgOiBiYXNlKF9pc1NtYWxsQ2FwdGlvbiA/IFwicmliYm9uYnV0dG9uc21hbGxcIiA6IFwicmliYm9uYnV0dG9uXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYXB0aW9uID0gY2FwdGlvbjtcclxuICAgICAgICAgICAgSXNTbWFsbENhcHRpb24gPSBfaXNTbWFsbENhcHRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFJpYmJvbkJ1dHRvbj4gQWZ0ZXJJdGVtQ2xpY2s7XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIYXNSZW5kZXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvb2wgd2FzRW5hYmxlZCA9IGVuYWJsZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZW5hYmxlZCAmJiBPbkl0ZW1DbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uSXRlbUNsaWNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgaWYod2FzRW5hYmxlZCAmJiBBZnRlckl0ZW1DbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIEFmdGVySXRlbUNsaWNrKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgUHJvY2Vzc0NhcHRpb24oKTtcclxuICAgICAgICAgICAgUHJvY2Vzc0ltYWdlKCk7XHJcblxyXG4gICAgICAgICAgICBzZXRFbmFibGVkKGVuYWJsZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUHJvY2Vzc0NhcHRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY2FwdGlvbkRpdiAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LlJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FwdGlvbkRpdiA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoQ2FwdGlvbikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhcHRpb25EaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsY2FwdGlvblwiIDogXCJyaWJib25idXR0b25jYXB0aW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhcHRpb25EaXYuSW5uZXJIVE1MID0gQ2FwdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKGNhcHRpb25EaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQcm9jZXNzSW1hZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoaW1hZ2VEaXYgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoSWNvbikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsaWNvblwiIDogXCJyaWJib25idXR0b25pY29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGl2LlN0eWxlLkJhY2tncm91bmQgPSBHZXRJbWFnZVN0cmluZyhJY29uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoSWNvblVSTCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsaWNvblwiIDogXCJyaWJib25idXR0b25pY29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGl2LlN0eWxlLkJhY2tncm91bmQgPSBHZXRJbWFnZVN0cmluZ1VSSShJY29uVVJMKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGltYWdlRGl2ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChpbWFnZURpdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShJY29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZURpdi5TdHlsZS5CYWNrZ3JvdW5kID0gR2V0SW1hZ2VTdHJpbmcoSWNvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKEljb25VUkwpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGl2LlN0eWxlLkJhY2tncm91bmQgPSBHZXRJbWFnZVN0cmluZ1VSSShJY29uVVJMKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaW1hZ2VEaXYgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VEaXYuU3R5bGUuQmFja2dyb3VuZFNpemUgPSBcIjEwMCUgMTAwJVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGNhcHRpb25EaXYgIT0gbnVsbCAmJiBJc1NtYWxsQ2FwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LlN0eWxlLkxlZnQgPSBcIjI4cHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGNhcHRpb25EaXYgIT0gbnVsbCAmJiBJc1NtYWxsQ2FwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LlN0eWxlLkxlZnQgPSBcIjZweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIFtOYW1lc3BhY2UodHJ1ZSldXHJcbiAgICBwdWJsaWMgY2xhc3MgUmliYm9uQ29udHJvbCA6IENvbnRyb2wsIElQYWdlc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFJpYmJvblBhZ2U+IFJpYmJvblBhZ2VzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEljb25VUkwgPSBcImZhdi5pY29cIjtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgUmliYm9uVHlwZSBUeXBlO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBBcHBsaWNhdGlvbkljb24gPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248aW50LCBSaWJib25QYWdlPiBPblNlbGVjdGVkUGFnZUNoYW5nZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIFJpYmJvblR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEZ1bGwsXHJcbiAgICAgICAgICAgIENvbXBhY3RcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBSaWJib25Db250cm9sKFJpYmJvblR5cGUgdHlwZSA9IFJpYmJvblR5cGUuRnVsbCkgOiBiYXNlKFwicmliYm9uY29udHJvbFwiICsgKHR5cGUgPT0gUmliYm9uVHlwZS5GdWxsID8gXCJcIiA6IFwiIHJpYmJvbmNvbnRyb2wtY29tcGFjdFwiKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFR5cGUgPSB0eXBlO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5PbkNvbnRleHRNZW51ID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRSaWJib25QYWdlcyhwYXJhbXMgUmliYm9uUGFnZVtdIHBhZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzLkFkZFJhbmdlKHBhZ2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IHNlbGVjdGVkaW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBTZWxlY3RlZEluZGV4XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlIDwgMClcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZGluZGV4ID49IFJpYmJvblBhZ2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkaW5kZXggPSBSaWJib25QYWdlcy5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWRpbmRleCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZGluZGV4ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoT25TZWxlY3RlZFBhZ2VDaGFuZ2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgT25TZWxlY3RlZFBhZ2VDaGFuZ2Uoc2VsZWN0ZWRpbmRleCwgUmliYm9uUGFnZXNbc2VsZWN0ZWRpbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgU2V0U2VsZWN0ZWRJbmRleCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1lbnVDbGljaygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRTZWxlY3RlZEluZGV4KGludCBpbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFJpYmJvblBhZ2VzICE9IG51bGwgJiYgUmliYm9uUGFnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgUmliYm9uUGFnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlci5DbGFzc0xpc3QuUmVtb3ZlKFwicmliYm9ucGFnZWhlYWRlci1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlci5DbGFzc0xpc3QuUmVtb3ZlKFwicmliYm9ucGFnZWhlYWRlci1hY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpID09IGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuQ2xhc3NMaXN0LkFkZChcInJpYmJvbnBhZ2VoZWFkZXItYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLkNsYXNzTGlzdC5BZGQoXCJyaWJib25wYWdlaGVhZGVyLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGFzUmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZihUeXBlID09IFJpYmJvblR5cGUuRnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQXBwbGljYXRpb25JY29uICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb25JY29uLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgQXBwbGljYXRpb25JY29uID0gRGl2KFwiYXBwbGljYXRpb24taWNvblwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBhcHBJY29uSW1hZ2UgPSBEaXYoXCJmYXYtaWNvblwiKTtcclxuICAgICAgICAgICAgICAgIGFwcEljb25JbWFnZS5TdHlsZS5CYWNrZ3JvdW5kID0gUmliYm9uQnV0dG9uLkdldEltYWdlU3RyaW5nVVJJKEljb25VUkwpO1xyXG4gICAgICAgICAgICAgICAgYXBwSWNvbkltYWdlLlN0eWxlLkJhY2tncm91bmRTaXplID0gXCIxMDAlIDEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkljb24uQXBwZW5kQ2hpbGQoYXBwSWNvbkltYWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKEFwcGxpY2F0aW9uSWNvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKFJpYmJvblBhZ2VzICE9IG51bGwgJiYgUmliYm9uUGFnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgd2lkdGggPSA1ODtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBSaWJib25QYWdlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKENvbnRlbnQuQ29udGFpbnMoUmliYm9uUGFnZXNbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uQ29udGVudC5EZWxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBSaWJib25QYWdlc1tpXS5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVHlwZSA9PSBSaWJib25UeXBlLkNvbXBhY3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighUmliYm9uUGFnZXNbaV0uQ29udGVudC5DbGFzc05hbWUuQ29udGFpbnMoXCJyaWJib25wYWdlLWNvbXBhY3RcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSaWJib25QYWdlc1tpXS5Db250ZW50LkNsYXNzTGlzdC5BZGQoXCJyaWJib25wYWdlLWNvbXBhY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFJpYmJvblBhZ2VzW2ldLkNvbnRlbnQuQ2xhc3NOYW1lLkNvbnRhaW5zKFwicmliYm9ucGFnZS1jb21wYWN0XCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uQ29udGVudC5DbGFzc0xpc3QuUmVtb3ZlKFwicmliYm9ucGFnZS1jb21wYWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGluZGV4ID0gaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaSA9PSBzZWxlY3RlZGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyID0gRGl2KFwicmliYm9ucGFnZWhlYWRlciByaWJib25wYWdlaGVhZGVyLWFjdGl2ZVwiICsgKFR5cGUgPT0gUmliYm9uVHlwZS5GdWxsID8gXCJcIiA6IFwiIHJpYmJvbnBhZ2VoZWFkZXItY29tcGFjdFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyID0gRGl2KFwicmliYm9ucGFnZWhlYWRlciByaWJib25wYWdlaGVhZGVyLWhpZGRlblwiICsgKFR5cGUgPT0gUmliYm9uVHlwZS5GdWxsID8gXCJcIiA6IFwiIHJpYmJvbnBhZ2VoZWFkZXItY29tcGFjdFwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLk9uVG91Y2hTdGFydCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuSW5uZXJIVE1MID0gUmliYm9uUGFnZXNbaV0uQ2FwdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGlud2lkdGggPSAyNDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPckVtcHR5KFJpYmJvblBhZ2VzW2ldLkNhcHRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW53aWR0aCArPSAoaW50KUdldFRleHRXaWR0aChSaWJib25QYWdlc1tpXS5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlci5TdHlsZS5XaWR0aCA9IGlud2lkdGggKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoUmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKFJpYmJvblBhZ2VzW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gaW53aWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRpbmRleDtcclxuICAgICAgICB9XHJcblxuICAgIFxucHJpdmF0ZSBMaXN0PFJpYmJvblBhZ2U+IF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19SaWJib25QYWdlcz1uZXcgTGlzdDxSaWJib25QYWdlPigpO31cclxufSIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgW05hbWVzcGFjZSh0cnVlKV1cclxuICAgIHB1YmxpYyBjbGFzcyBSaWJib25Hcm91cCA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIENhcHRpb24geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFJpYmJvbkJ1dHRvbj4gQnV0dG9ucyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBwcml2YXRlIEhUTUxEaXZFbGVtZW50IGNhcHRpb25EaXYgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFbmFibGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHNldEVuYWJsZWQodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBzZXRFbmFibGVkKGJvb2wgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihCdXR0b25zLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IEJ1dHRvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbnNbaV0uc2V0RW5hYmxlZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uc1tpXS5zZXRFbmFibGVkKEJ1dHRvbnNbaV0uRW5hYmxlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIENoYW5nZVN0YXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYodmFsdWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGNhcHRpb25EaXYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LkNsYXNzTGlzdC5SZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGNhcHRpb25EaXYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0aW9uRGl2LkNsYXNzTGlzdC5BZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFJpYmJvbkdyb3VwKHN0cmluZyBfY2FwdGlvbiA9IFwiXCIpIDogYmFzZShcInJpYmJvbmdyb3VwXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYXB0aW9uID0gX2NhcHRpb247XHJcbiAgICAgICAgICAgIEJ1dHRvbnMgPSBuZXcgTGlzdDxSaWJib25CdXR0b24+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUmliYm9uR3JvdXAoc3RyaW5nIF9jYXB0aW9uLCBwYXJhbXMgUmliYm9uQnV0dG9uW10gYnV0dG9ucykgOiBiYXNlKFwicmliYm9uZ3JvdXBcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhcHRpb24gPSBfY2FwdGlvbjtcclxuICAgICAgICAgICAgQnV0dG9ucyA9IG5ldyBMaXN0PFJpYmJvbkJ1dHRvbj4oKTtcclxuICAgICAgICAgICAgaWYoYnV0dG9ucyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQnV0dG9ucy5BZGRSYW5nZShidXR0b25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgSFRNTERpdkVsZW1lbnQgQ3JlYXRlVmVydGljYWxMaW5lKGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaHRtbERpdiA9IERpdihcInJpYmJvbnNlcGVyYXRvclwiKTtcclxuICAgICAgICAgICAgaWYoaGVpZ2h0ICE9IDU4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBodG1sRGl2LlN0eWxlLkhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGh0bWxEaXY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgUmVuZGVySW5mb1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGludCBMZWZ0O1xyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgSXNTbWFsbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIFJpYmJvbkJ1dHRvbiBGaXJzdEJ1dHRvbjtcclxuICAgICAgICAgICAgcHVibGljIFJpYmJvbkJ1dHRvbiBTZWNvbmRCdXR0b247XHJcbiAgICAgICAgICAgIHB1YmxpYyBSaWJib25CdXR0b24gVGhpcmRCdXR0b247XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBCZWdpbkdyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxSZW5kZXJJbmZvPiByaUxpc3QgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBHZW5lcmF0ZVJMaXN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFJlbmRlckluZm8gcmkgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYocmlMaXN0ID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJpTGlzdCA9IG5ldyBMaXN0PFJlbmRlckluZm8+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgQnV0dG9ucy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJpID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaSA9IG5ldyBSZW5kZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpLkZpcnN0QnV0dG9uID0gQnV0dG9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmkuSXNTbWFsbCA9IHJpLkZpcnN0QnV0dG9uLklzU21hbGxDYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyaS5Jc1NtYWxsICE9IEJ1dHRvbnNbaV0uSXNTbWFsbENhcHRpb24gfHwgQnV0dG9uc1tpXS5CZWdpbkdyb3VwIHx8ICFCdXR0b25zW2ldLklzU21hbGxDYXB0aW9uIHx8IChyaS5GaXJzdEJ1dHRvbiAhPSBudWxsICYmIHJpLlNlY29uZEJ1dHRvbiAhPSBudWxsICYmIHJpLlRoaXJkQnV0dG9uICE9IG51bGwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaUxpc3QuQWRkKHJpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaSA9IG5ldyBSZW5kZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbiA9IEJ1dHRvbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5Jc1NtYWxsID0gQnV0dG9uc1tpXS5Jc1NtYWxsQ2FwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpLkJlZ2luR3JvdXAgPSBCdXR0b25zW2ldLkJlZ2luR3JvdXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyaS5TZWNvbmRCdXR0b24gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5TZWNvbmRCdXR0b24gPSBCdXR0b25zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpLlRoaXJkQnV0dG9uID0gQnV0dG9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihyaSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJpTGlzdC5BZGQocmkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJpID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEhhc1JlbmRlcmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIEdlbmVyYXRlUkxpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuRW1wdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgcmlMaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByaSA9IHJpTGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihyaS5CZWdpbkdyb3VwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZsYmcgPSBDcmVhdGVWZXJ0aWNhbExpbmUoNTgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZsYmcuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHZsYmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHdpZHRoICs9IDM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocmkuSXNTbWFsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgTWF4V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJpLlRoaXJkQnV0dG9uID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyaS5TZWNvbmRCdXR0b24gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF4V2lkdGggPSBNYXRoLk1heCgoaW50KUdldFRleHRXaWR0aChyaS5GaXJzdEJ1dHRvbi5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyOCArIDYsIDY0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBNYXhXaWR0aCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9IFwiMjZweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQocmkuRmlyc3RCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF4V2lkdGggPSBNYXRoLk1heChNYXRoLk1heCgoaW50KUdldFRleHRXaWR0aChyaS5GaXJzdEJ1dHRvbi5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGludClHZXRUZXh0V2lkdGgocmkuU2Vjb25kQnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSkgKyAyOCArIDYsIDY0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5SZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpLlNlY29uZEJ1dHRvbi5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpLlNlY29uZEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9ICgoKDEwMCAtIDMpIC8gMykgLSAxMSkgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5XaWR0aCA9IE1heFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmkuU2Vjb25kQnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBNYXhXaWR0aCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9IFwiMTFweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmkuU2Vjb25kQnV0dG9uLkNvbnRlbnQuU3R5bGUuVG9wID0gXCI0MXB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChyaS5GaXJzdEJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHJpLlNlY29uZEJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF4V2lkdGggPSBNYXRoLk1heChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguTWF4KE1hdGguTWF4KChpbnQpR2V0VGV4dFdpZHRoKHJpLkZpcnN0QnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50KUdldFRleHRXaWR0aChyaS5TZWNvbmRCdXR0b24uQ2FwdGlvbiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW50KUdldFRleHRXaWR0aChyaS5UaGlyZEJ1dHRvbi5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkpICsgMjggKyA2LCA2NCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5SZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmkuU2Vjb25kQnV0dG9uLlJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5UaGlyZEJ1dHRvbi5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5TZWNvbmRCdXR0b24uQ29udGVudC5TdHlsZS5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpLlRoaXJkQnV0dG9uLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5XaWR0aCA9IE1heFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5TZWNvbmRCdXR0b24uQ29udGVudC5TdHlsZS5XaWR0aCA9IE1heFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5UaGlyZEJ1dHRvbi5Db250ZW50LlN0eWxlLldpZHRoID0gTWF4V2lkdGggKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9IFwiM3B4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpLlNlY29uZEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9IFwiMjZweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaS5UaGlyZEJ1dHRvbi5Db250ZW50LlN0eWxlLlRvcCA9IFwiNDlweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAzXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHJpLkZpcnN0QnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChyaS5TZWNvbmRCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHJpLlRoaXJkQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IE1heFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJpLkZpcnN0QnV0dG9uLlJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgaW53aWR0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmkuRmlyc3RCdXR0b24uQ2FwdGlvbi5Db250YWlucyhcIiBcIikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyaW5ncyA9IHJpLkZpcnN0QnV0dG9uLkNhcHRpb24uU3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGxlbmd0aCA9IHJpLkZpcnN0QnV0dG9uLkNhcHRpb24uTGVuZ3RoIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaiA9IDA7IGogPCBzdHJpbmdzLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihidWlsZGVyLkxlbmd0aCA+IGxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbndpZHRoID0gKGludClHZXRUZXh0V2lkdGgoYnVpbGRlci5Ub1N0cmluZygpLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJ1aWxkZXIuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIiBcIiArIHN0cmluZ3Nbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHN0cmluZ3Nbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlud2lkdGggPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW53aWR0aCA9IChpbnQpR2V0VGV4dFdpZHRoKGJ1aWxkZXIuVG9TdHJpbmcoKSwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpICsgMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW53aWR0aCA9IChpbnQpR2V0VGV4dFdpZHRoKHJpLkZpcnN0QnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSArIDIwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW53aWR0aCA8IDQ0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW53aWR0aCA9IDQ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5XaWR0aCA9IGlud2lkdGggKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGlud2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQocmkuRmlyc3RCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbnQgbWluV2lkdGggPSAoaW50KUdldFRleHRXaWR0aChDYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyMDtcclxuXHJcbiAgICAgICAgICAgIGlmKHdpZHRoIDwgbWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IG1pbldpZHRoO1xyXG5cclxuICAgICAgICAgICAgd2lkdGggKz0gMztcclxuXHJcbiAgICAgICAgICAgIHZhciB2bCA9IENyZWF0ZVZlcnRpY2FsTGluZSg4MCk7XHJcbiAgICAgICAgICAgIHZsLlN0eWxlLkxlZnQgPSB3aWR0aCAtIDEgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHZsKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuV2lkdGggPSB3aWR0aCArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKENhcHRpb24pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXB0aW9uRGl2ID0gRGl2KFwicmliYm9uZ3JvdXBjYXB0aW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhcHRpb25EaXYuSW5uZXJIVE1MID0gQ2FwdGlvbjtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoY2FwdGlvbkRpdik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldEVuYWJsZWQoZW5hYmxlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBbTmFtZXNwYWNlKHRydWUpXVxyXG4gICAgcHVibGljIGNsYXNzIFJpYmJvblBhZ2UgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDYXB0aW9uIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxSaWJib25Hcm91cD4gUmliYm9uR3JvdXBzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgUmliYm9uSGVhZGVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIFJpYmJvblBhZ2Uoc3RyaW5nIF9jYXB0aW9uID0gXCJcIikgOiBiYXNlKFwicmliYm9ucGFnZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FwdGlvbiA9IF9jYXB0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkUmliYm9uR3JvdXBzKHBhcmFtcyBSaWJib25Hcm91cFtdIHBhZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFJpYmJvbkdyb3Vwcy5BZGRSYW5nZShwYWdlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGFzUmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZihSaWJib25Hcm91cHMgPT0gbnVsbCB8fCBSaWJib25Hcm91cHMuQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaW50IHdpZHRoID0gMDtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFJpYmJvbkdyb3Vwcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSaWJib25Hcm91cHNbaV0uUmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBSaWJib25Hcm91cHNbaV0uQ29udGVudC5TdHlsZS5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICB3aWR0aCArPSBHbG9iYWwuUGFyc2VJbnQoUmliYm9uR3JvdXBzW2ldLkNvbnRlbnQuU3R5bGUuV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChSaWJib25Hcm91cHNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cbiAgICBcbnByaXZhdGUgTGlzdDxSaWJib25Hcm91cD4gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1JpYmJvbkdyb3Vwcz1uZXcgTGlzdDxSaWJib25Hcm91cD4oKTt9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNpbXBsZUJ1dHRvbiA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFNpbXBsZUJ1dHRvbj4gSXRlbUNsaWNrO1xyXG4gICAgICAgIHB1YmxpYyBGb3JtIFBhcmVudEZvcm0gPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBEaWFsb2dSZXN1bHRFbnVtIERpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdEVudW0uTm9uZTtcclxuICAgICAgICBwcml2YXRlIEhUTUxJbWFnZUVsZW1lbnQgX2ltYWdlRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgX2ltYWdlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBJbWFnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9pbWFnZTsgfVxyXG4gICAgICAgICAgICBzZXQge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAodmFsdWUgKyBcIlwiKS5UcmltKCk7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSBfaW1hZ2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2ltYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX1Byb2Nlc3NCdXR0b25JbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIF91c2VCYXNlNjRJbWFnZTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlQmFzZTY0SW1hZ2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfdXNlQmFzZTY0SW1hZ2U7IH1cclxuICAgICAgICAgICAgc2V0IHtcclxuICAgICAgICAgICAgICAgIGlmKF91c2VCYXNlNjRJbWFnZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfdXNlQmFzZTY0SW1hZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfUHJvY2Vzc0J1dHRvbkltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfaW1hZ2VSaWdodEFsaWduO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJbWFnZVJpZ2h0QWxpZ25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfaW1hZ2VSaWdodEFsaWduOyB9XHJcbiAgICAgICAgICAgIHNldCB7XHJcbiAgICAgICAgICAgICAgICBpZihfaW1hZ2VSaWdodEFsaWduICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZVJpZ2h0QWxpZ24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfUHJvY2Vzc0J1dHRvbkltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgX2J1dHRvbkltYWdlU2l6ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBCdXR0b25JbWFnZVNpemVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfYnV0dG9uSW1hZ2VTaXplOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfYnV0dG9uSW1hZ2VTaXplICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9idXR0b25JbWFnZVNpemUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfUHJvY2Vzc0J1dHRvbkltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIF9Qcm9jZXNzQnV0dG9uSW1hZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShfaW1hZ2UpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfaW1hZ2VFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2ltYWdlRWxlbWVudC5EZWxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2ltYWdlRWxlbWVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQgPSBuZXcgSFRNTEltYWdlRWxlbWVudCgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50LlNldEltYWdlKF9pbWFnZSwgIV91c2VCYXNlNjRJbWFnZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nIHBhZGRpbmcgPSBfYnV0dG9uSW1hZ2VTaXplID09IDAgPyBcIjE2cHhcIiA6IF9idXR0b25JbWFnZVNpemUuVG9QeCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuSGVpZ2h0ID0gcGFkZGluZztcclxuICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuUG9zaXRpb24gPSBQb3NpdGlvbi5BYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuVG9wID0gXCIxcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighX2ltYWdlUmlnaHRBbGlnbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50LlN0eWxlLkJhY2tncm91bmRQb3NpdGlvbiA9IFwibGVmdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuUGFkZGluZ0xlZnQgPSBwYWRkaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuUGFkZGluZ1JpZ2h0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2ltYWdlRWxlbWVudC5TdHlsZS5MZWZ0ID0gXCIxcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoQ29udGVudC5MYXN0Q2hpbGQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoX2ltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuSW5zZXJ0QmVmb3JlKF9pbWFnZUVsZW1lbnQsIENvbnRlbnQuTGFzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50LlN0eWxlLlJpZ2h0ID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50LlN0eWxlLkxlZnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuQmFja2dyb3VuZFBvc2l0aW9uID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuU3R5bGUuUGFkZGluZ1JpZ2h0ID0gcGFkZGluZztcclxuICAgICAgICAgICAgICAgICAgICBfaW1hZ2VFbGVtZW50LlN0eWxlLlBhZGRpbmdMZWZ0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChfaW1hZ2VFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbihCdXR0b25UeXBlIGJ1dHRvbiA9IEJ1dHRvblR5cGUuQnV0dG9uLCBib29sIGFjID0gdHJ1ZSkgOiBiYXNlKFwic2ltcGxlYnV0dG9uXCIsIGJ1dHRvbiwgYWMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmKGFjKVxyXG4gICAgICAgICAgICAgICAgU3R5bGUuRm9udCA9IFNldHRpbmdzLkZvbnQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLlNldFNpemUoXCI2OXB4XCIsIFwiMjBweFwiKTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuT25DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoZW5hYmxlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuQmx1cigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihEaWFsb2dSZXN1bHQgIT0gRGlhbG9nUmVzdWx0RW51bS5Ob25lICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhcmVudEZvcm0gIT0gbnVsbCAmJiBQYXJlbnRGb3JtLklzRGlhbG9nKCkpIC8vIEp1c3QgaW5jYXNlIHdlIHNldCBkaXNhYmxlZCBhbmQgaXMgZGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJlbnRGb3JtLkRpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEl0ZW1DbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKERpYWxvZ1Jlc3VsdCAhPSBEaWFsb2dSZXN1bHRFbnVtLk5vbmUgJiYgUGFyZW50Rm9ybS5EaWFsb2dSZXN1bHQgIT0gRGlhbG9nUmVzdWx0RW51bS5Ob25lICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhcmVudEZvcm0gIT0gbnVsbCAmJiBQYXJlbnRGb3JtLklzRGlhbG9nKCkpIC8vIEp1c3QgaW5jYXNlIHdlIHNldCBkaXNhYmxlZCBhbmQgaXMgZGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJlbnRGb3JtLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIENvbnRlbnQuT25EYmxDbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQ29udGVudC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQ29udGVudC5Pbk1vdXNlVXAgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiB0aGlzLkNvbnRlbnQuQXM8SFRNTEJ1dHRvbkVsZW1lbnQ+KCkuVGV4dENvbnRlbnQ7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFRleHQgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkFzPEhUTUxCdXR0b25FbGVtZW50PigpLlRleHRDb250ZW50ID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9pbWFnZUVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbWFnZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIF9Qcm9jZXNzQnV0dG9uSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBlbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRW5hYmxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGVuYWJsZWQ7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmKGVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LlJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCAoIWVuYWJsZWQpLlRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3BsaXRDb250cm9sQ29udGFpbmVyIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIFBhbmVsMTtcclxuICAgICAgICBwdWJsaWMgQ29udHJvbCBQYW5lbDI7XHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgU3BsaXR0ZXI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgQ2xpZW50UmVjdCBfcHJldkNsaWVudFJlY3QgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBJc01vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHByaXZhdGUgVmVjdG9yMiBfbW91c2VEb3duVmVjdG9yO1xyXG4gICAgICAgIHByaXZhdGUgVmVjdG9yMiBfY3VycmVudE1vdXNlRG93blZlY3RvcjtcclxuICAgICAgICBwcml2YXRlIGludCBfc3RhcnRpbmdTcGxpdHRlclBvcztcclxuICAgICAgICBwcml2YXRlIGludCBfc3BsaXR0ZXJQb3NpdGlvbiA9IC0xO1xyXG5cclxuICAgICAgICBwcml2YXRlIEZpeGVkU3BsaXR0ZXJQb3NpdGlvbiBmaXhlZFNwbGl0dGVyUG9zdGlvbiA9IEZpeGVkU3BsaXR0ZXJQb3NpdGlvbi5QYW5lbDE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGaXhlZFNwbGl0dGVyUG9zaXRpb24gRml4ZWRTcGxpdHRlclBvc3Rpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmaXhlZFNwbGl0dGVyUG9zdGlvbjsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZml4ZWRTcGxpdHRlclBvc3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIFJlbmRlckNvbnRyb2xzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFNwbGl0dGVyUmVzaXphYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBTcGxpdHRlclBvc2l0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX3NwbGl0dGVyUG9zaXRpb247IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlIDwgMClcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBfc3BsaXR0ZXJQb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIGhvcml6b250YWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEhvcml6b250YWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBob3Jpem9udGFsOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSBob3Jpem9udGFsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlbmRlckNvbnRyb2xzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgIFJlbmRlckNvbnRyb2xzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgUmVzaXplQ2hpbGRyZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5MaW5rZWRGb3JtICE9IG51bGwgJiYgdGhpcy5Db250ZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuTGlua2VkRm9ybS5SZXNpemVDaGlsZHJlbih0aGlzLkNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3BsaXRDb250cm9sQ29udGFpbmVyKCkgOiBiYXNlKFwic3BsaXRjb250cm9sXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBQYW5lbDEgPSBuZXcgQ29udHJvbCgpIHsgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKSB9O1xyXG4gICAgICAgICAgICBQYW5lbDIgPSBuZXcgQ29udHJvbCgpO1xyXG4gICAgICAgICAgICBQYW5lbDEuU3R5bGUuT3ZlcmZsb3cgPSBPdmVyZmxvdy5BdXRvO1xyXG4gICAgICAgICAgICBQYW5lbDIuU3R5bGUuT3ZlcmZsb3cgPSBPdmVyZmxvdy5BdXRvO1xyXG5cclxuICAgICAgICAgICAgU3BsaXR0ZXIgPSBuZXcgQ29udHJvbCgpO1xyXG5cclxuICAgICAgICAgICAgU3BsaXR0ZXIuQ29udGVudC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIVNwbGl0dGVyUmVzaXphYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIElzTW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9tb3VzZURvd25WZWN0b3IgPSBIZWxwZXIuR2V0Q2xpZW50TW91c2VMb2NhdGlvbihldik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4U2l6ZSA9IEdldE1heFNwbGl0dGVyU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgX3N0YXJ0aW5nU3BsaXR0ZXJQb3MgPSBfc3BsaXR0ZXJQb3NpdGlvbiA+IG1heFNpemUgPyBtYXhTaXplIDogX3NwbGl0dGVyUG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIE9uUmVzaXplID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLkxpbmtlZEZvcm0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5MaW5rZWRGb3JtLklzVmlzaWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBjbGllbnRSZWMgPSB0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoX3ByZXZDbGllbnRSZWN0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ByZXZDbGllbnRSZWN0ID0gY2xpZW50UmVjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGZpeGVkU3BsaXR0ZXJQb3N0aW9uID09IEZpeGVkU3BsaXR0ZXJQb3NpdGlvbi5Ob25lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZSBWMSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlIFYyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBib29sIGRpcnR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEhvcml6b250YWwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjbGllbnRSZWMuSGVpZ2h0ICE9IF9wcmV2Q2xpZW50UmVjdC5IZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYxID0gY2xpZW50UmVjLkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYyID0gX3ByZXZDbGllbnRSZWN0LkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjbGllbnRSZWMuV2lkdGggIT0gX3ByZXZDbGllbnRSZWN0LldpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWMSA9IGNsaWVudFJlYy5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYyID0gX3ByZXZDbGllbnRSZWN0LldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRpcnR5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3BsaXR0ZXJQb3NpdGlvbiA9IFYxID09IDAgfHwgVjIgPT0gMCA/IDAgOiAoaW50KShTcGxpdHRlclBvc2l0aW9uICogKFYxIC8gVjIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3ByZXZDbGllbnRSZWN0ID0gY2xpZW50UmVjO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlbmRlckNvbnRyb2xzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgUmVzaXplQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuT25Nb3VzZU1vdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKElzTW91c2VEb3duKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50TW91c2VEb3duVmVjdG9yID0gSGVscGVyLkdldENsaWVudE1vdXNlTG9jYXRpb24oZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBtID0gaG9yaXpvbnRhbCA/IChfbW91c2VEb3duVmVjdG9yLllpIC0gX2N1cnJlbnRNb3VzZURvd25WZWN0b3IuWWkpIDogKF9tb3VzZURvd25WZWN0b3IuWGkgLSBfY3VycmVudE1vdXNlRG93blZlY3Rvci5YaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gR2V0TWF4U3BsaXR0ZXJTaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoKHggPSBmaXhlZFNwbGl0dGVyUG9zdGlvbiA9PSBGaXhlZFNwbGl0dGVyUG9zaXRpb24uUGFuZWwyID8gX3N0YXJ0aW5nU3BsaXR0ZXJQb3MgKyBtIDogX3N0YXJ0aW5nU3BsaXR0ZXJQb3MgLSBtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+IHkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0geTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgU3BsaXR0ZXJQb3NpdGlvbiA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgX2N1cnJlbnRNb3VzZURvd25WZWN0b3IgPSBfbW91c2VEb3duVmVjdG9yO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSZXNpemVDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5Pbk1vdXNlVXAgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIElzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBSZW5kZXJDb250cm9scygpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5BcHBlbmRDaGlsZHJlbihQYW5lbDEsIFNwbGl0dGVyLCBQYW5lbDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgR2V0TWF4U3BsaXR0ZXJTaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXhTaXplID0gKGludCkoSG9yaXpvbnRhbCA/IHRoaXMuQ29udGVudC5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5IZWlnaHQgOiB0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuV2lkdGgpIC0gMTI7XHJcbiAgICAgICAgICAgIGlmKG1heFNpemUgPCAwKVxyXG4gICAgICAgICAgICAgICAgbWF4U2l6ZSA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXhTaXplO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFJlbmRlckNvbnRyb2xzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzcCA9IFNwbGl0dGVyUG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBtYXhTaXplID0gR2V0TWF4U3BsaXR0ZXJTaXplKCk7XHJcblxyXG4gICAgICAgICAgICBpZihfcHJldkNsaWVudFJlY3QgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoc3AgPiBtYXhTaXplKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwID0gbWF4U2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoSG9yaXpvbnRhbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUGFuZWwxLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdHZlcnRpY2FsXCIsIFwic3BsaXRob3Jpem9udGFsXCIpO1xyXG4gICAgICAgICAgICAgICAgUGFuZWwyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdHZlcnRpY2FsXCIsIFwic3BsaXRob3Jpem9udGFsXCIpO1xyXG4gICAgICAgICAgICAgICAgU3BsaXR0ZXIuRXhjaGFuZ2VDbGFzcyhcInNwbGl0dGVydmVydGljYWxcIiwgXCJzcGxpdHRlcmhvcml6b250YWxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgUGFuZWwxLldpZHRoID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIFNwbGl0dGVyLldpZHRoID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIFBhbmVsMi5XaWR0aCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZml4ZWRTcGxpdHRlclBvc3Rpb24gIT0gRml4ZWRTcGxpdHRlclBvc2l0aW9uLlBhbmVsMilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTcGxpdHRlci5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIHNwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUGFuZWwxLkhlaWdodCA9IHNwO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIHNwICsgMTIpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5IZWlnaHQgPSBcIigxMDAlIC0gXCIgKyAoc3AgKyAxMikgKyBcInB4KVwiOyA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCBcIigxMDAlIC0gXCIgKyAoc3ApICsgXCJweClcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMS5IZWlnaHQgPSBcIigxMDAlIC0gXCIgKyBzcCArIFwicHgpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5IZWlnaHQgPSBzcCAtIDEyO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIFwiKDEwMCUgLSBcIiArIChzcCAtIDEyKSArIFwicHgpXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUGFuZWwxLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdGhvcml6b250YWxcIiwgXCJzcGxpdHZlcnRpY2FsXCIpO1xyXG4gICAgICAgICAgICAgICAgUGFuZWwyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdGhvcml6b250YWxcIiwgXCJzcGxpdHZlcnRpY2FsXCIpO1xyXG4gICAgICAgICAgICAgICAgU3BsaXR0ZXIuRXhjaGFuZ2VDbGFzcyhcInNwbGl0dGVyaG9yaXpvbnRhbFwiLCBcInNwbGl0dGVydmVydGljYWxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgUGFuZWwxLkhlaWdodCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBTcGxpdHRlci5IZWlnaHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgUGFuZWwyLkhlaWdodCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZml4ZWRTcGxpdHRlclBvc3Rpb24gIT0gRml4ZWRTcGxpdHRlclBvc2l0aW9uLlBhbmVsMilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTcGxpdHRlci5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKHNwLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUGFuZWwxLldpZHRoID0gc3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5XaWR0aCA9IFwiKDEwMCUgLSBcIiArIChzcCArIDEyKSArIFwicHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFuZWwyLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoc3AgKyAxMiwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gXCIgKyBzcCArIFwicHgpXCIsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQYW5lbDEuV2lkdGggPSBcIigxMDAlIC0gXCIgKyBzcCArIFwicHgpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5XaWR0aCA9IHNwO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArIChzcCArIDEyKSArIFwicHgpXCIsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lciA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQ29udHJvbCBCb2R5O1xyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIFNsaWRlcjtcclxuICAgICAgICBwdWJsaWMgQ29udHJvbCBQYW5lbDtcclxuICAgICAgICBwcml2YXRlIEhUTUxTcGFuRWxlbWVudCBzcGFuO1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBfc2xpZGVXaWR0aDtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBTbGlkZVdpZHRoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX3NsaWRlV2lkdGg7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9zbGlkZVdpZHRoICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zbGlkZVdpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgU2xpZGVyTG9jYXRpb24gX3NsaWRlckxvY2F0aW9uID0gU2xpZGVyTG9jYXRpb24uTGVmdDtcclxuXHJcbiAgICAgICAgcHVibGljIFNsaWRlckxvY2F0aW9uIFNsaWRlckxvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX3NsaWRlckxvY2F0aW9uOyB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfc2xpZGVyTG9jYXRpb24gIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NsaWRlckxvY2F0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfc2xpZGVyVmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBTbGlkZXJWaXNpYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX3NsaWRlclZpc2libGU7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9zbGlkZXJWaXNpYmxlICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zbGlkZXJWaXNpYmxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IHJlZnJlc2hJZCA9IC0xO1xyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgUmVzaXplQ2hpbGRyZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5MaW5rZWRGb3JtICE9IG51bGwgJiYgdGhpcy5Db250ZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlZnJlc2hJZCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWwuQ2xlYXJUaW1lb3V0KHJlZnJlc2hJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWZyZXNoSWQgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTGlua2VkRm9ybS5SZXNpemVDaGlsZHJlbih0aGlzLkNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hJZCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfSksIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lcigpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2R5ID0gbmV3IENvbnRyb2woKTtcclxuICAgICAgICAgICAgU2xpZGVyID0gbmV3IENvbnRyb2woXCJwcmltYXJ5XCIpO1xyXG4gICAgICAgICAgICBQYW5lbCA9IG5ldyBDb250cm9sKCk7XHJcbiAgICAgICAgICAgIHNwYW4gPSBTcGFuKFwiZm9ybS1oZWFkaW5nLXRpdGxlXCIpO1xyXG4gICAgICAgICAgICBzcGFuLlRleHRDb250ZW50ID0gXCI+XCI7XHJcblxyXG4gICAgICAgICAgICBzcGFuLlN0eWxlLkZvbnRXZWlnaHQgPSBcImJvbGRcIjtcclxuICAgICAgICAgICAgc3Bhbi5TdHlsZS5Db2xvciA9IFwid2hpdGVcIjtcclxuXHJcbiAgICAgICAgICAgIFNsaWRlci5Db250ZW50LkFwcGVuZENoaWxkKHNwYW4pO1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkNvbnRlbnQuT25Nb3VzZUVudGVyID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBTbGlkZXIuQ29udGVudC5Pbk1vdXNlTGVhdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNsaWRlci5TdHlsZS5GaWx0ZXIgPSBcImJyaWdodG5lc3MoOTAlKVwiO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLlN0eWxlLlRyYW5zaXRpb24gPSBcIndpZHRoIDFzLCBsZWZ0IDFzXCI7XHJcbiAgICAgICAgICAgIEJvZHkuU3R5bGUuVHJhbnNpdGlvbiA9IFwibGVmdCAxcywgd2lkdGggMXNcIjtcclxuICAgICAgICAgICAgUGFuZWwuU3R5bGUuVHJhbnNpdGlvbiA9IFwid2lkdGggMXNcIjtcclxuXHJcbiAgICAgICAgICAgIFNsaWRlci5TdHlsZS5GaWx0ZXIgPSBcImJyaWdodG5lc3MoOTAlKVwiO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuRm9udFN0eWxlID0gXCIzNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuV2lkdGggPSA2NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuRm9udFN0eWxlID0gXCIyNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuV2lkdGggPSAzMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkNvbnRlbnQuT25DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2xpZGVyVmlzaWJsZSA9ICFTbGlkZXJWaXNpYmxlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfc2xpZGVXaWR0aCA9IDI1MDtcclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZHJlbihQYW5lbCwgU2xpZGVyLCBCb2R5KTtcclxuXHJcbiAgICAgICAgICAgIFJlbmRlckNvbnRyb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbmRlckNvbnRyb2woKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpZHRoO1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2lkdGggPSA2NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gMzA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKFNsaWRlckxvY2F0aW9uID09IFNsaWRlckxvY2F0aW9uLkxlZnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFNsaWRlclZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5UZXh0Q29udGVudCA9IFwiPFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsLldpZHRoID0gU2xpZGVXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBTbGlkZXIuTGVmdCA9IFNsaWRlV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keS5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKHdpZHRoICsgU2xpZGVXaWR0aCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keS5TaXplID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIFwiICsgKHdpZHRoICsgU2xpZGVXaWR0aCkgKyBcInB4KVwiLCBcIjEwMCVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5UZXh0Q29udGVudCA9IFwiPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFNsaWRlci5MZWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBQYW5lbC5XaWR0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9keS5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKHdpZHRoLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBCb2R5LlNpemUgPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gXCIgKyAod2lkdGgpICsgXCJweClcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFBhbmVsLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBQYW5lbC5IZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBTbGlkZXJMb2NhdGlvblxyXG4gICAge1xyXG4gICAgICAgIExlZnQsXHJcbiAgICAgICAgUmlnaHRcclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRhYkNvbnRyb2wgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8VGFiQ29udHJvbFBhZ2U+IFRhYlBhZ2VzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwcml2YXRlIENvbnRyb2wgdGFiSGVhZGVycztcclxuICAgICAgICBwcml2YXRlIENvbnRyb2wgdGFiSGVhZGVyQ29udGFpbmVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGFiQ29udHJvbCgpIDogYmFzZShcInRhYmNvbnRyb2xcIilcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIENvbnRlbnQuT25Db250ZXh0TWVudSA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkUGFnZXMocGFyYW1zIFRhYkNvbnRyb2xQYWdlW10gUGFnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUYWJQYWdlcy5BZGRSYW5nZShQYWdlcyk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuSGFzUmVuZGVyZWQpXHJcbiAgICAgICAgICAgICAgICBSZXNpemVUYWJIZWFkZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgc2hvd0Nsb3NlZEJ1dHRvbjtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgU2hvd0Nsb3NlZEJ1dHRvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaG93Q2xvc2VkQnV0dG9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSAhPSBzaG93Q2xvc2VkQnV0dG9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZWRCdXR0b24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBSZXNpemVUYWJIZWFkZXJzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248aW50PiBPblNlbGVjdGVkVGFiSW5kZXhDaGFuZ2VkID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgc2VsZWN0ZWRpbmRleCA9IDA7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgU2VsZWN0ZWRJbmRleFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZGluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWRpbmRleCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZGluZGV4ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgT25TZWxlY3RlZFRhYkluZGV4Q2hhbmdlZCE9bnVsbD9nbG9iYWw6OkJyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+T25TZWxlY3RlZFRhYkluZGV4Q2hhbmdlZC5JbnZva2UodmFsdWUpKTpudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKFRhYlBhZ2VzICE9IG51bGwgJiYgVGFiUGFnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBUYWJQYWdlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBUYWJQYWdlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGFiQ29udHJvbEFjdGl2ZVN0eWxlQ2hhbmdlKGksIHJlZiBwYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGFiUGFnZXNbaV0gPSBwYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFRhYkNvbnRyb2xBY3RpdmVTdHlsZUNoYW5nZShpbnQgaSwgcmVmIFRhYkNvbnRyb2xQYWdlIHBhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBib29sIElzc2VsZWN0ZWQgPSBpID09IHNlbGVjdGVkaW5kZXg7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgc3RhdGUgPSBJc3NlbGVjdGVkID8gXCJhY3RpdmVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGlmKHBhZ2UuVGFiUGFnZUhlYWRlciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuQ2xhc3NMaXN0LlJlbW92ZShcInRhYmNvbnRyb2xwYWdlaGVhZGVyLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5DbGFzc0xpc3QuUmVtb3ZlKFwidGFiY29udHJvbHBhZ2VoZWFkZXItYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5DbGFzc0xpc3QuQWRkKFwidGFiY29udHJvbHBhZ2VoZWFkZXItXCIgKyBzdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIgPSBEaXYoXCJ0YWJjb250cm9scGFnZWhlYWRlciB0YWJjb250cm9scGFnZWhlYWRlci1cIiArIHN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSXNzZWxlY3RlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuU3R5bGUuTGluZUhlaWdodCA9IFwiNDRweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TdHlsZS5MaW5lSGVpZ2h0ID0gXCI0NnB4XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuU3R5bGUuSGVpZ2h0ID0gXCI0NXB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TZXRBdHRyaWJ1dGUoXCJpXCIsIGkuVG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGlmKHNob3dDbG9zZWRCdXR0b24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHBhZ2UuVGFiUGFnZUhlYWRlckNsb3NlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyQ2xvc2UgPSBEaXYoXCJ0YWJjb250cm9scGFnZWhlYWRlci1jbG9zZWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZS5PbkNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gR2xvYmFsLlBhcnNlSW50KGV2LkN1cnJlbnRUYXJnZXQuUGFyZW50RWxlbWVudC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNwYWdlID0gVGFiUGFnZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjcGFnZS5Db250ZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwYWdlLkNvbnRlbnQuRW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwYWdlLkNvbnRlbnQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3BhZ2UuVGFiUGFnZUhlYWRlciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcGFnZS5UYWJQYWdlSGVhZGVyLkVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcGFnZS5UYWJQYWdlSGVhZGVyLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRhYlBhZ2VzLlJlbW92ZShjcGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID4gVGFiUGFnZXMuQ291bnQgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBUYWJQYWdlcy5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlc2l6ZVRhYkhlYWRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5BcHBlbmRDaGlsZChwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5SZW1vdmVDaGlsZChwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhZ2UuQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gSXNzZWxlY3RlZCA/IFZpc2liaWxpdHkuSW5oZXJpdCA6IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNpemVUYWJIZWFkZXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRhYkhlYWRlcnMgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGFiSGVhZGVycyA9IG5ldyBDb250cm9sKFwidGFiaGVhZGVyLWNvbnRhaW5lclwiKSB7IExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCkgfTtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMuSGVpZ2h0ID0gNDc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVyQ29udGFpbmVyID0gbmV3IENvbnRyb2woKSB7IExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCkgfTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJDb250YWluZXIuV2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJDb250YWluZXIuSGVpZ2h0ID0gNTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVyQ29udGFpbmVyLkFwcGVuZENoaWxkKHRhYkhlYWRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlckNvbnRhaW5lci5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVyQ29udGFpbmVyLlN0eWxlLk92ZXJmbG93WCA9IE92ZXJmbG93LkF1dG87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMuU3R5bGUuTWluV2lkdGggPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZCh0YWJIZWFkZXJDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMuSGVpZ2h0ID0gMjM7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZCh0YWJIZWFkZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJzLldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoVGFiUGFnZXMgIT0gbnVsbCAmJiBUYWJQYWdlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCB3aWR0aCA9IDI7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFRhYlBhZ2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBUYWJQYWdlc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5SZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGFnZS5UYWJQYWdlSGVhZGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUYWJDb250cm9sQWN0aXZlU3R5bGVDaGFuZ2UoaSwgcmVmIHBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGVkSW5kZXggPSBHbG9iYWwuUGFyc2VJbnQoZXYuQ3VycmVudFRhcmdldC5BczxIVE1MRGl2RWxlbWVudD4oKS5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyLk9uVG91Y2hTdGFydCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRJbmRleCA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkFzPEhUTUxEaXZFbGVtZW50PigpLkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJzLkNvbnRlbnQuQXBwZW5kQ2hpbGQocGFnZS5UYWJQYWdlSGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChwYWdlLkNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuU2V0QXR0cmlidXRlKFwiaVwiLCBpLlRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgaW53aWR0aCA9IDI0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yRW1wdHkocGFnZS5DYXB0aW9uKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbndpZHRoICs9IChpbnQpR2V0VGV4dFdpZHRoKHBhZ2UuQ2FwdGlvbiwgXCIxNHB4IFRhaG9tYVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlud2lkdGggKz0gKGludClHZXRUZXh0V2lkdGgocGFnZS5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNob3dDbG9zZWRCdXR0b24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbndpZHRoICs9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBIVE1MU3BhbkVsZW1lbnQgc3BhbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgaXRlbSBpbiBwYWdlLlRhYlBhZ2VIZWFkZXIuQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtIGlzIEhUTUxTcGFuRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNwYW4gPSBpdGVtLkFzPEhUTUxTcGFuRWxlbWVudD4oKSkuSW5uZXJIVE1MID0gcGFnZS5DYXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3BhbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhbiA9IG5ldyBIVE1MU3BhbkVsZW1lbnQoKSB7IElubmVySFRNTCA9IHBhZ2UuQ2FwdGlvbiB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyLkFwcGVuZENoaWxkKHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TdHlsZS5MZWZ0ID0gd2lkdGguVG9QeCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TdHlsZS5XaWR0aCA9IGlud2lkdGguVG9QeCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDI2cHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdG9wOiAyNHB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UuSGVpZ2h0ID0gXCIoMTAwJSAtIDQ5cHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UuVG9wID0gNDk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBpbndpZHRoICsgMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVGFiUGFnZXNbaV0gPSBwYWdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVycy5XaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGFzUmVuZGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBSZXNpemVUYWJIZWFkZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cbiAgICBcbnByaXZhdGUgTGlzdDxUYWJDb250cm9sUGFnZT4gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1RhYlBhZ2VzPW5ldyBMaXN0PFRhYkNvbnRyb2xQYWdlPigpO31cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRhYkNvbnRyb2xQYWdlIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgaW5kZXg7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUYWJDb250cm9sUGFnZSgpIDogYmFzZShcInRhYmNvbnRyb2xwYWdlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEhUTUxEaXZFbGVtZW50IFRhYlBhZ2VIZWFkZXIgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRGl2RWxlbWVudCBUYWJQYWdlSGVhZGVyQ2xvc2UgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgQ2FwdGlvbiB7IGdldDsgc2V0OyB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUaWxlQ29udHJvbCA6IENvbnRyb2wsIElQYWdlc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PFJpYmJvblBhZ2U+IFJpYmJvblBhZ2VzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwcml2YXRlIFRpbGVWaWV3U3RhdGUgX3ZpZXdTdGF0ZSA9IFRpbGVWaWV3U3RhdGUuSGlkZGVuO1xyXG4gICAgICAgIHByaXZhdGUgVW5pb248c3RyaW5nLCBPdmVyZmxvdz4gcHJldk92ZXJGbG93ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIGludCBDbGVhclRpbWVPdXQgPSAtMTtcclxuXHJcbiAgICAgICAgcHVibGljIFRpbGVWaWV3U3RhdGUgVmlld1N0YXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX3ZpZXdTdGF0ZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQ2xlYXJUaW1lT3V0ICE9IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEdsb2JhbC5DbGVhclRpbWVvdXQoQ2xlYXJUaW1lT3V0KTtcclxuICAgICAgICAgICAgICAgICAgICBDbGVhclRpbWVPdXQgPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9IF92aWV3U3RhdGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ZpZXdTdGF0ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF92aWV3U3RhdGUgPT0gVGlsZVZpZXdTdGF0ZS5IaWRkZW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbGVhclRpbWVPdXQgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgKiAtMSlcIiwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihDb250ZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBwcmV2T3ZlckZsb3cgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5QYXJlbnRFbGVtZW50LlN0eWxlLk92ZXJmbG93ID0gcHJldk92ZXJGbG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSW5oZXJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVuZGVyVGlsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZPdmVyRmxvdyA9IENvbnRlbnQuUGFyZW50RWxlbWVudC5TdHlsZS5PdmVyZmxvdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuUGFyZW50RWxlbWVudC5TdHlsZS5PdmVyZmxvdyA9IE92ZXJmbG93LkhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVuZGVyVGlsZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHggPSAwO1xyXG4gICAgICAgICAgICBpbnQgeSA9IDY7XHJcblxyXG4gICAgICAgICAgICB2YXIgZG9jID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gbmV3IENvbnRyb2woKTtcclxuICAgICAgICAgICAgZGl2LldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdi5TZXRMb2NhdGlvbigwLCAwKTtcclxuICAgICAgICAgICAgZGl2LlN0eWxlLlpJbmRleCA9IFwiMTBcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaXYyID0gbmV3IENvbnRyb2woXCJwcmltYXJ5XCIpO1xyXG4gICAgICAgICAgICBkaXYyLldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuTWluSGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdjIuU2V0TG9jYXRpb24oMCwgMCk7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDUwJSlcIjtcclxuXHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuT3BhY2l0eSA9IFwiMC45XCI7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuWkluZGV4ID0gXCI5XCI7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBwYWdlIGluIFJpYmJvblBhZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShwYWdlLkNhcHRpb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsbGIgPSBDb250cm9sLkxhYmVsKHBhZ2UuQ2FwdGlvbiwgNiwgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGxiLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGxiLlN0eWxlLkNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZChsbGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gMjY7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgZ3JvdXAgaW4gcGFnZS5SaWJib25Hcm91cHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYnV0dG9uIGluIGdyb3VwLkJ1dHRvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uRXhjaGFuZ2VDbGFzcyhcInJpYmJvbmJ1dHRvbnNtYWxsXCIsIFwicmliYm9uYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLkFmdGVySXRlbUNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3U3RhdGUgPSBUaWxlVmlld1N0YXRlLkhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLkVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5FeGNoYW5nZUNsYXNzKFwicHJpbWFyeVwiLCBcInByaW1hcnlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uRXhjaGFuZ2VDbGFzcyhcInByaW1hcnlcIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5GaWx0ZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5PcGFjaXR5ID0gXCIxXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5Cb3hTaGFkb3cgPSBcIjBweCAwcHggMTBweCAtMnB4IHJnYmEoMCwwLDAsMC4yNSlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLklzU21hbGxDYXB0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5Qcm9jZXNzQ2FwdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uUHJvY2Vzc0ltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TaXplID0gbmV3IFZlY3RvcjIoXCIoKDEwMCUgLSAyNHB4KSAqIDAuMzMpXCIsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKCgoMTAwJSAtIDI0cHgpICogKFwiICsgKHggKiAwLjMzbSkgKyBcIikpICsgKFwiICsgKDYgKiAoeCkpICsgXCJweCkgKyA2cHgpXCIsIHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLmNhcHRpb25EaXYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLkVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNhcHRpb25EaXYuU3R5bGUuQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNhcHRpb25EaXYuU3R5bGUuQ29sb3IgPSBcImdyZXlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY2FwdGlvbkRpdi5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNhcHRpb25EaXYuU3R5bGUuVG9wID0gXCI2NXB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJ1dHRvbi5pbWFnZURpdiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uaW1hZ2VEaXYuRXhjaGFuZ2VDbGFzcyhcInJpYmJvbmJ1dHRvbnNtYWxsaWNvblwiLCBcInJpYmJvbmJ1dHRvbmljb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uSWNvblVSTCA9IChidXR0b24uSWNvblVSTCArIFwiXCIpLlJlcGxhY2UoXCJ4MTZ4MTZcIiwgXCJ4MzJ4MzJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uaW1hZ2VEaXYuU3R5bGUuVG9wID0gXCIyN3B4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihidXR0b24uRW5hYmxlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgYnV0dG9uLmltYWdlRGl2LlN0eWxlLkZpbHRlciA9IFwiYnJpZ2h0bmVzcyg5MCUpIGdyYXlzY2FsZSgxMDAlKSBjb250cmFzdCg2MCUpIGJyaWdodG5lc3MoMTgwJSlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgYnV0dG9uLmltYWdlRGl2LlN0eWxlLkZpbHRlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICs9IDEwNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuT3BhY2l0eSA9IFwiMVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gMTA2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaXYuSGVpZ2h0ID0geTtcclxuICAgICAgICAgICAgZGl2Mi5IZWlnaHQgPSB5O1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5FbXB0eSgpO1xyXG4gICAgICAgICAgICBkaXYuQ29udGVudC5BcHBlbmRDaGlsZChkb2MpO1xyXG5cclxuICAgICAgICAgICAgZGl2Mi5Db250ZW50Lk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoZGl2Mik7XHJcbiAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgICAgICAgIGRpdi5Db250ZW50LkNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5SZW5kZXIoKTtcclxuICAgICAgICAgICAgUmVuZGVyVGlsZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUaWxlQ29udHJvbCgpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5BdXRvO1xyXG4gICAgICAgICAgICBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgKiAtMSlcIiwgMCk7XHJcbiAgICAgICAgICAgIFNpemUgPSBuZXcgVmVjdG9yMihcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICBDb250ZW50LlN0eWxlLlRyYW5zaXRpb24gPSBcImxlZnQgMXMgZWFzZVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkUmliYm9uUGFnZXMocGFyYW1zIFJpYmJvblBhZ2VbXSBwYWdlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHBhZ2VzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBSaWJib25QYWdlcy5BZGRSYW5nZShwYWdlcyk7XHJcbiAgICAgICAgfVxyXG5cbiAgICBcbnByaXZhdGUgTGlzdDxSaWJib25QYWdlPiBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fUmliYm9uUGFnZXM9bmV3IExpc3Q8UmliYm9uUGFnZT4oKTt9XHJcblxyXG4gICAgcHVibGljIGVudW0gVGlsZVZpZXdTdGF0ZVxyXG4gICAge1xyXG4gICAgICAgIEhpZGRlbixcclxuICAgICAgICBWaXNpYmxlXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZvcm1Qb3B1cCA6IEZvcm1cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgaW50IFByZXZpb3VzU2Nyb2xsVG9wO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRWxlbWVudCBQYXJlbnRDb250YWluZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yMiBHZXRQb3B1cERlZmF1bHRMb2NhdGlvbihDb250cm9sIGNvbnRyb2wsIGJvb2wgaXNDb250cm9sQ2hpbGQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKDAsIDApO1xyXG5cclxuICAgICAgICAgICAgaWYoaXNDb250cm9sQ2hpbGQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWMgPSBjb250cm9sLkNvbnRlbnQuUGFyZW50RWxlbWVudC5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMigoZmxvYXQpcmVjLkxlZnQsIChmbG9hdCkocmVjLlRvcCArIHJlYy5IZWlnaHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWMgPSBjb250cm9sLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoKGZsb2F0KXJlYy5MZWZ0LCAoZmxvYXQpKHJlYy5Ub3AgKyByZWMuSGVpZ2h0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb3JtUG9wdXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSGVhZGluZy5TdHlsZS5EaXNwbGF5ID0gRGlzcGxheS5Ob25lO1xyXG4gICAgICAgICAgICBCb2R5LlNldExvY2F0aW9uKDAsIDApO1xyXG4gICAgICAgICAgICBCb2R5LlNldFNpemUoXCIxMDAlXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICAgICAgQ29udGVudC5DbGFzc0xpc3QuQWRkKFwiaW5wdXRjb250cm9sXCIpO1xyXG4gICAgICAgICAgICBDb250ZW50LkNsYXNzTGlzdC5SZW1vdmUoXCJmb3JtLWJhc2VcIik7XHJcbiAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuQm94U2hhZG93ID0gXCIwIDAgNjNweCAtMTdweCByZ2JhKDAsMCwwLDAuNzUpXCI7XHJcblxyXG4gICAgICAgICAgICBTdGFydFBvc2l0aW9uID0gRm9ybVN0YXJ0UG9zaXRpb24uTWFudWFsO1xyXG5cclxuICAgICAgICAgICAgU2hvd0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFNob3dNYXhpbWl6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTaG93TWluaW1pemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgQWxsb3dNb3ZlQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFsbG93U2l6ZUNoYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2hvd1BvcHVwKFZlY3RvcjIgbG9jYXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkxvY2F0aW9uID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgIFNob3dEaWFsb2coKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBNb3ZlRm9ybVVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuTG9jYXRpb24gPSBuZXcgVmVjdG9yMih0aGlzLkxlZnQsIHRoaXMuVG9wLlRvRmxvYXQoKSAtIHRoaXMuSGVpZ2h0LlRvRmxvYXQoKSAtIDIwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25TaG93ZWQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgV2luZG93U3RhdGUgPSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkO1xyXG4gICAgICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IENvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVjdC5Cb3R0b20gPiBXaW5kb3cuSW5uZXJIZWlnaHQgfHwgcmVjdC5Cb3R0b20gPiBEb2N1bWVudC5Eb2N1bWVudEVsZW1lbnQuQ2xpZW50SGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUZvcm1VcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIENvbG9ySW5wdXQgOiBUZXh0SW5wdXRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQ29sb3JJbnB1dCgpIDogYmFzZShCcmlkZ2UuSHRtbDUuSW5wdXRUeXBlLkNvbG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb25zb2xlRm9ybSA6IEZvcm1cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQ29uc29sZVZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBDb25zb2xlRm9ybSBfY29uc29sZUZvcm0gPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgSFRNTERpdkVsZW1lbnQgbG9nQ29udGVudCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgV2luZG93U3RhdGVUeXBlIHByZXZXaW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5Ob3JtYWw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCBmaXJzdExvYWQgPSB0cnVlO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFZlY3RvcjIgcHJldkxvY2F0aW9uO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFZlY3RvcjIgcHJldlNpemUgPSBTZXR0aW5ncy5Db25zb2xlRGVmYXVsdFNpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludGVybmFsQ2xlYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9nQ29udGVudC5FbXB0eSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW50ZXJuYWxMb2coc3RyaW5nIHNvdXJjZSwgQ29uc29sZUxvZ1R5cGUgbG9nVHlwZSA9IENvbnNvbGVMb2dUeXBlLkxvZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhID0gbmV3IEhUTUxQYXJhZ3JhcGhFbGVtZW50KCkgeyBDbGFzc05hbWUgPSBcImNvbnNvbGUtcGFyYVwiIH07XHJcbiAgICAgICAgICAgIHN3aXRjaChsb2dUeXBlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnNvbGVMb2dUeXBlLkRlYnVnOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmEuU3R5bGUuQ29sb3IgPSBDb2xvci5Gb3Jlc3RHcmVlbjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnNvbGVMb2dUeXBlLkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmEuU3R5bGUuQ29sb3IgPSBDb2xvci5SZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhcmEuSW5uZXJIVE1MID0gc291cmNlO1xyXG4gICAgICAgICAgICBsb2dDb250ZW50LkFwcGVuZENoaWxkKHBhcmEpO1xyXG4gICAgICAgICAgICBpZihsb2dDb250ZW50LkNoaWxkcmVuLkxlbmd0aCA+IDEwMDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvZ0NvbnRlbnQuUmVtb3ZlQ2hpbGQobG9nQ29udGVudC5DaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFyYS5TY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkdvdEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKENvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3R5bGUuT3BhY2l0eSA9IFwiMVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhc2UuT25Hb3RGb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Mb3N0Rm9jdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoQ29udGVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTdHlsZS5PcGFjaXR5ID0gXCIwLjVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXNlLk9uTG9zdEZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ29uc29sZUZvcm0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9nQ29udGVudCA9IERpdihcImNvbnNvbGUtYm9keVwiKTtcclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKGxvZ0NvbnRlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLkJvZHkuU3R5bGUuQmFja2dyb3VuZCA9IENvbG9yLkJsYWNrO1xyXG4gICAgICAgICAgICB0aGlzLkJvZHkuU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuU2Nyb2xsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5UZXh0ID0gRG9jdW1lbnQuVGl0bGUgKyBcIiAtIENvbnNvbGVcIjtcclxuICAgICAgICAgICAgaWYoZmlyc3RMb2FkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0YXJ0UG9zaXRpb24gPSBGb3JtU3RhcnRQb3NpdGlvbi5DZW50ZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlNpemUgPSBwcmV2U2l6ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RhcnRQb3NpdGlvbiA9IEZvcm1TdGFydFBvc2l0aW9uLk1hbnVhbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuTG9jYXRpb24gPSBwcmV2TG9jYXRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocHJldldpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldlNpemUgPSBTZXR0aW5ncy5Db25zb2xlRGVmYXVsdFNpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5TaXplID0gcHJldlNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocHJldldpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2V0V2luZG93U3RhdGUocHJldldpbmRvd1N0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaG93ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PblNob3dlZCgpO1xyXG4gICAgICAgICAgICBDb25zb2xlVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZpcnN0TG9hZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBwcmV2U2l6ZSA9IFNpemU7XHJcbiAgICAgICAgICAgIHByZXZMb2NhdGlvbiA9IExvY2F0aW9uO1xyXG4gICAgICAgICAgICBwcmV2V2luZG93U3RhdGUgPSBXaW5kb3dTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTtcclxuICAgICAgICAgICAgQ29uc29sZVZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgQ2hlY2tDb25zb2xlU3RhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUNvbnNvbGVWaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfY29uc29sZUZvcm0gPSBuZXcgQ29uc29sZUZvcm0oKTtcclxuICAgICAgICAgICAgICAgIF9jb25zb2xlRm9ybS5TaG93KHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTG9nKHN0cmluZyBzb3VyY2UsIENvbnNvbGVMb2dUeXBlIGxvZ1R5cGUgPSBDb25zb2xlTG9nVHlwZS5Mb2cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja0NvbnNvbGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICBfY29uc29sZUZvcm0uSW50ZXJuYWxMb2coc291cmNlLCBsb2dUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBDbGVhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGVja0NvbnNvbGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICBfY29uc29sZUZvcm0uSW50ZXJuYWxDbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBDb25zb2xlTG9nVHlwZVxyXG4gICAge1xyXG4gICAgICAgIExvZyxcclxuICAgICAgICBEZWJ1ZyxcclxuICAgICAgICBFcnJvclxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEaWFsb2dGb3JtIDogRm9ybVxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4gX2J1dHRvbkNvbGxlY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIEJ1dHRvblNlY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBEaWFsb2dGb3JtKHN0cmluZyB0ZXh0ID0gXCJcIikgOiBiYXNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIGJhc2UuQm9keS5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgdG9wOmNhbGMoMTAwJSAtIDcwcHgpO1xyXG4gICAgICAgICAgICAvL3dpZHRoOjEwMCU7XHJcbiAgICAgICAgICAgIC8vaGVpZ2h0OjcwcHg7XHJcblxyXG4gICAgICAgICAgICBCdXR0b25TZWN0aW9uID0gbmV3IENvbnRyb2woXCJkaWFsb2didXR0b25zZWN0aW9uXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJ1dHRvblNlY3Rpb24uVG9wID0gXCIoMTAwJSAtIDcwcHgpXCI7XHJcbiAgICAgICAgICAgICAgICBCdXR0b25TZWN0aW9uLlNpemUgPSBuZXcgVmVjdG9yMihcIjEwMCVcIiwgNzApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKEJ1dHRvblNlY3Rpb24pO1xyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2luZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRleHRJbnB1dERyb3BEb3duIDogVGV4dElucHV0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBEcm9wRG93bkJ1dHRvbjtcclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0IFVzZWRFZGl0O1xyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERpc3BsYXlGb3JtYXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVzZWRFZGl0LkdldERpc3BsYXlGb3JtYXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGZsb2F0IEdldERyb3Bkb3duV2lkdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChmbG9hdCl0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuV2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTZXREaXNwbGF5Rm9ybWF0KHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVzZWRFZGl0LlNldERpc3BsYXlGb3JtYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25Gb2N1cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVc2VkRWRpdC5Gb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIEhUTUxJbnB1dEVsZW1lbnQgR2V0SW5wdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVzZWRFZGl0LkdldElucHV0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0RHJvcERvd24oSW5wdXRUeXBlIGlucHV0VHlwZSA9IElucHV0VHlwZS5UZXh0KSA6IGJhc2UobmV3IEhUTUxEaXZFbGVtZW50KCksIHRydWUsIGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGRyb3BEb3duV2lkdGggPSAxNztcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkcm9wRG93bldpZHRoID0gNDU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFR5cGUgPSBpbnB1dFR5cGU7XHJcblxyXG4gICAgICAgICAgICBVc2VkRWRpdCA9IG5ldyBUZXh0SW5wdXQoaW5wdXRUeXBlKSB7IERpc2FibGVGb2N1c1BvcHVwID0gdHJ1ZSwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKSwgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArIChkcm9wRG93bldpZHRoIC0gMSkgKyBcInB4KVwiLCBcIjEwMCVcIikgfTtcclxuICAgICAgICAgICAgVXNlZEVkaXQuT25UZXh0Q2hhbmdlZCA9IChzZW5kZXIpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKE9uVGV4dENoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPblRleHRDaGFuZ2VkKHNlbmRlcik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBfZGlzcGxheUZvcm1hdCA9IFVzZWRFZGl0LkRpc3BsYXlGb3JtYXQ7XHJcblxyXG4gICAgICAgICAgICBEcm9wRG93bkJ1dHRvbiA9IG5ldyBTaW1wbGVCdXR0b24oKSB7IExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIFwiICsgZHJvcERvd25XaWR0aCArIFwicHgpXCIsIDApLCBTaXplID0gbmV3IFZlY3RvcjIoZHJvcERvd25XaWR0aCwgXCIxMDAlXCIpIH07XHJcbiAgICAgICAgICAgIERyb3BEb3duQnV0dG9uLkNvbnRlbnQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFSZWFkb25seSAmJiBFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uRHJvcERvd25DbGlja2VkKGV2KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFN0eWxlLkJvcmRlciA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgRHJvcERvd25CdXR0b24uQ2xhc3NMaXN0LkFkZChcImRyb3Bkb3duXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyb3BEb3duQnV0dG9uLlN0eWxlLkJhY2tncm91bmRQb3NpdGlvbiA9IFwicmlnaHQgMTZweCBjZW50ZXJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZHJlbihVc2VkRWRpdCwgRHJvcERvd25CdXR0b24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRWYWx1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVXNlZEVkaXQuVGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFNldFZhbHVlKHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVzZWRFZGl0LlRleHQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Ecm9wRG93bkNsaWNrZWQoTW91c2VFdmVudCBtb3VzZUV2ZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1lbW9JbnB1dCA6IFRleHRJbnB1dFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgUm93c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIENvbnRlbnQuQXM8SFRNTFRleHRBcmVhRWxlbWVudD4oKS5Sb3dzOyB9XHJcbiAgICAgICAgICAgIHNldCB7IENvbnRlbnQuQXM8SFRNTFRleHRBcmVhRWxlbWVudD4oKS5Sb3dzID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIENvbnRlbnQuQXM8SFRNTFRleHRBcmVhRWxlbWVudD4oKS5Db2xzOyB9XHJcbiAgICAgICAgICAgIHNldCB7IENvbnRlbnQuQXM8SFRNTFRleHRBcmVhRWxlbWVudD4oKS5Db2xzID0gdmFsdWU7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgVmVjdG9yMiBQcmVTaXplO1xyXG4gICAgICAgIHByaXZhdGUgVmVjdG9yMiBQcmVQcmVTaXplO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIFByZVpJbmRleDtcclxuICAgICAgICBwcml2YXRlIGJvb2wgX2hhc0dvdEZvY3VzO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBEaXNhYmxlUmVzaXplIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRWYWx1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLlZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgU2V0VmFsdWUoc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLlZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTWVtb0lucHV0KCkgOiBiYXNlKG5ldyBIVE1MVGV4dEFyZWFFbGVtZW50KCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdHlsZS5SZXNpemUgPSBSZXNpemUuTm9uZTtcclxuXHJcbiAgICAgICAgICAgIE9uR290Rm9jdXMgPSAobWVtbykgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoRGlzYWJsZVJlc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgU3R5bGUuUmVzaXplID0gUmVzaXplLkJvdGg7XHJcbiAgICAgICAgICAgICAgICBQcmVQcmVTaXplID0gU2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihfaGFzR290Rm9jdXMpXHJcbiAgICAgICAgICAgICAgICAgICAgU2l6ZSA9IFByZVNpemU7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hhc0dvdEZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBQcmVTaXplID0gU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgT25Mb3N0Rm9jdXMgPSAobWVtbykgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3R5bGUuUmVzaXplID0gUmVzaXplLk5vbmU7XHJcbiAgICAgICAgICAgICAgICBQcmVTaXplID0gU2l6ZTtcclxuICAgICAgICAgICAgICAgIFNpemUgPSBQcmVQcmVTaXplO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUERGUHJldmlld0Zvcm0gOiBGb3JtXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTb3VyY2U7XHJcbiAgICAgICAgcHVibGljIFBkZlNvdXJjZVR5cGUgUERGU291cmNlVHlwZTtcclxuICAgICAgICBwdWJsaWMgSFRNTEVsZW1lbnQgUGRmVmlld2VyO1xyXG5cclxuICAgICAgICBwdWJsaWMgUERGUHJldmlld0Zvcm0oc3RyaW5nIHNvdXJjZSwgUGRmU291cmNlVHlwZSBwZGZTb3VyY2VUeXBlID0gUGRmU291cmNlVHlwZS5VcmwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIFBERlNvdXJjZVR5cGUgPSBwZGZTb3VyY2VUeXBlO1xyXG5cclxuICAgICAgICAgICAgUGRmVmlld2VyID0gRG9jdW1lbnQuQ3JlYXRlRWxlbWVudChCcm93c2VyLklzSUUgPyBcImlmcmFtZVwiIDogcGRmU291cmNlVHlwZSA9PSBQZGZTb3VyY2VUeXBlLlVybCA/IFwiZW1iZWRcIiA6IFwib2JqZWN0XCIpO1xyXG4gICAgICAgICAgICBQZGZWaWV3ZXIuQ2xhc3NOYW1lID0gXCJjb250cm9sXCI7XHJcblxyXG4gICAgICAgICAgICBQZGZWaWV3ZXIuU2V0Qm91bmRzKDAsIDAsIFwiMTAwJVwiLCBcIjEwMCVcIik7XHJcbiAgICAgICAgICAgIFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJwZGZcIik7XHJcbiAgICAgICAgICAgIFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYXBwbGljYXRpb24vcGRmXCIpO1xyXG4gICAgICAgICAgICAvL29iamVjdFxyXG5cclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKFBkZlZpZXdlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PblNob3dpbmcoKTtcclxuICAgICAgICAgICAgLy9kYXRhXHJcbiAgICAgICAgICAgIGlmKFBERlNvdXJjZVR5cGUgPT0gUGRmU291cmNlVHlwZS5VcmwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJTcmNcIiwgU291cmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJkYXRhXCIsIEdldFBkZlN0cmluZyhTb3VyY2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBQZGZTb3VyY2VUeXBlXHJcbiAgICB7XHJcbiAgICAgICAgVXJsLFxyXG4gICAgICAgIEJhc2U2NFxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2ltcGxlRGlhbG9nQnV0dG9uIDogU2ltcGxlQnV0dG9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZURpYWxvZ0J1dHRvbihGb3JtIHBhcmVudEZvcm0sIERpYWxvZ1Jlc3VsdEVudW0gZGlhbG9nUmVzdWx0ID0gRGlhbG9nUmVzdWx0RW51bS5Ob25lKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QYXJlbnRGb3JtID0gcGFyZW50Rm9ybTtcclxuICAgICAgICAgICAgdGhpcy5EaWFsb2dSZXN1bHQgPSBkaWFsb2dSZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLlNldFNpemUoNzUsIDIzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDYWxjRm9ybSA6IEZvcm1Qb3B1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQgSW5wdXRDb250cm9sO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2FsY3VsYXRvckNvbnRyb2wgQ2FsQ29udHJvbDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBDbGlja2VkQ2xvc2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIENhbGNGb3JtKFRleHRJbnB1dCBpbnB1dENvbnRyb2wpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXRDb250cm9sLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXRDb250cm9sLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTY3JvbGxUb3AgPSBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5TY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRDb250YWluZXIgPSBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW5wdXRDb250cm9sID0gaW5wdXRDb250cm9sO1xyXG4gICAgICAgICAgICBDYWxDb250cm9sID0gbmV3IENhbGN1bGF0b3JDb250cm9sKElucHV0Q29udHJvbC5HZXROdW1iZXJWYWx1ZSgpLCB0cnVlKTtcclxuICAgICAgICAgICAgQ2FsQ29udHJvbC5TZXRCb3VuZHNGdWxsKCk7XHJcbiAgICAgICAgICAgIENhbENvbnRyb2wuT25DbG9zZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENsaWNrZWRDbG9zZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBDYWxDb250cm9sLk9uRXF1YWwgPSAodmFsdWUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIElucHV0Q29udHJvbC5UZXh0ID0gdmFsdWUuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIEFwcGVuZENoaWxkKENhbENvbnRyb2wpO1xyXG5cclxuICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKDE4MiwgMTU3KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTtcclxuICAgICAgICAgICAgSW5wdXRDb250cm9sLlZhbGlkYXRlRGF0YSgpO1xyXG4gICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICBJbnB1dENvbnRyb2wuRm9jdXMoKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJbnB1dENvbnRyb2wuU2Nyb2xsKFByZXZpb3VzU2Nyb2xsVG9wLCBQYXJlbnRDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFDbGlja2VkQ2xvc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhbENvbnRyb2wuRG9udFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQ2FsQ29udHJvbC5BZGRPcGVyYXRvcihDYWxDb250cm9sLmJ0bkVxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaG93ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PblNob3dlZCgpO1xyXG4gICAgICAgICAgICBpZihJbnB1dENvbnRyb2wgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIENhbENvbnRyb2wuYnRuRXEuRm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEYXRhUm93RWRpdEZvcm0gOiBEaWFsb2dGb3JtXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgTGl2ZURhdGE7XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3IEdyaWRWaWV3O1xyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IERhdGFSb3c7XHJcblxyXG4gICAgICAgIHByaXZhdGUgSFRNTERpdkVsZW1lbnQgUGFuZWw7XHJcblxyXG4gICAgICAgIHByaXZhdGUgb2JqZWN0W10gcHJldkRhdGE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93RWRpdEZvcm0oRGF0YVJvdyBfZGF0YVJvdywgR3JpZFZpZXcgX2dyaWRWaWV3LCBib29sIF9saXZlRGF0YSA9IHRydWUpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwcmV2RGF0YSA9IG5ldyBvYmplY3RbX2RhdGFSb3cuUGFyZW50VGFibGUuQ29sdW1uQ291bnRdO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IF9kYXRhUm93LlBhcmVudFRhYmxlLkNvbHVtbkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByZXZEYXRhW2ldID0gX2RhdGFSb3dbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERhdGFSb3cgPSBfZGF0YVJvdztcclxuICAgICAgICAgICAgR3JpZFZpZXcgPSBfZ3JpZFZpZXc7XHJcbiAgICAgICAgICAgIExpdmVEYXRhID0gX2xpdmVEYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5UZXh0ID0gXCJSb3cgRWRpdCBGb3JtXCI7XHJcbiAgICAgICAgICAgIHRoaXMuV2lkdGggPSBcIjQwMHB4XCI7IC8vIDI1cHggLSAyNXB4IDM1MHB4IHdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLkhlaWdodCA9IFwiNjAwcHhcIjtcclxuICAgICAgICAgICAgdGhpcy5Cb2R5LlN0eWxlLk92ZXJmbG93WSA9IEJyaWRnZS5IdG1sNS5PdmVyZmxvdy5BdXRvO1xyXG5cclxuICAgICAgICAgICAgUGFuZWwgPSBEaXYoKTtcclxuICAgICAgICAgICAgUGFuZWwuU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuQXV0bztcclxuICAgICAgICAgICAgUGFuZWwuU2V0Qm91bmRzKFwiMFwiLCBcIjBcIiwgXCIxMDAlXCIsIFwiKDEwMCUgLSA2MHB4KVwiKTtcclxuICAgICAgICAgICAgQm9keS5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XHJcblxyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvbiA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX28zKT0+e19vMy5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgXCIoMTAwJSAtIDM1cHgpXCIpLCBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGF0YVJvdy5QYXJlbnRUYWJsZS5Db2x1bW5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUm93W2ldID0gcHJldkRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JpZFZpZXcuUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fSk7X28zLkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uT0spIHsgVGV4dCA9IFwiT0tcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMTcwcHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKSAgfSk7cmV0dXJuIF9vMzt9KTtcclxuXHJcbiAgICAgICAgICAgIEJ1dHRvblNlY3Rpb24uQXBwZW5kQ2hpbGRyZW5UYWJJbmRleChfYnV0dG9uQ29sbGVjdGlvbi5Ub0FycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKFBhbmVsKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEYXRhIG5vdyBhdXRvIGNoYW5nZXMuLi5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmlkVmlldy5EYXRhU291cmNlLkVuZERhdGFVcGRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25TaG93ZWQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKERhdGFSb3cgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5EaWFsb2dSZXN1bHQgPSBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdyaWRWaWV3LkRhdGFTb3VyY2UuQmVnaW5EYXRhVXBkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgR2VuZXJhdGVGb3JtKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBHZW5lcmF0ZUZvcm0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QYW5lbC5FbXB0eSgpO1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gR3JpZFZpZXcuQ29sdW1uQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgIGludCBjb2wgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaGVpZ2h0ID0gMjU7XHJcblxyXG4gICAgICAgICAgICBpbnQgZGVmYXVsdEhlaWdodCA9IDI0ICsgMyArIDI0ICsgMztcclxuICAgICAgICAgICAgaW50IGRlZmF1bHRIZWlnaHQyWCA9IGRlZmF1bHRIZWlnaHQgKiAzO1xyXG4gICAgICAgICAgICBpbnQgaW5jcmVtZW50SGVpZ2h0ID0gZGVmYXVsdEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGludCBlYWNoV2lkdGggPSAoMzUwIC8gMykgLSAzO1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRIZWlnaHQgPSBkZWZhdWx0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyQ29sID0gR3JpZFZpZXcuR2V0Q29sdW1uKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFnckNvbC5BbGxvd0VkaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGR0Q29sID0gZ3JDb2wuQ29sdW1uO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkdEluZGV4ID0gZ3JDb2wuR2V0RGF0YUNvbHVtbkluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZ3JDb2wuQ29sdW1uLkZpZWxkTmFtZS5Ub0xvd2VyKCkgPT0gXCJjbnRyXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JDb2wuUmVhZE9ubHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaChkdENvbC5EYXRhVHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGJsZGF0ZSA9IExhYmVsKGdyQ29sLkNhcHRpb24sIDI1ICsgKGNvbCAqIGVhY2hXaWR0aCArIChjb2wgKiAzKSksIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dERhdGUgPSBuZXcgVGV4dElucHV0KEJyaWRnZS5IdG1sNS5JbnB1dFR5cGUuRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RGF0ZS5TZXRCb3VuZHMoMjUgKyAoY29sICogZWFjaFdpZHRoICsgKGNvbCAqIDMpKSwgaGVpZ2h0ICsgMTYgKyAzLCBlYWNoV2lkdGgsIDI0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXREYXRlLlNldERhdGUoQ29udmVydC5Ub1N0cmluZyhEYXRhUm93W2R0SW5kZXhdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RGF0ZS5SZWFkb25seSA9IGdyQ29sLlJlYWRPbmx5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZ3JDb2wuUmVhZE9ubHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RGF0ZS5PblRleHRDaGFuZ2VkID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFSb3dbZHRJbmRleF0gPSBpbnB1dERhdGUuR2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKExpdmVEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcmlkVmlldy5SZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYW5lbC5BcHBlbmRDaGlsZHJlbihsYmxkYXRlLCBpbnB1dERhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuSW50ZWdlcjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkxvbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5GbG9hdDpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRvdWJsZTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Cb29sOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQnl0ZTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlNob3J0OlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxibG5tYiA9IExhYmVsKGdyQ29sLkNhcHRpb24sIDI1ICsgKGNvbCAqIGVhY2hXaWR0aCArIChjb2wgKiAzKSksIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHRJbnB1dCBpbnB1dE51bTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZ3JDb2wuQ2VsbERpc3BsYXkgaXMgR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dE51bSA9IG5ldyBUZXh0SW5wdXQoQnJpZGdlLkh0bWw1LklucHV0VHlwZS5DaGVja2JveCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dE51bS5TZXRDaGVja2VkKERhdGFSb3dbZHRJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROdW0gPSBuZXcgVGV4dElucHV0KElucHV0VHlwZS5OdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROdW0uVGV4dCA9IENvbnZlcnQuVG9TdHJpbmcoRGF0YVJvd1tkdEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0TnVtLlNldEJvdW5kcygyNSArIChjb2wgKiBlYWNoV2lkdGggKyAoY29sICogMykpLCBoZWlnaHQgKyAxNiArIDMsIGVhY2hXaWR0aCwgMjQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROdW0uUmVhZG9ubHkgPSBnckNvbC5SZWFkT25seTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFnckNvbC5SZWFkT25seSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXROdW0uT25UZXh0Q2hhbmdlZCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpbnB1dE51bS5UeXBlID09IElucHV0VHlwZS5DaGVja2JveClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFSb3dbZHRJbmRleF0gPSBpbnB1dE51bS5UZXh0LklzVHJ1ZSgpID09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFSb3dbZHRJbmRleF0gPSBpbnB1dE51bS5UZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihMaXZlRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JpZFZpZXcuUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWwuQXBwZW5kQ2hpbGRyZW4obGJsbm1iLCBpbnB1dE51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGJsc3RyID0gTGFiZWwoZ3JDb2wuQ2FwdGlvbiwgMjUgKyAoY29sICogZWFjaFdpZHRoICsgKGNvbCAqIDMpKSwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0c3RyID0gbmV3IFRleHRJbnB1dChCcmlkZ2UuSHRtbDUuSW5wdXRUeXBlLlRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dHN0ci5TZXRCb3VuZHMoMjUgKyAoY29sICogZWFjaFdpZHRoICsgKGNvbCAqIDMpKSwgaGVpZ2h0ICsgMTYgKyAzLCBlYWNoV2lkdGgsIDI0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzdHIuVGV4dCA9IENvbnZlcnQuVG9TdHJpbmcoRGF0YVJvd1tkdEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0c3RyLlJlYWRvbmx5ID0gZ3JDb2wuUmVhZE9ubHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZ3JDb2wuUmVhZE9ubHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0c3RyLk9uVGV4dENoYW5nZWQgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVJvd1tkdEluZGV4XSA9IGlucHV0c3RyLlRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKExpdmVEYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcmlkVmlldy5SZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYW5lbC5BcHBlbmRDaGlsZHJlbihsYmxzdHIsIGlucHV0c3RyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYob2JqLkxlbmd0aCA+IDEwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHRpbmNyZW1lbnRIZWlnaHQgPSBkZWZhdWx0SGVpZ2h0Mlg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1x0Y29sID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy99XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGNvbCA9PSAyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSBpbmNyZW1lbnRIZWlnaHQgKyAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIEFjY2VwdCBDaGFuZ2VzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRGF0ZUZvcm0gOiBGb3JtUG9wdXBcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0IElucHV0Q29udHJvbDtcclxuXHJcbiAgICAgICAgcHVibGljIERhdGVDb250cm9sIERhdGVDb250cm9sO1xyXG4gICAgICAgIHB1YmxpYyBib29sIENsaWNrZWRDbG9zZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZUZvcm0oVGV4dElucHV0IGlucHV0Q29udHJvbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQcmV2aW91c1Njcm9sbFRvcCA9IGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50LlNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIFBhcmVudENvbnRhaW5lciA9IGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTaXplID0gbmV3IFZlY3RvcjIoMjMyLCAyNDcpO1xyXG5cclxuICAgICAgICAgICAgSW5wdXRDb250cm9sID0gaW5wdXRDb250cm9sO1xyXG4gICAgICAgICAgICBEYXRlQ29udHJvbCA9IG5ldyBEYXRlQ29udHJvbChpbnB1dENvbnRyb2wuR2V0RGF0ZVRpbWUoKSk7XHJcbiAgICAgICAgICAgIERhdGVDb250cm9sLlNldEJvdW5kc0Z1bGwoKTtcclxuXHJcbiAgICAgICAgICAgIERhdGVDb250cm9sLk9uRGF0ZUNoYW5nZWQgPSAoZGF0ZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0ZSA9PSBEYXRlVGltZS5NaW5WYWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dENvbnRyb2wuU2V0RGF0ZShcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dENvbnRyb2wuU2V0RGF0ZShzdHJpbmcuRm9ybWF0KFwiezA6XCIgKyBpbnB1dENvbnRyb2wuRGlzcGxheUZvcm1hdCArIFwifVwiLCBkYXRlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBEYXRlQ29udHJvbC5PblJlcXVlc3RUb0Nsb3NlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5PbktleURvd24gPSBEYXRlQ29udHJvbC5CbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgQXBwZW5kQ2hpbGQoRGF0ZUNvbnRyb2wpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NlZCgpO1xyXG4gICAgICAgICAgICBJbnB1dENvbnRyb2wuVmFsaWRhdGVEYXRhKCk7XHJcbiAgICAgICAgICAgIGlmKCFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIElucHV0Q29udHJvbC5Gb2N1cygpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIElucHV0Q29udHJvbC5TY3JvbGwoUHJldmlvdXNTY3JvbGxUb3AsIFBhcmVudENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25TaG93ZWQoKTtcclxuICAgICAgICAgICAgaWYoSW5wdXRDb250cm9sID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcblxyXG4gICAgICAgICAgICBEYXRlQ29udHJvbC5idG5Ub2RheS5Gb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERhdGVJbnB1dCA6IFRleHRJbnB1dERyb3BEb3duXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIERhdGVJbnB1dCgpIDogYmFzZShJbnB1dFR5cGUuRGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkRyb3BEb3duQ2xpY2tlZChNb3VzZUV2ZW50IG1vdXNlRXZlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighUmVhZG9ubHkgJiYgRW5hYmxlZClcclxuICAgICAgICAgICAgICAgIChuZXcgRGF0ZUZvcm0odGhpcy5Vc2VkRWRpdCkpLlxyXG4gICAgICAgICAgICAgICAgU2hvd1BvcHVwKEZvcm1Qb3B1cC5cclxuICAgICAgICAgICAgICAgICAgICBHZXRQb3B1cERlZmF1bHRMb2NhdGlvbihEcm9wRG93bkJ1dHRvbiwgdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ0NoZWNrYm94IDogSW5wdXREaWFsb2dCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgY2hlY2tib3hcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgYSBib29sZWFuIHZhbHVlIG9mIHRoZSBjaGVja2JveCBzdGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nQ2hlY2tib3goc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBjaGVja2JveFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyBhIGJvb2xlYW4gdmFsdWUgb2YgdGhlIGNoZWNrYm94IHN0YXRlXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+VGhlIHdpZHRoIG9mIHRoaXMgZGlhbG9nLiBUaGUgZGVmYXVsdCBzaXplIGlzIDM2MDwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nQ2hlY2tib3goc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLkNoZWNrYm94KTtcclxuICAgICAgICAgICAgaW5wdXQuSWQgPSBcIkRpYWxvZ0Fuc3dlckJveFwiO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHMoXCIxMHB4XCIsIFwiMHB4XCIsIFwiOTAlXCIsIFwiNDBweFwiKTtcclxuICAgICAgICAgICAgaW5wdXQuT25DaGFuZ2UgPSBldiA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZXN1bHQgPSBpbnB1dC5DaGVja2VkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgNDAgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIFJlc3VsdCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgSW5wdXREaWFsb2dDb2xvdXIgOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBjb2xvdXIgc2VsZWN0b3JcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIEhleENvZGUgZm9yIHRoZSBzZWxlY3RlZCBjb2xvdXJcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0NvbG91cihzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIGNvbG91ciBzZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgSGV4Q29kZSBmb3IgdGhlIHNlbGVjdGVkIGNvbG91clxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0NvbG91cihzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbiwgaW50IHNpemUpIDogYmFzZSh0aXRsZSwgc2l6ZSwgcXVlc3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBJbnB1dChcImlucHV0Y29udHJvbFwiLCBJbnB1dFR5cGUuQ29sb3IpO1xyXG4gICAgICAgICAgICBpbnB1dC5JZCA9IFwiRGlhbG9nQW5zd2VyQm94XCI7XHJcbiAgICAgICAgICAgIGlucHV0LlNldEJvdW5kcyhcIjEwcHhcIiwgXCIwcHhcIiwgXCI5MCVcIiwgXCI0MHB4XCIpO1xyXG4gICAgICAgICAgICBpbnB1dC5PbkNoYW5nZSA9IGV2ID0+IHsgUmVzdWx0ID0gaW5wdXQuVmFsdWU7IH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyA0MCArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIElucHV0RGlhbG9nRGF0ZSA6IElucHV0RGlhbG9nQmFzZVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIERhdGUgU2VsZWN0b3JcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIHNlbGVjdGVkIERhdGVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0RhdGUoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBEYXRlIFNlbGVjdG9yXHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBzZWxlY3RlZCBEYXRlXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+VGhlIHdpZHRoIG9mIHRoaXMgZGlhbG9nLiBUaGUgZGVmYXVsdCBzaXplIGlzIDM2MDwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nRGF0ZShzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbiwgaW50IHNpemUpIDogYmFzZSh0aXRsZSwgc2l6ZSwgcXVlc3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBJbnB1dChcImlucHV0Y29udHJvbFwiLCBJbnB1dFR5cGUuRGF0ZSk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4geyBSZXN1bHQgPSBpbnB1dC5WYWx1ZTsgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDI1ICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlc3VsdCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgSW5wdXREaWFsb2dEYXRlVGltZUxvY2FsIDogSW5wdXREaWFsb2dCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgRGF0ZSBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgRGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nRGF0ZVRpbWVMb2NhbChzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIERhdGUgU2VsZWN0b3JcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIHNlbGVjdGVkIERhdGVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dEYXRlVGltZUxvY2FsKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFJlc3VsdCA9IERhdGVUaW1lLk5vdztcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLkRhdGVUaW1lTG9jYWwpO1xyXG4gICAgICAgICAgICBpbnB1dC5JZCA9IFwiRGlhbG9nQW5zd2VyQm94XCI7XHJcbiAgICAgICAgICAgIGlucHV0LlNldEJvdW5kcyhcIjEwcHhcIiwgXCIwcHhcIiwgXCI5MCVcIiwgXCJhdXRvXCIpO1xyXG4gICAgICAgICAgICBpbnB1dC5PbkNoYW5nZSA9IGV2ID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFJlc3VsdCA9IERhdGVUaW1lLlBhcnNlRXhhY3QoaW5wdXQuVmFsdWUsIFwieXl5eS1NTS1kZFRISDptbVwiLCBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDI1ICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgUmVzdWx0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7IHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgSW5wdXREaWFsb2dFbWFpbCA6IElucHV0RGlhbG9nQmFzZVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhbiBlbWFpbCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBlbWFpbCBhZGRyZXNzXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dFbWFpbChzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhbiBlbWFpbCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBlbWFpbFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0VtYWlsKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5FbWFpbCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy90b2RvIGNzcyBmb3IgZW1haWwgaW5wdXQgbm90IHNob3dpbmcgdXBcclxuICAgICAgICAgICAgICAgIC8vdG9kbyBjb3VsZCBhbHdheXMgdmFsaWRhdGUgZW1haWwgaGVyZVxyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gaW5wdXQuVmFsdWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyAyNSArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDsgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ1dlZWsgOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBXZWVrIGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIHdlZWtcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ1dlZWsoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBXZWVrIGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIFdlZWtcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dXZWVrKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5XZWVrKTtcclxuICAgICAgICAgICAgaW5wdXQuSWQgPSBcIkRpYWxvZ0Fuc3dlckJveFwiO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHMoXCIxMHB4XCIsIFwiMHB4XCIsIFwiOTAlXCIsIFwiYXV0b1wiKTtcclxuICAgICAgICAgICAgaW5wdXQuT25DaGFuZ2UgPSBldiA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZXN1bHQgPSBpbnB1dC5WYWx1ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDI1ICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlc3VsdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0OyBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIElucHV0RGlhbG9nTW9udGggOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBNb250aCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBNb250aFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nTW9udGgoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBNb250aCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBNb250aFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ01vbnRoKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5Nb250aCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gaW5wdXQuVmFsdWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyAyNSArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDsgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ051bWJlciA6IElucHV0RGlhbG9nQmFzZVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIE51bWJlciBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgdmFsdWVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ051bWJlcihzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIE51bWJlciBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgdmFsdWVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dOdW1iZXIoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLk51bWJlcik7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4geyBSZXN1bHQgPSBpbnB1dC5WYWx1ZUFzTnVtYmVyOyB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgMjUgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgUmVzdWx0IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ1RleHQgOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBUZXh0IGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIFRleHRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ1RleHQoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBUZXh0IGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIFRleHRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dUZXh0KHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5UZXh0KTtcclxuICAgICAgICAgICAgaW5wdXQuSWQgPSBcIkRpYWxvZ0Fuc3dlckJveFwiO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHMoXCIxMHB4XCIsIFwiMHB4XCIsIFwiOTAlXCIsIFwiYXV0b1wiKTtcclxuICAgICAgICAgICAgaW5wdXQuT25DaGFuZ2UgPSBldiA9PiB7IFJlc3VsdCA9IGlucHV0LlZhbHVlOyB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgMjUgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVzdWx0IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ0Jhc2UgOiBEaWFsb2dGb3JtXHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIElucHV0RGlhbG9nQmFzZShzdHJpbmcgdGl0bGUsIGludCB3aWR0aCwgc3RyaW5nIHF1ZXN0aW9uKSA6IGJhc2UodGl0bGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXaWR0aCA9IHdpZHRoLlRvUHgoKTtcclxuICAgICAgICAgICAgV3JhcHBlciA9IERpdigpO1xyXG4gICAgICAgICAgICBRdWVzdGlvbkRpdiA9IERpdigpO1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYgPSBEaXYoKTtcclxuICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb24gPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxTaW1wbGVEaWFsb2dCdXR0b24+KCksKF9vMSk9PntfbzEuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5PSykge1RleHQgPSBcIkFjY2VwdFwifSk7X28xLkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsKSB7VGV4dCA9IFwiQ2FuY2VsXCJ9KTtyZXR1cm4gX28xO30pO1xyXG5cclxuICAgICAgICAgICAgV3JhcHBlci5TdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5IaWRkZW47XHJcbiAgICAgICAgICAgIFdyYXBwZXIuU2V0Qm91bmRzKFwiMHB4XCIsIFwiMHB4XCIsIFwiMTAwJVwiLCBcIigxMDAlIC0gNjBweClcIik7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLlBvc2l0aW9uID0gUG9zaXRpb24uUmVsYXRpdmU7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLkhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBRdWVzdGlvbkRpdi5TdHlsZS5NYXJnaW5MZWZ0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLk1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLk1hcmdpblRvcCA9IFwiMTBweFwiO1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuU3R5bGUuUG9zaXRpb24gPSBQb3NpdGlvbi5SZWxhdGl2ZTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LlN0eWxlLkhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvblswXS5TZXRMb2NhdGlvbihcIigxMDAlIC0gMTcwcHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKTtcclxuICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb25bMV0uU2V0TG9jYXRpb24oXCIoMTAwJSAtIDg1cHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YiA9IG5ldyBUZXh0QmxvY2socXVlc3Rpb24sIHdpZHRoIC0gMjUpO1xyXG4gICAgICAgICAgICB0Yi5Db21wdXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZighdGIuRWxlbGVtdHNPdmVyTWF4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IChpbnQpdGIuTWF4Q2FsY3VsYXRlZFdpZHRoICsgNjUgKyAzNztcclxuICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4KVxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRiLkNvbXB1dGVkSGVpZ2h0ID4gU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWF4aW11bUhlaWdodEluUHgpXHJcbiAgICAgICAgICAgICAgICB0Yi5Db21wdXRlZEhlaWdodCA9IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1heGltdW1IZWlnaHRJblB4O1xyXG4gICAgICAgICAgICBpZih0Yi5Db21wdXRlZEhlaWdodCA8IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1pbmltdW1IZWlnaHRJblB4KVxyXG4gICAgICAgICAgICAgICAgdGIuQ29tcHV0ZWRIZWlnaHQgPSBTZXR0aW5ncy5NZXNzYWdlRm9ybVRleHRNaW5pbXVtSGVpZ2h0SW5QeDtcclxuXHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LklubmVySFRNTCA9IHF1ZXN0aW9uO1xyXG4gICAgICAgICAgICBRdWVzdGlvblNpemUgPSBDb252ZXJ0LlRvSW50MzIodGIuQ29tcHV0ZWRIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludCBRdWVzdGlvblNpemUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHByaXZhdGUgSFRNTERpdkVsZW1lbnQgV3JhcHBlciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwcm90ZWN0ZWQgSFRNTERpdkVsZW1lbnQgUXVlc3Rpb25EaXYgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MRGl2RWxlbWVudCBBbnN3ZXJEaXYgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MRGl2RWxlbWVudCBJbWFnZURpdiB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIENyZWF0ZShpbnQgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgV3JhcHBlci5BcHBlbmRDaGlsZChRdWVzdGlvbkRpdik7XHJcbiAgICAgICAgICAgIFdyYXBwZXIuQXBwZW5kQ2hpbGQobmV3IEhUTUxCUkVsZW1lbnQoKSk7XHJcbiAgICAgICAgICAgIFdyYXBwZXIuQXBwZW5kQ2hpbGQoQW5zd2VyRGl2KTtcclxuICAgICAgICAgICAgQm9keS5BcHBlbmRDaGlsZChXcmFwcGVyKTtcclxuXHJcbiAgICAgICAgICAgIEJ1dHRvblNlY3Rpb24uQXBwZW5kQ2hpbGRyZW5UYWJJbmRleChfYnV0dG9uQ29sbGVjdGlvbi5Ub0FycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgSGVpZ2h0ID0gaGVpZ2h0LlRvUHgoKTtcclxuICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTWVzc2FnZUJveEZvcm0gOiBEaWFsb2dGb3JtXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgSFRNTEF1ZGlvRWxlbWVudCBzbmQgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF9wcm9tcHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBCZWVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFTZXR0aW5ncy5NZXNzYWdlRm9ybUJlZXApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmKHNuZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgc25kID0gbmV3IEhUTUxBdWRpb0VsZW1lbnQoUmVzb3VyY2VNYW5hZ2VyLkdldFJlc291cmNlU3RyaW5nKFwiYmVlcFNvdW5kXCIpKTtcclxuICAgICAgICAgICAgc25kLlBsYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgTWVzc2FnZUJveEJ1dHRvbnMgX2J1dHRvbnM7XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ3JlYXRlIGEgbmV3IE1lc3NhZ2UgRGlhbG9nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9tcHRcIj5UaGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIG1lc3NhZ2UgYm94PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1aVwiPlRoZSBVSSBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvIHRoZSBmb3JtPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUJveEZvcm0oc3RyaW5nIHByb21wdCwgTWVzc2FnZUJveExheW91dCB1aSkgOiB0aGlzKHByb21wdCwgdWksIE1lc3NhZ2VCb3hCdXR0b25zLkF1dG8sIHVpLlRvU3RyaW5nKCkpIHsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENyZWF0ZSBhIG5ldyBNZXNzYWdlIERpYWxvZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvbXB0XCI+VGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidWlcIj5UaGUgVUkgc2V0dGluZ3MgdG8gYmUgYXBwbGllZCB0byB0aGUgZm9ybTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgdGl0bGUgb2YgdGhlIG1lc3NhZ2UgYm94PC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUJveEZvcm0oc3RyaW5nIHByb21wdCwgTWVzc2FnZUJveExheW91dCB1aSwgc3RyaW5nIHRpdGxlKSA6IHRoaXMocHJvbXB0LCB1aSwgTWVzc2FnZUJveEJ1dHRvbnMuQXV0bywgdGl0bGUpIHsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENyZWF0ZSBhIG5ldyBNZXNzYWdlIERpYWxvZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvbXB0XCI+VGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidWlcIj5UaGUgVUkgc2V0dGluZ3MgdG8gYmUgYXBwbGllZCB0byB0aGUgZm9ybTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYnV0dG9uc1wiPlRoZSBUeXBlIG9mIGJ1dHRvbiB0byBiZSBkaXNwbGF5ZWQgd2l0aCB0aGlzIG1lc3NhZ2U8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlQm94Rm9ybShzdHJpbmcgcHJvbXB0LCBNZXNzYWdlQm94TGF5b3V0IHVpLCBNZXNzYWdlQm94QnV0dG9ucyBidXR0b25zKSA6IHRoaXMocHJvbXB0LCB1aSwgYnV0dG9ucywgdWkuVG9TdHJpbmcoKSkgeyB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ3JlYXRlIGEgbmV3IE1lc3NhZ2UgRGlhbG9nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9tcHRcIj5UaGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIG1lc3NhZ2UgYm94PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1aVwiPlRoZSBVSSBzZXR0aW5ncyAgdG8gYmUgYXBwbGllZCB0byB0aGUgZm9ybTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYnV0dG9uc1wiPlRoZSBUeXBlIG9mIGJ1dHRvbiB0byBiZSBkaXNwbGF5ZWQgd2l0aCB0aGlzIG1lc3NhZ2U8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIHRpdGxlIG9mIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VCb3hGb3JtKHN0cmluZyBwcm9tcHQsIE1lc3NhZ2VCb3hMYXlvdXQgdWksIE1lc3NhZ2VCb3hCdXR0b25zIGJ1dHRvbnMsIHN0cmluZyB0aXRsZSkgOiBiYXNlKHRpdGxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBEaXYoKTtcclxuICAgICAgICAgICAgdmFyIHBpYyA9IERpdihcImltYWdlMzJcIik7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0Q29udGVudCA9IERpdihcIm1lc3NhZy1ib3gtY29udGVudFwiKTtcclxuICAgICAgICAgICAgX3Byb21wdCA9IHByb21wdDtcclxuICAgICAgICAgICAgX2J1dHRvbnMgPSBidXR0b25zO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoKHVpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VCb3hMYXlvdXQuRXhjbGFtYXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX2J1dHRvbnMgPT0gTWVzc2FnZUJveEJ1dHRvbnMuQXV0bylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9idXR0b25zID0gTWVzc2FnZUJveEJ1dHRvbnMuT2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBpYy5DbGFzc0xpc3QuQWRkKFwiaW1hZ2V3YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUJveExheW91dC5JbmZvcm1hdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICBpZihfYnV0dG9ucyA9PSBNZXNzYWdlQm94QnV0dG9ucy5BdXRvKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2J1dHRvbnMgPSBNZXNzYWdlQm94QnV0dG9ucy5PaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGljLkNsYXNzTGlzdC5BZGQoXCJpbWFnZWluZm9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94TGF5b3V0LlF1ZXN0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9idXR0b25zID09IE1lc3NhZ2VCb3hCdXR0b25zLkF1dG8pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnV0dG9ucyA9IE1lc3NhZ2VCb3hCdXR0b25zLlllc05vO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwaWMuQ2xhc3NMaXN0LkFkZChcImltYWdlaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94TGF5b3V0LkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9idXR0b25zID09IE1lc3NhZ2VCb3hCdXR0b25zLkF1dG8pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnV0dG9ucyA9IE1lc3NhZ2VCb3hCdXR0b25zLkFib3J0U2VuZENhbmNlbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGljLkNsYXNzTGlzdC5BZGQoXCJpbWFnZWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUV4Y2VwdGlvbihcInVpXCIsIHVpLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdHJpbmcgaGVpZ2h0Q2FsYyA9IEhlbHBlci5Ob3REZXNrdG9wID8gXCIoMTAwJSAtIDYwcHgpXCIgOiBcIigxMDAlIC0gMzVweClcIjtcclxuICAgICAgICAgICAgc3dpdGNoKF9idXR0b25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VCb3hCdXR0b25zLk9rOlxyXG4gICAgICAgICAgICAgICAgICAgIF9idXR0b25Db2xsZWN0aW9uID0gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8U2ltcGxlRGlhbG9nQnV0dG9uPigpLChfbzQpPT57X280LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uT0spIHsgVGV4dCA9IFwiT2tcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIig1MCUgLSAzNy41cHgpXCIsIGhlaWdodENhbGMpfSk7cmV0dXJuIF9vNDt9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VCb3hCdXR0b25zLlllc05vOlxyXG4gICAgICAgICAgICAgICAgICAgIF9idXR0b25Db2xsZWN0aW9uID0gZ2xvYmFsOjpCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8U2ltcGxlRGlhbG9nQnV0dG9uPigpLChfbzUpPT57X281LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uTm8pIHsgVGV4dCA9IFwiTm9cIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgaGVpZ2h0Q2FsYyl9KTtfbzUuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5ZZXMpIHsgVGV4dCA9IFwiWWVzXCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDE3MHB4KVwiLCBoZWlnaHRDYWxjKX0pO3JldHVybiBfbzU7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94QnV0dG9ucy5ZZXNOb0NhbmNlbDpcclxuICAgICAgICAgICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvbiA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX282KT0+e19vNi5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgaGVpZ2h0Q2FsYykgfSk7X282LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uTm8pIHsgVGV4dCA9IFwiTm9cIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMTcwcHgpXCIsIGhlaWdodENhbGMpIH0pO19vNi5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLlllcykgeyBUZXh0ID0gXCJZZXNcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMjU1cHgpXCIsIGhlaWdodENhbGMpIH0pO3JldHVybiBfbzY7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94QnV0dG9ucy5BYm9ydFNlbmRDYW5jZWw6XHJcbiAgICAgICAgICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb24gPSBnbG9iYWw6OkJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxTaW1wbGVEaWFsb2dCdXR0b24+KCksKF9vNyk9PntfbzcuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5DYW5jZWwpIHsgVGV4dCA9IFwiQ2FuY2VsXCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDg1cHgpXCIsIGhlaWdodENhbGMpfSk7X283LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uU2VuZCkgeyBUZXh0ID0gXCJTZW5kXCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDE3MHB4KVwiLCBoZWlnaHRDYWxjKSwgSXRlbUNsaWNrID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihTZXR0aW5ncy5PblNlbmRFcnJvciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLk9uU2VuZEVycm9yKF9wcm9tcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0pO19vNy5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkFib3J0KSB7IFRleHQgPSBcIkFib3J0XCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDI1NXB4KVwiLCBoZWlnaHRDYWxjKSwgSXRlbUNsaWNrID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29sIHByZSA9U2V0dGluZ3MuQWxsb3dDbG9zZVdpdGhvdXRRdWVzdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5ncy5BbGxvd0Nsb3NlV2l0aG91dFF1ZXN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbi5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3MuQWxsb3dDbG9zZVdpdGhvdXRRdWVzdGlvbiA9IHByZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX0pO3JldHVybiBfbzc7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVGV4dEJsb2NrIHRiID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IDQ4MDtcclxuXHJcbiAgICAgICAgICAgIGlmKCFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGIgPSBuZXcgVGV4dEJsb2NrKHByb21wdCwgNDgwIC0gMjUpO1xyXG4gICAgICAgICAgICAgICAgdGIuQ29tcHV0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYoX2J1dHRvbkNvbGxlY3Rpb24uQ291bnQgPiAyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgMzIwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDMyMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCF0Yi5FbGVsZW10c092ZXJNYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSAoaW50KXRiLk1heENhbGN1bGF0ZWRXaWR0aCArIDY1ICsgMzc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYod2lkdGggPCBTZXR0aW5ncy5NZXNzYWdlRm9ybU1pbmltdW1XaWR0aEluUHgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gX2J1dHRvbkNvbGxlY3Rpb24uQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnV0ID0gX2J1dHRvbkNvbGxlY3Rpb25baV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0LkhlaWdodCA9IDQ1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Cb3JkZXJSYWRpdXMgPSBcIjRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJ1dC5EaWFsb2dSZXN1bHQgPT0gRGlhbG9nUmVzdWx0RW51bS5PSyB8fCBidXQuRGlhbG9nUmVzdWx0ID09IERpYWxvZ1Jlc3VsdEVudW0uWWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0LkNsYXNzTGlzdC5BZGQoXCJwcmltYXJ5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXQuU3R5bGUuQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Cb3JkZXIgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRleHRDb250ZW50LklubmVySFRNTCA9IHByb21wdDtcclxuXHJcbiAgICAgICAgICAgIHNlY3Rpb24uU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuQXV0bztcclxuICAgICAgICAgICAgc2VjdGlvbi5TdHlsZS5IZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgc2VjdGlvbi5TdHlsZS5NYXhIZWlnaHQgPSBTZXR0aW5ncy5NZXNzYWdlRm9ybVRleHRNYXhpbXVtSGVpZ2h0SW5QeC5Ub1B4KCk7XHJcbiAgICAgICAgICAgIHNlY3Rpb24uQXBwZW5kQ2hpbGQodGV4dENvbnRlbnQpO1xyXG4gICAgICAgICAgICBzZWN0aW9uLlN0eWxlLlRvcCA9IFwiMzJweFwiO1xyXG4gICAgICAgICAgICBzZWN0aW9uLlN0eWxlLldpZHRoID0gXCI5MCVcIjtcclxuXHJcbiAgICAgICAgICAgIGJhc2UuQm9keS5BcHBlbmRDaGlsZHJlbihwaWMsIHNlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgQnV0dG9uU2VjdGlvbi5BcHBlbmRDaGlsZHJlblRhYkluZGV4KF9idXR0b25Db2xsZWN0aW9uLlRvQXJyYXkoKSk7XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLlN0eWxlLlRleHRBbGlnbiA9IFRleHRBbGlnbi5DZW50ZXI7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLlN0eWxlLkxpbmVIZWlnaHQgPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBXaW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQ7XHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nLlN0eWxlLkRpc3BsYXkgPSBEaXNwbGF5Lk5vbmU7XHJcbiAgICAgICAgICAgICAgICBCb2R5LlNldExvY2F0aW9uKDAsIDApO1xyXG4gICAgICAgICAgICAgICAgQm9keS5TZXRTaXplKFwiMTAwJVwiLCBcIjEwMCVcIik7XHJcbiAgICAgICAgICAgICAgICBTdGFydFBvc2l0aW9uID0gRm9ybVN0YXJ0UG9zaXRpb24uTWFudWFsO1xyXG4gICAgICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBBbGxvd01vdmVDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBTaG93TWF4aW1pemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIFNob3dNaW5pbWl6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgU2hvd0Nsb3NlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnQuU3R5bGUuRGlzcGxheSA9IERpc3BsYXkuSW5saW5lQmxvY2s7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnQuU3R5bGUuVmVydGljYWxBbGlnbiA9IFZlcnRpY2FsQWxpZ24uTWlkZGxlO1xyXG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnQuU3R5bGUuTGluZUhlaWdodCA9IFwibm9ybWFsXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZih0Yi5Db21wdXRlZEhlaWdodCA+IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1heGltdW1IZWlnaHRJblB4KVxyXG4gICAgICAgICAgICAgICAgICAgIHRiLkNvbXB1dGVkSGVpZ2h0ID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWF4aW11bUhlaWdodEluUHg7XHJcbiAgICAgICAgICAgICAgICBpZih0Yi5Db21wdXRlZEhlaWdodCA8IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1pbmltdW1IZWlnaHRJblB4KVxyXG4gICAgICAgICAgICAgICAgICAgIHRiLkNvbXB1dGVkSGVpZ2h0ID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWluaW11bUhlaWdodEluUHg7XHJcblxyXG4gICAgICAgICAgICAgICAgYmFzZS5IZWlnaHQgPSB0Yi5Db21wdXRlZEhlaWdodCArIDc3ICsgMjkgKyAzMiArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIGJhc2UuV2lkdGggPSB3aWR0aC5Ub1B4KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJhc2UuQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCZWVwKCk7XHJcblxyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2VkKCk7XHJcbiAgICAgICAgICAgIF9idXR0b25Db2xsZWN0aW9uWzBdLkNvbnRlbnQuRm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVudW0gTWVzc2FnZUJveExheW91dFxyXG4gICAge1xyXG4gICAgICAgIEluZm9ybWF0aW9uLFxyXG4gICAgICAgIEV4Y2xhbWF0aW9uLFxyXG4gICAgICAgIFF1ZXN0aW9uLFxyXG4gICAgICAgIEVycm9yXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVudW0gTWVzc2FnZUJveEJ1dHRvbnNcclxuICAgIHtcclxuICAgICAgICBBdXRvLFxyXG4gICAgICAgIE9rLFxyXG4gICAgICAgIFllc05vLFxyXG4gICAgICAgIFllc05vQ2FuY2VsLFxyXG4gICAgICAgIEFib3J0U2VuZENhbmNlbFxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTnVtYmVySW5wdXQgOiBUZXh0SW5wdXREcm9wRG93blxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBOdW1iZXJJbnB1dCgpIDogYmFzZShJbnB1dFR5cGUuTnVtYmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVXNlZEVkaXQuU2V0QXR0cmlidXRlKFwic3RlcFwiLCBcImFueVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uRHJvcERvd25DbGlja2VkKE1vdXNlRXZlbnQgbW91c2VFdmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFSZWFkb25seSAmJiBFbmFibGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsY0VkaXQgPSBuZXcgQ2FsY0Zvcm0odGhpcy5Vc2VkRWRpdCk7XHJcbiAgICAgICAgICAgICAgICBjYWxjRWRpdC5cclxuICAgICAgICAgICAgICAgIFNob3dQb3B1cChGb3JtUG9wdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgR2V0UG9wdXBEZWZhdWx0TG9jYXRpb24oRHJvcERvd25CdXR0b24sIHRydWUpKTtcclxuICAgICAgICAgICAgICAgIGNhbGNFZGl0Lk9uRm9ybUNsb3NlZCA9ICgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNlYXJjaElucHV0IDogVGV4dElucHV0RHJvcERvd25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEVkaXRWYWx1ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEaXNwbGF5TWVtYmVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFZhbHVlTWVtYmVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0VmFsdWVzKG9iamVjdCBlZGl0VmFsdWUsIHN0cmluZyB0ZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5UZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgRWRpdFZhbHVlID0gRWRpdFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNlYXJjaElucHV0KCkgOiBiYXNlKElucHV0VHlwZS5UZXh0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVXNlZEVkaXQuT25LZXlEb3duID0gKG9iaiwgZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGV2LktleUNvZGUgPT0gMTMgfHwgZXYuS2V5Q29kZSA9PSA0MClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBPbkRyb3BEb3duQ2xpY2tlZChuZXcgTW91c2VFdmVudChcIm9ubW91c2Vkb3duXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgVXNlZEVkaXQuQ29udGVudC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgT25Ecm9wRG93bkNsaWNrZWQobmV3IE1vdXNlRXZlbnQoXCJvbm1vdXNlZG93blwiKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uPHN0cmluZywgR3JpZFZpZXc+IE9uU2VhcmNoO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBib29sIENsZWFyT25PcGVuKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25SZXF1ZXN0U2VhcmNoKHN0cmluZyBzZWFyY2hWYWx1ZSwgR3JpZFZpZXcgZ3JpZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKE9uU2VhcmNoICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBPblNlYXJjaChzZWFyY2hWYWx1ZSwgZ3JpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBib29sIFNlYXJjaE9uTG9hZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIE9uQWNjZXB0UmVzdWx0KERhdGFSb3cgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0VmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihWYWx1ZU1lbWJlciAhPSBcIlwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEVkaXRWYWx1ZSA9IHZhbHVlLkdldFZhbHVlKFZhbHVlTWVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKERpc3BsYXlNZW1iZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gKHZhbHVlLkdldFZhbHVlKERpc3BsYXlNZW1iZXIpICsgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25SZXF1ZXN0TmV3KEdyaWRWaWV3IGdyaWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBPbkNsb3NlZChEYXRhUm93IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uRHJvcERvd25DbGlja2VkKE1vdXNlRXZlbnQgbW91c2VFdmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFSZWFkb25seSAmJiBFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgKG5ldyBTZWFyY2hMb29rdXBGb3JtKHRoaXMpKS5cclxuICAgICAgICAgICAgICAgIFNob3dQb3B1cChGb3JtUG9wdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgR2V0UG9wdXBEZWZhdWx0TG9jYXRpb24oRHJvcERvd25CdXR0b24sIHRydWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTZWFyY2hMb29rdXBGb3JtIDogRm9ybVBvcHVwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFNlYXJjaElucHV0IFNlYXJjaElucHV0O1xyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IEZvY3VzZWRSb3c7XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3IFZpZXc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQgU2VhcmNoRWRpdDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blNlYXJjaDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkNsb3NlO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuTmV3O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuVXNlO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuQ2xlYXI7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25TaG93ZWQoKTtcclxuXHJcbiAgICAgICAgICAgIFNlYXJjaEVkaXQuRm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKFNlYXJjaElucHV0LlNlYXJjaE9uTG9hZCgpKVxyXG4gICAgICAgICAgICAgICAgYnRuU2VhcmNoLkNvbnRlbnQuQ2xpY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZWFyY2hMb29rdXBGb3JtKFNlYXJjaElucHV0IHNlYXJjaElucHV0KSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc2VhcmNoSW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgc2VhcmNoSW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTY3JvbGxUb3AgPSBzZWFyY2hJbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5TY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRDb250YWluZXIgPSBzZWFyY2hJbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgeCA9IHNlYXJjaElucHV0LkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBNaW5IZWlnaHQgPSAxMDA7XHJcbiAgICAgICAgICAgIE1pbldpZHRoID0gMTUwO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdpZCA9IHNlYXJjaElucHV0LkdldERyb3Bkb3duV2lkdGgoKTtcclxuICAgICAgICAgICAgaWYod2lkIDwgMTUwKVxyXG4gICAgICAgICAgICAgICAgd2lkID0gMTUwO1xyXG5cclxuICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKHdpZCwgMjUwKTtcclxuXHJcbiAgICAgICAgICAgIEFsbG93U2l6ZUNoYW5nZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBTZWFyY2hJbnB1dCA9IHNlYXJjaElucHV0O1xyXG5cclxuICAgICAgICAgICAgdmFyIGZyYWcgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBmcmFnLkFwcGVuZENoaWxkcmVuKFxyXG4gICAgICAgICAgICAgICAgU2VhcmNoRWRpdCA9IG5ldyBUZXh0SW5wdXQoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBzZWFyY2hJbnB1dC5DbGVhck9uT3BlbigpID8gXCJcIiA6IFNlYXJjaElucHV0LlRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgT25Gb2N1c0RvbnRTZWxlY3RBbGwgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIERpc2FibGVGb2N1c1BvcHVwID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNCg0LCA0LCBcIigxMDAlIC0gNjhweClcIiwgMjApLFxyXG4gICAgICAgICAgICAgICAgICAgIFRvb2xUaXAgPSBuZXcgVG9vbFRpcChcIkhlbHA6XCIsIFwiW0VudGVyXSB0byBTZWFyY2gsIFtDVFJMXSArIFtFbnRlcl0gdG8gU2VhcmNoIGFuZCBVc2UsIFtFU0NdIHRvIGNsb3NlXCIpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuU2VhcmNoID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiU2VhcmNoXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoXCIoMTAwJSAtIDY1cHgpXCIsIDQsIDYxLCAyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKHMpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PblJlcXVlc3RTZWFyY2goU2VhcmNoRWRpdC5UZXh0LCBWaWV3KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgVmlldyA9IG5ldyBHcmlkVmlldyh0cnVlLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEFsbG93TXVsdGlTZWxlY3Rpb24gPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBVc2VFZGl0Rm9ybSA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIEJvdW5kcyA9IG5ldyBWZWN0b3I0KDQsIDI4LCBcIigxMDAlIC0gMTBweClcIiwgXCIoMTAwJSAtIDYwcHgpXCIpXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuQ2xvc2UgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCImdGltZXM7XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoNCwgXCIoMTAwJSAtIDI1cHgpXCIsIDIwLCAyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKHMpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5OZXcgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCJOZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNChcIigxMDAlIC0gNjVweClcIiwgXCIoMTAwJSAtIDI1cHgpXCIsIDYxLCAyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKHMpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PblJlcXVlc3ROZXcoVmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgYnRuVXNlID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiVXNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoXCIoMTAwJSAtIDEzMnB4KVwiLCBcIigxMDAlIC0gMjVweClcIiwgNjEsIDIwKSxcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAocykgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFZpZXcuRm9jdXNlZERhdGFIYW5kbGUgPT0gLTEgJiYgVmlldy5Sb3dDb3VudCgpID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoRm9jdXNlZFJvdyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PbkFjY2VwdFJlc3VsdChGb2N1c2VkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5DbGVhciA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIkNsZWFyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoXCIoMTAwJSAtIDE5OXB4KVwiLCBcIigxMDAlIC0gMjVweClcIiwgNjEsIDIwKSxcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAocykgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PbkFjY2VwdFJlc3VsdChGb2N1c2VkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuQ29sb3IgPSBcInJlZFwiO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQuSGVpZ2h0ID0gXCI0NXB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuU2VhcmNoLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5TZWFyY2guSGVpZ2h0ID0gNDU7XHJcblxyXG4gICAgICAgICAgICAgICAgVmlldy5Ub3AgPSA1NTtcclxuICAgICAgICAgICAgICAgIFZpZXcuSGVpZ2h0ID0gXCIoMTAwJSAtIDExMnB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0bkNsZWFyLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5DbGVhci5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0bkNsZWFyLlRvcCA9IFwiKDEwMCUgLSA1MXB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0blVzZS5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuVXNlLkhlaWdodCA9IDQ1O1xyXG4gICAgICAgICAgICAgICAgYnRuVXNlLlRvcCA9IFwiKDEwMCUgLSA1MXB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0bk5ldy5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuTmV3LkhlaWdodCA9IDQ1O1xyXG4gICAgICAgICAgICAgICAgYnRuTmV3LlRvcCA9IFwiKDEwMCUgLSA1MXB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0bkNsb3NlLlN0eWxlLkZvbnRTaXplID0gXCIyNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0bkNsb3NlLldpZHRoID0gNjE7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2VhcmNoRWRpdC5PbktleURvd24gPSAob2JqLCBldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoZXYuS2V5Q29kZSA9PSA5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoZXYuS2V5Q29kZSA9PSAxMylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PblJlcXVlc3RTZWFyY2goU2VhcmNoRWRpdC5UZXh0LCBWaWV3KTtcclxuICAgICAgICAgICAgICAgICAgICBpZihldi5DdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuVXNlLkNvbnRlbnQuQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoZXYuS2V5Q29kZSA9PSAyNylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFZpZXcuT25Gb2N1c2VkUm93Q2hhbmdlZCA9IChyb3csIGNvbCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSA+IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBWaWV3LkRhdGFTb3VyY2VbVmlldy5HZXREYXRhU291cmNlUm93KFZpZXcuRm9jdXNlZERhdGFIYW5kbGUpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQWNjZXB0UmVzdWx0KEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgVmlldy5PblJvd0RvdWJsZUNsaWNrID0gKHJvdykgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSA+IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBWaWV3LkRhdGFTb3VyY2VbVmlldy5HZXREYXRhU291cmNlUm93KFZpZXcuRm9jdXNlZERhdGFIYW5kbGUpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQWNjZXB0UmVzdWx0KEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKGZyYWcpO1xyXG5cclxuICAgICAgICAgICAgU2VhcmNoRWRpdC5PbkdvdEZvY3VzID0gKG9iaikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2VhcmNoRWRpdC5HZXRJbnB1dCgpLlNlbGVjdGlvblN0YXJ0ID0gU2VhcmNoRWRpdC5UZXh0Lkxlbmd0aDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIExpbmtjaGlsZFRvRm9ybShWaWV3KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTtcclxuXHJcbiAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQ2xvc2VkKEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICBTZWFyY2hJbnB1dC5WYWxpZGF0ZURhdGEoKTtcclxuICAgICAgICAgICAgaWYoIUhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgU2VhcmNoSW5wdXQuR2V0SW5wdXQoKS5Gb2N1cygpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlYXJjaElucHV0LlNjcm9sbChQcmV2aW91c1Njcm9sbFRvcCwgUGFyZW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcbnVzaW5nIFN5c3RlbTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRleHRGb3JtIDogRm9ybVBvcHVwXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBUZXh0SW5wdXQgUmVhZElucHV0O1xyXG4gICAgICAgIHByaXZhdGUgVGV4dElucHV0IEVkaXRJbnB1dDtcclxuICAgICAgICBwcml2YXRlIFNpbXBsZUJ1dHRvbiBidG5Eb25lO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2VkKCk7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgZGF0YVAgPSBSZWFkSW5wdXQuR2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKTtcclxuICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGF0YVApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQuU2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgZGF0YVApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoUmVhZElucHV0LkdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpKSlcclxuICAgICAgICAgICAgICAgICAgICBFZGl0SW5wdXQuU2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgUmVhZElucHV0LkdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRWRpdElucHV0LkZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEZvcm0oVGV4dElucHV0IGlucHV0KSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoaW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTY3JvbGxUb3AgPSBpbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5TY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRDb250YWluZXIgPSBpbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgV2luZG93U3RhdGUgPSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkO1xyXG5cclxuICAgICAgICAgICAgUmVhZElucHV0ID0gaW5wdXQ7XHJcblxyXG4gICAgICAgICAgICBpZihSZWFkSW5wdXQgaXMgTWVtb0lucHV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQgPSBuZXcgTWVtb0lucHV0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQgPSBuZXcgVGV4dElucHV0KGlucHV0LlR5cGUpIHsgRGlzcGxheUZvcm1hdCA9IFJlYWRJbnB1dC5EaXNwbGF5Rm9ybWF0IH07XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQuT25LZXlEb3duID0gKHMsIGV2KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGV2LktleUNvZGUgPT0gMTMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5Eb25lLkNvbnRlbnQuQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFZGl0SW5wdXQuVGV4dCA9IGlucHV0LlRleHQ7XHJcbiAgICAgICAgICAgIEVkaXRJbnB1dC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG5cclxuICAgICAgICAgICAgRWRpdElucHV0LkRpc2FibGVGb2N1c1BvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgRWRpdElucHV0LlNpemUgPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMTEycHgpXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICAgICAgRWRpdElucHV0LkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcblxyXG4gICAgICAgICAgICBidG5Eb25lID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRleHQgPSBcIiZ0aW1lcztcIixcclxuICAgICAgICAgICAgICAgIEJvdW5kcyA9IG5ldyBWZWN0b3I0KFwiKDEwMCUgLSAxMDZweClcIiwgXCIoNTAlIC0gMjIuNXB4KVwiLCAxMDAsIDQ1KSxcclxuICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChzZW5kZXIpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKEVkaXRJbnB1dC5HZXRFZGl0VmFsdWUoKSAhPSBSZWFkSW5wdXQuR2V0RWRpdFZhbHVlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFkSW5wdXQuVGV4dCA9IEVkaXRJbnB1dC5UZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoUmVhZElucHV0LklzU3VibWl0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljIGUgPSBqUXVlcnkuRXZlbnQoXCJrZXlwcmVzc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUud2hpY2ggPSAxMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChSZWFkSW5wdXQuQ29udGVudCkuVHJpZ2dlcigoalF1ZXJ5RXZlbnQpZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihSZWFkSW5wdXQuR29OZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IERvY3VtZW50LlF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dCwgdGV4dGFyZWEsIGJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB0YWJQbHVzMSA9IFJlYWRJbnB1dC5Db250ZW50LlRhYkluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCB4Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhbaV0uQXM8SFRNTEVsZW1lbnQ+KCkuVGFiSW5kZXggPT0gdGFiUGx1czEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4W2ldLkFzPEhUTUxFbGVtZW50PigpLkZvY3VzRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBidG5Eb25lLlN0eWxlLkJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XHJcbiAgICAgICAgICAgIGJ0bkRvbmUuQ2xhc3NMaXN0LkFkZChcInByaW1hcnlcIik7XHJcbiAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuQm9yZGVyV2lkdGggPSBcIjBcIjtcclxuXHJcbiAgICAgICAgICAgIGJ0bkRvbmUuVGV4dCA9IFwiJnRpbWVzO1wiO1xyXG4gICAgICAgICAgICBidG5Eb25lLlN0eWxlLkZvbnRTaXplID0gXCIyNnB4XCI7XHJcbiAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFdlaWdodCA9IFwiYm9sZFwiO1xyXG5cclxuICAgICAgICAgICAgRWRpdElucHV0Lk9uVGV4dENoYW5nZWQgPSAoc2VuZGVyKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihFZGl0SW5wdXQuR2V0RWRpdFZhbHVlKCkgPT0gUmVhZElucHV0LkdldEVkaXRWYWx1ZSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuVGV4dCA9IFwiJnRpbWVzO1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFNpemUgPSBcIjI2cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBidG5Eb25lLlN0eWxlLkZvbnRXZWlnaHQgPSBcImJvbGRcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidG5Eb25lLlRleHQgPSBSZWFkSW5wdXQuSXNTdWJtaXQgPyBcIlN1Ym1pdFwiIDogUmVhZElucHV0LkdvTmV4dCA/IFwiTmV4dFwiIDogXCJEb25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFdlaWdodCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBBcHBlbmRDaGlsZHJlbihFZGl0SW5wdXQsIGJ0bkRvbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVhZElucHV0LlNjcm9sbChQcmV2aW91c1Njcm9sbFRvcCwgUGFyZW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgUmVhZElucHV0LlZhbGlkYXRlRGF0YSgpO1xyXG4gICAgICAgICAgICBiYXNlLk9uQ2xvc2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBOZXd0b25zb2Z0Lkpzb247XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVGhlbWVGb3JtIDogRGlhbG9nRm9ybVxyXG4gICAge1xyXG4gICAgICAgIHByaXZhdGUgVGhlbWUgY3VycmVudFRoZW1lO1xyXG4gICAgICAgIHByaXZhdGUgVGhlbWUgcHJldlRoZW1lO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBib29sIF90aGVtZVZpc2libGU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGhlbWVGb3JtIHRoZW1lRm9ybSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaG93VGhlbWVGb3JtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFfdGhlbWVWaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGVtZUZvcm0gPSBuZXcgVGhlbWVGb3JtKCk7XHJcbiAgICAgICAgICAgICAgICB0aGVtZUZvcm0uU2hvdyh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfdGhlbWVWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NlZCgpO1xyXG4gICAgICAgICAgICBfdGhlbWVWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkdvdEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKENvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3R5bGUuT3BhY2l0eSA9IFwiMVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhc2UuT25Hb3RGb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Mb3N0Rm9jdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoQ29udGVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTdHlsZS5PcGFjaXR5ID0gXCIwLjVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYXNlLk9uTG9zdEZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGhlbWVGb3JtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByZXZUaGVtZSA9IFNldHRpbmdzLkFjdGl2ZVRoZW1lO1xyXG4gICAgICAgICAgICBjdXJyZW50VGhlbWUgPSBKc29uQ29udmVydC5EZXNlcmlhbGl6ZU9iamVjdDxUaGVtZT4oSnNvbkNvbnZlcnQuU2VyaWFsaXplT2JqZWN0KHByZXZUaGVtZSwgbmV3IEpzb25TZXJpYWxpemVyU2V0dGluZ3MoKSB7IFR5cGVOYW1lSGFuZGxpbmcgPSBUeXBlTmFtZUhhbmRsaW5nLk9iamVjdHMgfSksIG5ldyBKc29uU2VyaWFsaXplclNldHRpbmdzKCkgeyBUeXBlTmFtZUhhbmRsaW5nID0gVHlwZU5hbWVIYW5kbGluZy5PYmplY3RzIH0pO1xyXG5cclxuICAgICAgICAgICAgU2V0dGluZ3MuQWN0aXZlVGhlbWUgPSBjdXJyZW50VGhlbWU7XHJcblxyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvbiA9IGdsb2JhbDo6QnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX28yKT0+e19vMi5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgXCIoMTAwJSAtIDM1cHgpXCIpLCBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLkFjdGl2ZVRoZW1lID0gcHJldlRoZW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fSk7X28yLkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uT0spIHsgVGV4dCA9IFwiT0tcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMTcwcHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKSwgSXRlbUNsaWNrID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5ncy5BcHBseUFjdGl2ZVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19KTtyZXR1cm4gX28yO30pO1xyXG4gICAgICAgICAgICBCdXR0b25TZWN0aW9uLkFwcGVuZENoaWxkcmVuVGFiSW5kZXgoX2J1dHRvbkNvbGxlY3Rpb24uVG9BcnJheSgpKTtcclxuXHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBjdXJyZW50VGhlbWUuQ29sb3JzLkxlbmd0aDtcclxuICAgICAgICAgICAgaW50IHkgPSAyMDtcclxuICAgICAgICAgICAgaW50IHggPSAyMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBQYW5lbCA9IERpdigpO1xyXG4gICAgICAgICAgICBQYW5lbC5TdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5BdXRvO1xyXG4gICAgICAgICAgICBQYW5lbC5TZXRCb3VuZHMoMCwgMCwgXCIxMDAlXCIsIFwiKDEwMCUgLSA2MHB4KVwiKTtcclxuXHJcbiAgICAgICAgICAgIEJvZHkuU3R5bGUuQmFja2dyb3VuZENvbG9yID0gQ29sb3IuV2hpdGU7XHJcblxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFBhbmVsLkFwcGVuZENoaWxkKG5ldyBDb2xvcklucHV0KClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gY3VycmVudFRoZW1lLkNvbG9yc1tpXS5Ub1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIFRvb2xUaXAgPSBuZXcgVG9vbFRpcChcIlRoaXMgaXMgYSBoZWFkaW5nIHRlc3QuXCIsIFwiVGhpcyBpcyBhIGRlc2NyaXB0aW9uIHRlc3QuXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIE9uVGV4dENoYW5nZWQgPSAodHgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0eC5HZXRBdHRyaWJ1dGVpKFwiaVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRoZW1lLkNvbG9yc1tpbmRleF0gPSB0eC5UZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3MuQXBwbHlBY3RpdmVUaGVtZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0uXHJcbiAgICAgICAgICAgICAgICBTZXRBdHRyaWJ1dGUoXCJpXCIsIGkpLlxyXG4gICAgICAgICAgICAgICAgU2V0Qm91bmRzKHgsIHksIDk1LCAyMCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggKz0gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGkgJSAyICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSAzMDtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gMjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEJvZHkuQXBwZW5kQ2hpbGQoUGFuZWwpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5TaXplID0gbmV3IFZlY3RvcjIoMjUwLCAzMDApO1xyXG4gICAgICAgICAgICB0aGlzLlRleHQgPSBcIlRoZW1lIEZvcm0gRWRpdG9yXCI7XHJcblxyXG4gICAgICAgICAgICBBbGxvd01vdmVDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIFNob3dDbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTaG93TWF4aW1pemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgU2hvd01pbmltaXplID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0KfQo=

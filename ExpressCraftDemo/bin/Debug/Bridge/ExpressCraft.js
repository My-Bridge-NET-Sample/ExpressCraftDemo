/**
 * @version 1.0.0.0
 * @copyright Copyright Â©  2017
 * @compiler Bridge.NET 16.0.1
 */
Bridge.assembly("ExpressCraft", function ($asm, globals) {
    "use strict";

    Bridge.define("ExpressCraft.Control", {
        statics: {
            fields: {
                ControlClass: null,
                cva: null
            },
            ctors: {
                init: function () {
                    this.ControlClass = "control";
                }
            },
            methods: {
                BaseClass: function (add, ac) {
                    if (add === void 0) { add = true; }
                    if (ac === void 0) { ac = true; }
                    return ac ? (add ? " control" : ExpressCraft.Control.ControlClass) : "";
                },
                GetImageString: function (s) {
                    return System.String.format("url('data:image/png;base64,{0}') no-repeat", s);
                },
                GetPdfString: function (s) {
                    return System.String.format("data:application/pdf;base64,{0}", s);
                },
                GetImageStringURI: function (s, useResourceURL) {
                    if (useResourceURL === void 0) { useResourceURL = true; }
                    return System.String.format("url('{0}{1}') no-repeat", useResourceURL ? ExpressCraft.Settings.ResourceURL : "", s);
                },
                Div: function (ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement('div'), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);
                },
                Div$1: function (cn, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement('div'), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                },
                Span: function (ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement('span'), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);
                },
                Span$1: function (cn, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement('span'), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                },
                Label$2: function (Caption, X, Y, IsBold, IsTiny, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement('span'), $t.className = ExpressCraft.Control.BaseClass(false, ac), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(Caption);
                    ExpressCraft.Helper.SetLocation(lbl, X, Y);
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label$4: function (Caption, X, Y, width, height, IsBold, IsTiny, classr, Alignment, Forecolor, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (Alignment === void 0) { Alignment = 3; }
                    if (Forecolor === void 0) { Forecolor = null; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement('span'), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(Caption);
                    ExpressCraft.Helper.SetBounds$1(lbl, X, Y, width, height);
                    if (Alignment !== "left") {
                        lbl.style.textAlign = Alignment;
                    }
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);
                    if (Forecolor != null) {
                        lbl.style.color = Forecolor;
                    }

                    return lbl;
                },
                Label$3: function (Caption, X, Y, width, IsBold, IsTiny, classr, Alignment, Forecolor, ac) {
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (Alignment === void 0) { Alignment = 3; }
                    if (Forecolor === void 0) { Forecolor = null; }
                    if (ac === void 0) { ac = true; }
                    var lbl = document.createElement('span');
                    lbl.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac));
                    lbl.textContent = Caption;
                    lbl.style.left = ExpressCraft.Helper.ToPx(Bridge.box(X, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.top = ExpressCraft.Helper.ToPx(Bridge.box(Y, System.Single, System.Single.format, System.Single.getHashCode));
                    lbl.style.width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Single, System.Single.format, System.Single.getHashCode));

                    if (Alignment !== "left") {
                        if (Alignment === "right") {
                            lbl.style.direction = "rtl";
                        } else {
                            lbl.style.textAlign = Alignment;
                        }
                    }
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);
                    if (Forecolor != null) {
                        lbl.style.color = Forecolor;
                    }

                    return lbl;
                },
                Label$5: function (c, X, Y, width, height, IsBold, IsTiny, classr, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement('span'), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(c);
                    ExpressCraft.Helper.SetBounds$1(lbl, X, Y, width, height);
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label$1: function (c, X, Y, width, IsBold, IsTiny, classr, ac) {
                    var $t;
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (classr === void 0) { classr = ""; }
                    if (ac === void 0) { ac = true; }
                    var lbl = ($t = document.createElement('span'), $t.className = System.String.concat(classr, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(classr), ac)), $t);

                    lbl.innerHTML = ExpressCraft.Helper.HtmlEscape$1(c);
                    ExpressCraft.Helper.SetLocation(lbl, X, Y);
                    lbl.style.width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                    ExpressCraft.Control.SetBT(lbl, IsBold, IsTiny);

                    return lbl;
                },
                Label: function (c, X, Y, IsBold, IsTiny, ac) {
                    if (IsBold === void 0) { IsBold = false; }
                    if (IsTiny === void 0) { IsTiny = false; }
                    if (ac === void 0) { ac = true; }
                    return ExpressCraft.Control.Label$2(c, X, Y, IsBold, IsTiny, ac);
                },
                SetBT: function (lbl, IsBold, IsTiny) {
                    if (IsBold) {
                        lbl.style.fontWeight = "bold";
                    }
                    if (IsTiny) {
                        lbl.style.fontSize = "6.75pt";
                    }
                },
                ComboBox: function (cn, ct, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    var combo = ($t = document.createElement('select'), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t);
                    if (ct === ExpressCraft.ComboBoxTypes.Default) {

                    }
                    return combo;
                },
                Button: function (cn, bt, ac) {
                    var $t;
                    if (ac === void 0) { ac = true; }
                    return ($t = document.createElement('button'), $t.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(true, ac)), $t.type = bt, $t);
                },
                Input: function (cn, it, ac) {
                    if (ac === void 0) { ac = true; }
                    var input = document.createElement('input');
                    input.className = System.String.concat(cn, ExpressCraft.Control.BaseClass(!System.String.isNullOrWhiteSpace(cn), ac));
                    var ty = it;
                    if (Bridge.Browser.isIE && (Bridge.referenceEquals(ty, "text") || Bridge.referenceEquals(ty, "date") || Bridge.referenceEquals(ty, "color") || Bridge.referenceEquals(ty, 19) || Bridge.referenceEquals(ty, 3) || Bridge.referenceEquals(ty, 2))) {
                        return input;
                    }
                    input.type = it;

                    return input;
                },
                /**
                 * Returns Text Metrics for a given string
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Control
                 * @memberof ExpressCraft.Control
                 * @param   {string}         t    the string
                 * @param   {string}         f    the font used
                 * @return  {TextMetrics}         TextMetrics
                 */
                GetTextMetrics: function (t, f) {
                    var $t;
                    if (Bridge.referenceEquals(f, "")) {
                        f = "8.25pt Tahoma";
                    }
                    var c = (ExpressCraft.Control.cva || (($t = document.createElement('canvas'), ExpressCraft.Control.cva = $t, $t))).getContext("2d");
                    c.font = f;
                    return c.measureText(t);
                },
                /**
                 * Returns text width
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Control
                 * @memberof ExpressCraft.Control
                 * @param   {string}    t    the string
                 * @param   {string}    f    the font used
                 * @return  {number}         double
                 */
                GetTextWidth: function (t, f) {
                    return ExpressCraft.Control.GetTextMetrics(t, f).width;
                },
                op_Implicit: function (control) {
                    if (ExpressCraft.Settings.AutoRender && !control.HasRendered) {
                        control.Render();
                    }
                    return control.Content;
                }
            }
        },
        fields: {
            Content: null,
            Name: null,
            HasRendered: false,
            _toolTip: null,
            _OnMouseEnterToolTip: null,
            _OnMouseLeaveToolTip: null,
            OnResize: null,
            OnLoaded: null,
            ContextMenu: null,
            LinkedForm: null
        },
        props: {
            ToolTip: {
                get: function () {
                    return this._toolTip;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._toolTip, value)) {
                        if (value != null) {
                            if (value.AttachedControl != null && !Bridge.referenceEquals(value.AttachedControl, this)) {
                                value = null;
                            } else {
                                value.AttachedControl = this;
                            }
                        }
                        this._toolTip = value;

                        if (this._toolTip != null && (!ExpressCraft.Helper.IsEmpty(this._toolTip.Heading) || !ExpressCraft.Helper.IsEmpty(this._toolTip.Description))) {
                            this._OnMouseEnterToolTip = Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f1);
                            this._OnMouseLeaveToolTip = Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f2);

                            this.Content.addEventListener("mouseenter", this._OnMouseEnterToolTip);
                            this.Content.addEventListener("mouseleave", this._OnMouseLeaveToolTip);
                            return;
                        }

                        if (!Bridge.staticEquals(this._OnMouseEnterToolTip, null)) {
                            this.Content.removeEventListener("mouseenter", this._OnMouseEnterToolTip);
                            this._OnMouseEnterToolTip = null;
                        }
                        if (!Bridge.staticEquals(this._OnMouseLeaveToolTip, null)) {
                            this.Content.removeEventListener("mouseleave", this._OnMouseLeaveToolTip);
                            this._OnMouseLeaveToolTip = null;
                        }
                    }
                }
            },
            Style: {
                get: function () {
                    return this.Content.style;
                }
            },
            ClassList: {
                get: function () {
                    return this.Content.classList;
                }
            },
            Width: {
                get: function () {
                    return this.Content.style.width;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(this.Content.style.width, x)) {
                        this.Content.style.width = x;
                        this.OnSizeChanged();
                    }
                }
            },
            Height: {
                get: function () {
                    return this.Content.style.height;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(x, this.Content.style.height)) {
                        this.Content.style.height = x;
                        this.OnSizeChanged();
                    }
                }
            },
            Left: {
                get: function () {
                    return this.Content.style.left;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(x, this.Content.style.left)) {
                        this.Content.style.left = x;
                        this.OnLocationChanged();
                    }
                }
            },
            Top: {
                get: function () {
                    return this.Content.style.top;
                },
                set: function (value) {
                    var x = ExpressCraft.Helper.ToHtmlValue(value);
                    x = ExpressCraft.Vector2.pf(x);
                    if (!Bridge.referenceEquals(this.Content.style.top, x)) {
                        this.Content.style.top = x;
                        this.OnLocationChanged();
                    }
                }
            },
            Size: {
                get: function () {
                    return new ExpressCraft.Vector2.$ctor1(this.Width, this.Height);
                },
                set: function (value) {
                    this.Width = value.X;
                    this.Height = value.Y;
                }
            },
            Location: {
                get: function () {
                    return new ExpressCraft.Vector2.$ctor1(this.Left, this.Top);
                },
                set: function (value) {
                    this.Left = value.X;
                    this.Top = value.Y;
                }
            },
            Bounds: {
                get: function () {
                    return new ExpressCraft.Vector4.$ctor1(this.Left, this.Top, this.Width, this.Height);
                },
                set: function (value) {
                    this.Left = value.X;
                    this.Top = value.Y;
                    this.Width = value.Z;
                    this.Height = value.M;
                }
            }
        },
        ctors: {
            init: function () {
                this.HasRendered = false;
            },
            $ctor1: function (ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Div(ac);
            },
            ctor: function (element) {
                this.$initialize();
                this.Content = element;
            },
            $ctor5: function (cn, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Div$1(cn, ac);
            },
            $ctor2: function (cn, bt, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Button(cn, bt, ac);
            },
            $ctor4: function (cn, ct, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.ComboBox(cn, ct, ac);
            },
            $ctor3: function (cn, it, ac) {
                if (ac === void 0) { ac = true; }

                this.$initialize();
                this.Content = ExpressCraft.Control.Input(cn, it, ac);
            }
        },
        methods: {
            SetAttribute: function (name, value) {
                this.Content.setAttribute(name, ExpressCraft.Helper.ToStr(value));

                return this;
            },
            GetAttribute: function (name) {
                return this.Content.getAttribute(name);
            },
            GetAttributei: function (name) {
                return parseInt(this.Content.getAttribute(name));
            },
            GetAttributef: function (name) {
                return parseFloat(this.Content.getAttribute(name));
            },
            OnLocationChanged: function () {

            },
            OnSizeChanged: function () {

            },
            Render: function () {
                this.HasRendered = true;
            },
            Focus: function () {
                Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.Control.f3), 0);
            },
            ChangeState: function (s, sf) {
                if (sf === void 0) { sf = "disabled"; }
                if (s) {
                    this.Content.classList.remove(sf);
                } else {
                    this.Content.classList.add(sf);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.Control", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Control, {
        f1: function (ev) {
            if (!(Bridge.is(this, ExpressCraft.ToolTipControl))) {
                ExpressCraft.Form.ActiveToolTip = this._toolTip;
            }
        },
        f2: function (ev) {
            if (!(Bridge.is(this, ExpressCraft.ToolTipControl))) {
                ExpressCraft.Form.ActiveToolTip = null;
            }
        },
        f3: function () {
            this.Content.focus();
        }
    });

    Bridge.define("ExpressCraft.AceModeTypes", {
        $kind: "enum",
        statics: {
            fields: {
                abap: 0,
                abc: 1,
                actionscript: 2,
                ada: 3,
                apache_conf: 4,
                asciidoc: 5,
                assembly_x86: 6,
                autohotkey: 7,
                batchfile: 8,
                bro: 9,
                c_cpp: 10,
                c9search: 11,
                cirru: 12,
                clojure: 13,
                cobol: 14,
                coffee: 15,
                coldfusion: 16,
                csharp: 17,
                css: 18,
                curly: 19,
                d: 20,
                dart: 21,
                diff: 22,
                dockerfile: 23,
                dot: 24,
                drools: 25,
                dummy: 26,
                dummysyntax: 27,
                eiffel: 28,
                ejs: 29,
                elixir: 30,
                elm: 31,
                erlang: 32,
                forth: 33,
                fortran: 34,
                ftl: 35,
                gcode: 36,
                gherkin: 37,
                gitignore: 38,
                glsl: 39,
                gobstones: 40,
                golang: 41,
                groovy: 42,
                haml: 43,
                handlebars: 44,
                haskell: 45,
                haskell_cabal: 46,
                haxe: 47,
                hjson: 48,
                html: 49,
                html_elixir: 50,
                html_ruby: 51,
                ini: 52,
                io: 53,
                jack: 54,
                jade: 55,
                java: 56,
                javascript: 57,
                json: 58,
                jsoniq: 59,
                jsp: 60,
                jsx: 61,
                julia: 62,
                kotlin: 63,
                latex: 64,
                less: 65,
                liquid: 66,
                lisp: 67,
                livescript: 68,
                logiql: 69,
                lsl: 70,
                lua: 71,
                luapage: 72,
                lucene: 73,
                makefile: 74,
                markdown: 75,
                mask: 76,
                matlab: 77,
                maze: 78,
                mel: 79,
                mushcode: 80,
                mysql: 81,
                nix: 82,
                nsis: 83,
                objectivec: 84,
                ocaml: 85,
                pascal: 86,
                perl: 87,
                pgsql: 88,
                php: 89,
                powershell: 90,
                praat: 91,
                prolog: 92,
                properties: 93,
                protobuf: 94,
                python: 95,
                r: 96,
                razor: 97,
                rdoc: 98,
                rhtml: 99,
                rst: 100,
                ruby: 101,
                rust: 102,
                sass: 103,
                scad: 104,
                scala: 105,
                scheme: 106,
                scss: 107,
                sh: 108,
                sjs: 109,
                smarty: 110,
                snippets: 111,
                soy_template: 112,
                space: 113,
                sql: 114,
                sqlserver: 115,
                stylus: 116,
                svg: 117,
                swift: 118,
                tcl: 119,
                tex: 120,
                text: 121,
                textile: 122,
                toml: 123,
                tsx: 124,
                twig: 125,
                typescript: 126,
                vala: 127,
                vbscript: 128,
                velocity: 129,
                verilog: 130,
                vhdl: 131,
                wollok: 132,
                xml: 133,
                xquery: 134,
                yaml: 135,
                django: 136
            }
        }
    });

    Bridge.define("ExpressCraft.AceThemeTypes", {
        $kind: "enum",
        statics: {
            fields: {
                label: 0,
                chrome: 1,
                clouds: 2,
                crimson_editor: 3,
                dawn: 4,
                dreamweaver: 5,
                eclipse: 6,
                github: 7,
                solarized_light: 8,
                textmate: 9,
                tomorrow: 10,
                xcode: 11,
                clouds_midnight: 12,
                cobalt: 13,
                idle_fingers: 14,
                kr_theme: 15,
                merbivore: 16,
                merbivore_soft: 17,
                mono_industrial: 18,
                monokai: 19,
                pastel_on_dark: 20,
                solarized_dark: 21,
                terminal: 22,
                tomorrow_night: 23,
                tomorrow_night_blue: 24,
                tomorrow_night_bright: 25,
                tomorrow_night_eighties: 26,
                twilight: 27,
                vibrant_ink: 28
            }
        }
    });

    Bridge.define("ExpressCraft.App", {
        main: function Main () {
            ExpressCraft.Settings.Setup();
        }
    });

    Bridge.define("ExpressCraft.Application", {
        statics: {
            fields: {
                MainForm: null,
                _applicationDefition: 0
            },
            props: {
                AplicationDefition: {
                    get: function () {
                        return ExpressCraft.Application._applicationDefition;
                    }
                }
            },
            ctors: {
                init: function () {
                    this._applicationDefition = ExpressCraft.ApplicationDefitnion.BridgeConsole;
                }
            },
            methods: {
                Close: function () {
                    if (ExpressCraft.Application.MainForm != null) {
                        ExpressCraft.Application.MainForm.Close();
                    }
                    window.close();
                    window.location.reload();
                },
                Run: function (_Mainform) {
                    ExpressCraft.Application.MainForm = _Mainform;
                    ExpressCraft.Application.MainForm.ShowStartNewLevel();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.ApplicationDefitnion", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                BrowserConsole: 1,
                BridgeConsole: 2,
                ExpressCraftConsole: 3
            }
        }
    });

    Bridge.define("ExpressCraft.BarcodeQuaggaJS", {
        statics: {
            fields: {
                ExternalQuaggaJS: null
            },
            ctors: {
                init: function () {
                    this.ExternalQuaggaJS = new ExpressCraft.ExternalPlugin("https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.BarcodeQuaggaJS.ExternalQuaggaJS.Setup(true, true);
                },
                DecodeSingle: function (source, onDetect, onNoDetect, locate, reader, sourceIsBase64) {
                    if (onNoDetect === void 0) { onNoDetect = null; }
                    if (locate === void 0) { locate = true; }
                    if (reader === void 0) { reader = 3; }
                    if (sourceIsBase64 === void 0) { sourceIsBase64 = false; }
                    if (!ExpressCraft.BarcodeQuaggaJS.ExternalQuaggaJS.SetupCompleted) {
                        return;
                    }

                    if (Bridge.staticEquals(onDetect, null)) {
                        return;
                    }

                    var codeName = System.Enum.format(ExpressCraft.BarcodeQuaggaJS.Readers, reader, "G").toLowerCase();
                    if (System.String.startsWith(codeName, "_")) {
                        codeName = codeName.substr(1);
                    }
                    if (sourceIsBase64 && !System.String.startsWith(source, "data:image")) {
                        source = System.String.concat("data:image/jpg;base64,", source);
                    }
                    			
                                Quagga.decodeSingle({
                                    decoder: {
                                        readers: [codeName] // List of active readers
                                    },
                                    locate: locate,
                                    src: source
                                }, function(ond, onnd) { 
                                    return function(result){
                                        if(result.codeResult) {
                                            ond(result.codeResult.code);
                                        } else {
                                            if(onnd != null)
                                            {
                                                onnd();
                                            }                        
                                        }
                                    }            
                                }(onDetect, onNoDetect));        


                }
            }
        }
    });

    Bridge.define("ExpressCraft.BarcodeQuaggaJS.Readers", {
        $kind: "enum",
        statics: {
            fields: {
                Code_128_Reader: 0,
                Ean_Reader: 1,
                Ean_8_Reader: 2,
                Code_39_Reader: 3,
                Code_39_Vin_Reader: 4,
                Codabar_Reader: 5,
                Upc_Reader: 6,
                Upc_e_Reader: 7,
                I2of5_Reader: 8,
                _2of5_Reader: 9,
                Code_93_Reader: 10
            }
        }
    });

    Bridge.define("ExpressCraft.Color", {
        $kind: "struct",
        statics: {
            fields: {
                Empty: null,
                StateKnownColorValid: 0,
                StateARGBValueValid: 0,
                StateValueMask: 0,
                StateNameValid: 0,
                NotDefinedValue: System.Int64(0),
                ARGBAlphaShift: 0,
                ARGBRedShift: 0,
                ARGBGreenShift: 0,
                ARGBBlueShift: 0,
                q: 0
            },
            props: {
                Transparent: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Transparent);
                    }
                },
                AliceBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.AliceBlue);
                    }
                },
                AntiqueWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.AntiqueWhite);
                    }
                },
                Aqua: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Aqua);
                    }
                },
                Aquamarine: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Aquamarine);
                    }
                },
                Azure: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Azure);
                    }
                },
                Beige: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Beige);
                    }
                },
                Bisque: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Bisque);
                    }
                },
                Black: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Black);
                    }
                },
                BlanchedAlmond: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BlanchedAlmond);
                    }
                },
                Blue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Blue);
                    }
                },
                BlueViolet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BlueViolet);
                    }
                },
                Brown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Brown);
                    }
                },
                BurlyWood: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.BurlyWood);
                    }
                },
                CadetBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.CadetBlue);
                    }
                },
                Chartreuse: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Chartreuse);
                    }
                },
                Chocolate: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Chocolate);
                    }
                },
                Coral: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Coral);
                    }
                },
                CornflowerBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.CornflowerBlue);
                    }
                },
                Cornsilk: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Cornsilk);
                    }
                },
                Crimson: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Crimson);
                    }
                },
                Cyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Cyan);
                    }
                },
                DarkBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkBlue);
                    }
                },
                DarkCyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkCyan);
                    }
                },
                DarkGoldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGoldenrod);
                    }
                },
                DarkGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGray);
                    }
                },
                DarkGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkGreen);
                    }
                },
                DarkKhaki: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkKhaki);
                    }
                },
                DarkMagenta: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkMagenta);
                    }
                },
                DarkOliveGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOliveGreen);
                    }
                },
                DarkOrange: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOrange);
                    }
                },
                DarkOrchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkOrchid);
                    }
                },
                DarkRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkRed);
                    }
                },
                DarkSalmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSalmon);
                    }
                },
                DarkSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSeaGreen);
                    }
                },
                DarkSlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSlateBlue);
                    }
                },
                DarkSlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkSlateGray);
                    }
                },
                DarkTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkTurquoise);
                    }
                },
                DarkViolet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DarkViolet);
                    }
                },
                DeepPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DeepPink);
                    }
                },
                DeepSkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DeepSkyBlue);
                    }
                },
                DimGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DimGray);
                    }
                },
                DodgerBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.DodgerBlue);
                    }
                },
                Firebrick: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Firebrick);
                    }
                },
                FloralWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.FloralWhite);
                    }
                },
                ForestGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.ForestGreen);
                    }
                },
                Fuchsia: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Fuchsia);
                    }
                },
                Gainsboro: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gainsboro);
                    }
                },
                GhostWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.GhostWhite);
                    }
                },
                Gold: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gold);
                    }
                },
                Goldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Goldenrod);
                    }
                },
                Gray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Gray);
                    }
                },
                Green: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Green);
                    }
                },
                GreenYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.GreenYellow);
                    }
                },
                Honeydew: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Honeydew);
                    }
                },
                HotPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.HotPink);
                    }
                },
                IndianRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.IndianRed);
                    }
                },
                Indigo: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Indigo);
                    }
                },
                Ivory: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Ivory);
                    }
                },
                Khaki: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Khaki);
                    }
                },
                Lavender: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Lavender);
                    }
                },
                LavenderBlush: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LavenderBlush);
                    }
                },
                LawnGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LawnGreen);
                    }
                },
                LemonChiffon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LemonChiffon);
                    }
                },
                LightBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightBlue);
                    }
                },
                LightCoral: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightCoral);
                    }
                },
                LightCyan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightCyan);
                    }
                },
                LightGoldenrodYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGoldenrodYellow);
                    }
                },
                LightGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGreen);
                    }
                },
                LightGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightGray);
                    }
                },
                LightPink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightPink);
                    }
                },
                LightSalmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSalmon);
                    }
                },
                LightSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSeaGreen);
                    }
                },
                LightSkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSkyBlue);
                    }
                },
                LightSlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSlateGray);
                    }
                },
                LightSteelBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightSteelBlue);
                    }
                },
                LightYellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LightYellow);
                    }
                },
                Lime: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Lime);
                    }
                },
                LimeGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.LimeGreen);
                    }
                },
                Linen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Linen);
                    }
                },
                Magenta: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Magenta);
                    }
                },
                Maroon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Maroon);
                    }
                },
                MediumAquamarine: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumAquamarine);
                    }
                },
                MediumBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumBlue);
                    }
                },
                MediumOrchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumOrchid);
                    }
                },
                MediumPurple: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumPurple);
                    }
                },
                MediumSeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSeaGreen);
                    }
                },
                MediumSlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSlateBlue);
                    }
                },
                MediumSpringGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumSpringGreen);
                    }
                },
                MediumTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumTurquoise);
                    }
                },
                MediumVioletRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MediumVioletRed);
                    }
                },
                MidnightBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MidnightBlue);
                    }
                },
                MintCream: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MintCream);
                    }
                },
                MistyRose: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.MistyRose);
                    }
                },
                Moccasin: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Moccasin);
                    }
                },
                NavajoWhite: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.NavajoWhite);
                    }
                },
                Navy: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Navy);
                    }
                },
                OldLace: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OldLace);
                    }
                },
                Olive: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Olive);
                    }
                },
                OliveDrab: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OliveDrab);
                    }
                },
                Orange: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Orange);
                    }
                },
                OrangeRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.OrangeRed);
                    }
                },
                Orchid: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Orchid);
                    }
                },
                PaleGoldenrod: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleGoldenrod);
                    }
                },
                PaleGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleGreen);
                    }
                },
                PaleTurquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleTurquoise);
                    }
                },
                PaleVioletRed: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PaleVioletRed);
                    }
                },
                PapayaWhip: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PapayaWhip);
                    }
                },
                PeachPuff: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PeachPuff);
                    }
                },
                Peru: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Peru);
                    }
                },
                Pink: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Pink);
                    }
                },
                Plum: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Plum);
                    }
                },
                PowderBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.PowderBlue);
                    }
                },
                Purple: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Purple);
                    }
                },
                Red: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Red);
                    }
                },
                RosyBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.RosyBrown);
                    }
                },
                RoyalBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.RoyalBlue);
                    }
                },
                SaddleBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SaddleBrown);
                    }
                },
                Salmon: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Salmon);
                    }
                },
                SandyBrown: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SandyBrown);
                    }
                },
                SeaGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SeaGreen);
                    }
                },
                SeaShell: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SeaShell);
                    }
                },
                Sienna: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Sienna);
                    }
                },
                Silver: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Silver);
                    }
                },
                SkyBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SkyBlue);
                    }
                },
                SlateBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SlateBlue);
                    }
                },
                SlateGray: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SlateGray);
                    }
                },
                Snow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Snow);
                    }
                },
                SpringGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SpringGreen);
                    }
                },
                SteelBlue: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.SteelBlue);
                    }
                },
                Tan: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Tan);
                    }
                },
                Teal: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Teal);
                    }
                },
                Thistle: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Thistle);
                    }
                },
                Tomato: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Tomato);
                    }
                },
                Turquoise: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Turquoise);
                    }
                },
                Violet: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Violet);
                    }
                },
                Wheat: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Wheat);
                    }
                },
                White: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.White);
                    }
                },
                WhiteSmoke: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.WhiteSmoke);
                    }
                },
                Yellow: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.Yellow);
                    }
                },
                YellowGreen: {
                    get: function () {
                        return new ExpressCraft.Color.$ctor1(ExpressCraft.KnownColor.YellowGreen);
                    }
                }
            },
            ctors: {
                init: function () {
                    this.Empty = new ExpressCraft.Color();
                    this.ARGBAlphaShift = 24;
                    this.ARGBRedShift = 16;
                    this.ARGBGreenShift = 8;
                    this.ARGBBlueShift = 0;
                    this.q = 255.0;
                },
                ctor: function () {
                    ExpressCraft.Color.Empty = new ExpressCraft.Color.ctor();
                    ExpressCraft.Color.StateKnownColorValid = 1;
                    ExpressCraft.Color.StateARGBValueValid = 2;
                    ExpressCraft.Color.StateValueMask = ExpressCraft.Color.StateARGBValueValid;
                    ExpressCraft.Color.StateNameValid = 8;
                    ExpressCraft.Color.NotDefinedValue = System.Int64(0);
                }
            },
            methods: {
                CheckByte: function (value) {
                    if ((value < 0) || (value > 255)) {
                        throw new System.ArgumentException("InvalidEx2BoundArgument");
                    }
                },
                MakeArgb: function (alpha, red, green, blue) {
                    return System.Int64.clip64(Bridge.Int.clipu64((((red << 16) | (green << 8)) | blue) | (alpha << 24)).and(System.UInt64(System.Int64([-1,0]))));
                },
                FromArgb: function (argb) {
                    return new ExpressCraft.Color.$ctor2(System.Int64(argb).and((System.Int64([-1,0]))), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$3: function (alpha, red, green, blue) {
                    ExpressCraft.Color.CheckByte(alpha);
                    ExpressCraft.Color.CheckByte(red);
                    ExpressCraft.Color.CheckByte(green);
                    ExpressCraft.Color.CheckByte(blue);
                    return new ExpressCraft.Color.$ctor2(ExpressCraft.Color.MakeArgb((alpha & 255), (red & 255), (green & 255), (blue & 255)), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$1: function (alpha, baseColor) {
                    ExpressCraft.Color.CheckByte(alpha);
                    return new ExpressCraft.Color.$ctor2(ExpressCraft.Color.MakeArgb((alpha & 255), baseColor.R, baseColor.G, baseColor.B), ExpressCraft.Color.StateARGBValueValid, null, 0);
                },
                FromArgb$2: function (red, green, blue) {
                    return ExpressCraft.Color.FromArgb$3(255, red, green, blue);
                },
                IsEnumValid: function (enumValue, value, minValue, maxValue) {
                    return ((value >= minValue) && (value <= maxValue));
                },
                FromKnownColor: function (color) {
                    return new ExpressCraft.Color.$ctor1(color);
                },
                FromHex: function (value) {
                    if (System.String.startsWith(value, "#")) {
                        return ExpressCraft.Color.FromHex(value.substr(1));
                    } else {
                        return ExpressCraft.Color.FromArgb(parseInt(value));
                    }
                },
                op_Implicit$1: function (color) {
                    return color.ToHex();
                },
                op_Implicit: function (hexValue) {
                    return ExpressCraft.Color.FromHex(hexValue);
                },
                op_Equality: function (left, right) {
                    if (((left.value.ne(right.value)) || (left.state !== right.state)) || (left.knownColor !== right.knownColor)) {
                        return false;
                    }
                    return ((Bridge.referenceEquals(left.name, right.name)) || (((left.name != null) && (right.name != null)) && System.String.equals(left.name, right.name)));
                },
                op_Inequality: function (left, right) {
                    return !(ExpressCraft.Color.op_Equality(left.$clone(), right.$clone()));
                },
                getDefaultValue: function () { return new ExpressCraft.Color(); }
            }
        },
        fields: {
            name: null,
            value: System.Int64(0),
            knownColor: 0,
            state: 0
        },
        props: {
            R: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(16)).and(System.Int64(255)));
                }
            },
            G: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(8)).and(System.Int64(255)));
                }
            },
            B: {
                get: function () {
                    return System.Int64.clipu8(this.Value.and(System.Int64(255)));
                }
            },
            A: {
                get: function () {
                    return System.Int64.clipu8((this.Value.shr(24)).and(System.Int64(255)));
                }
            },
            IsKnownColor: {
                get: function () {
                    return ((this.state & ExpressCraft.Color.StateKnownColorValid) > 0);
                }
            },
            IsEmpty: {
                get: function () {
                    return (this.state === 0);
                }
            },
            IsNamedColor: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateNameValid) === 0) {
                        return this.IsKnownColor;
                    }
                    return true;
                }
            },
            IsSystemColor: {
                get: function () {
                    if (!this.IsKnownColor) {
                        return false;
                    }
                    if (this.knownColor > 26) {
                        return (this.knownColor > 167);
                    }
                    return true;
                }
            },
            NameAndARGBValue: {
                get: function () {
                    return System.String.format("{{Name={0}, ARGB=({1}, {2}, {3}, {4})}}", this.Name, Bridge.box(this.A, System.Byte), Bridge.box(this.R, System.Byte), Bridge.box(this.G, System.Byte), Bridge.box(this.B, System.Byte));
                }
            },
            Name: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateNameValid) !== 0) {
                        return this.name;
                    }
                    if (!this.IsKnownColor) {
                        return System.Convert.toStringInBase(this.value, 16, 11);
                    }
                    var str = ExpressCraft.KnownColorTable.KnownColorToName(this.knownColor);
                    if (str != null) {
                        return str;
                    }
                    return this.knownColor.toString();
                }
            },
            Value: {
                get: function () {
                    if ((this.state & ExpressCraft.Color.StateValueMask) !== 0) {
                        return this.value;
                    }
                    if (this.IsKnownColor) {
                        return System.Int64(ExpressCraft.KnownColorTable.KnownColorToArgb(this.knownColor));
                    }
                    return ExpressCraft.Color.NotDefinedValue;
                }
            }
        },
        ctors: {
            $ctor1: function (knownColor) {
                this.$initialize();
                this.value = System.Int64(0);
                this.state = ExpressCraft.Color.StateKnownColorValid;
                this.name = null;
                this.knownColor = Bridge.Int.sxs(knownColor & 65535);
            },
            $ctor2: function (value, state, name, knownColor) {
                this.$initialize();
                this.value = value;
                this.state = state;
                this.name = name;
                this.knownColor = Bridge.Int.sxs(knownColor & 65535);
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            componentToHex: function (value) {
                var x = value.toString(16);
                return System.String.concat((x.length === 1 ? "0" : ""), x);
            },
            ToHex: function () {
                if (this.A !== 255) {
                    return System.String.format("#{0}{1}{2}{3}", this.componentToHex(this.A), this.componentToHex(this.R), this.componentToHex(this.G), this.componentToHex(this.B)); // "#" + (155).toString(16) + (102).toString(16) + (102).toString(16);
                } else {
                    return System.String.format("#{0}{1}{2}", this.componentToHex(this.R), this.componentToHex(this.G), this.componentToHex(this.B)); // "#" + (155).toString(16) + (102).toString(16) + (102).toString(16);
                }
            },
            GetBrightness: function () {
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = z;
                var b = z;
                if (x > v) {
                    v = x;
                }
                if (c > v) {
                    v = c;
                }
                if (x < b) {
                    b = x;
                }
                if (c < b) {
                    b = c;
                }
                return ((v + b) / 2.0);
            },
            GetHue: function () {
                if ((this.R === this.G) && (this.G === this.B)) {
                    return 0.0;
                }
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = 0.0;
                var b = z;
                var n = z;
                if (x > b) {
                    b = x;
                }
                if (c > b) {
                    b = c;
                }
                if (x < n) {
                    n = x;
                }
                if (c < n) {
                    n = c;
                }
                var num6 = b - n;
                if (z === b) {
                    v = (x - c) / num6;
                } else if (x === b) {
                    v = 2.0 + ((c - z) / num6);
                } else if (c === b) {
                    v = 4.0 + ((z - x) / num6);
                }
                v *= 60.0;
                if (v < 0.0) {
                    v += 360.0;
                }
                return v;
            },
            GetSaturation: function () {
                var z = this.R / ExpressCraft.Color.q;
                var x = this.G / ExpressCraft.Color.q;
                var c = this.B / ExpressCraft.Color.q;
                var v = 0.0;
                var b = z;
                var n = z;
                if (x > b) {
                    b = x;
                }
                if (c > b) {
                    b = c;
                }
                if (x < n) {
                    n = x;
                }
                if (c < n) {
                    n = c;
                }
                if (b === n) {
                    return v;
                }
                var m = (b + n) / 2.0;
                if (m <= 0.5) {
                    return ((b - n) / (b + n));
                }
                return ((b - n) / ((2.0 - b) - n));
            },
            ToArgb: function () {
                return System.Int64.clip32(this.Value);
            },
            ToKnownColor: function () {
                return this.knownColor;
            },
            toString: function () {
                var builder = new System.Text.StringBuilder("", 32);
                builder.append(Bridge.Reflection.getTypeName(Bridge.getType(this)));
                builder.append(" [");
                if ((this.state & ExpressCraft.Color.StateNameValid) !== 0) {
                    builder.append(this.Name);
                } else if ((this.state & ExpressCraft.Color.StateKnownColorValid) !== 0) {
                    builder.append(this.Name);
                } else if ((this.state & ExpressCraft.Color.StateValueMask) !== 0) {
                    builder.appendFormat("A={0}, R={1}, G={2}, B={3}", Bridge.box(this.A, System.Byte), Bridge.box(this.R, System.Byte), Bridge.box(this.G, System.Byte), Bridge.box(this.B, System.Byte));
                } else {
                    builder.append("Empty");
                }
                builder.append("]");
                return builder.toString();
            },
            equals: function (obj) {
                if (Bridge.is(obj, ExpressCraft.Color)) {
                    var color = System.Nullable.getValue(Bridge.cast(Bridge.unbox(obj), ExpressCraft.Color));
                    if (((this.value.equals(color.value)) && (this.state === color.state)) && (this.knownColor === color.knownColor)) {
                        return ((Bridge.referenceEquals(this.name, color.name)) || (((this.name != null) && (color.name != null)) && System.String.equals(this.name, this.name)));
                    }
                }
                return false;
            },
            getHashCode: function () {
                return ((Bridge.getHashCode(this.value) ^ Bridge.getHashCode(this.state)) ^ Bridge.getHashCode(this.knownColor));
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Color();
                s.name = this.name;
                s.value = this.value;
                s.knownColor = this.knownColor;
                s.state = this.state;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.ComboBoxTypes", {
        $kind: "enum",
        statics: {
            fields: {
                Default: 0
            }
        }
    });

    Bridge.define("ExpressCraft.ConsoleLogType", {
        $kind: "enum",
        statics: {
            fields: {
                Log: 0,
                Debug: 1,
                Error: 2
            }
        }
    });

    Bridge.define("ExpressCraft.ContextItem", {
        fields: {
            Caption: null,
            OnItemClick: null,
            BeginGroup: false,
            Enabled: false
        },
        ctors: {
            init: function () {
                this.Caption = "";
                this.BeginGroup = false;
                this.Enabled = true;
            },
            ctor: function () {
                this.$initialize();

            },
            $ctor2: function (caption, beginGroup) {
                if (beginGroup === void 0) { beginGroup = false; }

                this.$initialize();
                this.Caption = caption;
                this.BeginGroup = beginGroup;
            },
            $ctor1: function (caption, _OnItemClick, beginGroup) {
                if (beginGroup === void 0) { beginGroup = false; }

                this.$initialize();
                this.Caption = caption;
                this.BeginGroup = beginGroup;
                this.OnItemClick = _OnItemClick;

            }
        }
    });

    Bridge.define("ExpressCraft.DataColumn", {
        fields: {
            FieldName: null,
            DataType: 0
        },
        methods: {
            GetDisplayValue$1: function (rowIndex, formatString) {
                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return System.String.format(formatString, (Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex)));
                    case ExpressCraft.DataType.DateTime: 
                        var obj = Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex);
                        if (obj == null) {
                            return "";
                        }
                        if (Bridge.is(obj, System.DateTime)) {
                            return System.String.format(formatString, Bridge.box(Bridge.cast(obj, System.DateTime), System.DateTime, System.DateTime.format));
                        }
                        var d = { };
                        if (System.DateTime.tryParse(obj, null, d)) {
                            return System.String.format(formatString, Bridge.box(d.v, System.DateTime, System.DateTime.format));
                        }
                        var str = Bridge.as(obj, System.String);
                        if (System.String.isNullOrWhiteSpace(str)) {
                            return "";
                        }
                        return System.String.format(formatString, str);
                    case ExpressCraft.DataType.String: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Integer: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex), System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Long: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode)));
                    case ExpressCraft.DataType.Double: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                    case ExpressCraft.DataType.Decimal: 
                        return System.String.format(formatString, Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex), System.Byte, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Short: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex), System.Int16, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Bool: 
                        return System.String.format(formatString, Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode));
                }
            },
            GetDisplayValue: function (rowIndex) {
                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.DateTime: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex), System.DateTime, System.Nullable.toStringFn(System.DateTime.format), System.Nullable.getHashCode));
                    case ExpressCraft.DataType.String: 
                        return Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.Integer: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex), System.Int32, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Long: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode)));
                    case ExpressCraft.DataType.Double: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode)));
                    case ExpressCraft.DataType.Decimal: 
                        return System.Convert.toString(Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex), System.Byte, System.Nullable.toString, System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Bool: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode));
                    case ExpressCraft.DataType.Short: 
                        return System.Convert.toString(Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex), System.Int16, System.Nullable.toString, System.Nullable.getHashCode));
                }
            },
            GetCellValue: function (rowIndex) {
                switch (this.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return Bridge.cast(this, ExpressCraft.DataColumnObject).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.DateTime: 
                        return Bridge.box(Bridge.cast(this, ExpressCraft.DataColumnDateTime).Cells.getItem(rowIndex), System.DateTime, System.Nullable.toStringFn(System.DateTime.format), System.Nullable.getHashCode);
                    case ExpressCraft.DataType.String: 
                        return Bridge.cast(this, ExpressCraft.DataColumnString).Cells.getItem(rowIndex);
                    case ExpressCraft.DataType.Integer: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnInteger).Cells.getItem(rowIndex)), System.Int32, System.Nullable.toString, System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Long: 
                        return (Bridge.cast(this, ExpressCraft.DataColumnLong).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Float: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnFloat).Cells.getItem(rowIndex)), System.Single, System.Nullable.toStringFn(System.Single.format), System.Nullable.getHashCodeFn(System.Single.getHashCode));
                    case ExpressCraft.DataType.Double: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnDouble).Cells.getItem(rowIndex)), System.Double, System.Nullable.toStringFn(System.Double.format), System.Nullable.getHashCodeFn(System.Double.getHashCode));
                    case ExpressCraft.DataType.Decimal: 
                        return (Bridge.cast(this, ExpressCraft.DataColumnDecimal).Cells.getItem(rowIndex));
                    case ExpressCraft.DataType.Byte: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnByte).Cells.getItem(rowIndex)), System.Byte, System.Nullable.toString, System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Bool: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnBool).Cells.getItem(rowIndex)), System.Boolean, System.Nullable.toStringFn(System.Boolean.toString), System.Nullable.getHashCode);
                    case ExpressCraft.DataType.Short: 
                        return Bridge.box((Bridge.cast(this, ExpressCraft.DataColumnShort).Cells.getItem(rowIndex)), System.Int16, System.Nullable.toString, System.Nullable.getHashCode);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.DataItem", {
        fields: {
            Text: null,
            Value: null
        },
        ctors: {
            $ctor1: function (text, value) {
                this.$initialize();
                this.Text = text;
                this.Value = value;
            },
            ctor: function (text) {
                this.$initialize();
                this.Text = text;
                this.Value = text;
            }
        }
    });

    Bridge.define("ExpressCraft.DataRow", {
        fields: {
            ParentTable: null,
            RowIndex: 0,
            batchData: null
        },
        ctors: {
            init: function () {
                this.RowIndex = -1;
            },
            ctor: function () {
                this.$initialize();

            },
            $ctor2: function (columnLength) {
                this.$initialize();
                this.ParentTable = null;
                this.RowIndex = -1;
                this.batchData = System.Array.init(columnLength, null, System.Object);
            },
            $ctor1: function (parentTable, rowIndex) {
                if (rowIndex === void 0) { rowIndex = -1; }

                this.$initialize();
                this.ParentTable = parentTable;
                this.RowIndex = rowIndex;
                if (rowIndex === -1) {
                    this.batchData = System.Array.init(parentTable.ColumnCount, null, System.Object);
                }
            }
        },
        methods: {
            getItem: function (columnIndex) {
                return this.GetValue(columnIndex);
            },
            setItem: function (columnIndex, value) {
                this.SetValue(columnIndex, value);

            },
            GetOfflineDataRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor2(this.ParentTable.ColumnCount);
                var data = System.Array.init(this.ParentTable.ColumnCount, null, System.Object);
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    data[System.Array.index(i, data)] = this.getItem(i);
                }
                dr.batchData = data;
                return dr;
            },
            SetValue$1: function (fieldName, value) {
                var $t, $t1;
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.ParentTable.Columns.getItem(i).FieldName, fieldName)) {
                        if (this.RowIndex === -1) {
                            if (!Bridge.referenceEquals(this.batchData[System.Array.index(i, this.batchData)], value)) {
                                this.batchData[System.Array.index(i, this.batchData)] = value;
                                this.ParentTable.RequireOnDataChangeEvent();
                            }

                            return;
                        }
                        var col = this.ParentTable.Columns.getItem(i);
                        if (!Bridge.referenceEquals(($t = col.Cells.items)[System.Array.index(this.RowIndex, $t)], value)) {
                            ($t1 = col.Cells.items)[System.Array.index(this.RowIndex, $t1)] = Bridge.unbox(value);
                            this.ParentTable.RequireOnDataChangeEvent();
                        }
                        return;
                    }
                }
            },
            SetValue: function (columnIndex, value) {
                var $t, $t1;
                if (this.RowIndex === -1) {
                    if (!Bridge.referenceEquals(this.batchData[System.Array.index(columnIndex, this.batchData)], value)) {
                        this.batchData[System.Array.index(columnIndex, this.batchData)] = value;
                        this.ParentTable.RequireOnDataChangeEvent();
                    }

                    return;
                }
                var col = this.ParentTable.Columns.getItem(columnIndex);
                if (!Bridge.referenceEquals(($t = col.Cells.items)[System.Array.index(this.RowIndex, $t)], value)) {
                    ($t1 = col.Cells.items)[System.Array.index(this.RowIndex, $t1)] = Bridge.unbox(value);
                    this.ParentTable.RequireOnDataChangeEvent();
                }
            },
            GetValue$1: function (fieldName) {
                var $t;
                for (var i = 0; i < this.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.ParentTable.Columns.getItem(i).FieldName, fieldName)) {
                        if (this.RowIndex === -1) {
                            return this.batchData[System.Array.index(i, this.batchData)];
                        }
                        var col = this.ParentTable.Columns.getItem(i);
                        return ($t = col.Cells.items)[System.Array.index(this.RowIndex, $t)];
                    }
                }
                return null;
            },
            GetValue: function (columnIndex) {
                var $t;
                if (this.RowIndex === -1) {
                    return this.batchData[System.Array.index(columnIndex, this.batchData)];
                }
                var col = this.ParentTable.Columns.getItem(columnIndex);
                return ($t = col.Cells.items)[System.Array.index(this.RowIndex, $t)];
            }
        }
    });

    Bridge.define("ExpressCraft.DataTable", {
        fields: {
            Columns: null,
            _inDataChange: false,
            _requestedOnDataChange: false,
            _ColCount: 0,
            _RowCount: 0,
            NewRows: null
        },
        events: {
            OnDataSourceChanged: null
        },
        props: {
            ColumnCount: {
                get: function () {
                    return this._ColCount;
                }
            },
            RowCount: {
                get: function () {
                    return this._RowCount;
                }
            }
        },
        ctors: {
            init: function () {
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.DataColumn))();
                this._inDataChange = false;
                this._requestedOnDataChange = false;
                this.NewRows = new (System.Collections.Generic.List$1(ExpressCraft.DataRow))();
            }
        },
        methods: {
            getItem: function (rowIndex) {
                return new ExpressCraft.DataRow.$ctor1(this, rowIndex);
            },
            RequireOnDataChangeEvent: function () {
                if (!this._inDataChange) {
                    this._requestedOnDataChange = false;
                    if (!Bridge.staticEquals(this.OnDataSourceChanged, null)) {
                        this.OnDataSourceChanged(this, null);
                    }
                } else {
                    this._requestedOnDataChange = true;
                }
            },
            ClearRows: function () {
                this._RowCount = 0;
                for (var i = 0; i < this.Columns.Count; i = (i + 1) | 0) {
                    this.ClearCells(this.Columns.getItem(i));
                }
            },
            ClearCells$1: function (T, _column) {
                var _col = _column;
                _col.Cells = new (System.Collections.Generic.List$1(T))();
            },
            ClearCells: function (_column) {
                switch (_column.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        this.ClearCells$1(System.Object, _column);
                        break;
                    case ExpressCraft.DataType.DateTime: 
                        this.ClearCells$1(System.Nullable$1(System.DateTime), _column);
                        break;
                    case ExpressCraft.DataType.String: 
                        this.ClearCells$1(System.String, _column);
                        break;
                    case ExpressCraft.DataType.Integer: 
                        this.ClearCells$1(System.Nullable$1(System.Int32), _column);
                        break;
                    case ExpressCraft.DataType.Long: 
                        this.ClearCells$1(System.Nullable$1(System.Int64), _column);
                        break;
                    case ExpressCraft.DataType.Float: 
                        this.ClearCells$1(System.Nullable$1(System.Single), _column);
                        break;
                    case ExpressCraft.DataType.Double: 
                        this.ClearCells$1(System.Nullable$1(System.Double), _column);
                        break;
                    case ExpressCraft.DataType.Decimal: 
                        this.ClearCells$1(System.Nullable$1(System.Decimal), _column);
                        break;
                    case ExpressCraft.DataType.Bool: 
                        this.ClearCells$1(System.Nullable$1(System.Boolean), _column);
                        break;
                    case ExpressCraft.DataType.Byte: 
                        this.ClearCells$1(System.Nullable$1(System.Byte), _column);
                        break;
                    case ExpressCraft.DataType.Short: 
                        this.ClearCells$1(System.Nullable$1(System.Int16), _column);
                        break;
                }
                this.RequireOnDataChangeEvent();
            },
            GetColumnByDataType: function (type) {
                if (type === void 0) { type = 0; }
                switch (type) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                        return new ExpressCraft.DataColumnObject();
                    case ExpressCraft.DataType.DateTime: 
                        return new ExpressCraft.DataColumnDateTime();
                    case ExpressCraft.DataType.String: 
                        return new ExpressCraft.DataColumnString();
                    case ExpressCraft.DataType.Integer: 
                        return new ExpressCraft.DataColumnInteger();
                    case ExpressCraft.DataType.Long: 
                        return new ExpressCraft.DataColumnLong();
                    case ExpressCraft.DataType.Float: 
                        return new ExpressCraft.DataColumnFloat();
                    case ExpressCraft.DataType.Double: 
                        return new ExpressCraft.DataColumnDouble();
                    case ExpressCraft.DataType.Decimal: 
                        return new ExpressCraft.DataColumnDecimal();
                    case ExpressCraft.DataType.Bool: 
                        return new ExpressCraft.DataColumnBool();
                    case ExpressCraft.DataType.Byte: 
                        return new ExpressCraft.DataColumnByte();
                    case ExpressCraft.DataType.Short: 
                        return new ExpressCraft.DataColumnShort();
                }
            },
            AddColumn: function (fieldName, type) {
                if (type === void 0) { type = 0; }
                var col = this.GetColumnByDataType(type);
                col.FieldName = fieldName;

                this.Columns.add(col);
                this._ColCount = this.Columns.Count;

                this.RequireOnDataChangeEvent();
            },
            BeginNewRow: function (EstimatedNewRows) {
                this.NewRows = new (System.Collections.Generic.List$1(ExpressCraft.DataRow))(EstimatedNewRows);
                this.BeginDataUpdate();
            },
            AddRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor1(this, Bridge.identity(this._RowCount, (this._RowCount = (this._RowCount + 1) | 0)));
                var colLength = this.Columns.Count;
                for (var x = 0; x < colLength; x = (x + 1) | 0) {
                    var col = this.Columns.getItem(x);
                    col.Cells.add(null);
                }

                this.RequireOnDataChangeEvent();

                return dr;
            },
            AddRow$1: function (row) {
                if (row === void 0) { row = []; }
                if (row.length === this.ColumnCount) {
                    this._RowCount = (this._RowCount + 1) | 0;
                    var colLength = this.Columns.Count;
                    for (var x = 0; x < colLength; x = (x + 1) | 0) {
                        var col = this.Columns.getItem(x);
                        col.Cells.add(Bridge.unbox(row[System.Array.index(x, row)]));
                    }
                    this.RequireOnDataChangeEvent();
                }
            },
            NewRow: function () {
                var dr = new ExpressCraft.DataRow.$ctor1(this);

                this.NewRows.add(dr);

                return dr;
            },
            AcceptNewRows: function () {
                var $t, $t1, $t2;
                if (this.NewRows == null || this.NewRows.Count === 0) {
                    return;
                }
                var colLength = this.Columns.Count;
                var rowLength = this.NewRows.Count;
                var colN1 = (colLength - 1) | 0;

                for (var x = 0; x < colLength; x = (x + 1) | 0) {
                    var col = this.Columns.getItem(x);
                    var DataCells = System.Array.init(rowLength, null, System.Object);

                    if (x === 0) {
                        for (var y = 0; y < rowLength; y = (y + 1) | 0) {
                            this.NewRows.getItem(y).RowIndex = Bridge.identity(this._RowCount, (this._RowCount = (this._RowCount + 1) | 0));
                            DataCells[System.Array.index(y, DataCells)] = ($t = this.NewRows.getItem(y).batchData)[System.Array.index(x, $t)];
                        }
                    } else if (x === colN1) {
                        for (var y1 = 0; y1 < rowLength; y1 = (y1 + 1) | 0) {
                            DataCells[System.Array.index(y1, DataCells)] = ($t1 = this.NewRows.getItem(y1).batchData)[System.Array.index(x, $t1)];
                            this.NewRows.getItem(y1).batchData = null;
                        }
                    } else {
                        for (var y2 = 0; y2 < rowLength; y2 = (y2 + 1) | 0) {
                            DataCells[System.Array.index(y2, DataCells)] = ($t2 = this.NewRows.getItem(y2).batchData)[System.Array.index(x, $t2)];
                        }
                    }
                    col.Cells.addRange(Bridge.unbox(DataCells));

                }
                this.NewRows.clear();

                this.EndDataUpdate();
            },
            BeginDataUpdate: function () {
                this._inDataChange = true;
                this._requestedOnDataChange = false;
            },
            EndDataUpdate: function () {
                this._inDataChange = false;
                if (this._requestedOnDataChange) {
                    this._requestedOnDataChange = false;
                    if (!Bridge.staticEquals(this.OnDataSourceChanged, null)) {
                        this.OnDataSourceChanged(this, null);
                    }
                }
            },
            RejectNewRows: function () {
                this.NewRows.clear();
                this._inDataChange = false;
            }
        }
    });

    Bridge.define("ExpressCraft.DataType", {
        $kind: "enum",
        statics: {
            fields: {
                Object: 0,
                DateTime: 1,
                String: 2,
                Integer: 3,
                Long: 4,
                Float: 5,
                Double: 6,
                Decimal: 7,
                Bool: 8,
                Byte: 9,
                Short: 10
            }
        }
    });

    Bridge.define("ExpressCraft.DateControl.DisplayMode", {
        $kind: "enum",
        statics: {
            fields: {
                Day: 0,
                Month: 1,
                Year: 2
            }
        }
    });

    Bridge.define("ExpressCraft.DialogResult", {
        fields: {
            ResultEnum: 0,
            CallBack: null
        },
        ctors: {
            init: function () {
                this.ResultEnum = ExpressCraft.DialogResultEnum.None;
            },
            ctor: function (resultEnum, callBack) {
                this.$initialize();
                this.ResultEnum = resultEnum;
                this.CallBack = callBack;
            }
        },
        methods: {
            InvokeIfResult: function (resultEnum) {
                if (resultEnum === this.ResultEnum && !Bridge.staticEquals(this.CallBack, null)) {
                    this.CallBack();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.DialogResultEnum", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                OK: 1,
                Cancel: 2,
                Abort: 3,
                Send: 4,
                Ignore: 5,
                Yes: 6,
                No: 7
            }
        }
    });

    Bridge.define("ExpressCraft.ExternalPlugin", {
        fields: {
            SourceUrl: null,
            SetupCompleted: false,
            InLoad: false,
            OnReady: null
        },
        ctors: {
            init: function () {
                this.SetupCompleted = false;
                this.InLoad = false;
            },
            ctor: function (sourceUrl) {
                this.$initialize();
                this.SourceUrl = sourceUrl;
            }
        },
        methods: {
            Setup: function (async, defer) {
                var $t;
                if (async === void 0) { async = false; }
                if (defer === void 0) { defer = false; }
                if (!this.SetupCompleted) {
                    if (this.InLoad) {
                        return;
                    }
                    this.InLoad = true;
                    var script = ($t = document.createElement('script'), $t.onload = Bridge.fn.bind(this, $asm.$.ExpressCraft.ExternalPlugin.f1), $t.src = this.SourceUrl, $t);
                    if (async) {
                        script.async = async;
                    }
                    if (defer) {
                        script.defer = defer;
                    }
                    document.head.appendChild(script);
                }
            },
            UsageCheck: function () {
                if (!this.SetupCompleted) {
                    throw new System.Exception(System.String.concat("'", this.SourceUrl, "' requires to be setup!"));
                }
                if (this.InLoad) {
                    throw new System.Exception(System.String.concat("'", this.SourceUrl, "' is currently loading, Please try again in a few seconds!"));
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ExternalPlugin", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ExternalPlugin, {
        f1: function (ele) {
            this.SetupCompleted = true;
            this.InLoad = false;
            if (!Bridge.staticEquals(this.OnReady, null)) {
                this.OnReady();
            }
        }
    });

    Bridge.define("ExpressCraft.Firebase", {
        statics: {
            fields: {
                ExternalFireBase: null,
                DisplayName: null,
                PhotoURL: null,
                UserSignedIn: false
            },
            ctors: {
                init: function () {
                    this.ExternalFireBase = new ExpressCraft.ExternalPlugin("https://www.gstatic.com/firebasejs/3.6.8/firebase.js");
                }
            },
            methods: {
                Setup: function (OnReady) {
                    if (OnReady === void 0) { OnReady = null; }
                    ExpressCraft.Firebase.ExternalFireBase.OnReady = OnReady;
                    ExpressCraft.Firebase.ExternalFireBase.Setup();
                },
                InitializeApp: function (ApiKey, AuthDomain, DatabaseURL, ProjectId, StorageBucket, MessagingSenderId) {
                    ExpressCraft.Firebase.ExternalFireBase.UsageCheck();
                    if (System.String.isNullOrWhiteSpace(ApiKey)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0} !", "ApiKey"));
                    }
                    if (System.String.isNullOrWhiteSpace(AuthDomain)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "AuthDomain"));
                    }
                    if (System.String.isNullOrWhiteSpace(DatabaseURL)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "DatabaseURL"));
                    }
                    if (System.String.isNullOrWhiteSpace(ProjectId)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "ProjectId"));
                    }
                    if (System.String.isNullOrWhiteSpace(StorageBucket)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "StorageBucket"));
                    }
                    if (System.String.isNullOrWhiteSpace(MessagingSenderId)) {
                        throw new System.Exception(System.String.format("Invalid Firebase {0}!", "MessagingSenderId"));
                    }

                    			firebase.initializeApp({apiKey: ApiKey, authDomain: AuthDomain, databaseURL: DatabaseURL, projectId : ProjectId, storageBucket: StorageBucket, messagingSenderId: MessagingSenderId });
                    			firebase.auth().onAuthStateChanged(function(user) {
                    				if (user) {
                    					this.UserSignedIn = true;
                    					this.DisplayName = user.displayName;
                    					this.PhotoURL = user.photoURL;
                    				}else{
                    					this.UserSignedIn = false;
                    				}
                    			
                    			});
                    			
                },
                SignIn: function () {
                    			
                    			firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider());
                    			
                },
                SignOut: function () {
                    			
                    			firebase.auth().signOut();
                    			
                },
                DatabaseRef: function (name) {
                    var dataRef = firebase.database().ref(name);
                    dataRef.off();
                    return dataRef;
                },
                IsSignedInWithFirebase: function () {
                    return 
			if(firebase.auth().currentUser)
			{
				return true;
			}else
			{
				return false;
			};
                }
            }
        }
    });

    Bridge.define("ExpressCraft.FixedSplitterPosition", {
        $kind: "enum",
        statics: {
            fields: {
                Panel1: 0,
                Panel2: 1,
                None: 2
            }
        }
    });

    Bridge.define("ExpressCraft.FormButtonType", {
        $kind: "enum",
        statics: {
            fields: {
                Close: 0,
                Maximize: 1,
                Minimize: 2,
                Restore: 3,
                Help: 4,
                Menu: 5
            }
        }
    });

    Bridge.define("ExpressCraft.FormCollection", {
        fields: {
            FormOwner: null,
            VisibleForms: null
        },
        ctors: {
            init: function () {
                this.VisibleForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
            },
            ctor: function (formOwner) {
                this.$initialize();
                this.FormOwner = formOwner;
            }
        }
    });

    Bridge.define("ExpressCraft.FormStartPosition", {
        $kind: "enum",
        statics: {
            fields: {
                Manual: 0,
                Center: 1,
                WindowsDefaultLocation: 2
            }
        }
    });

    Bridge.define("ExpressCraft.Gmail", {
        statics: {
            fields: {
                ExternalGmail: null,
                ClientId: null,
                GoogleAuth: null,
                _oneTimeCall: null,
                _hasRan: false
            },
            ctors: {
                init: function () {
                    this.ExternalGmail = new ExpressCraft.ExternalPlugin("https://apis.google.com/js/api.js");
                    this._oneTimeCall = new (System.Collections.Generic.List$1(Function))();
                    this._hasRan = false;
                }
            },
            methods: {
                Authorize: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        return;
                    }

                    if (ExpressCraft.Gmail.IsSignedIn()) {
                        return;
                    }
                    try {
                        			
                        			ExpressCraft.Gmail.GoogleAuth = gapi.auth2.getAuthInstance()
                                    gapi.auth2.getAuthInstance().signIn();            
                        			
                        ExpressCraft.Gmail._hasRan = false;
                        ExpressCraft.Gmail.PushEventsTimeCall();
                        window.focus();
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                },
                PushEventsTimeCall: function () {
                    var $t;
                    if (ExpressCraft.Gmail._hasRan) {
                        return;
                    }
                    ExpressCraft.Gmail._hasRan = true;

                    try {
                        $t = Bridge.getEnumerator(ExpressCraft.Gmail._oneTimeCall);
                        try {
                            while ($t.moveNext()) {
                                var callpump = $t.Current;
                                if (!Bridge.staticEquals(callpump, null)) {
                                    callpump();
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                    ExpressCraft.Gmail._oneTimeCall = new (System.Collections.Generic.List$1(Function))();
                },
                OnSignedIn: function (method) {
                    if (Bridge.staticEquals(method, null)) {
                        return;
                    }

                    if (ExpressCraft.Gmail._hasRan) {
                        try {
                            method();
                        }
                        catch ($e1) {
                            $e1 = System.Exception.create($e1);

                        }

                    } else {
                        ExpressCraft.Gmail._oneTimeCall.add(method);
                    }
                },
                IsSignedIn: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }
                    var signedIn = false;

                    			
                    			signedIn = ExpressCraft.Gmail.GoogleAuth.isSignedIn.get();
                    			

                    return signedIn;
                },
                AccessToken: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var access_token = "";

                    			
                    			access_token = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.Zi.access_token;
                    			

                    return access_token;
                },
                Fullname: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var fullname = "";

                    			
                    			fullname = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.ig;
                    			

                    return fullname;
                },
                Email: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var email = "";

                    			
                    			email = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.U3;
                    			

                    return email;
                },
                GetContentTypeFromFileName: function (filename) {
                    if (System.String.isNullOrWhiteSpace(filename)) {
                        return "application/octet-stream";
                    }

                    filename = filename.toLowerCase();

                    if (System.String.endsWith(filename, ".pdf")) {
                        return "application/pdf";
                    } else {
                        if (System.String.endsWith(filename, ".png")) {
                            return "image/png";
                        } else {
                            if (System.String.endsWith(filename, ".jpg") || System.String.endsWith(filename, ".jpeg")) {
                                return "image/jpeg";
                            } else {
                                return "application/octet-stream";
                            }
                        }
                    }
                },
                SendEmail: function (message) {
                    var $t;
                    if (message == null) {
                        return;
                    }

                    var builder = new System.Text.StringBuilder();

                    builder.append("Content-Type: multipart/mixed; boundary=\"_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\"\r\n");
                    builder.append("MIME-Version: 1.0\r\n");
                    builder.append(System.String.concat("From: ", ExpressCraft.Gmail.Email(), "\r\n"));
                    builder.append(System.String.concat("To: ", message.ToEmail, "\r\n"));
                    builder.append(System.String.concat("Subject: ", message.Subject, "\r\n\r\n"));

                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                    builder.append(System.String.concat("Content-Type: text/", (message.IsHTML ? "html" : "plain"), "; charset=\"UTF-8\"\r\n"));
                    builder.append("MIME-Version: 1.0\r\n");
                    builder.append("Content-Transfer-Encoding: 7bit\r\n\r\n");

                    if (message.IsHTML) {
                        builder.append(System.String.concat(System.String.replaceAll((System.String.concat(message.Body, "")), "\r\n", "<br />"), "\r\n\r\n"));
                    } else {
                        builder.append(System.String.concat(message.Body, "\r\n\r\n"));
                    }


                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");

                    if (message.Attachments != null) {
                        $t = Bridge.getEnumerator(message.Attachments);
                        try {
                            while ($t.moveNext()) {
                                var attachment = $t.Current;
                                if (!System.String.isNullOrWhiteSpace(attachment.Data)) {
                                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                                    builder.append(System.String.concat("Content-Type: ", ExpressCraft.Gmail.GetContentTypeFromFileName(attachment.Filename), "; charset=\"UTF-8\"\r\n"));
                                    builder.append("MIME-Version: 1.0\r\n");
                                    builder.append("Content-Transfer-Encoding: base64\r\n");
                                    builder.append(System.String.concat("Content-Disposition: attachment; filename=\"", System.String.replaceAll((attachment.Filename), "\"", ""), "\"\r\n\r\n"));

                                    if (attachment.IsBase64) {
                                        builder.append(attachment.Data);
                                    } else {
                                        builder.append(Bridge.global.btoa(attachment.Data));
                                    }


                                    builder.append("\r\n\r\n");

                                    builder.append("--_intelogy_8ab337ec2e38e1a8b82a01a5712a8bdb\r\n");
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    var settings = { type: "POST", url: "https://www.googleapis.com/upload/gmail/v1/users/me/messages/send?uploadType=multipart", contentType: "message/rfc822", data: builder.toString(), headers: { Authorization: System.String.concat("Bearer ", ExpressCraft.Gmail.AccessToken()) }, error: $asm.$.ExpressCraft.Gmail.f1, complete: $asm.$.ExpressCraft.Gmail.f2, success: $asm.$.ExpressCraft.Gmail.f3 };

                    $.ajax(settings);

                },
                IconURL: function () {
                    if (!ExpressCraft.Gmail.ExternalGmail.SetupCompleted) {
                        throw new System.Exception("Setup for gmail is not ready yet!");
                    }
                    if (ExpressCraft.Gmail.GoogleAuth == null) {
                        throw new System.ArgumentNullException("GoogleAuth");
                    }

                    var iconUrl = "";

                    			
                    			iconUrl = ExpressCraft.Gmail.GoogleAuth.currentUser.Ab.w3.Paa;
                    			

                    return iconUrl;
                },
                Setup: function (clientId) {
                    ExpressCraft.Gmail.ClientId = clientId;

                    ExpressCraft.Gmail.ExternalGmail.OnReady = $asm.$.ExpressCraft.Gmail.f4;
                    ExpressCraft.Gmail.ExternalGmail.Setup(true, true);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.Gmail", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Gmail, {
        f1: function (a, b, c) {

        },
        f2: function (jq, data) {

        },
        f3: function (obj, data, jq) {

        },
        f4: function () {
            try {
                			
                			    gapi.load('client:auth2', function() {                
                                    gapi.client.init({
                                        discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],
                                        clientId: ExpressCraft.Gmail.ClientId,
                                        scope: 'https://www.googleapis.com/auth/gmail.send'
                                    }).then(function () {
                                        // Listen for sign-in state changes.
                                        ExpressCraft.Gmail.GoogleAuth = gapi.auth2.getAuthInstance()
                                        gapi.auth2.getAuthInstance().signIn();

                                        ExpressCraft.Gmail.PushEventsTimeCall();


                                    });                
                                });
                			    
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);

            }

        }
    });

    Bridge.define("ExpressCraft.GmailMessage", {
        props: {
            ToEmail: null,
            Subject: null,
            Body: null,
            IsHTML: false,
            Attachments: null
        },
        ctors: {
            init: function () {
                this.Attachments = new (System.Collections.Generic.List$1(ExpressCraft.GmailMessageAttachment))();
            },
            ctor: function (toEmail, subject, body, isHTML) {
                this.$initialize();
                this.ToEmail = toEmail;
                this.Subject = subject;
                this.Body = body;
                this.IsHTML = isHTML;
            }
        }
    });

    Bridge.define("ExpressCraft.GmailMessageAttachment", {
        props: {
            Filename: null,
            Data: null,
            IsBase64: false
        },
        ctors: {
            ctor: function (filename, data, isBase64) {
                if (isBase64 === void 0) { isBase64 = false; }

                this.$initialize();
                this.Filename = filename;
                this.Data = data;
                this.IsBase64 = isBase64;
            }
        }
    });

    Bridge.define("ExpressCraft.GoogleCloudPrint", {
        statics: {
            fields: {
                ExternalGoogleCloudPrint: null
            },
            ctors: {
                init: function () {
                    this.ExternalGoogleCloudPrint = new ExpressCraft.ExternalPlugin("https://www.google.com/cloudprint/client/cpgadget.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.GoogleCloudPrint.ExternalGoogleCloudPrint.Setup();
                }
            }
        },
        fields: {
            _source: null,
            _mimetype: null,
            _encoding: null,
            _title: null,
            _gadget: null
        },
        ctors: {
            init: function () {
                this._encoding = "";
            },
            ctor: function (source, title, gcpmt, encoding) {
                if (title === void 0) { title = ""; }
                if (gcpmt === void 0) { gcpmt = 0; }
                if (encoding === void 0) { encoding = ""; }

                this.$initialize();
                System.Object.call(this);
                this._title = title;
                this._source = source;
                this._encoding = encoding;
                this._mimetype = System.String.replaceAll(System.Enum.format(ExpressCraft.GoogleCloudPrintingMimeType, gcpmt, "G").toLowerCase(), "_", ".");
            }
        },
        methods: {
            Show: function () {
                ExpressCraft.GoogleCloudPrint.ExternalGoogleCloudPrint.UsageCheck();

                			this._gadget = new cloudprint.Gadget();			
                			
                if (!System.String.isNullOrWhiteSpace(this._encoding)) {
                    				this._gadget.setPrintDocument(this._mimetype, this._title, this._source, this._encoding);
                    				
                } else {
                    				this._gadget.setPrintDocument(this._mimetype, this._title, this._source);
                    				
                }
                			this._gadget.openPrintDialog();
                			this._gadget.setOnCloseCallback(this.clearContent);			
                			
            },
            clearContent: function () {
                try {
                    ExpressCraft.Helper.Delete($(".__gcp_dialog_container_cls").parent().get(0));
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            Close: function () {
                if (this._gadget != null) {
                    			
                    				this._gadget.closePrintDialog();
                    				this._gadget = null;
                    				
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GoogleCloudPrintingMimeType", {
        $kind: "enum",
        statics: {
            fields: {
                Url: 0,
                DataUrl: 1,
                Google_Drawing: 2,
                Google_Drive: 3,
                Google_Kix: 4,
                Google_Mail: 5,
                Google_Presentation: 6,
                Google_Spreadsheet: 7
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellApparence", {
        fields: {
            IsBold: false,
            Alignment: "inherit",
            Forecolor: null
        },
        ctors: {
            init: function () {
                this.IsBold = false;
                this.Alignment = "left";
            },
            ctor: function () {
                this.$initialize();

            },
            $ctor1: function (isBold) {
                this.$initialize();
                this.IsBold = isBold;
            },
            $ctor2: function (isBold, alignment) {
                this.$initialize();
                this.IsBold = isBold;
                this.Alignment = alignment;
            },
            $ctor3: function (isBold, alignment, forecolor) {
                this.$initialize();
                this.IsBold = isBold;
                this.Alignment = alignment;
                this.Forecolor = forecolor;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplay", {
        fields: {
            UseDefaultElement: false
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                return null;
            },
            OnCreateDefault: function (originalElement, gridView, dataRowIndex, columnIndex) {
                return originalElement;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewColumn", {
        fields: {
            Column: null,
            View: null,
            Caption: null,
            Visible: false,
            CachedX: 0,
            FormatString: null,
            HeadingApparence: null,
            BodyApparence: null,
            CellDisplay: null,
            SortedMode: 0,
            FilterEdit: null,
            filterValue: null,
            AllowEdit: false,
            ReadOnly: false,
            _width: 0
        },
        props: {
            FilterValue: {
                get: function () {
                    return this.filterValue;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this.filterValue, value)) {
                        this.filterValue = value;
                        if (this.View.ShowAutoFilterRow) {
                            this.View.CalculateVisibleRows();
                        }
                    }
                }
            },
            Width: {
                get: function () {
                    return this._width;
                },
                set: function (value) {
                    if (value < 24) {
                        value = 24;
                    }
                    if (this._width !== value) {
                        this._width = value;
                        this.View.RenderGrid();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.FormatString = "";
                this.HeadingApparence = new ExpressCraft.GridViewCellApparence.ctor();
                this.BodyApparence = new ExpressCraft.GridViewCellApparence.ctor();
                this.SortedMode = ExpressCraft.GridViewSortMode.None;
                this.AllowEdit = true;
                this.ReadOnly = false;
            },
            ctor: function (view, width) {
                if (width === void 0) { width = 100; }

                this.$initialize();
                this.View = view;
                this._width = width;
            }
        },
        methods: {
            ValueMatchFilter: function (index) {
                if (this.filterValue == null) {
                    return true;
                }

                var abc = this.GetDisplayValueByDataRowHandle(index);

                switch (this.Column.DataType) {
                    default: 
                    case ExpressCraft.DataType.Object: 
                    case ExpressCraft.DataType.Integer: 
                    case ExpressCraft.DataType.Long: 
                    case ExpressCraft.DataType.Float: 
                    case ExpressCraft.DataType.Double: 
                    case ExpressCraft.DataType.Decimal: 
                    case ExpressCraft.DataType.Bool: 
                    case ExpressCraft.DataType.Byte: 
                    case ExpressCraft.DataType.Short: 
                        return Bridge.referenceEquals(abc, this.filterValue);
                    case ExpressCraft.DataType.DateTime: 
                    case ExpressCraft.DataType.String: 
                        return System.String.startsWith((System.String.concat(abc, "")), System.String.concat(this.filterValue, ""));
                }
            },
            GetDataColumnIndex: function () {
                var length = this.View.DataSource.ColumnCount;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.View.DataSource.Columns.getItem(i), this.Column)) {
                        return i;
                    }
                }
                return -1;
            },
            GetDisplayValueByDataRowHandle: function (RowHandle) {
                if (System.String.isNullOrWhiteSpace(this.FormatString)) {
                    return this.Column.GetDisplayValue(RowHandle);
                } else {
                    return this.Column.GetDisplayValue$1(RowHandle, this.FormatString);
                }
            },
            GetDisplayValue: function (RowHandle) {
                if (this.View.VisibleRowHandles != null) {
                    RowHandle = this.View.VisibleRowHandles.getItem(RowHandle);
                }

                if (System.String.isNullOrWhiteSpace(this.FormatString)) {
                    return this.Column.GetDisplayValue(RowHandle);
                } else {
                    return this.Column.GetDisplayValue$1(RowHandle, this.FormatString);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewSortMode", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Asc: 1,
                Desc: 2
            }
        }
    });

    Bridge.define("ExpressCraft.HardSoftList$1", function (T) { return {
        fields: {
            _hhl: null,
            _hl: null,
            SL: null,
            Limit: 0,
            HardLength: 0,
            DefaultValue: Bridge.getDefaultValue(T)
        },
        ctors: {
            init: function () {
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
            },
            ctor: function (defaultValue, limit) {
                if (limit === void 0) { limit = 10000; }

                this.$initialize();
                this.DefaultValue = defaultValue;
                this.Limit = limit;
            }
        },
        methods: {
            GetIndexValueByHardListIndex: function (index) {
                return this._hl.getItem(index);
            },
            ClearAll: function () {
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
            },
            ClearAllSetHardRange: function (value, Indexs) {
                if (Indexs === void 0) { Indexs = []; }
                this.HardLength = 0;
                if (Indexs == null || Indexs.length === 0) {
                    this.ClearAll();
                } else {
                    if (Indexs.length > this.Limit) {
                        this.HardLength = Indexs.length;
                        this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                        this.SL = new (System.Collections.Generic.List$1(System.Int32))();

                        var max = 0;
                        for (var i = 0; i < this.HardLength; i = (i + 1) | 0) {
                            if (Indexs[System.Array.index(i, Indexs)] > max) {
                                max = Indexs[System.Array.index(i, Indexs)];
                            }
                        }
                        var length = (max + 1) | 0;
                        this._hhl = new (System.Collections.Generic.List$1(T))(length);

                        if (length === Indexs.length) {
                            for (var i1 = 0; i1 < this.HardLength; i1 = (i1 + 1) | 0) {
                                this._hhl.add(value);
                            }
                        } else {
                            for (var i2 = 0; i2 < length; i2 = (i2 + 1) | 0) {
                                this._hhl.add(this.DefaultValue);
                            }
                            for (var i3 = 0; i3 < this.HardLength; i3 = (i3 + 1) | 0) {
                                this._hhl.setItem(Indexs[System.Array.index(i3, Indexs)], value);
                            }
                        }


                    } else {
                        this._hhl = new (System.Collections.Generic.List$1(T))();
                        this.HardLength = Indexs.length;
                        this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))(this.HardLength);
                        for (var i4 = 0; i4 < this.HardLength; i4 = (i4 + 1) | 0) {
                            this._hl.add(new (ExpressCraft.IndexValue$1(T))(Indexs[System.Array.index(i4, Indexs)], value));
                        }
                        this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                    }
                }
            },
            ClearSoftList: function () {
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
            },
            ClearAndAddOrSet: function (value, index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                this._hhl = new (System.Collections.Generic.List$1(T))();
                this._hl = new (System.Collections.Generic.List$1(ExpressCraft.IndexValue$1(T)))();
                this.SL = new (System.Collections.Generic.List$1(System.Int32))();
                this.HardLength = 0;
                this.AddOrSet(value, index, AddToSoftList);
            },
            GetHardOrSoftIndexValue: function (index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                var length = this.SL.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    var slI = this.SL.getItem(i);
                    if (this._hl.getItem(slI).Index === index) {
                        return this._hl.getItem(slI);
                    }
                }

                length = this._hl.Count;

                for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                    var hli = this._hl.getItem(i1);
                    if (hli.Index === index) {
                        if (AddToSoftList) {
                            this.SL.add(i1);
                        }
                        return hli;
                    }
                }

                return null;
            },
            GetHardIndexValue: function (index) {
                var length = this._hl.Count;

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    var hli = this._hl.getItem(i);
                    if (hli.Index === index.v) {
                        index.v = i;
                        return hli;
                    }
                }
                index.v = length;

                return null;
            },
            GetValue: function (index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                if (this.HardLength > this.Limit) {
                    return this._hhl.getItem(index);
                }
                var hiv = this.GetHardOrSoftIndexValue(index, AddToSoftList);
                if (hiv == null) {
                    return this.DefaultValue;
                }
                return hiv.Value;
            },
            GetIndex: function (index) {
                if (this.HardLength > this.Limit) {
                    return index;
                }

                var hiv = this.GetHardOrSoftIndexValue(index);
                if (hiv == null) {
                    return -1;
                }
                return hiv.Index;
            },
            AddOrSet: function (value, index, AddToSoftList) {
                if (AddToSoftList === void 0) { AddToSoftList = false; }
                if (this.HardLength > this.Limit) {
                    if (index >= this.HardLength) {
                        var addDiff = ((((index + 1) | 0)) - this._hhl.Count) | 0;
                        if (addDiff > 0) {
                            var data = System.Array.init(addDiff, function (){
                                return Bridge.getDefaultValue(T);
                            }, T);
                            for (var i = 0; i < addDiff; i = (i + 1) | 0) {
                                data[System.Array.index(i, data)] = this.DefaultValue;
                            }
                            this._hhl.addRange(data);
                        }
                        this._hhl.add(value);
                        this.HardLength = this._hhl.Count;
                    } else {
                        this._hhl.setItem(index, value);
                    }
                    return;
                }

                var length = this.SL.Count;
                for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                    var hli = this._hl.getItem(this.SL.getItem(i1));
                    if (hli.Index === index) {
                        hli.Value = value;
                        return;
                    }
                }

                var hindex = { v : index };
                var hiv = this.GetHardIndexValue(hindex);
                if (hiv == null) {
                    this._hl.add(((hiv = new (ExpressCraft.IndexValue$1(T))(index, value))));
                } else {
                    hiv.Value = value;
                }

                if (AddToSoftList) {
                    this.SL.add(hindex.v);
                }
            },
            Remove: function (index, OnlySoftList) {
                if (OnlySoftList === void 0) { OnlySoftList = false; }
                if (this.HardLength > this.Limit) {
                    if (((this.HardLength - 1) | 0) > this.Limit) {
                        this._hhl.setItem(index, this.DefaultValue);
                    } else {
                        for (var i = 0; i < this.HardLength; i = (i + 1) | 0) {
                            if (i !== index && !Bridge.equals(this._hhl.getItem(i), this.DefaultValue)) {
                                this._hl.add(new (ExpressCraft.IndexValue$1(T))(i, this._hhl.getItem(i)));
                            }
                        }

                        this.HardLength = (this.HardLength - 1) | 0;
                    }
                } else {
                    var Length = this.SL.Count;
                    for (var i1 = 0; i1 < Length; i1 = (i1 + 1) | 0) {
                        var sli = this.SL.getItem(i1);
                        if (this._hl.getItem(sli).Index === index) {
                            this.SL.removeAt(i1);
                            if (OnlySoftList) {
                                return;
                            }
                            this._hl.removeAt(sli);
                            return;
                        }
                    }
                    var length = this._hl.Count;

                    for (var i2 = 0; i2 < length; i2 = (i2 + 1) | 0) {
                        var hli = this._hl.getItem(i2);
                        if (hli.Index === index) {
                            this._hl.removeAt(i2);
                            return;
                        }
                    }
                }
            }
        }
    }; });

    Bridge.define("ExpressCraft.Helper", {
        statics: {
            fields: {
                _notDesktop: false,
                _setupDesktop: false
            },
            props: {
                NotDesktop: {
                    get: function () {
                        var $t;
                        var result = ExpressCraft.Helper._setupDesktop ? ExpressCraft.Helper._notDesktop : ($t = (!Bridge.Browser.isDesktop || ExpressCraft.Helper.IsIPhone() || ExpressCraft.Helper.IsIPad()), ExpressCraft.Helper._notDesktop = $t, $t);
                        ExpressCraft.Helper._setupDesktop = true;
                        return result;
                    }
                }
            },
            methods: {
                IsIPhone: function () {
                    var r = false;
                    			
                                r = !!navigator.userAgent.match(/iPhone/i);       
                    return r;
                },
                IsIPad: function () {
                    var r = false;
                    			
                                r = !!navigator.userAgent.match(/iPad/i);       
                    return r;
                },
                IsTrue: function (value) {
                    return (Bridge.referenceEquals(((value = value.toLowerCase())), "true") || Bridge.referenceEquals(value, "1") || Bridge.referenceEquals(value, "on")) ? 1 : 0;
                },
                ToInt: function (value) {
                    return parseInt(value);
                },
                ToFloat: function (value) {
                    return parseFloat(value);
                },
                ToStr: function (value) {
                    return value;
                },
                IsFireFox: function () {
                    var value = false;

                    if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1)
                    {
                        value = true;
                    }
                    			
                    return value;
                },
                FocusElement: function (element) {
                    Bridge.global.setTimeout(function () {
                        element.focus();
                    }, 0);
                },
                StripNonNumberString: function (value) {
                    if (System.String.isNullOrWhiteSpace(value)) {
                        return System.Decimal(0);
                    }

                    var builder = new System.Text.StringBuilder();

                    var AddedDigits = false;

                    for (var i = 0; i < value.length; i = (i + 1) | 0) {
                        if (System.Char.isDigit(value.charCodeAt(i)) || value.charCodeAt(i) === 46) {
                            builder.append(String.fromCharCode(value.charCodeAt(i)));
                            AddedDigits = true;
                        } else if (value.charCodeAt(i) === 45 && !AddedDigits) {
                            builder.append(String.fromCharCode(value.charCodeAt(i)));
                            AddedDigits = true;
                        }
                    }

                    var value1 = { v : System.Decimal(0) };
                    System.Decimal.tryParse(builder.toString(), null, value1);

                    return value1.v;
                },
                StripNonDateString: function (value) {
                    if (System.String.isNullOrWhiteSpace(value)) {
                        return System.DateTime.getMinValue();
                    }

                    try {
                        value = System.String.replaceAll(value.trim(), String.fromCharCode(92), String.fromCharCode(ExpressCraft.Settings.DateSeperator));

                        var startsWithPlus = (System.String.startsWith(value, "+"));
                        var startsWithMunus = !startsWithPlus && (System.String.startsWith(value, "-"));

                        if (startsWithMunus) {
                            value = value.substr(1);
                        }

                        value = System.String.replaceAll(value, String.fromCharCode(45), String.fromCharCode(ExpressCraft.Settings.DateSeperator));

                        var endsWithMonth = (startsWithPlus || startsWithMunus) && (System.String.endsWith(value.toLowerCase(), "m"));
                        var endsWithyear = !endsWithMonth && (startsWithPlus || startsWithMunus) && (System.String.endsWith(value.toLowerCase(), "y"));

                        if (Bridge.referenceEquals(value.toLowerCase(), "d")) {
                            return System.DateTime.getToday();
                        }

                        var builder = new System.Text.StringBuilder();

                        var Values = new (System.Collections.Generic.List$1(System.Int32))();

                        for (var i = 0; i < value.length; i = (i + 1) | 0) {
                            if (System.Char.isDigit(value.charCodeAt(i))) {
                                builder.append(String.fromCharCode(value.charCodeAt(i)));
                            } else {
                                if (value.charCodeAt(i) === ExpressCraft.Settings.DateSeperator) {
                                    Values.add(System.Int32.parse(builder.toString()));
                                    builder = new System.Text.StringBuilder();
                                }
                            }
                        }

                        if (builder.getLength() > 0) {
                            Values.add(System.Int32.parse(builder.toString()));
                        }

                        builder = null;
                        if (Values.Count >= 3) {
                            return System.DateTime.create(Values.getItem(ExpressCraft.Settings.YearPosition), Values.getItem(ExpressCraft.Settings.MonthPosition), Values.getItem(ExpressCraft.Settings.DayPosition));
                        } else if (Values.Count === 1) {
                            if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.First) {
                                if (startsWithPlus || startsWithMunus) {
                                    var date = System.DateTime.getToday();
                                    if (endsWithMonth) {
                                        date = System.DateTime.addMonths(date, startsWithMunus ? ((-Values.getItem(0)) | 0) : Values.getItem(0));
                                    } else if (endsWithyear) {
                                        if (startsWithMunus) {
                                            date = System.DateTime.addYears(date, ((-Values.getItem(0)) | 0));
                                        } else {
                                            date = System.DateTime.addYears(date, Values.getItem(0));
                                        }
                                    } else {
                                        date = System.DateTime.addDays(date, startsWithMunus ? ((-Values.getItem(0)) | 0) : Values.getItem(0));
                                    }
                                    if (System.DateTime.getHour(date) === 23) {
                                        System.DateTime.addHours(date, 1);
                                    }
                                    return date;
                                } else {
                                    return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), System.DateTime.getMonth(System.DateTime.getToday()), Values.getItem(0));
                                }
                            } else if (ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(0), System.DateTime.getDay(System.DateTime.getToday()));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(Values.getItem(0), System.DateTime.getMonth(System.DateTime.getToday()), System.DateTime.getDay(System.DateTime.getToday()));
                            }
                        } else if (Values.Count === 2) {
                            if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.First && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.Second) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(1), Values.getItem(0));
                            } else if (ExpressCraft.Settings.DayPosition === ExpressCraft.Settings.DatePosition.Second && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(System.DateTime.getYear(System.DateTime.getToday()), Values.getItem(0), Values.getItem(1));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.Second && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.First) {
                                return System.DateTime.create(Values.getItem(1), Values.getItem(0), System.DateTime.getDay(System.DateTime.getToday()));
                            } else if (ExpressCraft.Settings.YearPosition === ExpressCraft.Settings.DatePosition.First && ExpressCraft.Settings.MonthPosition === ExpressCraft.Settings.DatePosition.Second) {
                                return System.DateTime.create(Values.getItem(0), Values.getItem(1), System.DateTime.getDay(System.DateTime.getToday()));
                            }
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }

                    return System.DateTime.getMinValue();
                },
                AddTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    return value.mul((System.Decimal(1).add(taxPercent)));
                },
                GetPortionTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return System.Decimal(0);
                    }

                    return value.sub(value.div((System.Decimal(1).add(taxPercent))));
                },
                DeductTax: function (value, taxPercent) {
                    if (taxPercent === void 0) { taxPercent = System.Decimal(-1.0); }
                    if (value.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    if (taxPercent.equalsT(System.Decimal(-1))) {
                        taxPercent = ExpressCraft.Settings.TaxPercent;
                    }
                    if (taxPercent.equalsT(System.Decimal(0))) {
                        return value;
                    }

                    return value.sub(ExpressCraft.Helper.GetPortionTax(value, taxPercent));
                },
                IsNumber: function (value) {
                    return Bridge.is(value, System.SByte) || Bridge.is(value, System.Byte) || Bridge.is(value, System.Int16) || Bridge.is(value, System.UInt16) || Bridge.is(value, System.Int32) || Bridge.is(value, System.UInt32) || Bridge.is(value, System.Int64) || Bridge.is(value, System.UInt64) || Bridge.is(value, System.Single) || Bridge.is(value, System.Double) || Bridge.is(value, System.Decimal);
                },
                Empty: function (element) {
                    			var len = element.childNodes.length;
                    			while(len--)
                    			{
                    				element.removeChild(element.lastChild);
                    			};
                    			
                },
                GetClientMouseLocation: function (e) {
                    var x = 0;
                    var y = 0;
                    			  
                    			  if (!e) var e = window.event;

                    			  if (e.pageX || e.pageY) {
                    				x = e.pageX;
                    				y = e.pageY;
                    			  } else if (e.clientX || e.clientY) {
                    				x = e.clientX + document.body.scrollLeft + 
                    								   document.documentElement.scrollLeft;
                    				y = e.clientY + document.body.scrollTop + 
                    								   document.documentElement.scrollTop;
                    			  }
                    			
                    return new ExpressCraft.Vector2.$ctor1(x, y);
                },
                SetChecked$1: function (input, value) {
                    ExpressCraft.Helper.SetChecked(input.Content, value);
                },
                SetChecked: function (input, value) {
                    var check = false;
                    if (value != null) {
                        if (Bridge.is(value, System.Boolean) || ExpressCraft.Helper.IsNumber(value)) {
                            check = System.Nullable.getValue(Bridge.cast(Bridge.unbox(value), System.Boolean));
                        } else if (Bridge.is(value, System.String)) {
                            var strValue = Bridge.cast(value, System.String);
                            check = (Bridge.referenceEquals(strValue, "1") || System.String.compare(strValue.toLowerCase(), "true") === 0);
                        }
                    }
                    if (!check) {
                        input.removeAttribute(ExpressCraft.GridViewCellDisplayCheckBox.resource_checked);
                    } else {
                        input.setAttribute(ExpressCraft.GridViewCellDisplayCheckBox.resource_checked, null);
                    }
                },
                /**
                 * IE does not support .remove on Element use delete
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {Element}    c
                 * @return  {void}
                 */
                Delete: function (c) {
                    if (c != null && c.parentElement != null && c.parentElement.contains(c)) {
                        c.parentElement.removeChild(c);
                    }
                },
                ToPx: function (i) {
                    return i + 'px';
                },
                Log: function (jso) {
                    console.log(Bridge.unbox(jso));
                },
                AppendChildren$1: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            c.appendChild(Nodes[System.Array.index(i, Nodes)]);
                        }
                    }
                },
                AppendChildren: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    ExpressCraft.Helper.AppendChildren$2(c.Content, Nodes);

                    return c;
                },
                AppendChildren$2: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            c.appendChild(ExpressCraft.Control.op_Implicit(Nodes[System.Array.index(i, Nodes)]));
                        }
                    }


                },
                AppendChildrenTabIndex: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    if (Nodes != null && Nodes.length > 0) {
                        for (var i = 0; i < Nodes.length; i = (i + 1) | 0) {
                            Nodes[System.Array.index(i, Nodes)].Content.tabIndex = i;
                            c.appendChild(ExpressCraft.Control.op_Implicit(Nodes[System.Array.index(i, Nodes)]));
                        }
                    }
                },
                AppendChildrenTabIndex$1: function (c, Nodes) {
                    if (Nodes === void 0) { Nodes = []; }
                    ExpressCraft.Helper.AppendChildrenTabIndex(c.Content, Nodes);
                },
                AppendChild: function (c, Node) {
                    c.Content.appendChild(ExpressCraft.Control.op_Implicit(Node));
                    return c;
                },
                SetBounds: function (c, left, top, width, height) {
                    ExpressCraft.Helper.SetBounds$1(c.Content, left, top, width, height);

                    return c;
                },
                SetBounds$1: function (c, left, top, width, height) {
                    c.style.left = ExpressCraft.Helper.ToHtmlValue(left);
                    c.style.top = ExpressCraft.Helper.ToHtmlValue(top);
                    c.style.width = ExpressCraft.Helper.ToHtmlValue(width);
                    c.style.height = ExpressCraft.Helper.ToHtmlValue(height);
                },
                SetBoundsFull: function (c) {
                    ExpressCraft.Helper.SetBoundsFull$1(c.Content);

                    return c;
                },
                SetBoundsFull$1: function (c) {
                    ExpressCraft.Helper.SetBounds$1(c, 0, 0, "100%", "100%");
                },
                SetSize: function (c, width, height) {
                    ExpressCraft.Helper.SetSize$1(c.Content, width, height);

                    return c;
                },
                SetSize$1: function (c, width, height) {
                    c.style.width = ExpressCraft.Helper.ToHtmlValue(width);
                    c.style.height = ExpressCraft.Helper.ToHtmlValue(height);
                },
                ToHtmlValue: function (value) {
                    if (Bridge.is(value, System.String)) {
                        return ExpressCraft.Vector2.pf(value);
                    } else {
                        if (Bridge.is(value, System.Int32)) {
                            return ExpressCraft.Helper.ToPx(Bridge.box(value, System.Int32));
                        } else {
                            return ExpressCraft.Helper.ToPx(Bridge.box(value, System.Single, System.Single.format, System.Single.getHashCode));
                        }
                    }
                },
                SetImage$1: function (c, str, useURL, useResource) {
                    if (useURL === void 0) { useURL = true; }
                    if (useResource === void 0) { useResource = true; }
                    if (!System.String.startsWith(str, "url(")) {
                        str = useURL ? ExpressCraft.Control.GetImageStringURI(str, useResource) : ExpressCraft.Control.GetImageString(str);
                    }
                    ExpressCraft.Helper.SetImage(c.Content, str, useURL);
                },
                SetImage: function (c, str, useURL) {
                    if (useURL === void 0) { useURL = true; }
                    if (System.String.isNullOrWhiteSpace(str)) {
                        c.style.background = "";
                        c.style.backgroundSize = "";
                        return;
                    } else if (!System.String.startsWith(str, "url(")) {
                        str = useURL ? ExpressCraft.Control.GetImageStringURI(str) : ExpressCraft.Control.GetImageString(str);
                    }
                    c.style.background = str;
                    c.style.backgroundSize = "100% 100%";
                },
                SetLocation$2: function (c, left, top) {
                    ExpressCraft.Helper.SetLocation(c.Content, ExpressCraft.Helper.ToPx(Bridge.box(left, System.Int32)), ExpressCraft.Helper.ToPx(Bridge.box(top, System.Int32)));
                },
                SetLocation$1: function (c, left, top) {
                    ExpressCraft.Helper.SetLocation(c.Content, left, top);
                },
                SetLocation: function (c, left, top) {
                    c.style.left = ExpressCraft.Helper.ToHtmlValue(left);
                    c.style.top = ExpressCraft.Helper.ToHtmlValue(top);
                },
                /**
                 * HtmlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {System.Object}    obj
                 * @return  {string}
                 */
                HtmlEscape: function (obj) {
                    return ExpressCraft.Helper.HtmlEscape$1((Bridge.as(obj, System.String)));
                },
                /**
                 * HtmlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlEscape$1: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(ExpressCraft.Helper.HtmlUrlEscape(input), "\\/", "&#x2F"), "\"", "&quot") : "";
                },
                /**
                 * HtmlUrlUnescape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUrlUnescape: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(input, "&amp", "&"), "&lt", "<"), "&gt", ">"), "&#x27", "'") : "";
                },
                /**
                 * HtmlUrlEscape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUrlEscape: function (input) {
                    return !System.String.isNullOrEmpty(input) ? System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(input, "&", "&amp"), "<", "&lt"), ">", "&gt"), "'", "&#x27") : "";
                },
                /**
                 * HtmlUnescape XSS
                 *
                 * @static
                 * @public
                 * @this ExpressCraft.Helper
                 * @memberof ExpressCraft.Helper
                 * @param   {string}    input
                 * @return  {string}
                 */
                HtmlUnescape: function (input) {
                    return !ExpressCraft.Helper.IsEmpty(input) ? System.String.replaceAll(System.String.replaceAll(ExpressCraft.Helper.HtmlUrlUnescape(input), "&#x2F", "\\/"), "&quot", "\"") : "";
                },
                ExchangeClass$1: function (control, oldClass, newClass) {
                    ExpressCraft.Helper.ExchangeClass(control.Content, oldClass, newClass);

                },
                ExchangeClass: function (control, oldClass, newClass) {
                    if (!ExpressCraft.Helper.IsEmpty(oldClass) && control.classList.contains(oldClass)) {
                        control.classList.remove(oldClass);
                    }
                    if (!ExpressCraft.Helper.IsEmpty(newClass) && !control.classList.contains(newClass)) {
                        control.classList.add(newClass);
                    }
                },
                IsEmpty: function (value) {
                    return System.String.isNullOrWhiteSpace(value);
                },
                StopAndLog: function (sw, logName) {
                    if (logName === void 0) { logName = "Task"; }
                    sw.stop();
                    ExpressCraft.ConsoleForm.Log(System.String.concat(logName, " took ", sw.milliseconds(), "ms to finish"));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Helper.DataTableJson", {
        statics: {
            methods: {
                FromExternal: function (o) {
                    var x;
                    x = Bridge.merge(Bridge.createInstance(ExpressCraft.Helper.DataTableJson), o);
                    return x;
                },
                Parse: function (o) {
                    var $t, $t1, $t2;
                    var dt = new ExpressCraft.DataTable();
                    var length = o.fieldNames.length;
                    for (var i = 0; i < length; i = (i + 1) | 0) {
                        dt.AddColumn(($t = o.fieldNames)[System.Array.index(i, $t)], ($t1 = o.dataTypes)[System.Array.index(i, $t1)]);
                    }
                    if (o.rows != null) {
                        length = o.rows.length;
                        dt.BeginNewRow(length);

                        for (var i1 = 0; i1 < length; i1 = (i1 + 1) | 0) {
                            var dr = dt.NewRow();
                            dr.batchData = ($t2 = o.rows)[System.Array.index(i1, $t2)];
                        }
                        dt.AcceptNewRows();
                    }
                    return dt;
                }
            }
        },
        fields: {
            fieldNames: null,
            rows: null,
            dataTypes: null
        },
        methods: {
            ToTable: function () {
                var dt = new ExpressCraft.DataTable();

                for (var i = 0; i < this.fieldNames.length; i = (i + 1) | 0) {
                    dt.AddColumn(this.fieldNames[System.Array.index(i, this.fieldNames)], this.dataTypes[System.Array.index(i, this.dataTypes)]);
                }

                if (this.rows != null) {
                    dt.BeginNewRow(this.rows.length);

                    for (var i1 = 0; i1 < this.rows.length; i1 = (i1 + 1) | 0) {
                        var dr = dt.NewRow();
                        dr.batchData = this.rows[System.Array.index(i1, this.rows)];
                    }
                    dt.AcceptNewRows();
                }

                return dt;
            }
        }
    });

    Bridge.define("ExpressCraft.IndexValue$1", function (T) { return {
        fields: {
            Index: 0,
            Value: Bridge.getDefaultValue(T)
        },
        ctors: {
            ctor: function (index, value) {
                this.$initialize();
                this.Index = index;
                this.Value = value;
            }
        }
    }; });

    Bridge.define("ExpressCraft.IPages", {
        $kind: "interface"
    });

    Bridge.define("ExpressCraft.KeyCodes", {
        statics: {
            fields: {
                Modifiers: 0,
                None: 0,
                LButton: 0,
                RButton: 0,
                Cancel: 0,
                MButton: 0,
                XButton1: 0,
                XButton2: 0,
                Back: 0,
                Tab: 0,
                LineFeed: 0,
                Clear: 0,
                Return: 0,
                Enter: 0,
                ShiftKey: 0,
                ControlKey: 0,
                Menu: 0,
                Pause: 0,
                Capital: 0,
                CapsLock: 0,
                KanaMode: 0,
                HanguelMode: 0,
                HangulMode: 0,
                JunjaMode: 0,
                FinalMode: 0,
                HanjaMode: 0,
                KanjiMode: 0,
                Escape: 0,
                IMEConvert: 0,
                IMENonconvert: 0,
                IMEAccept: 0,
                IMEAceept: 0,
                IMEModeChange: 0,
                Space: 0,
                Prior: 0,
                PageUp: 0,
                Next: 0,
                PageDown: 0,
                End: 0,
                Home: 0,
                Left: 0,
                Up: 0,
                Right: 0,
                Down: 0,
                Select: 0,
                Print: 0,
                Execute: 0,
                Snapshot: 0,
                PrintScreen: 0,
                Insert: 0,
                Delete: 0,
                Help: 0,
                D0: 0,
                D1: 0,
                D2: 0,
                D3: 0,
                D4: 0,
                D5: 0,
                D6: 0,
                D7: 0,
                D8: 0,
                D9: 0,
                A: 0,
                B: 0,
                C: 0,
                D: 0,
                E: 0,
                F: 0,
                G: 0,
                H: 0,
                I: 0,
                J: 0,
                K: 0,
                L: 0,
                M: 0,
                N: 0,
                O: 0,
                P: 0,
                Q: 0,
                R: 0,
                S: 0,
                T: 0,
                U: 0,
                V: 0,
                W: 0,
                X: 0,
                Y: 0,
                Z: 0,
                LWin: 0,
                RWin: 0,
                Apps: 0,
                Sleep: 0,
                NumPad0: 0,
                NumPad1: 0,
                NumPad2: 0,
                NumPad3: 0,
                NumPad4: 0,
                NumPad5: 0,
                NumPad6: 0,
                NumPad7: 0,
                NumPad8: 0,
                NumPad9: 0,
                Multiply: 0,
                Add: 0,
                Separator: 0,
                Subtract: 0,
                Decimal: 0,
                Divide: 0,
                F1: 0,
                F2: 0,
                F3: 0,
                F4: 0,
                F5: 0,
                F6: 0,
                F7: 0,
                F8: 0,
                F9: 0,
                F10: 0,
                F11: 0,
                F12: 0,
                F13: 0,
                F14: 0,
                F15: 0,
                F16: 0,
                F17: 0,
                F18: 0,
                F19: 0,
                F20: 0,
                F21: 0,
                F22: 0,
                F23: 0,
                F24: 0,
                NumLock: 0,
                Scroll: 0,
                LShiftKey: 0,
                RShiftKey: 0,
                LControlKey: 0,
                RControlKey: 0,
                LMenu: 0,
                RMenu: 0,
                BrowserBack: 0,
                BrowserForward: 0,
                BrowserRefresh: 0,
                BrowserStop: 0,
                BrowserSearch: 0,
                BrowserFavorites: 0,
                BrowserHome: 0,
                VolumeMute: 0,
                VolumeDown: 0,
                VolumeUp: 0,
                MediaNextTrack: 0,
                MediaPreviousTrack: 0,
                MediaStop: 0,
                MediaPlayPause: 0,
                LaunchMail: 0,
                SelectMedia: 0,
                LaunchApplication1: 0,
                LaunchApplication2: 0,
                OemSemicolon: 0,
                Oem1: 0,
                Oemplus: 0,
                Oemcomma: 0,
                OemMinus: 0,
                OemPeriod: 0,
                OemQuestion: 0,
                Oem2: 0,
                Oemtilde: 0,
                Oem3: 0,
                OemOpenBrackets: 0,
                Oem4: 0,
                OemPipe: 0,
                Oem5: 0,
                OemCloseBrackets: 0,
                Oem6: 0,
                OemQuotes: 0,
                Oem7: 0,
                Oem8: 0,
                OemBackslash: 0,
                Oem102: 0,
                ProcessKey: 0,
                Packet: 0,
                Attn: 0,
                Crsel: 0,
                Exsel: 0,
                EraseEof: 0,
                Play: 0,
                Zoom: 0,
                NoName: 0,
                Pa1: 0,
                OemClear: 0,
                KeyCode: 0,
                Shift: 0,
                Control: 0,
                Alt: 0
            },
            ctors: {
                init: function () {
                    this.Modifiers = -65536;
                    this.None = 0;
                    this.LButton = 1;
                    this.RButton = 2;
                    this.Cancel = 3;
                    this.MButton = 4;
                    this.XButton1 = 5;
                    this.XButton2 = 6;
                    this.Back = 8;
                    this.Tab = 9;
                    this.LineFeed = 10;
                    this.Clear = 12;
                    this.Return = 13;
                    this.Enter = 13;
                    this.ShiftKey = 16;
                    this.ControlKey = 17;
                    this.Menu = 18;
                    this.Pause = 19;
                    this.Capital = 20;
                    this.CapsLock = 20;
                    this.KanaMode = 21;
                    this.HanguelMode = 21;
                    this.HangulMode = 21;
                    this.JunjaMode = 23;
                    this.FinalMode = 24;
                    this.HanjaMode = 25;
                    this.KanjiMode = 25;
                    this.Escape = 27;
                    this.IMEConvert = 28;
                    this.IMENonconvert = 29;
                    this.IMEAccept = 30;
                    this.IMEAceept = 30;
                    this.IMEModeChange = 31;
                    this.Space = 32;
                    this.Prior = 33;
                    this.PageUp = 33;
                    this.Next = 34;
                    this.PageDown = 34;
                    this.End = 35;
                    this.Home = 36;
                    this.Left = 37;
                    this.Up = 38;
                    this.Right = 39;
                    this.Down = 40;
                    this.Select = 41;
                    this.Print = 42;
                    this.Execute = 43;
                    this.Snapshot = 44;
                    this.PrintScreen = 44;
                    this.Insert = 45;
                    this.Delete = 46;
                    this.Help = 47;
                    this.D0 = 48;
                    this.D1 = 49;
                    this.D2 = 50;
                    this.D3 = 51;
                    this.D4 = 52;
                    this.D5 = 53;
                    this.D6 = 54;
                    this.D7 = 55;
                    this.D8 = 56;
                    this.D9 = 57;
                    this.A = 65;
                    this.B = 66;
                    this.C = 67;
                    this.D = 68;
                    this.E = 69;
                    this.F = 70;
                    this.G = 71;
                    this.H = 72;
                    this.I = 73;
                    this.J = 74;
                    this.K = 75;
                    this.L = 76;
                    this.M = 77;
                    this.N = 78;
                    this.O = 79;
                    this.P = 80;
                    this.Q = 81;
                    this.R = 82;
                    this.S = 83;
                    this.T = 84;
                    this.U = 85;
                    this.V = 86;
                    this.W = 87;
                    this.X = 88;
                    this.Y = 89;
                    this.Z = 90;
                    this.LWin = 91;
                    this.RWin = 92;
                    this.Apps = 93;
                    this.Sleep = 95;
                    this.NumPad0 = 96;
                    this.NumPad1 = 97;
                    this.NumPad2 = 98;
                    this.NumPad3 = 99;
                    this.NumPad4 = 100;
                    this.NumPad5 = 101;
                    this.NumPad6 = 102;
                    this.NumPad7 = 103;
                    this.NumPad8 = 104;
                    this.NumPad9 = 105;
                    this.Multiply = 106;
                    this.Add = 107;
                    this.Separator = 108;
                    this.Subtract = 109;
                    this.Decimal = 110;
                    this.Divide = 111;
                    this.F1 = 112;
                    this.F2 = 113;
                    this.F3 = 114;
                    this.F4 = 115;
                    this.F5 = 116;
                    this.F6 = 117;
                    this.F7 = 118;
                    this.F8 = 119;
                    this.F9 = 120;
                    this.F10 = 121;
                    this.F11 = 122;
                    this.F12 = 123;
                    this.F13 = 124;
                    this.F14 = 125;
                    this.F15 = 126;
                    this.F16 = 127;
                    this.F17 = 128;
                    this.F18 = 129;
                    this.F19 = 130;
                    this.F20 = 131;
                    this.F21 = 132;
                    this.F22 = 133;
                    this.F23 = 134;
                    this.F24 = 135;
                    this.NumLock = 144;
                    this.Scroll = 145;
                    this.LShiftKey = 160;
                    this.RShiftKey = 161;
                    this.LControlKey = 162;
                    this.RControlKey = 163;
                    this.LMenu = 164;
                    this.RMenu = 165;
                    this.BrowserBack = 166;
                    this.BrowserForward = 167;
                    this.BrowserRefresh = 168;
                    this.BrowserStop = 169;
                    this.BrowserSearch = 170;
                    this.BrowserFavorites = 171;
                    this.BrowserHome = 172;
                    this.VolumeMute = 173;
                    this.VolumeDown = 174;
                    this.VolumeUp = 175;
                    this.MediaNextTrack = 176;
                    this.MediaPreviousTrack = 177;
                    this.MediaStop = 178;
                    this.MediaPlayPause = 179;
                    this.LaunchMail = 180;
                    this.SelectMedia = 181;
                    this.LaunchApplication1 = 182;
                    this.LaunchApplication2 = 183;
                    this.OemSemicolon = 186;
                    this.Oem1 = 186;
                    this.Oemplus = 187;
                    this.Oemcomma = 188;
                    this.OemMinus = 189;
                    this.OemPeriod = 190;
                    this.OemQuestion = 191;
                    this.Oem2 = 191;
                    this.Oemtilde = 192;
                    this.Oem3 = 192;
                    this.OemOpenBrackets = 219;
                    this.Oem4 = 219;
                    this.OemPipe = 220;
                    this.Oem5 = 220;
                    this.OemCloseBrackets = 221;
                    this.Oem6 = 221;
                    this.OemQuotes = 222;
                    this.Oem7 = 222;
                    this.Oem8 = 223;
                    this.OemBackslash = 226;
                    this.Oem102 = 226;
                    this.ProcessKey = 229;
                    this.Packet = 231;
                    this.Attn = 246;
                    this.Crsel = 247;
                    this.Exsel = 248;
                    this.EraseEof = 249;
                    this.Play = 250;
                    this.Zoom = 251;
                    this.NoName = 252;
                    this.Pa1 = 253;
                    this.OemClear = 254;
                    this.KeyCode = 65535;
                    this.Shift = 65536;
                    this.Control = 131072;
                    this.Alt = 262144;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.KnownColor", {
        $kind: "enum",
        statics: {
            fields: {
                ActiveBorder: 1,
                ActiveCaption: 2,
                ActiveCaptionText: 3,
                AliceBlue: 28,
                AntiqueWhite: 29,
                AppWorkspace: 4,
                Aqua: 30,
                Aquamarine: 31,
                Azure: 32,
                Beige: 33,
                Bisque: 34,
                Black: 35,
                BlanchedAlmond: 36,
                Blue: 37,
                BlueViolet: 38,
                Brown: 39,
                BurlyWood: 40,
                ButtonFace: 168,
                ButtonHighlight: 169,
                ButtonShadow: 170,
                CadetBlue: 41,
                Chartreuse: 42,
                Chocolate: 43,
                Control: 5,
                ControlDark: 6,
                ControlDarkDark: 7,
                ControlLight: 8,
                ControlLightLight: 9,
                ControlText: 10,
                Coral: 44,
                CornflowerBlue: 45,
                Cornsilk: 46,
                Crimson: 47,
                Cyan: 48,
                DarkBlue: 49,
                DarkCyan: 50,
                DarkGoldenrod: 51,
                DarkGray: 52,
                DarkGreen: 53,
                DarkKhaki: 54,
                DarkMagenta: 55,
                DarkOliveGreen: 56,
                DarkOrange: 57,
                DarkOrchid: 58,
                DarkRed: 59,
                DarkSalmon: 60,
                DarkSeaGreen: 61,
                DarkSlateBlue: 62,
                DarkSlateGray: 63,
                DarkTurquoise: 64,
                DarkViolet: 65,
                DeepPink: 66,
                DeepSkyBlue: 67,
                Desktop: 11,
                DimGray: 68,
                DodgerBlue: 69,
                Firebrick: 70,
                FloralWhite: 71,
                ForestGreen: 72,
                Fuchsia: 73,
                Gainsboro: 74,
                GhostWhite: 75,
                Gold: 76,
                Goldenrod: 77,
                GradientActiveCaption: 171,
                GradientInactiveCaption: 172,
                Gray: 78,
                GrayText: 12,
                Green: 79,
                GreenYellow: 80,
                Highlight: 13,
                HighlightText: 14,
                Honeydew: 81,
                HotPink: 82,
                HotTrack: 15,
                InactiveBorder: 16,
                InactiveCaption: 17,
                InactiveCaptionText: 18,
                IndianRed: 83,
                Indigo: 84,
                Info: 19,
                InfoText: 20,
                Ivory: 85,
                Khaki: 86,
                Lavender: 87,
                LavenderBlush: 88,
                LawnGreen: 89,
                LemonChiffon: 90,
                LightBlue: 91,
                LightCoral: 92,
                LightCyan: 93,
                LightGoldenrodYellow: 94,
                LightGray: 95,
                LightGreen: 96,
                LightPink: 97,
                LightSalmon: 98,
                LightSeaGreen: 99,
                LightSkyBlue: 100,
                LightSlateGray: 101,
                LightSteelBlue: 102,
                LightYellow: 103,
                Lime: 104,
                LimeGreen: 105,
                Linen: 106,
                Magenta: 107,
                Maroon: 108,
                MediumAquamarine: 109,
                MediumBlue: 110,
                MediumOrchid: 111,
                MediumPurple: 112,
                MediumSeaGreen: 113,
                MediumSlateBlue: 114,
                MediumSpringGreen: 115,
                MediumTurquoise: 116,
                MediumVioletRed: 117,
                Menu: 21,
                MenuBar: 173,
                MenuHighlight: 174,
                MenuText: 22,
                MidnightBlue: 118,
                MintCream: 119,
                MistyRose: 120,
                Moccasin: 121,
                NavajoWhite: 122,
                Navy: 123,
                OldLace: 124,
                Olive: 125,
                OliveDrab: 126,
                Orange: 127,
                OrangeRed: 128,
                Orchid: 129,
                PaleGoldenrod: 130,
                PaleGreen: 131,
                PaleTurquoise: 132,
                PaleVioletRed: 133,
                PapayaWhip: 134,
                PeachPuff: 135,
                Peru: 136,
                Pink: 137,
                Plum: 138,
                PowderBlue: 139,
                Purple: 140,
                Red: 141,
                RosyBrown: 142,
                RoyalBlue: 143,
                SaddleBrown: 144,
                Salmon: 145,
                SandyBrown: 146,
                ScrollBar: 23,
                SeaGreen: 147,
                SeaShell: 148,
                Sienna: 149,
                Silver: 150,
                SkyBlue: 151,
                SlateBlue: 152,
                SlateGray: 153,
                Snow: 154,
                SpringGreen: 155,
                SteelBlue: 156,
                Tan: 157,
                Teal: 158,
                Thistle: 159,
                Tomato: 160,
                Transparent: 27,
                Turquoise: 161,
                Violet: 162,
                Wheat: 163,
                White: 164,
                WhiteSmoke: 165,
                Window: 24,
                WindowFrame: 25,
                WindowText: 26,
                Yellow: 166,
                YellowGreen: 167
            }
        }
    });

    Bridge.define("ExpressCraft.KnownColorTable", {
        statics: {
            fields: {
                AlphaShift: 0,
                BlueShift: 0,
                colorNameTable: null,
                colorTable: null,
                GreenShift: 0,
                RedShift: 0,
                Win32BlueShift: 0,
                Win32GreenShift: 0,
                Win32RedShift: 0
            },
            ctors: {
                init: function () {
                    this.AlphaShift = 24;
                    this.BlueShift = 0;
                    this.GreenShift = 8;
                    this.RedShift = 16;
                    this.Win32BlueShift = 16;
                    this.Win32GreenShift = 8;
                    this.Win32RedShift = 0;
                }
            },
            methods: {
                ArgbToKnownColor: function (targetARGB) {
                    ExpressCraft.KnownColorTable.EnsureColorTable();
                    for (var i = 0; i < ExpressCraft.KnownColorTable.colorTable.length; i = (i + 1) | 0) {
                        var num2 = ExpressCraft.KnownColorTable.colorTable[System.Array.index(i, ExpressCraft.KnownColorTable.colorTable)];
                        if (num2 === targetARGB) {
                            var color = ExpressCraft.Color.FromKnownColor(i);
                            if (!color.IsSystemColor) {
                                return color.$clone();
                            }
                        }
                    }
                    return ExpressCraft.Color.FromArgb(targetARGB);
                },
                Encode: function (alpha, red, green, blue) {
                    return ((((red << 16) | (green << 8)) | blue) | (alpha << 24));
                },
                EnsureColorNameTable: function () {
                    if (ExpressCraft.KnownColorTable.colorNameTable == null) {
                        ExpressCraft.KnownColorTable.InitColorNameTable();
                    }
                },
                EnsureColorTable: function () {
                    if (ExpressCraft.KnownColorTable.colorTable == null) {
                        ExpressCraft.KnownColorTable.InitColorTable();
                    }
                },
                FromWin32Value: function (value) {
                    return ExpressCraft.KnownColorTable.Encode(255, value & 255, (value >> 8) & 255, (value >> 16) & 255);
                },
                InitColorNameTable: function () {
                    var s = System.Array.init(175, null, System.String);
                    s[System.Array.index(1, s)] = "ActiveBorder";
                    s[System.Array.index(2, s)] = "ActiveCaption";
                    s[System.Array.index(3, s)] = "ActiveCaptionText";
                    s[System.Array.index(4, s)] = "AppWorkspace";
                    s[System.Array.index(168, s)] = "ButtonFace";
                    s[System.Array.index(169, s)] = "ButtonHighlight";
                    s[System.Array.index(170, s)] = "ButtonShadow";
                    s[System.Array.index(5, s)] = "Control";
                    s[System.Array.index(6, s)] = "ControlDark";
                    s[System.Array.index(7, s)] = "ControlDarkDark";
                    s[System.Array.index(8, s)] = "ControlLight";
                    s[System.Array.index(9, s)] = "ControlLightLight";
                    s[System.Array.index(10, s)] = "ControlText";
                    s[System.Array.index(11, s)] = "Desktop";
                    s[System.Array.index(171, s)] = "GradientActiveCaption";
                    s[System.Array.index(172, s)] = "GradientInactiveCaption";
                    s[System.Array.index(12, s)] = "GrayText";
                    s[System.Array.index(13, s)] = "Highlight";
                    s[System.Array.index(14, s)] = "HighlightText";
                    s[System.Array.index(15, s)] = "HotTrack";
                    s[System.Array.index(16, s)] = "InactiveBorder";
                    s[System.Array.index(17, s)] = "InactiveCaption";
                    s[System.Array.index(18, s)] = "InactiveCaptionText";
                    s[System.Array.index(19, s)] = "Info";
                    s[System.Array.index(20, s)] = "InfoText";
                    s[System.Array.index(21, s)] = "Menu";
                    s[System.Array.index(173, s)] = "MenuBar";
                    s[System.Array.index(174, s)] = "MenuHighlight";
                    s[System.Array.index(22, s)] = "MenuText";
                    s[System.Array.index(23, s)] = "ScrollBar";
                    s[System.Array.index(24, s)] = "Window";
                    s[System.Array.index(25, s)] = "WindowFrame";
                    s[System.Array.index(26, s)] = "WindowText";
                    s[System.Array.index(27, s)] = "Transparent";
                    s[System.Array.index(28, s)] = "AliceBlue";
                    s[System.Array.index(29, s)] = "AntiqueWhite";
                    s[System.Array.index(30, s)] = "Aqua";
                    s[System.Array.index(31, s)] = "Aquamarine";
                    s[System.Array.index(32, s)] = "Azure";
                    s[System.Array.index(33, s)] = "Beige";
                    s[System.Array.index(34, s)] = "Bisque";
                    s[System.Array.index(35, s)] = "Black";
                    s[System.Array.index(36, s)] = "BlanchedAlmond";
                    s[System.Array.index(37, s)] = "Blue";
                    s[System.Array.index(38, s)] = "BlueViolet";
                    s[System.Array.index(39, s)] = "Brown";
                    s[System.Array.index(40, s)] = "BurlyWood";
                    s[System.Array.index(41, s)] = "CadetBlue";
                    s[System.Array.index(42, s)] = "Chartreuse";
                    s[System.Array.index(43, s)] = "Chocolate";
                    s[System.Array.index(44, s)] = "Coral";
                    s[System.Array.index(45, s)] = "CornflowerBlue";
                    s[System.Array.index(46, s)] = "Cornsilk";
                    s[System.Array.index(47, s)] = "Crimson";
                    s[System.Array.index(48, s)] = "Cyan";
                    s[System.Array.index(49, s)] = "DarkBlue";
                    s[System.Array.index(50, s)] = "DarkCyan";
                    s[System.Array.index(51, s)] = "DarkGoldenrod";
                    s[System.Array.index(52, s)] = "DarkGray";
                    s[System.Array.index(53, s)] = "DarkGreen";
                    s[System.Array.index(54, s)] = "DarkKhaki";
                    s[System.Array.index(55, s)] = "DarkMagenta";
                    s[System.Array.index(56, s)] = "DarkOliveGreen";
                    s[System.Array.index(57, s)] = "DarkOrange";
                    s[System.Array.index(58, s)] = "DarkOrchid";
                    s[System.Array.index(59, s)] = "DarkRed";
                    s[System.Array.index(60, s)] = "DarkSalmon";
                    s[System.Array.index(61, s)] = "DarkSeaGreen";
                    s[System.Array.index(62, s)] = "DarkSlateBlue";
                    s[System.Array.index(63, s)] = "DarkSlateGray";
                    s[System.Array.index(64, s)] = "DarkTurquoise";
                    s[System.Array.index(65, s)] = "DarkViolet";
                    s[System.Array.index(66, s)] = "DeepPink";
                    s[System.Array.index(67, s)] = "DeepSkyBlue";
                    s[System.Array.index(68, s)] = "DimGray";
                    s[System.Array.index(69, s)] = "DodgerBlue";
                    s[System.Array.index(70, s)] = "Firebrick";
                    s[System.Array.index(71, s)] = "FloralWhite";
                    s[System.Array.index(72, s)] = "ForestGreen";
                    s[System.Array.index(73, s)] = "Fuchsia";
                    s[System.Array.index(74, s)] = "Gainsboro";
                    s[System.Array.index(75, s)] = "GhostWhite";
                    s[System.Array.index(76, s)] = "Gold";
                    s[System.Array.index(77, s)] = "Goldenrod";
                    s[System.Array.index(78, s)] = "Gray";
                    s[System.Array.index(79, s)] = "Green";
                    s[System.Array.index(80, s)] = "GreenYellow";
                    s[System.Array.index(81, s)] = "Honeydew";
                    s[System.Array.index(82, s)] = "HotPink";
                    s[System.Array.index(83, s)] = "IndianRed";
                    s[System.Array.index(84, s)] = "Indigo";
                    s[System.Array.index(85, s)] = "Ivory";
                    s[System.Array.index(86, s)] = "Khaki";
                    s[System.Array.index(87, s)] = "Lavender";
                    s[System.Array.index(88, s)] = "LavenderBlush";
                    s[System.Array.index(89, s)] = "LawnGreen";
                    s[System.Array.index(90, s)] = "LemonChiffon";
                    s[System.Array.index(91, s)] = "LightBlue";
                    s[System.Array.index(92, s)] = "LightCoral";
                    s[System.Array.index(93, s)] = "LightCyan";
                    s[System.Array.index(94, s)] = "LightGoldenrodYellow";
                    s[System.Array.index(95, s)] = "LightGray";
                    s[System.Array.index(96, s)] = "LightGreen";
                    s[System.Array.index(97, s)] = "LightPink";
                    s[System.Array.index(98, s)] = "LightSalmon";
                    s[System.Array.index(99, s)] = "LightSeaGreen";
                    s[System.Array.index(100, s)] = "LightSkyBlue";
                    s[System.Array.index(101, s)] = "LightSlateGray";
                    s[System.Array.index(102, s)] = "LightSteelBlue";
                    s[System.Array.index(103, s)] = "LightYellow";
                    s[System.Array.index(104, s)] = "Lime";
                    s[System.Array.index(105, s)] = "LimeGreen";
                    s[System.Array.index(106, s)] = "Linen";
                    s[System.Array.index(107, s)] = "Magenta";
                    s[System.Array.index(108, s)] = "Maroon";
                    s[System.Array.index(109, s)] = "MediumAquamarine";
                    s[System.Array.index(110, s)] = "MediumBlue";
                    s[System.Array.index(111, s)] = "MediumOrchid";
                    s[System.Array.index(112, s)] = "MediumPurple";
                    s[System.Array.index(113, s)] = "MediumSeaGreen";
                    s[System.Array.index(114, s)] = "MediumSlateBlue";
                    s[System.Array.index(115, s)] = "MediumSpringGreen";
                    s[System.Array.index(116, s)] = "MediumTurquoise";
                    s[System.Array.index(117, s)] = "MediumVioletRed";
                    s[System.Array.index(118, s)] = "MidnightBlue";
                    s[System.Array.index(119, s)] = "MintCream";
                    s[System.Array.index(120, s)] = "MistyRose";
                    s[System.Array.index(121, s)] = "Moccasin";
                    s[System.Array.index(122, s)] = "NavajoWhite";
                    s[System.Array.index(123, s)] = "Navy";
                    s[System.Array.index(124, s)] = "OldLace";
                    s[System.Array.index(125, s)] = "Olive";
                    s[System.Array.index(126, s)] = "OliveDrab";
                    s[System.Array.index(127, s)] = "Orange";
                    s[System.Array.index(128, s)] = "OrangeRed";
                    s[System.Array.index(129, s)] = "Orchid";
                    s[System.Array.index(130, s)] = "PaleGoldenrod";
                    s[System.Array.index(131, s)] = "PaleGreen";
                    s[System.Array.index(132, s)] = "PaleTurquoise";
                    s[System.Array.index(133, s)] = "PaleVioletRed";
                    s[System.Array.index(134, s)] = "PapayaWhip";
                    s[System.Array.index(135, s)] = "PeachPuff";
                    s[System.Array.index(136, s)] = "Peru";
                    s[System.Array.index(137, s)] = "Pink";
                    s[System.Array.index(138, s)] = "Plum";
                    s[System.Array.index(139, s)] = "PowderBlue";
                    s[System.Array.index(140, s)] = "Purple";
                    s[System.Array.index(141, s)] = "Red";
                    s[System.Array.index(142, s)] = "RosyBrown";
                    s[System.Array.index(143, s)] = "RoyalBlue";
                    s[System.Array.index(144, s)] = "SaddleBrown";
                    s[System.Array.index(145, s)] = "Salmon";
                    s[System.Array.index(146, s)] = "SandyBrown";
                    s[System.Array.index(147, s)] = "SeaGreen";
                    s[System.Array.index(148, s)] = "SeaShell";
                    s[System.Array.index(149, s)] = "Sienna";
                    s[System.Array.index(150, s)] = "Silver";
                    s[System.Array.index(151, s)] = "SkyBlue";
                    s[System.Array.index(152, s)] = "SlateBlue";
                    s[System.Array.index(153, s)] = "SlateGray";
                    s[System.Array.index(154, s)] = "Snow";
                    s[System.Array.index(155, s)] = "SpringGreen";
                    s[System.Array.index(156, s)] = "SteelBlue";
                    s[System.Array.index(157, s)] = "Tan";
                    s[System.Array.index(158, s)] = "Teal";
                    s[System.Array.index(159, s)] = "Thistle";
                    s[System.Array.index(160, s)] = "Tomato";
                    s[System.Array.index(161, s)] = "Turquoise";
                    s[System.Array.index(162, s)] = "Violet";
                    s[System.Array.index(163, s)] = "Wheat";
                    s[System.Array.index(164, s)] = "White";
                    s[System.Array.index(165, s)] = "WhiteSmoke";
                    s[System.Array.index(166, s)] = "Yellow";
                    s[System.Array.index(167, s)] = "YellowGreen";
                    ExpressCraft.KnownColorTable.colorNameTable = s;
                },
                InitColorTable: function () {
                    var c = System.Array.init(175, 0, System.Int32);

                    c[System.Array.index(27, c)] = 16777215;
                    c[System.Array.index(28, c)] = -984833;
                    c[System.Array.index(29, c)] = -332841;
                    c[System.Array.index(30, c)] = -16711681;
                    c[System.Array.index(31, c)] = -8388652;
                    c[System.Array.index(32, c)] = -983041;
                    c[System.Array.index(33, c)] = -657956;
                    c[System.Array.index(34, c)] = -6972;
                    c[System.Array.index(35, c)] = -16777216;
                    c[System.Array.index(36, c)] = -5171;
                    c[System.Array.index(37, c)] = -16776961;
                    c[System.Array.index(38, c)] = -7722014;
                    c[System.Array.index(39, c)] = -5952982;
                    c[System.Array.index(40, c)] = -2180985;
                    c[System.Array.index(41, c)] = -10510688;
                    c[System.Array.index(42, c)] = -8388864;
                    c[System.Array.index(43, c)] = -2987746;
                    c[System.Array.index(44, c)] = -32944;
                    c[System.Array.index(45, c)] = -10185235;
                    c[System.Array.index(46, c)] = -1828;
                    c[System.Array.index(47, c)] = -2354116;
                    c[System.Array.index(48, c)] = -16711681;
                    c[System.Array.index(49, c)] = -16777077;
                    c[System.Array.index(50, c)] = -16741493;
                    c[System.Array.index(51, c)] = -4684277;
                    c[System.Array.index(52, c)] = -5658199;
                    c[System.Array.index(53, c)] = -16751616;
                    c[System.Array.index(54, c)] = -4343957;
                    c[System.Array.index(55, c)] = -7667573;
                    c[System.Array.index(56, c)] = -11179217;
                    c[System.Array.index(57, c)] = -29696;
                    c[System.Array.index(58, c)] = -6737204;
                    c[System.Array.index(59, c)] = -7667712;
                    c[System.Array.index(60, c)] = -1468806;
                    c[System.Array.index(61, c)] = -7357301;
                    c[System.Array.index(62, c)] = -12042869;
                    c[System.Array.index(63, c)] = -13676721;
                    c[System.Array.index(64, c)] = -16724271;
                    c[System.Array.index(65, c)] = -7077677;
                    c[System.Array.index(66, c)] = -60269;
                    c[System.Array.index(67, c)] = -16728065;
                    c[System.Array.index(68, c)] = -9868951;
                    c[System.Array.index(69, c)] = -14774017;
                    c[System.Array.index(70, c)] = -5103070;
                    c[System.Array.index(71, c)] = -1296;
                    c[System.Array.index(72, c)] = -14513374;
                    c[System.Array.index(73, c)] = -65281;
                    c[System.Array.index(74, c)] = -2302756;
                    c[System.Array.index(75, c)] = -460545;
                    c[System.Array.index(76, c)] = -10496;
                    c[System.Array.index(77, c)] = -2448096;
                    c[System.Array.index(78, c)] = -8355712;
                    c[System.Array.index(79, c)] = -16744448;
                    c[System.Array.index(80, c)] = -5374161;
                    c[System.Array.index(81, c)] = -983056;
                    c[System.Array.index(82, c)] = -38476;
                    c[System.Array.index(83, c)] = -3318692;
                    c[System.Array.index(84, c)] = -11861886;
                    c[System.Array.index(85, c)] = -16;
                    c[System.Array.index(86, c)] = -989556;
                    c[System.Array.index(87, c)] = -1644806;
                    c[System.Array.index(88, c)] = -3851;
                    c[System.Array.index(89, c)] = -8586240;
                    c[System.Array.index(90, c)] = -1331;
                    c[System.Array.index(91, c)] = -5383962;
                    c[System.Array.index(92, c)] = -1015680;
                    c[System.Array.index(93, c)] = -2031617;
                    c[System.Array.index(94, c)] = -329006;
                    c[System.Array.index(95, c)] = -2894893;
                    c[System.Array.index(96, c)] = -7278960;
                    c[System.Array.index(97, c)] = -18751;
                    c[System.Array.index(98, c)] = -24454;
                    c[System.Array.index(99, c)] = -14634326;
                    c[System.Array.index(100, c)] = -7876870;
                    c[System.Array.index(101, c)] = -8943463;
                    c[System.Array.index(102, c)] = -5192482;
                    c[System.Array.index(103, c)] = -32;
                    c[System.Array.index(104, c)] = -16711936;
                    c[System.Array.index(105, c)] = -13447886;
                    c[System.Array.index(106, c)] = -331546;
                    c[System.Array.index(107, c)] = -65281;
                    c[System.Array.index(108, c)] = -8388608;
                    c[System.Array.index(109, c)] = -10039894;
                    c[System.Array.index(110, c)] = -16777011;
                    c[System.Array.index(111, c)] = -4565549;
                    c[System.Array.index(112, c)] = -7114533;
                    c[System.Array.index(113, c)] = -12799119;
                    c[System.Array.index(114, c)] = -8689426;
                    c[System.Array.index(115, c)] = -16713062;
                    c[System.Array.index(116, c)] = -12004916;
                    c[System.Array.index(117, c)] = -3730043;
                    c[System.Array.index(118, c)] = -15132304;
                    c[System.Array.index(119, c)] = -655366;
                    c[System.Array.index(120, c)] = -6943;
                    c[System.Array.index(121, c)] = -6987;
                    c[System.Array.index(122, c)] = -8531;
                    c[System.Array.index(123, c)] = -16777088;
                    c[System.Array.index(124, c)] = -133658;
                    c[System.Array.index(125, c)] = -8355840;
                    c[System.Array.index(126, c)] = -9728477;
                    c[System.Array.index(127, c)] = -23296;
                    c[System.Array.index(128, c)] = -47872;
                    c[System.Array.index(129, c)] = -2461482;
                    c[System.Array.index(130, c)] = -1120086;
                    c[System.Array.index(131, c)] = -6751336;
                    c[System.Array.index(132, c)] = -5247250;
                    c[System.Array.index(133, c)] = -2396013;
                    c[System.Array.index(134, c)] = -4139;
                    c[System.Array.index(135, c)] = -9543;
                    c[System.Array.index(136, c)] = -3308225;
                    c[System.Array.index(137, c)] = -16181;
                    c[System.Array.index(138, c)] = -2252579;
                    c[System.Array.index(139, c)] = -5185306;
                    c[System.Array.index(140, c)] = -8388480;
                    c[System.Array.index(141, c)] = -65536;
                    c[System.Array.index(142, c)] = -4419697;
                    c[System.Array.index(143, c)] = -12490271;
                    c[System.Array.index(144, c)] = -7650029;
                    c[System.Array.index(145, c)] = -360334;
                    c[System.Array.index(146, c)] = -744352;
                    c[System.Array.index(147, c)] = -13726889;
                    c[System.Array.index(148, c)] = -2578;
                    c[System.Array.index(149, c)] = -6270419;
                    c[System.Array.index(150, c)] = -4144960;
                    c[System.Array.index(151, c)] = -7876885;
                    c[System.Array.index(152, c)] = -9807155;
                    c[System.Array.index(153, c)] = -9404272;
                    c[System.Array.index(154, c)] = -1286;
                    c[System.Array.index(155, c)] = -16711809;
                    c[System.Array.index(156, c)] = -12156236;
                    c[System.Array.index(157, c)] = -2968436;
                    c[System.Array.index(158, c)] = -16744320;
                    c[System.Array.index(159, c)] = -2572328;
                    c[System.Array.index(160, c)] = -40121;
                    c[System.Array.index(161, c)] = -12525360;
                    c[System.Array.index(162, c)] = -1146130;
                    c[System.Array.index(163, c)] = -663885;
                    c[System.Array.index(164, c)] = -1;
                    c[System.Array.index(165, c)] = -657931;
                    c[System.Array.index(166, c)] = -256;
                    c[System.Array.index(167, c)] = -6632142;
                    ExpressCraft.KnownColorTable.colorTable = c;
                },
                KnownColorToArgb: function (color) {
                    ExpressCraft.KnownColorTable.EnsureColorTable();
                    if (color <= ExpressCraft.KnownColor.MenuHighlight) {
                        return ExpressCraft.KnownColorTable.colorTable[System.Array.index(color, ExpressCraft.KnownColorTable.colorTable)];
                    }
                    return 0;
                },
                KnownColorToName: function (color) {
                    ExpressCraft.KnownColorTable.EnsureColorNameTable();
                    if (color <= ExpressCraft.KnownColor.MenuHighlight) {
                        return ExpressCraft.KnownColorTable.colorNameTable[System.Array.index(color, ExpressCraft.KnownColorTable.colorNameTable)];
                    }
                    return null;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutColumn", {
        fields: {
            Groups: null
        },
        ctors: {
            init: function () {
                this.Groups = new (System.Collections.Generic.List$1(ExpressCraft.LayoutGroup))();
            },
            ctor: function (groups) {
                if (groups === void 0) { groups = []; }

                this.$initialize();
                if (groups != null && groups.length > 0) {
                    this.Groups.addRange(groups);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutContainer", {
        statics: {
            fields: {
                TabIndex: 0
            },
            ctors: {
                init: function () {
                    this.TabIndex = 2;
                }
            }
        },
        fields: {
            Controls: null,
            ControlEditable: null
        },
        props: {
            Columns: null,
            ColumnWidth: 0,
            ControlMargin: 0,
            appliedLayout: false
        },
        ctors: {
            init: function () {
                this.Controls = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
                this.ControlEditable = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.LayoutColumn))();
                this.appliedLayout = false;
            },
            $ctor1: function (columnWidth, controlMargin, columns) {
                if (columnWidth === void 0) { columnWidth = 500; }
                if (controlMargin === void 0) { controlMargin = 6; }
                if (columns === void 0) { columns = []; }

                this.$initialize();
                this.ColumnWidth = columnWidth;
                this.ControlMargin = controlMargin;

                if (columns != null && columns.length > 0) {
                    this.Columns.addRange(columns);
                }
            },
            ctor: function (columns) {
                if (columns === void 0) { columns = []; }

                this.$initialize();
                this.ColumnWidth = 500;
                this.ControlMargin = 6;

                if (columns != null && columns.length > 0) {
                    this.Columns.addRange(columns);
                }
            }
        },
        methods: {
            AppliedLayout: function () {
                return this.appliedLayout;
            },
            Focus: function () {
                if (ExpressCraft.Helper.NotDesktop) {
                    return;
                }
                if (this.Controls == null || this.Controls.Count === 0) {
                    return;
                }
                var input = System.Linq.Enumerable.from(this.Controls).firstOrDefault(null, null).Input;
                var x = input.GetInput();

                if (x != null) {
                    ExpressCraft.Helper.FocusElement(x);
                } else {
                    ExpressCraft.Helper.FocusElement(input.Content);
                }
            },
            CreateLoadSQL: function () {
                var builderSQL = new System.Text.StringBuilder();

                var length = this.Controls.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    if (this.Controls.getItem(i) == null || this.Controls.getItem(i).Input == null || System.String.isNullOrWhiteSpace(this.Controls.getItem(i).LinkFieldName)) {
                        continue;
                    }
                    builderSQL.append(System.String.concat("`", this.Controls.getItem(i).LinkFieldName, "`, "));

                    var control = this.Controls.getItem(i);

                    if (Bridge.is(control.Input, ExpressCraft.SearchInput)) {
                        var search = control.Input;

                        var editValue = (System.String.concat(search.EditValue, ""));
                        if (Bridge.referenceEquals(search.DisplayMember, search.ValueMember) || search.ValueMember == null) {
                            // documentTransaction.AddCombo(control.LinkFieldName,
                            //search.Text, search.Text);
                        } else {
                            // long editv = 0;
                            // long.TryParse(editValue, out editv);

                            // documentTransaction.AddCombo(control.LinkFieldName,
                            //editv, search.Text);
                        }

                        continue;
                    } else if (control.Input.Controller != null) {
                        if (Bridge.is(control.Input.Controller, ExpressCraft.CheckEdit)) {
                            //documentTransaction.AddBoolean(control.LinkFieldName, (control.Input.Controller.As<CheckEdit>().Checked));

                            continue;
                        }
                    }

                    if (control.Input.IsNumericType()) {
                        //var dec = control.Input.GetNumberValue();

                        //documentTransaction.AddNumer(control.LinkFieldName,
                        //dec);
                    } else if (control.Input.IsDateType()) {
                        //var date = control.Input.GetDateTime();

                        //documentTransaction.AddDate(control.LinkFieldName,
                        //date);
                    } else {
                        //documentTransaction.AddString(control.LinkFieldName,
                        //control.Input.Text);                
                    }

                }

                return builderSQL.toString();
            },
            ApplyReadOnly: function (documentreadonly) {
                var length = this.ControlEditable.Count;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    this.ApplyReadOnlyOnControl(documentreadonly, this.ControlEditable.getItem(i).Input);

                }
            },
            ApplyReadOnlyOnControl: function (documentreadonly, input) {
                if (input.Controller != null) {
                    if (Bridge.is(input.Controller, ExpressCraft.CheckEdit)) {
                        input.Enabled = !documentreadonly;
                    }
                } else {
                    if (Bridge.is(input, ExpressCraft.TextInputDropDown)) {
                        input.GetInput().readOnly = documentreadonly;
                    }
                    input.Readonly = documentreadonly;
                }
            },
            OnControlCreated: function (Control) {

            },
            Apply: function (parent, documentreadonly) {
                var $t, $t1, $t2, $t3;
                if (documentreadonly === void 0) { documentreadonly = false; }
                if (parent == null) {
                    throw new System.ArgumentNullException();
                }

                if (this.appliedLayout) {
                    return;
                }
                this.appliedLayout = true;

                var leftMargin = 10;
                var topMargin = 5;

                var leftLabel = 15;

                var currentLeft = leftMargin;
                var AppendX = 0;
                var AppendY = 0;

                var EditStartX = 125;

                if (ExpressCraft.Helper.NotDesktop) {
                    EditStartX = 15;
                }

                var ButtinWidth = 73;
                var XIncrement = (leftMargin + this.ColumnWidth) | 0;

                var inputHeight;
                if (ExpressCraft.Helper.NotDesktop) {
                    ButtinWidth = 0;
                    inputHeight = 45;
                } else {
                    inputHeight = 20;
                }
                var GroupLabelIncrement = (this.ControlMargin + (ExpressCraft.Helper.NotDesktop ? (((inputHeight - 30) | 0)) : (((inputHeight - 4) | 0)))) | 0;
                var RowIncrement = (inputHeight + this.ControlMargin) | 0;

                var TinyLabelIncrement = (inputHeight - 8) | 0;

                $t = Bridge.getEnumerator(this.Columns);
                try {
                    while ($t.moveNext()) {
                        var column = $t.Current;
                        var autoDiv = new ExpressCraft.Control.$ctor1();
                        var y = topMargin;
                        if (ExpressCraft.Helper.NotDesktop) {
                            autoDiv.Width = "(100% - 12px)";
                            autoDiv.Top = AppendY;
                        } else {
                            autoDiv.Top = y;
                            autoDiv.Width = this.ColumnWidth;
                        }
                        autoDiv.Left = AppendX;

                        var docFragment = document.createDocumentFragment();

                        var groups = column.Groups;

                        $t1 = Bridge.getEnumerator(groups);
                        try {
                            while ($t1.moveNext()) {
                                var group = $t1.Current;
                                if (!System.String.isNullOrWhiteSpace(group.GroupLabel)) {
                                    var label = ExpressCraft.Control.Label$2(group.GroupLabel, currentLeft, y, true);
                                    if (ExpressCraft.Helper.NotDesktop) {
                                        label.style.fontSize = "14px";
                                    }
                                    docFragment.appendChild(label);
                                    y += GroupLabelIncrement;
                                }
                                var rows = group.Rows;

                                $t2 = Bridge.getEnumerator(rows);
                                try {
                                    while ($t2.moveNext()) {
                                        var row = $t2.Current;
                                        if (!System.String.isNullOrWhiteSpace(row.Label)) {
                                            var label1 = ExpressCraft.Control.Label$2(row.Label, ((currentLeft + leftLabel) | 0) + System.Decimal.toFloat(row.Offset), y, false);
                                            if (ExpressCraft.Helper.NotDesktop) {
                                                label1.style.fontSize = "12px";
                                                y += (GroupLabelIncrement - 5) | 0;
                                            }
                                            docFragment.appendChild(label1);
                                        }

                                        if (Bridge.is(row, ExpressCraft.LayoutRowGap)) {
                                            y += row.Height;
                                            continue;
                                        }

                                        if (row.Button != null && !ExpressCraft.Helper.NotDesktop) {
                                            row.Button.Location = new ExpressCraft.Vector2.$ctor1(((((this.ColumnWidth - ButtinWidth) | 0) + 6) | 0), y);
                                            row.Button.Width = ButtinWidth;
                                            docFragment.appendChild(ExpressCraft.Control.op_Implicit(row.Button));
                                        }

                                        var controls = row.Controls;
                                        var HasTinyLabel = false;

                                        if (controls.Count > 0) {
                                            var TotalPercent = System.Decimal(0);

                                            TotalPercent = System.Decimal(0);
                                            var AddWidth = 0;
                                            $t3 = Bridge.getEnumerator(controls);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var control = $t3.Current;
                                                    if (control.Percent.gt(System.Decimal(1.0)) || control.Percent.lte(System.Decimal(0.0))) {
                                                        control.Percent = System.Decimal(1.0);
                                                    }

                                                    TotalPercent = TotalPercent.add(control.Percent);

                                                    if (TotalPercent.gt(System.Decimal(1.0))) {
                                                        if (Bridge.is(control.Input, ExpressCraft.MemoInput)) {
                                                            y += (ExpressCraft.Helper.ToInt(control.Input.Height) + this.ControlMargin) | 0;
                                                        } else {
                                                            y += RowIncrement;
                                                        }

                                                        if (row.NoGap) {
                                                            y -= (this.ControlMargin + 1) | 0;
                                                        }

                                                        if (HasTinyLabel) {
                                                            y += TinyLabelIncrement;
                                                            HasTinyLabel = false;
                                                        }

                                                        TotalPercent = TotalPercent.sub(System.Decimal(1.0));
                                                        AddWidth = 0;
                                                    }
                                                    var Add = (((((((currentLeft + AddWidth) | 0) + EditStartX) | 0) + ButtinWidth) | 0) + System.Decimal.toFloat(row.Offset));
                                                    var o100Percent = System.String.concat("((100% - ", ExpressCraft.Helper.ToPx(Bridge.box(Add, System.Single, System.Single.format, System.Single.getHashCode)), ") * ", (TotalPercent.sub(control.Percent)), ")");
                                                    var o100Percent2 = System.String.concat("(100% - ", ExpressCraft.Helper.ToPx(Bridge.box(Add, System.Single, System.Single.format, System.Single.getHashCode)), ")");

                                                    var width = System.String.concat("(", o100Percent2, " * ", control.Percent, ")");
                                                    var loc = new ExpressCraft.Vector2.$ctor1(System.String.concat("(", o100Percent, " + ", ExpressCraft.Helper.ToPx(Bridge.box((Add - ButtinWidth), System.Single, System.Single.format, System.Single.getHashCode)), ")"), y);
                                                    if (!row.NoGap) {
                                                        AddWidth = (AddWidth + 6) | 0;
                                                    }

                                                    if (control.Input.Controller != null) {
                                                        control.Input.Controller.Width = width;
                                                        control.Input.Controller.Location = loc.$clone();
                                                        control.Input.Content.tabIndex = ExpressCraft.LayoutContainer.TabIndex;
                                                        control.Input.ClassList.remove("control");
                                                        if (Bridge.is(control.Input.Controller, ExpressCraft.CheckEdit)) {
                                                            var span = control.Input.Controller.span;
                                                            span.style.top = "0";
                                                            span.style.left = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 2) | 0)), System.Int32));

                                                            span.style.position = "absolute";

                                                            span.style.whiteSpace = "pre";
                                                            //span.Style.Transform = "translate(3px, 50%)";
                                                            if (ExpressCraft.Helper.NotDesktop) {
                                                                span.style.fontSize = "14px";
                                                                span.style.whiteSpace = "normal";
                                                            }

                                                            if (control.Input.Content.type === "checkbox") {
                                                                control.Input.Width = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 4) | 0)), System.Int32));
                                                                control.Input.Height = ExpressCraft.Helper.ToPx(Bridge.box((((inputHeight - 4) | 0)), System.Int32));
                                                            }
                                                        }

                                                        docFragment.appendChild(ExpressCraft.Control.op_Implicit(control.Input.Controller));
                                                    } else {
                                                        control.Input.Width = width;
                                                        control.Input.Location = loc.$clone();
                                                        control.Input.GetInput().tabIndex = ExpressCraft.LayoutContainer.TabIndex;

                                                        docFragment.appendChild(ExpressCraft.Control.op_Implicit(control.Input));
                                                    }
                                                    if (ExpressCraft.Helper.NotDesktop) {
                                                        control.Input.Height = inputHeight;
                                                        control.Input.Style.fontSize = "14px";

                                                        if (control.Input.GetInput() != null) {
                                                            control.Input.GetInput().style.fontSize = "14px";
                                                        }
                                                    }

                                                    this.OnControlCreated(control);

                                                    if (!row.NoGap && !row.HideTinyLabel && !System.String.isNullOrWhiteSpace(control.TinyLabel)) {
                                                        var label2 = ExpressCraft.Control.Label$2(control.TinyLabel, 0, y + (((inputHeight + 3) | 0)), false, true);
                                                        label2.style.left = System.String.concat("calc(", o100Percent, " + ", ExpressCraft.Helper.ToPx(Bridge.box((Add - ButtinWidth), System.Single, System.Single.format, System.Single.getHashCode)), ")");
                                                        docFragment.appendChild(label2);
                                                        if (ExpressCraft.Helper.NotDesktop) {
                                                            label2.style.fontSize = "12px";
                                                        }
                                                        HasTinyLabel = true;
                                                    }

                                                    if (row.UsePlaceholder && !System.String.isNullOrWhiteSpace(control.TinyLabel)) {
                                                        control.Input.SetAttribute("placeholder", control.TinyLabel);
                                                        if (control.Input.ToolTip == null) {
                                                            if (System.String.isNullOrWhiteSpace(row.Label) && System.String.isNullOrWhiteSpace(group.GroupLabel)) {
                                                                control.Input.ToolTip = new ExpressCraft.ToolTip.ctor(control.TinyLabel);
                                                            } else {
                                                                control.Input.ToolTip = new ExpressCraft.ToolTip.$ctor1(System.String.isNullOrWhiteSpace(row.Label) ? group.GroupLabel : row.Label, control.TinyLabel);
                                                            }
                                                        }
                                                    }

                                                    ExpressCraft.LayoutContainer.TabIndex = (ExpressCraft.LayoutContainer.TabIndex + 1) | 0;

                                                    if (!control.Input.Readonly) {
                                                        this.ApplyReadOnlyOnControl(documentreadonly, control.Input);
                                                        this.ControlEditable.add(control);
                                                    }
                                                    this.Controls.add(control);
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                            if (HasTinyLabel) {
                                                y += TinyLabelIncrement;
                                            }
                                            var last = System.Linq.Enumerable.from(row.Controls).lastOrDefault(null, null);
                                            if (last != null && Bridge.is(last.Input, ExpressCraft.MemoInput)) {
                                                y += (ExpressCraft.Helper.ToInt(last.Input.Height) + this.ControlMargin) | 0;
                                            } else {
                                                y += RowIncrement;
                                            }
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }autoDiv.Height = y;
                        if (!ExpressCraft.Helper.NotDesktop) {
                            AppendX = (AppendX + XIncrement) | 0;
                        } else {
                            AppendY = (AppendY + Bridge.Int.clip32(y)) | 0;
                        }
                        autoDiv.Content.appendChild(docFragment);
                        parent.Content.appendChild(ExpressCraft.Control.op_Implicit(autoDiv));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }var LastControl = System.Linq.Enumerable.from(this.Controls).lastOrDefault(null, null);
                if (LastControl != null) {
                    var FirstControl = System.Linq.Enumerable.from(this.Controls).firstOrDefault(null, null);

                    var PreventDefaultMoveForward = function (ev) {
                        if (ev.keyCode === 9 && !ev.shiftKey) {
                            ev.preventDefault();
                            var x = FirstControl.Input.GetInput();
                            if (x != null) {
                                ExpressCraft.Helper.FocusElement(x);
                            } else {
                                ExpressCraft.Helper.FocusElement(LastControl.Input.Content);
                            }
                        }
                    };

                    var PreventDefaultMoveBack = function (ev) {
                        if (ev.keyCode === 9 && ev.shiftKey) {
                            ev.preventDefault();
                            var x = LastControl.Input.GetInput();
                            if (x != null) {
                                ExpressCraft.Helper.FocusElement(x);
                            } else {
                                ExpressCraft.Helper.FocusElement(LastControl.Input.Content);
                            }
                        }
                    };

                    LastControl.Input.Content.onkeydown = PreventDefaultMoveForward;
                    FirstControl.Input.Content.onkeydown = PreventDefaultMoveBack;
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutControl", {
        props: {
            LinkFieldName: null,
            Input: null,
            TinyLabel: null,
            Percent: System.Decimal(0.0),
            /**
             * Calculated
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutControl
             * @function Width
             * @type string
             */
            Width: null,
            /**
             * Calculated
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutControl
             * @function LineNumber
             * @type number
             */
            LineNumber: System.Decimal(0.0)
        },
        ctors: {
            $ctor2: function (linkFieldName, input, tinyLabel, percent) {
                if (tinyLabel === void 0) { tinyLabel = ""; }
                if (percent === void 0) { percent = System.Decimal(1.0); }

                this.$initialize();
                this.LinkFieldName = linkFieldName;
                this.Input = input;
                this.TinyLabel = tinyLabel;
                this.Percent = percent;
            },
            $ctor1: function (linkFieldName, input, percent) {
                if (percent === void 0) { percent = System.Decimal(1.0); }

                ExpressCraft.LayoutControl.$ctor2.call(this, linkFieldName, input, "", percent);

            },
            ctor: function (linkFieldName, input) {
                ExpressCraft.LayoutControl.$ctor2.call(this, linkFieldName, input, "");

            }
        }
    });

    Bridge.define("ExpressCraft.LayoutGroup", {
        fields: {
            Rows: null
        },
        props: {
            GroupLabel: null
        },
        ctors: {
            init: function () {
                this.Rows = new (System.Collections.Generic.List$1(ExpressCraft.LayoutRow))();
            },
            ctor: function (rows) {
                if (rows === void 0) { rows = []; }

                this.$initialize();
                this.GroupLabel = "";
                if (rows != null && rows.length > 0) {
                    this.Rows.addRange(rows);
                }
            },
            $ctor1: function (groupLabel, rows) {
                if (rows === void 0) { rows = []; }

                this.$initialize();
                this.GroupLabel = groupLabel;
                if (rows != null && rows.length > 0) {
                    this.Rows.addRange(rows);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutRow", {
        fields: {
            Controls: null
        },
        props: {
            Label: null,
            Button: null,
            /**
             * If this is true - tiny labels are ignored
             *
             * @instance
             * @public
             * @memberof ExpressCraft.LayoutRow
             * @function NoGap
             * @type boolean
             */
            NoGap: false,
            UsePlaceholder: false,
            HideTinyLabel: false,
            Offset: System.Decimal(0.0)
        },
        ctors: {
            init: function () {
                this.Controls = new (System.Collections.Generic.List$1(ExpressCraft.LayoutControl))();
                this.NoGap = false;
                this.UsePlaceholder = false;
                this.HideTinyLabel = false;
                this.Offset = System.Decimal(0);
            },
            $ctor2: function (label, controls) {
                if (controls === void 0) { controls = []; }

                this.$initialize();
                this.Label = label;
                if (controls != null && controls.length > 0) {
                    this.Controls.addRange(controls);
                }
            },
            ctor: function (controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, "", controls);

            },
            $ctor1: function (offset, controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, "", controls);
                this.Offset = offset;
            },
            $ctor3: function (label, button, controls) {
                if (controls === void 0) { controls = []; }

                ExpressCraft.LayoutRow.$ctor2.call(this, label, controls);
                this.Button = button;
            }
        }
    });

    Bridge.define("ExpressCraft.MessageBoxButtons", {
        $kind: "enum",
        statics: {
            fields: {
                Auto: 0,
                Ok: 1,
                YesNo: 2,
                YesNoCancel: 3,
                AbortSendCancel: 4
            }
        }
    });

    Bridge.define("ExpressCraft.MessageBoxLayout", {
        $kind: "enum",
        statics: {
            fields: {
                Information: 0,
                Exclamation: 1,
                Question: 2,
                Error: 3
            }
        }
    });

    Bridge.define("ExpressCraft.MouseMoveAction", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Move: 1,
                TopLeftResize: 2,
                LeftResize: 3,
                BottomLeftResize: 4,
                BottomResize: 5,
                BottomRightResize: 6,
                RightResize: 7,
                TopResize: 8,
                TopRightResize: 9
            }
        }
    });

    Bridge.define("ExpressCraft.Network", {
        statics: {
            methods: {
                GetAjaxOptions: function (JsonFile, Async) {
                    if (Async === void 0) { Async = true; }
                    return { async: Async, url: ExpressCraft.Settings.NetworkURL, cache: false, data: JsonFile == null ? "" : JSON.stringify(Bridge.unbox(JsonFile)), dataType: "json", contentType: "application/json", type: "POST" };
                },
                InvokeMethodUI: function (interfaceName, method, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJsonProgressForm(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), Success, Error);
                },
                InvokeMethodUIControl: function (interfaceName, method, progressControl, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJsonProgressControl(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), progressControl, Success, Error);
                },
                InvokeMethod: function (interfaceName, method, Success, Error, $arguments) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if ($arguments === void 0) { $arguments = []; }
                    ExpressCraft.Network.PostJson(new ExpressCraft.Network.MethodRequest(interfaceName, method, $arguments), Success, Error);
                },
                PostJson: function (JsonFile, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;			
                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.success = Success;
                    ajo.error = Error;

                    $.ajax(ajo);
                },
                PostJsonProgressControl: function (JsonFile, progressControl, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;			
                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.xhr = function () {
                        var xmlRequest = new XMLHttpRequest();
                        xmlRequest.addEventListener("progress", function (e) {
                            var pe = Bridge.as(e, ProgressEvent);
                            if (progressControl == null) {
                                return;
                            }
                            var pc = progressControl;

                            var Percent = 0;

                            if (pe.loaded !== 0 && pe.total !== 0) {
                                Percent = (pe.loaded / pe.total) * 100.0;
                            }
                            pc.internalProgressControl.style.width = System.String.concat(System.Single.format(Percent), "%");
                        });

                        return xmlRequest;
                    };
                    ajo.success = Success;
                    ajo.error = Error;

                    $.ajax(ajo);
                },
                PostJsonProgressForm: function (JsonFile, Success, Error, Async) {
                    if (Success === void 0) { Success = null; }
                    if (Error === void 0) { Error = null; }
                    if (Async === void 0) { Async = true; }
                    // lets convert the JsonFileObject to a string;
                    var npf = new ExpressCraft.Network.NetworkProgressForm();

                    var ajo = ExpressCraft.Network.GetAjaxOptions(JsonFile, Async);
                    ajo.xhr = function () {
                        var xmlRequest = new XMLHttpRequest();
                        xmlRequest.addEventListener("progress", function (e) {
                            var pe = Bridge.as(e, ProgressEvent);
                            if (npf == null || npf.progressControl == null) {
                                return;
                            }
                            var pc = npf.progressControl;

                            var Percent = 0;

                            if (pe.loaded !== 0 && pe.total !== 0) {
                                Percent = (pe.loaded / pe.total) * 100.0;
                            }
                            pc.internalProgressControl.style.width = System.String.concat(System.Single.format(Percent), "%");
                        });

                        return xmlRequest;
                    };
                    ajo.success = function (o, s, jq) {
                        npf.DialogResult = ExpressCraft.DialogResultEnum.OK;
                        Success(o, s, jq);
                    };
                    ajo.error = function (jq, s1, s2) {
                        npf.DialogResult = ExpressCraft.DialogResultEnum.Cancel;
                        Error(jq, s1, s2);
                    };
                    ajo.complete = function (jq, str) {
                        npf.Close();
                    };

                    var ajr = $.ajax(ajo);

                    npf.ShowDialog([new ExpressCraft.DialogResult(ExpressCraft.DialogResultEnum.Cancel, function () {
                        ajr.abort();
                    })]);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Network.MethodRequest", {
        fields: {
            Method: null,
            Arguments: null,
            Interface: null
        },
        ctors: {
            ctor: function (interfaceName, method, $arguments) {
                if ($arguments === void 0) { $arguments = []; }

                this.$initialize();
                this.Method = method;
                this.Arguments = $arguments;
                this.Interface = interfaceName;
            }
        }
    });

    Bridge.define("ExpressCraft.PdfSourceType", {
        $kind: "enum",
        statics: {
            fields: {
                Url: 0,
                Base64: 1
            }
        }
    });

    Bridge.define("ExpressCraft.ResourceManager", {
        statics: {
            fields: {
                cacheResourceString: null
            },
            ctors: {
                init: function () {
                    this.cacheResourceString = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
                }
            },
            methods: {
                GetResourceString: function (name) {
                    var $t;
                    if (ExpressCraft.ResourceManager.cacheResourceString.containsKey(name)) {
                        return ExpressCraft.ResourceManager.cacheResourceString.get(name);
                    }
                    return (($t = ExpressCraft.Settings.GetStyleRuleValue$1(ExpressCraft.Settings.resourceManangerSheets, "content", System.String.concat(".", name)), ExpressCraft.ResourceManager.cacheResourceString.set(name, $t), $t));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonControl.RibbonType", {
        $kind: "enum",
        statics: {
            fields: {
                Full: 0,
                Compact: 1
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonGroup.RenderInfo", {
        fields: {
            Left: 0,
            Width: 0,
            IsSmall: false,
            FirstButton: null,
            SecondButton: null,
            ThirdButton: null,
            BeginGroup: false
        },
        ctors: {
            init: function () {
                this.IsSmall = false;
                this.BeginGroup = false;
            }
        }
    });

    Bridge.define("ExpressCraft.Settings", {
        statics: {
            fields: {
                NetworkURL: null,
                ResourceURL: null,
                AutoRender: false,
                Font: null,
                DefaultFont: null,
                /**
                 * Only for firefox - as no error with number input
                 *
                 * @static
                 * @public
                 * @memberof ExpressCraft.Settings
                 * @default true
                 * @type boolean
                 */
                OnFocusSelectAll: false,
                DefaultStyleSheet: null,
                PluginStyleSheet: null,
                resourceManangerSheets: null,
                GridViewAutoColumnGenerateFormatAsDate: false,
                GridViewAutoColumnFormatDates: false,
                GridViewBlurOnScroll: false,
                GridViewRowScrollPadding: 0,
                GridViewScrollDelayed: false,
                GridViewScrollDelayMS: 0,
                ContextMenuStartingZIndex: 0,
                ContextMenuMinWidth: 0,
                MessageFormTextMaximumHeightInPx: 0,
                MessageFormTextMinimumHeightInPx: 0,
                MessageFormMinimumWidthInPx: 0,
                DayPosition: 0,
                MonthPosition: 0,
                YearPosition: 0,
                DisableTextPopupEditor: false,
                DateSeperator: 0,
                ConsoleDefaultSize: null,
                MessageFormBeep: false,
                MaximumPixelScrollingRows: 0,
                OnSendError: null,
                IsChrome: false,
                AllowCloseWithoutQuestion: false,
                OnApplicationClose: null,
                ShowExceptionDialog: false,
                FormFadeDuration: 0,
                /**
                 * Increase Render Speed
                 *
                 * @static
                 * @public
                 * @memberof ExpressCraft.Settings
                 * @type boolean
                 */
                RemoveAttributesOffElementsWhenLoseFocus: false,
                themeElement: null,
                _includeFocusRegion: false,
                _activeTheme: null,
                themefocusValue: null,
                themeTemplate: null,
                OnF2ShowThemeForm: false,
                ToolTipPopupDelayMs: 0,
                ToolTipPopupStayOpenDelayPerWordMs: 0
            },
            props: {
                TaxPercent: System.Decimal(0.0),
                IncludeFocusRegion: {
                    get: function () {
                        return ExpressCraft.Settings._includeFocusRegion;
                    },
                    set: function (value) {
                        if (ExpressCraft.Settings._includeFocusRegion !== value) {
                            ExpressCraft.Settings._includeFocusRegion = value;
                            ExpressCraft.Settings.ApplyActiveTheme();
                        }
                    }
                },
                ActiveTheme: {
                    get: function () {
                        return ExpressCraft.Settings._activeTheme;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Settings._activeTheme, value)) {
                            ExpressCraft.Settings._activeTheme = value;
                            ExpressCraft.Settings.ApplyActiveTheme();
                        }
                    }
                }
            },
            ctors: {
                init: function () {
                    this.ConsoleDefaultSize = new ExpressCraft.Vector2();
                    this.NetworkURL = "Host.ashx";
                    this.ResourceURL = "./images/";
                    this.AutoRender = true;
                    this.Font = "8.25pt Tahoma";
                    this.DefaultFont = ExpressCraft.Settings.Font;
                    this.OnFocusSelectAll = true;
                    this.resourceManangerSheets = new (System.Collections.Generic.List$1(StyleSheet))();
                    this.GridViewAutoColumnGenerateFormatAsDate = false;
                    this.GridViewAutoColumnFormatDates = true;
                    this.GridViewBlurOnScroll = false;
                    this.GridViewRowScrollPadding = 0;
                    this.GridViewScrollDelayed = false;
                    this.GridViewScrollDelayMS = 25;
                    this.ContextMenuStartingZIndex = 500;
                    this.ContextMenuMinWidth = 200;
                    this.MessageFormTextMaximumHeightInPx = 500;
                    this.MessageFormTextMinimumHeightInPx = 32;
                    this.MessageFormMinimumWidthInPx = 195;
                    this.DayPosition = ExpressCraft.Settings.DatePosition.First;
                    this.MonthPosition = ExpressCraft.Settings.DatePosition.Second;
                    this.YearPosition = ExpressCraft.Settings.DatePosition.Third;
                    this.DisableTextPopupEditor = false;
                    this.DateSeperator = 47;
                    this.ConsoleDefaultSize = new ExpressCraft.Vector2.$ctor1(540, 240);
                    this.MessageFormBeep = false;
                    this.MaximumPixelScrollingRows = 500000;
                    this.IsChrome = Bridge.Browser.isChrome;
                    this.AllowCloseWithoutQuestion = false;
                    this.ShowExceptionDialog = true;
                    this.FormFadeDuration = 100;
                    this._includeFocusRegion = true;
                    this.themefocusValue = ".{25}:focus:not(.grid){{\r\nborder: solid 1px {0};\r\n}}";
                    this.themeTemplate = ".{25}{{\r\n    color:{22};\r\n}}\r\n#focusLine;\r\n.{25}::selection{{\r\n{26}:{1};\r\n}}\r\n.{25}::-moz-selection{{\r\n{26}:{1};\r\n}}\r\n.{25}:disabled{{\r\n{26}:{2};\r\n}}\r\n.input{25}:read-only{{\r\n{26}:{3};\r\n}}\r\n.{28}{25}{{\r\n{26}:{0};\r\n{27}{29}:{0};\r\n{27}{31}:{0};\r\n{27}{32}:{1};\r\n}}\r\n.{28}page{{\r\n{26}:{3};\r\n}}\r\n.{28}group{{\r\n{26}:{3};\r\n}}\r\n.{28}{33}{{\r\n{26}:{3};\r\n}}\r\n.{28}{33}:hover:not(:active):not(.disabled)\r\n{{\r\n{26}:{4};\r\n}}\r\n.{28}{33}:active:not(.disabled){{\r\n{26}:{5};\r\n}}\r\n.{28}{33}small{{\r\n{26}:{3}; \r\n}}\r\n.{28}{33}small:hover:not(:active):not(.disabled)\r\n{{\r\n{26}:{4};\r\n}}\r\n.{28}{33}small:active:not(.disabled){{\r\n{26}:{5};\r\n}}\r\n.{28}seperator{{\r\n{26}:{1};\r\n}}\r\n.{28}{35}-hidden{{\r\n{26}:{0};\r\ncolor:{23};\r\n}}\r\n.{28}{35}-hidden:hover{{\r\n{26}:{6};\r\n}}\r\n.{28}{35}-active{{\r\n{26}:{3};\r\n}}\r\n.tab{25}{{\r\n{26}:{3};\r\n}}\r\n.tab{25}page{{\r\n{26}:{3};\r\n{27}{29}:{1};\r\n{27}{31}:{1};\r\n{27}{32}:{1};\r\n}}\r\n.tab{25}{35} {{\r\n{26}:{3};   \r\n}}\r\n.tab{25}{35}-hidden{{\r\n{27}{30}:{3};\r\n{27}{29}:{3};\r\n{27}{31}:{3};\r\n{27}{32}:transparent;\r\n}}\r\n.tab{25}{35}-hidden:hover{{\r\n{26}:{7};\r\n{27}{29}:{7};\r\n{27}{31}:{7};\r\n}}\r\n.tab{25}{35}-active{{\r\n{27}{30}:{0};\r\n{27}{29}:{1};\r\n{27}{31}:{1};\r\n{27}{32}:{3};\r\nborder-top-width:2px;\r\nline-height:18px;\r\ntop:2px;\r\n}}\r\n.tab{25}{35}-close{33}{{\r\ncolor:{1};\t\r\n}}\r\n.tab{25}{35}-close{33}:hover{{\r\ncolor:{24};\r\n\t{26}:{2};\r\n\t{27}:1px solid {19};\r\n}}\r\n.input{25} {{\r\n{27}:1px solid {1};   \r\n{26}:{14};\r\n}}\r\n.simple{33}{{\r\n{27}:1px solid {19};\r\n{26}:{3};\r\n}}\r\n.simple{33}:hover:not(.disabled)\r\n{{\r\n\t{26}:{1};\r\n}}\r\n.simple{33}:active:not(.disabled)\r\n{{\r\n\t{26}:{12};\r\n{27}: 1px solid {20};\r\n}}\r\n@keyframes ColorFlash {{\r\nfrom {{ {26}: {23};}}\r\nto {{ {26}: {0};}}\r\n}}\r\n.form-base{{\r\n{27}-color:{0};\r\n}}\r\n.{34}{{\r\n{26}:{0};  \r\n}}\r\n.{34}-title{{\r\ncolor:{23}; \r\n}}\r\n.{34}-{33}{{\r\ncolor:{23};\r\n}}\r\n.{34}-{33}:hover:not(.{34}-{33}-close){{\r\n{26}:{8};\r\n}}\r\n.{34}-{33}:active:not(.{34}-{33}-close){{\r\n{26}:{9};\r\n}}\r\n.{34}-{33}-close:hover{{\r\n{26}:{10};\r\n}}\r\n.{34}-{33}-close:active{{\r\n{26}:{11};\r\n}}\r\n.cell{{\r\n{27}: 1px solid {3};   \r\n}}\r\n.cellrow{{\r\n{26}:{14};\r\n}}\r\n.cellrow:hover{{\r\n{26}:{3} !important;\r\n}}\r\n.cellrow:active{{\r\n{26}:{12} !important;\r\n}}\r\n.even{{\r\n   {26}:{13} !important;\r\n}}\r\n.cellrow-selected{{\r\n{26}:{17} !important;\r\n}}\r\n.cellrow-selected:hover{{\r\n{26}:{18} !important;\r\n}}\r\n.{36}{{\r\n{26}:{3};\r\n{27}-right:1px solid {19} !important;\r\n}}\r\n.{36}:hover{{\r\n{26}:{1};\r\n}}\r\n.{36}:active{{\r\n{26}:{12};\r\n}}\r\n.{36}-container{{\r\n{26}:{3};\r\n{27}-bottom:1px solid {19} !important;\t\r\n}}\r\n.grid{{\r\n{26}:{14};\r\n{27}:1px solid {19}; \r\n}}\r\n.progressbar{{\r\n{27}:1px solid {19};\r\n{26}:{14};\r\n}}\r\n.progressbarbody{{\r\n{26}:{0};\r\n}}\r\n.contextmenu{{\r\n{26}:{14}; \r\n{27}: solid 1px {21};\r\n}}\r\n.contextitem:hover{{\r\n{26}:{15};\r\n}}\r\n.contextitemseperator{{\r\n{26}:{16};\r\n}}\r\n.dialog{33}section{{\r\n{26}:{3};\r\n}}\r\n.split{25}\r\n{{\r\n{27}:1px solid {19};\r\n}}\r\n.splittervertical {{\r\n{27}-left: 1px {4} solid;\r\n{27}-right: 1px {4} solid;\r\n}}\r\n.splitterhorizontal {{\r\n{27}-top: 1px {4} solid;\r\n{27}-bottom: 1px {4} solid;\r\n}}\r\n.splitterhorizontal:hover {{\r\n{26}:{4};\r\n}}\r\n.splittervertical:hover {{\r\n{26}:{4};\r\n}}\r\n.tool-tip{{\r\n{26}:{14};\r\n{27}: solid 1px {21};\r\n}}\r\n.{34}-min:hover{{\r\n\t{26}:{8};\r\n}}\r\n.simplebutton-active\r\n{{\r\n\t{26}:{12};\r\n{27}: 1px solid {20};\r\n}}\r\n.primary{{\r\n    {26}:{0};\r\n}}\r\n.tabheader-container{{\r\n    border-bottom: 2px {0} solid;\r\n}}\r\n";
                    this.OnF2ShowThemeForm = true;
                    this.ToolTipPopupDelayMs = 1000;
                    this.ToolTipPopupStayOpenDelayPerWordMs = 250;
                    this.TaxPercent = System.Decimal(0.1);
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.Settings.ActiveTheme = ExpressCraft.Theme.Theme1;
                    ExpressCraft.Settings.SetupStyleDefaults();
                },
                SetupStyleDefaults: function () {
                    try {
                        var sheets = document.styleSheets;
                        for (var i = 0; i < sheets.length; i = (i + 1) | 0) {
                            var ownerNode = Bridge.as(sheets[System.Array.index(i, sheets)].ownerNode, HTMLLinkElement);
                            if (ownerNode == null) {
                                continue;
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "expresscraft")) {
                                ExpressCraft.Settings.DefaultStyleSheet = sheets[System.Array.index(i, sheets)];
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "expresscraftplugin")) {
                                ExpressCraft.Settings.PluginStyleSheet = sheets[System.Array.index(i, sheets)];
                            }
                            if (Bridge.referenceEquals(ownerNode.id.toLowerCase(), "resourcemanager")) {
                                ExpressCraft.Settings.resourceManangerSheets.add(sheets[System.Array.index(i, sheets)]);
                            }
                        }
                        if (ExpressCraft.Settings.DefaultStyleSheet == null) {
                            return;
                        }
                        var df = ExpressCraft.Settings.GetExpressStyleRuleValue("font", ".control");
                        if (df != null) {
                            ExpressCraft.Settings.DefaultFont = df;
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }

                },
                GetStyleRuleValue$1: function (cssFile, style, className) {
                    var $t;
                    try {
                        if (cssFile != null) {
                            $t = Bridge.getEnumerator(cssFile);
                            try {
                                while ($t.moveNext()) {
                                    var item = $t.Current;
                                    var value = ExpressCraft.Settings.GetStyleRuleValue(item, style, className);
                                    if (value != null) {
                                        return value;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t, System.IDisposable)) {
                                    $t.System$IDisposable$dispose();
                                }
                            }}
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                    return null;
                },
                GetStyleRuleValue: function (cssFile, style, className) {
                    var $t, $t1;
                    try {
                        if (cssFile != null) {
                            var pStyles = cssFile;
                            if (pStyles.cssRules) {
                                for (var i = 0; i < pStyles.cssRules.length; i = (i + 1) | 0) {
                                    var rule = ($t = pStyles.cssRules)[System.Array.index(i, $t)];
                                    if (rule.selectorText && !Bridge.referenceEquals(rule.selectorText.split(44).indexOf(className), -1)) {
                                        return ($t1 = rule.style)[System.Array.index(style, $t1)];
                                    }
                                }
                            }
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                    return null;
                },
                GetExpressStyleRuleValue: function (style, className) {
                    var value = ExpressCraft.Settings.GetStyleRuleValue(ExpressCraft.Settings.PluginStyleSheet, style, className);
                    if (value == null) {
                        value = ExpressCraft.Settings.GetStyleRuleValue(ExpressCraft.Settings.DefaultStyleSheet, style, className);
                    }
                    return value;
                },
                ApplyActiveTheme: function () {
                    var $t;
                    if (ExpressCraft.Settings.themeElement != null) {
                        ExpressCraft.Settings.themeElement.parentElement.removeChild(ExpressCraft.Settings.themeElement);
                    }
                    if (ExpressCraft.Settings._activeTheme == null) {
                        ExpressCraft.Settings._activeTheme = ExpressCraft.Theme.Theme1;
                    }
                    var objList = new (System.Collections.Generic.List$1(System.Object))();
                    objList.addRange(ExpressCraft.Settings._activeTheme.Colors);
                    objList.addRange(System.Array.init(["control", "background-color", "border", "ribbon", "-left-color", "-top-color", "-right-color", "-bottom-color", "button", "form-heading", "pageheader", "heading"], System.Object));


                    ExpressCraft.Settings.themeElement = ($t = document.createElement('style'), $t.innerHTML = System.String.format.apply(System.String, [System.String.replaceAll(ExpressCraft.Settings.themeTemplate, "#focusLine;", ExpressCraft.Settings._includeFocusRegion ? ExpressCraft.Settings.themefocusValue : "")].concat(objList.toArray())), $t);

                    document.body.appendChild(ExpressCraft.Settings.themeElement);
                }
            }
        }
    });

    Bridge.define("ExpressCraft.Settings.DatePosition", {
        $kind: "enum",
        statics: {
            fields: {
                First: 0,
                Second: 1,
                Third: 2
            }
        }
    });

    Bridge.define("ExpressCraft.SliderLocation", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Right: 1
            }
        }
    });

    Bridge.define("ExpressCraft.SortSetting", {
        fields: {
            Column: null,
            SortMode: 0
        }
    });

    Bridge.define("ExpressCraft.TextBlock", {
        fields: {
            OriginalSource: null,
            MaxWidth: 0,
            ComputedHeight: 0,
            LinesComputed: 0,
            ElelemtsOverMax: false,
            MaxCalculatedWidth: 0
        },
        ctors: {
            init: function () {
                this.ElelemtsOverMax = false;
                this.MaxCalculatedWidth = 0;
            },
            ctor: function (source, maxWidth) {
                this.$initialize();
                this.OriginalSource = source;
                this.MaxWidth = maxWidth;
            }
        },
        methods: {
            ComputeString: function () {
                this.ElelemtsOverMax = false;
                var Lines = System.String.split(this.OriginalSource, System.Array.init([13, 10], System.Char).map(function(i) {{ return String.fromCharCode(i); }}));

                var sizePerChar = ExpressCraft.Control.GetTextWidth("M", ExpressCraft.Settings.DefaultFont);

                this.LinesComputed = 0;

                for (var i = 0; i < Lines.length; i = (i + 1) | 0) {
                    var line = Lines[System.Array.index(i, Lines)];

                    var lineWidth = ExpressCraft.Control.GetTextWidth(this.OriginalSource, ExpressCraft.Settings.DefaultFont);

                    if (lineWidth > this.MaxWidth) {
                        this.ElelemtsOverMax = true;
                        this.MaxCalculatedWidth = this.MaxWidth;
                        var yy = 0;
                        for (var x = 0; x < line.length; x = (x + 1) | 0) {
                            yy = (yy + 1) | 0;

                            if (yy * sizePerChar > this.MaxWidth) {
                                this.LinesComputed = (this.LinesComputed + 1) | 0;
                                yy = 0;
                            }
                        }

                        if (yy > 0) {
                            this.LinesComputed = (this.LinesComputed + 1) | 0;
                        }
                    } else {
                        this.LinesComputed = (this.LinesComputed + 1) | 0;
                        if (lineWidth > this.MaxCalculatedWidth) {
                            this.MaxCalculatedWidth = lineWidth;
                        }
                    }
                }
                this.ComputedHeight = this.GetFontSize(ExpressCraft.Settings.DefaultFont) * this.LinesComputed;
            },
            GetFontSize: function (fontWithSize) {
                var strs = System.String.split(fontWithSize, System.Array.init([32], System.Char).map(function(i) {{ return String.fromCharCode(i); }}), null, 1);

                for (var i = 0; i < strs.length; i = (i + 1) | 0) {
                    if (System.String.endsWith(strs[System.Array.index(i, strs)], "pt")) {
                        return parseFloat(strs[System.Array.index(i, strs)]) * 1.333333;
                    } else if (System.String.endsWith(strs[System.Array.index(i, strs)], "px")) {
                        return parseFloat(strs[System.Array.index(i, strs)]);
                    }
                }

                return 10.9999971;
            }
        }
    });

    Bridge.define("ExpressCraft.Theme", {
        statics: {
            fields: {
                Theme1: null
            },
            ctors: {
                init: function () {
                    this.Theme1 = new ExpressCraft.Theme(["#0173C7", "#C5C5C5", "#CCCCCC", "#F0F0F0", "#C3C3C3", "#ADADAD", "#2A8AD0", "#D3D3D3", "#2A8AD4", "#015C9F", "#E81123", "#F1707A", "#AEAEAE", "#FAFAFA", "#ffffff", "#CFCFCF", "#B9B9B9", "rgba(1, 115, 199, 0.3)", "rgba(1, 115, 199, 0.5)", "#A6A6A6", "#777777", "#80868A", "#404040", "#ffffff", "#000000"]);
                }
            }
        },
        props: {
            Colors: null
        },
        ctors: {
            ctor: function (colors) {
                if (colors === void 0) { colors = []; }

                this.$initialize();
                if (colors != null && colors.length === 25) {
                    this.Colors = colors;
                }

                //BackgroundColor1 = bgc1;
                //BackgroundColor2 = bgc2;
                //BackgroundColor3 = bgc3;
                //BackgroundColor4 = bgc4;
                //BackgroundColor5 = bgc5;
                //BackgroundColor6 = bgc6;
                //BackgroundColor7 = bgc7;
                //BackgroundColor8 = bgc8;
                //BackgroundColor9 = bgc9;
                //BackgroundColor10 = bgc10;
                //BackgroundColor11 = bgc11;
                //BackgroundColor12 = bgc12;
                //BackgroundColor13 = bgc13;
                //BackgroundColor14 = bgc14;		
                //BackgroundColor15 = bgc15;
                //BackgroundColor16 = bgc16;
                //BackgroundColor17 = bgc17;
                //BackgroundColor18 = bgc18;
                //BackgroundColor19 = bgc19;
                //BorderColor1 = bc1;
                //BorderColor2 = bc2;
                //BorderColor3 = bc3;
                //ForeColor1 = fc1;
                //ForeColor2 = fc2;
                //ForeColor3 = fc3;
            }
        }
    });

    Bridge.define("ExpressCraft.TileViewState", {
        $kind: "enum",
        statics: {
            fields: {
                Hidden: 0,
                Visible: 1
            }
        }
    });

    Bridge.define("ExpressCraft.ToolTip", {
        fields: {
            Description: null,
            Heading: null,
            AttachedControl: null
        },
        ctors: {
            ctor: function (content) {
                this.$initialize();
                this.Description = content;
            },
            $ctor1: function (heading, description) {
                this.$initialize();
                this.Description = description;
                this.Heading = heading;
            }
        },
        methods: {
            GetWordCount: function () {
                var fullContent = System.String.concat(this.Heading, " ", this.Description).trim();
                var length = fullContent.length;
                var prevChar = 0;
                var builder = new System.Text.StringBuilder();
                var current;
                var WordCount = 1;
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    current = fullContent.charCodeAt(i);
                    if (System.Char.isWhiteSpace(String.fromCharCode(current))) {
                        if (System.Char.isWhiteSpace(String.fromCharCode(prevChar))) {
                            prevChar = current;
                            continue;
                        } else {
                            WordCount = (WordCount + 1) | 0;
                        }
                    }
                    prevChar = current;
                }
                return WordCount;
            }
        }
    });

    Bridge.define("ExpressCraft.Vector2", {
        $kind: "struct",
        statics: {
            methods: {
                /**
                 * adds calc to (100% - 50px) turns to calc(100% - 50px)
                 *
                 * @static
                 * @this ExpressCraft.Vector2
                 * @memberof ExpressCraft.Vector2
                 * @param   {string}    a
                 * @return  {string}
                 */
                pf: function (a) {
                    return !System.String.isNullOrWhiteSpace(a) && System.String.startsWith(a, "(") && System.String.endsWith(a, ")") ? System.String.concat("calc", a) : a;
                },
                getDefaultValue: function () { return new ExpressCraft.Vector2(); }
            }
        },
        fields: {
            X: null,
            Y: null
        },
        props: {
            Xi: {
                get: function () {
                    return this.X;
                },
                set: function (value) {
                    this.X = value;
                }
            },
            Yi: {
                get: function () {
                    return this.Y;
                },
                set: function (value) {
                    this.Y = value;
                }
            },
            Xf: {
                get: function () {
                    return this.X;
                },
                set: function (value) {
                    this.X = value;
                }
            },
            Yf: {
                get: function () {
                    return this.Y;
                },
                set: function (value) {
                    this.Y = value;
                }
            }
        },
        ctors: {
            $ctor1: function (x, y) {
                this.$initialize();
                this.X = x;
                this.Y = y;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1955977157, this.X, this.Y]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, ExpressCraft.Vector2)) {
                    return false;
                }
                return Bridge.equals(this.X, o.X) && Bridge.equals(this.Y, o.Y);
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Vector2();
                s.X = this.X;
                s.Y = this.Y;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.Vector4", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new ExpressCraft.Vector4(); }
            }
        },
        fields: {
            X: null,
            Y: null,
            Z: null,
            M: null
        },
        ctors: {
            $ctor1: function (x, y, z, m) {
                this.$initialize();
                this.X = x;
                this.Y = y;
                this.Z = z;
                this.M = m;
            },
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1956108229, this.X, this.Y, this.Z, this.M]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, ExpressCraft.Vector4)) {
                    return false;
                }
                return Bridge.equals(this.X, o.X) && Bridge.equals(this.Y, o.Y) && Bridge.equals(this.Z, o.Z) && Bridge.equals(this.M, o.M);
            },
            $clone: function (to) {
                var s = to || new ExpressCraft.Vector4();
                s.X = this.X;
                s.Y = this.Y;
                s.Z = this.Z;
                s.M = this.M;
                return s;
            }
        }
    });

    Bridge.define("ExpressCraft.WindowStateType", {
        $kind: "enum",
        statics: {
            fields: {
                Normal: 0,
                Minimized: 1,
                Maximized: 2
            }
        }
    });

    Bridge.define("ExpressCraft.AceCodeEditor", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                ExternalAceCodeEditor: null
            },
            ctors: {
                init: function () {
                    this.ExternalAceCodeEditor = new ExpressCraft.ExternalPlugin("https://ace.c9.io/build/src/ace.js");
                }
            },
            methods: {
                Setup: function () {
                    ExpressCraft.AceCodeEditor.ExternalAceCodeEditor.Setup();
                }
            }
        },
        fields: {
            editor: null,
            _modeType: 0,
            _themeType: 0
        },
        props: {
            ReadOnly: {
                get: function () {
                    return this.editor.getReadOnly();
                },
                set: function (value) {
                    this.editor.setReadOnly(value);
                }
            },
            Source: {
                get: function () {
                    return this.editor.getValue();
                },
                set: function (value) {
                    this.editor.setValue(value);
                }
            }
        },
        ctors: {
            ctor: function (modeType, themeType) {
                if (modeType === void 0) { modeType = 17; }
                if (themeType === void 0) { themeType = 11; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this);
                this._modeType = modeType;
                this._themeType = themeType;
            }
        },
        methods: {
            ClearSelection: function () {
                this.editor.clearSelection();
            },
            Render: function () {
                ExpressCraft.AceCodeEditor.ExternalAceCodeEditor.UsageCheck();

                var theme = System.Enum.format(ExpressCraft.AceModeTypes, this._modeType, "G");
                var mode = System.Enum.format(ExpressCraft.AceModeTypes, this._modeType, "G");

                			
                			this.editor = ace.edit(this.content);
                			this.editor.setTheme("ace/theme/" + theme);
                			this.editor.getSession().setMode("ace/mode/" + mode);	
                			
                this.OnResize = $asm.$.ExpressCraft.AceCodeEditor.f1;

                this.Content.addEventListener("mousedown", $asm.$.ExpressCraft.AceCodeEditor.f2);

                this.Content.addEventListener("mouseup", $asm.$.ExpressCraft.AceCodeEditor.f3);

                ExpressCraft.Control.prototype.Render.call(this);
            }
        }
    });

    Bridge.ns("ExpressCraft.AceCodeEditor", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.AceCodeEditor, {
        f1: function (cont) {
            				this.editor.resize(true);
            				
        },
        f2: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = true;
        },
        f3: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = false;
        }
    });

    Bridge.define("ExpressCraft.Form", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                WindowHolder: null,
                MinimizedForms: null,
                WindowLoader: null,
                _activeToolTip: null,
                _toolTipTimerHandle: 0,
                _activeToolTipMouseMove: null,
                _activeToolTipControl: null,
                _oepntoolTipTimerHandle: 0,
                ResizeCorners: 0,
                MovingForm: null,
                Parent: null,
                Mouse_Down: false,
                MenuOpen: false,
                FormOverLay: null,
                WindowCursorManager: null,
                _hasSetup: false,
                InExternalMouseEvent: false,
                InErrorDialog: false,
                standAloneForms: null,
                FormCollections: null,
                ShowBodyOverLay: false,
                Window_DefaultHeight: 0,
                Window_DefaultWidth: 0,
                _ActiveForm: null,
                _PrevActiveForm: null,
                MoveAction: 0,
                WindowHolderSelectionBoxX: 0,
                WindowHolderSelectionBoxY: 0,
                WindowHolderSelectionBoxXOff: 0,
                WindowHolderSelectionBoxYOff: 0,
                LoadingCount: 0,
                ToClean: null
            },
            props: {
                ActiveToolTip: {
                    get: function () {
                        return ExpressCraft.Form._activeToolTip;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Form._activeToolTip, value)) {
                            if (value != null && value.AttachedControl != null && value.AttachedControl.Content != null) {
                                if (!Bridge.staticEquals(ExpressCraft.Form._activeToolTipMouseMove, null)) {
                                    value.AttachedControl.Content.removeEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                                    ExpressCraft.Form._activeToolTipMouseMove = null;
                                }
                            }
                            if (ExpressCraft.Form._activeToolTipControl != null) {
                                ExpressCraft.Form._activeToolTipControl.Close();
                                ExpressCraft.Form._activeToolTipControl = null;
                            }
                            if (ExpressCraft.Form._toolTipTimerHandle > -1) {
                                Bridge.global.clearTimeout(ExpressCraft.Form._toolTipTimerHandle);
                                ExpressCraft.Form._toolTipTimerHandle = -1;
                            }

                            ExpressCraft.Form._activeToolTip = value;


                            var messageLength;
                            if (ExpressCraft.Form._activeToolTip != null && ((messageLength = ExpressCraft.Form._activeToolTip.GetWordCount())) > 0 && ExpressCraft.Form._activeToolTip.AttachedControl != null) {
                                ExpressCraft.Form._activeToolTipMouseMove = function (ev) {
                                    if (ExpressCraft.Form._toolTipTimerHandle > -1) {
                                        Bridge.global.clearTimeout(ExpressCraft.Form._toolTipTimerHandle);
                                    }
                                    ExpressCraft.Form._toolTipTimerHandle = Bridge.global.setTimeout(function () {
                                        if (ExpressCraft.Form._activeToolTipControl != null) {
                                            ExpressCraft.Form._activeToolTipControl.Close();
                                            ExpressCraft.Form._activeToolTipControl = null;
                                        }
                                        if (ExpressCraft.Form._oepntoolTipTimerHandle > -1) {
                                            Bridge.global.clearTimeout(ExpressCraft.Form._oepntoolTipTimerHandle);
                                            ExpressCraft.Form._oepntoolTipTimerHandle = -1;
                                        }
                                        ExpressCraft.Form._activeToolTipControl = new ExpressCraft.ToolTipControl(ExpressCraft.Form._activeToolTip);
                                        ExpressCraft.Form._activeToolTipControl.Show(ev);

                                        ExpressCraft.Form._oepntoolTipTimerHandle = Bridge.global.setTimeout($asm.$.ExpressCraft.Form.f1, Math.max(1000, Bridge.Int.mul(messageLength, Math.max(ExpressCraft.Settings.ToolTipPopupStayOpenDelayPerWordMs, 10))));

                                        if (!Bridge.staticEquals(ExpressCraft.Form._activeToolTipMouseMove, null)) {
                                            value.AttachedControl.Content.removeEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                                            ExpressCraft.Form._activeToolTipMouseMove = null;
                                        }
                                    }, Math.max(1, ExpressCraft.Settings.ToolTipPopupDelayMs));
                                };
                                value.AttachedControl.Content.addEventListener("mousemove", ExpressCraft.Form._activeToolTipMouseMove);
                            }
                        }
                    }
                },
                ActiveForm: {
                    get: function () {
                        return ExpressCraft.Form._ActiveForm;
                    },
                    set: function (value) {
                        if (!Bridge.referenceEquals(ExpressCraft.Form._ActiveForm, value)) {
                            ExpressCraft.Form._PrevActiveForm = ExpressCraft.Form._ActiveForm;

                            if (ExpressCraft.Form._ActiveForm != null) {
                                ExpressCraft.Form._ActiveForm.OnLostFocus();
                                if (ExpressCraft.Form._ActiveForm.Content != null) {
                                    if (ExpressCraft.Form._ActiveForm.InDesign) {
                                        ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                                        return;
                                    }
                                    ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "visible";
                                }
                            }
                            ExpressCraft.Form._ActiveForm = value;
                            if (ExpressCraft.Form._ActiveForm != null) {
                                ExpressCraft.Form._ActiveForm.OnGotFocus();
                                if (ExpressCraft.Form._ActiveForm.Content != null) {
                                    ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                                    ExpressCraft.Form._ActiveForm.BringToFront();
                                }

                                if (ExpressCraft.Form.GetActiveFormCollection() != null && ExpressCraft.Form.GetActiveFormCollection().FormOwner != null && Bridge.referenceEquals(ExpressCraft.Form._ActiveForm, ExpressCraft.Form.GetActiveFormCollection().FormOwner)) {
                                    ExpressCraft.Form.ClearZIndex();
                                } else {
                                    ExpressCraft.Form.ApplyZIndex();
                                }
                            }
                            if (Bridge.is(ExpressCraft.Form._PrevActiveForm, ExpressCraft.FormPopup) && ((ExpressCraft.Form._ActiveForm != null && !(Bridge.is(ExpressCraft.Form._ActiveForm, ExpressCraft.FormPopup))) || ExpressCraft.Form._ActiveForm == null)) {
                                ExpressCraft.Form.CloseFormPopups();
                            }
                        }

                    }
                }
            },
            ctors: {
                init: function () {
                    this.MinimizedForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                    this._toolTipTimerHandle = -1;
                    this._oepntoolTipTimerHandle = -1;
                    this.ResizeCorners = 2;
                    this.Mouse_Down = false;
                    this.MenuOpen = false;
                    this._hasSetup = false;
                    this.InExternalMouseEvent = false;
                    this.InErrorDialog = false;
                    this.standAloneForms = new ExpressCraft.FormCollection(null);
                    this.FormCollections = new (System.Collections.Generic.List$1(ExpressCraft.FormCollection))();
                    this.ShowBodyOverLay = false;
                    this.Window_DefaultHeight = 480;
                    this.Window_DefaultWidth = 640;
                    this.MoveAction = ExpressCraft.MouseMoveAction.Move;
                    this.LoadingCount = 0;
                    this.ToClean = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                }
            },
            methods: {
                MidleOfAction: function () {
                    return ExpressCraft.Form.MovingForm != null; // WindowHolderSelectionBox != null ||
                },
                GetActiveFormCollection: function () {
                    for (var i = (ExpressCraft.Form.FormCollections.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        var frmCol = ExpressCraft.Form.FormCollections.getItem(i);
                        if (frmCol.FormOwner == null) {
                            for (var x = 0; x < frmCol.VisibleForms.Count; x = (x + 1) | 0) {
                                if (frmCol.VisibleForms.getItem(x) != null) {
                                    frmCol.VisibleForms.getItem(x).Close();
                                }
                            }
                            ExpressCraft.Form.FormCollections.removeAt(i);
                        } else {
                            return frmCol;
                        }
                    }

                    return null;
                },
                SetBodyOverLay: function () {
                    var ActiveCollection = ExpressCraft.Form.GetActiveFormCollection();
                    if (ActiveCollection == null) {
                        return;
                    }

                    ActiveCollection.FormOwner.ShowBodyOverLayStyle();

                    var VisibleForms = ActiveCollection.VisibleForms;

                    for (var i = 0; i < VisibleForms.Count; i = (i + 1) | 0) {
                        var form = VisibleForms.getItem(i);
                        if (form != null) {
                            form.ShowBodyOverLayStyle();
                        }
                    }
                },
                ChangeStateTextSelection: function (element, state) {
                    $(element).css("user-select", state ? "text" : "none");
                },
                PerformFocusShake: function () {
                    if (ExpressCraft.Form.ActiveForm != null) {
                        var form = ExpressCraft.Form.ActiveForm;
                        form.Heading.classList.add("form-heading-flash");
                        Bridge.global.setTimeout(function () {
                            form.Heading.classList.remove("form-heading-flash");
                        }, 800);
                    }
                },
                DisableStateDrag: function (element) {
                    if (Bridge.is(element, HTMLImageElement)) {
                        element.ondragstart = $asm.$.ExpressCraft.Form.f2;
                    } else {
                        $(element).css("user-drag:", "none");
                    }
                },
                SetupHideElementsOnView: function () {
                    window.onblur = $asm.$.ExpressCraft.Form.f3;

                    window.onfocus = $asm.$.ExpressCraft.Form.f4;
                },
                CloseFormPopups: function () {
                    try {
                        var x = ExpressCraft.Form.GetActiveFormCollection();

                        for (var i = 0; i < x.VisibleForms.Count; i = (i + 1) | 0) {
                            if (x.VisibleForms.getItem(i) != null && Bridge.is(x.VisibleForms.getItem(i), ExpressCraft.FormPopup) && x.VisibleForms.getItem(i).IsContentVisible()) {
                                x.VisibleForms.getItem(i).Close();
                            }
                        }
                        if (Bridge.is(x.FormOwner, ExpressCraft.FormPopup)) {
                            x.FormOwner.Close();
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                },
                BeginLoading: function () {
                    ExpressCraft.Form.LoadingCount = (ExpressCraft.Form.LoadingCount + 1) | 0;
                    ExpressCraft.Form.WindowLoader.style.visibility = "visible";
                    ExpressCraft.Form.WindowLoader.style.opacity = "0.4";
                },
                EndLoading: function () {
                    ExpressCraft.Form.LoadingCount = (ExpressCraft.Form.LoadingCount - 1) | 0;
                    if (ExpressCraft.Form.LoadingCount === 0) {
                        ExpressCraft.Form.WindowLoader.style.visibility = "hidden";
                        ExpressCraft.Form.WindowLoader.style.opacity = "0";
                    }
                },
                Setup: function (parent) {
                    if (parent === void 0) { parent = null; }
                    //Settings.Setup();
                    if (ExpressCraft.Form._hasSetup) {
                        return;
                    }
                    ExpressCraft.Form._hasSetup = true;

                    if (parent == null) {
                        ExpressCraft.Form.Parent = document.body;
                    } else {
                        ExpressCraft.Form.Parent = parent;
                    }

                    ExpressCraft.Form.WindowCursorManager = document.createElement('style');

                    ExpressCraft.Form.WindowHolder = ExpressCraft.Control.Div$1("form-container");

                    ExpressCraft.Form.FormOverLay = ExpressCraft.Control.Div$1("system-form-collection-overlay");

                    ExpressCraft.Form.WindowLoader = document.createElement('div');
                    ExpressCraft.Form.WindowLoader.className = "ajax-loading-screen";
                    ExpressCraft.Form.WindowLoader.style.visibility = "hidden";
                    ExpressCraft.Form.WindowLoader.style.opacity = "0";
                    ExpressCraft.Form.WindowLoader.style.backgroundColor = "white";
                    ExpressCraft.Helper.SetBoundsFull$1(ExpressCraft.Form.WindowLoader);
                    ExpressCraft.Form.WindowLoader.style.position = "fixed";
                    ExpressCraft.Form.WindowLoader.style.zIndex = "100000";
                    ExpressCraft.Form.WindowLoader.oncontextmenu = $asm.$.ExpressCraft.Form.f2;
                    ExpressCraft.Form.WindowLoader.onmousedown = $asm.$.ExpressCraft.Form.f5;
                    ExpressCraft.Form.WindowLoader.style.transition = "opacity 1s ease";

                    document.body.appendChild(ExpressCraft.Form.WindowLoader);

                    ExpressCraft.Form.FormOverLay.onmousedown = $asm.$.ExpressCraft.Form.f6;
                    ExpressCraft.Form.FormOverLay.onclick = $asm.$.ExpressCraft.Form.f7;
                    ExpressCraft.Form.FormOverLay.oncontextmenu = $asm.$.ExpressCraft.Form.f8;
                    ExpressCraft.Form.FormOverLay.style.visibility = "visible";

                    window.onkeyup = $asm.$.ExpressCraft.Form.f9;

                    window.onresize = $asm.$.ExpressCraft.Form.f10;

                    window.onmousemove = $asm.$.ExpressCraft.Form.f11;

                    window.onmouseup = $asm.$.ExpressCraft.Form.f12;
                    window.onbeforeunload = $asm.$.ExpressCraft.Form.f13;
                    window.onunload = $asm.$.ExpressCraft.Form.f14;
                    window.onerror = Bridge.fn.combine(window.onerror, $asm.$.ExpressCraft.Form.f15);

                    ExpressCraft.Form.WindowHolder.appendChild(ExpressCraft.Form.FormOverLay);

                    ExpressCraft.Helper.AppendChildren$1(ExpressCraft.Form.Parent, [ExpressCraft.Form.WindowHolder, ExpressCraft.Form.WindowCursorManager]);
                },
                SetCursor: function (cursor) {
                    ExpressCraft.Form.WindowCursorManager.innerHTML = System.String.format("\r\n\t\t\t\t.control{    \r\n\t\t\t\t\tcursor:{0} !important;    \r\n\t\t\t\t}", cursor);
                },
                CalculateMinmizedFormsLocation: function () {
                    var $t, $t1;
                    ExpressCraft.Form.MinimizedForms.remove(null);
                    var RemoveList = new (System.Collections.Generic.List$1(ExpressCraft.Form))();
                    var count = 0;
                    var widthTotal = 0;
                    var y = 30;

                    var viewSize = ExpressCraft.Form.Parent.getBoundingClientRect();

                    $t = Bridge.getEnumerator(ExpressCraft.Form.MinimizedForms);
                    try {
                        while ($t.moveNext()) {
                            var item = $t.Current;
                            if (item.Content == null || item.windowState !== ExpressCraft.WindowStateType.Minimized) {
                                RemoveList.add(item);
                            } else {
                                var ToIncrement = 3 + ExpressCraft.Helper.ToFloat(item.Width);

                                if (widthTotal + ToIncrement > viewSize.width) {
                                    widthTotal = 0;
                                    count = 0;
                                    y = (y + 33) | 0;
                                }

                                item.Location = new ExpressCraft.Vector2.$ctor1(widthTotal, "(100% - " + (((y + 2) | 0)) + "px)");

                                count = (count + 1) | 0;

                                widthTotal += ToIncrement;
                            }

                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }$t1 = Bridge.getEnumerator(RemoveList);
                    try {
                        while ($t1.moveNext()) {
                            var item1 = $t1.Current;
                            ExpressCraft.Form.MinimizedForms.remove(item1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    //Left = 0;
                    //Top = "calc(100% - 30px)";
                },
                ClearZIndex: function () {
                    var $t, $t1, $t2;
                    var x = ExpressCraft.Form.GetActiveFormCollection().FormOwner;
                    ExpressCraft.Form.WindowHolder.style.zIndex = "-" + ExpressCraft.Form.WindowHolder.childElementCount;
                    var Found = false;

                    for (var i = 0; i < ExpressCraft.Form.WindowHolder.childElementCount; i = (i + 1) | 0) {
                        if (Found || Bridge.referenceEquals(x.Content, ($t = ExpressCraft.Form.WindowHolder.children)[System.Array.index(i, $t)])) {
                            ($t1 = ExpressCraft.Form.WindowHolder.children)[System.Array.index(i, $t1)].style.zIndex = "";
                            Found = true;
                        } else {
                            ($t2 = ExpressCraft.Form.WindowHolder.children)[System.Array.index(i, $t2)].style.zIndex = (((((i - ExpressCraft.Form.WindowHolder.childElementCount) | 0) - 1) | 0)).toString();
                        }
                    }
                },
                ApplyZIndex: function () {
                    var $t;
                    ExpressCraft.Form.WindowHolder.style.zIndex = "";
                    for (var i = 0; i < ExpressCraft.Form.WindowHolder.childElementCount; i = (i + 1) | 0) {
                        ($t = ExpressCraft.Form.WindowHolder.children)[System.Array.index(i, $t)].style.zIndex = i.toString();
                    }
                },
                CalculateZOrder$1: function (formCollection, zIndex, frag) {
                    var TopMostForms = new (System.Collections.Generic.List$1(ExpressCraft.Form))();

                    var VisibleForms = formCollection.VisibleForms;
                    if (VisibleForms != null) {
                        for (var i = 0; i < VisibleForms.Count; i = (i + 1) | 0) {
                            if (VisibleForms.getItem(i).Content == null) {
                                ExpressCraft.Form.ToClean.add(VisibleForms.getItem(i));
                            } else {
                                if (VisibleForms.getItem(i).TopMost) {
                                    TopMostForms.add(VisibleForms.getItem(i));
                                }
                            }
                        }
                        for (var i1 = 0; i1 < ExpressCraft.Form.ToClean.Count; i1 = (i1 + 1) | 0) {
                            if (VisibleForms.contains(ExpressCraft.Form.ToClean.getItem(i1))) {
                                VisibleForms.remove(ExpressCraft.Form.ToClean.getItem(i1));
                                ExpressCraft.Form.ToClean.setItem(i1, null);
                            }
                        }

                        ExpressCraft.Form.ToClean.remove(null);

                        if (formCollection.FormOwner != null) {
                            if (ExpressCraft.Helper.NotDesktop) {
                                if (VisibleForms.Count === 0) {
                                    formCollection.FormOwner.ManagePlaceHolders();
                                    frag.appendChild(ExpressCraft.Control.op_Implicit(formCollection.FormOwner));
                                    return zIndex;
                                }
                            } else {
                                formCollection.FormOwner.ManagePlaceHolders();
                                frag.appendChild(ExpressCraft.Control.op_Implicit(formCollection.FormOwner));
                            }
                        }

                        for (var i2 = 0; i2 < TopMostForms.Count; i2 = (i2 + 1) | 0) {
                            var form = TopMostForms.getItem(i2);
                            VisibleForms.remove(form);
                            VisibleForms.add(form);
                        }
                        var length = VisibleForms.Count;
                        for (var i3 = 0; i3 < length; i3 = (i3 + 1) | 0) {
                            if (VisibleForms.getItem(i3) != null && VisibleForms.getItem(i3).Content != null) {
                                if (ExpressCraft.Helper.NotDesktop) {
                                    if (((length - 1) | 0) === i3) {
                                        VisibleForms.getItem(i3).ManagePlaceHolders();
                                        frag.appendChild(ExpressCraft.Control.op_Implicit(VisibleForms.getItem(i3)));
                                        return zIndex;
                                    }
                                } else {
                                    VisibleForms.getItem(i3).ManagePlaceHolders();
                                    frag.appendChild(ExpressCraft.Control.op_Implicit(VisibleForms.getItem(i3)));
                                }
                            }
                        }
                    }

                    return zIndex;
                },
                CalculateZOrder: function () {
                    ExpressCraft.Form.GetActiveFormCollection();

                    if (ExpressCraft.Form.FormCollections == null && ExpressCraft.Form.standAloneForms.VisibleForms.Count === 0) {
                        return;
                    }
                    ExpressCraft.Form.FormCollections.remove(null);
                    var count = ExpressCraft.Form.FormCollections.Count;
                    var zIndex = 1;

                    var frag = document.createDocumentFragment();

                    ExpressCraft.Form.FormOverLay.style.zIndex = count === 0 ? "" : count === 1 ? "0" : "0.4";

                    for (var x = 0; x < count; x = (x + 1) | 0) {
                        if (ExpressCraft.Helper.NotDesktop) {
                            if (x === ((count - 1) | 0)) {
                                frag.appendChild(ExpressCraft.Form.FormOverLay);
                                zIndex = ExpressCraft.Form.CalculateZOrder$1(ExpressCraft.Form.FormCollections.getItem(x), zIndex, frag);
                            }
                        } else {
                            if (x === ((count - 1) | 0)) {
                                frag.appendChild(ExpressCraft.Form.FormOverLay);
                            }
                            zIndex = ExpressCraft.Form.CalculateZOrder$1(ExpressCraft.Form.FormCollections.getItem(x), zIndex, frag);
                        }

                    }
                    zIndex = ExpressCraft.Form.CalculateZOrder$1(ExpressCraft.Form.standAloneForms, zIndex, frag);

                    ExpressCraft.Helper.Empty(ExpressCraft.Form.WindowHolder);
                    ExpressCraft.Form.WindowHolder.appendChild(frag);

                    if (ExpressCraft.Form.ActiveForm != null) {
                        ExpressCraft.Form.ActiveForm.Body.focus();
                    }
                }
            }
        },
        fields: {
            InDesign: false,
            PreviousSizeChange: false,
            PreviousMoveChange: false,
            PreviousShowMax: false,
            PreviousShowMin: false,
            PreviousOpacity: null,
            HasRemovedPlaceHolder: false,
            AllowSizeChange: false,
            AllowMoveChange: false,
            ForReuse: false,
            Self: null,
            _IsDialog: false,
            Children: null,
            StartPosition: 0,
            TopMost: false,
            DialogResult: 0,
            Heading: null,
            ButtonClose: null,
            ButtonExpand: null,
            ButtonMinimize: null,
            ButtonMenu: null,
            HeadingTitle: null,
            Body: null,
            BodyOverLay: null,
            prev_px: 0,
            prev_py: 0,
            prev_width: 0,
            prev_height: 0,
            prev_top: 0,
            prev_left: 0,
            MinWidth: 0,
            MinHeight: 0,
            windowState: 0,
            _prevwindowState: 0,
            previousDisplay: null,
            DialogResults: null,
            _seperateInstance: false,
            closeAction: null,
            InClose: false,
            InDialogResult: false
        },
        props: {
            HasSetup: {
                get: function () {
                    return ExpressCraft.Form._hasSetup;
                }
            },
            Controls: {
                get: function () {
                    return this.Body.children;
                }
            },
            ShowMinimize: {
                get: function () {
                    return this.ButtonMinimize != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Minimize, value);
                }
            },
            BodyStyle: {
                get: function () {
                    return this.Body.style;
                }
            },
            ShowClose: {
                get: function () {
                    return this.ButtonClose != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Close, value);
                }
            },
            ShowMaximize: {
                get: function () {
                    return this.ButtonExpand != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Maximize, value);
                }
            },
            ShowMenu: {
                get: function () {
                    return this.ButtonMenu != null;
                },
                set: function (value) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Menu, value);
                }
            },
            WindowState: {
                get: function () {
                    return this.windowState;
                },
                set: function (value) {
                    this.SetWindowState(value);
                }
            },
            Text: {
                get: function () {
                    return this.HeadingTitle.innerHTML;
                },
                set: function (value) {
                    this.HeadingTitle.innerHTML = value;
                }
            },
            BackColor: {
                get: function () {
                    return this.Body.style.backgroundColor;
                },
                set: function (value) {
                    this.Body.style.backgroundColor = value;
                }
            },
            ForeColor: {
                get: function () {
                    return this.Body.style.color;
                },
                set: function (value) {
                    this.Body.style.color = value;
                }
            }
        },
        ctors: {
            init: function () {
                this.InDesign = false;
                this.PreviousSizeChange = true;
                this.PreviousMoveChange = true;
                this.PreviousShowMax = true;
                this.PreviousShowMin = true;
                this.PreviousOpacity = "";
                this.AllowSizeChange = true;
                this.AllowMoveChange = true;
                this.ForReuse = false;
                this._IsDialog = false;
                this.Children = new (System.Collections.Generic.List$1(ExpressCraft.Control))();
                this.StartPosition = ExpressCraft.FormStartPosition.WindowsDefaultLocation;
                this.TopMost = false;
                this.DialogResult = ExpressCraft.DialogResultEnum.None;
                this.MinWidth = 200;
                this.MinHeight = 50;
                this._prevwindowState = ExpressCraft.WindowStateType.Normal;
                this.DialogResults = new (System.Collections.Generic.List$1(ExpressCraft.DialogResult))();
                this._seperateInstance = false;
                this.InClose = false;
                this.InDialogResult = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "form-base");
                this.Heading = ExpressCraft.Control.Div$1("form-heading");



                this.Heading.oncontextmenu = $asm.$.ExpressCraft.Form.f8;

                this.HeadingTitle = ExpressCraft.Control.Span$1("form-heading-title");

                this.Body = ExpressCraft.Control.Div$1("form-body");

                this.Body.oncontextmenu = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f16);

                this.BackColor = "#F0F0F0";

                this.BodyOverLay = ExpressCraft.Control.Div$1("form-body-overlay");

                this.BodyOverLay.style.opacity = ExpressCraft.Form.ShowBodyOverLay ? "0.5" : "0";

                this.ChangeHeadingButton(ExpressCraft.FormButtonType.Close);
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Maximize);
                    this.ChangeHeadingButton(ExpressCraft.FormButtonType.Minimize);
                }

                if (ExpressCraft.Helper.NotDesktop) {
                    this.Heading.style.height = "50px";
                    this.HeadingTitle.style.fontSize = "14px";

                    this.Body.style.top = "50px";
                    this.Body.style.height = "calc(100% - 50px)";

                    this.BodyOverLay.style.top = "50px";
                    this.BodyOverLay.style.height = "calc(100% - 50px)";
                }

                this.BodyOverLay.style.visibility = "collapse";

                this.Self = $(this.Content);

                this.Content.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f17));

                this.Heading.addEventListener("dblclick", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f18));

                this.Content.addEventListener("mouseleave", $asm.$.ExpressCraft.Form.f19);

                this.Body.addEventListener("mouseenter", $asm.$.ExpressCraft.Form.f20);

                this.Content.addEventListener("mousemove", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f21));

                this.Heading.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f22));

                this.Body.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f23));

                this.Body.addEventListener("mousemove", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f24));

                this.BodyOverLay.addEventListener("mousedown", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f25));

                this.Body.addEventListener("mouseleave", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f26));

                this.BodyOverLay.addEventListener("mouseenter", Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f27));

                $(this.Content).css("width", ExpressCraft.Form.Window_DefaultWidth).css("height", ExpressCraft.Form.Window_DefaultHeight);

                this.Content.appendChild(this.Heading);
                this.Content.appendChild(this.Body);
                this.Content.appendChild(this.BodyOverLay);

                this.Heading.appendChild(this.HeadingTitle);

                this.closeAction = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f28);

                this.Initialise();
            }
        },
        methods: {
            IsDialog: function () {
                return this._IsDialog;
            },
            LinkchildToForm: function (child) {
                if (child == null) {
                    return;
                }
                this.Children.add(child);
                child.LinkedForm = this;
            },
            LinkchildrenToForm: function (children) {
                if (children === void 0) { children = []; }
                if (children == null || children.length === 0) {
                    return;
                }
                this.Children.addRange(children);
                for (var i = 0; i < children.length; i = (i + 1) | 0) {
                    children[System.Array.index(i, children)].LinkedForm = this;
                }
            },
            AppendChild$1: function (node) {
                this.Body.appendChild(ExpressCraft.Control.op_Implicit(node));

                return this;
            },
            AppendChild: function (node) {
                this.Body.appendChild(node);

                return this;
            },
            AppendChildren$1: function (node) {
                if (node === void 0) { node = []; }
                ExpressCraft.Helper.AppendChildren$2(this.Body, node);

                return this;
            },
            AppendChildren: function (node) {
                if (node === void 0) { node = []; }
                ExpressCraft.Helper.AppendChildren$1(this.Body, node);

                return this;
            },
            ResizeChildren: function (parent) {
                if (!Bridge.staticEquals(this.OnResize, null)) {
                    this.OnResize(this);
                }
                this.OnResizing();

                for (var x = 0; x < parent.children.length; x = (x + 1) | 0) {
                    if (!parent.children[System.Array.index(x, parent.children)].classList.contains("control")) {
                        continue;
                    }
                    for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                        if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnResize, null)) {
                            if (Bridge.referenceEquals(this.Children.getItem(i).Content, parent.children[System.Array.index(x, parent.children)])) {
                                this.Children.getItem(i).OnResize(this.Children.getItem(i));
                                break;
                            }
                        }
                    }
                    this.ResizeChildren(parent.children[System.Array.index(x, parent.children)]);
                }
            },
            Resizing: function () {
                if (!Bridge.staticEquals(this.OnResize, null)) {
                    this.OnResize(this);
                }
                this.OnResizing();

                for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                    if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnResize, null)) {
                        this.Children.getItem(i).OnResize(this.Children.getItem(i));
                    }
                }
            },
            OnResizing: function () {

            },
            IsContentVisible: function () {
                return this.Content != null && Bridge.equals(this.Content.style.visibility, "visible");
            },
            ChangeHeadingButton: function (button, visible) {
                if (visible === void 0) { visible = true; }
                switch (button) {
                    case ExpressCraft.FormButtonType.Minimize: 
                        if (this.ButtonMinimize != null) {
                            ExpressCraft.Helper.Delete(this.ButtonMinimize);
                            this.ButtonMinimize = null;
                        }
                        if (visible) {
                            this.ButtonMinimize = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Maximize: 
                        if (this.ButtonExpand != null) {
                            ExpressCraft.Helper.Delete(this.ButtonExpand);
                            this.ButtonExpand = null;
                        }
                        if (visible) {
                            this.ButtonExpand = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Close: 
                        if (this.ButtonClose != null) {
                            ExpressCraft.Helper.Delete(this.ButtonClose);
                            this.ButtonClose = null;
                        }
                        if (visible) {
                            this.ButtonClose = this.CreateFormButton(button);
                        }
                        break;
                    case ExpressCraft.FormButtonType.Menu: 
                        if (this.ButtonMenu != null) {
                            ExpressCraft.Helper.Delete(this.ButtonMenu);
                            this.ButtonMenu = null;
                        }
                        if (visible) {
                            this.ButtonMenu = this.CreateFormButton(button);
                        }
                        break;
                    default: 
                        break;
                }

                this.CalculateButtonLocations();

            },
            Initialise: function () {

            },
            OnShowing: function () {

            },
            OnShowed: function () {

            },
            OnClosing: function () {

            },
            OnClosed: function () {

            },
            ShowBodyOverLayStyle: function () {
                if (this.BodyOverLay != null && Bridge.equals(this.BodyOverLay.style.visibility, "collapse")) {
                    if (this.InDesign) {
                        return;
                    }
                    this.BodyOverLay.style.visibility = "visible";
                }
            },
            OnGotFocus: function () {

            },
            OnLostFocus: function () {

            },
            SetWindowState: function (State) {
                if (State === this.windowState) {
                    return;
                }

                this._prevwindowState = this.windowState;

                if (this._prevwindowState === ExpressCraft.WindowStateType.Minimized) {
                    this.Body.style.opacity = this.PreviousOpacity;
                    this.AllowSizeChange = this.PreviousSizeChange;
                    this.AllowMoveChange = this.PreviousMoveChange;
                    this.ShowMaximize = this.PreviousShowMax;
                    this.ShowMinimize = this.PreviousShowMin;
                    this.HeadingTitle.style.left = "";
                    this.HeadingTitle.style.marginRight = "";
                    this.HeadingTitle.style.transform = "";


                    if (this.ButtonMinimize != null) {
                        this.ButtonMinimize.innerHTML = "-";
                    }
                    this.Heading.classList.remove("form-heading-min");

                    ExpressCraft.Form.MinimizedForms.remove(this);

                    this.Body.style.display = this.previousDisplay;

                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                if (!this.AllowSizeChange) {
                    return;
                }

                if (((this.windowState = State)) === ExpressCraft.WindowStateType.Normal) {
                    ExpressCraft.Helper.SetBounds(this, this.prev_left, this.prev_top, this.prev_width, this.prev_height);
                    this.Resizing();
                    this.Style.borderWidth = "1px";
                } else if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                    if (this._prevwindowState === ExpressCraft.WindowStateType.Normal) {
                        this.prev_left = ExpressCraft.Helper.ToInt(this.Left);
                        this.prev_top = ExpressCraft.Helper.ToInt(this.Top);
                        this.prev_width = ExpressCraft.Helper.ToInt(this.Width);
                        this.prev_height = ExpressCraft.Helper.ToInt(this.Height);
                    }

                    this.Style.borderWidth = "0";

                    ExpressCraft.Helper.SetBounds(this, 0, 0, "100%", "100%");
                } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                    this.PreviousSizeChange = this.AllowSizeChange;
                    this.PreviousMoveChange = this.AllowMoveChange;
                    this.PreviousOpacity = this.Body.style.opacity;
                    this.PreviousShowMax = this.ShowMaximize;
                    this.PreviousShowMin = this.ShowMinimize;

                    this.AllowSizeChange = false;
                    this.Body.style.opacity = "0";
                    this.ShowMaximize = false;
                    this.ShowMinimize = false;
                    this.AllowMoveChange = false;

                    if (this._prevwindowState === ExpressCraft.WindowStateType.Normal) {
                        this.prev_left = ExpressCraft.Helper.ToInt(this.Left);
                        this.prev_top = ExpressCraft.Helper.ToInt(this.Top);
                        this.prev_width = ExpressCraft.Helper.ToInt(this.Width);
                        this.prev_height = ExpressCraft.Helper.ToInt(this.Height);
                    } else {
                        this.Style.borderWidth = "1px";
                    }

                    this.HeadingTitle.style.marginRight = "0";
                    this.HeadingTitle.style.left = "3px";
                    this.HeadingTitle.style.transform = "translate(0, -50%)";

                    var offset = (this.ShowClose ? 45.5 : 0);

                    this.Width = Math.max(ExpressCraft.Control.GetTextWidth(this.Text, "10pt Tahoma") + 32, 100) + offset;
                    this.Height = 30;

                    this.Heading.classList.add("form-heading-min");

                    if (this.ButtonMinimize != null) {
                        this.ButtonMinimize.innerHTML = "+";
                    }

                    this.previousDisplay = this.Body.style.display;
                    this.Body.style.display = "none";

                    ExpressCraft.Form.MinimizedForms.add(this);

                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                this.Resizing();
            },
            changeWindowState: function () {
                if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                    this.SetWindowState(ExpressCraft.WindowStateType.Normal);
                } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                    this.SetWindowState(this._prevwindowState);
                } else {
                    this.SetWindowState(ExpressCraft.WindowStateType.Maximized);
                }
            },
            CalculateButtonLocations: function () {
                var RightOffset = 0;
                var append = 45.5;

                if (ExpressCraft.Helper.NotDesktop) {
                    append = 65.5;
                }

                if (this.ShowClose) {
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.ButtonClose.style.left = "calc(100% - " + System.Single.format(append) + "px)";
                    }
                    RightOffset += append;
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonClose)) {
                        this.Heading.appendChild(this.ButtonClose);
                    }
                }

                if (this.ShowMaximize) {
                    RightOffset += append;
                    this.ButtonExpand.style.left = "calc(100% - " + System.Single.format(RightOffset) + "px)";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonExpand)) {
                        this.Heading.appendChild(this.ButtonExpand);
                    }
                }
                if (this.ShowMinimize) {
                    RightOffset += append;
                    this.ButtonMinimize.style.left = "calc(100% - " + System.Single.format(RightOffset) + "px)";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonMinimize)) {
                        this.Heading.appendChild(this.ButtonMinimize);
                    }
                }

                if (this.ShowMenu) {
                    this.ButtonMenu.style.left = "0";
                    if (!System.Linq.Enumerable.from(this.Heading.children).contains(this.ButtonMenu)) {
                        this.Heading.appendChild(this.ButtonMenu);
                    }
                }
            },
            CreateFormButton: function (Type) {
                var butt = ExpressCraft.Control.Div$1("form-heading-button");

                switch (Type) {
                    case ExpressCraft.FormButtonType.Close: 
                        butt.classList.add("form-heading-button-close");
                        butt.innerHTML = "&times;";
                        butt.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f29);
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f30);
                        break;
                    case ExpressCraft.FormButtonType.Maximize: 
                        butt.innerHTML = "&#9633;";
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f31);
                        break;
                    case ExpressCraft.FormButtonType.Minimize: 
                        butt.innerHTML = "-";
                        butt.onmouseup = Bridge.fn.bind(this, function (ev) {
                            if (ExpressCraft.Form.MovingForm != null) {
                                return;
                            }

                            ev.stopPropagation();
                            ev.preventDefault();

                            if (Bridge.referenceEquals(butt.innerHTML, "-")) {
                                butt.innerHTML = "+";
                                this.WindowState = ExpressCraft.WindowStateType.Minimized;

                            } else {
                                this.WindowState = this._prevwindowState === ExpressCraft.WindowStateType.Minimized ? ExpressCraft.WindowStateType.Normal : this._prevwindowState;
                                butt.innerHTML = "-";
                            }

                            ExpressCraft.Form.Mouse_Down = false;
                        });
                        break;
                    case ExpressCraft.FormButtonType.Restore: 
                        break;
                    case ExpressCraft.FormButtonType.Help: 
                        break;
                    default: 
                        butt.onmouseup = $asm.$.ExpressCraft.Form.f32;
                        break;
                    case ExpressCraft.FormButtonType.Menu: 
                        butt.innerHTML = "&#9776;";
                        butt.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f33);
                        break;
                }

                butt.onmouseenter = $asm.$.ExpressCraft.Form.f34;

                butt.ondblclick = $asm.$.ExpressCraft.Form.f35;

                butt.onmousemove = $asm.$.ExpressCraft.Form.f36;

                if (Type !== ExpressCraft.FormButtonType.Close) {
                    butt.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.Form.f37);
                }

                if (ExpressCraft.Helper.NotDesktop) {
                    butt.style.width = "65px";
                    butt.style.height = "49px";
                    butt.style.fontSize = "16pt";
                    butt.style.lineHeight = "49px";
                    ExpressCraft.Helper.ExchangeClass(butt, "primary", "primary");
                    butt.style.filter = "brightness(110%)";
                }

                return butt;
            },
            OnMenuClick: function () {

            },
            TitleBarHeight: function () {
                return this.Heading.clientHeight;
            },
            TitleBarWidth: function () {
                return this.Heading.clientWidth;
            },
            ClientX: function () {
                return this.Body.clientLeft;
            },
            ClientY: function () {
                return this.Body.clientTop;
            },
            GetFormCollectionFromForm: function (form) {
                if (form._seperateInstance) {
                    var visibleForms = ExpressCraft.Form.standAloneForms.VisibleForms;
                    for (var x = 0; x < visibleForms.Count; x = (x + 1) | 0) {
                        if (Bridge.referenceEquals(visibleForms.getItem(x), this)) {
                            return ExpressCraft.Form.standAloneForms;
                        }
                    }
                } else {
                    for (var i = 0; i < ExpressCraft.Form.FormCollections.Count; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(this, ExpressCraft.Form.FormCollections.getItem(i).FormOwner)) {
                            return ExpressCraft.Form.FormCollections.getItem(i);
                        }
                        var visibleForms1 = ExpressCraft.Form.FormCollections.getItem(i).VisibleForms;
                        for (var x1 = 0; x1 < visibleForms1.Count; x1 = (x1 + 1) | 0) {
                            if (Bridge.referenceEquals(visibleForms1.getItem(x1), this)) {
                                return ExpressCraft.Form.FormCollections.getItem(i);
                            }
                        }
                    }
                }

                return null;
            },
            IsActiveFormCollection: function () {
                if (this._seperateInstance) {
                    return Bridge.referenceEquals(this.GetFormCollectionFromForm(this), ExpressCraft.Form.standAloneForms);
                } else {
                    return Bridge.referenceEquals(this.GetFormCollectionFromForm(this), ExpressCraft.Form.GetActiveFormCollection());
                }
            },
            IsVisible: function () {
                return this.GetFormCollectionFromForm(this) != null;
            },
            ShowStartNewLevel: function () {
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                if (this.IsVisible()) {
                    // Already Open???
                    throw new System.Exception("Invalid request to open form as a dialog that is already visible!");
                }

                ExpressCraft.Form.FormCollections.add(new ExpressCraft.FormCollection(this));

                ExpressCraft.Form.CalculateZOrder();

                if (this.StartPosition === ExpressCraft.FormStartPosition.Center) {
                    this.CentreForm();
                }

                this.OnShowed();

                this.Body.focus();

                ExpressCraft.Form.ActiveForm = this;
            },
            ShowDialog: function (dialogResults) {
                if (dialogResults === void 0) { dialogResults = []; }
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                this.InDialogResult = false;

                if (this.ButtonMinimize != null) {
                    ExpressCraft.Helper.Delete(this.ButtonMinimize);
                }
                if (this.ButtonExpand != null) {
                    ExpressCraft.Helper.Delete(this.ButtonExpand);
                }
                if (this.ButtonClose != null) {
                    ExpressCraft.Helper.Delete(this.ButtonClose);
                }

                this._IsDialog = true;
                if (this.StartPosition !== ExpressCraft.FormStartPosition.Manual) {
                    if (!ExpressCraft.Helper.NotDesktop) {
                        this.StartPosition = ExpressCraft.FormStartPosition.Center;
                    }
                }
                this.ShowStartNewLevel();

                if (dialogResults != null && dialogResults.length > 0) {
                    this.DialogResults.addRange(dialogResults);
                }
            },
            MinZero$1: function (input) {
                return input < 0 ? 0 : input;
            },
            MinZero: function (input) {
                return input < 0 ? 0 : input;
            },
            CentreForm: function () {
                if (ExpressCraft.Form.WindowHolder == null) {
                    return;
                }

                this.Self.css("left", this.MinZero((((((Bridge.Int.div(ExpressCraft.Form.WindowHolder.clientWidth, 2)) | 0)) - (((Bridge.Int.div(parseInt(ExpressCraft.Helper.ToHtmlValue(this.Width)), 2)) | 0))) | 0))).css("top", this.MinZero((((((Bridge.Int.div(ExpressCraft.Form.WindowHolder.clientHeight, 2)) | 0)) - (((Bridge.Int.div(parseInt(ExpressCraft.Helper.ToHtmlValue(this.Height)), 2)) | 0))) | 0)));
            },
            Render: function () {
                if (!this.HasRendered) {
                    ExpressCraft.Control.prototype.Render.call(this);
                    this.OnShowing();
                    this.Shown();
                }
            },
            Shown: function () {
                this.InClose = false;
                if (this.Children == null) {
                    return;
                }
                for (var i = 0; i < this.Children.Count; i = (i + 1) | 0) {
                    if (this.Children.getItem(i) != null && !Bridge.staticEquals(this.Children.getItem(i).OnLoaded, null)) {
                        this.Children.getItem(i).OnLoaded(this.Children.getItem(i));
                    }
                }
                this.Children.remove(null);
            },
            Show: function (seperateInstance) {
                if (seperateInstance === void 0) { seperateInstance = false; }
                if (!this.HasSetup) {
                    ExpressCraft.Form.Setup();
                }

                if (this._IsDialog) {
                    return;
                }
                this._seperateInstance = seperateInstance;
                if (!seperateInstance && (ExpressCraft.Form.FormCollections == null || ExpressCraft.Form.FormCollections.Count === 0)) {
                    this.ShowStartNewLevel();
                    return;
                }

                var activeCollect = !seperateInstance ? ExpressCraft.Form.GetActiveFormCollection() : ExpressCraft.Form.standAloneForms;
                var visbileForms = activeCollect.VisibleForms;

                if (!visbileForms.contains(this)) {
                    visbileForms.add(this);

                    this.Content.style.visibility = "visible";

                    ExpressCraft.Form.CalculateZOrder();

                    if (this.StartPosition !== ExpressCraft.FormStartPosition.Manual && this.windowState === ExpressCraft.WindowStateType.Normal) {
                        if (this.StartPosition === ExpressCraft.FormStartPosition.Center || (activeCollect == null || visbileForms == null || visbileForms.Count === 0 || visbileForms.getItem(((visbileForms.Count - 1) | 0)).windowState !== ExpressCraft.WindowStateType.Normal || visbileForms.getItem(((visbileForms.Count - 1) | 0)).Content == null)) {
                            this.CentreForm();

                        } else if (this.StartPosition === ExpressCraft.FormStartPosition.WindowsDefaultLocation) {
                            var obj = visbileForms.getItem(((visbileForms.Count - 1) | 0));

                            var x = Bridge.box(parseInt(ExpressCraft.Helper.ToHtmlValue(obj.Left)), System.Int32);
                            var y = Bridge.box(parseInt(ExpressCraft.Helper.ToHtmlValue(obj.Top)), System.Int32);

                            if (isNaN(Bridge.unbox(x))) {
                                x = Bridge.box(0, System.Int32);
                            }
                            if (isNaN(Bridge.unbox(y))) {
                                y = Bridge.box(0, System.Int32);
                            }

                            var rec = ExpressCraft.Form.WindowHolder.getBoundingClientRect();

                            var pw25 = rec.width * 0.15;
                            var ph25 = rec.height * 0.15;

                            var pw75 = rec.width * 0.55;
                            var ph75 = rec.height * 0.55;

                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) < pw25) {
                                x = Bridge.box(Bridge.Int.clip32(pw25), System.Int32);
                            }
                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) < ph25) {
                                y = Bridge.box(Bridge.Int.clip32(ph25), System.Int32);
                            }

                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) > pw75) {
                                x = Bridge.box(Bridge.Int.clip32(pw25), System.Int32);
                            }
                            if (System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) > ph75) {
                                y = Bridge.box(Bridge.Int.clip32(ph25), System.Int32);
                            }
                            x = Bridge.box((System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)) + 10) | 0, System.Int32);
                            y = Bridge.box((System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32)) + 10) | 0, System.Int32);

                            this.Self.css("left", this.MinZero(System.Nullable.getValue(Bridge.cast(Bridge.unbox(x), System.Int32)))).css("top", this.MinZero(System.Nullable.getValue(Bridge.cast(Bridge.unbox(y), System.Int32))));
                        }
                    }

                    this.Body.focus();

                    this.OnShowed();
                }

                ExpressCraft.Form.ActiveForm = this;
            },
            BringToFront: function () {
                var activeCollect = ExpressCraft.Form.GetActiveFormCollection();
                if (activeCollect != null) {
                    if (Bridge.referenceEquals(activeCollect.FormOwner, this)) {
                        return;
                    }
                    var visibleForms = activeCollect.VisibleForms;
                    if (visibleForms != null && visibleForms.Count > 1) {
                        visibleForms.remove(this);
                        visibleForms.add(this);
                    }

                    ExpressCraft.Form.CalculateZOrder();
                }
            },
            SetZIndex: function (zIndex) {
                this.Content.style.zIndex = (Bridge.identity(zIndex.v, (zIndex.v = (zIndex.v + 1) | 0))).toString();
            },
            ManagePlaceHolders: function () {
                if (!ExpressCraft.Settings.RemoveAttributesOffElementsWhenLoseFocus) {
                    return;
                }

                var shouldHidePlaceholders = !Bridge.referenceEquals(ExpressCraft.Form.ActiveForm, this);

                if (shouldHidePlaceholders !== this.HasRemovedPlaceHolder) {
                    this.HasRemovedPlaceHolder = shouldHidePlaceholders;
                    var que = new (System.Collections.Generic.Queue$1(HTMLElement)).ctor();
                    que.enqueue(this.Body);

                    while (que.Count > 0) {
                        var element = que.dequeue();
                        if (shouldHidePlaceholders) {
                            var a = element.getAttribute("placeholder");
                            if (!System.String.isNullOrWhiteSpace(a)) {
                                element.removeAttribute("placeholder");
                                element.setAttribute("data-placeholder", a);
                            }
                        } else {
                            var a1 = element.getAttribute("data-placeholder");
                            if (!System.String.isNullOrWhiteSpace(a1)) {
                                element.removeAttribute("data-placeholder");
                                element.setAttribute("placeholder", a1);
                            }
                        }
                        var length = element.childElementCount;
                        if (length > 0) {
                            for (var i = 0; i < length; i = (i + 1) | 0) {
                                que.enqueue(element.children[System.Array.index(i, element.children)]);
                            }
                        }
                    }
                }
            },
            Close: function () {
                if (this._IsDialog && this.InDialogResult) {
                    return;
                }

                this.InClose = true;

                this.OnClosing();

                ExpressCraft.Form.ToClean.add(this);

                var ownerFormCollection = this.GetFormCollectionFromForm(this);

                if (ownerFormCollection != null) {
                    if (Bridge.referenceEquals(ownerFormCollection.FormOwner, this)) {
                        ownerFormCollection.FormOwner = null;
                        for (var i = 0; i < ownerFormCollection.VisibleForms.Count; i = (i + 1) | 0) {
                            if (Bridge.referenceEquals(ownerFormCollection.VisibleForms.getItem(i), this)) {
                                continue;
                            }
                            ownerFormCollection.VisibleForms.getItem(i).Close();
                        }
                        if (ExpressCraft.Form.FormCollections.Count === 1) {
                            ExpressCraft.Form.FormCollections = new (System.Collections.Generic.List$1(ExpressCraft.FormCollection))();
                        }
                    } else {
                        ownerFormCollection.VisibleForms.remove(this);
                    }
                }

                if (this.Content != null) {
                    if (!this.ForReuse) {
                        if (ExpressCraft.Settings.FormFadeDuration > 0) {
                            this.Self.fadeOut(ExpressCraft.Settings.FormFadeDuration, this.closeAction);
                        } else {
                            this.closeAction();
                        }
                    } else {
                        this.Content.style.visibility = "collapse";
                    }
                }

                ExpressCraft.Form.CalculateZOrder();

                ExpressCraft.Form.ActiveForm = ExpressCraft.Form._PrevActiveForm;
                if (this._IsDialog) {
                    this.InDialogResult = true;
                    if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.DialogResults != null && this.DialogResults.Count > 0) {
                        for (var i1 = 0; i1 < this.DialogResults.Count; i1 = (i1 + 1) | 0) {
                            this.DialogResults.getItem(i1).InvokeIfResult(this.DialogResult);
                        }
                    }
                }

                this.OnClosed();

                if (this.WindowState === ExpressCraft.WindowStateType.Minimized) {
                    ExpressCraft.Form.MinimizedForms.remove(this);
                    ExpressCraft.Form.CalculateMinmizedFormsLocation();
                }

                this.InClose = false;
            }
        }
    });

    Bridge.ns("ExpressCraft.Form", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.Form, {
        f1: function () {
            if (ExpressCraft.Form._activeToolTipControl != null) {
                ExpressCraft.Form._activeToolTipControl.Close();
                ExpressCraft.Form._activeToolTipControl = null;
            }
        },
        f2: function (ev) {
            ev.preventDefault();
        },
        f3: function (ev) {
            if (System.Linq.Enumerable.from(document.body.childNodes).contains(ExpressCraft.Form.WindowHolder)) {
                document.body.removeChild(ExpressCraft.Form.WindowHolder);
            }
        },
        f4: function (ev) {
            if (!System.Linq.Enumerable.from(document.body.childNodes).contains(ExpressCraft.Form.WindowHolder)) {
                document.body.appendChild(ExpressCraft.Form.WindowHolder);
            }
        },
        f5: function (ev) {
            ev.preventDefault();
            ev.stopPropagation();
        },
        f6: function (ev) {
            if (Bridge.is(ExpressCraft.Form.ActiveForm, ExpressCraft.FormPopup)) {
                ExpressCraft.Form.CloseFormPopups();
            }

            if (document.activeElement != null) {
                //FormPopup
                document.activeElement.focus();
                ev.preventDefault();
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f7: function (ev) {

            ExpressCraft.Form.PerformFocusShake();
        },
        f8: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f9: function (ev) {
            if (ExpressCraft.Settings.OnF2ShowThemeForm && ev.keyCode === ExpressCraft.KeyCodes.F2) {
                ev.preventDefault();
                ExpressCraft.ThemeForm.ShowThemeForm();
            }
        },
        f10: function (ev) {
            if (ExpressCraft.Form.FormCollections == null) {
                return;
            }

            for (var i = 0; i < ExpressCraft.Form.FormCollections.Count; i = (i + 1) | 0) {
                if (ExpressCraft.Form.FormCollections.getItem(i) == null) {
                    continue;
                }
                var fc = ExpressCraft.Form.FormCollections.getItem(i);
                if (fc.FormOwner != null) {
                    fc.FormOwner.Resizing();
                }
                for (var x = 0; x < fc.VisibleForms.Count; x = (x + 1) | 0) {
                    if (fc.VisibleForms.getItem(x) != null) {
                        fc.VisibleForms.getItem(x).Resizing();
                    }
                }
            }

            ExpressCraft.Form.CalculateMinmizedFormsLocation();
        },
        f11: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            var mev = ev;

            if (ExpressCraft.Form.MovingForm != null) {
                ev.preventDefault();
                ev.stopImmediatePropagation();
                ev.stopPropagation();

                if (Bridge.equals(ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility, "collapse")) {
                    if (ExpressCraft.Form.MovingForm.InDesign) {
                        ExpressCraft.Form._ActiveForm.BodyOverLay.style.visibility = "collapse";
                    } else {
                        ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility = "visible";
                    }

                    ExpressCraft.Form.MovingForm.Heading.focus();
                }

                var mousePos = ExpressCraft.Helper.GetClientMouseLocation(ev);

                var mX;
                var mY;

                var newX = (((mX = mousePos.Xf)) + ExpressCraft.Form.MovingForm.prev_px);
                var newY = (((mY = mousePos.Yf)) + ExpressCraft.Form.MovingForm.prev_py);

                if (ExpressCraft.Form.MovingForm.windowState === ExpressCraft.WindowStateType.Maximized && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                    ExpressCraft.Form.MovingForm.changeWindowState();
                    newX = mousePos.Xf - (((Bridge.Int.div(ExpressCraft.Form.MovingForm.prev_width, 2)) | 0));
                    ExpressCraft.Form.MovingForm.prev_px = newX - mousePos.Xf;
                }

                var x = parseFloat(ExpressCraft.Form.MovingForm.Style.left);
                var y = parseFloat(ExpressCraft.Form.MovingForm.Style.top);
                var w = parseFloat(ExpressCraft.Form.MovingForm.Style.width);
                var h = parseFloat(ExpressCraft.Form.MovingForm.Style.height);

                var px = x;
                var py = y;
                var pw = w;
                var ph = h;

                if (newY < 1) {
                    newY = 1;
                }
                if (newX < 1) {
                    newX = 1;
                }

                if (mX < 1) {
                    mX = 1;
                }
                if (mY < 1) {
                    mY = 1;
                }

                switch (ExpressCraft.Form.MoveAction) {
                    case ExpressCraft.MouseMoveAction.Move: 
                        x = newX;
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopLeftResize: 
                        w -= newX - x;
                        h -= newY - y;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        x = newX;
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopResize: 
                        h -= newY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.TopRightResize: 
                        h -= newY - y;
                        w = mX - x;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            newY -= ExpressCraft.Form.MovingForm.MinHeight - h;
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        y = newY;
                        break;
                    case ExpressCraft.MouseMoveAction.LeftResize: 
                        w -= newX - x;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        x = newX;
                        break;
                    case ExpressCraft.MouseMoveAction.BottomLeftResize: 
                        w -= newX - x;
                        h = mY - y;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            newX -= ExpressCraft.Form.MovingForm.MinWidth - w;
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        x = newX;
                        break;
                    case ExpressCraft.MouseMoveAction.BottomResize: 
                        h = mY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        break;
                    case ExpressCraft.MouseMoveAction.RightResize: 
                        w = mX - x;
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        break;
                    case ExpressCraft.MouseMoveAction.BottomRightResize: 
                        w = mX - x;
                        h = mY - y;
                        if (h < ExpressCraft.Form.MovingForm.MinHeight) {
                            h = ExpressCraft.Form.MovingForm.MinHeight;
                        }
                        if (w < ExpressCraft.Form.MovingForm.MinWidth) {
                            w = ExpressCraft.Form.MovingForm.MinWidth;
                        }
                        break;
                }
                var changed = false;
                if (px !== x) {
                    ExpressCraft.Form.MovingForm.Style.left = x + 'px';
                }
                if (py !== y) {
                    ExpressCraft.Form.MovingForm.Style.top = y + 'px';
                }
                if (pw !== w && ((changed = true))) {
                    ExpressCraft.Form.MovingForm.Style.width = w + 'px';
                }
                if (ph !== h && ((changed = true))) {
                    ExpressCraft.Form.MovingForm.Style.height = h + 'px';
                }

                if (changed) {
                    ExpressCraft.Form.MovingForm.Resizing();
                }
            }
        },
        f12: function (ev) {
            ExpressCraft.Form.InExternalMouseEvent = false;
            if (ExpressCraft.Form.MovingForm != null) {
                ExpressCraft.Form.MovingForm.BodyOverLay.style.visibility = "collapse";
            }

            ExpressCraft.Form.MovingForm = null;
            ExpressCraft.Form.Mouse_Down = false;
            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            ExpressCraft.Form.SetCursor("default");
        },
        f13: function (ev) {
            if (!ExpressCraft.Settings.AllowCloseWithoutQuestion) {
                return 'Would you like to close this application?';
            }
        },
        f14: function (ev) {
            if (!Bridge.staticEquals(ExpressCraft.Settings.OnApplicationClose, null)) {
                ExpressCraft.Settings.OnApplicationClose();
            }
        },
        f15: function (message, url, lineNumber, columnNumber, error) {
            if (ExpressCraft.Form.InErrorDialog) {
                return false;
            }
            try {
                ExpressCraft.Form.InErrorDialog = true;
                var errStr;
                if (System.String.isNullOrWhiteSpace(message) || Bridge.referenceEquals(message, "Script error.")) {
                    errStr = "Script Error: See Browser Console for Detail's";
                } else {
                    errStr = System.String.concat("Script Error: ", message);
                }

                if (ExpressCraft.Application.AplicationDefition === ExpressCraft.ApplicationDefitnion.ExpressCraftConsole) {
                    ExpressCraft.ConsoleForm.Log(errStr, ExpressCraft.ConsoleLogType.Error);
                }

                if (ExpressCraft.Settings.ShowExceptionDialog) {
                    var msgBox = new ExpressCraft.MessageBoxForm.ctor(errStr, ExpressCraft.MessageBoxLayout.Error);
                    msgBox.ShowDialog();
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);

            }
            finally {
                ExpressCraft.Form.InErrorDialog = false;
            }

            return false;
        },
        f16: function (ev) {
            if (Bridge.referenceEquals(ev.target, this.Body)) {
                ev.stopPropagation();
                ev.preventDefault();
            }
        },
        f17: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }
            var mev = ev;

            mev.stopPropagation();
            mev.stopImmediatePropagation();

            if (!this.IsActiveFormCollection()) {
                return;
            }

            ExpressCraft.Form.Mouse_Down = true;

            ExpressCraft.Form.MovingForm = this;
            ExpressCraft.Form.ActiveForm = this;

            ExpressCraft.Form.SetBodyOverLay();

            var clientRec = this.Content.getBoundingClientRect();

            var mousePos = ExpressCraft.Helper.GetClientMouseLocation(ev);

            this.prev_px = clientRec.left - mousePos.Xf;
            this.prev_py = clientRec.top - mousePos.Yf;

            var width = clientRec.width;
            var height = clientRec.height;

            var X = mousePos.Xf - clientRec.left;
            var Y = mousePos.Yf - clientRec.top;

            if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            } else if (this.windowState === ExpressCraft.WindowStateType.Minimized) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.None;
                this.changeWindowState();
            } else {
                if (this.InDesign) {
                    return;
                }

                if (this.HeadingTitle != null && Bridge.referenceEquals(ev.target, this.HeadingTitle)) {
                    ExpressCraft.Form.SetCursor("default");
                    ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
                } else {
                    if (this.AllowSizeChange) {
                        if (X <= ExpressCraft.Form.ResizeCorners && Y <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nwse-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopLeftResize;
                        } else if (Y <= ExpressCraft.Form.ResizeCorners && X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nesw-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopRightResize;
                        } else if (Y <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("n-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.TopResize;
                        } else if (X <= ExpressCraft.Form.ResizeCorners && Y >= height - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nesw-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomLeftResize;
                        } else if (Y >= height - ExpressCraft.Form.ResizeCorners && X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("nwse-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomRightResize;
                        } else if (Y >= height - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("s-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.BottomResize;
                        } else if (X <= ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("w-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.LeftResize;

                        } else if (X >= width - ExpressCraft.Form.ResizeCorners) {
                            ExpressCraft.Form.SetCursor("e-resize");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.RightResize;
                        } else {
                            ExpressCraft.Form.SetCursor("default");
                            ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
                        }
                    }
                }
            }

            if (!this.AllowMoveChange && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                ExpressCraft.Form.SetCursor("default");
                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.None;
            }
        },
        f18: function (ev) {
            if (this.AllowSizeChange) {
                this.changeWindowState();
            }

            ev.preventDefault();
            ev.stopPropagation();
        },
        f19: function (ev) {
            if (ExpressCraft.Form.MovingForm == null) {
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f20: function (ev) {
            ExpressCraft.Form.SetCursor("default");
        },
        f21: function (ev) {


            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            if (Bridge.referenceEquals(ev.target, this.HeadingTitle)) {
                return;
            }
            var mev = ev;

            var width = this.Content.clientWidth;
            var height = this.Content.clientHeight;
            var X = (mev.pageX - this.Content.offsetLeft) | 0;
            var Y = (mev.pageY - this.Content.offsetTop) | 0;

            if (ExpressCraft.Form.MovingForm != null && ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.Move) {
                ExpressCraft.Form.SetCursor("default");
                return;
            } else if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.SetCursor("default");
                return;
            }
            if (this.InDesign) {
                return;
            }

            if (this.AllowSizeChange) {
                if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopLeftResize || X <= ExpressCraft.Form.ResizeCorners && Y <= ExpressCraft.Form.ResizeCorners) {
                    ExpressCraft.Form.SetCursor("nwse-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopRightResize || Y <= ExpressCraft.Form.ResizeCorners && X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nesw-resize");
                } else if (Y <= ExpressCraft.Form.ResizeCorners || ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.TopResize) {
                    ExpressCraft.Form.SetCursor("n-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomLeftResize || X <= ExpressCraft.Form.ResizeCorners && Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nesw-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomRightResize || Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0) && X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("nwse-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.BottomResize || Y >= ((height - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("s-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.LeftResize || X <= ExpressCraft.Form.ResizeCorners) {
                    ExpressCraft.Form.SetCursor("w-resize");
                } else if (ExpressCraft.Form.MoveAction === ExpressCraft.MouseMoveAction.RightResize || X >= ((width - ExpressCraft.Form.ResizeCorners) | 0)) {
                    ExpressCraft.Form.SetCursor("e-resize");
                } else {
                    ExpressCraft.Form.SetCursor("default");
                }
            } else {
                ExpressCraft.Form.SetCursor("default");
            }

        },
        f22: function (ev) {
            ExpressCraft.Form.SetBodyOverLay();
            if (!this.IsActiveFormCollection()) {
                return;
            }

            if (this.windowState === ExpressCraft.WindowStateType.Maximized) {
                ExpressCraft.Form.MovingForm = this;
                ExpressCraft.Form.SetCursor("default");

                ExpressCraft.Form.MoveAction = ExpressCraft.MouseMoveAction.Move;
            } else {
                ExpressCraft.Form.MovingForm = this;
            }

            ExpressCraft.Form.ActiveForm = this;
        },
        f23: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }
            if (!this.IsActiveFormCollection()) {
                return;
            }

            ExpressCraft.Form.ActiveForm = this;
            ExpressCraft.Form.MovingForm = null;
            ev.stopPropagation();
        },
        f24: function (ev) {
            if (ExpressCraft.Form.InExternalMouseEvent) {
                return;
            }

            if (ExpressCraft.Form.MovingForm == null) {
                if (!this.IsActiveFormCollection()) {
                    return;
                }
                ev.stopPropagation();
            }
        },
        f25: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }
            if (!this.IsActiveFormCollection()) {
                return;
            }
            this.BodyOverLay.style.visibility = "collapse";
            ExpressCraft.Form.ActiveForm = this;
        },
        f26: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }

            if (ExpressCraft.Form.MovingForm == null) {
                ExpressCraft.Form.SetBodyOverLay();
            }
        },
        f27: function (ev) {
            if (this.InDesign) {
                this.BodyOverLay.style.visibility = "collapse";
                return;
            }
            if (ExpressCraft.Form.MovingForm == null && this.IsActiveFormCollection()) {
                ExpressCraft.Form.SetCursor("default");
                this.BodyOverLay.style.visibility = "collapse";
            } else {
                this.BodyOverLay.style.visibility = "visible";
            }
        },
        f28: function () {
            ExpressCraft.Helper.Empty(this.Content);
            if (this.Content != null) {
                ExpressCraft.Helper.Delete(this.Content);
                this.Content = null;
            }
        },
        f29: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }
            ExpressCraft.Form.Mouse_Down = true;

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.ActiveForm = this;
        },
        f30: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            if (this.InDesign) {
                return;
            }

            this.Close();
        },
        f31: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;

            this.changeWindowState();
        },
        f32: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;
        },
        f33: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.Mouse_Down = false;

            this.OnMenuClick();
        },
        f34: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }
            ExpressCraft.Form.SetCursor("default");
        },
        f35: function (ev) {
            ev.stopPropagation();
        },
        f36: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ev.stopImmediatePropagation();
            ev.preventDefault();
        },
        f37: function (ev) {
            if (ExpressCraft.Form.MovingForm != null) {
                return;
            }

            ExpressCraft.Form.Mouse_Down = true;

            ev.stopPropagation();
            ev.preventDefault();

            ExpressCraft.Form.ActiveForm = this;
        }
    });

    Bridge.define("ExpressCraft.CalculatorControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            DisplayInput: null,
            btnClose: null,
            btnBack: null,
            btnCE: null,
            btnC: null,
            btnPTAX: null,
            btnMTAX: null,
            btnTAX: null,
            btnDbl: null,
            btn7: null,
            btn8: null,
            btn9: null,
            btnDiv: null,
            btnSqrt: null,
            btn4: null,
            btn5: null,
            btn6: null,
            btnMul: null,
            btnPer: null,
            btn1: null,
            btn2: null,
            btn3: null,
            btnMinus: null,
            btn1OverX: null,
            btn0: null,
            btnplusOrNeg: null,
            btnDot: null,
            btnPlus: null,
            btnEq: null,
            Value: System.Decimal(0.0),
            _commands: null,
            current_command: null,
            OnEqual: null,
            OnClose: null,
            DontRefresh: false
        },
        ctors: {
            init: function () {
                this._commands = new (System.Collections.Generic.List$1(System.String))();
                this.current_command = "";
                this.DontRefresh = false;
            },
            ctor: function (startingValue, CloseButtonVisible) {
                if (CloseButtonVisible === void 0) { CloseButtonVisible = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                var $t;
                this.Value = startingValue;

                this.current_command = this.Value.toString();

                var doc = document.createDocumentFragment();

                var AddHeight = (ExpressCraft.Helper.NotDesktop ? 45 : 22);

                //27.77778

                doc.appendChild(((this.DisplayInput = ($t = new ExpressCraft.MemoInput(), $t.Readonly = true, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 4, "(100% - 8px)", AddHeight), $t))).Content);

                if (ExpressCraft.Helper.NotDesktop) {
                    this.DisplayInput.Style.fontSize = "14px";
                    this.DisplayInput.Height = 45;
                }

                var buttons = new (System.Collections.Generic.List$1(ExpressCraft.SimpleButton))();

                buttons.addRange(System.Array.init([(this.btnPTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn7 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "7", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn8 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "8", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn9 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "9", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnDiv = ($t = new ExpressCraft.SimpleButton(), $t.Text = "/", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnSqrt = ($t = new ExpressCraft.SimpleButton(), $t.Text = "sqrt", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnMTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "-TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn4 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "4", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn5 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "5", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn6 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "6", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnMul = ($t = new ExpressCraft.SimpleButton(), $t.Text = "*", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnPer = ($t = new ExpressCraft.SimpleButton(), $t.Text = "%", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnTAX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "TAX", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn1 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "1", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn2 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "2", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btn3 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "3", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnMinus = ($t = new ExpressCraft.SimpleButton(), $t.Text = "-", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn1OverX = ($t = new ExpressCraft.SimpleButton(), $t.Text = "1/x", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnDbl = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Dbl", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btn0 = ($t = new ExpressCraft.SimpleButton(), $t.Text = "0", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnplusOrNeg = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+/-", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnDot = ($t = new ExpressCraft.SimpleButton(), $t.Text = ".", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddTextToCommand), $t)), (this.btnPlus = ($t = new ExpressCraft.SimpleButton(), $t.Text = "+", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t)), (this.btnEq = ($t = new ExpressCraft.SimpleButton(), $t.Text = "=", $t.ItemClick = Bridge.fn.cacheBind(this, this.AddOperator), $t))], ExpressCraft.SimpleButton));
                var index = 0;
                var y = 0;
                var yOffset = (28 + AddHeight) | 0;
                this.btnClose = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Size = new ExpressCraft.Vector2.$ctor1("((100% - 28px) * 0.1666666666666667)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((100% - 28px) * " + (System.Decimal("0.8333333333333335")) + ") + " + (24) + "px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f1), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnClose.Style.fontSize = "26px";
                    this.btnClose.Style.fontWeight = "bold";
                }
                this.btnBack = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Back", $t.Size = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 0) + 4px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.cacheBind(this, this.Back), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnBack.Style.fontSize = "14px";
                }
                this.btnCE = ($t = new ExpressCraft.SimpleButton(), $t.Text = "CE", $t.Size = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 1) + 8px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f2), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnCE.Style.fontSize = "14px";
                }
                this.btnC = ($t = new ExpressCraft.SimpleButton(), $t.Text = "C", $t.Size = new ExpressCraft.Vector2.$ctor1("((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) + 4px)", "((100% - " + yOffset + "px) * 0.2)"), $t.Location = new ExpressCraft.Vector2.$ctor1("(((((100% - 24px) - ((100% - 28px) * 0.1666666666666667)) * 0.333) * 2) + 12px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)"), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalculatorControl.f3), $t);
                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnC.Style.fontSize = "14px";
                }

                ExpressCraft.Helper.AppendChildren$1(doc, [this.btnClose.Content, this.btnBack.Content, this.btnCE.Content, this.btnC.Content]);

                y = (y + 1) | 0;

                for (var i = 0; i < buttons.Count; i = (i + 1) | 0) {
                    buttons.getItem(i).Size = new ExpressCraft.Vector2.$ctor1("((100% - 28px) * 0.1666666666666667)", "((100% - " + yOffset + "px) * 0.2)");
                    buttons.getItem(i).Location = new ExpressCraft.Vector2.$ctor1("(((100% - 28px) * " + (System.Decimal(index).mul(System.Decimal("0.1666666666666667"))) + ") + " + ((((Bridge.Int.mul(index, 4)) + 4) | 0)) + "px)", "(((100% - " + yOffset + "px) * " + (System.Decimal(y).mul(System.Decimal(0.2))) + ") + " + (((((((Bridge.Int.mul(y, 4)) + 8) | 0)) + AddHeight) | 0)) + "px)");
                    if (ExpressCraft.Helper.NotDesktop) {
                        buttons.getItem(i).Style.fontSize = "14px";
                    }

                    doc.appendChild(buttons.getItem(i).Content);
                    index = (index + 1) | 0;
                    if (index === 6) {
                        index = 0;
                        y = (y + 1) | 0;
                    }
                }

                this.btnDbl.Style.fontSize = "6.5pt";
                this.btnTAX.Style.fontSize = "6.5pt";
                this.btnPTAX.Style.fontSize = "6.5pt";
                this.btnMTAX.Style.fontSize = "6.5pt";

                this.btnClose.Style.color = "red";
                this.btnClose.Style.fontWeight = "bold";

                if (!CloseButtonVisible) {
                    this.btnClose.Style.visibility = "hidden";
                }

                this.RefreshValue();

                this.Content.appendChild(doc);
        }
    },
    methods: {
        AddTextToCommand: function (button) {
            if (Bridge.referenceEquals(button.Text, ".") && System.String.contains(this.current_command,".")) {
                return;
            }

            if (Bridge.referenceEquals(this.current_command, "0")) {
                this.current_command = "";
            }

            this.current_command = System.String.concat(this.current_command, button.Text);

            this.RefreshValue();
        },
        CalculateAndClose: function () {
            var x = this.Calculate();

            if (!Bridge.staticEquals(this.OnEqual, null)) {
                this.OnEqual(x);
            }
            if (!this.DontRefresh) {
                if (!Bridge.staticEquals(this.OnClose, null)) {
                    this.OnClose();
                }
            }
        },
        Calculate: function () {
            var previousValue = System.Decimal(0);

            var previousOp = "";
            var length = this._commands.Count;

            for (var i = 0; i < length; i = (i + 1) | 0) {
                var command = this._commands.getItem(i);

                if (System.String.endsWith(command, "%")) {
                    command = command.substr(0, ((command.length - 1) | 0));
                }

                var tryDec = { };
                if (System.Decimal.tryParse(command, null, tryDec)) {
                    if (!Bridge.referenceEquals(previousOp, "")) {
                        if (System.String.endsWith(this._commands.getItem(i), "%")) {
                            try {
                                tryDec.v = previousValue.mul((tryDec.v.div(System.Decimal(100))));
                            }
                            catch ($e1) {
                                $e1 = System.Exception.create($e1);
                                tryDec.v = System.Decimal(0);
                            }
                        }

                        if (Bridge.referenceEquals(previousOp, "+")) {
                            previousValue = previousValue.add(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "-")) {
                            previousValue = previousValue.sub(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "/")) {
                            try {
                                previousValue = previousValue.div(tryDec.v);
                            }
                            catch ($e2) {
                                $e2 = System.Exception.create($e2);
                                previousValue = System.Decimal(0);
                            }
                        } else if (Bridge.referenceEquals(previousOp, "*")) {
                            previousValue = previousValue.mul(tryDec.v);
                        } else if (Bridge.referenceEquals(previousOp, "*")) {
                            previousValue = previousValue.mul(tryDec.v);
                        }

                        previousOp = "";
                    } else {
                        previousValue = tryDec.v;
                    }
                } else {
                    previousOp = command;
                    if (Bridge.referenceEquals(previousOp, "+TAX")) {
                        previousValue = ExpressCraft.Helper.AddTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "-TAX")) {
                        previousValue = ExpressCraft.Helper.DeductTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "TAX")) {
                        previousValue = ExpressCraft.Helper.GetPortionTax(previousValue);
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "Dbl")) {
                        previousValue = previousValue.mul(System.Decimal(2));
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "sqrt")) {
                        try {
                            previousValue = System.Decimal(Math.sqrt(System.Decimal.toFloat(previousValue)), null, System.Double);
                        }
                        catch ($e3) {
                            $e3 = System.Exception.create($e3);
                            previousValue = System.Decimal(0);
                        }
                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "1/x")) {
                        try {
                            previousValue = System.Decimal(1.0).div(previousValue);
                        }
                        catch ($e4) {
                            $e4 = System.Exception.create($e4);
                            previousValue = System.Decimal(0);
                        }

                        previousOp = "";
                    } else if (Bridge.referenceEquals(previousOp, "+/-")) {
                        previousValue = previousValue.neg();
                        previousOp = "";
                    }
                }
            }

            return previousValue;
        },
        RefreshValue: function () {
            if (this.DontRefresh) {
                return;
            }
            var builder = new System.Text.StringBuilder();

            var length = this._commands.Count;

            for (var i = 0; i < length; i = (i + 1) | 0) {
                builder.append(System.String.concat(this._commands.getItem(i), " "));
            }
            builder.append(this.current_command);
            this.DisplayInput.Text = "";
            this.DisplayInput.Text = builder.toString();
        },
        IsAllNumbers: function (value) {
            var x = { };
            return System.Decimal.tryParse(value, null, x);
        },
        Back: function (button) {
            if (!Bridge.referenceEquals(this.current_command, "")) {
                this.current_command = this.current_command.substr(0, ((this.current_command.length - 1) | 0));
            } else {
                if (this._commands.Count > 0) {
                    var x = System.Linq.Enumerable.from(this._commands).last();
                    if (this.IsAllNumbers(x)) {
                        this.current_command = x;
                        this.current_command = this.current_command.substr(0, ((this.current_command.length - 1) | 0));
                    } else {
                        this.current_command = "";
                    }
                    this._commands.removeAt(((this._commands.Count - 1) | 0));
                }
            }
            this.RefreshValue();
        },
        IsSingleOperator: function (x) {
            return (System.String.contains(x,"TAX") || Bridge.referenceEquals(x, "Dbl") || Bridge.referenceEquals(x, "1/x") || Bridge.referenceEquals(x, "+/-") || Bridge.referenceEquals(x, "sqrt"));
        },
        AddOperator: function (button) {
            if (this.IsSingleOperator(button.Text)) {
                if (this._commands.Count > 0) {
                    var x = System.Linq.Enumerable.from(this._commands).last();
                    if (!this.IsSingleOperator(x)) {
                        if (Bridge.referenceEquals(this.current_command, "") && !this.IsAllNumbers(x)) {
                            return;
                        }
                    }
                }

                if (!Bridge.referenceEquals(this.current_command, "")) {
                    this._commands.add(this.current_command);
                    this.current_command = "";
                }

                this._commands.add(button.Text);

                this.RefreshValue();
            } else {
                if (Bridge.referenceEquals(this.current_command, "")) {
                    if (Bridge.referenceEquals(button.Text, "=")) {
                        this.CalculateAndClose();
                        return;
                    } else {
                        if (this._commands.Count > 0) {
                            var x1 = System.Linq.Enumerable.from(this._commands).last();
                            if (!this.IsSingleOperator(x1)) {
                                return;
                            }
                        } else {
                            return;
                        }
                    }
                }

                if (Bridge.referenceEquals(button.Text, "%")) {
                    if (this._commands.Count > 0) {
                        var x2 = System.Linq.Enumerable.from(this._commands).last();

                        if (!this.IsSingleOperator(x2)) {
                            this.current_command = System.String.concat(this.current_command, "%");
                            this._commands.add(this.current_command);
                            this.current_command = "";
                        } else {
                            return;
                        }
                    }
                } else {
                    this._commands.add(this.current_command);
                    this.current_command = "";

                    if (Bridge.referenceEquals(button.Text, "=")) {
                        this.CalculateAndClose();
                    } else {
                        this._commands.add(button.Text);
                    }
                }
                this.RefreshValue();
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.CalculatorControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.CalculatorControl, {
        f1: function (ev) {
            if (!Bridge.staticEquals(this.OnClose, null)) {
                this.OnClose();
            }
        },
        f2: function (ev) {
            this.current_command = "";
            this.RefreshValue();
        },
        f3: function (ev) {
            this._commands = new (System.Collections.Generic.List$1(System.String))();
            this.current_command = "";
            this.RefreshValue();
        }
    });

    Bridge.define("ExpressCraft.CheckEdit", {
        inherits: [ExpressCraft.Control],
        statics: {
            methods: {
                op_Implicit: function (checkEdit) {
                    return checkEdit.Edit;
                }
            }
        },
        fields: {
            Edit: null,
            span: null
        },
        props: {
            Checked: {
                get: function () {
                    return ExpressCraft.Helper.IsTrue(this.Edit.Text) === 1;
                },
                set: function (value) {
                    this.Edit.Text = System.Boolean.toString(value);
                }
            },
            Text: {
                get: function () {
                    return this.span.innerHTML;
                },
                set: function (value) {
                    this.span.innerHTML = value;
                }
            }
        },
        ctors: {
            ctor: function (label) {
                if (label === void 0) { label = ""; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this, ($t = document.createElement('label'), $t.className = ExpressCraft.Control.BaseClass(false, true), $t));
                var $t;
                this.Edit = new ExpressCraft.TextInput.$ctor1("checkbox");
                this.Edit.Controller = this;
                this.span = document.createElement('span');

                this.Text = label;

                ExpressCraft.Helper.AppendChildren$1(this.Content, [ExpressCraft.Control.op_Implicit(this.Edit), this.span]);
        }
    }
    });

    Bridge.define("ExpressCraft.TextInput", {
        inherits: [ExpressCraft.Control],
        statics: {
            methods: {
                FixInput: function (type) {
                    if (type === "date" || (ExpressCraft.Helper.IsFireFox() && type !== "password" && type !== "checkbox")) {
                        return "text";
                    } else {
                        return type;
                    }
                }
            }
        },
        fields: {
            prevText: null,
            OnTextChanged: null,
            OnKeyDown: null,
            OnKeyUp: null,
            OnKeyPress: null,
            OnGotFocus: null,
            OnLostFocus: null,
            _displayFormat: null,
            Controller: null,
            Type: "button",
            DisableFocusPopup: false,
            IsOverride: false,
            PreZIndex: null,
            enabled: false,
            _readonly: false
        },
        props: {
            IsSubmit: false,
            GoNext: false,
            OnFocusDontSelectAll: false,
            DisplayFormat: {
                get: function () {
                    return this._displayFormat;
                },
                set: function (value) {
                    this.SetDisplayFormat(value);
                }
            },
            Text: {
                get: function () {
                    if (this.IsOverride) {
                        return this.GetValue();
                    } else {
                        if (this.Type === "checkbox") {
                            return System.Boolean.toString(this.Content.checked);
                        } else {
                            return this.Content.value;
                        }
                    }
                },
                set: function (value) {
                    if (this.IsOverride) {
                        this.SetValue(value);
                    } else {
                        if (this.Type === "checkbox") {
                            value = value.toLowerCase();
                            this.Content.checked = ExpressCraft.Helper.IsTrue(value) === 1;
                        } else {
                            this.Content.value = value;
                            this.formatText();
                        }
                    }

                    this.CheckTextChanged();
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    if (this.enabled) {
                        this.Content.removeAttribute("disabled");
                    } else {
                        this.Content.setAttribute("disabled", null);
                    }
                }
            },
            Readonly: {
                get: function () {
                    return this._readonly;
                },
                set: function (value) {
                    this._readonly = value;
                    if (this._readonly) {
                        this.Content.setAttribute("readonly", System.Boolean.toString((this._readonly)));
                    } else {
                        this.Content.removeAttribute("readonly");
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.prevText = "";
                this._displayFormat = "";
                this.IsOverride = false;
                this.enabled = true;
                this._readonly = false;
            },
            ctor: function (overrideElement, addInputControl, addEventsOnControl) {
                if (addInputControl === void 0) { addInputControl = true; }
                if (addEventsOnControl === void 0) { addEventsOnControl = true; }

                this.$initialize();
                ExpressCraft.Control.ctor.call(this, overrideElement);
                overrideElement.className = System.String.concat((addInputControl ? "inputcontrol" : ""), ExpressCraft.Control.BaseClass(addInputControl));
                this.IsOverride = true;
                if (addEventsOnControl) {
                    this.addEvents();
                }
            },
            $ctor1: function (type, ac) {
                if (type === void 0) { type = 19; }
                if (ac === void 0) { ac = true; }

                this.$initialize();
                ExpressCraft.Control.$ctor3.call(this, "inputcontrol", ExpressCraft.TextInput.FixInput(type), ac);
                this.Type = type;

                if (this.Type === "number") {
                    this.Content.style.textAlign = "right";
                    this.Content.style.textIndent = "3px";
                    this.Content.style.paddingRight = "3px";

                    this.DisplayFormat = "n2";
                } else if (this.Type === "date") {
                    var str = System.Array.init(3, null, System.String);
                    str[System.Array.index(ExpressCraft.Settings.DayPosition, str)] = "dd";
                    str[System.Array.index(ExpressCraft.Settings.MonthPosition, str)] = "MM";
                    str[System.Array.index(ExpressCraft.Settings.YearPosition, str)] = "yyyy";
                    var builder = new System.Text.StringBuilder();

                    for (var i = 0; i < 3; i = (i + 1) | 0) {
                        builder.append(System.String.concat(str[System.Array.index(i, str)], String.fromCharCode(ExpressCraft.Settings.DateSeperator)));
                    }
                    builder.setLength((builder.getLength() - 1) | 0);
                    this.DisplayFormat = builder.toString();
                }

                this.addEvents();

                this.formatText();
            }
        },
        methods: {
            SetDisplayFormat: function (value) {
                this._displayFormat = value;
                this.formatText();
            },
            GetDisplayFormat: function () {
                return this._displayFormat;
            },
            GetValue: function () {
                return this.Content.innerHTML;
            },
            SetValue: function (value) {
                this.Content.innerHTML = value;
            },
            OnFocus: function () {

            },
            GetInput: function () {
                if (Bridge.is(this.Content, HTMLInputElement)) {
                    return this.Content;
                } else {
                    return this.Content;
                }
            },
            GetNumberValue: function () {
                var value = ExpressCraft.Helper.StripNonNumberString(this.Text);
                return value;
            },
            GetEditValue: function () {
                if (this.Type === "number") {
                    var value = ExpressCraft.Helper.StripNonNumberString(this.Text);
                    return value;
                } else {
                    return this.Text;
                }
            },
            Scroll: function (value, parent) {
                if (parent == null) {
                    return;
                }
                parent.scrollTop = value;
                //Global.SetTimeout(() =>
                //{
                //    if(this.Content.ParentElement == null || this.Content.ParentElement.ParentElement == null)
                //        return;
                //    this.Content.ParentElement.ParentElement.ScrollTop = value;
                //}, 0);             
            },
            GetDisplayValue: function () {
                if (System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                    return this.Text;
                } else {
                    if (this.Type === "number") {
                        var value = ExpressCraft.Helper.StripNonNumberString(this.Text);
                        if (System.String.startsWith(this.DisplayFormat.toLowerCase(), "c")) {
                            var wasNeg = false;
                            if (value.lt(System.Decimal(0))) {
                                wasNeg = true;
                                value = value.neg();
                            }

                            return System.String.concat((wasNeg ? "-" : ""), System.String.format(System.String.concat("${0:", System.String.replaceAll(System.String.replaceAll(this.DisplayFormat, "c", "n"), "C", "N"), "}"), value));
                        } else if (System.String.startsWith(this.DisplayFormat.toLowerCase(), "p")) {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), value.equalsT(System.Decimal(0)) ? System.Decimal(0) : value.div(System.Decimal(100.0)));
                        } else {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), value);
                        }
                    } else if (this.Type === "date") {
                        var value1 = ExpressCraft.Helper.StripNonDateString(this.Text);
                        if (Bridge.equals(value1, System.DateTime.getMinValue())) {
                            return "";
                        } else {
                            return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(value1, System.DateTime, System.DateTime.format));
                        }
                    } else {
                        return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), this.Text);
                    }
                }
            },
            formatText: function () {
                var input = this.GetInput();
                if (input != null && !Bridge.referenceEquals(input, document.activeElement)) {
                    if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                        input.type = "text";
                        var newText = this.GetDisplayValue();

                        if (!Bridge.referenceEquals(newText, this.Text)) {
                            this.Text = newText;
                        }
                    }
                }
            },
            addEvents: function () {
                if (!this.IsOverride) {
                    var input = this.GetInput();
                    if (input != null) {
                        if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                            if (this.Type === "password") {
                                return;
                            }
                            input.type = "text";
                        }
                    }
                }

                this.Content.onblur = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f1);
                this.Content.onfocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f2);
                this.Content.onchange = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f3);
                this.Content.oncontextmenu = $asm.$.ExpressCraft.TextInput.f4;
                this.Content.onkeypress = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f5);
                this.Content.onkeydown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f6);
                this.Content.onkeyup = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f7);
                this.Content.addEventListener("paste", Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f8));
                this.Content.addEventListener("cut", Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInput.f8));
            },
            CheckTextChanged: function () {
                if (!Bridge.referenceEquals(this.Text, this.prevText)) {
                    if (!Bridge.staticEquals(this.OnTextChanged, null)) {
                        this.OnTextChanged(this);
                    }
                    this.prevText = this.Text;
                }
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
                this.prevText = this.Text;
            },
            SetDate: function (date) {
                if (!System.String.isNullOrWhiteSpace(date)) {
                    var dd = ExpressCraft.Helper.StripNonDateString(date);
                    if (Bridge.equals(dd, System.DateTime.getMinValue())) {
                        this.Text = "";
                    } else {
                        this.Text = System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(dd, System.DateTime, System.DateTime.format));
                    }
                } else {
                    this.Text = "";
                }
            },
            GetDate: function () {
                if (!System.String.isNullOrWhiteSpace(this.Text)) {
                    var dd = ExpressCraft.Helper.StripNonDateString(this.Text);
                    if (Bridge.equals(dd, System.DateTime.getMinValue())) {
                        return "";
                    } else {
                        return System.String.format(System.String.concat("{0:", this.DisplayFormat, "}"), Bridge.box(dd, System.DateTime, System.DateTime.format));
                    }
                } else {
                    return "";
                }
            },
            GetDateTime: function () {
                return ExpressCraft.Helper.StripNonDateString(this.Text);
            },
            IsNumericType: function () {
                return this.Type === "number";
            },
            IsDateType: function () {
                return this.Type === "date";
            }
        }
    });

    Bridge.ns("ExpressCraft.TextInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextInput, {
        f1: function (ev) {
            this.Content.style.zIndex = this.PreZIndex;

            this.formatText();

            if (!Bridge.staticEquals(this.OnLostFocus, null)) {
                this.OnLostFocus(this);
            }
        },
        f2: function (ev) {
            this.PreZIndex = this.Content.style.zIndex;
            this.Content.style.zIndex = "10000";

            this.OnFocus();
            var input1 = this.GetInput();
            if (input1 != null) {
                if (!System.String.isNullOrWhiteSpace(this.DisplayFormat)) {
                    if (this.Type === "number") {
                        try {
                            this.Text = ExpressCraft.Helper.StripNonNumberString(this.Text).toString();
                        }
                        catch ($e1) {
                            $e1 = System.Exception.create($e1);
                            this.Text = "0.00";
                        }
                    }

                    if (!ExpressCraft.Helper.IsFireFox() && !this.Readonly && this.Type !== "date") {
                        input1.type = this.Type;
                    }
                }
                if (this.Type !== "checkbox" && ExpressCraft.Settings.OnFocusSelectAll && !this.OnFocusDontSelectAll) {
                    input1.select();
                }
            }

            if (!Bridge.staticEquals(this.OnGotFocus, null)) {
                this.OnGotFocus(this);
            }

            if (!this.DisableFocusPopup && !this.Readonly && this.Enabled && ExpressCraft.Helper.NotDesktop && !(Bridge.is(this, ExpressCraft.TextInputDropDown)) && this.Controller == null) {
                if (!ExpressCraft.Settings.DisableTextPopupEditor) {
                    new ExpressCraft.TextForm(this).ShowPopup(new ExpressCraft.Vector2.$ctor1(0, 0));
                }
            }
        },
        f3: function (ev) {
            this.CheckTextChanged();
        },
        f4: function (ev) {
            ev.stopPropagation();
        },
        f5: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyPress, null)) {
                this.OnKeyPress(this, ev);
            }
        },
        f6: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyDown, null)) {
                this.OnKeyDown(this, ev);
            }
        },
        f7: function (ev) {
            this.CheckTextChanged();
            if (!Bridge.staticEquals(this.OnKeyUp, null)) {
                this.OnKeyUp(this, ev);
            }
        },
        f8: function () {
            this.CheckTextChanged();
        }
    });

    Bridge.define("ExpressCraft.ComboBoxEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            ComboBoxBase: null,
            previousSelectedIndex: 0,
            SelectedIndexChanged: null,
            enabled: false,
            _readonly: false
        },
        props: {
            Text: {
                get: function () {
                    var $t;
                    if (this.ComboBoxBase.selectedIndex === -1) {
                        return "";
                    }
                    return ($t = this.ComboBoxBase.options)[System.Array.index(this.ComboBoxBase.selectedIndex, $t)].innerHTML;
                },
                set: function (value) {
                    var $t;
                    for (var i = 0; i < this.ComboBoxBase.options.length; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(($t = this.ComboBoxBase.options)[System.Array.index(i, $t)].innerHTML, value)) {
                            this.ComboBoxBase.selectedIndex = i;
                        }
                    }
                    this.ComboBoxBase.selectedIndex = -1;
                }
            },
            Value: {
                get: function () {
                    var $t;
                    if (this.ComboBoxBase.selectedIndex === -1) {
                        return "";
                    }
                    return ($t = this.ComboBoxBase.options)[System.Array.index(this.ComboBoxBase.selectedIndex, $t)].value;
                },
                set: function (value) {
                    var $t;
                    for (var i = 0; i < this.ComboBoxBase.options.length; i = (i + 1) | 0) {
                        if (Bridge.referenceEquals(($t = this.ComboBoxBase.options)[System.Array.index(i, $t)].value, value)) {
                            this.ComboBoxBase.selectedIndex = i;
                        }
                    }
                    this.ComboBoxBase.selectedIndex = -1;
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.Content.setAttribute("disabled", System.Boolean.toString((!this.enabled)));
                }
            },
            Readonly: {
                get: function () {
                    return this._readonly;
                },
                set: function (value) {
                    this._readonly = value;
                    this.Content.setAttribute("readonly", System.Boolean.toString((this._readonly)));
                }
            }
        },
        ctors: {
            init: function () {
                this.previousSelectedIndex = -1;
                this.enabled = true;
                this._readonly = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor4.call(this, "inputcontrol", ExpressCraft.ComboBoxTypes.Default);
                this.ComboBoxBase = Bridge.as(this.Content, HTMLSelectElement);

                this.Content.oncontextmenu = $asm.$.ExpressCraft.ComboBoxEdit.f1;

                this.ComboBoxBase.onchange = Bridge.fn.bind(this, $asm.$.ExpressCraft.ComboBoxEdit.f2);
            }
        },
        methods: {
            FillData: function (dataitems) {
                var $t;
                if (dataitems === void 0) { dataitems = []; }
                $(this.ComboBoxBase).empty();

                if (dataitems == null) {
                    for (var i = 0; i < dataitems.length; i = (i + 1) | 0) {
                        this.ComboBoxBase.appendChild(($t = document.createElement('option'), $t.innerHTML = dataitems[System.Array.index(i, dataitems)].Text, $t.value = dataitems[System.Array.index(i, dataitems)].Value, $t));
                    }
                }
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
            }
        }
    });

    Bridge.ns("ExpressCraft.ComboBoxEdit", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ComboBoxEdit, {
        f1: function (ev) {
            ev.stopPropagation();
        },
        f2: function (ev) {
            if (this.previousSelectedIndex !== this.ComboBoxBase.selectedIndex) {
                if (!Bridge.staticEquals(this.SelectedIndexChanged, null)) {
                    this.SelectedIndexChanged(this);
                }

                this.previousSelectedIndex = this.ComboBoxBase.selectedIndex;
            }
            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.ContextMenu", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                TotalContextHandles: 0,
                MainContextMenu: null
            },
            ctors: {
                init: function () {
                    this.TotalContextHandles = 0;
                }
            }
        },
        fields: {
            /**
             * For internal use only - so if we click on document - we can close all context menus ---
             *
             * @instance
             * @protected
             * @memberof ExpressCraft.ContextMenu
             * @type ExpressCraft.ContextMenu
             */
            SubContextOpened: null,
            ContextItems: null,
            Visible: false
        },
        ctors: {
            init: function () {
                this.ContextItems = new (System.Collections.Generic.List$1(ExpressCraft.ContextItem))();
                this.Visible = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "contextmenu");
                this.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.ContextMenu.f1);
            }
        },
        methods: {
            RenderContextMenu: function () {
                // What we need to do first is get the maxed size text...
                var x = 0;
                var ii = -1;

                ExpressCraft.Helper.Empty(this.Content);

                for (var i = 0; i < this.ContextItems.Count; i = (i + 1) | 0) {
                    var y = this.ContextItems.getItem(i).Caption.length;
                    if (y > x) {
                        x = y;
                        ii = i;
                    }
                }

                if (ii === -1) {
                    return;
                }
                var calwidth = Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.ContextItems.getItem(ii).Caption, ExpressCraft.Settings.DefaultFont));
                if (calwidth < ExpressCraft.Settings.ContextMenuMinWidth) {
                    calwidth = ExpressCraft.Settings.ContextMenuMinWidth;
                }
                var width = (((((((calwidth + 34) | 0) + 8) | 0) + 2) | 0));

                var top = 1;

                for (var i1 = 0; i1 < this.ContextItems.Count; i1 = (i1 + 1) | 0) {
                    var contextItem = { v : this.ContextItems.getItem(i1) };
                    var y1 = contextItem.v.Caption.length;
                    var item = ExpressCraft.Control.Label$1(contextItem.v.Caption, 1, top, ((width - 2) | 0), false, false, "contextitem");

                    item.onclick = (function ($me, contextItem) {
                        return Bridge.fn.bind($me, function (ev) {
                            if (contextItem.v.Enabled) {
                                if (!Bridge.staticEquals(contextItem.v.OnItemClick, null)) {
                                    contextItem.v.OnItemClick(contextItem.v);
                                }
                                this.Close();
                            }

                        });
                    })(this, contextItem);

                    this.Content.appendChild(item);

                    top = (top + 24) | 0;

                    if (this.ContextItems.getItem(i1).BeginGroup && i1 !== this.ContextItems.Count) {
                        top = (top + 1) | 0;
                        var sep = ExpressCraft.Control.Div$1("contextitemseperator");

                        sep.style.top = ExpressCraft.Helper.ToPx(Bridge.box(top, System.Int32));
                        sep.style.width = ExpressCraft.Helper.ToPx(Bridge.box(calwidth, System.Int32));

                        this.Content.appendChild(sep);

                        top = (top + 2) | 0;
                    }
                }

                top = (top + 1) | 0;

                ExpressCraft.Helper.SetSize$1(this.Content, width, top);
            },
            Show: function (Location) {
                if (ExpressCraft.ContextMenu.MainContextMenu != null) {
                    ExpressCraft.ContextMenu.MainContextMenu.Close();
                    ExpressCraft.ContextMenu.MainContextMenu = null;
                }
                ExpressCraft.ContextMenu.MainContextMenu = this;

                if (this.Visible) {
                    this.Close();
                }
                if (!this.Visible) {
                    ExpressCraft.Helper.SetLocation(this.Content, ((Location.Xi - 5) | 0), ((Location.Yi - 5) | 0));
                    this.RenderContextMenu();

                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
                    this.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
                    document.body.appendChild(ExpressCraft.Control.op_Implicit(this));
                    this.Visible = true;
                }
            },
            Close: function () {
                if (this.Visible) {
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                    document.body.removeChild(ExpressCraft.Control.op_Implicit(this));
                    this.Visible = false;
                }

                if (this.SubContextOpened != null) {
                    this.SubContextOpened.Close();
                    this.SubContextOpened = null;
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ContextMenu", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ContextMenu, {
        f1: function (ev) {
            this.Close();
        }
    });

    Bridge.define("ExpressCraft.DataColumnBool", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Boolean)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Bool;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnByte", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Byte)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Byte;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDateTime", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.DateTime)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.DateTime;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDecimal", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Decimal)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Decimal;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnDouble", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Double)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Double;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnFloat", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Single)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Float;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnInteger", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int32)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Integer;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnLong", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int64)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Long;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnObject", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Object))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Object;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnShort", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.Nullable$1(System.Int16)))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.Short;
            }
        }
    });

    Bridge.define("ExpressCraft.DataColumnString", {
        inherits: [ExpressCraft.DataColumn],
        fields: {
            Cells: null
        },
        ctors: {
            init: function () {
                this.Cells = new (System.Collections.Generic.List$1(System.String))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.DataColumn.ctor.call(this);
                this.DataType = ExpressCraft.DataType.String;
            }
        }
    });

    Bridge.define("ExpressCraft.DateControl", {
        inherits: [ExpressCraft.Control],
        statics: {
            fields: {
                Days: null
            },
            ctors: {
                init: function () {
                    this.Days = System.Array.init(["MO", "TU", "WE", "TH", "FR", "SA", "SU"], System.String);
                }
            }
        },
        fields: {
            btnTop: null,
            btnSelectedRange: null,
            btnToday: null,
            btnLeft: null,
            btnRight: null,
            ContentRange: null,
            SelectedYear: 0,
            SelectedMonth: 0,
            SelectedDay: 0,
            _activeDisplayMode: 0,
            OnDateChanged: null,
            OnRequestToClose: null
        },
        props: {
            ActiveDisplayMode: {
                get: function () {
                    return this._activeDisplayMode;
                },
                set: function (value) {
                    if (this._activeDisplayMode !== value) {
                        this._activeDisplayMode = value;
                        this.RefreshView();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._activeDisplayMode = ExpressCraft.DateControl.DisplayMode.Day;
            },
            ctor: function (startDate) {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                var $t;
                this.Size = new ExpressCraft.Vector2.$ctor1(230, 245);

                var doc = document.createDocumentFragment();

                this.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnTop = new ExpressCraft.SimpleButton();
                this.btnTop.Style.transform = "translate(-50%, 0)";
                this.btnTop.Style.left = "50%";
                this.btnTop.Style.marginRight = "50%";
                this.btnTop.Top = 6;
                this.btnTop.Width = "auto";
                this.btnTop.Style.borderColor = "transparent";
                this.btnTop.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);


                this.btnSelectedRange = ($t = new ExpressCraft.SimpleButton(), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f1), $t);

                this.btnSelectedRange.Style.transform = "translate(-50%, 0)";
                this.btnSelectedRange.Style.left = "50%";
                this.btnSelectedRange.Style.marginRight = "50%";
                this.btnSelectedRange.Top = 30;
                this.btnSelectedRange.Width = "auto";
                this.btnSelectedRange.Style.borderColor = "transparent";
                this.btnSelectedRange.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnLeft = ($t = new ExpressCraft.SimpleButton(), $t.Text = "<", $t.Location = new ExpressCraft.Vector2.$ctor1(14, 36), $t.Size = new ExpressCraft.Vector2.$ctor1(13, 13), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f2), $t);
                this.btnLeft.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnRight = ($t = new ExpressCraft.SimpleButton(), $t.Text = ">", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 26px)", 36), $t.Size = new ExpressCraft.Vector2.$ctor1(13, 13), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f3), $t);
                this.btnRight.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnLeft.Style.borderRadius = "50%";
                this.btnRight.Style.borderRadius = "50%";

                this.btnLeft.Style.lineHeight = "0";
                this.btnRight.Style.lineHeight = "0";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnSelectedRange.Style.fontSize = "14px";
                    this.btnSelectedRange.Height = 36;
                    this.btnSelectedRange.Top = 42;

                    this.btnTop.Style.fontSize = "14px";
                    this.btnTop.Height = 36;

                    this.btnLeft.Size = new ExpressCraft.Vector2.$ctor1(36, 36);
                    this.btnLeft.Style.fontSize = "14px";
                    this.btnLeft.Top = 20;

                    this.btnRight.Size = new ExpressCraft.Vector2.$ctor1(36, 36);
                    this.btnRight.Style.fontSize = "14px";
                    this.btnRight.Top = 20;
                    this.btnRight.Left = "(100% - 50px)";

                    this.ContentRange = ($t = new ExpressCraft.Control.$ctor1(), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - 20px)", "(100% - 147px)"), $t.Location = new ExpressCraft.Vector2.$ctor1(11, 90), $t);
                } else {
                    this.ContentRange = ($t = new ExpressCraft.Control.$ctor1(), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - 20px)", "(100% - 92px)"), $t.Location = new ExpressCraft.Vector2.$ctor1(11, 60), $t);
                }


                this.ContentRange.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                this.btnToday = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Today", $t.Width = 50, $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateControl.f4), $t);

                this.btnToday.Style.transform = "translate(-50%, 0)";
                this.btnToday.Style.left = "50%";
                this.btnToday.Style.marginRight = "50%";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.btnToday.Top = "(100% - 51px)";
                    this.btnToday.Style.fontSize = "14px";
                    this.btnToday.Height = 45;
                    this.btnToday.Style.minWidth = "60px";
                    this.btnToday.Width = "(100% * 0.1428)";
                } else {
                    this.btnToday.Top = "(100% - 26px)";
                }


                this.btnToday.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                ExpressCraft.Helper.AppendChildren$2(doc, [this.btnTop, this.btnLeft, this.btnSelectedRange, this.btnRight, this.ContentRange, this.btnToday]);
                if (Bridge.equals(startDate, System.DateTime.getMinValue())) {
                    startDate = System.DateTime.getToday();
                }

                this.Content.appendChild(doc);

                this.SetViewDateTime(startDate);
        }
    },
    methods: {
        GetViewDateTime: function () {
            return System.DateTime.create(this.SelectedYear, this.SelectedMonth, this.SelectedDay);
        },
        SetViewDateTime: function (date) {
            var newSelectedYear = System.DateTime.getYear(date);
            var newSelectedMonth = System.DateTime.getMonth(date);
            var newSelectedDay = System.DateTime.getDay(date);

            if (newSelectedYear !== this.SelectedYear || newSelectedMonth !== this.SelectedMonth || newSelectedDay !== this.SelectedDay || Bridge.equals(date, System.DateTime.getToday())) {
                this.SelectedYear = newSelectedYear;
                this.SelectedMonth = newSelectedMonth;
                this.SelectedDay = newSelectedDay;

                if (!Bridge.staticEquals(this.OnDateChanged, null)) {
                    this.OnDateChanged(date);
                }

                this.RefreshView();
            }
        },
        RefreshView: function () {
            var $t;
            var date = this.GetViewDateTime();
            this.btnTop.Text = System.DateTime.format(date, "ddd, dd MMM yyyy");

            var doc = document.createDocumentFragment();

            switch (this._activeDisplayMode) {
                case ExpressCraft.DateControl.DisplayMode.Day: 
                    this.btnSelectedRange.Text = System.DateTime.format(date, "MMM yyyy");
                    var startDate = System.DateTime.create(System.DateTime.getYear(date), System.DateTime.getMonth(date), 1);
                    var endDate = System.DateTime.addDays(System.DateTime.addMonths(startDate, 1), -1);
                    var TotalDays = (System.DateTime.subdd(endDate, startDate)).getDays();
                    var startDayIndex = ((System.DateTime.getDayOfWeek(startDate) === System.DayOfWeek.Sunday ? 7 : System.DateTime.getDayOfWeek(startDate)) - 1) | 0;
                    var offsetStart = 0;
                    var row = 1;
                    var startOutside = startDayIndex === 0 ? startDate : System.DateTime.addDays(startDate, ((-startDayIndex) | 0));
                    var endDayIndex = ((System.DateTime.getDayOfWeek(endDate) === System.DayOfWeek.Sunday ? 7 : System.DateTime.getDayOfWeek(endDate)) - 1) | 0;
                    for (var i = 0; i < 42; i = (i + 1) | 0) {
                        var curDate = { v : startOutside };

                        var btn = ($t = new ExpressCraft.SimpleButton(), $t.Text = System.DateTime.getDay(curDate.v).toString(), $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% * " + System.Double.format((offsetStart * 0.1428)) + ")", "(((100% - " + (ExpressCraft.Helper.NotDesktop ? 26 : 13) + "px) * " + System.Double.format(((((row - 1) | 0)) * 0.1666)) + ") + " + (ExpressCraft.Helper.NotDesktop ? 26 : 13) + "px)", "(100% * 0.1428)", "((100% - " + (ExpressCraft.Helper.NotDesktop ? 26 : 13) + "px) * " + System.Double.format(0.1666) + ")"), $t.ItemClick = (function ($me, curDate) {
                            return Bridge.fn.bind($me, function (ev) {
                                if (Bridge.equals(this.GetViewDateTime(), curDate.v)) {
                                    if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                                        this.OnRequestToClose();
                                    }
                                }
                                this.SetViewDateTime(curDate.v);
                            });
                        })(this, curDate), $t);
                        if (ExpressCraft.Helper.NotDesktop) {
                            btn.Style.fontSize = "14px";
                            btn.Style.fontWeight = "bold";
                        }
                        if (Bridge.equals(curDate.v, date)) {
                            btn.ClassList.add("simplebutton-active");
                        }
                        btn.Style.borderColor = "transparent";

                        if (System.DateTime.lt(curDate.v, startDate) || System.DateTime.gt(curDate.v, endDate)) {
                            //btn.Style.Color = "rgb(211, 211, 211)";
                        } else if (System.DateTime.getDayOfWeek(curDate.v) === System.DayOfWeek.Saturday || System.DateTime.getDayOfWeek(curDate.v) === System.DayOfWeek.Sunday) {
                            btn.Style.color = "rgb(191, 11, 11)";
                            btn.Style.filter = "brightness(110%)";
                        } else {
                            btn.Style.filter = "brightness(110%)";
                        }
                        btn.Content.onkeydown = Bridge.fn.cacheBind(this, this.BlockTabEvent);

                        doc.appendChild(ExpressCraft.Control.op_Implicit(btn));

                        offsetStart = (offsetStart + 1) | 0;

                        if (offsetStart > 6) {
                            row = (row + 1) | 0;
                            offsetStart = 0;
                        }

                        startOutside = System.DateTime.addDays(System.DateTime.getDate(startOutside), 1);
                        if (System.DateTime.getHour(startOutside) === 23) {
                            startOutside = System.DateTime.addHours(startOutside, 1);
                        }
                    }
                    for (var x = 0; x < 7; x = (x + 1) | 0) {
                        var label = ExpressCraft.Control.Label(ExpressCraft.DateControl.Days[System.Array.index(x, ExpressCraft.DateControl.Days)], 0, 0);
                        ExpressCraft.Helper.SetLocation(label, "(100% * " + System.Double.format((x * 0.1428)) + " + ((100% * 0.1428) * 0.45) - 6px)", 0);
                        //Bounds = new Vector4("(100% * " + (offsetStart * 0.1428) + ")", "((100% * " + (row * 0.1666) + ") + (100% * 0.1666))", "(100% * 0.1428)", "((100% * " + 0.1666 + ") + (100% * 0.1666))"), //  offsetStart * 30,  (22 * row) - 6, 30, 22
                        if (ExpressCraft.Helper.NotDesktop) {
                            label.style.fontSize = "14px";
                        }

                        doc.appendChild(label);

                    }
                    break;
                case ExpressCraft.DateControl.DisplayMode.Month: 
                    break;
                case ExpressCraft.DateControl.DisplayMode.Year: 
                    break;
                default: 
                    break;
            }

            ExpressCraft.Helper.Empty(this.ContentRange.Content); // empty and re-create
            this.ContentRange.Content.appendChild(doc);
        },
        BlockTabEvent: function (ev) {
            if (ev.keyCode === 9) {
                if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                    this.OnRequestToClose();
                }
                ev.preventDefault();
            }
        },
        MoveLeft: function () {
            this.MoveLeftOrRight(-1);

        },
        MoveUp: function () {
            return;
        },
        MoveLeftOrRight: function (timesValue) {
            var date = this.GetViewDateTime();

            switch (this._activeDisplayMode) {
                default: 
                case ExpressCraft.DateControl.DisplayMode.Day: 
                    date = System.DateTime.addMonths(date, (Bridge.Int.mul(1, timesValue)));
                    break;
                case ExpressCraft.DateControl.DisplayMode.Month: 
                    date = System.DateTime.addMonths(date, (Bridge.Int.mul(12, timesValue)));
                    break;
                case ExpressCraft.DateControl.DisplayMode.Year: 
                    date = System.DateTime.addYears(date, (Bridge.Int.mul(120, timesValue)));
                    break;
            }

            this.SetViewDateTime(date);
        },
        MoveRight: function () {
            this.MoveLeftOrRight(1);
        }
    }
    });

    Bridge.ns("ExpressCraft.DateControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.DateControl, {
        f1: function (ev) {
            this.MoveUp();
        },
        f2: function (ev) {
            this.MoveLeft();
        },
        f3: function (ev) {
            this.MoveRight();
        },
        f4: function (ev) {
            this.ActiveDisplayMode = ExpressCraft.DateControl.DisplayMode.Day;
            this.SetViewDateTime(System.DateTime.getToday());

            if (!Bridge.staticEquals(this.OnDateChanged, null)) {
                this.OnDateChanged(System.DateTime.getToday());
            }

            if (Bridge.equals(this.GetViewDateTime(), System.DateTime.getToday())) {
                if (!Bridge.staticEquals(this.OnRequestToClose, null)) {
                    this.OnRequestToClose();
                }
            }
        }
    });

    Bridge.define("ExpressCraft.GridLookupEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            gridView: null,
            FieldName: null,
            DisplayName: null,
            Visible: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor4.call(this, "inputcontrol", ExpressCraft.ComboBoxTypes.Default);
                var $t;
                this.gridView = ($t = new ExpressCraft.GridView(true, true), $t.Size = new ExpressCraft.Vector2.$ctor1(250, 400), $t);
                this.gridView.ContextMenu = null;
                this.gridView.OnFocusedRowChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f1);

                this.gridView.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f2);
                this.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridLookupEdit.f3);
        }
    },
    methods: {
        ShowPopup: function () {
            if (this.Visible) {
                return;
            }
            var x = this.Content.getBoundingClientRect();
            this.gridView.Location = new ExpressCraft.Vector2.$ctor1(x.left, x.top + x.height);

            ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
            this.Content.parentElement.appendChild(ExpressCraft.Control.op_Implicit(this.gridView));

            this.gridView.RenderGrid();

            this.gridView.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
            this.Visible = true;
        },
        ClosePopup: function () {
            if (this.Visible) {
                this.gridView.Content.parentElement.removeChild(ExpressCraft.Control.op_Implicit(this.gridView));
                ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                this.Visible = false;
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.GridLookupEdit", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.GridLookupEdit, {
        f1: function (rowHandle, PrevRowhandle) {
            var $t1;
            ExpressCraft.Helper.Empty(this.Content);

            if (rowHandle > -1) {
                this.Content.appendChild(($t1 = document.createElement('option'), $t1.innerHTML = (Bridge.as(this.gridView.GetRowCellValue$3(rowHandle, this.DisplayName), System.String)), $t1.value = (Bridge.as(this.gridView.GetRowCellValue$3(rowHandle, this.FieldName), System.String)), $t1));
            }
            if (this.Visible) {
                this.ClosePopup();
            }
        },
        f2: function (ev) {
            this.ClosePopup();
        },
        f3: function (ev) {
            ev.preventDefault();
            ev.stopImmediatePropagation();
            if (this.Visible) {
                this.ClosePopup();
            } else {
                this.ShowPopup();
            }
        }
    });

    Bridge.define("ExpressCraft.GridView", {
        inherits: [ExpressCraft.Control],
        fields: {
            GridHeader: null,
            GridHeaderContainer: null,
            GridBodyContainer: null,
            GridBody: null,
            BottonOfTable: null,
            RightOfTable: null,
            RightOfTableHeader: null,
            _dataSource: null,
            OnFocusedRowChanged: null,
            OnRowDoubleClick: null,
            OnCustomRowStyle: null,
            OnRowClick: null,
            OnDoubleClick: null,
            OnCellRowMouseDown: null,
            SelectedRows: null,
            VisibleRowHandles: null,
            _allowRowDrag: false,
            AutoGenerateColumnsFromSource: false,
            AllowMultiSelection: false,
            showAutoFilterRow: false,
            UnitHeight: 0,
            _columnAutoWidth: false,
            _focusedcolumn: 0,
            _focusedDataHandle: 0,
            _columnHeadersVisible: false,
            _useEditForm: false,
            SortSettings: null,
            Columns: null,
            PrevRenderGridScrollId: 0,
            clickTimeDiff: null,
            headingClass: null,
            cellClass: null,
            DragIndex: 0,
            ResizeIndex: 0,
            ResizePageX: 0,
            ResizeSpan: null,
            OnColumnOnClick: null,
            OnColumnDragStart: null,
            OnColumnDragOver: null,
            OnColumnDrop: null,
            OnColumnMouseDown: null,
            OnColumnMouseMove: null,
            OnColumnMouseLeave: null,
            OnRowDragStart: null,
            lastId: 0,
            PrevScroll: 0,
            FilterRowOnChange: null,
            RenderTime: 0,
            renderGridInternal: null
        },
        props: {
            AllowRowDrag: {
                get: function () {
                    return this._allowRowDrag;
                },
                set: function (value) {
                    if (this._allowRowDrag !== value) {
                        this._allowRowDrag = value;
                        this.RenderGrid();
                    }
                }
            },
            ShowAutoFilterRow: {
                get: function () {
                    return this.showAutoFilterRow;
                },
                set: function (value) {
                    if (this.showAutoFilterRow !== value) {
                        this.showAutoFilterRow = value;
                        if (!this.showAutoFilterRow) {
                            // Remove Filter.						
                            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                                //FilterEdit = null;
                                this.Columns.getItem(i).FilterEdit = null;
                                this.Columns.getItem(i).FilterValue = null;
                            }
                            this.CalculateVisibleRows();
                        }
                        this.RenderGrid();
                    }
                }
            },
            FocusedColumn: {
                get: function () {
                    return this._focusedcolumn;
                },
                set: function (value) {
                    if (value !== this.FocusedColumn) {
                        var prev = this._focusedcolumn;
                        this._focusedcolumn = value;
                        //RenderGrid();
                    }
                }
            },
            FocusedDataHandle: {
                get: function () {
                    return this._focusedDataHandle;
                },
                set: function (value) {
                    if (value !== this._focusedDataHandle) {
                        var prev = this._focusedDataHandle;
                        this._focusedDataHandle = value;
                        this.RenderGrid();
                        if (!Bridge.staticEquals(this.OnFocusedRowChanged, null)) {
                            this.OnFocusedRowChanged(this._focusedDataHandle, prev);
                        }
                    }
                }
            },
            ColumnHeadersVisible: {
                get: function () {
                    return this._columnHeadersVisible;
                },
                set: function (value) {
                    if (value !== this._columnHeadersVisible) {
                        this._columnHeadersVisible = value;

                        this.SetDefaultSizes();

                        this.RenderGrid();
                    }
                }
            },
            ColumnAutoWidth: {
                get: function () {
                    return this._columnAutoWidth;
                },
                set: function (value) {
                    if (value) {
                        this.GridBodyContainer.style.overflowX = "hidden";
                    } else {
                        this.GridBodyContainer.style.overflowX = "auto";
                    }

                    if (this._columnAutoWidth !== value) {
                        this._columnAutoWidth = value;
                        this.RenderGrid();
                    }
                }
            },
            UseEditForm: {
                get: function () {
                    return this._useEditForm;
                },
                set: function (value) {
                    if (value !== this._useEditForm) {
                        this._useEditForm = value;
                        this.RenderGrid();
                    }
                }
            },
            DataSource: {
                get: function () {
                    return this._dataSource;
                },
                set: function (value) {
                    this.FocusedDataHandle = -1;
                    this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                    this.VisibleRowHandles = new (System.Collections.Generic.List$1(System.Int32))();

                    if (this._dataSource != null) {
                        this._dataSource.removeOnDataSourceChanged(Bridge.fn.cacheBind(this, this.DataSource_OnDataSourceChanged));
                    }

                    this._dataSource = value;

                    if (this._dataSource != null) {
                        this._dataSource.addOnDataSourceChanged(Bridge.fn.cacheBind(this, this.DataSource_OnDataSourceChanged));

                        if (this.Columns.Count === 0 && this.AutoGenerateColumnsFromSource) {
                            var sw = System.Diagnostics.Stopwatch.startNew();

                            for (var i = 0; i < this._dataSource.ColumnCount; i = (i + 1) | 0) {
                                var sw1 = System.Diagnostics.Stopwatch.startNew();

                                var gvc = new ExpressCraft.GridViewColumn(this);
                                gvc.Caption = this._dataSource.Columns.getItem(i).FieldName;
                                gvc.Column = this._dataSource.Columns.getItem(i);
                                gvc.Visible = true;

                                switch (this._dataSource.Columns.getItem(i).DataType) {
                                    case ExpressCraft.DataType.Byte: 
                                    case ExpressCraft.DataType.Short: 
                                    case ExpressCraft.DataType.Integer: 
                                    case ExpressCraft.DataType.Long: 
                                    case ExpressCraft.DataType.Float: 
                                    case ExpressCraft.DataType.Double: 
                                    case ExpressCraft.DataType.Decimal: 
                                        gvc.BodyApparence.Alignment = "right";
                                        break;
                                    case ExpressCraft.DataType.DateTime: 
                                        if (ExpressCraft.Settings.GridViewAutoColumnFormatDates) {
                                            if (ExpressCraft.Settings.GridViewAutoColumnGenerateFormatAsDate) {
                                                gvc.FormatString = "{0:d}";
                                            } else {
                                                gvc.FormatString = "{0:yyyy-MM-dd}";
                                            }
                                        }
                                        break;
                                    case ExpressCraft.DataType.Bool: 
                                        gvc.CellDisplay = new ExpressCraft.GridViewCellDisplayCheckBox();
                                        break;
                                }

                                this.Columns.add(gvc);

                                sw.stop();
                                System.Console.WriteLine("DataSource AddColumn Auto: " + sw1.milliseconds());
                            }

                            sw.stop();
                            System.Console.WriteLine("DataSource AutoColumns: " + sw.milliseconds());
                        }
                        this.RenderGrid();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                this._allowRowDrag = false;
                this.AutoGenerateColumnsFromSource = true;
                this.AllowMultiSelection = true;
                this.showAutoFilterRow = false;
                this.UnitHeight = 28.0;
                this._columnAutoWidth = false;
                this._focusedcolumn = -1;
                this._focusedDataHandle = -1;
                this._columnHeadersVisible = true;
                this._useEditForm = true;
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
                this.PrevRenderGridScrollId = -1;
                this.DragIndex = -1;
                this.ResizeIndex = -1;
                this.ResizePageX = 0;
                this.lastId = -1;
                this.PrevScroll = -1;
                this.RenderTime = -1;
            },
            ctor: function (autoGenerateColumns, columnAutoWidth) {
                if (autoGenerateColumns === void 0) { autoGenerateColumns = true; }
                if (columnAutoWidth === void 0) { columnAutoWidth = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "grid");
                if (ExpressCraft.Helper.NotDesktop) {
                    this.UnitHeight = 53;
                    this.headingClass = "heading heading-responsive";

                    this.cellClass = "cell cell-responsive";
                } else {
                    this.UnitHeight = 28;
                    this.headingClass = "heading";
                    this.cellClass = "cell";
                }

                this.Content.style.overflow = "hidden";

                this.renderGridInternal = Bridge.fn.bind(this, function () {
                    var StartedWith = this.RenderTime;

                    this.GridHeaderContainer.scrollLeft = this.GridBodyContainer.scrollLeft;
                    if (ExpressCraft.Settings.GridViewBlurOnScroll) {
                        this.ProcessBlur();
                    }

                    this.ValidateGridSize();

                    if (this.ColumnCount() === 0) {
                        this.ClearGrid();
                        return;
                    }

                    var RawLeftCellIndex = 0;
                    var RawLeftCellScrollPadding = 0;

                    var RawLeftCellCount = this.Columns.Count;

                    var LeftLocation = 0;
                    var foundLeftLocation = false;
                    var foundRightLocation = false;

                    var ClientWidth = this.GridBodyContainer.clientWidth;
                    var ViewWidth = (this.GridBodyContainer.scrollLeft + ClientWidth) | 0;
                    var _columnAutoWidthSingle = 0.0;

                    if (this._columnAutoWidth) {
                        _columnAutoWidthSingle = ClientWidth === 0 ? 0.0 : ((Bridge.Int.div(ClientWidth, this.GetVisibleCount())) | 0);
                    }

                    var MaxWidth;
                    var LastWidth;

                    for (var x = 0; x < this.Columns.Count; x = (x + 1) | 0) {
                        if (!this.Columns.getItem(x).Visible) {
                            continue;
                        }

                        this.Columns.getItem(x).CachedX = LeftLocation;
                        LastWidth = this._columnAutoWidth ? _columnAutoWidthSingle : this.Columns.getItem(x).Width;
                        LeftLocation += LastWidth;
                        if (!foundLeftLocation && LeftLocation >= this.GridBodyContainer.scrollLeft) {
                            foundLeftLocation = true;
                            RawLeftCellIndex = x;
                            RawLeftCellScrollPadding = LeftLocation - this.GridBodyContainer.scrollLeft;
                        }
                        if (foundLeftLocation && !foundRightLocation && LeftLocation >= ViewWidth) {
                            foundRightLocation = true;
                            RawLeftCellCount = (x + 1) | 0;
                            break;
                        }
                        if (StartedWith !== this.RenderTime) {
                            return;
                        }
                    }

                    MaxWidth = LeftLocation;

                    var colFragment = document.createDocumentFragment();

                    var uboundRowCount = (RawLeftCellCount - 1) | 0;

                    if (this._columnHeadersVisible) {
                        for (var x1 = RawLeftCellIndex; x1 < RawLeftCellCount; x1 = (x1 + 1) | 0) {
                            if (x1 >= this.Columns.Count) {
                                break;
                            }
                            if (!this.Columns.getItem(x1).Visible) {
                                continue;
                            }

                            var gcol = this.Columns.getItem(x1);
                            var colIndex = x1;
                            var apparence = gcol.HeadingApparence;

                            var col = ExpressCraft.Control.Label$3(gcol.Caption, (this._columnAutoWidth ? gcol.CachedX : gcol.CachedX), 0, (this._columnAutoWidth ? _columnAutoWidthSingle : gcol.Width) - (x1 === uboundRowCount ? 0 : 1), apparence.IsBold, false, this.headingClass, apparence.Alignment, apparence.Forecolor);
                            if (gcol.SortedMode !== ExpressCraft.GridViewSortMode.None) {
                                var sortImage = ExpressCraft.Control.Div$1(gcol.SortedMode === ExpressCraft.GridViewSortMode.Asc ? "grid-sort-up" : "grid-sort-down");
                                ExpressCraft.Helper.SetBounds$1(sortImage, "(100% - 13px)", 11, 9, 5);
                                col.appendChild(sortImage);
                            }

                            this.SetupColumn(col, x1, gcol);

                            colFragment.appendChild(col);

                            if (StartedWith !== this.RenderTime) {
                                return;
                            }
                        }
                    }



                    if (this._dataSource == null || this._dataSource.RowCount === 0 || this._dataSource.ColumnCount === 0) {
                        this.ClearGrid();
                        this.GridHeader.appendChild(colFragment);
                        return;
                    }

                    var ppr = this.PixelsPerRow(this._dataSource.RowCount);

                    var RawTopRowIndex = this.GetRawTopRowIndex();
                    var RawTopRowScrollPadding = RawTopRowIndex % 1.0;
                    var RawVisibleRowCount = this.GetRawVisibleRowCount();

                    var Length = (Bridge.Int.clip32((RawVisibleRowCount + RawTopRowIndex)) + 1) | 0;
                    var start = Bridge.Int.clip32(RawTopRowIndex);
                    for (var x2 = (this.SelectedRows.SL.Count - 1) | 0; x2 >= 0; x2 = (x2 - 1) | 0) {
                        var Found = false;
                        for (var i = start; i < Length; i = (i + 1) | 0) {
                            if (i < this.DataSource.RowCount) {
                                var DataRowhandle = this.GetDataSourceRow(i);
                                if (this.SelectedRows.GetIndexValueByHardListIndex(this.SelectedRows.SL.getItem(x2)).Index === DataRowhandle) {
                                    Found = true;
                                    break;
                                }
                            }
                            if (StartedWith !== this.RenderTime) {
                                return;
                            }
                        }
                        if (StartedWith !== this.RenderTime) {
                            return;
                        }
                        if (!Found) {
                            this.SelectedRows.SL.removeAt(x2);
                        }
                    }

                    var rowFragment = document.createDocumentFragment();

                    if (ExpressCraft.Settings.GridViewRowScrollPadding > 0) {
                        start = (start - ExpressCraft.Settings.GridViewRowScrollPadding) | 0;
                        Length = (Length + ExpressCraft.Settings.GridViewRowScrollPadding) | 0;
                    }

                    var Y = (start * (ppr)) - RawTopRowScrollPadding;


                    if (this.ShowAutoFilterRow) {
                        Length = (Length - 1) | 0;
                        Y += this.UnitHeight;
                    }

                    // #TODO - CLEAN...
                    if (start < 0) {
                        start = 0;
                    }
                    if (Length > this.DataSource.RowCount) {
                        Length = this.DataSource.RowCount;
                    }

                    for (var i1 = start; i1 < Length; i1 = (i1 + 1) | 0) {
                        var DataRowhandle1 = this.GetDataSourceRow(i1);
                        var dr = ExpressCraft.Control.Div$1(System.String.concat((i1 % 2 === 0 ? "cellrow even" : "cellrow"), (this.SelectedRows.GetValue(DataRowhandle1, true) ? " cellrow-selected" : ""), (DataRowhandle1 === this.FocusedDataHandle ? " focusedrow" : "")));

                        ExpressCraft.Helper.SetBounds$1(dr, 0, Y, this._columnAutoWidth ? ClientWidth : MaxWidth, this.UnitHeight);
                        dr.setAttribute("i", System.Convert.toString(Bridge.box(DataRowhandle1, System.Int32)));

                        dr.onclick = this.OnRowClick;
                        if (ExpressCraft.Settings.IsChrome) {
                            dr.ondblclick = this.OnDoubleClick;
                        }

                        for (var x3 = RawLeftCellIndex; x3 < RawLeftCellCount; x3 = (x3 + 1) | 0) {
                            var col1 = this.Columns.getItem(x3);
                            if (!col1.Visible) {
                                continue;
                            }

                            var apparence1 = col1.BodyApparence;
                            var useDefault = false;
                            var cell;
                            if (col1.CellDisplay == null || ((useDefault = col1.CellDisplay.UseDefaultElement))) {
                                cell = ExpressCraft.Control.Label$3(col1.GetDisplayValueByDataRowHandle(DataRowhandle1), col1.CachedX, 0, this._columnAutoWidth ? _columnAutoWidthSingle : col1.Width, apparence1.IsBold, false, this.cellClass, apparence1.Alignment, apparence1.Forecolor);

                                dr.appendChild(useDefault ? col1.CellDisplay.OnCreateDefault(cell, this, DataRowhandle1, x3) : cell);
                            } else {
                                cell = col1.CellDisplay.OnCreate(this, DataRowhandle1, x3);
                                ExpressCraft.Helper.SetLocation(cell, col1.CachedX, 0);
                                cell.style.width = ExpressCraft.Helper.ToPx(Bridge.box((this._columnAutoWidth ? _columnAutoWidthSingle : col1.Width), System.Single, System.Single.format, System.Single.getHashCode));

                                dr.appendChild(cell);
                            }
                            cell.setAttribute("i", x3.toString());
                            cell.onmousedown = this.OnCellRowMouseDown;
                        }

                        if (this.AllowRowDrag) {
                            dr.setAttribute("draggable", "true");

                            dr.ondragstart = this.OnRowDragStart;
                        }

                        rowFragment.appendChild(dr);

                        Y += this.UnitHeight;

                        if (StartedWith !== this.RenderTime) {
                            return;
                        }
                    }

                    this.ClearGrid();

                    if (!Bridge.staticEquals(this.OnCustomRowStyle, null)) {
                        var count = rowFragment.childElementCount;
                        for (var i2 = 0; i2 < count; i2 = (i2 + 1) | 0) {
                            if (StartedWith !== this.RenderTime) {
                                return;
                            }

                            try {
                                var child = rowFragment.children[System.Array.index(i2, rowFragment.children)];
                                this.OnCustomRowStyle(child, parseInt(child.getAttribute("i")));

                            }
                            catch (ex) {
                                ex = System.Exception.create(ex);
                                if (ExpressCraft.Application.AplicationDefition === ExpressCraft.ApplicationDefitnion.ExpressCraftConsole) {
                                    ExpressCraft.ConsoleForm.Log(ex.toString(), ExpressCraft.ConsoleLogType.Error);
                                }
                            }
                        }
                    }

                    this.GridHeader.appendChild(colFragment);
                    this.GridBody.appendChild(rowFragment);

                    if (StartedWith !== this.RenderTime) {
                        return;
                    }

                    this.RenderTime = -1;
                });

                this.GridHeaderContainer = ExpressCraft.Control.Div$1("heading-container");

                this.GridHeader = ExpressCraft.Control.Div();
                ExpressCraft.Helper.SetBounds$1(this.GridHeader, "0", "0", "0", "29px");
                this.GridBodyContainer = ExpressCraft.Control.Div();

                this.GridBodyContainer.style.overflowX = "auto";
                this.GridBodyContainer.style.overflowY = "auto";

                this.GridHeaderContainer.style.overflow = "hidden";

                this.GridBody = ExpressCraft.Control.Div();
                ExpressCraft.Helper.SetBounds$1(this.GridBody, "0", "0", "0", "0");

                this.GridBodyContainer.appendChild(this.GridBody);
                this.GridHeaderContainer.appendChild(this.GridHeader);

                this.SetDefaultSizes();

                this.Content.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f1);

                this.OnResize = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f2);
                this.GridBodyContainer.onscroll = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f2);
                this.OnLoaded = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f3);
                this.OnCellRowMouseDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f4);
                this.OnRowClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f5);
                this.Content.tabIndex = 0;
                this.OnDoubleClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f6);

                this.Content.onkeydown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f7);

                this.ContextMenu = new ExpressCraft.ContextMenu();

                this.ContextMenu.ContextItems.addRange(System.Array.init([new ExpressCraft.ContextItem.$ctor1("Sort Ascending", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f8)), new ExpressCraft.ContextItem.$ctor1("Sort Descending", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f9)), new ExpressCraft.ContextItem.$ctor1("Clear All Sorting", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f10), true), new ExpressCraft.ContextItem.$ctor2("Group By This Column"), new ExpressCraft.ContextItem.$ctor2("Hide Group By Box", true), new ExpressCraft.ContextItem.$ctor2("Hide This Column"), new ExpressCraft.ContextItem.$ctor2("View Columns"), new ExpressCraft.ContextItem.$ctor2("Save Column Layout"), new ExpressCraft.ContextItem.$ctor2("Best Fit"), new ExpressCraft.ContextItem.$ctor2("Best Fit (all columns)", true), new ExpressCraft.ContextItem.$ctor2("Filter Editor..."), new ExpressCraft.ContextItem.$ctor2("Show Find Panel"), new ExpressCraft.ContextItem.$ctor2("Show Auto Filter Row"), new ExpressCraft.ContextItem.$ctor1("Select All", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f11)), new ExpressCraft.ContextItem.$ctor1("Unselect All", Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f12))], ExpressCraft.ContextItem));

                this.Content.oncontextmenu = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f13);

                this.OnColumnOnClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f14);
                this.OnColumnDragStart = $asm.$.ExpressCraft.GridView.f15;
                this.OnColumnDragOver = $asm.$.ExpressCraft.GridView.f16;
                this.OnColumnDrop = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f17);
                this.OnColumnMouseDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f18);
                this.OnColumnMouseMove = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f19);

                this.OnColumnMouseLeave = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f20);

                this.OnRowDragStart = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f21);

                ExpressCraft.Helper.AppendChildren$1(this.Content, [this.GridHeaderContainer, this.GridBodyContainer]);

                this.FilterRowOnChange = Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f22);

                this.AutoGenerateColumnsFromSource = autoGenerateColumns;
                this.ColumnAutoWidth = columnAutoWidth;
            }
        },
        methods: {
            SetVisibleRowHandles: function (T, Cells, asc) {
                if (asc) {
                    var sorted = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).orderBy($asm.$.ExpressCraft.GridView.f23).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted).select($asm.$.ExpressCraft.GridView.f24).toList(System.Int32);
                } else {
                    var sorted1 = System.Linq.Enumerable.from(Cells).select(function (x, i) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,T))(i, x);
                        }).orderByDescending($asm.$.ExpressCraft.GridView.f23).toList(System.Collections.Generic.KeyValuePair$2(System.Int32,T));

                    this.VisibleRowHandles = System.Linq.Enumerable.from(sorted1).select($asm.$.ExpressCraft.GridView.f24).toList(System.Int32);
                }
            },
            CalculateVisibleRows: function () {
                var calcVisibleRows = new (System.Collections.Generic.List$1(System.Int32))();

                for (var y = 0; y < this.RowCount(); y = (y + 1) | 0) {
                    var AddIndex = true;

                    for (var x = 0; x < this.ColumnCount(); x = (x + 1) | 0) {
                        if (!this.Columns.getItem(x).ValueMatchFilter(y)) {
                            AddIndex = false;
                            break;
                        }
                    }
                    if (AddIndex) {
                        calcVisibleRows.add(y);
                    }
                }

                this.VisibleRowHandles = calcVisibleRows;
                this.RenderGrid();
            },
            SetDefaultSizes: function () {
                if (this._columnHeadersVisible) {
                    ExpressCraft.Helper.SetBounds$1(this.GridHeaderContainer, 0, 0, "100%", this.UnitHeight + 1);
                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, this.UnitHeight + 3, "100%", "(100% - " + System.Single.format((this.UnitHeight + 3)) + "px)");
                    this.GridHeader.style.visibility = "inherit";
                    this.GridHeaderContainer.style.visibility = "inherit";
                } else {
                    this.GridHeader.style.visibility = "hidden";
                    this.GridHeaderContainer.style.visibility = "hidden";

                    ExpressCraft.Helper.SetBounds$1(this.GridBodyContainer, 0, 1, "100%", "(100% - 1px)");
                }
            },
            SortColumn: function () {
                if (this.SortSettings != null) {
                    this.SortColumn$1(this.SortSettings.Column, this.SortSettings.SortMode);
                }
            },
            SortColumn$1: function (column, sort) {
                var $t;
                if (sort === void 0) { sort = 1; }
                column.SortedMode = sort;

                if (this.SortSettings != null && !Bridge.referenceEquals(this.SortSettings.Column, column)) {
                    this.SortSettings.Column.SortedMode = ExpressCraft.GridViewSortMode.None;
                    this.VisibleRowHandles = null;
                }

                if (sort === ExpressCraft.GridViewSortMode.None) {
                    this.VisibleRowHandles = null;
                } else {
                    var sort1 = sort === ExpressCraft.GridViewSortMode.Asc;

                    switch (column.Column.DataType) {
                        default: 
                        case ExpressCraft.DataType.Object: 
                            this.SetVisibleRowHandles(System.Object, (Bridge.as(column.Column, ExpressCraft.DataColumnObject)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Bool: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Boolean), (Bridge.as(column.Column, ExpressCraft.DataColumnBool)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.DateTime: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.DateTime), (Bridge.as(column.Column, ExpressCraft.DataColumnDateTime)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.String: 
                            this.SetVisibleRowHandles(System.String, (Bridge.as(column.Column, ExpressCraft.DataColumnString)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Byte: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Byte), (Bridge.as(column.Column, ExpressCraft.DataColumnByte)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Short: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Int16), (Bridge.as(column.Column, ExpressCraft.DataColumnShort)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Integer: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Int32), (Bridge.as(column.Column, ExpressCraft.DataColumnInteger)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Long: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Int64), (Bridge.as(column.Column, ExpressCraft.DataColumnLong)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Float: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Single), (Bridge.as(column.Column, ExpressCraft.DataColumnFloat)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Double: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Double), (Bridge.as(column.Column, ExpressCraft.DataColumnDouble)).Cells, sort1);
                            break;
                        case ExpressCraft.DataType.Decimal: 
                            this.SetVisibleRowHandles(System.Nullable$1(System.Decimal), (Bridge.as(column.Column, ExpressCraft.DataColumnDecimal)).Cells, sort1);
                            break;
                    }
                }

                this.RenderGrid();
                this.SortSettings = ($t = new ExpressCraft.SortSetting(), $t.Column = column, $t.SortMode = sort, $t);
            },
            ClearSortColumn: function () {
                if (this.SortSettings != null) {
                    this.SortColumn$1(this.SortSettings.Column, ExpressCraft.GridViewSortMode.None);
                }
            },
            ColumnCount: function () {
                return this.Columns.Count;
            },
            RowCount: function () {
                if (this._dataSource == null) {
                    return 0;
                }
                return this._dataSource.RowCount;
            },
            ScrollToBottom: function () {
                this.GridBodyContainer.scrollTop = (this.GridBody.clientHeight - this.GridBodyContainer.clientHeight) | 0;
            },
            ScrollToTop: function () {
                this.GridBodyContainer.scrollTop = 0;
            },
            GetColumn: function (i) {
                return this.Columns.getItem(i);
            },
            GetFocusedRowCellValue$2: function (columnIndex) {
                return this.GetFocusedRowCellValue$1(this.Columns.getItem(columnIndex));
            },
            GetFocusedRowCellValue$3: function (FieldName) {
                return this.GetFocusedRowCellValue(this.GetColumnByFieldName(FieldName));
            },
            GetFocusedRowCellValue$1: function (column) {
                return this.GetRowCellValue$1(this.FocusedDataHandle, column);
            },
            GetFocusedRowCellValue: function (column) {
                return this.GetRowCellValue(this.FocusedDataHandle, column);
            },
            GetGridViewColumnByFieldName: function (FieldName) {
                for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                    if (Bridge.referenceEquals(this.Columns.getItem(i).Column.FieldName, FieldName)) {
                        return this.Columns.getItem(i);
                    }
                }
                return null;
            },
            GetGridViewColumnByFieldName$1: function (fieldName, IgnoreCase) {
                if (IgnoreCase === void 0) { IgnoreCase = false; }
                for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                    if (this.Columns.getItem(i) != null && this.Columns.getItem(i).Column != null && System.String.compare(this.Columns.getItem(i).Column.FieldName, fieldName, IgnoreCase) === 0) {
                        return this.Columns.getItem(i);
                    }
                }

                return null;
            },
            GetRowCellValue$1: function (Datahandle, column) {
                return this.GetRowCellValue(Datahandle, column.Column);
            },
            GetRowCellValue: function (Datahandle, column) {
                if (Datahandle === -1) {
                    return null;
                }
                return column.GetCellValue(Datahandle);
            },
            GetRowCellValue$3: function (Datahandle, FieldName) {
                return this.GetRowCellValue(Datahandle, this.GetColumnByFieldName(FieldName));
            },
            GetRowCellValue$2: function (Datahandle, columnIndex) {
                return this.GetRowCellValue$1(Datahandle, this.Columns.getItem(columnIndex));
            },
            GetColumnByFieldName: function (fieldName, IgnoreCase) {
                if (IgnoreCase === void 0) { IgnoreCase = false; }
                if (this.DataSource == null) {
                    return null;
                }

                for (var i = 0; i < this.DataSource.ColumnCount; i = (i + 1) | 0) {
                    if (this.DataSource.Columns.getItem(i) != null && System.String.compare(this.DataSource.Columns.getItem(i).FieldName, fieldName, IgnoreCase) === 0) {
                        return this.DataSource.Columns.getItem(i);
                    }
                }

                return null;
            },
            AddColumn$2: function (caption, fieldname, width, formatstring, alignment, forecolor, isBold) {
                if (width === void 0) { width = 100; }
                if (formatstring === void 0) { formatstring = ""; }
                if (alignment === void 0) { alignment = 3; }
                if (forecolor === void 0) { forecolor = null; }
                if (isBold === void 0) { isBold = false; }
                var col = this.GetColumnByFieldName(fieldname);
                if (col == null) {
                    return;
                }
                this.AddColumn$1(caption, col, width, formatstring, alignment, forecolor, isBold);
            },
            AddColumn$1: function (caption, column, width, formatstring, alignment, forecolor, isBold) {
                var $t;
                if (width === void 0) { width = 100; }
                if (formatstring === void 0) { formatstring = ""; }
                if (alignment === void 0) { alignment = 3; }
                if (forecolor === void 0) { forecolor = null; }
                if (isBold === void 0) { isBold = false; }
                this.AddColumn(($t = new ExpressCraft.GridViewColumn(this, width), $t.Caption = caption, $t.BodyApparence = new ExpressCraft.GridViewCellApparence.$ctor3(isBold, alignment, forecolor), $t.FormatString = formatstring, $t.Column = column, $t));
            },
            AddColumn: function (column) {
                if (column == null) {
                    return;
                }

                this.Columns.add(column);

                this.RenderGrid();
            },
            AddColumns: function (columns) {
                if (columns === void 0) { columns = []; }
                if (columns == null || columns.length === 0) {
                    return;
                }

                this.Columns.addRange(columns);

                this.RenderGrid();
            },
            RemoveColumn: function (column) {
                this.Columns.remove(column);

                this.RenderGrid();
            },
            GetDataSourceRow: function (i) {
                if (this.VisibleRowHandles == null || this.VisibleRowHandles.Count === 0) {
                    return i;
                }
                return this.VisibleRowHandles.getItem(i);
            },
            GetColumnWidths: function () {
                if (this._columnAutoWidth) {
                    return this.GridBodyContainer.clientWidth;
                } else {
                    var width = 0.0;
                    for (var i = 0; i < this.Columns.Count; i = (i + 1) | 0) {
                        width += this.Columns.getItem(i).Width;
                    }
                    return width;
                }
            },
            ClearSelection: function () {
                this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                this.RenderGrid();
            },
            SelectAllRows: function () {
                var length = this.RowCount();
                if (length === 0) {
                    this.SelectedRows.ClearAll();
                } else {
                    var index = System.Array.init(length, 0, System.Int32);
                    for (var i = 0; i < length; i = (i + 1) | 0) {
                        index[System.Array.index(i, index)] = this.GetDataSourceRow(i);
                    }
                    this.SelectedRows.ClearAllSetHardRange(true, index);
                }
                this.RenderGrid();
            },
            DelayedRenderGrid: function () {
                if (ExpressCraft.Settings.GridViewScrollDelayed) {
                    if (this.PrevRenderGridScrollId !== -1) {
                        Bridge.global.clearTimeout(this.PrevRenderGridScrollId);
                        this.PrevRenderGridScrollId = -1;
                    }
                    this.PrevRenderGridScrollId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f25), Math.max(1, ExpressCraft.Settings.GridViewScrollDelayMS));
                } else {
                    this.RenderGrid();
                }
            },
            GetFocusedRow: function () {
                if (this.FocusedDataHandle > -1) {
                    return this.DataSource.getItem(this.GetDataSourceRow(this.FocusedDataHandle));
                } else {
                    return null;
                }
            },
            GetVisibleCount: function () {
                if (this.Columns == null || this.Columns.Count === 0) {
                    return 0;
                }
                var length = this.Columns.Count;
                var length1 = this.Columns.Count;

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    if (!this.Columns.getItem(i).Visible) {
                        length1 = (length1 - 1) | 0;
                    }
                }
                return length1;
            },
            DataSource_OnDataSourceChanged: function (sender, e) {
                this.SortColumn();
                this.RenderGrid();
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
                this.HasRendered = true;
                this.RenderGrid();

                if (this.Content.parentElement != null) {

                }
            },
            GetRawVisibleRowCount: function () {
                return this.GridBodyContainer.clientHeight === 0 ? 0.0 : this.GridBodyContainer.clientHeight / this.UnitHeight;
            },
            GetRawTopRowIndex: function () {
                return this.GridBodyContainer.scrollTop === 0 ? 0.0 : this.GridBodyContainer.scrollTop / this.PixelsPerRow(this.RowCount());
            },
            ValidateGridWidth: function () {
                var width = this.GetColumnWidths();
                this.GridBody.style.width = ExpressCraft.Helper.ToPx(Bridge.box((width), System.Single, System.Single.format, System.Single.getHashCode));
                this.GridHeader.style.width = ExpressCraft.Helper.ToPx(Bridge.box(((width) + 24), System.Single, System.Single.format, System.Single.getHashCode)); // (width).ToPx();
                if (this.RightOfTable == null) {
                    this.RightOfTable = ExpressCraft.Control.Div();
                    this.GridBody.appendChild(this.RightOfTable);
                }
                if (this.RightOfTableHeader == null) {
                    this.RightOfTableHeader = ExpressCraft.Control.Div();
                    this.GridHeader.appendChild(this.RightOfTableHeader);
                }
                ExpressCraft.Helper.SetBounds$1(this.RightOfTable, width - 1, 0, 1, 1);
                ExpressCraft.Helper.SetBounds$1(this.RightOfTableHeader, width - 1, 0, 1, 1);
            },
            PixelsPerRow: function (rowCount) {
                if (rowCount > ExpressCraft.Settings.MaximumPixelScrollingRows) {
                    return 3.0;
                } else {
                    return this.UnitHeight;
                }
            },
            ValidateGridHeight: function () {
                var i = this.RowCount();
                var ppr = this.PixelsPerRow(i);
                var height = ppr * i;

                if (i > ExpressCraft.Settings.MaximumPixelScrollingRows && this.GridBodyContainer.clientHeight > 0) {
                    height += ((this.GridBodyContainer.clientHeight / this.UnitHeight) * ppr);
                }

                this.GridBody.style.height = ExpressCraft.Helper.ToPx(Bridge.box(height, System.Single, System.Single.format, System.Single.getHashCode));
                if (this.BottonOfTable == null) {
                    this.BottonOfTable = ExpressCraft.Control.Div();
                    this.GridBody.appendChild(this.BottonOfTable);
                }
                ExpressCraft.Helper.SetBounds$1(this.BottonOfTable, 0, height - 1, 1, 1);
            },
            ValidateGridSize: function () {
                this.ValidateGridHeight();
                this.ValidateGridWidth();
            },
            ClearHeader: function () {
                ExpressCraft.Helper.Empty(this.GridHeader);
                this.GridHeader.appendChild(this.RightOfTableHeader);
            },
            ClearColumns: function () {
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
            },
            ClearView: function () {
                this.Columns = new (System.Collections.Generic.List$1(ExpressCraft.GridViewColumn))();
                this.VisibleRowHandles = new (System.Collections.Generic.List$1(System.Int32))();
                this.SelectedRows = new (ExpressCraft.HardSoftList$1(System.Boolean))(false);
                this._dataSource = null;
            },
            ClearBody: function () {
                ExpressCraft.Helper.Empty(this.GridBody);
                ExpressCraft.Helper.AppendChildren$1(this.GridBody, [this.RightOfTable, this.BottonOfTable]);
            },
            ClearGrid: function () {
                this.ClearHeader();
                this.ClearBody();
            },
            SetupColumn: function (se, index, gcol) {
                se.setAttribute("i", System.Convert.toString(Bridge.box(index, System.Int32)));
                se.setAttribute("draggable", "true");
                se.onclick = this.OnColumnOnClick;
                se.ondragstart = this.OnColumnDragStart;
                se.ondragover = this.OnColumnDragOver;
                se.ondrop = this.OnColumnDrop;
                se.onmousedown = this.OnColumnMouseDown;
                se.onmousemove = this.OnColumnMouseMove;
                se.onmouseleave = this.OnColumnMouseLeave;
            },
            ProcessBlur: function () {
                if (this.PrevScroll !== this.GridBodyContainer.scrollTop) {
                    this.GridBody.classList.add("blur");
                    if (this.lastId !== -1) {
                        Bridge.global.clearTimeout(this.lastId);
                        this.lastId = -1;
                    }

                    this.lastId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.GridView.f26), 100);
                }
                this.PrevScroll = this.GridBodyContainer.scrollTop;
            },
            RenderGrid: function () {
                if (this.RenderTime > -1) {
                    Bridge.global.clearTimeout(this.RenderTime);
                    this.RenderTime = Bridge.global.setTimeout(this.renderGridInternal, 1);
                } else {
                    this.renderGridInternal();
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.GridView", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.GridView, {
        f1: function (ev) {
            if (this.ResizeIndex === -1) {
                return;
            }
            var x = ev.pageX;
            x = (this.Columns.getItem(this.ResizeIndex).Width + (((x - this.ResizePageX) | 0))) | 0;
            if (x < 24) {
                x = 24;
            }
            this.Columns.getItem(this.ResizeIndex).Width = x;

            ExpressCraft.Form.SetCursor("default");

            ev.preventDefault();
            ev.stopImmediatePropagation();
            ev.stopPropagation();

            this.ResizeIndex = -1;
            this.ResizeSpan = null;
        },
        f2: function (ev) {
            this.DelayedRenderGrid();
        },
        f3: function (ev) {
            this.RenderGrid();
        },
        f4: function (ev) {
            this.FocusedColumn = parseInt(ev.currentTarget.getAttribute("i"));
        },
        f5: function (ev) {
            if (!ExpressCraft.Settings.IsChrome) {
                if (this.clickTimeDiff == null) {
                    this.clickTimeDiff = System.Diagnostics.Stopwatch.startNew();
                } else {
                    this.clickTimeDiff.stop();
                    var ems = this.clickTimeDiff.milliseconds();
                    this.clickTimeDiff = null;

                    if (ems.lt(System.Int64(200))) {
                        this.OnDoubleClick(ev);
                    }
                }
            }

            var DataRowHandle = parseInt(ev.currentTarget.getAttribute("i"));

            var mev = ev;
            if (this.AllowMultiSelection) {
                if (mev.ctrlKey) {
                    this.SelectedRows.AddOrSet(true, DataRowHandle, true);
                    this.RenderGrid();
                    return;
                } else if (mev.shiftKey) {
                    return;
                }
            }
            this.SelectedRows.ClearAndAddOrSet(true, DataRowHandle, true);
            if (DataRowHandle !== this._focusedDataHandle) {
                this.FocusedDataHandle = DataRowHandle;
            } else {
                this.RenderGrid();
            }
        },
        f6: function (ev) {
            var drh = parseInt(ev.currentTarget.getAttribute("i"));
            if (!Bridge.staticEquals(this.OnRowDoubleClick, null)) {
                this.OnRowDoubleClick(drh);
            }

            if (this._useEditForm) {
                var idr = this.DataSource.getItem(drh);

                var fdre = new ExpressCraft.DataRowEditForm(idr, this, true);
                fdre.ShowDialog();

            }
        },
        f7: function (ev) {
            var kev = ev;
            //Global.Alert("CONTROL + A");
            if (this.AllowMultiSelection && kev.ctrlKey && (kev.keyCode === 65 || kev.keyCode === 97)) {
                // keyCode == 65 || keyCode == 97
                //Global.Alert("AllowMultiSelection = TRUE");
                this.SelectAllRows();
            } else {
                //Global.Alert("AllowMultiSelection = FALSE");
            }
        },
        f8: function (cm) {
            if (this.FocusedColumn > -1) {
                this.SortColumn$1(this.Columns.getItem(this.FocusedColumn), ExpressCraft.GridViewSortMode.Asc);
            }
        },
        f9: function (cm) {
            if (this.FocusedColumn > -1) {
                this.SortColumn$1(this.Columns.getItem(this.FocusedColumn), ExpressCraft.GridViewSortMode.Desc);
            }
        },
        f10: function (cm) {
            this.ClearSortColumn();
        },
        f11: function (cm) {
            this.SelectAllRows();
        },
        f12: function (cm) {
            this.ClearSelection();
        },
        f13: function (ev) {
            if (ExpressCraft.Helper.NotDesktop) {
                ev.preventDefault();
                ev.stopPropagation();

                this.OnDoubleClick(ev);
            } else {
                if (this.ContextMenu != null) {
                    this.ContextMenu.Show(ExpressCraft.Helper.GetClientMouseLocation(ev));
                    ev.preventDefault();
                    ev.stopPropagation();
                }
            }

        },
        f14: function (ev) {
            if (this.ResizeIndex >= 0) {
                return;
            }

            var gcol = this.Columns.getItem(parseInt(ev.currentTarget.getAttribute("i")));

            for (var i = 0; i < this.ColumnCount(); i = (i + 1) | 0) {
                if (!Bridge.referenceEquals(this.Columns.getItem(i), gcol)) {
                    this.Columns.getItem(i).SortedMode = ExpressCraft.GridViewSortMode.None;
                }
            }
            switch (gcol.SortedMode) {
                default: 
                case ExpressCraft.GridViewSortMode.None: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.Asc);
                    break;
                case ExpressCraft.GridViewSortMode.Asc: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.Desc);
                    break;
                case ExpressCraft.GridViewSortMode.Desc: 
                    this.SortColumn$1(gcol, ExpressCraft.GridViewSortMode.None);
                    break;
            }
        },
        f15: function (ev) {
            ev.dataTransfer.setData("gridviewColumnDrag", ev.currentTarget.getAttribute("i"));
        },
        f16: function (ev) {
            ev.preventDefault();
        },
        f17: function (ev) {
            if (ev.target == null || !(Bridge.is(ev.target, HTMLSpanElement))) {
                return;
            }

            var target = ev.target;

            if (!Bridge.referenceEquals(target.parentElement, this.GridHeader)) {
                return;
            }

            var HoverIndex = parseInt(target.getAttribute("i"));
            var SelectedIndex = parseInt(ev.dataTransfer.getData("gridviewColumnDrag"));
            if (SelectedIndex === HoverIndex) {
                return;
            }

            if (HoverIndex < 0) {
                return;
            }

            var x = ev.layerX;
            x = (x - target.clientLeft) | 0;
            var w = (Bridge.Int.div(target.clientWidth, 2)) | 0;

            if (HoverIndex === ((SelectedIndex - 1) | 0) && x > w) {
                return;
            }
            if (HoverIndex === ((SelectedIndex + 1) | 0) && x < w) {
                return;
            }

            if (x < w) {
                this.DragIndex = HoverIndex;
            } else {
                this.DragIndex = (HoverIndex + 1) | 0;
            }

            if (this.DragIndex < 0 || SelectedIndex < 0) {
                return;
            }
            var col = this.Columns.getItem(SelectedIndex);
            if (this.DragIndex === this.Columns.Count) {
                this.Columns.remove(col);
                this.Columns.add(col);
            } else {
                var col1 = this.Columns.getItem(this.DragIndex);
                this.Columns.remove(col);
                this.Columns.insert(this.Columns.indexOf(col1), col);
            }

            this.RenderGrid();
        },
        f18: function (ev) {
            var x = ev.layerX;
            var target = ev.target;
            x = (x - target.clientLeft) | 0;
            this.ResizePageX = ev.pageX;

            this.FocusedColumn = parseInt(ev.currentTarget.getAttribute("i"));

            if (x >= ((target.clientWidth - 2) | 0)) {
                this.ResizeIndex = parseInt(target.getAttribute("i"));
                this.ResizeSpan = target;
                ExpressCraft.Form.SetCursor("ew-resize");

                ev.preventDefault();
            } else {
                this.ResizeSpan = null;
                this.ResizeIndex = -1;
            }
        },
        f19: function (ev) {
            if (this.ResizeIndex === -1) {
                var x = ev.layerX;
                var target = ev.target;
                x = (x - target.clientLeft) | 0;

                if (x >= ((target.clientWidth - 2) | 0)) {
                    ExpressCraft.Form.SetCursor("ew-resize");
                    return;
                }
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f20: function (ev) {
            if (this.ResizeIndex === -1) {
                ExpressCraft.Form.SetCursor("default");
            }
        },
        f21: function (ev) {
            ev.dataTransfer.setData("gridviewRowDrag", JSON.stringify(this.DataSource.getItem(parseInt(ev.currentTarget.getAttribute("i"))).GetOfflineDataRow()));
        },
        f22: function (te) {
            this.Columns.getItem(parseInt(te.Content.getAttribute("i"))).FilterValue = te.Text;
        },
        f23: function (x) {
            return x.value;
        },
        f24: function (x) {
            return x.key;
        },
        f25: function () {
            this.RenderGrid();
        },
        f26: function () {
            this.GridBody.classList.remove("blur");
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplayCheckBox", {
        inherits: [ExpressCraft.GridViewCellDisplay],
        statics: {
            fields: {
                resource_checked: null
            },
            ctors: {
                init: function () {
                    this.resource_checked = "checked";
                }
            }
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                var value = gridView.GetRowCellValue$2(dataRowIndex, columnIndex);

                var cell = ExpressCraft.Control.Div$1("cell");
                var input = ExpressCraft.Control.Input("", "checkbox");
                ExpressCraft.Helper.SetBoundsFull$1(input);
                ExpressCraft.Helper.SetChecked(input, value);
                input.style.margin = "0";
                cell.appendChild(input);

                return cell;
            }
        }
    });

    Bridge.define("ExpressCraft.GridViewCellDisplayImage", {
        inherits: [ExpressCraft.GridViewCellDisplay],
        fields: {
            UseBase64Resource: false
        },
        methods: {
            OnCreate: function (gridView, dataRowIndex, columnIndex) {
                var src = ExpressCraft.Helper.HtmlUrlEscape((System.String.concat(gridView.GetRowCellValue$2(dataRowIndex, columnIndex), "")));
                var imgDiv = ExpressCraft.Control.Div$1("cell");

                ExpressCraft.Helper.SetImage(imgDiv, src, !this.UseBase64Resource);

                return imgDiv;
            }
        }
    });

    Bridge.define("ExpressCraft.ImageEdit", {
        inherits: [ExpressCraft.Control],
        fields: {
            _noImageDataText: null,
            _isURL: false,
            _image: null
        },
        props: {
            isUrl: {
                get: function () {
                    return this._isURL;
                },
                set: function (value) {
                    if (this._isURL !== value) {
                        this._isURL = value;
                        this.RefreshImage();
                    }
                }
            },
            Image: {
                get: function () {
                    return this._image;
                },
                set: function (value) {

                    if (Bridge.referenceEquals(this._image, value)) {
                        return;
                    }
                    this._image = value;
                    this.RefreshImage();
                }
            }
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "inputcontrol");
                this._noImageDataText = new ExpressCraft.Control.$ctor5("form-heading-title");
                this._noImageDataText.Content.innerHTML = "No image data";
                this._noImageDataText.Content.style.color = "black";
                this._noImageDataText.Content.style.visibility = "inherit";

                this.Content.appendChild(ExpressCraft.Control.op_Implicit(this._noImageDataText));
            }
        },
        methods: {
            RefreshImage: function () {
                if (System.String.isNullOrWhiteSpace(this._image)) {
                    this._image = "";
                    this._noImageDataText.Content.style.visibility = "hidden";
                } else {
                    this._noImageDataText.Content.style.visibility = "inherit";
                }
                ExpressCraft.Helper.SetImage$1(this, this._image, this._isURL);
            }
        }
    });

    Bridge.define("ExpressCraft.LayoutRowGap", {
        inherits: [ExpressCraft.LayoutRow],
        props: {
            Height: 0
        },
        ctors: {
            ctor: function (height, label) {
                if (label === void 0) { label = ""; }

                this.$initialize();
                ExpressCraft.LayoutRow.ctor.call(this);
                this.Height = height;
                this.Label = label;
            }
        }
    });

    Bridge.define("ExpressCraft.ProgressControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            position: 0,
            internalProgressControl: null,
            maximum: 0,
            Step: 0,
            DisableUpdate: false
        },
        props: {
            Maximum: {
                get: function () {
                    return this.maximum;
                },
                set: function (value) {
                    if (value < 1) {
                        value = 1;
                    }
                    if (value < this.position) {
                        this.position = value;
                    }
                    this.maximum = value;
                    if (!this.DisableUpdate) {
                        this.Update();
                    }
                }
            },
            Position: {
                get: function () {
                    return this.position;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    } else {
                        if (value > this.maximum) {
                            value = this.maximum;
                        }
                    }
                    this.position = value;
                    if (!this.DisableUpdate) {
                        this.Update();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.Step = 1;
                this.DisableUpdate = false;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "progressbar");
                this.internalProgressControl = ExpressCraft.Control.Div$1("progressbarbody");
            }
        },
        methods: {
            NextStep: function () {
                this.Position = (this.Position + this.Step) | 0;
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);

                this.Content.appendChild(this.internalProgressControl);

                this.Update();
            },
            Update: function () {
                if (this.DisableUpdate || this.internalProgressControl == null) {
                    return;
                }
                if (this.maximum === 0 || this.position === 0) {
                    this.internalProgressControl.style.width = "0%";
                } else {
                    var source = ((this.position / this.maximum) * 100.00) + '%';
                    this.internalProgressControl.style.width = System.String.concat("calc(", source, " - 2px)");
                }
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonButton", {
        inherits: [ExpressCraft.Control],
        fields: {
            _icon: null,
            _iconURL: null,
            _caption: null,
            BeginGroup: false,
            IsSmallCaption: false,
            OnItemClick: null,
            enabled: false,
            captionDiv: null,
            imageDiv: null,
            AfterItemClick: null
        },
        props: {
            Icon: {
                get: function () {
                    return this._icon;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._icon, value)) {
                        this._icon = value;
                        this.ProcessImage();
                    }
                }
            },
            IconURL: {
                get: function () {
                    return this._iconURL;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._iconURL, value)) {
                        this._iconURL = value;
                        this.ProcessImage();
                    }
                }
            },
            Caption: {
                get: function () {
                    return this._caption;
                },
                set: function (value) {
                    if (!Bridge.referenceEquals(this._caption, value)) {
                        this._caption = value;
                        this.ProcessCaption();
                    }
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.setEnabled(value);
                }
            }
        },
        ctors: {
            init: function () {
                this._icon = "";
                this._iconURL = "";
                this._caption = "";
                this.BeginGroup = false;
                this.IsSmallCaption = false;
                this.enabled = true;
            },
            ctor: function (caption, _isSmallCaption) {
                if (caption === void 0) { caption = ""; }
                if (_isSmallCaption === void 0) { _isSmallCaption = false; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, _isSmallCaption ? "ribbonbuttonsmall" : "ribbonbutton");
                this.Caption = caption;
                this.IsSmallCaption = _isSmallCaption;
            }
        },
        methods: {
            setEnabled: function (value) {
                this.ChangeState(value);
                if (value) {
                    if (this.imageDiv != null) {
                        this.imageDiv.classList.remove("disabled");
                    }
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.remove("disabled");
                    }
                } else {
                    if (this.imageDiv != null) {
                        this.imageDiv.classList.add("disabled");
                    }
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.add("disabled");
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;

                this.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.RibbonButton.f1);

                this.ProcessCaption();
                this.ProcessImage();

                this.setEnabled(this.enabled);
            },
            ProcessCaption: function () {
                if (this.captionDiv != null) {
                    this.captionDiv.remove();
                    this.captionDiv = null;
                }
                if (!System.String.isNullOrWhiteSpace(this.Caption)) {
                    this.captionDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallcaption" : "ribbonbuttoncaption");

                    this.captionDiv.innerHTML = this.Caption;

                    this.Content.appendChild(this.captionDiv);
                }
            },
            ProcessImage: function () {
                if (this.imageDiv == null) {
                    if (!System.String.isNullOrWhiteSpace(this.Icon)) {
                        this.imageDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallicon" : "ribbonbuttonicon");
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageString(this.Icon);
                    } else if (!System.String.isNullOrWhiteSpace(this.IconURL)) {
                        this.imageDiv = ExpressCraft.Control.Div$1(this.IsSmallCaption ? "ribbonbuttonsmallicon" : "ribbonbuttonicon");
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    }
                    if (this.imageDiv != null) {
                        this.Content.appendChild(this.imageDiv);
                    }
                } else {
                    if (!System.String.isNullOrWhiteSpace(this.Icon)) {
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageString(this.Icon);
                    } else if (!System.String.isNullOrWhiteSpace(this.IconURL)) {
                        this.imageDiv.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    }
                }

                if (this.imageDiv != null) {
                    this.imageDiv.style.backgroundSize = "100% 100%";

                    if (this.captionDiv != null && this.IsSmallCaption) {
                        this.captionDiv.style.left = "28px";
                    }
                } else {
                    if (this.captionDiv != null && this.IsSmallCaption) {
                        this.captionDiv.style.left = "6px";
                    }
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.RibbonButton", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.RibbonButton, {
        f1: function (ev) {
            var wasEnabled = this.enabled;

            if (this.enabled && !Bridge.staticEquals(this.OnItemClick, null)) {
                this.OnItemClick(this);
            }
            if (wasEnabled && !Bridge.staticEquals(this.AfterItemClick, null)) {
                this.AfterItemClick(this);
            }

            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.RibbonControl", {
        inherits: [ExpressCraft.Control,ExpressCraft.IPages],
        fields: {
            IconURL: null,
            Type: 0,
            ApplicationIcon: null,
            OnSelectedPageChange: null,
            selectedindex: 0
        },
        props: {
            RibbonPages: null,
            SelectedIndex: {
                get: function () {
                    return this.selectedindex;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    if (this.selectedindex >= this.RibbonPages.Count) {
                        this.selectedindex = (this.RibbonPages.Count - 1) | 0;
                    }

                    if (this.selectedindex !== value) {
                        this.selectedindex = value;
                        if (!Bridge.staticEquals(this.OnSelectedPageChange, null)) {
                            this.OnSelectedPageChange(this.selectedindex, this.RibbonPages.getItem(this.selectedindex));
                        }
                    }
                    this.SetSelectedIndex(value);
                }
            }
        },
        alias: ["AddRibbonPages", "ExpressCraft$IPages$AddRibbonPages"],
        ctors: {
            init: function () {
                this.IconURL = "fav.ico";
                this.selectedindex = -1;
                this.RibbonPages = new (System.Collections.Generic.List$1(ExpressCraft.RibbonPage))();
            },
            ctor: function (type) {
                if (type === void 0) { type = 0; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, System.String.concat("ribboncontrol", (type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribboncontrol-compact")));
                this.Type = type;

                this.Content.oncontextmenu = $asm.$.ExpressCraft.RibbonControl.f1;
            }
        },
        methods: {
            AddRibbonPages: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonPages.addRange(pages);
                }
            },
            MenuClick: function () {
                if (ExpressCraft.Helper.NotDesktop) {

                }
            },
            SetSelectedIndex: function (index) {
                if (this.RibbonPages != null && this.RibbonPages.Count > 0) {
                    for (var i = 0; i < this.RibbonPages.Count; i = (i + 1) | 0) {
                        if (this.RibbonPages.getItem(i).RibbonHeader != null) {
                            this.RibbonPages.getItem(i).RibbonHeader.classList.remove("ribbonpageheader-hidden");
                            this.RibbonPages.getItem(i).RibbonHeader.classList.remove("ribbonpageheader-active");

                            if (i === index) {
                                this.RibbonPages.getItem(i).RibbonHeader.classList.add("ribbonpageheader-active");
                                this.RibbonPages.getItem(i).Content.style.visibility = "inherit";
                            } else {
                                this.RibbonPages.getItem(i).RibbonHeader.classList.add("ribbonpageheader-hidden");
                                this.RibbonPages.getItem(i).Content.style.visibility = "hidden";
                            }
                        }
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;
                if (this.Type === ExpressCraft.RibbonControl.RibbonType.Full) {
                    if (this.ApplicationIcon != null) {
                        ExpressCraft.Helper.Delete(this.ApplicationIcon);
                    }
                    this.ApplicationIcon = ExpressCraft.Control.Div$1("application-icon");
                    var appIconImage = ExpressCraft.Control.Div$1("fav-icon");
                    appIconImage.style.background = ExpressCraft.Control.GetImageStringURI(this.IconURL);
                    appIconImage.style.backgroundSize = "100% 100%";

                    this.ApplicationIcon.appendChild(appIconImage);

                    this.Content.appendChild(this.ApplicationIcon);
                }

                if (this.RibbonPages != null && this.RibbonPages.Count > 0) {
                    var width = 58;
                    for (var i = 0; i < this.RibbonPages.Count; i = (i + 1) | 0) {
                        if (this.Content.contains(ExpressCraft.Control.op_Implicit(this.RibbonPages.getItem(i)))) {
                            ExpressCraft.Helper.Delete(this.RibbonPages.getItem(i).Content);
                            ExpressCraft.Helper.Delete(this.RibbonPages.getItem(i).RibbonHeader);
                        }
                        this.RibbonPages.getItem(i).Render();

                        if (this.Type === ExpressCraft.RibbonControl.RibbonType.Compact) {
                            if (!System.String.contains(this.RibbonPages.getItem(i).Content.className,"ribbonpage-compact")) {
                                this.RibbonPages.getItem(i).Content.classList.add("ribbonpage-compact");
                            }
                        } else {
                            if (System.String.contains(this.RibbonPages.getItem(i).Content.className,"ribbonpage-compact")) {
                                this.RibbonPages.getItem(i).Content.classList.remove("ribbonpage-compact");
                            }
                        }

                        var index = { v : i };

                        if (i === this.selectedindex) {
                            this.RibbonPages.getItem(i).RibbonHeader = ExpressCraft.Control.Div$1(System.String.concat("ribbonpageheader ribbonpageheader-active", (this.Type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribbonpageheader-compact")));
                            this.RibbonPages.getItem(i).Content.style.visibility = "visible";
                        } else {
                            this.RibbonPages.getItem(i).RibbonHeader = ExpressCraft.Control.Div$1(System.String.concat("ribbonpageheader ribbonpageheader-hidden", (this.Type === ExpressCraft.RibbonControl.RibbonType.Full ? "" : " ribbonpageheader-compact")));
                            this.RibbonPages.getItem(i).Content.style.visibility = "hidden";
                        }

                        this.RibbonPages.getItem(i).RibbonHeader.onmousedown = (function ($me, index) {
                            return Bridge.fn.bind($me, function (ev) {
                                this.SelectedIndex = index.v;
                            });
                        })(this, index);
                        this.RibbonPages.getItem(i).RibbonHeader.ontouchstart = (function ($me, index) {
                            return Bridge.fn.bind($me, function (ev) {
                                this.SelectedIndex = index.v;
                            });
                        })(this, index);

                        this.RibbonPages.getItem(i).RibbonHeader.innerHTML = this.RibbonPages.getItem(i).Caption;

                        var inwidth = 24;

                        if (!System.String.isNullOrEmpty(this.RibbonPages.getItem(i).Caption)) {
                            inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.RibbonPages.getItem(i).Caption, ExpressCraft.Settings.DefaultFont))) | 0;
                        }

                        this.RibbonPages.getItem(i).RibbonHeader.style.left = width + "px";
                        this.RibbonPages.getItem(i).RibbonHeader.style.width = inwidth + "px";

                        this.Content.appendChild(this.RibbonPages.getItem(i).RibbonHeader);
                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.RibbonPages.getItem(i)));

                        width = (width + inwidth) | 0;
                    }
                }
                this.SelectedIndex = this.selectedindex;
            }
        }
    });

    Bridge.ns("ExpressCraft.RibbonControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.RibbonControl, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        }
    });

    Bridge.define("ExpressCraft.RibbonGroup", {
        inherits: [ExpressCraft.Control],
        fields: {
            enabled: false,
            captionDiv: null,
            riList: null
        },
        props: {
            Caption: null,
            Buttons: null,
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    this.setEnabled(value);
                }
            }
        },
        ctors: {
            init: function () {
                this.enabled = true;
            },
            ctor: function (_caption) {
                if (_caption === void 0) { _caption = ""; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbongroup");
                this.Caption = _caption;
                this.Buttons = new (System.Collections.Generic.List$1(ExpressCraft.RibbonButton))();
            },
            $ctor1: function (_caption, buttons) {
                if (buttons === void 0) { buttons = []; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbongroup");
                this.Caption = _caption;
                this.Buttons = new (System.Collections.Generic.List$1(ExpressCraft.RibbonButton))();
                if (buttons != null) {
                    this.Buttons.addRange(buttons);
                }
            }
        },
        methods: {
            setEnabled: function (value) {
                if (this.Buttons.Count > 0) {
                    for (var i = 0; i < this.Buttons.Count; i = (i + 1) | 0) {
                        if (!value) {
                            this.Buttons.getItem(i).setEnabled(value);
                        } else {
                            this.Buttons.getItem(i).setEnabled(this.Buttons.getItem(i).Enabled);
                        }
                    }
                }
                this.ChangeState(value);
                if (value) {
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.remove("disabled");
                    }
                } else {
                    if (this.captionDiv != null) {
                        this.captionDiv.classList.add("disabled");
                    }
                }
            },
            CreateVerticalLine: function (height) {
                var htmlDiv = ExpressCraft.Control.Div$1("ribbonseperator");
                if (height !== 58) {
                    htmlDiv.style.height = height + "px";
                }

                return htmlDiv;
            },
            GenerateRList: function () {

                var ri = null;

                if (this.riList == null) {
                    this.riList = new (System.Collections.Generic.List$1(ExpressCraft.RibbonGroup.RenderInfo))();
                    for (var i = 0; i < this.Buttons.Count; i = (i + 1) | 0) {
                        if (ri == null) {
                            ri = new ExpressCraft.RibbonGroup.RenderInfo();
                            ri.FirstButton = this.Buttons.getItem(i);
                            ri.IsSmall = ri.FirstButton.IsSmallCaption;
                        } else {
                            if (ri.IsSmall !== this.Buttons.getItem(i).IsSmallCaption || this.Buttons.getItem(i).BeginGroup || !this.Buttons.getItem(i).IsSmallCaption || (ri.FirstButton != null && ri.SecondButton != null && ri.ThirdButton != null)) {
                                this.riList.add(ri);

                                ri = new ExpressCraft.RibbonGroup.RenderInfo();
                                ri.FirstButton = this.Buttons.getItem(i);
                                ri.IsSmall = this.Buttons.getItem(i).IsSmallCaption;
                                ri.BeginGroup = this.Buttons.getItem(i).BeginGroup;
                            } else {
                                if (ri.SecondButton == null) {
                                    ri.SecondButton = this.Buttons.getItem(i);
                                } else {
                                    ri.ThirdButton = this.Buttons.getItem(i);
                                }
                            }
                        }
                    }

                    if (ri != null) {
                        this.riList.add(ri);
                        ri = null;
                    }
                }
            },
            Render: function () {
                this.HasRendered = true;

                this.GenerateRList();

                ExpressCraft.Helper.Empty(this.Content);

                var width = 0;

                for (var i = 0; i < this.riList.Count; i = (i + 1) | 0) {
                    var ri = this.riList.getItem(i);

                    if (ri.BeginGroup) {
                        width = (width + 3) | 0;
                        var vlbg = this.CreateVerticalLine(58);
                        vlbg.style.left = width + "px";

                        this.Content.appendChild(vlbg);
                    }

                    width = (width + 3) | 0;

                    if (ri.IsSmall) {
                        var MaxWidth;

                        if (ri.ThirdButton == null) {
                            if (ri.SecondButton == null) {
                                MaxWidth = Math.max(((((Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)) + 28) | 0) + 6) | 0), 64);

                                ri.FirstButton.Render();

                                ri.FirstButton.Content.style.left = width + "px";
                                ri.FirstButton.Content.style.width = MaxWidth + "px";

                                ri.FirstButton.Content.style.top = "26px";

                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                                // 1
                            } else {
                                MaxWidth = Math.max(((((Math.max(Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.SecondButton.Caption, ExpressCraft.Settings.DefaultFont))) + 28) | 0) + 6) | 0), 64);

                                ri.FirstButton.Render();
                                ri.SecondButton.Render();

                                ri.FirstButton.Content.style.left = width + "px";
                                ri.SecondButton.Content.style.left = width + "px";

                                ri.FirstButton.Content.style.top = (21) + "px";

                                ri.FirstButton.Content.style.width = MaxWidth + "px";
                                ri.SecondButton.Content.style.width = MaxWidth + "px";

                                ri.FirstButton.Content.style.top = "11px";
                                ri.SecondButton.Content.style.top = "41px";

                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                                this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.SecondButton));
                                // 2
                            }
                        } else {
                            MaxWidth = Math.max(((((Math.max(Math.max(Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.SecondButton.Caption, ExpressCraft.Settings.DefaultFont))), Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.ThirdButton.Caption, ExpressCraft.Settings.DefaultFont))) + 28) | 0) + 6) | 0), 64);

                            ri.FirstButton.Render();
                            ri.SecondButton.Render();
                            ri.ThirdButton.Render();

                            ri.FirstButton.Content.style.left = width + "px";
                            ri.SecondButton.Content.style.left = width + "px";
                            ri.ThirdButton.Content.style.left = width + "px";

                            ri.FirstButton.Content.style.width = MaxWidth + "px";
                            ri.SecondButton.Content.style.width = MaxWidth + "px";
                            ri.ThirdButton.Content.style.width = MaxWidth + "px";

                            ri.FirstButton.Content.style.top = "3px";
                            ri.SecondButton.Content.style.top = "26px";
                            ri.ThirdButton.Content.style.top = "49px";
                            // 3

                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.SecondButton));
                            this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.ThirdButton));
                        }

                        width = (width + MaxWidth) | 0;
                    } else {
                        ri.FirstButton.Render();

                        ri.FirstButton.Content.style.left = width + "px";
                        var inwidth = 0;
                        if (System.String.contains(ri.FirstButton.Caption," ")) {
                            var strings = System.String.split(ri.FirstButton.Caption, [32].map(function(i) {{ return String.fromCharCode(i); }}));
                            var builder = new System.Text.StringBuilder();

                            var length = (Bridge.Int.div(ri.FirstButton.Caption.length, 2)) | 0;

                            for (var j = 0; j < strings.length; j = (j + 1) | 0) {
                                if (builder.getLength() > length) {
                                    inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(builder.toString(), ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                                    break;
                                }
                                if (builder.getLength() > 0) {
                                    builder.append(System.String.concat(" ", strings[System.Array.index(j, strings)]));
                                } else {
                                    builder.append(strings[System.Array.index(j, strings)]);
                                }
                            }
                            if (inwidth === 0) {
                                inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(builder.toString(), ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                            }
                        } else {
                            inwidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(ri.FirstButton.Caption, ExpressCraft.Settings.DefaultFont)) + 20) | 0;
                        }

                        if (inwidth < 44) {
                            inwidth = 44;
                        }

                        ri.FirstButton.Content.style.width = inwidth + "px";

                        width = (width + inwidth) | 0;

                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(ri.FirstButton));
                    }
                }

                var minWidth = (Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(this.Caption, ExpressCraft.Settings.DefaultFont)) + 20) | 0;

                if (width < minWidth) {
                    width = minWidth;
                }

                width = (width + 3) | 0;

                var vl = this.CreateVerticalLine(80);
                vl.style.left = ((width - 1) | 0) + "px";

                this.Content.appendChild(vl);

                this.Content.style.width = width + "px";

                if (!System.String.isNullOrWhiteSpace(this.Caption)) {
                    this.captionDiv = ExpressCraft.Control.Div$1("ribbongroupcaption");

                    this.captionDiv.innerHTML = this.Caption;
                    this.Content.appendChild(this.captionDiv);
                }

                this.setEnabled(this.enabled);
            }
        }
    });

    Bridge.define("ExpressCraft.RibbonPage", {
        inherits: [ExpressCraft.Control],
        fields: {
            RibbonHeader: null
        },
        props: {
            Caption: null,
            RibbonGroups: null
        },
        ctors: {
            init: function () {
                this.RibbonGroups = new (System.Collections.Generic.List$1(ExpressCraft.RibbonGroup))();
            },
            ctor: function (_caption) {
                if (_caption === void 0) { _caption = ""; }

                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "ribbonpage");
                this.Caption = _caption;
            }
        },
        methods: {
            AddRibbonGroups: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonGroups.addRange(pages);
                }
            },
            Render: function () {
                this.HasRendered = true;
                if (this.RibbonGroups == null || this.RibbonGroups.Count === 0) {
                    return;
                }
                var width = 0;
                for (var i = 0; i < this.RibbonGroups.Count; i = (i + 1) | 0) {
                    this.RibbonGroups.getItem(i).Render();
                    this.RibbonGroups.getItem(i).Content.style.left = width + "px";
                    width = (width + (parseInt(this.RibbonGroups.getItem(i).Content.style.width))) | 0;
                    this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.RibbonGroups.getItem(i)));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.SimpleButton", {
        inherits: [ExpressCraft.Control],
        fields: {
            ItemClick: null,
            ParentForm: null,
            DialogResult: 0,
            enabled: false
        },
        props: {
            Text: {
                get: function () {
                    return this.Content.innerHTML;
                },
                set: function (value) {
                    this.Content.innerHTML = value;
                }
            },
            Enabled: {
                get: function () {
                    return this.enabled;
                },
                set: function (value) {
                    this.enabled = value;
                    if (this.enabled) {
                        this.Content.removeAttribute("disabled");
                    } else {
                        this.Content.setAttribute("disabled", System.Boolean.toString((!this.enabled)));
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.DialogResult = ExpressCraft.DialogResultEnum.None;
                this.enabled = true;
            },
            ctor: function (button, ac) {
                if (button === void 0) { button = 2; }
                if (ac === void 0) { ac = true; }

                this.$initialize();
                ExpressCraft.Control.$ctor2.call(this, "simplebutton", button, ac);
                this.Content.oncontextmenu = $asm.$.ExpressCraft.SimpleButton.f1;

                if (ac) {
                    this.Style.font = ExpressCraft.Settings.Font;
                }

                ExpressCraft.Helper.SetSize(this, "69px", "20px");

                this.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SimpleButton.f2);
                this.Content.ondblclick = $asm.$.ExpressCraft.SimpleButton.f3;
                this.Content.onmousedown = $asm.$.ExpressCraft.SimpleButton.f3;
                this.Content.onmouseup = $asm.$.ExpressCraft.SimpleButton.f3;

            }
        }
    });

    Bridge.ns("ExpressCraft.SimpleButton", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SimpleButton, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f2: function (ev) {
            if (this.enabled) {
                this.Content.blur();

                if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm != null && this.ParentForm.IsDialog()) {
                    this.ParentForm.DialogResult = this.DialogResult;
                }

                if (!Bridge.staticEquals(this.ItemClick, null)) {
                    this.ItemClick(this);
                }

                if (this.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm.DialogResult !== ExpressCraft.DialogResultEnum.None && this.ParentForm != null && this.ParentForm.IsDialog()) {
                    this.ParentForm.Close();
                }
            }

            ev.stopPropagation();
            ev.stopImmediatePropagation();
        },
        f3: function (ev) {
            ev.stopPropagation();
            ev.stopImmediatePropagation();
        }
    });

    Bridge.define("ExpressCraft.SplitControlContainer", {
        inherits: [ExpressCraft.Control],
        fields: {
            Panel1: null,
            Panel2: null,
            Splitter: null,
            _prevClientRect: null,
            IsMouseDown: false,
            _mouseDownVector: null,
            _currentMouseDownVector: null,
            _startingSplitterPos: 0,
            _splitterPosition: 0,
            fixedSplitterPostion: 0,
            SplitterResizable: false,
            horizontal: false
        },
        props: {
            FixedSplitterPostion: {
                get: function () {
                    return this.fixedSplitterPostion;
                },
                set: function (value) {
                    this.fixedSplitterPostion = value;
                    this.RenderControls();
                }
            },
            SplitterPosition: {
                get: function () {
                    return this._splitterPosition;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    this._splitterPosition = value;
                    this.RenderControls();
                }
            },
            Horizontal: {
                get: function () {
                    return this.horizontal;
                },
                set: function (value) {
                    if (value !== this.horizontal) {
                        this.RenderControls();
                        this.horizontal = value;
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._mouseDownVector = new ExpressCraft.Vector2();
                this._currentMouseDownVector = new ExpressCraft.Vector2();
                this.IsMouseDown = false;
                this._splitterPosition = -1;
                this.fixedSplitterPostion = ExpressCraft.FixedSplitterPosition.Panel1;
                this.SplitterResizable = true;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "splitcontrol");
                var $t;
                this.Panel1 = ($t = new ExpressCraft.Control.$ctor1(), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                this.Panel2 = new ExpressCraft.Control.$ctor1();
                this.Panel1.Style.overflow = "auto";
                this.Panel2.Style.overflow = "auto";

                this.Splitter = new ExpressCraft.Control.$ctor1();

                this.Splitter.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f1);

                this.OnResize = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f2);

                this.Content.onmousemove = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f3);

                this.Content.onmouseup = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitControlContainer.f4);

                ExpressCraft.Helper.AppendChildren(this, [this.Panel1, this.Splitter, this.Panel2]);
        }
    },
    methods: {
        Render: function () {
            ExpressCraft.Control.prototype.Render.call(this);

            this.RenderControls();
        },
        ResizeChildren: function () {
            if (this.LinkedForm != null && this.Content != null) {
                this.LinkedForm.ResizeChildren(this.Content);
            }
        },
        GetMaxSplitterSize: function () {
            var maxSize = (Bridge.Int.clip32((this.Horizontal ? this.Content.getBoundingClientRect().height : this.Content.getBoundingClientRect().width)) - 12) | 0;
            if (maxSize < 0) {
                maxSize = 0;
            }
            return maxSize;
        },
        RenderControls: function () {
            var sp = this.SplitterPosition;
            var maxSize = this.GetMaxSplitterSize();

            if (this._prevClientRect != null) {
                if (sp > maxSize) {
                    sp = maxSize;
                }
            }

            if (this.Horizontal) {
                ExpressCraft.Helper.ExchangeClass$1(this.Panel1, "splitvertical", "splithorizontal");
                ExpressCraft.Helper.ExchangeClass$1(this.Panel2, "splitvertical", "splithorizontal");
                ExpressCraft.Helper.ExchangeClass$1(this.Splitter, "splittervertical", "splitterhorizontal");

                this.Panel1.Width = "";
                this.Splitter.Width = "";
                this.Panel2.Width = "";

                if (this.fixedSplitterPostion !== ExpressCraft.FixedSplitterPosition.Panel2) {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(0, sp);

                    this.Panel1.Height = sp;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(0, ((sp + 12) | 0));
                    this.Panel2.Height = "(100% - " + (((sp + 12) | 0)) + "px)";
                    ;
                } else {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(0, "(100% - " + (sp) + "px)");

                    this.Panel1.Height = "(100% - " + sp + "px)";

                    this.Panel2.Height = (sp - 12) | 0;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(0, "(100% - " + (((sp - 12) | 0)) + "px)");
                }
            } else {
                ExpressCraft.Helper.ExchangeClass$1(this.Panel1, "splithorizontal", "splitvertical");
                ExpressCraft.Helper.ExchangeClass$1(this.Panel2, "splithorizontal", "splitvertical");
                ExpressCraft.Helper.ExchangeClass$1(this.Splitter, "splitterhorizontal", "splittervertical");

                this.Panel1.Height = "";
                this.Splitter.Height = "";
                this.Panel2.Height = "";

                if (this.fixedSplitterPostion !== ExpressCraft.FixedSplitterPosition.Panel2) {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1(sp, 0);

                    this.Panel1.Width = sp;

                    this.Panel2.Width = "(100% - " + (((sp + 12) | 0)) + "px)";
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1(((sp + 12) | 0), 0);
                } else {
                    this.Splitter.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + sp + "px)", 0);

                    this.Panel1.Width = "(100% - " + sp + "px)";

                    this.Panel2.Width = sp;
                    this.Panel2.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + (((sp + 12) | 0)) + "px)", 0);
                }
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.SplitControlContainer", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SplitControlContainer, {
        f1: function (ev) {
            if (!this.SplitterResizable) {
                return;
            }
            this.IsMouseDown = true;
            this._mouseDownVector = ExpressCraft.Helper.GetClientMouseLocation(ev);
            var maxSize = this.GetMaxSplitterSize();
            this._startingSplitterPos = this._splitterPosition > maxSize ? maxSize : this._splitterPosition;
            ev.stopImmediatePropagation();
        },
        f2: function (ev) {
            if (this.LinkedForm != null) {
                if (!this.LinkedForm.IsVisible()) {
                    return;
                }
            }
            var clientRec = this.Content.getBoundingClientRect();

            if (this._prevClientRect == null) {
                this._prevClientRect = clientRec;
            }

            if (this.fixedSplitterPostion === ExpressCraft.FixedSplitterPosition.None) {
                var V1 = 0;
                var V2 = 0;
                var dirty = false;

                if (this.Horizontal) {
                    if (clientRec.height !== this._prevClientRect.height) {
                        V1 = clientRec.height;
                        V2 = this._prevClientRect.height;
                        dirty = true;
                    }
                } else {
                    if (clientRec.width !== this._prevClientRect.width) {
                        V1 = clientRec.width;
                        V2 = this._prevClientRect.width;
                        dirty = true;
                    }
                }
                if (dirty) {
                    this.SplitterPosition = V1 === 0 || V2 === 0 ? 0 : Bridge.Int.clip32(this.SplitterPosition * (V1 / V2));
                }
            }

            this._prevClientRect = clientRec;

            this.RenderControls();

            this.ResizeChildren();
        },
        f3: function (ev) {
            if (this.IsMouseDown) {
                this._currentMouseDownVector = ExpressCraft.Helper.GetClientMouseLocation(ev);
                var x;
                var m = this.horizontal ? (((this._mouseDownVector.Yi - this._currentMouseDownVector.Yi) | 0)) : (((this._mouseDownVector.Xi - this._currentMouseDownVector.Xi) | 0));

                var y = this.GetMaxSplitterSize();
                if (((x = this.fixedSplitterPostion === ExpressCraft.FixedSplitterPosition.Panel2 ? ((this._startingSplitterPos + m) | 0) : ((this._startingSplitterPos - m) | 0))) > y) {
                    x = y;
                }
                this.SplitterPosition = x;
                this._currentMouseDownVector = this._mouseDownVector.$clone();

                this.ResizeChildren();
            }
        },
        f4: function (ev) {
            this.IsMouseDown = false;
            this.RenderControls();
        }
    });

    Bridge.define("ExpressCraft.SplitHideControlContainer", {
        inherits: [ExpressCraft.Control],
        fields: {
            Body: null,
            Slider: null,
            Panel: null,
            span: null,
            _slideWidth: 0,
            _sliderLocation: 0,
            _sliderVisible: false,
            refreshId: 0
        },
        props: {
            SlideWidth: {
                get: function () {
                    return this._slideWidth;
                },
                set: function (value) {
                    if (this._slideWidth !== value) {
                        this._slideWidth = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            },
            SliderLocation: {
                get: function () {
                    return this._sliderLocation;
                },
                set: function (value) {
                    if (this._sliderLocation !== value) {
                        this._sliderLocation = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            },
            SliderVisible: {
                get: function () {
                    return this._sliderVisible;
                },
                set: function (value) {
                    if (this._sliderVisible !== value) {
                        this._sliderVisible = value;
                        this.RenderControl();
                        this.ResizeChildren();
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this._sliderLocation = ExpressCraft.SliderLocation.Left;
                this._sliderVisible = false;
                this.refreshId = -1;
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                this.Body = new ExpressCraft.Control.$ctor1();
                this.Slider = new ExpressCraft.Control.$ctor5("primary");
                this.Panel = new ExpressCraft.Control.$ctor1();
                this.span = ExpressCraft.Control.Span$1("form-heading-title");
                this.span.textContent = ">";

                this.span.style.fontWeight = "bold";
                this.span.style.color = "white";

                this.Slider.Content.appendChild(this.span);

                this.Slider.Content.onmouseenter = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f1);

                this.Slider.Content.onmouseleave = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f2);

                this.Slider.Style.transition = "width 1s, left 1s";
                this.Body.Style.transition = "left 1s, width 1s";
                this.Panel.Style.transition = "width 1s";

                this.Slider.Style.filter = "brightness(90%)";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.span.style.fontStyle = "36px";
                    this.Slider.Width = 65;
                } else {
                    this.span.style.fontStyle = "26px";
                    this.Slider.Width = 30;
                }

                this.Slider.Height = "100%";

                this.Slider.Content.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f3);
                this._slideWidth = 250;
                ExpressCraft.Helper.AppendChildren$2(this.Content, [this.Panel, this.Slider, this.Body]);

                this.RenderControl();
            }
        },
        methods: {
            ResizeChildren: function () {
                if (this.LinkedForm != null && this.Content != null) {
                    if (this.refreshId !== -1) {
                        Bridge.global.clearTimeout(this.refreshId);
                    }
                    this.refreshId = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.SplitHideControlContainer.f4), 1000);
                }
            },
            RenderControl: function () {
                var width;
                if (ExpressCraft.Helper.NotDesktop) {
                    width = 65;
                } else {
                    width = 30;
                }

                if (this.SliderLocation === ExpressCraft.SliderLocation.Left) {
                    if (this.SliderVisible) {
                        this.span.textContent = "<";
                        this.Panel.Width = this.SlideWidth;
                        this.Slider.Left = this.SlideWidth;
                        this.Body.Location = new ExpressCraft.Vector2.$ctor1(((width + this.SlideWidth) | 0), 0);
                        this.Body.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (((width + this.SlideWidth) | 0)) + "px)", "100%");
                    } else {
                        this.span.textContent = ">";
                        this.Slider.Left = 0;
                        this.Panel.Width = 0;
                        this.Body.Location = new ExpressCraft.Vector2.$ctor1(width, 0);
                        this.Body.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (width) + "px)", "100%");
                    }

                    this.Panel.Location = new ExpressCraft.Vector2.$ctor1(0, 0);
                    this.Panel.Height = "100%";
                } else {

                }
            }
        }
    });

    Bridge.ns("ExpressCraft.SplitHideControlContainer", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SplitHideControlContainer, {
        f1: function (ev) {
            this.Slider.Style.filter = "brightness(110%)";
        },
        f2: function (ev) {
            this.Slider.Style.filter = "brightness(90%)";
        },
        f3: function (ev) {
            this.SliderVisible = !this.SliderVisible;
        },
        f4: function () {
            this.LinkedForm.ResizeChildren(this.Content);
            this.refreshId = -1;
        }
    });

    Bridge.define("ExpressCraft.TabControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            tabHeaders: null,
            tabHeaderContainer: null,
            showClosedButton: false,
            OnSelectedTabIndexChanged: null,
            selectedindex: 0
        },
        props: {
            TabPages: null,
            ShowClosedButton: {
                get: function () {
                    return this.showClosedButton;
                },
                set: function (value) {
                    if (value !== this.showClosedButton) {
                        this.showClosedButton = value;
                        this.ResizeTabHeaders();
                    }
                }
            },
            SelectedIndex: {
                get: function () {
                    return this.selectedindex;
                },
                set: function (value) {
                    if (value < 0) {
                        value = 0;
                    }
                    if (this.selectedindex !== value) {
                        this.selectedindex = value;
                        !Bridge.staticEquals(this.OnSelectedTabIndexChanged, null) ? this.OnSelectedTabIndexChanged(value) : null;
                    }

                    if (this.TabPages != null && this.TabPages.Count > 0) {
                        for (var i = 0; i < this.TabPages.Count; i = (i + 1) | 0) {
                            var page = { v : this.TabPages.getItem(i) };
                            this.TabControlActiveStyleChange(i, page);
                            this.TabPages.setItem(i, page.v);
                        }
                    }
                }
            }
        },
        ctors: {
            init: function () {
                this.selectedindex = 0;
                this.TabPages = new (System.Collections.Generic.List$1(ExpressCraft.TabControlPage))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tabcontrol");
                this.Content.oncontextmenu = $asm.$.ExpressCraft.TabControl.f1;
            }
        },
        methods: {
            AddPages: function (Pages) {
                if (Pages === void 0) { Pages = []; }
                this.TabPages.addRange(Pages);
                if (this.HasRendered) {
                    this.ResizeTabHeaders();
                }
            },
            TabControlActiveStyleChange: function (i, page) {
                var Isselected = i === this.selectedindex;

                var state = Isselected ? "active" : "hidden";
                if (page.v.TabPageHeader != null) {
                    page.v.TabPageHeader.classList.remove("tabcontrolpageheader-hidden");
                    page.v.TabPageHeader.classList.remove("tabcontrolpageheader-active");

                    page.v.TabPageHeader.classList.add(System.String.concat("tabcontrolpageheader-", state));
                } else {
                    page.v.TabPageHeader = ExpressCraft.Control.Div$1(System.String.concat("tabcontrolpageheader tabcontrolpageheader-", state));
                }
                if (ExpressCraft.Helper.NotDesktop) {
                    if (Isselected) {
                        page.v.TabPageHeader.style.lineHeight = "44px";
                    } else {
                        page.v.TabPageHeader.style.lineHeight = "46px";
                    }
                    page.v.TabPageHeader.style.height = "45px";
                }

                page.v.TabPageHeader.setAttribute("i", i.toString());
                if (this.showClosedButton) {
                    if (page.v.TabPageHeaderClose == null) {
                        page.v.TabPageHeaderClose = ExpressCraft.Control.Div$1("tabcontrolpageheader-closebutton");
                        page.v.TabPageHeaderClose.onclick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f2);
                        page.v.TabPageHeader.appendChild(page.v.TabPageHeaderClose);
                    }
                } else {
                    if (page.v.TabPageHeaderClose != null) {
                        page.v.TabPageHeader.removeChild(page.v.TabPageHeaderClose);
                    }
                }

                page.v.Content.style.visibility = Isselected ? "inherit" : "collapse";
            },
            ResizeTabHeaders: function () {
                var $t, $t1;
                if (this.tabHeaders == null) {
                    this.tabHeaders = ($t = new ExpressCraft.Control.$ctor5("tabheader-container"), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.tabHeaders.Height = 47;
                        this.tabHeaderContainer = ($t = new ExpressCraft.Control.$ctor1(), $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t);
                        this.tabHeaderContainer.Width = "100%";
                        this.tabHeaderContainer.Height = 50;
                        ExpressCraft.Helper.AppendChild(this.tabHeaderContainer, this.tabHeaders);
                        this.tabHeaderContainer.Style.backgroundColor = "transparent";
                        this.tabHeaderContainer.Style.overflowX = "auto";

                        this.tabHeaders.Style.minWidth = "100%";

                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.tabHeaderContainer));
                    } else {
                        this.tabHeaders.Height = 23;
                        this.Content.appendChild(ExpressCraft.Control.op_Implicit(this.tabHeaders));
                        this.tabHeaders.Width = "100%";
                    }


                }
                if (this.TabPages != null && this.TabPages.Count > 0) {
                    var width = 2;

                    for (var i = 0; i < this.TabPages.Count; i = (i + 1) | 0) {
                        var page = { v : this.TabPages.getItem(i) };

                        page.v.Render();

                        if (page.v.TabPageHeader == null) {
                            this.TabControlActiveStyleChange(i, page);
                            page.v.TabPageHeader.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f3);
                            page.v.TabPageHeader.ontouchstart = Bridge.fn.bind(this, $asm.$.ExpressCraft.TabControl.f3);
                            this.tabHeaders.Content.appendChild(page.v.TabPageHeader);
                            this.Content.appendChild(page.v.Content);
                        }
                        page.v.TabPageHeader.setAttribute("i", i.toString());

                        var inwidth = 24;

                        if (!System.String.isNullOrEmpty(page.v.Caption)) {
                            if (ExpressCraft.Helper.NotDesktop) {
                                inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(page.v.Caption, "14px Tahoma"))) | 0;
                            } else {
                                inwidth = (inwidth + Bridge.Int.clip32(ExpressCraft.Control.GetTextWidth(page.v.Caption, ExpressCraft.Settings.DefaultFont))) | 0;
                            }
                        }

                        if (this.showClosedButton) {
                            inwidth = (inwidth + 19) | 0;
                        }
                        var span = null;
                        $t = Bridge.getEnumerator(page.v.TabPageHeader.children);
                        try {
                            while ($t.moveNext()) {
                                var item = $t.Current;
                                if (Bridge.is(item, HTMLSpanElement)) {
                                    ((span = item)).innerHTML = page.v.Caption;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }if (span == null) {
                            span = ($t1 = document.createElement('span'), $t1.innerHTML = page.v.Caption, $t1);

                            page.v.TabPageHeader.appendChild(span);
                        }
                        if (ExpressCraft.Helper.NotDesktop) {
                            span.style.fontSize = "14px";
                        }


                        page.v.TabPageHeader.style.left = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                        page.v.TabPageHeader.style.width = ExpressCraft.Helper.ToPx(Bridge.box(inwidth, System.Int32));

                        //                height: calc(100% - 26px);
                        //top: 24px;

                        if (ExpressCraft.Helper.NotDesktop) {
                            page.v.Height = "(100% - 49px)";
                            page.v.Top = 49;
                        }

                        width = (width + (((inwidth + 2) | 0))) | 0;

                        this.TabPages.setItem(i, page.v);
                    }
                    if (ExpressCraft.Helper.NotDesktop) {
                        this.tabHeaders.Width = width;
                    }
                }

            },
            Render: function () {
                this.HasRendered = true;
                this.ResizeTabHeaders();
            }
        }
    });

    Bridge.ns("ExpressCraft.TabControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TabControl, {
        f1: function (ev) {
            ev.stopPropagation();
            ev.preventDefault();
        },
        f2: function (ev) {
            var index = parseInt(ev.currentTarget.parentElement.getAttribute("i"));
            var cpage = this.TabPages.getItem(index);
            if (cpage.Content != null) {
                ExpressCraft.Helper.Empty(cpage.Content);
                ExpressCraft.Helper.Delete(cpage.Content);
            }
            if (cpage.TabPageHeader != null) {
                ExpressCraft.Helper.Empty(cpage.TabPageHeader);
                ExpressCraft.Helper.Delete(cpage.TabPageHeader);
            }
            this.TabPages.remove(cpage);
            if (index > ((this.TabPages.Count - 1) | 0)) {
                index = (this.TabPages.Count - 1) | 0;
            }

            ev.stopPropagation();

            this.SelectedIndex = index;

            this.ResizeTabHeaders();
        },
        f3: function (ev) {
            this.SelectedIndex = parseInt(ev.currentTarget.getAttribute("i"));
        }
    });

    Bridge.define("ExpressCraft.TabControlPage", {
        inherits: [ExpressCraft.Control],
        fields: {
            index: 0,
            TabPageHeader: null,
            TabPageHeaderClose: null
        },
        props: {
            Caption: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tabcontrolpage");

            }
        }
    });

    Bridge.define("ExpressCraft.TileControl", {
        inherits: [ExpressCraft.Control,ExpressCraft.IPages],
        fields: {
            _viewState: 0,
            prevOverFlow: null,
            ClearTimeOut: 0
        },
        props: {
            RibbonPages: null,
            ViewState: {
                get: function () {
                    return this._viewState;
                },
                set: function (value) {
                    if (this.ClearTimeOut !== -1) {
                        Bridge.global.clearTimeout(this.ClearTimeOut);
                        this.ClearTimeOut = -1;
                    }
                    if (value !== this._viewState) {
                        this._viewState = value;
                        if (this._viewState === ExpressCraft.TileViewState.Hidden) {
                            this.ClearTimeOut = Bridge.global.setTimeout(Bridge.fn.bind(this, $asm.$.ExpressCraft.TileControl.f1), 1000);
                            this.Location = new ExpressCraft.Vector2.$ctor1("(100% * -1)", 0);

                            if (this.Content.parentElement != null && this.prevOverFlow != null) {
                                this.Content.parentElement.style.overflow = this.prevOverFlow;
                            }
                        } else {
                            this.Location = new ExpressCraft.Vector2.$ctor1(0, 0);
                            this.Content.style.visibility = "inherit";
                            this.RenderTiles();
                            if (this.Content.parentElement != null) {
                                this.prevOverFlow = this.Content.parentElement.style.overflow;
                                this.Content.parentElement.style.overflow = "hidden";
                            }
                        }
                    }
                }
            }
        },
        alias: ["AddRibbonPages", "ExpressCraft$IPages$AddRibbonPages"],
        ctors: {
            init: function () {
                this._viewState = ExpressCraft.TileViewState.Hidden;
                this.ClearTimeOut = -1;
                this.RibbonPages = new (System.Collections.Generic.List$1(ExpressCraft.RibbonPage))();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.Control.$ctor1.call(this);
                this.Style.overflowY = "auto";
                this.Location = new ExpressCraft.Vector2.$ctor1("(100% * -1)", 0);
                this.Size = new ExpressCraft.Vector2.$ctor1("100%", "100%");


                this.Content.style.backgroundColor = "transparent";
                this.Content.style.visibility = "hidden";
                this.Content.style.transition = "left 1s ease";
            }
        },
        methods: {
            RenderTiles: function () {
                var $t, $t1, $t2;
                var x = 0;
                var y = 6;

                var doc = document.createDocumentFragment();
                var div = new ExpressCraft.Control.$ctor1();
                div.Width = "100%";
                ExpressCraft.Helper.SetLocation$2(div, 0, 0);
                div.Style.zIndex = "10";

                var div2 = new ExpressCraft.Control.$ctor5("primary");
                div2.Width = "100%";
                div2.Style.minHeight = "100%";
                ExpressCraft.Helper.SetLocation$2(div2, 0, 0);
                div2.Style.filter = "brightness(50%)";

                div2.Style.opacity = "0.9";
                div2.Style.zIndex = "9";

                $t = Bridge.getEnumerator(this.RibbonPages);
                try {
                    while ($t.moveNext()) {
                        var page = $t.Current;
                        if (!System.String.isNullOrWhiteSpace(page.Caption)) {
                            var llb = ExpressCraft.Control.Label(page.Caption, 6, y);
                            llb.style.fontSize = "14px";
                            llb.style.color = "white";
                            doc.appendChild(llb);
                            y = (y + 26) | 0;
                        }

                        $t1 = Bridge.getEnumerator(page.RibbonGroups);
                        try {
                            while ($t1.moveNext()) {
                                var group = $t1.Current;
                                $t2 = Bridge.getEnumerator(group.Buttons);
                                try {
                                    while ($t2.moveNext()) {
                                        var button = $t2.Current;
                                        ExpressCraft.Helper.ExchangeClass$1(button, "ribbonbuttonsmall", "ribbonbutton");
                                        button.Style.borderRadius = "4px";
                                        button.AfterItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TileControl.f2);
                                        if (button.Enabled) {
                                            ExpressCraft.Helper.ExchangeClass$1(button, "primary", "primary");
                                            button.Style.border = "0";
                                            button.Style.filter = "brightness(110%)";
                                        } else {
                                            ExpressCraft.Helper.ExchangeClass$1(button, "primary", "");
                                            button.Style.border = "1px";
                                            button.Style.filter = "";
                                        }
                                        button.Style.opacity = "1";
                                        button.Style.boxShadow = "0px 0px 10px -2px rgba(0,0,0,0.25)";
                                        button.IsSmallCaption = false;
                                        button.ProcessCaption();
                                        button.ProcessImage();
                                        button.Size = new ExpressCraft.Vector2.$ctor1("((100% - 24px) * 0.33)", 100);
                                        button.Location = new ExpressCraft.Vector2.$ctor1("(((100% - 24px) * (" + (System.Decimal(x).mul(System.Decimal(0.33))) + ")) + (" + (Bridge.Int.mul(6, (x))) + "px) + 6px)", y);

                                        if (button.captionDiv != null) {
                                            if (button.Enabled) {
                                                button.captionDiv.style.color = "white";
                                            } else {
                                                button.captionDiv.style.color = "grey";
                                            }

                                            button.captionDiv.style.fontSize = "14px";
                                            button.captionDiv.style.top = "65px";
                                        }

                                        if (button.imageDiv != null) {
                                            ExpressCraft.Helper.ExchangeClass(button.imageDiv, "ribbonbuttonsmallicon", "ribbonbuttonicon");
                                            button.IconURL = System.String.replaceAll((System.String.concat(button.IconURL, "")), "x16x16", "x32x32");
                                            button.imageDiv.style.top = "27px";
                                            if (button.Enabled) {
                                                //  button.imageDiv.Style.Filter = "brightness(90%) grayscale(100%) contrast(60%) brightness(180%)";
                                            } else {
                                                //  button.imageDiv.Style.Filter = "";
                                            }
                                        }

                                        if (x === 2) {
                                            x = 0;
                                            y = (y + 106) | 0;
                                        } else {
                                            x = (x + 1) | 0;
                                        }
                                        button.Style.opacity = "1";
                                        doc.appendChild(ExpressCraft.Control.op_Implicit(button));
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (x !== 0) {
                            x = 0;
                            y = (y + 106) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                div.Height = y;
                div2.Height = y;

                ExpressCraft.Helper.Empty(this.Content);
                div.Content.appendChild(doc);

                div2.Content.onmousedown = $asm.$.ExpressCraft.TileControl.f3;

                this.Content.appendChild(ExpressCraft.Control.op_Implicit(div2));
                this.Content.appendChild(ExpressCraft.Control.op_Implicit(div));

                div.Content.click();
            },
            Render: function () {
                ExpressCraft.Control.prototype.Render.call(this);
                this.RenderTiles();
            },
            AddRibbonPages: function (pages) {
                if (pages === void 0) { pages = []; }
                if (pages != null) {
                    this.RibbonPages.addRange(pages);
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.TileControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TileControl, {
        f1: function () {
            this.Content.style.visibility = "hidden";
        },
        f2: function (ev) {
            this.ViewState = ExpressCraft.TileViewState.Hidden;
        },
        f3: function (ev) {
            ev.stopPropagation();
        }
    });

    Bridge.define("ExpressCraft.ToolTipControl", {
        inherits: [ExpressCraft.Control],
        fields: {
            visible: false,
            _toolTip$1: null
        },
        ctors: {
            init: function () {
                this.visible = false;
            },
            ctor: function (toolTip) {
                this.$initialize();
                ExpressCraft.Control.$ctor5.call(this, "tool-tip");
                this._toolTip$1 = toolTip;
            }
        },
        methods: {
            Show: function (ev) {
                var $t;
                if (ExpressCraft.Helper.NotDesktop) {
                    return;
                }

                ExpressCraft.Helper.Empty(this.Content);

                if (this._toolTip$1 != null) {
                    if (!ExpressCraft.Helper.IsEmpty(this._toolTip$1.Heading)) {
                        this.Content.appendChild(($t = document.createElement('p'), $t.className = "tool-tip-heading", $t.innerHTML = System.String.replaceAll(ExpressCraft.Helper.HtmlEscape$1(this._toolTip$1.Heading), "\r\n", "<br>"), $t));
                    }
                    if (!ExpressCraft.Helper.IsEmpty(this._toolTip$1.Description)) {
                        this.Content.appendChild(($t = document.createElement('p'), $t.className = "tool-tip-body", $t.innerHTML = System.String.replaceAll(ExpressCraft.Helper.HtmlEscape$1(this._toolTip$1.Description), "\r\n", "<br>"), $t));
                    }
                }
                var mouse = ExpressCraft.Helper.GetClientMouseLocation(ev);

                this.Location = new ExpressCraft.Vector2.$ctor1(mouse.X, ((ExpressCraft.Helper.ToInt(mouse.Y) + 22) | 0));

                if (!this.visible) {
                    this.visible = true;
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles + 1) | 0;
                    this.Content.style.zIndex = (((ExpressCraft.ContextMenu.TotalContextHandles + ExpressCraft.Settings.ContextMenuStartingZIndex) | 0)).toString();
                    document.body.appendChild(ExpressCraft.Control.op_Implicit(this));
                }
            },
            Close: function () {
                if (this.visible) {
                    if (this.Content != null) {
                        $(this.Content).fadeOut(100, Bridge.fn.bind(this, $asm.$.ExpressCraft.ToolTipControl.f1));
                    }
                    this.visible = false;
                    ExpressCraft.ContextMenu.TotalContextHandles = (ExpressCraft.ContextMenu.TotalContextHandles - 1) | 0;
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.ToolTipControl", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ToolTipControl, {
        f1: function () {
            ExpressCraft.Helper.Delete(this.Content);
        }
    });

    Bridge.define("ExpressCraft.FormPopup", {
        inherits: [ExpressCraft.Form],
        statics: {
            methods: {
                GetPopupDefaultLocation: function (control, isControlChild) {
                    if (isControlChild === void 0) { isControlChild = false; }
                    if (ExpressCraft.Helper.NotDesktop) {
                        return new ExpressCraft.Vector2.$ctor1(0, 0);
                    }

                    if (isControlChild) {
                        var rec = control.Content.parentElement.getBoundingClientRect();
                        return new ExpressCraft.Vector2.$ctor1(rec.left, rec.top + rec.height);
                    } else {
                        var rec1 = control.Content.getBoundingClientRect();
                        return new ExpressCraft.Vector2.$ctor1(rec1.left, rec1.top + rec1.height);
                    }
                }
            }
        },
        fields: {
            PreviousScrollTop: 0,
            ParentContainer: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Heading.style.display = "none";
                ExpressCraft.Helper.SetLocation(this.Body, 0, 0);
                ExpressCraft.Helper.SetSize$1(this.Body, "100%", "100%");
                this.Content.classList.add("inputcontrol");
                this.Content.classList.remove("form-base");
                this.Content.style.boxShadow = "0 0 63px -17px rgba(0,0,0,0.75)";

                this.StartPosition = ExpressCraft.FormStartPosition.Manual;

                this.ShowClose = false;
                this.ShowMaximize = false;
                this.ShowMinimize = false;
                this.AllowMoveChange = false;
                this.AllowSizeChange = false;
            }
        },
        methods: {
            ShowPopup: function (location) {
                this.Location = location.$clone();
                this.ShowDialog();
            },
            MoveFormUp: function () {
                this.Location = new ExpressCraft.Vector2.$ctor1(this.Left, ExpressCraft.Helper.ToFloat(this.Top) - ExpressCraft.Helper.ToFloat(this.Height) - 20);
            },
            OnShowed: function () {
                ExpressCraft.Form.prototype.OnShowed.call(this);

                if (ExpressCraft.Helper.NotDesktop) {
                    this.AllowSizeChange = true;
                    this.WindowState = ExpressCraft.WindowStateType.Maximized;
                    this.AllowSizeChange = false;
                } else {
                    var rect = this.Content.getBoundingClientRect();

                    try {
                        if (rect.bottom > window.innerHeight || rect.bottom > document.documentElement.clientHeight) {
                            this.MoveFormUp();
                        }
                    }
                    catch ($e1) {
                        $e1 = System.Exception.create($e1);

                    }
                }
            },
            OnClosed: function () {
                ExpressCraft.Form.prototype.OnClosed.call(this);
            }
        }
    });

    Bridge.define("ExpressCraft.ColorInput", {
        inherits: [ExpressCraft.TextInput],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInput.$ctor1.call(this, "color");

            }
        }
    });

    Bridge.define("ExpressCraft.ConsoleForm", {
        inherits: [ExpressCraft.Form],
        statics: {
            fields: {
                ConsoleVisible: false,
                _consoleForm: null,
                prevWindowState: 0,
                firstLoad: false,
                prevLocation: null,
                prevSize: null
            },
            ctors: {
                init: function () {
                    this.prevLocation = new ExpressCraft.Vector2();
                    this.prevSize = new ExpressCraft.Vector2();
                    this.ConsoleVisible = false;
                    this.prevWindowState = ExpressCraft.WindowStateType.Normal;
                    this.firstLoad = true;
                    this.prevSize = ExpressCraft.Settings.ConsoleDefaultSize.$clone();
                }
            },
            methods: {
                CheckConsoleState: function () {
                    if (!ExpressCraft.ConsoleForm.ConsoleVisible) {
                        ExpressCraft.ConsoleForm._consoleForm = new ExpressCraft.ConsoleForm();
                        ExpressCraft.ConsoleForm._consoleForm.Show(true);
                    }
                },
                Log: function (source, logType) {
                    if (logType === void 0) { logType = 0; }
                    ExpressCraft.ConsoleForm.CheckConsoleState();
                    ExpressCraft.ConsoleForm._consoleForm.InternalLog(source, logType);
                },
                Clear: function () {
                    ExpressCraft.ConsoleForm.CheckConsoleState();
                    ExpressCraft.ConsoleForm._consoleForm.InternalClear();
                }
            }
        },
        fields: {
            logContent: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.logContent = ExpressCraft.Control.Div$1("console-body");
                this.Body.appendChild(this.logContent);
                this.Body.style.background = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.Black.$clone());
                this.Body.style.overflowY = "scroll";

                this.Text = System.String.concat(document.title, " - Console");
                if (ExpressCraft.ConsoleForm.firstLoad) {
                    this.StartPosition = ExpressCraft.FormStartPosition.Center;
                    this.Size = ExpressCraft.ConsoleForm.prevSize.$clone();
                } else {
                    this.StartPosition = ExpressCraft.FormStartPosition.Manual;
                    this.Location = ExpressCraft.ConsoleForm.prevLocation.$clone();

                    if (ExpressCraft.ConsoleForm.prevWindowState === ExpressCraft.WindowStateType.Maximized) {
                        ExpressCraft.ConsoleForm.prevSize = ExpressCraft.Settings.ConsoleDefaultSize.$clone();
                    }

                    this.Size = ExpressCraft.ConsoleForm.prevSize.$clone();

                    if (ExpressCraft.ConsoleForm.prevWindowState === ExpressCraft.WindowStateType.Maximized) {
                        this.SetWindowState(ExpressCraft.ConsoleForm.prevWindowState);
                    }
                }


            }
        },
        methods: {
            InternalClear: function () {
                ExpressCraft.Helper.Empty(this.logContent);
            },
            InternalLog: function (source, logType) {
                var $t;
                if (logType === void 0) { logType = 0; }
                var para = ($t = document.createElement('p'), $t.className = "console-para", $t);
                switch (logType) {
                    case ExpressCraft.ConsoleLogType.Debug: 
                        para.style.color = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.ForestGreen.$clone());
                        break;
                    case ExpressCraft.ConsoleLogType.Error: 
                        para.style.color = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.Red.$clone());
                        break;
                }

                para.innerHTML = source;
                this.logContent.appendChild(para);
                if (this.logContent.children.length > 1000) {
                    this.logContent.removeChild(($t = this.logContent.children)[System.Array.index(0, $t)]);
                }
                para.scrollIntoView(false);
            },
            OnGotFocus: function () {
                if (this.Content != null) {
                    this.Style.opacity = "1";
                }
                ExpressCraft.Form.prototype.OnGotFocus.call(this);
            },
            OnLostFocus: function () {
                if (this.Content != null) {
                    this.Style.opacity = "0.5";
                }
                ExpressCraft.Form.prototype.OnLostFocus.call(this);
            },
            OnShowed: function () {
                ExpressCraft.Form.prototype.OnShowed.call(this);
                ExpressCraft.ConsoleForm.ConsoleVisible = true;
                ExpressCraft.ConsoleForm.firstLoad = false;
            },
            OnClosing: function () {
                ExpressCraft.Form.prototype.OnClosing.call(this);

                ExpressCraft.ConsoleForm.prevSize = this.Size.$clone();
                ExpressCraft.ConsoleForm.prevLocation = this.Location.$clone();
                ExpressCraft.ConsoleForm.prevWindowState = this.WindowState;
            },
            OnClosed: function () {
                ExpressCraft.Form.prototype.OnClosed.call(this);
                ExpressCraft.ConsoleForm.ConsoleVisible = false;
            }
        }
    });

    Bridge.define("ExpressCraft.DialogForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            _buttonCollection: null,
            ButtonSection: null
        },
        ctors: {
            ctor: function (text) {
                if (text === void 0) { text = ""; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Text = text;
                this.Body.style.backgroundColor = "white";

                //           top:calc(100% - 70px);
                //width:100%;
                //height:70px;


                this.ButtonSection = new ExpressCraft.Control.$ctor5("dialogbuttonsection");

                if (ExpressCraft.Helper.NotDesktop) {
                    this.ButtonSection.Top = "(100% - 70px)";
                    this.ButtonSection.Size = new ExpressCraft.Vector2.$ctor1("100%", 70);
                }
            }
        },
        methods: {
            OnShowing: function () {
                this.Body.appendChild(ExpressCraft.Control.op_Implicit(this.ButtonSection));
                ExpressCraft.Form.prototype.OnShowing.call(this);
            }
        }
    });

    Bridge.define("ExpressCraft.TextInputDropDown", {
        inherits: [ExpressCraft.TextInput],
        fields: {
            DropDownButton: null,
            UsedEdit: null
        },
        ctors: {
            ctor: function (inputType) {
                if (inputType === void 0) { inputType = 19; }

                this.$initialize();
                ExpressCraft.TextInput.ctor.call(this, document.createElement('div'), true, false);
                var $t;
                var dropDownWidth = 17;

                if (ExpressCraft.Helper.NotDesktop) {
                    dropDownWidth = 45;
                }

                this.Type = inputType;

                this.UsedEdit = ($t = new ExpressCraft.TextInput.$ctor1(inputType), $t.DisableFocusPopup = true, $t.Location = new ExpressCraft.Vector2.$ctor1(0, 0), $t.Size = new ExpressCraft.Vector2.$ctor1("(100% - " + (((dropDownWidth - 1) | 0)) + "px)", "100%"), $t);
                this.DropDownButton = ($t = new ExpressCraft.SimpleButton(), $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - " + dropDownWidth + "px)", 0), $t.Size = new ExpressCraft.Vector2.$ctor1(dropDownWidth, "100%"), $t);
                this.DropDownButton.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextInputDropDown.f1);

                this.Style.border = "0";

                this.DropDownButton.ClassList.add("dropdown");

                if (ExpressCraft.Helper.NotDesktop) {
                    this.DropDownButton.Style.backgroundPosition = "right 16px center";
                }

                ExpressCraft.Helper.AppendChildren$2(this.Content, [this.UsedEdit, this.DropDownButton]);
        }
    },
    methods: {
        GetDisplayFormat: function () {
            return this.UsedEdit.GetDisplayFormat();
        },
        GetDropdownWidth: function () {
            return this.Content.getBoundingClientRect().width;
        },
        SetDisplayFormat: function (value) {
            this.UsedEdit.SetDisplayFormat(value);
        },
        OnFocus: function () {
            this.UsedEdit.Focus();
        },
        GetInput: function () {
            return this.UsedEdit.GetInput();
        },
        GetValue: function () {
            return this.UsedEdit.Text;
        },
        SetValue: function (value) {
            this.UsedEdit.Text = value;
        },
        OnDropDownClicked: function (mouseEvent) {

        }
    }
    });

    Bridge.ns("ExpressCraft.TextInputDropDown", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextInputDropDown, {
        f1: function (ev) {
            if (!this.Readonly && this.Enabled) {
                this.OnDropDownClicked(ev);
            }
        }
    });

    Bridge.define("ExpressCraft.MemoInput", {
        inherits: [ExpressCraft.TextInput],
        fields: {
            PreSize: null,
            PrePreSize: null,
            PreZIndex$1: null,
            _hasGotFocus: false
        },
        props: {
            Rows: {
                get: function () {
                    return this.Content.rows;
                },
                set: function (value) {
                    this.Content.rows = value;
                }
            },
            Cols: {
                get: function () {
                    return this.Content.cols;
                },
                set: function (value) {
                    this.Content.cols = value;
                }
            },
            DisableResize: false
        },
        ctors: {
            init: function () {
                this.PreSize = new ExpressCraft.Vector2();
                this.PrePreSize = new ExpressCraft.Vector2();
            },
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInput.ctor.call(this, document.createElement('textarea'));
                this.Style.resize = "none";

                this.OnGotFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.MemoInput.f1);
                this.OnLostFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.MemoInput.f2);
            }
        },
        methods: {
            GetValue: function () {
                return this.Content.value;
            },
            SetValue: function (value) {
                this.Content.value = value;
            }
        }
    });

    Bridge.ns("ExpressCraft.MemoInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.MemoInput, {
        f1: function (memo) {
            if (this.DisableResize) {
                return;
            }

            this.Style.resize = "both";
            this.PrePreSize = this.Size.$clone();

            if (this._hasGotFocus) {
                this.Size = this.PreSize.$clone();
            } else {
                this._hasGotFocus = true;
                this.PreSize = this.Size.$clone();
            }

        },
        f2: function (memo) {
            this.Style.resize = "none";
            this.PreSize = this.Size.$clone();
            this.Size = this.PrePreSize.$clone();
        }
    });

    Bridge.define("ExpressCraft.Network.NetworkProgressForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            progressControl: null,
            buttonCancel: null
        },
        ctors: {
            ctor: function (_text) {
                if (_text === void 0) { _text = "Loading..."; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                var $t;
                this.Text = _text;
                this.Width = 400;
                this.Height = 200;

                this.progressControl = new ExpressCraft.ProgressControl();
                ExpressCraft.Helper.SetBounds(this.progressControl, 50, 50, "(100% - 100px)", "23px");

                this.buttonCancel = ($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t);
                ExpressCraft.Helper.SetLocation$1(this.buttonCancel, "(100% - 78px)", "(100% - 26px)");
                this.buttonCancel.Content.tabIndex = 0;

                ExpressCraft.Helper.AppendChildren$2(this.Body, [this.buttonCancel, this.progressControl]);

                this.AllowSizeChange = false;
        }
    }
    });

    Bridge.define("ExpressCraft.PDFPreviewForm", {
        inherits: [ExpressCraft.Form],
        fields: {
            Source: null,
            PDFSourceType: 0,
            PdfViewer: null
        },
        ctors: {
            ctor: function (source, pdfSourceType) {
                if (pdfSourceType === void 0) { pdfSourceType = 0; }

                this.$initialize();
                ExpressCraft.Form.ctor.call(this);
                this.Source = source;
                this.PDFSourceType = pdfSourceType;

                this.PdfViewer = document.createElement(Bridge.Browser.isIE ? "iframe" : pdfSourceType === ExpressCraft.PdfSourceType.Url ? "embed" : "object");
                this.PdfViewer.className = "control";

                ExpressCraft.Helper.SetBounds$1(this.PdfViewer, 0, 0, "100%", "100%");
                this.PdfViewer.setAttribute("alt", "pdf");
                this.PdfViewer.setAttribute("type", "application/pdf");
                //object 		

                this.Body.appendChild(this.PdfViewer);
            }
        },
        methods: {
            OnShowing: function () {
                ExpressCraft.Form.prototype.OnShowing.call(this);
                //data
                if (this.PDFSourceType === ExpressCraft.PdfSourceType.Url) {
                    this.PdfViewer.setAttribute("Src", this.Source);
                } else {
                    this.PdfViewer.setAttribute("data", ExpressCraft.Control.GetPdfString(this.Source));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.SimpleDialogButton", {
        inherits: [ExpressCraft.SimpleButton],
        ctors: {
            ctor: function (parentForm, dialogResult) {
                if (dialogResult === void 0) { dialogResult = 0; }

                this.$initialize();
                ExpressCraft.SimpleButton.ctor.call(this);
                this.ParentForm = parentForm;
                this.DialogResult = dialogResult;

                ExpressCraft.Helper.SetSize(this, 75, 23);
            }
        }
    });

    Bridge.define("ExpressCraft.CalcForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            InputControl: null,
            CalControl: null,
            ClickedClose: false
        },
        ctors: {
            init: function () {
                this.ClickedClose = false;
            },
            ctor: function (inputControl) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                if (inputControl.Content.parentElement != null && inputControl.Content.parentElement.parentElement != null && inputControl.Content.parentElement.parentElement.parentElement != null) {
                    this.PreviousScrollTop = inputControl.Content.parentElement.parentElement.parentElement.scrollTop;
                    this.ParentContainer = inputControl.Content.parentElement.parentElement.parentElement;
                }

                this.InputControl = inputControl;
                this.CalControl = new ExpressCraft.CalculatorControl(this.InputControl.GetNumberValue(), true);
                ExpressCraft.Helper.SetBoundsFull(this.CalControl);
                this.CalControl.OnClose = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalcForm.f1);

                this.CalControl.OnEqual = Bridge.fn.bind(this, $asm.$.ExpressCraft.CalcForm.f2);

                this.AppendChild$1(this.CalControl);

                this.Size = new ExpressCraft.Vector2.$ctor1(182, 157);
            }
        },
        methods: {
            OnClosed: function () {
                ExpressCraft.FormPopup.prototype.OnClosed.call(this);
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.InputControl.Focus();
                } else {
                    this.InputControl.Scroll(this.PreviousScrollTop, this.ParentContainer);
                }
            },
            OnClosing: function () {
                ExpressCraft.FormPopup.prototype.OnClosing.call(this);

                if (!this.ClickedClose) {
                    this.CalControl.DontRefresh = true;
                    this.CalControl.AddOperator(this.CalControl.btnEq);
                }
            },
            OnShowed: function () {
                ExpressCraft.FormPopup.prototype.OnShowed.call(this);
                if (this.InputControl == null) {
                    this.Close();
                }

                this.CalControl.btnEq.Focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.CalcForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.CalcForm, {
        f1: function () {
            this.ClickedClose = true;
            this.Close();
        },
        f2: function (value) {
            this.InputControl.Text = value.toString();
        }
    });

    Bridge.define("ExpressCraft.DataRowEditForm", {
        inherits: [ExpressCraft.DialogForm],
        fields: {
            LiveData: false,
            GridView: null,
            DataRow: null,
            Panel: null,
            prevData: null
        },
        ctors: {
            ctor: function (_dataRow, _gridView, _liveData) {
                if (_liveData === void 0) { _liveData = true; }

                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this);
                this.prevData = System.Array.init(_dataRow.ParentTable.ColumnCount, null, System.Object);

                for (var i = 0; i < _dataRow.ParentTable.ColumnCount; i = (i + 1) | 0) {
                    this.prevData[System.Array.index(i, this.prevData)] = _dataRow.getItem(i);
                }

                this.DataRow = _dataRow;
                this.GridView = _gridView;
                this.LiveData = _liveData;

                this.Text = "Row Edit Form";
                this.Width = "400px"; // 25px - 25px 350px width;
                this.Height = "600px";
                this.Body.style.overflowY = "auto";

                this.Panel = ExpressCraft.Control.Div();
                this.Panel.style.overflowY = "auto";
                ExpressCraft.Helper.SetBounds$1(this.Panel, "0", "0", "100%", "(100% - 60px)");
                this.Body.style.backgroundColor = "white";

                this._buttonCollection = Bridge.fn.bind(this, function (_o3) {
                        var $t;
                        _o3.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", "(100% - 35px)"), $t.ItemClick = Bridge.fn.bind(this, function (ev) {
                            for (var i1 = 0; i1 < this.DataRow.ParentTable.ColumnCount; i1 = (i1 + 1) | 0) {
                                _dataRow.setItem(i1, this.prevData[System.Array.index(i1, this.prevData)]);
                            }

                            this.GridView.RenderGrid();
                        }), $t));
                        _o3.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "OK", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", "(100% - 35px)"), $t));
                        return _o3;
                    })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                this.Body.appendChild(this.Panel);

                this.AllowSizeChange = false;
            }
        },
        methods: {
            OnClosed: function () {
                this.GridView.DataSource.EndDataUpdate();

                ExpressCraft.DialogForm.prototype.OnClosed.call(this);
            },
            OnShowed: function () {
                ExpressCraft.DialogForm.prototype.OnShowed.call(this);

                if (this.DataRow == null) {
                    this.DialogResult = ExpressCraft.DialogResultEnum.Cancel;
                    this.Close();
                } else {
                    this.GridView.DataSource.BeginDataUpdate();

                    this.GenerateForm();
                }
            },
            GenerateForm: function () {
                ExpressCraft.Helper.Empty(this.Panel);
                var length = this.GridView.ColumnCount();

                var col = 0;
                var height = 25;

                var defaultHeight = 54;
                var defaultHeight2X = Bridge.Int.mul(defaultHeight, 3);
                var incrementHeight = defaultHeight;

                var eachWidth = 113;

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    incrementHeight = defaultHeight;
                    var grCol = this.GridView.GetColumn(i);

                    if (!grCol.AllowEdit) {
                        continue;
                    }

                    var dtCol = grCol.Column;

                    var dtIndex = { v : grCol.GetDataColumnIndex() };

                    if (Bridge.referenceEquals(grCol.Column.FieldName.toLowerCase(), "cntr")) {
                        grCol.ReadOnly = true;
                    }

                    switch (dtCol.DataType) {
                        case ExpressCraft.DataType.DateTime: 
                            var lbldate = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputDate = { v : new ExpressCraft.TextInput.$ctor1("date") };
                            ExpressCraft.Helper.SetBounds(inputDate.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputDate.v.SetDate(System.Convert.toString(this.DataRow.getItem(dtIndex.v)));
                            inputDate.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputDate.v.OnTextChanged = (function ($me, dtIndex, inputDate) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        this.DataRow.setItem(dtIndex.v, inputDate.v.GetDate());
                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, dtIndex, inputDate);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lbldate, ExpressCraft.Control.op_Implicit(inputDate.v)]);
                            break;
                        case ExpressCraft.DataType.Integer: 
                        case ExpressCraft.DataType.Long: 
                        case ExpressCraft.DataType.Float: 
                        case ExpressCraft.DataType.Double: 
                        case ExpressCraft.DataType.Decimal: 
                        case ExpressCraft.DataType.Bool: 
                        case ExpressCraft.DataType.Byte: 
                        case ExpressCraft.DataType.Short: 
                            var lblnmb = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputNum = { };
                            if (Bridge.is(grCol.CellDisplay, ExpressCraft.GridViewCellDisplayCheckBox)) {
                                inputNum.v = new ExpressCraft.TextInput.$ctor1("checkbox");
                                ExpressCraft.Helper.SetChecked$1(inputNum.v, this.DataRow.getItem(dtIndex.v));
                            } else {
                                inputNum.v = new ExpressCraft.TextInput.$ctor1("number");
                                inputNum.v.Text = System.Convert.toString(this.DataRow.getItem(dtIndex.v));
                            }
                            ExpressCraft.Helper.SetBounds(inputNum.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputNum.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputNum.v.OnTextChanged = (function ($me, inputNum, dtIndex) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        if (inputNum.v.Type === "checkbox") {
                                            this.DataRow.setItem(dtIndex.v, Bridge.box(ExpressCraft.Helper.IsTrue(inputNum.v.Text) === 1, System.Boolean, System.Boolean.toString));
                                        } else {
                                            this.DataRow.setItem(dtIndex.v, inputNum.v.Text);
                                        }
                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, inputNum, dtIndex);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lblnmb, ExpressCraft.Control.op_Implicit(inputNum.v)]);
                            break;
                        default: 
                        case ExpressCraft.DataType.Object: 
                        case ExpressCraft.DataType.String: 
                            var lblstr = ExpressCraft.Control.Label(grCol.Caption, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), height);
                            var inputstr = { v : new ExpressCraft.TextInput.$ctor1("text") };
                            ExpressCraft.Helper.SetBounds(inputstr.v, ((25 + (((Bridge.Int.mul(col, eachWidth) + (Bridge.Int.mul(col, 3))) | 0))) | 0), ((((height + 16) | 0) + 3) | 0), eachWidth, 24);
                            inputstr.v.Text = System.Convert.toString(this.DataRow.getItem(dtIndex.v));
                            inputstr.v.Readonly = grCol.ReadOnly;
                            if (!grCol.ReadOnly) {
                                inputstr.v.OnTextChanged = (function ($me, dtIndex, inputstr) {
                                    return Bridge.fn.bind($me, function (ev) {
                                        this.DataRow.setItem(dtIndex.v, inputstr.v.Text);

                                        if (this.LiveData) {
                                            this.GridView.RenderGrid();
                                        }
                                    });
                                })(this, dtIndex, inputstr);
                            }
                            ExpressCraft.Helper.AppendChildren$1(this.Panel, [lblstr, ExpressCraft.Control.op_Implicit(inputstr.v)]);
                            //if(obj.Length > 100)
                            //{
                            //	incrementHeight = defaultHeight2X;
                            //	col = 2;
                            //}
                            //else
                            //{
                            //}
                            break;
                    }
                    if (col === 2) {
                        height = (height + (((incrementHeight + 3) | 0))) | 0;
                        col = 0;
                    } else {
                        col = (col + 1) | 0;
                    }

                }
                // Add Accept Changes
            }
        }
    });

    Bridge.define("ExpressCraft.DateForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            InputControl: null,
            DateControl: null,
            ClickedClose: false
        },
        ctors: {
            init: function () {
                this.ClickedClose = false;
            },
            ctor: function (inputControl) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                if (inputControl.Content.parentElement != null && inputControl.Content.parentElement.parentElement != null && inputControl.Content.parentElement.parentElement.parentElement != null) {
                    this.PreviousScrollTop = inputControl.Content.parentElement.parentElement.parentElement.scrollTop;
                    this.ParentContainer = inputControl.Content.parentElement.parentElement.parentElement;
                }

                this.Size = new ExpressCraft.Vector2.$ctor1(232, 247);

                this.InputControl = inputControl;
                this.DateControl = new ExpressCraft.DateControl(inputControl.GetDateTime());
                ExpressCraft.Helper.SetBoundsFull(this.DateControl);

                this.DateControl.OnDateChanged = function (date) {
                    if (Bridge.equals(date, System.DateTime.getMinValue())) {
                        inputControl.SetDate("");
                    } else {
                        inputControl.SetDate(System.String.format(System.String.concat("{0:", inputControl.DisplayFormat, "}"), Bridge.box(date, System.DateTime, System.DateTime.format)));
                    }
                };

                this.DateControl.OnRequestToClose = Bridge.fn.bind(this, $asm.$.ExpressCraft.DateForm.f1);

                this.Content.onkeydown = Bridge.fn.cacheBind(this.DateControl, this.DateControl.BlockTabEvent);

                this.AppendChild$1(this.DateControl);
            }
        },
        methods: {
            OnClosed: function () {
                ExpressCraft.FormPopup.prototype.OnClosed.call(this);
                if (!ExpressCraft.Helper.NotDesktop) {
                    this.InputControl.Focus();
                } else {
                    this.InputControl.Scroll(this.PreviousScrollTop, this.ParentContainer);
                }
            },
            OnShowed: function () {
                ExpressCraft.FormPopup.prototype.OnShowed.call(this);
                if (this.InputControl == null) {
                    this.Close();
                }

                this.DateControl.btnToday.Focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.DateForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.DateForm, {
        f1: function () {
            this.Close();
        }
    });

    Bridge.define("ExpressCraft.DateInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "date");

            }
        },
        methods: {
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    (new ExpressCraft.DateForm(this.UsedEdit)).ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogBase", {
        inherits: [ExpressCraft.DialogForm],
        props: {
            QuestionSize: 0,
            Wrapper: null,
            QuestionDiv: null,
            AnswerDiv: null,
            ImageDiv: null
        },
        ctors: {
            ctor: function (title, width, question) {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this, title);
                this.Width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                this.Wrapper = ExpressCraft.Control.Div();
                this.QuestionDiv = ExpressCraft.Control.Div();
                this.AnswerDiv = ExpressCraft.Control.Div();
                this._buttonCollection = Bridge.fn.bind(this, $asm.$.ExpressCraft.InputDialogBase.f1)(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());

                this.Wrapper.style.overflowY = "hidden";
                ExpressCraft.Helper.SetBounds$1(this.Wrapper, "0px", "0px", "100%", "(100% - 60px)");
                this.QuestionDiv.style.position = "relative";
                this.QuestionDiv.style.height = "auto";
                this.QuestionDiv.style.marginLeft = "10px";
                this.QuestionDiv.style.marginRight = "10px";
                this.QuestionDiv.style.marginTop = "10px";
                this.AnswerDiv.style.position = "relative";
                this.AnswerDiv.style.height = "auto";
                ExpressCraft.Helper.SetLocation$1(this._buttonCollection.getItem(0), "(100% - 170px)", "(100% - 35px)");
                ExpressCraft.Helper.SetLocation$1(this._buttonCollection.getItem(1), "(100% - 85px)", "(100% - 35px)");

                var tb = new ExpressCraft.TextBlock(question, ((width - 25) | 0));
                tb.ComputeString();

                if (!tb.ElelemtsOverMax) {
                    width = (((Bridge.Int.clip32(tb.MaxCalculatedWidth) + 65) | 0) + 37) | 0;
                    if (width < ExpressCraft.Settings.MessageFormMinimumWidthInPx) {
                        width = ExpressCraft.Settings.MessageFormMinimumWidthInPx;
                    }
                }
                if (tb.ComputedHeight > ExpressCraft.Settings.MessageFormTextMaximumHeightInPx) {
                    tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMaximumHeightInPx;
                }
                if (tb.ComputedHeight < ExpressCraft.Settings.MessageFormTextMinimumHeightInPx) {
                    tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMinimumHeightInPx;
                }

                this.QuestionDiv.innerHTML = question;
                this.QuestionSize = System.Convert.toInt32(Bridge.box(tb.ComputedHeight, System.Single, System.Single.format, System.Single.getHashCode));
            }
        },
        methods: {
            Create: function (height) {
                this.Wrapper.appendChild(this.QuestionDiv);
                this.Wrapper.appendChild(document.createElement('br'));
                this.Wrapper.appendChild(this.AnswerDiv);
                this.Body.appendChild(this.Wrapper);

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                this.Height = ExpressCraft.Helper.ToPx(Bridge.box(height, System.Int32));
                this.AllowSizeChange = false;
            }
        }
    });

    Bridge.ns("ExpressCraft.InputDialogBase", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.InputDialogBase, {
        f1: function (_o1) {
            var $t;
            _o1.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "Accept", $t));
            _o1.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t));
            return _o1;
        }
    });

    Bridge.define("ExpressCraft.MessageBoxForm", {
        inherits: [ExpressCraft.DialogForm],
        statics: {
            fields: {
                snd: null
            },
            methods: {
                Beep: function () {
                    if (!ExpressCraft.Settings.MessageFormBeep) {
                        return;
                    }
                    if (ExpressCraft.MessageBoxForm.snd == null) {
                        ExpressCraft.MessageBoxForm.snd = new Audio(ExpressCraft.ResourceManager.GetResourceString("beepSound"));
                    }
                    ExpressCraft.MessageBoxForm.snd.play();
                }
            }
        },
        fields: {
            _prompt: null,
            _buttons: 0
        },
        ctors: {
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                           prompt    The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}    ui        The UI settings to be applied to the form
             * @return  {void}
             */
            ctor: function (prompt, ui) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, ExpressCraft.MessageBoxButtons.Auto, System.Enum.toString(ExpressCraft.MessageBoxLayout, ui));
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                           prompt    The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}    ui        The UI settings to be applied to the form
             * @param   {string}                           title     The title of the message box
             * @return  {void}
             */
            $ctor3: function (prompt, ui, title) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, ExpressCraft.MessageBoxButtons.Auto, title);
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                            prompt     The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}     ui         The UI settings to be applied to the form
             * @param   {ExpressCraft.MessageBoxButtons}    buttons    The Type of button to be displayed with this message
             * @return  {void}
             */
            $ctor1: function (prompt, ui, buttons) {
                ExpressCraft.MessageBoxForm.$ctor2.call(this, prompt, ui, buttons, System.Enum.toString(ExpressCraft.MessageBoxLayout, ui));
            },
            /**
             * Create a new Message Dialog
             *
             * @instance
             * @public
             * @this ExpressCraft.MessageBoxForm
             * @memberof ExpressCraft.MessageBoxForm
             * @param   {string}                            prompt     The text to be displayed in the message box
             * @param   {ExpressCraft.MessageBoxLayout}     ui         The UI settings  to be applied to the form
             * @param   {ExpressCraft.MessageBoxButtons}    buttons    The Type of button to be displayed with this message
             * @param   {string}                            title      The title of the message box
             * @return  {void}
             */
            $ctor2: function (prompt, ui, buttons, title) {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this, title);
                var section = ExpressCraft.Control.Div();
                var pic = ExpressCraft.Control.Div$1("image32");
                var textContent = ExpressCraft.Control.Div$1("messag-box-content");
                this._prompt = prompt;
                this._buttons = buttons;

                switch (ui) {
                    case ExpressCraft.MessageBoxLayout.Exclamation: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.Ok;
                        }
                        pic.classList.add("imagewarning");
                        break;
                    case ExpressCraft.MessageBoxLayout.Information: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.Ok;
                        }
                        pic.classList.add("imageinfo");
                        break;
                    case ExpressCraft.MessageBoxLayout.Question: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.YesNo;
                        }
                        pic.classList.add("imageindex");
                        break;
                    case ExpressCraft.MessageBoxLayout.Error: 
                        if (this._buttons === ExpressCraft.MessageBoxButtons.Auto) {
                            this._buttons = ExpressCraft.MessageBoxButtons.AbortSendCancel;
                        }
                        pic.classList.add("imageerror");
                        break;
                    default: 
                        throw new System.ArgumentOutOfRangeException("ui", null, null, Bridge.box(ui, ExpressCraft.MessageBoxLayout, System.Enum.toStringFn(ExpressCraft.MessageBoxLayout)));
                }
                var heightCalc = ExpressCraft.Helper.NotDesktop ? "(100% - 60px)" : "(100% - 35px)";
                switch (this._buttons) {
                    case ExpressCraft.MessageBoxButtons.Ok: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o4) {
                                var $t;
                                _o4.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t.Text = "Ok", $t.Location = new ExpressCraft.Vector2.$ctor1("(50% - 37.5px)", heightCalc), $t));
                                return _o4;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.YesNo: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o5) {
                                var $t;
                                _o5.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.No), $t.Text = "No", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o5.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Yes), $t.Text = "Yes", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t));
                                return _o5;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.YesNoCancel: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o6) {
                                var $t;
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.No), $t.Text = "No", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t));
                                _o6.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Yes), $t.Text = "Yes", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 255px)", heightCalc), $t));
                                return _o6;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    case ExpressCraft.MessageBoxButtons.AbortSendCancel: 
                        this._buttonCollection = Bridge.fn.bind(this, function (_o7) {
                                var $t;
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t.Text = "Cancel", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", heightCalc), $t));
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Send), $t.Text = "Send", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", heightCalc), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.MessageBoxForm.f1), $t));
                                _o7.add(($t = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Abort), $t.Text = "Abort", $t.Location = new ExpressCraft.Vector2.$ctor1("(100% - 255px)", heightCalc), $t.ItemClick = $asm.$.ExpressCraft.MessageBoxForm.f2, $t));
                                return _o7;
                            })(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                        break;
                    default: 
                        throw new System.ArgumentOutOfRangeException();
                }
                var tb = null;

                var width = 480;

                if (!ExpressCraft.Helper.NotDesktop) {
                    tb = new ExpressCraft.TextBlock(prompt, 455);
                    tb.ComputeString();
                    if (this._buttonCollection.Count > 2) {
                        if (width < 320) {
                            width = 320;
                        }
                    }
                    if (!tb.ElelemtsOverMax) {
                        width = (((Bridge.Int.clip32(tb.MaxCalculatedWidth) + 65) | 0) + 37) | 0;
                        if (width < ExpressCraft.Settings.MessageFormMinimumWidthInPx) {
                            width = ExpressCraft.Settings.MessageFormMinimumWidthInPx;
                        }
                    }
                } else {
                    var count = this._buttonCollection.Count;
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        var but = this._buttonCollection.getItem(i);
                        but.Height = 45;
                        but.Style.borderRadius = "4px";
                        but.Style.fontSize = "14px";
                        if (but.DialogResult === ExpressCraft.DialogResultEnum.OK || but.DialogResult === ExpressCraft.DialogResultEnum.Yes) {
                            but.ClassList.add("primary");
                            but.Style.color = "white";
                            but.Style.border = "0";
                        }
                    }
                }

                textContent.innerHTML = prompt;

                section.style.overflowY = "auto";
                section.style.height = "100%";
                section.style.maxHeight = ExpressCraft.Helper.ToPx(Bridge.box(ExpressCraft.Settings.MessageFormTextMaximumHeightInPx, System.Int32));
                section.appendChild(textContent);
                section.style.top = "32px";
                section.style.width = "90%";

                ExpressCraft.Helper.AppendChildren$1(this.Body, [pic, section]);

                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());
                if (ExpressCraft.Helper.NotDesktop) {
                    section.style.textAlign = "center";
                    section.style.lineHeight = "100%";

                    this.WindowState = ExpressCraft.WindowStateType.Maximized;
                    this.Heading.style.display = "none";
                    ExpressCraft.Helper.SetLocation(this.Body, 0, 0);
                    ExpressCraft.Helper.SetSize$1(this.Body, "100%", "100%");
                    this.StartPosition = ExpressCraft.FormStartPosition.Manual;
                    this.AllowSizeChange = false;
                    this.AllowMoveChange = false;

                    this.ShowMaximize = false;
                    this.ShowMinimize = false;
                    this.ShowClose = false;

                    textContent.style.display = "inline-block";
                    textContent.style.fontSize = "14px";
                    textContent.style.verticalAlign = "middle";
                    textContent.style.lineHeight = "normal";
                } else {
                    if (tb.ComputedHeight > ExpressCraft.Settings.MessageFormTextMaximumHeightInPx) {
                        tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMaximumHeightInPx;
                    }
                    if (tb.ComputedHeight < ExpressCraft.Settings.MessageFormTextMinimumHeightInPx) {
                        tb.ComputedHeight = ExpressCraft.Settings.MessageFormTextMinimumHeightInPx;
                    }

                    this.Height = System.Single.format(tb.ComputedHeight + 77 + 29 + 32) + "px";
                    this.Width = ExpressCraft.Helper.ToPx(Bridge.box(width, System.Int32));
                }

                this.AllowSizeChange = false;
            }
        },
        methods: {
            OnShowed: function () {
                ExpressCraft.MessageBoxForm.Beep();

                ExpressCraft.DialogForm.prototype.OnShowed.call(this);
                this._buttonCollection.getItem(0).Content.focus();
            }
        }
    });

    Bridge.ns("ExpressCraft.MessageBoxForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.MessageBoxForm, {
        f1: function (ev) {
            if (!Bridge.staticEquals(ExpressCraft.Settings.OnSendError, null)) {
                ExpressCraft.Settings.OnSendError(this._prompt);
            }
        },
        f2: function (ev) {
            var pre = ExpressCraft.Settings.AllowCloseWithoutQuestion;

            ExpressCraft.Settings.AllowCloseWithoutQuestion = false;
            ExpressCraft.Application.Close();
            ExpressCraft.Settings.AllowCloseWithoutQuestion = pre;
        }
    });

    Bridge.define("ExpressCraft.NumberInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "number");
                this.UsedEdit.SetAttribute("step", "any");
            }
        },
        methods: {
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    (new ExpressCraft.CalcForm(this.UsedEdit)).ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                }
            }
        }
    });

    Bridge.define("ExpressCraft.SearchInput", {
        inherits: [ExpressCraft.TextInputDropDown],
        fields: {
            OnSearch: null
        },
        props: {
            EditValue: null,
            DisplayMember: null,
            ValueMember: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.TextInputDropDown.ctor.call(this, "text");
                this.UsedEdit.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchInput.f1);
                this.UsedEdit.Content.onmousedown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchInput.f2);
            }
        },
        methods: {
            ClearOnOpen: function () {
                return false;
            },
            OnRequestSearch: function (searchValue, grid) {
                if (!Bridge.staticEquals(this.OnSearch, null)) {
                    this.OnSearch(searchValue, grid);
                }
            },
            SearchOnLoad: function () {
                return false;
            },
            OnAcceptResult: function (value) {
                if (value == null) {
                    this.EditValue = null;
                    this.Text = "";
                } else {
                    if (!Bridge.referenceEquals(this.ValueMember, "")) {
                        this.EditValue = value.GetValue$1(this.ValueMember);
                    }
                    if (this.DisplayMember != null) {
                        this.Text = (System.String.concat(value.GetValue$1(this.DisplayMember), ""));
                    }
                }

            },
            OnRequestNew: function (grid) {

            },
            OnClosed: function (value) {

            },
            OnDropDownClicked: function (mouseEvent) {
                if (!this.Readonly && this.Enabled) {
                    (new ExpressCraft.SearchLookupForm(this)).ShowPopup(ExpressCraft.FormPopup.GetPopupDefaultLocation(this.DropDownButton, true));
                }
            }
        }
    });

    Bridge.ns("ExpressCraft.SearchInput", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SearchInput, {
        f1: function (obj, ev) {
            if (ev.keyCode === 13 || ev.keyCode === 40) {
                this.OnDropDownClicked(new MouseEvent("onmousedown"));
            }
        },
        f2: function (ev) {
            this.OnDropDownClicked(new MouseEvent("onmousedown"));
        }
    });

    Bridge.define("ExpressCraft.SearchLookupForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            SearchInput: null,
            FocusedRow: null,
            View: null,
            SearchEdit: null,
            btnSearch: null,
            btnClose: null,
            btnNew: null,
            btnUse: null,
            btnClear: null
        },
        ctors: {
            ctor: function (searchInput) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                var $t;
                if (searchInput.Content.parentElement != null && searchInput.Content.parentElement.parentElement != null) {
                    this.PreviousScrollTop = searchInput.Content.parentElement.parentElement.scrollTop;
                    this.ParentContainer = searchInput.Content.parentElement.parentElement;
                }
                var x = searchInput.Content.getBoundingClientRect();

                this.MinHeight = 100;
                this.MinWidth = 150;

                var wid = searchInput.GetDropdownWidth();
                if (wid < 150) {
                    wid = 150;
                }

                this.Size = new ExpressCraft.Vector2.$ctor1(wid, 250);

                this.AllowSizeChange = true;

                this.SearchInput = searchInput;

                var frag = document.createDocumentFragment();

                ExpressCraft.Helper.AppendChildren$2(frag, [(this.SearchEdit = ($t = new ExpressCraft.TextInput.$ctor1(), $t.Text = searchInput.ClearOnOpen() ? "" : this.SearchInput.Text, $t.OnFocusDontSelectAll = true, $t.DisableFocusPopup = true, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 4, "(100% - 68px)", 20), $t.ToolTip = new ExpressCraft.ToolTip.$ctor1("Help:", "[Enter] to Search, [CTRL] + [Enter] to Search and Use, [ESC] to close"), $t)), (this.btnSearch = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Search", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 65px)", 4, 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f1), $t)), (this.View = ($t = new ExpressCraft.GridView(true, true), $t.AllowMultiSelection = false, $t.UseEditForm = false, $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, 28, "(100% - 10px)", "(100% - 60px)"), $t)), (this.btnClose = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Bounds = new ExpressCraft.Vector4.$ctor1(4, "(100% - 25px)", 20, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f2), $t)), (this.btnNew = ($t = new ExpressCraft.SimpleButton(), $t.Text = "New", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 65px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f3), $t)), (this.btnUse = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Use", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 132px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f4), $t)), (this.btnClear = ($t = new ExpressCraft.SimpleButton(), $t.Text = "Clear", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 199px)", "(100% - 25px)", 61, 20), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f5), $t))]);

                this.btnClose.Style.color = "red";

                if (ExpressCraft.Helper.NotDesktop) {
                    this.SearchEdit.Style.fontSize = "14px";
                    this.SearchEdit.Height = "45px";

                    this.btnSearch.Style.fontSize = "14px";
                    this.btnSearch.Height = 45;

                    this.View.Top = 55;
                    this.View.Height = "(100% - 112px)";

                    this.btnClear.Style.fontSize = "14px";
                    this.btnClear.Height = 45;
                    this.btnClear.Top = "(100% - 51px)";

                    this.btnUse.Style.fontSize = "14px";
                    this.btnUse.Height = 45;
                    this.btnUse.Top = "(100% - 51px)";

                    this.btnNew.Style.fontSize = "14px";
                    this.btnNew.Height = 45;
                    this.btnNew.Top = "(100% - 51px)";

                    this.btnClose.Style.fontSize = "26px";
                    this.btnClose.Style.fontWeight = "bold";
                    this.btnClose.Height = 45;
                    this.btnClose.Width = 61;
                    this.btnClose.Top = "(100% - 51px)";
                }

                this.SearchEdit.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f6);

                this.View.OnFocusedRowChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f7);

                this.View.OnRowDoubleClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f8);


                this.Body.appendChild(frag);

                this.SearchEdit.OnGotFocus = Bridge.fn.bind(this, $asm.$.ExpressCraft.SearchLookupForm.f9);

                this.LinkchildToForm(this.View);
        }
    },
    methods: {
        OnShowed: function () {
            ExpressCraft.FormPopup.prototype.OnShowed.call(this);

            this.SearchEdit.Focus();

            if (this.SearchInput.SearchOnLoad()) {
                this.btnSearch.Content.click();
            }
        },
        OnClosed: function () {
            ExpressCraft.FormPopup.prototype.OnClosed.call(this);

            this.SearchInput.OnClosed(this.FocusedRow);
            if (!ExpressCraft.Helper.NotDesktop) {
                this.SearchInput.GetInput().focus();
            } else {
                this.SearchInput.Scroll(this.PreviousScrollTop, this.ParentContainer);
            }
        }
    }
    });

    Bridge.ns("ExpressCraft.SearchLookupForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.SearchLookupForm, {
        f1: function (s) {
            this.SearchInput.OnRequestSearch(this.SearchEdit.Text, this.View);
        },
        f2: function (s) {
            this.Close();
        },
        f3: function (s) {
            this.SearchInput.OnRequestNew(this.View);
        },
        f4: function (s) {
            if (this.View.FocusedDataHandle === -1 && this.View.RowCount() > 0) {
                this.View.FocusedDataHandle = 0;
            }
            if (this.FocusedRow != null) {
                this.SearchInput.OnAcceptResult(this.FocusedRow);
                this.Close();
            }
        },
        f5: function (s) {
            this.FocusedRow = null;
            this.SearchInput.OnAcceptResult(this.FocusedRow);
            this.Close();
        },
        f6: function (obj, ev) {
            if (ev.keyCode === 9) {
                this.Close();
                ev.preventDefault();
            } else if (ev.keyCode === 13) {
                this.SearchInput.OnRequestSearch(this.SearchEdit.Text, this.View);
                if (ev.ctrlKey) {
                    this.btnUse.Content.click();
                }
                ev.preventDefault();
            } else if (ev.keyCode === 27) {
                this.FocusedRow = null;
                this.Close();
                ev.preventDefault();
            }
        },
        f7: function (row, col) {
            if (this.View.FocusedDataHandle > -1) {
                this.FocusedRow = this.View.DataSource.getItem(this.View.GetDataSourceRow(this.View.FocusedDataHandle));
            } else {
                this.FocusedRow = null;
            }
            this.SearchInput.OnAcceptResult(this.FocusedRow);
        },
        f8: function (row) {
            if (this.View.FocusedDataHandle > -1) {
                this.FocusedRow = this.View.DataSource.getItem(this.View.GetDataSourceRow(this.View.FocusedDataHandle));
            } else {
                this.FocusedRow = null;
            }
            this.SearchInput.OnAcceptResult(this.FocusedRow);
            this.Close();
        },
        f9: function (obj) {
            this.SearchEdit.GetInput().selectionStart = this.SearchEdit.Text.length;
        }
    });

    Bridge.define("ExpressCraft.TextForm", {
        inherits: [ExpressCraft.FormPopup],
        fields: {
            ReadInput: null,
            EditInput: null,
            btnDone: null
        },
        ctors: {
            ctor: function (input) {
                this.$initialize();
                ExpressCraft.FormPopup.ctor.call(this);
                var $t;
                if (input.Content.parentElement != null && input.Content.parentElement.parentElement != null) {
                    this.PreviousScrollTop = input.Content.parentElement.parentElement.scrollTop;
                    this.ParentContainer = input.Content.parentElement.parentElement;
                }

                this.WindowState = ExpressCraft.WindowStateType.Maximized;

                this.ReadInput = input;

                if (Bridge.is(this.ReadInput, ExpressCraft.MemoInput)) {
                    this.EditInput = new ExpressCraft.MemoInput();
                } else {
                    this.EditInput = ($t = new ExpressCraft.TextInput.$ctor1(input.Type), $t.DisplayFormat = this.ReadInput.DisplayFormat, $t);
                    this.EditInput.OnKeyDown = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f1);
                }

                this.EditInput.Text = input.Text;
                this.EditInput.Style.fontSize = "14px";

                this.EditInput.DisableFocusPopup = true;
                this.EditInput.Size = new ExpressCraft.Vector2.$ctor1("(100% - 112px)", "100%");
                this.EditInput.Location = new ExpressCraft.Vector2.$ctor1(0, 0);

                this.btnDone = ($t = new ExpressCraft.SimpleButton(), $t.Text = "&times;", $t.Bounds = new ExpressCraft.Vector4.$ctor1("(100% - 106px)", "(50% - 22.5px)", 100, 45), $t.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f2), $t);

                this.btnDone.Style.borderRadius = "4px";
                this.btnDone.ClassList.add("primary");
                this.btnDone.Style.borderWidth = "0";

                this.btnDone.Text = "&times;";
                this.btnDone.Style.fontSize = "26px";
                this.btnDone.Style.color = "white";
                this.btnDone.Style.fontWeight = "bold";

                this.EditInput.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.TextForm.f3);

                this.AppendChildren$1([this.EditInput, this.btnDone]);
        }
    },
    methods: {
        OnShowed: function () {
            ExpressCraft.FormPopup.prototype.OnShowed.call(this);

            var dataP = this.ReadInput.GetAttribute("data-placeholder");
            if (!System.String.isNullOrWhiteSpace(dataP)) {
                this.EditInput.SetAttribute("placeholder", dataP);
            } else {
                if (!System.String.isNullOrWhiteSpace(this.ReadInput.GetAttribute("placeholder"))) {
                    this.EditInput.SetAttribute("placeholder", this.ReadInput.GetAttribute("placeholder"));
                }
            }

            this.EditInput.Focus();
        },
        OnClosed: function () {
            this.ReadInput.Scroll(this.PreviousScrollTop, this.ParentContainer);
            ExpressCraft.FormPopup.prototype.OnClosed.call(this);
        }
    }
    });

    Bridge.ns("ExpressCraft.TextForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.TextForm, {
        f1: function (s, ev) {
            if (ev.keyCode === 13) {
                this.btnDone.Content.click();
            }
        },
        f2: function (sender) {
            this.Close();
            if (!Bridge.referenceEquals(this.EditInput.GetEditValue(), this.ReadInput.GetEditValue())) {
                this.ReadInput.Text = this.EditInput.Text;

                if (this.ReadInput.IsSubmit) {
                    var e = $.Event("keypress");
                    e.which = 13;
                    e.keyCode = 13;
                    $(this.ReadInput.Content).trigger(Bridge.cast(e, jQuery.Event));
                } else if (this.ReadInput.GoNext) {
                    var x = document.querySelectorAll("input, textarea, button");
                    var tabPlus1 = (this.ReadInput.Content.tabIndex + 1) | 0;
                    for (var i = 0; i < x.length; i = (i + 1) | 0) {
                        if (x[System.Array.index(i, x)].tabIndex === tabPlus1) {
                            ExpressCraft.Helper.FocusElement(x[System.Array.index(i, x)]);
                            break;
                        }
                    }
                }
            }

        },
        f3: function (sender) {
            if (Bridge.referenceEquals(this.EditInput.GetEditValue(), this.ReadInput.GetEditValue())) {
                this.btnDone.Text = "&times;";
                this.btnDone.Style.fontSize = "26px";
                this.btnDone.Style.fontWeight = "bold";
            } else {
                this.btnDone.Text = this.ReadInput.IsSubmit ? "Submit" : this.ReadInput.GoNext ? "Next" : "Done";
                this.btnDone.Style.fontSize = "14px";
                this.btnDone.Style.fontWeight = "";
            }
        }
    });

    Bridge.define("ExpressCraft.ThemeForm", {
        inherits: [ExpressCraft.DialogForm],
        statics: {
            fields: {
                _themeVisible: false,
                themeForm: null
            },
            methods: {
                ShowThemeForm: function () {
                    if (!ExpressCraft.ThemeForm._themeVisible) {
                        ExpressCraft.ThemeForm.themeForm = new ExpressCraft.ThemeForm();
                        ExpressCraft.ThemeForm.themeForm.Show(true);

                        ExpressCraft.ThemeForm._themeVisible = true;
                    }
                }
            }
        },
        fields: {
            currentTheme: null,
            prevTheme: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                ExpressCraft.DialogForm.ctor.call(this);
                var $t, $t1;
                this.prevTheme = ExpressCraft.Settings.ActiveTheme;
                this.currentTheme = Newtonsoft.Json.JsonConvert.DeserializeObject(Newtonsoft.Json.JsonConvert.SerializeObject(this.prevTheme, ($t = new Newtonsoft.Json.JsonSerializerSettings(), $t.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Objects, $t)), ExpressCraft.Theme, ($t = new Newtonsoft.Json.JsonSerializerSettings(), $t.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Objects, $t));

                ExpressCraft.Settings.ActiveTheme = this.currentTheme;

                this._buttonCollection = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f3)(new (System.Collections.Generic.List$1(ExpressCraft.SimpleDialogButton))());
                ExpressCraft.Helper.AppendChildrenTabIndex$1(this.ButtonSection, this._buttonCollection.toArray());

                var length = this.currentTheme.Colors.length;
                var y = 20;
                var x = 20;

                var Panel = ExpressCraft.Control.Div();
                Panel.style.overflowY = "auto";
                ExpressCraft.Helper.SetBounds$1(Panel, 0, 0, "100%", "(100% - 60px)");

                this.Body.style.backgroundColor = ExpressCraft.Color.op_Implicit$1(ExpressCraft.Color.White.$clone());

                for (var i = 0; i < length; i = (i + 1) | 0) {
                    Panel.appendChild(ExpressCraft.Control.op_Implicit(ExpressCraft.Helper.SetBounds(($t = new ExpressCraft.ColorInput(), $t.Text = ($t1 = this.currentTheme.Colors)[System.Array.index(i, $t1)].toString(), $t.ToolTip = new ExpressCraft.ToolTip.$ctor1("This is a heading test.", "This is a description test."), $t.OnTextChanged = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f4), $t).SetAttribute("i", i), x, y, 95, 20)));

                    x = (x + 100) | 0;

                    if (i % 2 !== 0) {
                        y = (y + 30) | 0;
                        x = 20;
                    }
                }

                this.Body.appendChild(Panel);

                this.Size = new ExpressCraft.Vector2.$ctor1(250, 300);
                this.Text = "Theme Form Editor";

                this.AllowMoveChange = true;
                this.AllowSizeChange = false;

                this.ShowClose = false;
                this.ShowMaximize = false;
                this.ShowMinimize = false;
        }
    },
    methods: {
        OnClosed: function () {
            ExpressCraft.DialogForm.prototype.OnClosed.call(this);
            ExpressCraft.ThemeForm._themeVisible = false;
        },
        OnGotFocus: function () {
            if (this.Content != null) {
                this.Style.opacity = "1";
            }
            ExpressCraft.DialogForm.prototype.OnGotFocus.call(this);
        },
        OnLostFocus: function () {
            if (this.Content != null) {
                this.Style.opacity = "0.5";
            }
            ExpressCraft.DialogForm.prototype.OnLostFocus.call(this);
        }
    }
    });

    Bridge.ns("ExpressCraft.ThemeForm", $asm.$);

    Bridge.apply($asm.$.ExpressCraft.ThemeForm, {
        f1: function (ev) {
            ExpressCraft.Settings.ActiveTheme = this.prevTheme;
            this.Close();
        },
        f2: function (ev) {
            ExpressCraft.Settings.ApplyActiveTheme();
            this.Close();
        },
        f3: function (_o2) {
            var $t1;
            _o2.add(($t1 = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.Cancel), $t1.Text = "Cancel", $t1.Location = new ExpressCraft.Vector2.$ctor1("(100% - 85px)", "(100% - 35px)"), $t1.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f1), $t1));
            _o2.add(($t1 = new ExpressCraft.SimpleDialogButton(this, ExpressCraft.DialogResultEnum.OK), $t1.Text = "OK", $t1.Location = new ExpressCraft.Vector2.$ctor1("(100% - 170px)", "(100% - 35px)"), $t1.ItemClick = Bridge.fn.bind(this, $asm.$.ExpressCraft.ThemeForm.f2), $t1));
            return _o2;
        },
        f4: function (tx) {
            var $t2;
            var index = tx.GetAttributei("i");
            ($t2 = this.currentTheme.Colors)[System.Array.index(index, $t2)] = tx.Text;

            ExpressCraft.Settings.ApplyActiveTheme();
        }
    });

    Bridge.define("ExpressCraft.InputDialogCheckbox", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: false
        },
        ctors: {
            /**
             * Creates a Question Dialog with a checkbox
                 The Result Property contains a boolean value of the checkbox state
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogCheckbox
             * @memberof ExpressCraft.InputDialogCheckbox
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogCheckbox.$ctor1.call(this, title, question, 360);

            },
            /**
             * Creates a Question Dialog with a checkbox
                 The Result Property contains a boolean value of the checkbox state
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogCheckbox
             * @memberof ExpressCraft.InputDialogCheckbox
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "checkbox");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "40px");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.checked;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 40) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogColour", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a colour selector
                 The Result Property contains the HexCode for the selected colour
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogColour
             * @memberof ExpressCraft.InputDialogColour
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogColour.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a colour selector
                 The Result Property contains the HexCode for the selected colour
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogColour
             * @memberof ExpressCraft.InputDialogColour
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "color");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "40px");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 40) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogDate", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDate
             * @memberof ExpressCraft.InputDialogDate
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogDate.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDate
             * @memberof ExpressCraft.InputDialogDate
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "date");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogDateTimeLocal", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            init: function () {
                this.Result = System.DateTime.getDefaultValue();
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDateTimeLocal
             * @memberof ExpressCraft.InputDialogDateTimeLocal
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogDateTimeLocal.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Date Selector
                 The Result Property contains the selected Date
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogDateTimeLocal
             * @memberof ExpressCraft.InputDialogDateTimeLocal
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                this.Result = System.DateTime.getNow();
                var input = ExpressCraft.Control.Input("inputcontrol", "datetime-local");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = System.DateTime.parseExact(input.value, "yyyy-MM-ddTHH:mm", System.Globalization.CultureInfo.invariantCulture);
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogEmail", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with an email input
                 The Result Property contains the Entered email address
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogEmail
             * @memberof ExpressCraft.InputDialogEmail
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogEmail.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with an email input
                 The Result Property contains the Entered email
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogEmail
             * @memberof ExpressCraft.InputDialogEmail
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "email");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    //todo css for email input not showing up
                    //todo could always validate email here
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogMonth", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Month input
                 The Result Property contains the Entered Month
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogMonth
             * @memberof ExpressCraft.InputDialogMonth
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogMonth.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Month input
                 The Result Property contains the Entered Month
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogMonth
             * @memberof ExpressCraft.InputDialogMonth
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "month");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogNumber", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: 0
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Number Selector
                 The Result Property contains the selected value
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogNumber
             * @memberof ExpressCraft.InputDialogNumber
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogNumber.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Number Selector
                 The Result Property contains the selected value
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogNumber
             * @memberof ExpressCraft.InputDialogNumber
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "number");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.valueAsNumber;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogText", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Text input
                 The Result Property contains the Entered Text
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogText
             * @memberof ExpressCraft.InputDialogText
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogText.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Text input
                 The Result Property contains the Entered Text
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogText
             * @memberof ExpressCraft.InputDialogText
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "text");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });

    Bridge.define("ExpressCraft.InputDialogWeek", {
        inherits: [ExpressCraft.InputDialogBase],
        props: {
            Result: null
        },
        ctors: {
            /**
             * Creates a Question Dialog with a Week input
                 The Result Property contains the Entered week
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogWeek
             * @memberof ExpressCraft.InputDialogWeek
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @return  {void}
             */
            ctor: function (title, question) {
                ExpressCraft.InputDialogWeek.$ctor1.call(this, title, question, 360);
            },
            /**
             * Creates a Question Dialog with a Week input
                 The Result Property contains the Entered Week
             *
             * @instance
             * @public
             * @this ExpressCraft.InputDialogWeek
             * @memberof ExpressCraft.InputDialogWeek
             * @param   {string}    title       The message that will appear in the title bar of the dialog
             * @param   {string}    question    The message that will appear about the input box on the dialog
             * @param   {number}    size        The width of this dialog. The default size is 360
             * @return  {void}
             */
            $ctor1: function (title, question, size) {
                this.$initialize();
                ExpressCraft.InputDialogBase.ctor.call(this, title, size, question);
                var input = ExpressCraft.Control.Input("inputcontrol", "week");
                input.id = "DialogAnswerBox";
                ExpressCraft.Helper.SetBounds$1(input, "10px", "0px", "90%", "auto");
                input.onchange = Bridge.fn.bind(this, function (ev) {
                    this.Result = input.value;
                });
                this.AnswerDiv.appendChild(input);
                this.Create(((((((this.QuestionSize + 25) | 0) + 25) | 0) + 78) | 0));
            }
        }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJFeHByZXNzQ3JhZnQuanMiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbImNvbnRyb2xzL0NvbnRyb2wuY3MiLCJBcHAuY3MiLCJ1dGlscy9BcHBsaWNhdGlvbi5jcyIsInV0aWxzL0JhcmNvZGVRdWFnZ2FKUy5jcyIsInV0aWxzL0NvbG9yLmNzIiwiY29udHJvbHMvQ29udGV4dE1lbnUuY3MiLCJ1dGlscy9EYXRhVGFibGUuY3MiLCJjb250cm9scy9Db21ib0JveEVkaXQuY3MiLCJmb3Jtcy9EaWFsb2dSZXN1bHQuY3MiLCJ1dGlscy9FeHRlcm5hbFBsdWdpbi5jcyIsInV0aWxzL0ZpcmViYXNlLmNzIiwiZm9ybXMvRm9ybUNvbGxlY3Rpb24uY3MiLCJ1dGlscy9HbWFpbC5jcyIsInV0aWxzL0dvb2dsZUNsb3VkUHJpbnQuY3MiLCJncmlkL0dyaWRWaWV3Q2VsbEFwcGFyZW5jZS5jcyIsImdyaWQvR3JpZFZpZXdDZWxsRGlzcGxheS5jcyIsImdyaWQvR3JpZFZpZXdDb2x1bW4uY3MiLCJ1dGlscy9IYXJkU29mdExpc3QuY3MiLCJ1dGlscy9IZWxwZXIuY3MiLCJ1dGlscy9LZXlDb2Rlcy5jcyIsImNvbXBvbmVudHMvTGF5b3V0Q29udGFpbmVyLmNzIiwidXRpbHMvTmV0d29yay5jcyIsInV0aWxzL1Jlc291cmNlTWFuYWdlci5jcyIsInV0aWxzL1NldHRpbmdzLmNzIiwidXRpbHMvVGV4dEJsb2NrLmNzIiwiY29udHJvbHMvVG9vbFRpcENvbnRyb2wuY3MiLCJ1dGlscy9WZWN0b3IyLmNzIiwidXRpbHMvVmVjdG9yNC5jcyIsImNvbnRyb2xzL0FjZUNvZGVFZGl0b3IuY3MiLCJmb3Jtcy9Gb3JtLmNzIiwiY29udHJvbHMvQ2FsY3VsYXRvckNvbnRyb2wuY3MiLCJjb250cm9scy9DaGVja0VkaXQuY3MiLCJjb250cm9scy9UZXh0SW5wdXQuY3MiLCJjb250cm9scy9EYXRlQ29udHJvbC5jcyIsImNvbnRyb2xzL0dyaWRMb29rdXBFZGl0LmNzIiwiZ3JpZC9HcmlkVmlldy5jcyIsImdyaWQvR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94LmNzIiwiZ3JpZC9HcmlkVmlld0NlbGxEaXNwbGF5SW1hZ2UuY3MiLCJjb250cm9scy9JbWFnZUVkaXQuY3MiLCJjb250cm9scy9Qcm9ncmVzc0NvbnRyb2wuY3MiLCJjb250cm9scy9SaWJib25CdXR0b24uY3MiLCJjb250cm9scy9SaWJib25Db250cm9sLmNzIiwiY29udHJvbHMvUmliYm9uR3JvdXAuY3MiLCJjb250cm9scy9SaWJib25QYWdlLmNzIiwiY29udHJvbHMvU2ltcGxlQnV0dG9uLmNzIiwiY29udHJvbHMvU3BsaXRDb250cm9sQ29udGFpbmVyLmNzIiwiY29udHJvbHMvU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lci5jcyIsImNvbnRyb2xzL1RhYkNvbnRyb2wuY3MiLCJjb250cm9scy9UYWJDb250cm9sUGFnZS5jcyIsImNvbnRyb2xzL1RpbGVDb250cm9sLmNzIiwiZm9ybXMvRm9ybVBvcHVwLmNzIiwiY29udHJvbHMvQ29sb3JJbnB1dC5jcyIsImZvcm1zL0NvbnNvbGVGb3JtLmNzIiwiZm9ybXMvRGlhbG9nRm9ybS5jcyIsImNvbnRyb2xzL1RleHRJbnB1dERyb3BEb3duLmNzIiwiY29udHJvbHMvTWVtb0lucHV0LmNzIiwiZm9ybXMvUGRmUHJldmlld0Zvcm0uY3MiLCJjb250cm9scy9TaW1wbGVEaWFsb2dCdXR0b24uY3MiLCJmb3Jtcy9wb3B1cGZvcm1zL0NhbGNGb3JtLmNzIiwiZm9ybXMvRGF0YVJvd0VkaXRGb3JtLmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9EYXRlRm9ybS5jcyIsImNvbnRyb2xzL0RhdGVJbnB1dC5jcyIsImZvcm1zL0lucHV0RGlhbG9nLmNzIiwiZm9ybXMvTWVzc2FnZUJveEZvcm0uY3MiLCJjb250cm9scy9OdW1iZXJJbnB1dC5jcyIsImNvbnRyb2xzL1NlYXJjaElucHV0LmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9TZWFyY2hMb29rdXBGb3JtLmNzIiwiZm9ybXMvcG9wdXBmb3Jtcy9UZXh0Rm9ybS5jcyIsImZvcm1zL1RoZW1lRm9ybS5jcyJdLAogICJuYW1lcyI6IFsiIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7O3FCQXFheUNBOzs7Ozs7OztxQ0F4VFJBLEtBQWlCQTs7O29CQUUvQ0EsT0FBT0EsS0FBS0EsQ0FBQ0EsTUFBTUEsYUFDbEJBOzswQ0F3R2tDQTtvQkFFbkNBLE9BQU9BLG1FQUE0REE7O3dDQUdsQ0E7b0JBRWpDQSxPQUFPQSx3REFBaURBOzs2Q0FHbEJBLEdBQVVBOztvQkFFdkNBLE9BQU9BLGdEQUF5Q0EsaUJBQWlCQSx3Q0FBMkJBOzsrQkFzQ3JFQTs7O29CQUVoQ0EsT0FBT0Esb0RBQW1DQSxzQ0FBaUJBOztpQ0FzSTNCQSxJQUFXQTs7O29CQUUzQ0EsT0FBT0Esb0RBQW1DQSx5QkFBS0EscUNBQWdCQTs7Z0NBckk3QkE7OztvQkFFbENBLE9BQU9BLHFEQUFvQ0Esc0NBQWlCQTs7a0NBNkcxQkEsSUFBV0E7OztvQkFFN0NBLE9BQU9BLHFEQUFvQ0EseUJBQUtBLHFDQUFnQkE7O21DQTVHN0JBLFNBQWdCQSxHQUFTQSxHQUFTQSxRQUFxQkEsUUFBcUJBOzs7OztvQkFFL0dBLFVBQVVBLHFEQUFvQ0Esc0NBQWlCQTs7b0JBRS9EQSxnQkFBZ0JBO29CQUNoQkEscUNBQWdCQSxHQUFHQTtvQkFDVkEsMkJBQU1BLEtBQUtBLFFBQVFBOztvQkFFbkJBLE9BQU9BOzttQ0FHbUJBLFNBQWdCQSxHQUFTQSxHQUFTQSxPQUFhQSxRQUFjQSxRQUFxQkEsUUFBcUJBLFFBQW9CQSxXQUFzQ0EsV0FBeUJBOzs7Ozs7OztvQkFFN05BLFVBQVVBLHFEQUFvQ0EsNkJBQVNBLCtCQUFVQSxDQUFDQSxpQ0FBMEJBLFNBQVNBOztvQkFFckdBLGdCQUFnQkE7b0JBQ2hCQSxxQ0FBY0EsR0FBR0EsR0FBR0EsT0FBT0E7b0JBQzNCQSxJQUFHQSxjQUFhQTt3QkFFZkEsc0JBQXNCQTs7b0JBRWRBLDJCQUFNQSxLQUFLQSxRQUFRQTtvQkFDbkJBLElB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LE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FBT0EsSUFBSUEsMEJBQU1BOzs7Ozt3QkFPakJBLE9BQU9BLElBQUlBLDBCQUFNQTs7Ozs7d0JBT2pCQSxPQUFPQSxJQUFJQSwwQkFBTUE7Ozs7O3dCQU9qQkEsT0FB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QSwrQ0FBa0JBO3dCQUVwQkE7Ozs7b0JBTURBLElBQUdBLDJDQUFjQTt3QkFFaEJBOzs7MENBSWdDQTtvQkFFakNBLE9BQU9BLHlDQUFhQSxhQUFjQSxDQUFDQSxtQkFBb0JBLENBQUNBOzs7b0JBS3hEQSxRQUFhQTtvQkFDYkE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUEsOENBQWlCQTs7O29CQUtqQkEsUUFBVUE7O29CQUVWQTtvQkFDQUEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFRQTtvQkFDUkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVFBO29CQUNSQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBUUE7b0JBQ1JBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFRQTtvQkFDUkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVFBO29CQUNSQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBUUE7b0JBQ1JBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFRQTtvQkFDUkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsK0JBQVVBO29CQUNWQSwrQkFBVUE7b0JBQ1ZBLCtCQUFVQTtvQkFDVkEsZ0NBQVNBO29CQUNUQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBU0E7b0JBQ1RBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFTQTtvQkFDVEEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVNBO29CQUNUQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBU0E7b0JBQ1RBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFTQTtvQkFDVEEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVNBO29CQUNUQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ1ZBLGdDQUFVQTtvQkFDVkEsZ0NBQVVBO29CQUNWQSxnQ0FBVUE7b0JBQ0RBLDBDQUFhQTs7NENBR1lBO29CQUVsQ0E7b0JBQ0FBLElBQUdBLFNBQVNBO3dCQUVYQSxPQUFPQSwyREFBV0EsQUFBS0EsT0FBaEJBOztvQkFFUkE7OzRDQUdxQ0E7b0JBRXJDQTtvQkFDQUEsSUFBR0EsU0FBU0E7d0JBRVhBLE9BQU9BLCtEQUFlQSxBQUFLQSxPQUFwQkE7O29CQUVSQSxPQUFPQTs7Ozs7Ozs7Ozs7OzhCZ0J2OENnQ0EsS0FBSUE7OzRCQUVsQkE7Ozs7Z0JBRWhCQSxJQUFHQSxVQUFVQSxRQUFRQTtvQkFDakJBLHFCQUFnQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dDQTNmY0EsS0FBSUE7dUNBQ0dBLEtBQUlBOytCQThjR0EsS0FBSUE7Ozs4QkFsYmpDQSxhQUF1QkEsZUFBdUJBOzs7Ozs7Z0JBRWpFQSxtQkFBY0E7Z0JBQ2RBLHFCQUFnQkE7O2dCQUVoQkEsSUFBR0EsV0FBV0EsUUFBUUE7b0JBQ2xCQSxzQkFBaUJBOzs7NEJBR0ZBOzs7O2dCQUVuQkE7Z0JBQ0FBOztnQkFFQUEsSUFBR0EsV0FBV0EsUUFBUUE7b0JBQ2xCQSxzQkFBaUJBOzs7Ozs7Z0JBckNyQkEsT0FBT0E7OztnQkFLUEEsSUFBR0E7b0JBQ0NBOztnQkFDSkEsSUFBR0EsaUJBQVlBLFFBQVFBO29CQUNuQkE7O2dCQUNKQSxZQUFZQSw0QkFBMEVBO2dCQUN0RkEsUUFBUUE7O2dCQUVSQSxJQUFHQSxLQUFLQTtvQkFFSkE7O29CQUlBQTs7OztnQkF3QkpBLGlCQUFpQkEsSUFBSUE7O2dCQUVyQkEsYUFBYUE7Z0JBQ2JBLEtBQUlBLFdBQVdBLElBQUlBLFFBQVFBO29CQUV2QkEsSUFBR0Esc0JBQVNBLE1BQU1BLFFBQVFBLHNCQUFTQSxZQUFZQSxRQUFRQSxpQ0FBMEJBLHNCQUFTQTt3QkFDdEZBOztvQkFDSkEsa0JBQWtCQSwwQkFBTUEsc0JBQVNBOztvQkFFakNBLGNBQWNBLHNCQUFTQTs7b0JBRXZCQSxJQUFHQTt3QkFFQ0EsYUFBYUE7O3dCQUViQSxnQkFBZ0JBLENBQUNBO3dCQUNqQkEsSUFBR0EsNkNBQXdCQSx1QkFBc0JBLHNCQUFzQkE7Ozs7Ozs7Ozs7O3dCQWN2RUE7MkJBRUNBLElBQUdBLDRCQUE0QkE7d0JBRWhDQSxJQUFHQTs7OzRCQUlDQTs7OztvQkFJUkEsSUFBR0E7Ozs7OzJCQU9FQSxJQUFHQTs7Ozs7Ozs7Ozs7O2dCQWVaQSxPQUFPQTs7cUNBSWVBO2dCQUV0QkEsYUFBYUE7Z0JBQ2JBLEtBQUlBLFdBQVdBLElBQUlBLFFBQVFBO29CQUV2QkEsNEJBQXVCQSxrQkFBa0JBLDZCQUFnQkE7Ozs7OENBSzNCQSxrQkFBdUJBO2dCQUV6REEsSUFBR0Esb0JBQW9CQTtvQkFFbkJBLElBQUdBO3dCQUVDQSxnQkFBZ0JBLENBQUNBOzs7b0JBS3JCQSxJQUFHQTt3QkFFQ0EsNEJBQW9EQTs7b0JBRXhEQSxpQkFBaUJBOzs7d0NBSVlBOzs7NkJBS25CQSxRQUFnQkE7OztnQkFFOUJBLElBQUdBLFVBQVVBO29CQUNUQSxNQUFNQSxJQUFJQTs7O2dCQUVkQSxJQUFHQTtvQkFDQ0E7O2dCQUNKQTs7Z0JBRUFBO2dCQUNBQTs7Z0JBRUFBOztnQkFFQUEsa0JBQWtCQTtnQkFDbEJBO2dCQUNBQTs7Z0JBRUFBOztnQkFFQUEsSUFBR0E7b0JBRUNBOzs7Z0JBR0pBO2dCQUNBQSxpQkFBaUJBLGNBQWFBOztnQkFFOUJBO2dCQUNBQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBOztvQkFJQUE7O2dCQUVKQSwwQkFBMEJBLHNCQUFnQkEsQ0FBQ0EsaUNBQW9CQSxDQUFDQSw0QkFBb0JBLENBQUNBO2dCQUNyRkEsbUJBQW1CQSxlQUFjQTs7Z0JBRWpDQSx5QkFBeUJBOztnQkFFekJBLDBCQUFzQkE7Ozs7d0JBRWxCQSxjQUFjQSxJQUFJQTt3QkFDbEJBLFFBQVVBO3dCQUNWQSxJQUFHQTs0QkFFQ0E7NEJBQ0FBLGNBQWNBOzs0QkFJZEEsY0FBY0E7NEJBQ2RBLGdCQUFnQkE7O3dCQUVwQkEsZUFBZUE7O3dCQUVmQSxrQkFBa0JBOzt3QkFFbEJBLGFBQWFBOzt3QkFFYkEsMkJBQXFCQTs7OztnQ0FFakJBLElBQUdBLENBQUNBLGlDQUEwQkE7b0NBRTFCQSxZQUFZQSw2QkFBY0Esa0JBQWtCQSxhQUFhQTtvQ0FDekRBLElBQUdBO3dDQUVDQTs7b0NBRUpBLHdCQUF3QkE7b0NBQ3hCQSxLQUFLQTs7Z0NBRVRBLFdBQVdBOztnQ0FFWEEsMkJBQW1CQTs7Ozt3Q0FFZkEsSUFBR0EsQ0FBQ0EsaUNBQTBCQTs0Q0FFMUJBLGFBQVlBLDZCQUFjQSxXQUFXQSxnQkFBY0Esa0JBQVlBLHVCQUFPQSxhQUFZQTs0Q0FDbEZBLElBQUdBO2dEQUVDQTtnREFDQUEsS0FBS0E7OzRDQUVUQSx3QkFBd0JBOzs7d0NBRzVCQSxJQUFHQTs0Q0FFQ0EsS0FBS0E7NENBQ0xBOzs7d0NBR0pBLElBQUdBLGNBQWNBLFFBQVFBLENBQUNBOzRDQUV0QkEsc0JBQXNCQSxJQUFJQSw0QkFBUUEsdUJBQWNBLDZCQUFpQkE7NENBQ2pFQSxtQkFBbUJBOzRDQUNuQkEsd0JBQXdCQTs7O3dDQUc1QkEsZUFBZUE7d0NBQ2ZBOzt3Q0FFQUEsSUFBR0E7NENBRUNBOzs0Q0FFQUE7NENBQ0FBOzRDQUNBQSwyQkFBdUJBOzs7O29EQUVuQkEsSUFBR0EsMkNBQTBCQTt3REFDekJBOzs7b0RBRUpBLGdDQUFnQkE7O29EQUVoQkEsSUFBR0E7d0RBRUNBLElBQUdBOzREQUVDQSxLQUFLQSxtREFBK0JBOzs0REFJcENBLEtBQUtBOzs7d0RBR1RBLElBQUdBOzREQUNDQSxLQUFLQTs7O3dEQUVUQSxJQUFHQTs0REFFQ0EsS0FBS0E7NERBQ0xBOzs7d0RBR0pBO3dEQUNBQTs7b0RBRUpBLFVBQVlBLENBQUNBLG9CQUFjQSxpQkFBV0EsbUJBQWFBLG9CQUFjQSx1QkFBT0E7b0RBQ3hFQSxrQkFBcUJBLGtDQUFjQSxtSEFBc0JBLENBQUNBLGlCQUFlQTtvREFDekVBLG1CQUFzQkEsaUNBQWFBOztvREFFbkNBLFlBQWtDQSwwQkFBTUEscUJBQXVCQTtvREFDL0RBLFVBQWNBLElBQUlBLDRCQUFRQSwwQkFBTUEsb0JBQXNCQSxxQ0FBQ0EsTUFBTUEsc0ZBQTJCQTtvREFDeEZBLElBQUdBLENBQUNBO3dEQUVBQTs7O29EQUdKQSxJQUFHQSw0QkFBNEJBO3dEQUUzQkEsaUNBQWlDQTt3REFDakNBLG9DQUFvQ0E7d0RBQ3BDQSxpQ0FBaUNBO3dEQUNqQ0E7d0RBQ0FBLElBQUdBOzREQUVDQSxXQUFXQTs0REFDWEE7NERBQ0FBLGtCQUFrQkEscUNBQUNBOzs0REFFbkJBLHNCQUFzQkE7OzREQUV0QkEsd0JBQXdCQTs7NERBRXhCQSxJQUFHQTtnRUFFQ0E7Z0VBQ0FBLHdCQUF3QkE7Ozs0REFHNUJBLElBQUdBLCtCQUFxREE7Z0VBRXBEQSxzQkFBc0JBLHFDQUFDQTtnRUFDdkJBLHVCQUF1QkEscUNBQUNBOzs7O3dEQUloQ0Esd0JBQXdCQTs7d0RBSXhCQSxzQkFBc0JBO3dEQUN0QkEseUJBQXlCQTt3REFDekJBLG9DQUFvQ0E7O3dEQUVwQ0Esd0JBQXdCQTs7b0RBRTVCQSxJQUFHQTt3REFFQ0EsdUJBQXVCQTt3REFDdkJBOzt3REFFQUEsSUFBR0EsNEJBQTRCQTs0REFFM0JBOzs7O29EQUlSQSxzQkFBaUJBOztvREFFakJBLElBQUdBLENBQUNBLGFBQWFBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsaUNBQTBCQTt3REFFOURBLGFBQVlBLDZCQUFjQSxzQkFBc0JBLElBQUlBLENBQUNBO3dEQUNyREEsb0JBQW1CQSw4QkFBVUEsb0JBQXNCQSxxQ0FBQ0EsTUFBTUE7d0RBQzFEQSx3QkFBd0JBO3dEQUN4QkEsSUFBR0E7NERBRUNBOzt3REFFSkE7OztvREFHSkEsSUFBR0Esc0JBQXNCQSxDQUFDQSxpQ0FBMEJBO3dEQUVoREEsMENBQTBDQTt3REFDMUNBLElBQUdBLHlCQUF5QkE7NERBRXhCQSxJQUFHQSxpQ0FBMEJBLGNBQWNBLGlDQUEwQkE7Z0VBRWpFQSx3QkFBd0JBLElBQUlBLDBCQUFRQTs7Z0VBSXBDQSx3QkFBd0JBLElBQUlBLDRCQUFRQSxpQ0FBMEJBLGFBQWFBLG1CQUFtQkEsV0FBV0E7Ozs7O29EQUtySEE7O29EQUVBQSxJQUFHQSxDQUFDQTt3REFFQUEsNEJBQXVCQSxrQkFBa0JBO3dEQUN6Q0EseUJBQW9CQTs7b0RBRXhCQSxrQkFBYUE7Ozs7Ozs7NENBR2pCQSxJQUFHQTtnREFFQ0EsS0FBS0E7OzRDQUVUQSxXQUFXQSw0QkFBeUVBOzRDQUNwRkEsSUFBR0EsUUFBUUEsUUFBUUE7Z0RBRWZBLEtBQUtBLGdEQUE0QkE7O2dEQUlqQ0EsS0FBS0E7Ozs7Ozs7Ozs7Ozs7O3lCQUtyQkEsaUJBQWlCQTt3QkFDakJBLElBQUdBLENBQUNBOzRCQUVBQSxxQkFBV0E7OzRCQUlYQSxxQkFBV0Esa0JBQUtBOzt3QkFFcEJBLDRCQUE0QkE7d0JBQzVCQSwyQkFBMkJBOzs7Ozs7aUJBRS9CQSxrQkFBa0JBLDRCQUF5RUE7Z0JBQzNGQSxJQUFHQSxlQUFlQTtvQkFFZEEsbUJBQW1CQSw0QkFBMEVBOztvQkFFN0ZBLGdDQUFrREEsVUFBQ0E7d0JBRS9DQSxJQUFHQSxvQkFBbUJBLENBQUNBOzRCQUVuQkE7NEJBQ0FBLFFBQVFBOzRCQUNSQSxJQUFHQSxLQUFLQTtnQ0FDSkE7O2dDQUdBQTs7Ozs7b0JBS1pBLDZCQUErQ0EsVUFBQ0E7d0JBRTVDQSxJQUFHQSxvQkFBbUJBOzRCQUVsQkE7NEJBQ0FBLFFBQVFBOzRCQUNSQSxJQUFHQSxLQUFLQTtnQ0FDSkE7O2dDQUdBQTs7Ozs7b0JBS1pBLHNDQUFzQ0E7b0JBQ3RDQSx1Q0FBdUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQXVCMUJBLGVBQXNCQSxPQUFpQkEsV0FBdUJBOzs7OztnQkFFL0VBLHFCQUFnQkE7Z0JBQ2hCQSxhQUFRQTtnQkFDUkEsaUJBQVlBO2dCQUNaQSxlQUFVQTs7OEJBR09BLGVBQXNCQSxPQUFpQkE7Ozs2REFBNEJBLGVBQWVBLFdBQVdBOzs7NEJBSzdGQSxlQUFzQkE7NkRBQXdCQSxlQUFlQTs7Ozs7Ozs7Ozs7Ozs7OzRCQW1CcERBLEtBQUlBOzs0QkFHZkE7Ozs7Z0JBRWZBLGtCQUFhQTtnQkFDYkEsSUFBR0EsUUFBUUEsUUFBUUE7b0JBQ2ZBLG1CQUFjQTs7OzhCQUdIQSxZQUFtQkE7Ozs7Z0JBRWxDQSxrQkFBYUE7Z0JBQ2JBLElBQUdBLFFBQVFBLFFBQVFBO29CQUNmQSxtQkFBY0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dDQWlCZ0JBLEtBQUlBOzs7Ozs7OEJBWXpCQSxPQUFjQTs7OztnQkFFM0JBLGFBQVFBO2dCQUNSQSxJQUFHQSxZQUFZQSxRQUFRQTtvQkFDbkJBLHVCQUFrQkE7Ozs0QkFHVEE7Ozs2REFBNENBOzs7OEJBSzVDQSxRQUFnQkE7Ozs2REFBNENBO2dCQUV6RUEsY0FBU0E7OzhCQUdJQSxPQUFjQSxRQUFxQkE7Ozt5REFBd0NBLE9BQU9BO2dCQUUvRkEsY0FBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQ0Nwa0J1QkEsVUFBaUJBOztvQkFFMURBLE9BQU9BLFNBRUVBLFlBQ0ZBLHNEQUVDQSxZQUFZQSxPQUFPQSxLQUFlQSxlQUFlQTs7MENBcUJ4QkEsZUFBc0JBLFFBQWVBLFNBQThDQSxPQUE0Q0E7Ozs7b0JBRWhLQSwwQ0FBcUJBLElBQUlBLG1DQUFjQSxlQUFlQSxRQUFRQSxhQUFZQSxBQUFxRUEsU0FBU0EsQUFBcUVBOztpREFHckxBLGVBQXNCQSxRQUFlQSxpQkFBaUNBLFNBQThDQSxPQUE0Q0E7Ozs7b0JBRXhNQSw2Q0FBd0JBLElBQUlBLG1DQUFjQSxlQUFlQSxRQUFRQSxhQUFZQSxpQkFBaUJBLEFBQXFFQSxTQUFTQSxBQUFxRUE7O3dDQUdsTkEsZUFBc0JBLFFBQWVBLFNBQThDQSxPQUE0Q0E7Ozs7b0JBRTlKQSw4QkFBU0EsSUFBSUEsbUNBQWNBLGVBQWVBLFFBQVFBLGFBQVlBLEFBQXFFQSxTQUFTQSxBQUFxRUE7O29DQUd0TEEsVUFBaUJBLFNBQThDQSxPQUE0Q0E7Ozs7O29CQUd0SUEsVUFBVUEsb0NBQWVBLFVBQVVBO29CQUNuQ0EsY0FBY0E7b0JBQ2RBLFlBQVlBOztvQkFFWkEsT0FBWUE7O21EQUc4QkEsVUFBaUJBLGlCQUFpQ0EsU0FBOENBLE9BQTRDQTs7Ozs7b0JBR3RMQSxVQUFVQSxvQ0FBZUEsVUFBVUE7b0JBQ25DQSxVQUFVQTt3QkFFVEEsaUJBQWlCQSxJQUFJQTt3QkFDckJBLDRCQUE0QkEsWUFBb0JBLEFBQW9EQSxVQUFDQTs0QkFFcEdBLFNBQVNBOzRCQUNUQSxJQUFHQSxtQkFBbUJBO2dDQUNyQkE7OzRCQUNEQSxTQUFTQTs7NEJBRVRBOzs0QkFFQUEsSUFBR0EsbUJBQWtCQTtnQ0FFcEJBLFVBQVVBLENBQUNBLEFBQU9BLFlBQVlBLEFBQU9BOzs0QkFFdENBLHlDQUF5Q0E7Ozt3QkFHMUNBLE9BQU9BOztvQkFFUkEsY0FBY0E7b0JBQ2RBLFlBQVlBOztvQkFFWkEsT0FBWUE7O2dEQUcyQkEsVUFBaUJBLFNBQThDQSxPQUE0Q0E7Ozs7O29CQUdsSkEsVUFBVUEsSUFBSUE7O29CQUVkQSxVQUFVQSxvQ0FBZUEsVUFBVUE7b0JBQ25DQSxVQUFVQTt3QkFFVEEsaUJBQWlCQSxJQUFJQTt3QkFDckJBLDRCQUE0QkEsWUFBb0JBLEFBQW9EQSxVQUFDQTs0QkFFcEdBLFNBQVNBOzRCQUNUQSxJQUFHQSxPQUFPQSxRQUFRQSx1QkFBdUJBO2dDQUN4Q0E7OzRCQUNEQSxTQUFTQTs7NEJBRVRBOzs0QkFFQUEsSUFBR0EsbUJBQWtCQTtnQ0FFcEJBLFVBQVVBLENBQUNBLEFBQU9BLFlBQVlBLEFBQU9BOzs0QkFFdENBLHlDQUF5Q0E7Ozt3QkFHMUNBLE9BQU9BOztvQkFFUkEsY0FBY0EsVUFBQ0EsR0FBR0EsR0FBR0E7d0JBQ3BCQSxtQkFBbUJBO3dCQUNuQkEsUUFBUUEsR0FBR0EsR0FBR0E7O29CQUVmQSxZQUFZQSxVQUFDQSxJQUFJQSxJQUFJQTt3QkFDcEJBLG1CQUFtQkE7d0JBQ25CQSxNQUFNQSxJQUFJQSxJQUFJQTs7b0JBRWZBLGVBQWVBLFVBQUNBLElBQUlBO3dCQUFVQTs7O29CQUU5QkEsVUFBVUEsT0FBWUE7O29CQUV0QkEsZ0JBQWVBLElBQUlBLDBCQUFhQSxzQ0FBeUJBO3dCQUN4REE7Ozs7Ozs7Ozs7Ozs7OzRCQXhHb0JBLGVBQXNCQSxRQUFlQTs7OztnQkFFekRBLGNBQVNBO2dCQUNUQSxpQkFBWUE7Z0JBQ1pBLGlCQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrQ0MxQndEQSxLQUFJQTs7Ozs2Q0FDN0JBOztvQkFFbkNBLElBQUlBLDZEQUFnQ0E7d0JBQ2hDQSxPQUFPQSxxREFBb0JBOztvQkFDL0JBLE9BQU9BLENBQUNBLE1BQTRCQSwwQ0FBMkJBLHlEQUE0Q0EsMEJBQU1BLFFBQXpHQSxxREFBb0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2QkNrRFdBOzs7b0NBTURBOzs7Ozs7Ozs7Ozs7OEJBaUhEQTs7OEJBcUNYQTs7Ozs7Ozs7Ozs7d0JBWmxDQSxPQUFPQTs7O3dCQUlQQSxJQUFHQSw4Q0FBdUJBOzRCQUV6QkEsNENBQXNCQTs0QkFDdEJBOzs7Ozs7d0JBT0lBLE9BQU9BOzs7d0JBRVpBLElBQUdBLDREQUFnQkE7NEJBRWxCQSxxQ0FBZUE7NEJBQ2ZBOzs7Ozs7Ozs7Ozs7dUNBbE5zQ0E7O2tEQVN1QkEsS0FBSUE7Ozs7Ozs7Ozs7Ozt1Q0FpQnJCQTt5Q0FDRUE7d0NBQ0RBOzs7OENBYUxBLElBQUlBOzs7b0NBUWpCQTs7Ozs7Ozs7Ozs7Ozs7O29CQWlCcEJBLG9DQUFjQTtvQkFDZEE7OztvQkFLQUE7d0JBRUlBLGFBQXdCQTt3QkFDeEJBLEtBQUlBLFdBQVdBLElBQUlBLGVBQWVBOzRCQUU5QkEsZ0JBQWdCQSxvQ0FBT0EsR0FBUEE7NEJBQ2hCQSxJQUFHQSxhQUFhQTtnQ0FDWkE7OzRCQUNKQSxJQUFHQTtnQ0FFQ0EsMENBQW9CQSwwQkFBT0EsR0FBUEE7OzRCQUV4QkEsSUFBR0E7Z0NBRUNBLHlDQUFtQkEsMEJBQU9BLEdBQVBBOzs0QkFFdkJBLElBQUdBO2dDQUVDQSxpREFBMkJBLDBCQUFPQSxHQUFQQTs7O3dCQUduQ0EsSUFBR0EsMkNBQXFCQTs0QkFDcEJBOzt3QkFDSkEsU0FBU0E7d0JBQ1RBLElBQUdBLE1BQU1BOzRCQUNMQSxvQ0FBY0E7Ozs7Ozs7OzsrQ0FTY0EsU0FBMEJBLE9BQWNBOztvQkFFNUVBO3dCQUVJQSxJQUFJQSxXQUFXQTs0QkFFWEEsMEJBQXFCQTs7OztvQ0FFakJBLFlBQWdCQSx3Q0FBa0JBLE1BQU1BLE9BQU9BO29DQUMvQ0EsSUFBR0EsU0FBU0E7d0NBRVJBLE9BQU9BOzs7Ozs7Ozs7Ozs7O29CQVN2QkEsT0FBT0E7OzZDQUc2QkEsU0FBb0JBLE9BQWNBOztvQkFFdEVBO3dCQUVJQSxJQUFJQSxXQUFXQTs0QkFFWEEsY0FBa0JBOzRCQUNsQkEsSUFBSUE7Z0NBRUFBLEtBQUtBLFdBQVdBLElBQUlBLHlCQUF5QkE7b0NBRXpDQSxXQUFlQSwyQ0FBaUJBO29DQUNoQ0EsSUFBSUEscUJBQXFCQSw0REFBcUNBLFlBQWNBO3dDQUV4RUEsT0FBT0Esc0NBQVdBOzs7Ozs7Ozs7O29CQVV0Q0EsT0FBT0E7O29EQUc4QkEsT0FBY0E7b0JBRW5EQSxZQUFnQkEsd0NBQWtCQSx3Q0FBa0JBLE9BQU9BO29CQUMzREEsSUFBR0EsU0FBU0E7d0JBRVJBLFFBQVFBLHdDQUFrQkEseUNBQW1CQSxPQUFPQTs7b0JBRXhEQSxPQUFPQTs7OztvQkFNaEJBLElBQUdBLHNDQUFnQkE7d0JBRWxCQSw2REFBdUNBOztvQkFFeENBLElBQUdBLHNDQUFnQkE7d0JBQ2xCQSxxQ0FBZUE7O29CQUNQQSxjQUFjQSxLQUFJQTtvQkFDbEJBLGlCQUFpQkE7b0JBQ2pCQSxpQkFBaUJBOzs7b0JBR2pCQSxxQ0FBZUEsc0RBRVhBLDJDQUFjQSw2RUFBcUNBLDRDQUFzQkEsd0NBQWtCQSxZQUN2R0E7O29CQUdEQSwwQkFBMEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDekxWQSxRQUFlQTs7Z0JBQy9CQSxzQkFBaUJBO2dCQUNqQkEsZ0JBQVdBOzs7OztnQkFLWEE7Z0JBQ0FBLFlBQWlCQSx5Q0FBcUJBOztnQkFFdENBLGtCQUFxQkEsdUNBQTBCQTs7Z0JBRS9DQTs7Z0JBRUFBLEtBQUlBLFdBQVdBLElBQUlBLGNBQWNBO29CQUVoQ0EsV0FBY0EseUJBQU1BLEdBQU5BOztvQkFFZEEsZ0JBQW1CQSxrQ0FBcUJBLHFCQUFnQkE7O29CQUV4REEsSUFBR0EsWUFBWUE7d0JBRWRBO3dCQUNBQSwwQkFBcUJBO3dCQUNyQkE7d0JBQ0FBLEtBQUlBLFdBQVdBLElBQUlBLGFBQWFBOzRCQUUvQkE7OzRCQUVBQSxJQUFHQSxLQUFLQSxjQUFjQTtnQ0FFckJBO2dDQUNBQTs7Ozt3QkFJRkEsSUFBR0E7NEJBRUZBOzs7d0JBS0RBO3dCQUNBQSxJQUFHQSxZQUFZQTs0QkFFZEEsMEJBQXFCQSxBQUFPQTs7OztnQkFJL0JBLHNCQUFpQkEsaUJBQVlBLHFDQUF3QkE7O21DQUc3QkE7Z0JBRXhCQSxXQUFnQkEsa0NBQW1CQSxrR0FBb0JBOztnQkFFdkRBLEtBQUlBLFdBQVdBLElBQUlBLGFBQWFBO29CQUUvQkEsSUFBR0EsK0NBQUtBLEdBQUxBO3dCQUVGQSxPQUFPQSxBQUFPQSxXQUFrQkEsd0JBQUtBLEdBQUxBOzJCQUMzQkEsSUFBR0EsK0NBQUtBLEdBQUxBO3dCQUVSQSxPQUFPQSxBQUFPQSxXQUFrQkEsd0JBQUtBLEdBQUxBOzs7O2dCQUlsQ0EsT0FBT0E7Ozs7Ozs7Ozs7OztrQ0QrZHFCQSxJQUFJQTs7Ozs7Ozs7NEJBbENkQTs7OztnQkFFbEJBLElBQUdBLFVBQVVBLFFBQVFBO29CQUVwQkEsY0FBU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJFOWNJQTs7Z0JBRWRBLG1CQUFjQTs7OEJBR0FBLFNBQWdCQTs7Z0JBRTlCQSxtQkFBY0E7Z0JBQ2RBLGVBQVVBOzs7OztnQkFLVkEsa0JBQWtCQSxxQkFBY0EsbUJBQWNBO2dCQUM5Q0EsYUFBYUE7Z0JBQ2JBO2dCQUNBQSxjQUFjQSxJQUFJQTtnQkFDbEJBO2dCQUNBQTtnQkFDQUEsS0FBSUEsV0FBV0EsSUFBSUEsUUFBUUE7b0JBRTFCQSxVQUFVQSx1QkFBWUE7b0JBQ3RCQSxJQUFHQSw2Q0FBa0JBO3dCQUVwQkEsSUFBR0EsNkNBQWtCQTs0QkFFcEJBLFdBQVdBOzRCQUNYQTs7NEJBSUFBOzs7b0JBR0ZBLFdBQVdBOztnQkFFWkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkNuRXdCQTtvQkFFdEJBLE9BQU9BLENBQUNBLGlDQUEwQkEsTUFBTUEsb0NBQXFCQSxpQ0FBa0JBLDZCQUFTQSxLQUFJQTs7Ozs7Ozs7Ozs7O29CQTdCL0ZBLE9BQU9BLEFBQUtBOzs7b0JBQ1pBLFNBQUlBOzs7OztvQkFLSkEsT0FBT0EsQUFBS0E7OztvQkFDWkEsU0FBSUE7Ozs7O29CQUtKQSxPQUFPQSxBQUFPQTs7O29CQUNkQSxTQUFJQTs7Ozs7b0JBS0pBLE9BQU9BLEFBQU9BOzs7b0JBQ2RBLFNBQUlBOzs7Ozs4QkFhSUEsR0FBNkJBOztnQkFFbENBLFNBQUlBO2dCQUNiQSxTQUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkNuQ1VBLEdBQTZCQSxHQUE2QkEsR0FBNkJBOztnQkFFNUZBLFNBQUlBO2dCQUNiQSxTQUFJQTtnQkFDSkEsU0FBSUE7Z0JBQ0pBLFNBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztpRENSaURBLElBQUlBOzs7OztvQkE2QnpEQTs7Ozs7b0JBNUJzQkE7Ozs7Ozs7b0JBV3JCQSxPQUFPQTs7O29CQUVGQSx3QkFBdUNBOzs7OztvQkFNNUNBLE9BQU9BOzs7b0JBR0ZBLHFCQUFvQ0E7Ozs7OzRCQVd0QkEsVUFBNkNBOzs7Ozs7Z0JBRWpFQSxpQkFBWUE7Z0JBQ1pBLGtCQUFhQTs7Ozs7Z0JBaENiQTs7O2dCQXNDQUE7O2dCQUVBQSxZQUFZQTtnQkFDWkEsV0FBV0E7Ozs7Ozs7Z0JBT1hBLGdCQUFnQkE7O2dCQU9oQkEsOEJBQThCQSxhQUFxQkEsQUFBb0RBOztnQkFLdkdBLDhCQUE4QkEsV0FBbUJBLEFBQW9EQTs7Z0JBS3JHQTs7Ozs7Ozs7c0JBakJpQkE7Ozs7c0JBT3VGQTtZQUV2R0E7O3NCQUdxR0E7WUFFckdBOzs7Ozs7Ozs7Ozs7Ozt1Q0N6RG9EQTs7OzRCQStFdEJBO3dCQUNHQTs7OztxQ0FLbUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dCQWpGL0NBLE9BQU9BOzs7d0JBRVpBLElBQUdBLDBEQUFrQkE7NEJBRXBCQSxJQUFHQSxTQUFTQSxRQUFRQSx5QkFBeUJBLFFBQVFBLGlDQUFpQ0E7Z0NBRXJGQSxJQUFHQSxnRUFBMkJBO29DQUU3QkEsa0RBQWtEQSxhQUFxQkE7b0NBQ3ZFQSw0Q0FBMEJBOzs7NEJBRzVCQSxJQUFHQSwyQ0FBeUJBO2dDQUUzQkE7Z0NBQ0FBLDBDQUF3QkE7OzRCQUV6QkEsSUFBR0Esd0NBQXNCQTtnQ0FFeEJBLDJCQUFvQkE7Z0NBQ3BCQSx3Q0FBc0JBOzs7NEJBR3ZCQSxtQ0FBaUJBOzs7NEJBR2pCQTs0QkFDQUEsSUFBR0Esb0NBQWtCQSxRQUFRQSxDQUFDQSxpQkFBZ0JBLHlEQUFzQ0Esb0RBQWtDQTtnQ0FFckhBLDRDQUEwQkEsVUFBQ0E7b0NBRTFCQSxJQUFHQSx3Q0FBc0JBO3dDQUV4QkEsMkJBQW9CQTs7b0NBRXJCQSx3Q0FBc0JBLHlCQUFrQkEsQUFBd0JBO3dDQUUvREEsSUFBR0EsMkNBQXlCQTs0Q0FFM0JBOzRDQUNBQSwwQ0FBd0JBOzt3Q0FFekJBLElBQUdBLDRDQUEwQkE7NENBRTVCQSwyQkFBb0JBOzRDQUNwQkEsNENBQTBCQTs7d0NBRTNCQSwwQ0FBd0JBLElBQUlBLDRCQUFlQTt3Q0FDM0NBLDZDQUEyQkE7O3dDQUUzQkEsNENBQTBCQSx5QkFBa0JBLEFBQXdCQSw2QkFPaEVBLGVBQWVBLDhCQUFnQkEsU0FBU0E7O3dDQUU1Q0EsSUFBR0EsZ0VBQTJCQTs0Q0FFN0JBLGtEQUFrREEsYUFBcUJBOzRDQUN2RUEsNENBQTBCQTs7dUNBRXhCQSxZQUFZQTs7Z0NBRWpCQSwrQ0FBK0NBLGFBQXFCQTs7Ozs7Ozt3QkE0WWpFQSxPQUFPQTs7O3dCQUdaQSxJQUFHQSx1REFBZUE7NEJBRWpCQSxvQ0FBa0JBOzs0QkFFbEJBLElBQUdBLGlDQUFlQTtnQ0FFakJBO2dDQUNBQSxJQUFHQSx5Q0FBdUJBO29DQUV6QkEsSUFBR0E7d0NBRUZBLDZEQUEyQ0E7d0NBQzNDQTs7b0NBRURBLDZEQUEyQ0E7Ozs0QkFHN0NBLGdDQUFjQTs0QkFDZEEsSUFBR0EsaUNBQWVBO2dDQUVqQkE7Z0NBQ0FBLElBQUdBLHlDQUF1QkE7b0NBRXpCQSw2REFBMkNBO29DQUMzQ0E7OztnQ0FHREEsSUFBR0EsK0NBQTZCQSxRQUFRQSx5REFBdUNBLFFBQVNBLHNEQUFlQTtvQ0FFdEdBOztvQ0FJQUE7Ozs0QkFHYUEsSUFBR0Esd0VBQWdDQSxDQUFDQSxDQUFDQSxpQ0FBZUEsUUFBUUEsQ0FBQ0EsQ0FBQ0Esc0VBQThCQSxpQ0FBZUE7Z0NBRXZHQTs7Ozs7Ozs7OzBDQWpnQjBCQSxLQUFJQTsrQ0FJWEE7bURBR0lBOzs7Ozs7OzJDQTBNS0EsSUFBSUEsNEJBQWVBOzJDQUNoQkEsS0FBSUE7Ozs7c0NBV2JBOzttQ0FnOERUQSxLQUFJQTs7Ozs7b0JBcjJEdENBLE9BQVFBLGdDQUFjQTs7O29CQTRGYkEsS0FBS0EsUUFBUUEsbURBQTJCQSxRQUFRQTt3QkFFNUNBLGFBQWFBLDBDQUFnQkE7d0JBQzdCQSxJQUFJQSxvQkFBb0JBOzRCQUVwQkEsS0FBS0EsV0FBV0EsSUFBSUEsMkJBQTJCQTtnQ0FFM0NBLElBQUlBLDRCQUFvQkEsTUFBTUE7b0NBRTFCQSw0QkFBb0JBOzs7NEJBRzVCQSwyQ0FBeUJBOzs0QkFHekJBLE9BQU9BOzs7O29CQUlmQSxPQUFPQTs7O29CQUtQQSx1QkFBdUJBO29CQUN2QkEsSUFBSUEsb0JBQW9CQTt3QkFDcEJBOzs7b0JBRUpBOztvQkFFQUEsbUJBQW1CQTs7b0JBRTVCQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBb0JBO3dCQUV0Q0EsV0FBV0EscUJBQWFBO3dCQUN4QkEsSUFBR0EsUUFBUUE7NEJBRUtBOzs7O29EQStFMEJBLFNBQXFCQTtvQkFFdkRBLEVBQWNBLDRCQUE0QkE7OztvQkFLMUNBLElBQUdBLGdDQUFjQTt3QkFFYkEsV0FBV0E7d0JBQ1hBO3dCQUNBQSx5QkFBa0JBLEFBQXdCQTs0QkFFdENBOzs7OzRDQUtrQkE7b0JBRW5DQSxJQUFHQTt3QkFFRkEsc0JBQTZDQTs7d0JBTzdDQSxFQUFjQTs7OztvQkFNZkEsZ0JBQWdCQTs7b0JBTWhCQSxpQkFBaUJBOzs7b0JBU1JBO3dCQUVJQSxRQUFRQTs7d0JBRVJBLEtBQUlBLFdBQVdBLElBQUlBLHNCQUFzQkE7NEJBRXJDQSxJQUFHQSx1QkFBZUEsTUFBTUEsUUFBUUEsaUNBQWVBLCtCQUMzQ0EsdUJBQWVBO2dDQUVmQSx1QkFBZUE7Ozt3QkFHdkJBLElBQUdBOzRCQUVDQTs7Ozs7Ozs7O29CQVdSQTtvQkFDQUEsa0RBQWdDQTtvQkFDaENBOzs7b0JBS0FBO29CQUNBQSxJQUFHQTt3QkFFQ0Esa0RBQWdDQTt3QkFDaENBOzs7aUNBSWlCQTs7O29CQUc5QkEsSUFBR0E7d0JBQ0ZBOztvQkFDREE7O29CQUVBQSxJQUFJQSxVQUFVQTt3QkFDYkEsMkJBQVNBOzt3QkFFVEEsMkJBQVNBOzs7b0JBRVZBLHdDQUFzQkE7O29CQUV0QkEsaUNBQWVBOztvQkFFTkEsZ0NBQWNBOztvQkFFZEEsaUNBQWVBO29CQUNmQTtvQkFDQUEsa0RBQWdDQTtvQkFDaENBO29CQUNBQTtvQkFDQUE7b0JBQ0FBLGdEQUE4QkE7b0JBQzlCQTtvQkFDQUEsK0NBQTZCQTtvQkFJN0JBLDZDQUEyQkE7b0JBSzNCQTs7b0JBRUFBLDBCQUEwQkE7O29CQUUxQkEsNENBQTBCQTtvQkFlMUJBLHdDQUFzQkE7b0JBSXRCQSw4Q0FBNEJBO29CQUk1QkEsaURBQStCQTs7b0JBRXhDQSxpQkFBaUJBOztvQkFRakJBLGtCQUFrQkE7O29CQXFCVEEscUJBQXFCQTs7b0JBdUxyQkEsbUJBQW1CQTtvQkFhbkJBLHdCQUF3QkE7b0JBT3hCQSxrQkFBa0JBO29CQUtsQkEsbURBQWtCQSxBQUFzQkE7O29CQXdDeENBLDJDQUF5QkE7O29CQUVsQ0EsZ0VBQXNCQSxnQ0FBY0E7O3FDQUVSQTtvQkFFNUJBLGtEQUFnQ0EsdUdBRzNCQTs7OztvQkFrSElBLHdDQUFzQkE7b0JBQ3RCQSxpQkFBaUJBLEtBQUlBO29CQUNyQkE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBLGVBQWVBOztvQkFFZkEsMEJBQW9CQTs7Ozs0QkFFaEJBLElBQUdBLGdCQUFnQkEsUUFBUUEscUJBQW9CQTtnQ0FFM0NBLGVBQWVBOztnQ0FJZkEsa0JBQWtCQSxJQUFJQTs7Z0NBRXRCQSxJQUFHQSxhQUFhQSxjQUFlQTtvQ0FFM0JBO29DQUNBQTtvQ0FDQUE7OztnQ0FHSkEsZ0JBQWdCQSxJQUFJQSw0QkFBUUEsWUFBWUEsYUFBYUEsQ0FBQ0E7O2dDQUV0REE7O2dDQUVBQSxjQUFjQTs7Ozs7Ozs7cUJBSXRCQSwyQkFBb0JBOzs7OzRCQUVoQkEsd0NBQXNCQTs7Ozs7Ozs7Ozs7O29CQWs0Qm5DQSxRQUFRQTtvQkFDUkEsOENBQTRCQSxNQUFNQTtvQkFDbENBOztvQkFFQUEsS0FBSUEsV0FBV0EsSUFBSUEsa0RBQWdDQTt3QkFFbERBLElBQUdBLFNBQVNBLGtDQUFhQSxrRUFBc0JBOzRCQUU5Q0EsbUVBQXNCQTs0QkFDdEJBOzs0QkFJQUEsbUVBQXNCQSx3QkFBa0JBLENBQUNBLFFBQUlBOzs7Ozs7b0JBTy9DQTtvQkFDQUEsS0FBSUEsV0FBV0EsSUFBSUEsa0RBQWdDQTt3QkFFbERBLGtFQUFzQkEsdUJBQWtCQTs7OzZDQUlQQSxnQkFBK0JBLFFBQVlBO29CQUU3RUEsbUJBQTBCQSxLQUFJQTs7b0JBRTlCQSxtQkFBbUJBO29CQUNWQSxJQUFHQSxnQkFBZ0JBO3dCQUVmQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBb0JBOzRCQUVuQ0EsSUFBR0EscUJBQWFBLGNBQWNBO2dDQUUxQkEsOEJBQVlBLHFCQUFhQTs7Z0NBSXpCQSxJQUFHQSxxQkFBYUE7b0NBQ1pBLGlCQUFpQkEscUJBQWFBOzs7O3dCQUcxQ0EsS0FBSUEsWUFBV0EsS0FBSUEsaUNBQWVBOzRCQUU5QkEsSUFBR0Esc0JBQXNCQSxrQ0FBUUE7Z0NBRTdCQSxvQkFBb0JBLGtDQUFRQTtnQ0FDNUJBLGtDQUFRQSxJQUFLQTs7Ozt3QkFJckJBLGlDQUFlQTs7d0JBRWZBLElBQUdBLDRCQUE0QkE7NEJBRTNCQSxJQUFHQTtnQ0FFQ0EsSUFBR0E7b0NBRUNBO29DQUNBQSxpQkFBaUJBO29DQUNqQkEsT0FBT0E7OztnQ0FLWEE7Z0NBQ0FBLGlCQUFpQkE7Ozs7d0JBSXpCQSxLQUFJQSxZQUFXQSxLQUFJQSxvQkFBb0JBOzRCQUVuQ0EsV0FBV0EscUJBQWFBOzRCQUN4QkEsb0JBQW9CQTs0QkFDcEJBLGlCQUFpQkE7O3dCQUVyQkEsYUFBYUE7d0JBQ2JBLEtBQUlBLFlBQVdBLEtBQUlBLFFBQVFBOzRCQUV2QkEsSUFBR0EscUJBQWFBLE9BQU1BLFFBQ2xCQSxxQkFBYUEsZUFBY0E7Z0NBRTNCQSxJQUFHQTtvQ0FFQ0EsSUFBR0EsdUJBQWNBO3dDQUViQSxxQkFBYUE7d0NBQ2JBLGlCQUFpQkEsc0RBQWFBO3dDQUM5QkEsT0FBT0E7OztvQ0FJWEEscUJBQWFBO29DQUNiQSxpQkFBaUJBLHNEQUFhQTs7Ozs7O29CQU12REEsT0FBT0E7OztvQkFtRFBBOztvQkFFQUEsSUFBR0EscUNBQW1CQSxRQUFRQTt3QkFDN0JBOztvQkFDREEseUNBQXVCQTtvQkFDZEEsWUFBWUE7b0JBQ1pBOztvQkFFQUEsV0FBV0E7O29CQUVYQSw2Q0FBMkJBLG1CQUFrQkE7O29CQUV0REEsS0FBS0EsV0FBV0EsSUFBSUEsT0FBT0E7d0JBRWRBLElBQUdBOzRCQUVDQSxJQUFHQSxNQUFLQTtnQ0FFSkEsaUJBQWlCQTtnQ0FDakJBLFNBQVNBLG9DQUFnQkEsMENBQWdCQSxJQUFJQSxRQUFRQTs7OzRCQUt6REEsSUFBR0EsTUFBS0E7Z0NBRUpBLGlCQUFpQkE7OzRCQUVyQkEsU0FBU0Esb0NBQWdCQSwwQ0FBZ0JBLElBQUlBLFFBQVFBOzs7O29CQUl0RUEsU0FBU0Esb0NBQWdCQSxtQ0FBaUJBLFFBQVFBOztvQkFFekNBO29CQUNBQSwyQ0FBeUJBOztvQkFFbENBLElBQUdBLGdDQUFjQTt3QkFFaEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkEzakUyQkEsT0FBT0E7Ozs7O29CQVlBQSxPQUFPQTs7Ozs7b0JBTXBDQSxPQUFPQSx1QkFBa0JBOzs7b0JBRTlCQSx5QkFBb0JBLHNDQUF5QkE7Ozs7O29CQUlMQSxPQUFPQTs7Ozs7b0JBSTFDQSxPQUFPQSxvQkFBZUE7OztvQkFHM0JBLHlCQUFvQkEsbUNBQXNCQTs7Ozs7b0JBTXJDQSxPQUFPQSxxQkFBZ0JBOzs7b0JBRzVCQSx5QkFBb0JBLHNDQUF5QkE7Ozs7O29CQU0vQkEsT0FBT0EsbUJBQWNBOzs7b0JBR3ZCQSx5QkFBb0JBLGtDQUFxQkE7Ozs7O29CQWtLaERBLE9BQU9BOzs7b0JBQ1BBLG9CQUFlQTs7Ozs7b0JBczVDZkEsT0FBT0E7OztvQkFDUEEsOEJBQXlCQTs7Ozs7b0JBS3pCQSxPQUFPQTs7O29CQUNQQSxrQ0FBNkJBOzs7OztvQkFLN0JBLE9BQU9BOzs7b0JBQ1BBLHdCQUFtQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Z0NBcmpET0EsS0FBSUE7cUNBb0RJQTs7b0NBYUlBOzs7d0NBNEVJQTtxQ0EyNkNEQSxLQUFJQTs7Ozs7Ozs7Z0JBblpuREEsZUFBVUE7Ozs7Z0JBSVZBLDZCQUF3QkE7O2dCQUt4QkEsb0JBQWVBOztnQkFFTkEsWUFBT0E7O2dCQUVoQkEsMEJBQXFCQTs7Z0JBUXJCQTs7Z0JBRVNBLG1CQUFjQTs7Z0JBRXZCQSxpQ0FBNEJBOztnQkFFNUJBLHlCQUFvQkE7Z0JBQ1hBLElBQUdBLENBQUNBO29CQUVBQSx5QkFBb0JBO29CQUNwQkEseUJBQW9CQTs7O2dCQUd4QkEsSUFBR0E7b0JBRUNBO29CQUNBQTs7b0JBRUFBO29CQUNBQTs7b0JBRUFBO29CQUNBQTs7O2dCQUdKQSxvQ0FBK0JBOztnQkFFL0JBLFlBQU9BLEVBQWNBOztnQkFFckJBLDhCQUF5QkEsYUFBcUJBLEFBQW9EQTs7Z0JBZ0gzR0EsOEJBQXlCQSxZQUFvQkEsQUFBb0RBOztnQkFVakdBLDhCQUF5QkEsY0FBc0JBLEFBQW9EQTs7Z0JBT25HQSwyQkFBc0JBLGNBQXNCQSxBQUFvREE7O2dCQUloR0EsOEJBQXlCQSxhQUFxQkEsQUFBb0RBOztnQkF5RWxHQSw4QkFBeUJBLGFBQXFCQSxBQUFvREE7O2dCQW9CbEdBLDJCQUFzQkEsYUFBcUJBLEFBQW9EQTs7Z0JBVy9GQSwyQkFBc0JBLGFBQXFCQSxBQUFvREE7O2dCQVkvRkEsa0NBQTZCQSxhQUFxQkEsQUFBb0RBOztnQkFhdEdBLDJCQUFzQkEsY0FBc0JBLEFBQW9EQTs7Z0JBY2hHQSxrQ0FBNkJBLGNBQXNCQSxBQUFvREE7O2dCQWtCdkdBLEVBQWNBLDJCQUNDQSxxREFDQ0E7O2dCQUVoQkEseUJBQW9CQTtnQkFDcEJBLHlCQUFvQkE7Z0JBQ3BCQSx5QkFBb0JBOztnQkFFcEJBLHlCQUFvQkE7O2dCQUVuQkEsbUJBQWNBOztnQkFRZkE7Ozs7O2dCQWxoRFNBLE9BQU9BOzt1Q0FLV0E7Z0JBRTNCQSxJQUFHQSxTQUFTQTtvQkFDWEE7O2dCQUNEQSxrQkFBYUE7Z0JBQ2JBLG1CQUFtQkE7OzBDQUdXQTs7Z0JBRTlCQSxJQUFHQSxZQUFZQSxRQUFRQTtvQkFDdEJBOztnQkFDREEsdUJBQWtCQTtnQkFDbEJBLEtBQUlBLFdBQVdBLElBQUlBLGlCQUFpQkE7b0JBRW5DQSw0QkFBU0EsR0FBVEEsd0JBQXlCQTs7O3FDQUlIQTtnQkFFdkJBLHNCQUFzQkE7O2dCQUV0QkEsT0FBT0E7O21DQVVnQkE7Z0JBRXZCQSxzQkFBc0JBOztnQkFFdEJBLE9BQU9BOzt3Q0FYbUJBOztnQkFFMUJBLGdEQUF5QkE7O2dCQUV6QkEsT0FBT0E7O3NDQVVtQkE7O2dCQUUxQkEsZ0RBQXlCQTs7Z0JBRXpCQSxPQUFPQTs7c0NBaUR5QkE7Z0JBRWhDQSxJQUFHQSxvQ0FBWUE7b0JBQ2RBLGNBQVNBOztnQkFDVkE7O2dCQUVBQSxLQUFJQSxXQUFXQSxJQUFJQSx3QkFBd0JBO29CQUUxQ0EsSUFBR0EsQ0FBQ0EsbUNBQWdCQSxHQUFoQkE7d0JBQ0hBOztvQkFDREEsS0FBSUEsV0FBV0EsSUFBSUEscUJBQWdCQTt3QkFFbENBLElBQUdBLHNCQUFTQSxNQUFNQSxRQUFRQSwyQ0FBU0EsYUFBZUE7NEJBRWpEQSxJQUFHQSw2Q0FBU0EsWUFBY0EsbUNBQWdCQSxHQUFoQkE7Z0NBRXpCQSxzQkFBU0EsWUFBWUEsc0JBQVNBO2dDQUM5QkE7Ozs7b0JBSUhBLG9CQUFlQSxtQ0FBZ0JBLEdBQWhCQTs7OztnQkFNaEJBLElBQUdBLG9DQUFZQTtvQkFDZEEsY0FBU0E7O2dCQUNWQTs7Z0JBRUFBLEtBQUlBLFdBQVdBLElBQUlBLHFCQUFnQkE7b0JBRWxDQSxJQUFHQSxzQkFBU0EsTUFBTUEsUUFBUUEsMkNBQVNBLGFBQWVBO3dCQUVqREEsc0JBQVNBLFlBQVlBLHNCQUFTQTs7Ozs7Ozs7Z0JBMkJoQ0EsT0FBT0EsZ0JBQVdBLFFBQVFBLDZDQUFnQ0E7OzJDQUczQkEsUUFBdUJBOztnQkFFdERBLFFBQU9BO29CQUVOQSxLQUFLQTt3QkFDSkEsSUFBR0EsdUJBQWtCQTs0QkFFcEJBOzRCQUNBQSxzQkFBaUJBOzt3QkFFbEJBLElBQUdBOzRCQUVGQSxzQkFBaUJBLHNCQUFpQkE7O3dCQUduQ0E7b0JBQ0RBLEtBQUtBO3dCQUNKQSxJQUFHQSxxQkFBZ0JBOzRCQUVsQkE7NEJBQ0FBLG9CQUFlQTs7d0JBRWhCQSxJQUFHQTs0QkFFRkEsb0JBQWVBLHNCQUFpQkE7O3dCQUVqQ0E7b0JBQ0RBLEtBQUtBO3dCQUNKQSxJQUFHQSxvQkFBZUE7NEJBRUNBOzRCQUNBQSxtQkFBY0E7O3dCQUVqQ0EsSUFBR0E7NEJBRWdCQSxtQkFBY0Esc0JBQWlCQTs7d0JBRWxEQTtvQkFDV0EsS0FBS0E7d0JBQ0RBLElBQUdBLG1CQUFjQTs0QkFFYkE7NEJBQ0FBLGtCQUFhQTs7d0JBRWpCQSxJQUFHQTs0QkFFQ0Esa0JBQWFBLHNCQUFpQkE7O3dCQUVsQ0E7b0JBQ0pBO3dCQUNYQTs7O2dCQUdPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQkE0RUFBLElBQUlBLG9CQUFlQSxRQUNmQSxpREFBb0NBO29CQUVoREEsSUFBR0E7d0JBRUZBOztvQkFFREEsb0NBQStCQTs7Ozs7Ozs7O3NDQTRmTkE7Z0JBRWpCQSxJQUFHQSxVQUFTQTtvQkFDUkE7OztnQkFFSkEsd0JBQW1CQTs7Z0JBRW5CQSxJQUFHQSwwQkFBb0JBO29CQUVuQkEsMEJBQXFCQTtvQkFDckJBLHVCQUFrQkE7b0JBQ2xCQSx1QkFBa0JBO29CQUNsQkEsb0JBQWVBO29CQUNmQSxvQkFBZUE7b0JBQ2ZBO29CQUNBQTtvQkFDQUE7OztvQkFHQUEsSUFBR0EsdUJBQWtCQTt3QkFFakJBOztvQkFFSkE7O29CQUVBQSx3Q0FBc0JBOztvQkFFdEJBLDBCQUFxQkE7O29CQUVyQkE7OztnQkFHSkEsSUFBR0EsQ0FBQ0E7b0JBQ1pBOzs7Z0JBRVFBLElBQUdBLENBQUNBLG9CQUFjQSxZQUFVQTtvQkFFeEJBLG9DQUFlQSxnQkFBV0EsZUFBVUEsaUJBQVlBO29CQUNoREE7b0JBQ0FBO3VCQUVDQSxJQUFHQSxxQkFBZUE7b0JBRW5CQSxJQUFHQSwwQkFBb0JBO3dCQUVuQkEsaUJBQVlBO3dCQUNaQSxnQkFBV0E7d0JBQ1hBLGtCQUFhQTt3QkFDYkEsbUJBQWNBOzs7b0JBR2xCQTs7b0JBRUFBO3VCQUVDQSxJQUFHQSxxQkFBZUE7b0JBRW5CQSwwQkFBcUJBO29CQUNyQkEsMEJBQXFCQTtvQkFDckJBLHVCQUFrQkE7b0JBQ2xCQSx1QkFBa0JBO29CQUNsQkEsdUJBQWtCQTs7b0JBRWxCQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTtvQkFDQUE7O29CQUVBQSxJQUFHQSwwQkFBb0JBO3dCQUVuQkEsaUJBQVlBO3dCQUNaQSxnQkFBV0E7d0JBQ1hBLGtCQUFhQTt3QkFDYkEsbUJBQWNBOzt3QkFJZEE7OztvQkFHSkE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBLGFBQWFBLENBQUNBOztvQkFFZEEsYUFBUUEsQUFBT0EsU0FBU0Esa0NBQWFBLHVDQUFrQ0E7b0JBQ3ZFQTs7b0JBRUFBOztvQkFFQUEsSUFBR0EsdUJBQWtCQTt3QkFFakJBOzs7b0JBR0pBLHVCQUFrQkE7b0JBQ2xCQSwwQkFBcUJBOztvQkFFckJBLHFDQUFtQkE7O29CQUVuQkE7OztnQkFHSkE7OztnQkFpRFRBLElBQUdBLHFCQUFlQTtvQkFFakJBLG9CQUFlQTt1QkFFRkEsSUFBR0EscUJBQWVBO29CQUVuQkEsb0JBQWVBOztvQkFJM0JBLG9CQUFlQTs7OztnQkFNUEE7Z0JBQ0FBOztnQkFFQUEsSUFBR0E7b0JBRUNBOzs7Z0JBR0pBLElBQUdBO29CQUVDQSxJQUFHQTt3QkFFQ0EsOEJBQXlCQSxzQ0FBaUJBOztvQkFFOUNBLGVBQWVBO29CQUNmQSxJQUFHQSxDQUFDQSw0QkFBa0VBLGdDQUFpQkE7d0JBQ25GQSx5QkFBb0JBOzs7O2dCQUc1QkEsSUFBR0E7b0JBRUNBLGVBQWVBO29CQUNmQSwrQkFBMEJBLHNDQUFpQkE7b0JBQzNDQSxJQUFHQSxDQUFDQSw0QkFBa0VBLGdDQUFpQkE7d0JBQ25GQSx5QkFBb0JBOzs7Z0JBRTVCQSxJQUFHQTtvQkFFQ0EsZUFBZUE7b0JBQ2ZBLGlDQUE0QkEsc0NBQWlCQTtvQkFDN0NBLElBQUdBLENBQUNBLDRCQUFrRUEsZ0NBQWlCQTt3QkFDbkZBLHlCQUFvQkE7Ozs7Z0JBRzVCQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBLElBQUdBLENBQUNBLDRCQUFrRUEsZ0NBQWlCQTt3QkFDbkZBLHlCQUFvQkE7Ozs7d0NBS0VBO2dCQUV2Q0EsV0FBV0E7O2dCQUVYQSxRQUFPQTtvQkFFTkEsS0FBS0E7d0JBQ0pBO3dCQUNBQTt3QkFFQUEsbUJBQW1CQTt3QkFZbkJBLGlCQUFpQkE7d0JBYWpCQTtvQkFDREEsS0FBS0E7d0JBQ0pBO3dCQUVBQSxpQkFBaUJBO3dCQWFqQkE7b0JBQ0RBLEtBQUtBO3dCQUNKQTt3QkFFQUEsaUJBQWlCQSwrQkFBQ0E7NEJBRWpCQSxJQUFHQSxnQ0FBY0E7Z0NBQ2hCQTs7OzRCQUVEQTs0QkFDQUE7OzRCQUVrQkEsSUFBR0E7Z0NBRUNBO2dDQUNBQSxtQkFBY0E7OztnQ0FLZEEsbUJBQWNBLDBCQUFvQkEseUNBQTRCQSxzQ0FBMEJBO2dDQUN4RkE7Ozs0QkFHSkE7O3dCQUduQkE7b0JBQ0RBLEtBQUtBO3dCQUVKQTtvQkFDREEsS0FBS0E7d0JBQ0pBO29CQUNEQTt3QkFDQ0EsaUJBQWlCQTt3QkFVakJBO29CQUNXQSxLQUFLQTt3QkFDREE7d0JBRUFBLGlCQUFpQkE7d0JBYWpCQTs7O2dCQUdSQSxvQkFBb0JBOztnQkFPcEJBLGtCQUFrQkE7O2dCQUkzQkEsbUJBQW1CQTs7Z0JBU25CQSxJQUFHQSxTQUFRQTtvQkFFVkEsbUJBQW1CQTs7O2dCQWNYQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTs7O2dCQUdiQSxPQUFPQTs7Ozs7O2dCQXlYUEEsT0FBT0E7OztnQkFLUEEsT0FBT0E7OztnQkFLUEEsT0FBT0E7OztnQkFLUEEsT0FBT0E7O2lEQXVCOENBO2dCQUVyREEsSUFBR0E7b0JBRUZBLG1CQUFtQkE7b0JBQ25CQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBb0JBO3dCQUV0Q0EsSUFBR0EsNENBQWFBLElBQU1BOzRCQUNyQkEsT0FBT0E7Ozs7b0JBS1RBLEtBQUlBLFdBQVdBLElBQUlBLHlDQUF1QkE7d0JBRXpDQSxJQUFHQSw2QkFBUUEsMENBQWdCQTs0QkFDMUJBLE9BQU9BLDBDQUFnQkE7O3dCQUN4QkEsb0JBQW1CQSwwQ0FBZ0JBO3dCQUNuQ0EsS0FBSUEsWUFBV0EsS0FBSUEscUJBQW9CQTs0QkFFdENBLElBQUdBLDZDQUFhQSxLQUFNQTtnQ0FDckJBLE9BQU9BLDBDQUFnQkE7Ozs7OztnQkFLbEJBLE9BQU9BOzs7Z0JBS2hCQSxJQUFHQTtvQkFFRkEsT0FBT0Esc0RBQTBCQSxPQUFTQTs7b0JBSTFDQSxPQUFPQSxzREFBMEJBLE9BQVNBOzs7O2dCQU1sQ0EsT0FBT0EsK0JBQTBCQSxTQUFTQTs7O2dCQUtuREEsSUFBR0EsQ0FBQ0E7b0JBQ0hBOzs7Z0JBRURBLElBQUlBOztvQkFHU0EsTUFBTUEsSUFBSUE7OztnQkFHZEEsc0NBQW9CQSxJQUFJQSw0QkFBZUE7O2dCQUV2Q0E7O2dCQUVBQSxJQUFHQSx1QkFBaUJBO29CQUVoQkE7OztnQkFHSkE7O2dCQUVBQTs7Z0JBRUFBLCtCQUFhQTs7a0NBR0FBOztnQkFFdEJBLElBQUdBLENBQUNBO29CQUNIQTs7O2dCQUVEQTs7Z0JBRUFBLElBQUlBLHVCQUFrQkE7b0JBQ1RBOztnQkFDSkEsSUFBSUEscUJBQWdCQTtvQkFDaEJBOztnQkFDSkEsSUFBSUEsb0JBQWVBO29CQUNmQTs7O2dCQUVKQTtnQkFDQUEsSUFBR0EsdUJBQWlCQTtvQkFFaEJBLElBQUdBLENBQUNBO3dCQUNBQSxxQkFBZ0JBOzs7Z0JBRXhCQTs7Z0JBRUFBLElBQUdBLGlCQUFpQkEsUUFBUUE7b0JBRXBDQSw0QkFBdUJBOzs7aUNBS0hBO2dCQUVyQkEsT0FBT0EsZ0JBQWdCQTs7K0JBRUpBO2dCQUVuQkEsT0FBT0EsZ0JBQWdCQTs7O2dCQUtkQSxJQUFJQSxrQ0FBZ0JBO29CQUNoQkE7OztnQkFFYkEsc0JBQ3NCQSxhQUFRQSxHQUFDQSx5RUFBZ0NBLENBQUNBLDBCQUFnQkEsMkVBQzNEQSxhQUFRQSxHQUFDQSwwRUFBaUNBLENBQUNBLDBCQUFnQkE7OztnQkFLdkVBLElBQUdBLENBQUNBO29CQUVBQTtvQkFDQUE7b0JBQ0FBOzs7O2dCQU1KQTtnQkFDQUEsSUFBR0EsaUJBQVlBO29CQUN2QkE7O2dCQUNEQSxLQUFJQSxXQUFXQSxJQUFJQSxxQkFBZ0JBO29CQUVsQ0EsSUFBR0Esc0JBQVNBLE1BQU1BLFFBQ2pCQSwyQ0FBU0EsYUFBZUE7d0JBRXhCQSxzQkFBU0EsWUFBWUEsc0JBQVNBOzs7Z0JBR2hDQSxxQkFBZ0JBOzs0QkFHQUE7O2dCQUVoQkEsSUFBR0EsQ0FBQ0E7b0JBQ0hBOzs7Z0JBRVFBLElBQUlBO29CQUNBQTs7Z0JBQ2JBLHlCQUFvQkE7Z0JBQ3BCQSxJQUFHQSxDQUFDQSxvQkFBb0JBLENBQUNBLHFDQUFtQkEsUUFBUUE7b0JBRW5EQTtvQkFDQUE7OztnQkFHUUEsb0JBQW9CQSxDQUFDQSxtQkFBbUJBLDhDQUE0QkE7Z0JBQ3BFQSxtQkFBbUJBOztnQkFFNUJBLElBQUdBLENBQUNBLHNCQUFzQkE7b0JBRWJBLGlCQUFpQkE7O29CQUVqQkEsZ0NBQTJCQTs7b0JBRTNCQTs7b0JBRUFBLElBQUdBLHVCQUFpQkEseUNBQTRCQSxxQkFBZUE7d0JBRTNEQSxJQUFJQSx1QkFBaUJBLHlDQUE0QkEsQ0FBQ0EsaUJBQWlCQSxRQUFRQSxnQkFBZ0JBLFFBQVFBLDRCQUEyQkEscUJBQWFBLGdEQUF1Q0EsdUNBQTBCQSxxQkFBYUEsMkNBQW1DQTs0QkFFeFBBOzsrQkFHZEEsSUFBR0EsdUJBQWlCQTs0QkFFeEJBLFVBQVVBLHFCQUFhQTs7NEJBRUxBLFFBQVdBLG9CQUFnQkE7NEJBQzdDQSxRQUFXQSxvQkFBZ0JBOzs0QkFFVEEsSUFBR0EsTUFBYUE7Z0NBRVpBOzs0QkFFSkEsSUFBR0EsTUFBYUE7Z0NBRVpBOzs7NEJBR0pBLFVBQVVBOzs0QkFFNUJBLFdBQWNBOzRCQUNkQSxXQUFjQTs7NEJBRWRBLFdBQWNBOzRCQUNkQSxXQUFjQTs7NEJBRWRBLElBQUdBLHFDQUFLQSxrQ0FBSUE7Z0NBQ1hBLElBQUlBLDZCQUFLQTs7NEJBQ1ZBLElBQUdBLHFDQUFLQSxrQ0FBSUE7Z0NBQ1hBLElBQUlBLDZCQUFLQTs7OzRCQUVWQSxJQUFHQSxxQ0FBS0Esa0NBQUlBO2dDQUNYQSxJQUFJQSw2QkFBS0E7OzRCQUNWQSxJQUFHQSxxQ0FBS0Esa0NBQUlBO2dDQUNYQSxJQUFJQSw2QkFBS0E7OzRCQUNWQSxJQUFJQSxpREFBS0E7NEJBQ1RBLElBQUlBLGlEQUFLQTs7NEJBRVRBLHNCQUFpQkEsYUFBUUEscUNBQUtBLDZDQUNqQkEsYUFBUUEscUNBQUtBOzs7O29CQUk1QkE7O29CQUVBQTs7O2dCQUdEQSwrQkFBYUE7OztnQkFLSkEsb0JBQW9CQTtnQkFDcEJBLElBQUdBLGlCQUFpQkE7b0JBRWhCQSxJQUFJQSxnREFBMkJBO3dCQUMzQkE7O29CQUNKQSxtQkFBbUJBO29CQUMvQkEsSUFBR0EsZ0JBQWdCQSxRQUFRQTt3QkFFMUJBLG9CQUFvQkE7d0JBQ3BCQSxpQkFBaUJBOzs7b0JBR2xCQTs7O2lDQUkwQkE7Z0JBRTNCQSw0QkFBNEJBLGlCQUFDQTs7O2dCQWtIcEJBLElBQUdBLENBQUNBO29CQUNBQTs7O2dCQUVKQSw2QkFBOEJBLHNEQUFjQTs7Z0JBRTVDQSxJQUFHQSwyQkFBMEJBO29CQUV6QkEsNkJBQXdCQTtvQkFDeEJBLFVBQVVBLEtBQUlBO29CQUNkQSxZQUFZQTs7b0JBRVpBLE9BQU1BO3dCQUVGQSxjQUFjQTt3QkFDZEEsSUFBR0E7NEJBRUNBLFFBQVFBOzRCQUNSQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO2dDQUUxQkE7Z0NBQ0FBLHlDQUF5Q0E7Ozs0QkFLN0NBLFNBQVFBOzRCQUNSQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO2dDQUUxQkE7Z0NBQ0FBLG9DQUFvQ0E7Ozt3QkFHNUNBLGFBQWFBO3dCQUNiQSxJQUFHQTs0QkFFQ0EsS0FBSUEsV0FBV0EsSUFBSUEsUUFBUUE7Z0NBRXZCQSxZQUFZQSxvQ0FBaUJBLEdBQWpCQTs7Ozs7OztnQkF5RDVCQSxJQUFHQSxrQkFBYUE7b0JBQ3hCQTs7O2dCQUVRQTs7Z0JBRUFBOztnQkFFVEEsOEJBQVlBOztnQkFFSEEsMEJBQTBCQSwrQkFBMEJBOztnQkFFcERBLElBQUdBLHVCQUF1QkE7b0JBRXRCQSxJQUFHQSxzREFBaUNBO3dCQUVoQ0EsZ0NBQWdDQTt3QkFDaENBLEtBQUtBLFdBQVdBLElBQUlBLHdDQUF3Q0E7NEJBRXhEQSxJQUFJQSxnRUFBaUNBLElBQU1BO2dDQUN2Q0E7OzRCQUNKQSx5Q0FBaUNBOzt3QkFFckNBLElBQUlBOzRCQUVBQSxvQ0FBa0JBLEtBQUlBOzs7d0JBSzFCQSx3Q0FBd0NBOzs7O2dCQUl6REEsSUFBR0EsZ0JBQVdBO29CQUViQSxJQUFHQSxDQUFDQTt3QkFFSEEsSUFBR0E7NEJBRUZBLGtCQUFhQSx3Q0FBMkJBLEFBQXVCQTs7NEJBRy9EQTs7O3dCQUtEQSxnQ0FBMkJBOzs7O2dCQUk3QkE7O2dCQUVBQSwrQkFBYUE7Z0JBQ2JBLElBQUdBO29CQUVGQTtvQkFDQUEsSUFBR0Esc0JBQWdCQSxzQ0FDbkJBLHNCQUFpQkEsUUFBUUE7d0JBRXhCQSxLQUFJQSxZQUFXQSxLQUFJQSwwQkFBcUJBOzRCQUV2Q0EsMkJBQWNBLG1CQUFrQkE7Ozs7O2dCQUsxQkE7O2dCQUVBQSxJQUFHQSxxQkFBZUE7b0JBRWRBLHdDQUFzQkE7b0JBQ3RCQTs7O2dCQUdKQTs7Ozs7Ozs7O1lBL3FFSEEsSUFBR0EsMkNBQXlCQTtnQkFFM0JBO2dCQUNBQSwwQ0FBd0JBOzs7c0JBNmRnQkE7WUFFN0NBOztzQkFXZUE7WUFFaEJBLElBQUdBLDRCQUEyREEsbUNBQXlCQTtnQkFDdEZBLDBCQUEwQkE7OztzQkFHVkE7WUFFakJBLElBQUdBLENBQUNBLDRCQUEyREEsbUNBQXlCQTtnQkFDdkZBLDBCQUEwQkE7OztzQkE0RVNBO1lBRXhCQTtZQUNBQTs7c0JBTXVCQTtZQUV2QkEsSUFBR0E7Z0JBRUNBOzs7WUFHSkEsSUFBR0EsMEJBQTBCQTs7Z0JBR3pCQTtnQkFDQUE7Z0JBQ0FBLDRCQUFVQTs7O3NCQUdLQTs7WUFFbkJBOztzQkFFeUJBO1lBQ3pCQTtZQUNBQTs7c0JBSUtBO1lBQ2pCQSxJQUFHQSwyQ0FBOEJBLGVBQWNBO2dCQUU5Q0E7Z0JBQ0FBOzs7dUJBSWlCQTtZQUNOQSxJQUFHQSxxQ0FBbUJBO2dCQUNsQkE7OztZQUVKQSxLQUFJQSxXQUFXQSxJQUFJQSx5Q0FBdUJBO2dCQUV0Q0EsSUFBR0EsMENBQWdCQSxNQUFNQTtvQkFDckJBOztnQkFDSkEsU0FBU0EsMENBQWdCQTtnQkFDekJBLElBQUdBLGdCQUFnQkE7b0JBQ2ZBOztnQkFDSkEsS0FBSUEsV0FBV0EsSUFBSUEsdUJBQXVCQTtvQkFFdENBLElBQUdBLHdCQUFnQkEsTUFBTUE7d0JBQ3JCQSx3QkFBZ0JBOzs7OztZQUk1QkE7O3VCQUdrQkE7WUFFbEJBLElBQUdBO2dCQUNDQTs7O1lBRUpBLFVBQVVBOztZQUVWQSxJQUFHQSxnQ0FBY0E7Z0JBRWJBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQSxJQUFHQSx5RUFBK0NBO29CQUU5Q0EsSUFBR0E7d0JBRUNBLDZEQUEyQ0E7O3dCQUkzQ0EsNERBQTBDQTs7O29CQUc5Q0E7OztnQkFHSkEsZUFBZUEsMkNBQThCQTs7Z0JBRTdDQTtnQkFDQUE7O2dCQUVBQSxXQUFXQSxDQUFDQSxDQUFDQSxNQUFLQSxnQkFBZUE7Z0JBQ2pDQSxXQUFXQSxDQUFDQSxDQUFDQSxNQUFLQSxnQkFBZUE7O2dCQUVqQ0EsSUFBR0EsNkNBQTBCQSwwQ0FDekJBLGlDQUFjQTtvQkFFZEE7b0JBQ0FBLE9BQU9BLGNBQWNBLENBQUNBO29CQUN0QkEsdUNBQXFCQSxPQUFPQTs7O2dCQUdoQ0EsUUFBVUEsQUFBT0EsV0FBa0JBO2dCQUNuQ0EsUUFBVUEsQUFBT0EsV0FBa0JBO2dCQUNuQ0EsUUFBVUEsQUFBT0EsV0FBa0JBO2dCQUNuQ0EsUUFBVUEsQUFBT0EsV0FBa0JBOztnQkFFbkNBLFNBQVdBO2dCQUNYQSxTQUFXQTtnQkFDWEEsU0FBV0E7Z0JBQ1hBLFNBQVdBOztnQkFFWEEsSUFBR0E7b0JBQ0NBOztnQkFDSkEsSUFBR0E7b0JBQ0NBOzs7Z0JBRUpBLElBQUdBO29CQUNDQTs7Z0JBQ0pBLElBQUdBO29CQUNDQTs7O2dCQUVKQSxRQUFPQTtvQkFFSEEsS0FBS0E7d0JBQ0RBLElBQUlBO3dCQUNKQSxJQUFJQTt3QkFDSkE7b0JBQ0pBLEtBQUtBO3dCQUNEQSxLQUFLQSxPQUFPQTt3QkFDWkEsS0FBS0EsT0FBT0E7d0JBRVpBLElBQUdBLElBQUlBOzRCQUVIQSxRQUFRQSx3Q0FBc0JBOzRCQUM5QkEsSUFBSUE7O3dCQUVSQSxJQUFHQSxJQUFJQTs0QkFFSEEsUUFBUUEseUNBQXVCQTs0QkFDL0JBLElBQUlBOzt3QkFFUkEsSUFBSUE7d0JBQ0pBLElBQUlBO3dCQUVKQTtvQkFDSkEsS0FBS0E7d0JBQ0RBLEtBQUtBLE9BQU9BO3dCQUVaQSxJQUFHQSxJQUFJQTs0QkFFSEEsUUFBUUEseUNBQXVCQTs0QkFDL0JBLElBQUlBOzt3QkFHUkEsSUFBSUE7d0JBRUpBO29CQUNKQSxLQUFLQTt3QkFDREEsS0FBS0EsT0FBT0E7d0JBQ1pBLElBQUlBLEtBQUtBO3dCQUVUQSxJQUFHQSxJQUFJQTs0QkFFSEEsUUFBUUEseUNBQXVCQTs0QkFDL0JBLElBQUlBOzt3QkFFUkEsSUFBR0EsSUFBSUE7NEJBQ0hBLElBQUlBOzt3QkFFUkEsSUFBSUE7d0JBRUpBO29CQUNKQSxLQUFLQTt3QkFDREEsS0FBS0EsT0FBT0E7d0JBRVpBLElBQUdBLElBQUlBOzRCQUVIQSxRQUFRQSx3Q0FBc0JBOzRCQUM5QkEsSUFBSUE7O3dCQUdSQSxJQUFJQTt3QkFFSkE7b0JBQ0pBLEtBQUtBO3dCQUNEQSxLQUFLQSxPQUFPQTt3QkFDWkEsSUFBSUEsS0FBS0E7d0JBRVRBLElBQUdBLElBQUlBOzRCQUVIQSxRQUFRQSx3Q0FBc0JBOzRCQUM5QkEsSUFBSUE7O3dCQUdSQSxJQUFHQSxJQUFJQTs0QkFDSEEsSUFBSUE7O3dCQUVSQSxJQUFJQTt3QkFFSkE7b0JBQ0pBLEtBQUtBO3dCQUNEQSxJQUFJQSxLQUFLQTt3QkFFVEEsSUFBR0EsSUFBSUE7NEJBQ0hBLElBQUlBOzt3QkFFUkE7b0JBQ0pBLEtBQUtBO3dCQUNEQSxJQUFJQSxLQUFLQTt3QkFFVEEsSUFBR0EsSUFBSUE7NEJBQ0hBLElBQUlBOzt3QkFFUkE7b0JBQ0pBLEtBQUtBO3dCQUNEQSxJQUFJQSxLQUFLQTt3QkFFVEEsSUFBSUEsS0FBS0E7d0JBRVRBLElBQUdBLElBQUlBOzRCQUNIQSxJQUFJQTs7d0JBQ1JBLElBQUdBLElBQUlBOzRCQUNIQSxJQUFJQTs7d0JBRVJBOztnQkFFUkE7Z0JBQ0FBLElBQUdBLE9BQU1BO29CQUNMQSwwQ0FBd0JBOztnQkFDNUJBLElBQUdBLE9BQU1BO29CQUNMQSx5Q0FBdUJBOztnQkFDM0JBLElBQUdBLE9BQU1BLEtBQUtBLENBQUNBO29CQUNYQSwyQ0FBeUJBOztnQkFDN0JBLElBQUdBLE9BQU1BLEtBQUtBLENBQUNBO29CQUNYQSw0Q0FBMEJBOzs7Z0JBRTlCQSxJQUFHQTtvQkFDQ0E7Ozs7dUJBSVFBO1lBRWhCQTtZQUNBQSxJQUFHQSxnQ0FBY0E7Z0JBRWJBLDREQUEwQ0E7OztZQUc5Q0EsK0JBQWFBO1lBQ2JBO1lBQ0FBLCtCQUFhQTtZQUNiQSw0QkFBVUE7O3VCQUVXQTtZQUVqQ0EsSUFBR0EsQ0FBQ0E7Z0JBRUhBOzs7dUJBRzBCQTtZQUVmQSxJQUFHQSwrREFBK0JBO2dCQUM5QkE7Ozt1QkFFaUNBLFNBQWdCQSxLQUFZQSxZQUFnQkEsY0FBa0JBO1lBQ25HQSxJQUFHQTtnQkFFQ0E7O1lBRUpBO2dCQUVYQTtnQkFDQUE7Z0JBQ0FBLElBQUdBLGlDQUEwQkEsWUFBWUE7b0JBRXhDQTs7b0JBSUFBLFNBQVNBLHVDQUFtQkE7OztnQkFHN0JBLElBQUdBLGdEQUFrQ0E7b0JBRXBDQSw2QkFBZ0JBLFFBQVFBOzs7Z0JBR3pCQSxJQUFHQTtvQkFFRkEsYUFBYUEsSUFBSUEsaUNBQWVBLFFBQVFBO29CQUN4Q0E7Ozs7Ozs7O2dCQVFjQTs7O1lBR0pBOzt1QkE4WlNBO1lBQ3JCQSxJQUFHQSxrQ0FBYUE7Z0JBRWZBO2dCQUNBQTs7O3VCQWlDMEdBO1lBQzNHQSxJQUFHQTtnQkFDRkE7O1lBQ0RBLFVBQVVBOztZQUVWQTtZQUNBQTs7WUFFQUEsSUFBSUEsQ0FBQ0E7Z0JBQ1dBOzs7WUFFaEJBOztZQUVBQSwrQkFBYUE7WUFDYkEsK0JBQWFBOztZQUViQTs7WUFFQUEsZ0JBQWdCQTs7WUFFaEJBLGVBQWVBLDJDQUE4QkE7O1lBRTdDQSxlQUFVQSxBQUFPQSxpQkFBaUJBO1lBQ2xDQSxlQUFVQSxBQUFPQSxnQkFBZ0JBOztZQUVqQ0EsWUFBWUEsQUFBT0E7WUFDbkJBLGFBQWFBLEFBQU9BOztZQUVwQkEsUUFBVUEsY0FBY0EsQUFBT0E7WUFDL0JBLFFBQVVBLGNBQWNBLEFBQU9BOztZQUUvQkEsSUFBR0EscUJBQWVBO2dCQUVqQkEsNEJBQVVBO2dCQUNWQSwrQkFBYUE7bUJBRUdBLElBQUdBLHFCQUFlQTtnQkFFbkJBLDRCQUFVQTtnQkFDVkEsK0JBQWFBO2dCQUNiQTs7Z0JBSWZBLElBQUdBO29CQUNGQTs7O2dCQUVEQSxJQUFHQSxxQkFBZ0JBLFFBQVFBLGtDQUFhQTtvQkFFdkNBLDRCQUFVQTtvQkFDVkEsK0JBQWFBOztvQkFHYkEsSUFBR0E7d0JBRUZBLElBQUdBLEtBQUtBLG1DQUFpQkEsS0FBS0E7NEJBRTdCQSw0QkFBVUE7NEJBQ1ZBLCtCQUFhQTsrQkFFVEEsSUFBR0EsS0FBS0EsbUNBQWlCQSxLQUFLQSxRQUFRQTs0QkFFMUNBLDRCQUFVQTs0QkFDVkEsK0JBQWFBOytCQUVUQSxJQUFHQSxLQUFLQTs0QkFFWkEsNEJBQVVBOzRCQUNWQSwrQkFBYUE7K0JBRVRBLElBQUdBLEtBQUtBLG1DQUFpQkEsS0FBS0EsU0FBU0E7NEJBRTNDQSw0QkFBVUE7NEJBQ1ZBLCtCQUFhQTsrQkFFVEEsSUFBR0EsS0FBS0EsU0FBU0EsbUNBQWlCQSxLQUFLQSxRQUFRQTs0QkFFbkRBLDRCQUFVQTs0QkFDVkEsK0JBQWFBOytCQUVUQSxJQUFHQSxLQUFLQSxTQUFTQTs0QkFFckJBLDRCQUFVQTs0QkFDVkEsK0JBQWFBOytCQUVUQSxJQUFHQSxLQUFLQTs0QkFFWkEsNEJBQVVBOzRCQUNWQSwrQkFBYUE7OytCQUdUQSxJQUFHQSxLQUFLQSxRQUFRQTs0QkFFcEJBLDRCQUFVQTs0QkFDVkEsK0JBQWFBOzs0QkFJYkEsNEJBQVVBOzRCQUNWQSwrQkFBYUE7Ozs7OztZQU1qQkEsSUFBR0EsQ0FBQ0Esd0JBQW1CQSxpQ0FBY0E7Z0JBRXBDQSw0QkFBVUE7Z0JBQ1ZBLCtCQUFhQTs7O3VCQUltRkE7WUFDckZBLElBQUdBO2dCQUVDQTs7O1lBR0pBO1lBQ1pBOzt1QkFHbUdBO1lBQ25HQSxJQUFHQSxnQ0FBY0E7Z0JBRWhCQSw0QkFBVUE7Ozt1QkFJcUZBO1lBQ2hHQSw0QkFBVUE7O3VCQUd3RkE7OztZQUdsR0EsSUFBR0E7Z0JBQ0ZBOzs7WUFFREEsSUFBR0Esa0NBQWFBO2dCQUNmQTs7WUFDREEsVUFBVUE7O1lBRVZBLFlBQVlBO1lBQ1pBLGFBQWFBO1lBQ2JBLFFBQVFBLGFBQVlBO1lBQ3BCQSxRQUFRQSxhQUFZQTs7WUFFcEJBLElBQUdBLGdDQUFjQSxRQUFRQSxpQ0FBY0E7Z0JBRXRDQSw0QkFBVUE7Z0JBQ1ZBO21CQUVJQSxJQUFHQSxxQkFBZUE7Z0JBRXRCQSw0QkFBVUE7Z0JBQ1ZBOztZQUVEQSxJQUFHQTtnQkFDRkE7OztZQUVEQSxJQUFHQTtnQkFFYUEsSUFBSUEsaUNBQWNBLDhDQUFpQ0EsS0FBS0EsbUNBQWlCQSxLQUFLQTtvQkFFMUVBLDRCQUFVQTt1QkFFVEEsSUFBSUEsaUNBQWNBLCtDQUFrQ0EsS0FBS0EsbUNBQWlCQSxLQUFLQSxVQUFRQTtvQkFFeEZBLDRCQUFVQTt1QkFFVEEsSUFBSUEsS0FBS0EsbUNBQWlCQSxpQ0FBY0E7b0JBRXpDQSw0QkFBVUE7dUJBRVRBLElBQUlBLGlDQUFjQSxpREFBb0NBLEtBQUtBLG1DQUFpQkEsS0FBS0EsV0FBU0E7b0JBRTNGQSw0QkFBVUE7dUJBRVRBLElBQUlBLGlDQUFjQSxrREFBcUNBLEtBQUtBLFdBQVNBLHlDQUFpQkEsS0FBS0EsVUFBUUE7b0JBRXBHQSw0QkFBVUE7dUJBRVRBLElBQUlBLGlDQUFjQSw2Q0FBZ0NBLEtBQUtBLFdBQVNBO29CQUVqRUEsNEJBQVVBO3VCQUVUQSxJQUFJQSxpQ0FBY0EsMkNBQThCQSxLQUFLQTtvQkFFdERBLDRCQUFVQTt1QkFFVEEsSUFBSUEsaUNBQWNBLDRDQUErQkEsS0FBS0EsVUFBUUE7b0JBRS9EQSw0QkFBVUE7O29CQUlWQSw0QkFBVUE7OztnQkFJZEEsNEJBQVVBOzs7O3VCQUt3RUE7WUFDbEdBO1lBQ1lBLElBQUlBLENBQUNBO2dCQUNEQTs7O1lBRWhCQSxJQUFHQSxxQkFBZUE7Z0JBRWpCQSwrQkFBYUE7Z0JBQ2JBLDRCQUFVQTs7Z0JBRVZBLCtCQUFhQTs7Z0JBSWJBLCtCQUFhQTs7O1lBR2RBLCtCQUFhQTs7dUJBR2tGQTtZQUMvRkEsSUFBR0E7Z0JBQ0ZBOztZQUNEQSxJQUFJQSxDQUFDQTtnQkFDV0E7OztZQUVoQkEsK0JBQWFBO1lBQ2JBLCtCQUFhQTtZQUNiQTs7dUJBRytGQTtZQUMvRkEsSUFBR0E7Z0JBQ0ZBOzs7WUFFREEsSUFBR0EsZ0NBQWNBO2dCQUVEQSxJQUFJQSxDQUFDQTtvQkFDREE7O2dCQUNuQkE7Ozt1QkFJcUdBO1lBRXRHQSxJQUFHQTtnQkFFRkEsb0NBQStCQTtnQkFDL0JBOztZQUVEQSxJQUFJQSxDQUFDQTtnQkFDV0E7O1lBQ2hCQSxvQ0FBK0JBO1lBQy9CQSwrQkFBYUE7O3VCQUdtRkE7WUFFaEdBLElBQUdBO2dCQUVGQSxvQ0FBK0JBO2dCQUMvQkE7OztZQUdEQSxJQUFHQSxnQ0FBY0E7Z0JBRWhCQTs7O3VCQUlzR0E7WUFFdkdBLElBQUdBO2dCQUVGQSxvQ0FBK0JBO2dCQUMvQkE7O1lBRURBLElBQUdBLGdDQUFjQSxRQUFRQTtnQkFFeEJBLDRCQUFVQTtnQkFDVkEsb0NBQStCQTs7Z0JBSS9CQSxvQ0FBK0JBOzs7O1lBZS9CQTtZQUNBQSxJQUFHQSxnQkFBV0E7Z0JBRWJBO2dCQUFrQkEsZUFBVUE7Ozt1QkF4Z0JUQTtZQUVuQkEsSUFBR0EsZ0NBQWNBO2dCQUNoQkE7O1lBQ0RBOztZQUVBQTtZQUNBQTs7WUFFQUEsK0JBQWFBOzt1QkFHSUE7WUFFakJBLElBQUdBLGdDQUFjQTtnQkFDaEJBOzs7WUFFREE7WUFDQUE7O1lBRUFBLElBQUdBO2dCQUNGQTs7O1lBRURBOzt1QkFNaUJBO1lBRWpCQSxJQUFHQSxnQ0FBY0E7Z0JBQ2hCQTs7O1lBRURBO1lBQ0FBOztZQUVBQTs7WUFFQUE7O3VCQXFDaUJBO1lBRWpCQSxJQUFHQSxnQ0FBY0E7Z0JBQ2hCQTs7O1lBRURBO1lBQ0FBOztZQUVBQTs7dUJBTWdDQTtZQUVkQSxJQUFHQSxnQ0FBY0E7Z0JBQ2JBOzs7WUFFSkE7WUFDQUE7O1lBRUFBOztZQUVBQTs7dUJBTVNBO1lBRWpCQSxJQUFHQSxnQ0FBY0E7Z0JBQ2JBOztZQUNKQSw0QkFBVUE7O3VCQUdLQTtZQUMzQkE7O3VCQUdtQkE7WUFFbkJBLElBQUdBLGdDQUFjQTtnQkFDaEJBOzs7WUFFREE7WUFDQUE7O3VCQUtvQkE7WUFFbkJBLElBQUdBLGdDQUFjQTtnQkFDaEJBOzs7WUFFREE7O1lBRUFBO1lBQ0FBOztZQUVBQSwrQkFBYUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQkM5dkN1QkE7Ozs7OztpQ0FoQkFBLEtBQUlBOzs7OzRCQTRTWkEsZUFBdUJBOzs7Ozs7Z0JBRTVDQSxhQUFRQTs7Z0JBRVJBLHVCQUFrQkE7O2dCQUVsQkEsVUFBVUE7O2dCQUVWQSxnQkFBZ0JBLENBQUNBOzs7O2dCQUlqQkEsZ0JBQ0lBLENBQUNBLHFCQUFlQSxVQUFJQSwwREFHUEEsSUFBSUEsa0RBQThCQTs7Z0JBSW5EQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBOzs7Z0JBR0pBLGNBQTZCQSxLQUFJQTs7Z0JBRWpDQSxpQkFDSUEsbUJBQ0FBLGdCQUFVQSxVQUFJQSw4REFHRUEsbURBRWhCQSxhQUFPQSxVQUFJQSwyREFHS0Esd0RBRWhCQSxhQUFPQSxVQUFJQSwyREFHS0Esd0RBRWhCQSxhQUFPQSxVQUFJQSwyREFHS0Esd0RBRWhCQSxlQUFTQSxVQUFJQSwyREFHR0EsbURBRWhCQSxnQkFBVUEsVUFBSUEsOERBR0VBLG1EQUVoQkEsZ0JBQVVBLFVBQUlBLDhEQUdFQSxtREFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGVBQVNBLFVBQUlBLDJEQUdHQSxtREFFaEJBLGVBQVNBLFVBQUlBLDJEQUdHQSxtREFFaEJBLGVBQVNBLFVBQUlBLDZEQUdHQSxtREFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGFBQU9BLFVBQUlBLDJEQUdLQSx3REFFaEJBLGlCQUFXQSxVQUFJQSwyREFHQ0EsbURBRWhCQSxrQkFBWUEsVUFBSUEsNkRBR0FBLG1EQUVoQkEsZUFBU0EsVUFBSUEsNkRBR0dBLG1EQUVoQkEsYUFBT0EsVUFBSUEsMkRBR0tBLHdEQUVoQkEscUJBQWVBLFVBQUlBLDZEQUdIQSxtREFFaEJBLGVBQVNBLFVBQUlBLDJEQUdHQSx3REFFaEJBLGdCQUFVQSxVQUFJQSwyREFHRUEsbURBRWhCQSxjQUFRQSxVQUFJQSwyREFHSUE7Z0JBR3BCQTtnQkFDQUE7Z0JBQ0FBLGNBQWNBLE1BQUtBO2dCQUNuQkEsZ0JBQVdBLFVBQUlBLDREQUdKQSxJQUFJQSxvRUFBZ0RBLGNBQWNBLHVDQUM5REEsSUFBSUEsNEJBQVFBLHVCQUF1QkEsQ0FBQ0EsaURBQW9DQSxDQUFDQSxhQUFzQkEsZUFBZUEscUJBQXFCQSxDQUFDQSx1REFBcUJBLENBQUNBLEdBQUNBLEdBQUNBLG1DQUFjQSwwQ0FDN0tBO2dCQU1aQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBOztnQkFFSkEsZUFBVUEsVUFBSUEseURBR0hBLElBQUlBLGdHQUE0RUEsY0FBY0EsdUNBQzFGQSxJQUFJQSw4R0FBMEZBLGVBQWVBLHFCQUFxQkEsQ0FBQ0EsdURBQXFCQSxDQUFDQSxHQUFDQSxHQUFDQSxtQ0FBY0EsMENBQ3hLQTtnQkFFaEJBLElBQUdBO29CQUNDQTs7Z0JBQ0pBLGFBQVFBLFVBQUlBLHVEQUdEQSxJQUFJQSxnR0FBNEVBLGNBQWNBLHVDQUMxRkEsSUFBSUEsOEdBQTBGQSxlQUFlQSxxQkFBcUJBLENBQUNBLHVEQUFxQkEsQ0FBQ0EsR0FBQ0EsR0FBQ0EsbUNBQWNBLDBDQUN4S0E7Z0JBS2hCQSxJQUFHQTtvQkFDQ0E7O2dCQUNKQSxZQUFPQSxVQUFJQSxzREFHQUEsSUFBSUEsd0dBQW9GQSxjQUFjQSx1Q0FDbEdBLElBQUlBLCtHQUEyRkEsZUFBZUEscUJBQXFCQSxDQUFDQSx1REFBcUJBLENBQUNBLEdBQUNBLEdBQUNBLG1DQUFjQSwwQ0FDektBO2dCQUtoQkEsSUFBR0E7b0JBQ0NBOzs7Z0JBRUpBLDJDQUFtQkEsdUJBQWtCQSxzQkFBaUJBLG9CQUFlQTs7Z0JBRXJFQTs7Z0JBRUFBLEtBQUlBLFdBQVdBLElBQUlBLGVBQWVBO29CQUU5QkEsZ0JBQVFBLFVBQVVBLElBQUlBLG9FQUFnREEsY0FBY0E7b0JBQ3BGQSxnQkFBUUEsY0FBY0EsSUFBSUEsNEJBQVFBLHVCQUF1QkEsQ0FBQ0EsNEVBQXdDQSxDQUFDQSxHQUFDQSw4Q0FBeUJBLGVBQWVBLHFCQUFxQkEsQ0FBQ0EsdURBQXFCQSxDQUFDQSxHQUFDQSxHQUFDQSxtQ0FBY0E7b0JBQ3hNQSxJQUFHQTt3QkFDQ0EsZ0JBQVFBOzs7b0JBRVpBLGdCQUFnQkEsZ0JBQVFBO29CQUN4QkE7b0JBQ0FBLElBQUdBO3dCQUVDQTt3QkFDQUE7Ozs7Z0JBSVJBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUE7Z0JBQ0FBOztnQkFFQUEsSUFBR0EsQ0FBQ0E7b0JBRUFBLGlDQUE0QkE7OztnQkFHaENBOztnQkFFQUEseUJBQW9CQTs7OztvQ0F4aEJNQTtZQUUxQkEsSUFBR0EsNENBQXNCQTtnQkFDckJBOzs7WUFFSkEsSUFBR0E7Z0JBQ0NBOzs7WUFFSkEsa0VBQW1CQTs7WUFFbkJBOzs7WUFPQUEsUUFBUUE7O1lBRVJBLElBQUdBLG1DQUFXQTtnQkFDVkEsYUFBUUE7O1lBQ1pBLElBQUdBLENBQUNBO2dCQUVBQSxJQUFHQSxtQ0FBV0E7b0JBQ1ZBOzs7OztZQVFSQTs7WUFFQUE7WUFDQUEsYUFBYUE7O1lBRWJBLEtBQUlBLFdBQVdBLElBQUlBLFFBQVFBO2dCQUV2QkEsY0FBY0EsdUJBQVVBOztnQkFFeEJBLElBQUdBO29CQUVDQSxVQUFVQSxrQkFBcUJBOzs7Z0JBR25DQTtnQkFDQUEsSUFBR0Esd0JBQWlCQSxlQUFhQTtvQkFFN0JBLElBQUdBO3dCQUVDQSxJQUFHQSw4Q0FBVUE7NEJBRVRBO2dDQUVJQSxXQUFTQSxrQkFBZ0JBLENBQUNBOzs7O2dDQUkxQkE7Ozs7d0JBSVJBLElBQUdBOzRCQUVDQSxnQkFBZ0JBLGtCQUFnQkE7K0JBRS9CQSxJQUFHQTs0QkFFSkEsZ0JBQWdCQSxrQkFBZ0JBOytCQUUvQkEsSUFBR0E7NEJBRUpBO2dDQUVJQSxnQkFBZ0JBLGtCQUFnQkE7Ozs7Z0NBSWhDQTs7K0JBR0hBLElBQUdBOzRCQUVKQSxnQkFBZ0JBLGtCQUFnQkE7K0JBRS9CQSxJQUFHQTs0QkFFSkEsZ0JBQWdCQSxrQkFBZ0JBOzs7d0JBR3BDQTs7d0JBSUFBLGdCQUFnQkE7OztvQkFLcEJBLGFBQWFBO29CQUNiQSxJQUFHQTt3QkFFQ0EsZ0JBQWdCQSwyQkFBY0E7d0JBQzlCQTsyQkFFQ0EsSUFBR0E7d0JBRUpBLGdCQUFnQkEsOEJBQWlCQTt3QkFDakNBOzJCQUVDQSxJQUFHQTt3QkFFSkEsZ0JBQWdCQSxrQ0FBcUJBO3dCQUNyQ0E7MkJBRUNBLElBQUdBO3dCQUVKQSxnQkFBZ0JBO3dCQUNoQkE7MkJBRUNBLElBQUdBO3dCQUVKQTs0QkFFSUEsZ0JBQWdCQSxlQUFTQSxVQUFVQSx1QkFBUUE7Ozs7NEJBSTNDQTs7d0JBRUpBOzJCQUVDQSxJQUFHQTt3QkFFSkE7NEJBRUlBLGdCQUFnQkEsd0JBQU9BOzs7OzRCQUl2QkE7Ozt3QkFHSkE7MkJBRUNBLElBQUdBO3dCQUVKQSxnQkFBZ0JBLEFBQUNBO3dCQUNqQkE7Ozs7O1lBS1pBLE9BQU9BOzs7WUFLUEEsSUFBR0E7Z0JBQ0NBOztZQUNKQSxjQUFjQSxJQUFJQTs7WUFFbEJBLGFBQWFBOztZQUViQSxLQUFJQSxXQUFXQSxJQUFJQSxRQUFRQTtnQkFFdkJBLGVBQWVBLDRDQUFVQTs7WUFFN0JBLGVBQWVBO1lBQ2ZBO1lBQ0FBLHlCQUFvQkE7O2dDQUdDQTtZQUVyQkE7WUFDQUEsT0FBT0Esd0JBQWlCQSxhQUFXQTs7d0JBR3JCQTtZQUVkQSxJQUFHQTtnQkFFQ0EsdUJBQWtCQSwrQkFBNkJBOztnQkFJL0NBLElBQUdBO29CQUVDQSxRQUFRQSw0QkFBb0NBO29CQUM1Q0EsSUFBR0Esa0JBQWFBO3dCQUVaQSx1QkFBa0JBO3dCQUNsQkEsdUJBQWtCQSwrQkFBNkJBOzt3QkFJL0NBOztvQkFFSkEsd0JBQW1CQTs7O1lBRzNCQTs7b0NBR3lCQTtZQUV6QkEsT0FBT0EsQ0FBQ0EsbUNBQXFCQSxvQ0FBY0Esb0NBQWNBLG9DQUFjQTs7K0JBR25EQTtZQUVwQkEsSUFBR0Esc0JBQWlCQTtnQkFFaEJBLElBQUdBO29CQUVDQSxRQUFRQSw0QkFBb0NBO29CQUM1Q0EsSUFBR0EsQ0FBQ0Esc0JBQWlCQTt3QkFFakJBLElBQUdBLG9EQUF5QkEsQ0FBQ0Esa0JBQWFBOzRCQUV0Q0E7Ozs7O2dCQUtaQSxJQUFHQTtvQkFFQ0EsbUJBQWNBO29CQUNkQTs7O2dCQUdKQSxtQkFBY0E7O2dCQUVkQTs7Z0JBSUFBLElBQUdBO29CQUVDQSxJQUFHQTt3QkFFQ0E7d0JBQ0FBOzt3QkFHQUEsSUFBR0E7NEJBRUNBLFNBQVFBLDRCQUFvQ0E7NEJBQzVDQSxJQUFHQSxDQUFDQSxzQkFBaUJBO2dDQUVqQkE7Ozs0QkFLSkE7Ozs7O2dCQUtaQSxJQUFHQTtvQkFFQ0EsSUFBR0E7d0JBRUNBLFNBQVFBLDRCQUFvQ0E7O3dCQUU1Q0EsSUFBR0EsQ0FBQ0Esc0JBQWlCQTs0QkFFakJBOzRCQUNBQSxtQkFBY0E7NEJBQ2RBOzs0QkFHQUE7Ozs7b0JBTVJBLG1CQUFjQTtvQkFDZEE7O29CQUVBQSxJQUFHQTt3QkFFQ0E7O3dCQUlBQSxtQkFBY0E7OztnQkFHdEJBOzs7Ozs7Ozs7c0JBbUtTQTtZQUVMQSxJQUFHQSxtQ0FBV0E7Z0JBQ1ZBOzs7c0JBc0JLQTtZQUNUQTtZQUNBQTs7c0JBVVNBO1lBQ1RBLGlCQUFZQSxLQUFJQTtZQUFnQkE7WUFDaENBOzs7Ozs7Ozt1Q0NuZ0I4QkE7b0JBRXRDQSxPQUFPQTs7Ozs7Ozs7Ozs7b0JBakJEQSxPQUFPQTs7O29CQUNQQSxpQkFBWUE7Ozs7O29CQXFCWkEsT0FBT0E7OztvQkFDUEEsc0JBQWlCQTs7Ozs7NEJBbkJWQTs7OztxREFBMEJBLHNEQUFxQ0E7O2dCQUU1RUEsWUFBT0EsSUFBSUEsOEJBQVVBO2dCQUNyQkEsdUJBQWtCQTtnQkFDbEJBLFlBQU9BOztnQkFFUEEsWUFBT0E7O2dCQUVQQSxvREFBNEJBLDZDQUFNQTs7Ozs7Ozs7O29DQ2dRTEE7b0JBRTdCQSxJQUFHQSxTQUFRQSxVQUFrQkEsQ0FBQ0EsbUNBQXNCQSxTQUFRQSxjQUFzQkEsU0FBUUE7d0JBRXRGQSxPQUFPQTs7d0JBR1BBLE9BQU9BOzs7Ozs7OzJCQXJSMEJBO3VCQUNXQTtxQkFDRkE7d0JBQ0dBO3dCQUNmQTt5QkFDQ0E7O3dCQTRCWEE7Ozs7Ozs7Ozs7Ozs7O29CQU5sQkEsT0FBT0E7OztvQkFFVEEsc0JBQWlCQTs7Ozs7b0JBZ1RqQkEsSUFBR0E7d0JBRUNBLE9BQU9BOzt3QkFJUEEsSUFBR0EsY0FBUUE7NEJBRVBBLE9BQU9BOzs0QkFJUEEsT0FBT0E7Ozs7O29CQU1mQSxJQUFHQTt3QkFFQ0EsY0FBU0E7O3dCQUlUQSxJQUFHQSxjQUFRQTs0QkFFUEEsUUFBUUE7NEJBQ1JBLHVCQUE4Q0E7OzRCQUk5Q0EscUJBQTRDQTs0QkFDNUNBOzs7O29CQUlSQTs7Ozs7b0JBNkRQQSxPQUFPQTs7O29CQUVaQSxlQUFVQTtvQkFDRUEsSUFBR0E7d0JBRUNBOzt3QkFHQUEsc0NBQXNDQTs7Ozs7O29CQVFqREEsT0FBT0E7OztvQkFHWkEsaUJBQVlBO29CQUNaQSxJQUFHQTt3QkFFRkEsc0NBQXNDQSx5QkFBQ0E7O3dCQUl2Q0E7Ozs7Ozs7Ozs7Ozs7NEJBdlpvQkEsaUJBQTZCQSxpQkFBNkJBOzs7OztxREFBdUNBO2dCQUU5R0EsNEJBQTRCQSxzQkFBQ0Esd0NBQXlDQSwrQkFBVUE7Z0JBQ2hGQTtnQkFDQUEsSUFBR0E7b0JBQ0NBOzs7OEJBbU9TQSxNQUFpQ0E7Ozs7O3VFQUF1Q0EsZ0NBQVNBLE9BQU9BO2dCQUVyR0EsWUFBT0E7O2dCQUVQQSxJQUFHQSxjQUFRQTtvQkFFUEEsK0JBQTBCQTtvQkFDMUJBO29CQUNBQTs7b0JBRUFBO3VCQUNFQSxJQUFHQSxjQUFRQTtvQkFFYkEsVUFBVUE7b0JBQ1ZBLHVCQUFJQSxBQUFLQSxtQ0FBVEE7b0JBQ0FBLHVCQUFJQSxBQUFLQSxxQ0FBVEE7b0JBQ0FBLHVCQUFJQSxBQUFLQSxvQ0FBVEE7b0JBQ0FBLGNBQWNBLElBQUlBOztvQkFFbEJBLEtBQUlBLFdBQVdBLE9BQU9BO3dCQUVsQkEsZUFBZUEsNENBQUlBLEdBQUpBLDJCQUFTQTs7b0JBRTVCQTtvQkFDQUEscUJBQWdCQTs7O2dCQUdwQkE7O2dCQUVBQTs7Ozt3Q0F4U2lDQTtnQkFFakNBLHNCQUFpQkE7Z0JBQ2pCQTs7O2dCQUtBQSxPQUFPQTs7O2dCQW1CUEEsT0FBT0E7O2dDQUdrQkE7Z0JBRXpCQSx5QkFBb0JBOzs7Ozs7Z0JBa0JwQkEsSUFBR0Esd0JBQVdBO29CQUVWQSxPQUFPQTs7b0JBR1BBLE9BQU9BOzs7O2dCQU1YQSxZQUFnQkE7Z0JBQ2hCQSxPQUFPQTs7O2dCQUtQQSxJQUFHQSxjQUFRQTtvQkFFUEEsWUFBZ0JBO29CQUNoQkEsT0FBT0E7O29CQUdQQSxPQUFPQTs7OzhCQUlJQSxPQUFXQTtnQkFFMUJBLElBQUdBLFVBQVVBO29CQUNUQTs7Z0JBQ0pBLG1CQUFtQkE7Ozs7Ozs7OztnQkFXbkJBLElBQUdBLGlDQUEwQkE7b0JBRXpCQSxPQUFPQTs7b0JBR1BBLElBQUdBLGNBQVFBO3dCQUVQQSxZQUFnQkE7d0JBQ2hCQSxJQUFHQTs0QkFFQ0E7NEJBQ0FBLElBQUdBO2dDQUVDQTtnQ0FDQUEsUUFBUUEsQUFBQ0E7Ozs0QkFHYkEsT0FBT0Esc0JBQUNBLG9CQUNKQSxxQkFBY0EsNkJBQVNBLGtHQUF5REE7K0JBRW5GQSxJQUFHQTs0QkFFSkEsT0FBT0EscUJBQWNBLDRCQUFRQSwwQkFBcUJBLHVEQUFpQkE7OzRCQUluRUEsT0FBT0EscUJBQWNBLDRCQUFRQSwwQkFBcUJBOzsyQkFFcERBLElBQUlBLGNBQVFBO3dCQUVkQSxhQUFpQkE7d0JBQ2pCQSxJQUFHQSxzQkFBU0E7NEJBRVJBOzs0QkFHQUEsT0FBT0EscUJBQWNBLDRCQUFRQSwwQkFBcUJBOzs7d0JBS3REQSxPQUFPQSxxQkFBY0EsNEJBQVFBLDBCQUFxQkE7Ozs7O2dCQU8xREEsWUFBWUE7Z0JBQ1pBLElBQUdBLFNBQVNBLFFBQVFBLCtCQUFTQTtvQkFFekJBLElBQUdBLENBQUNBLGlDQUEwQkE7d0JBRTFCQSxhQUFhQTt3QkFDYkEsY0FBaUJBOzt3QkFFakJBLElBQUdBLGlDQUFXQTs0QkFFVkEsWUFBT0E7Ozs7OztnQkFRbkJBLElBQUdBLENBQUNBO29CQUVBQSxZQUFZQTtvQkFDWkEsSUFBR0EsU0FBU0E7d0JBRVJBLElBQUdBLENBQUNBLGlDQUEwQkE7NEJBRTFCQSxJQUFHQSxjQUFRQTtnQ0FDUEE7OzRCQUNKQSxhQUFhQTs7Ozs7Z0JBS3pCQSxzQkFBc0JBO2dCQVN0QkEsdUJBQXVCQTtnQkEwQ3ZCQSx3QkFBd0JBO2dCQUd4QkEsNkJBQTZCQTtnQkFHN0JBLDBCQUEwQkE7Z0JBTTFCQSx5QkFBeUJBO2dCQU16QkEsdUJBQXVCQTtnQkFNdkJBLDhCQUE4QkEsU0FBaUJBLEFBQXdCQTtnQkFJdkVBLDhCQUE4QkEsT0FBZUEsQUFBd0JBOzs7Z0JBa0RyRUEsSUFBSUEsbUNBQVFBO29CQUVSQSxJQUFJQSx5Q0FBaUJBO3dCQUNqQkEsbUJBQWNBOztvQkFDbEJBLGdCQUFXQTs7OztnQkFNZkE7Z0JBQ0FBLGdCQUFXQTs7K0JBK0NEQTtnQkFFbkJBLElBQUdBLENBQUNBLGlDQUEwQkE7b0JBRWpCQSxTQUFTQTtvQkFDVEEsSUFBR0Esa0JBQU1BO3dCQUVMQTs7d0JBR0FBLFlBQU9BLHFCQUFjQSw0QkFBUUEsMEJBQXFCQTs7O29CQUt0REE7Ozs7Z0JBTUpBLElBQUdBLENBQUNBLGlDQUEwQkE7b0JBRTFCQSxTQUFTQTtvQkFDVEEsSUFBR0Esa0JBQU1BO3dCQUVMQTs7d0JBSUFBLE9BQU9BLHFCQUFjQSw0QkFBUUEsMEJBQXFCQTs7O29CQUt0REE7Ozs7Z0JBTUpBLE9BQU9BOzs7Z0JBS1BBLE9BQU9BLGNBQVFBOzs7Z0JBS2ZBLE9BQU9BLGNBQVFBOzs7Ozs7OztzQkE5T1FBO1lBRW5CQSw0QkFBdUJBOztZQUV2QkE7O1lBRUFBLElBQUdBLHVDQUFlQTtnQkFDZEEsaUJBQVlBOzs7c0JBRUlBO1lBRXBCQSxpQkFBWUE7WUFDWkE7O1lBRUFBO1lBQ0FBLGFBQVlBO1lBQ1pBLElBQUdBLFVBQVNBO2dCQUVSQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO29CQUUxQkEsSUFBR0EsY0FBUUE7d0JBRVBBOzRCQUVJQSxZQUFPQTs7Ozs0QkFJUEE7Ozs7b0JBSVJBLElBQUdBLENBQUNBLG1DQUFzQkEsQ0FBQ0EsaUJBQVlBLGNBQVFBO3dCQUUzQ0EsY0FBYUE7OztnQkFHckJBLElBQUdBLGNBQVFBLGNBQ1hBLDBDQUE2QkEsQ0FBQ0E7b0JBQzFCQTs7OztZQUdSQSxJQUFHQSxzQ0FBY0E7Z0JBQ2JBLGdCQUFXQTs7O1lBRWZBLElBQUdBLENBQUNBLDBCQUFxQkEsQ0FBQ0EsaUJBQVlBLGdCQUFXQSxrQ0FBcUJBLENBQUNBLENBQUNBLG9EQUE4QkEsbUJBQWNBO2dCQUVoSEEsSUFBR0EsQ0FBQ0E7b0JBQ0pBLElBQUlBLHNCQUFTQSxnQkFBZ0JBLElBQUlBOzs7O3NCQUdoQkE7WUFDckJBOztzQkFFMEJBO1lBQzFCQTs7c0JBRXVCQTtZQUV2QkE7WUFDQUEsSUFBR0Esc0NBQWNBO2dCQUNiQSxnQkFBV0EsTUFBTUE7OztzQkFFQ0E7WUFFdEJBO1lBQ0FBLElBQUdBLHFDQUFhQTtnQkFDWkEsZUFBVUEsTUFBTUE7OztzQkFFQUE7WUFFcEJBO1lBQ0FBLElBQUdBLG1DQUFXQTtnQkFDVkEsYUFBUUEsTUFBTUE7Ozs7WUFJbEJBOzs7Ozs7Ozs7a0N6QnRRcUNBOzs7Ozs7OztvQkFnRGpEQSxJQUFHQSxvQ0FBOEJBO3dCQUNoQ0EsT0FBT0E7O29CQUNSQSxPQUFPQSxvREFBcUJBOzs7O29CQUc1QkEsS0FBSUEsV0FBV0EsSUFBSUEsa0NBQTZCQTt3QkFFL0NBLElBQUdBLDJFQUFxQkEsbUJBQWdCQTs0QkFDdkNBLGtDQUE2QkE7OztvQkFFL0JBLGtDQUE2QkE7Ozs7OztvQkFRN0JBLElBQUdBLG9DQUE4QkE7d0JBQ2hDQSxPQUFPQTs7b0JBQ1JBLE9BQU9BLG9EQUFxQkE7Ozs7b0JBSTVCQSxLQUFJQSxXQUFXQSxJQUFJQSxrQ0FBNkJBO3dCQUUvQ0EsSUFBR0EsMkVBQXFCQSxlQUFZQTs0QkFDbkNBLGtDQUE2QkE7OztvQkFFL0JBLGtDQUE2QkE7Ozs7O29CQU94QkEsT0FBT0E7OztvQkFHWkEsZUFBVUE7b0JBQ1ZBLHNDQUFzQ0EseUJBQUNBLENBQUNBOzs7OztvQkFPbkNBLE9BQU9BOzs7b0JBR1pBLGlCQUFZQTtvQkFDWkEsc0NBQXNDQSx5QkFBQ0E7Ozs7Ozs2Q0FyR0xBOzs7Ozs7dUVBSVNBO2dCQUU1Q0Esb0JBQWVBOztnQkFFZkEsNkJBQTZCQTs7Z0JBSTdCQSw2QkFBd0JBOzs7O2dDQWFKQTs7O2dCQUVwQkEsRUFBY0E7O2dCQUVkQSxJQUFHQSxhQUFhQTtvQkFFZkEsS0FBSUEsV0FBV0EsSUFBSUEsa0JBQWtCQTt3QkFFcENBLDhCQUF5QkEsdURBRVpBLDZCQUFVQSxHQUFWQSw2QkFDSkEsNkJBQVVBLEdBQVZBOzs7OztnQkFRWEE7Ozs7Ozs7O3NCQXBDOEJBO1lBQzdCQTs7c0JBR3dCQTtZQUV4QkEsSUFBR0EsK0JBQXlCQTtnQkFFM0JBLElBQUdBLGdEQUF3QkE7b0JBQzFCQSwwQkFBcUJBOzs7Z0JBRXRCQSw2QkFBd0JBOztZQUV6QkE7Ozs7Ozs7OztpQ0ZmMENBOzs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFMSEE7Ozs7OztvQ0FDREEsS0FBSUE7Ozs7OztnQkFRM0NBLDRCQUE0QkE7Ozs7OztnQkFTNUJBO2dCQUNBQSxTQUFTQTs7Z0JBRVRBOztnQkFFQUEsS0FBSUEsV0FBV0EsSUFBSUEseUJBQW9CQTtvQkFFdENBLFFBQVFBLDBCQUFhQTtvQkFDckJBLElBQUdBLElBQUlBO3dCQUFLQSxJQUFJQTt3QkFBR0EsS0FBS0E7Ozs7Z0JBR3pCQSxJQUFHQSxPQUFNQTtvQkFDUkE7O2dCQUNEQSxlQUFlQSxrQkFBS0Esa0NBQWFBLDBCQUFhQSxhQUFhQTtnQkFDM0RBLElBQUdBLFdBQVdBO29CQUNiQSxXQUFXQTs7Z0JBQ1pBLFlBQVlBLENBQUNBOztnQkFFYkE7O2dCQUVBQSxLQUFJQSxZQUFXQSxLQUFJQSx5QkFBb0JBO29CQUV0Q0Esd0JBQWtCQSwwQkFBYUE7b0JBQy9CQSxTQUFRQTtvQkFDUkEsV0FBV0EsNkJBQU1BLDBCQUF3QkEsS0FBS0E7O29CQUU5Q0EsZUFBZUE7NkRBQUNBOzRCQUVmQSxJQUFHQTtnQ0FFZ0JBLElBQUdBLGdEQUEyQkE7b0NBRTFCQSwwQkFBd0JBOztnQ0FFNUJBOzs7Ozs7b0JBS3BCQSx5QkFBb0JBOztvQkFFcEJBOztvQkFFQUEsSUFBR0EsMEJBQWFBLGtCQUFpQkEsT0FBS0E7d0JBRXJDQTt3QkFDQUEsVUFBVUE7O3dCQUVWQSxnQkFBZ0JBO3dCQUNoQkEsa0JBQWtCQTs7d0JBRWxCQSx5QkFBb0JBOzt3QkFFcEJBOzs7O2dCQUlGQTs7Z0JBRUFBLDRDQUFxQkEsT0FBT0E7OzRCQUdaQTtnQkFFaEJBLElBQUdBLDRDQUFtQkE7b0JBRXJCQTtvQkFDQUEsMkNBQWtCQTs7Z0JBRW5CQSwyQ0FBa0JBOztnQkFFbEJBLElBQUdBO29CQUVGQTs7Z0JBRURBLElBQUdBLENBQUNBO29CQUVIQSw4Q0FBb0JBLHlCQUFpQkE7b0JBQ3JDQTs7b0JBRUFBO29CQUNBQSw0QkFBdUJBLENBQUNBLGlEQUFzQkE7b0JBQzlDQSwwQkFBMEJBO29CQUMxQkE7Ozs7Z0JBTURBLElBQUdBO29CQUVGQTtvQkFDQUEsMEJBQTBCQTtvQkFDMUJBOzs7Z0JBR0RBLElBQUdBLHlCQUFvQkE7b0JBRXRCQTtvQkFDQUEsd0JBQW1CQTs7Ozs7Ozs7O3NCQTVHU0E7WUFFNUJBOzs7Ozs7Ozs7Ozs2QkN1akJ5QkEsS0FBSUE7Ozs7O2dCQUY5QkEsZ0JBQWdCQTs7Ozs7Ozs7Ozs7OzZCQVVVQSxLQUFJQTs7Ozs7Z0JBRjlCQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBOURjQSxLQUFJQTs7Ozs7Z0JBRmxDQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBa0NhQSxLQUFJQTs7Ozs7Z0JBRmpDQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBa0JZQSxLQUFJQTs7Ozs7Z0JBRmhDQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBTldBLEtBQUlBOzs7OztnQkFGL0JBLGdCQUFnQkE7Ozs7Ozs7Ozs7Ozs2QkE5QlNBLEtBQUlBOzs7OztnQkFGN0JBLGdCQUFnQkE7Ozs7Ozs7Ozs7Ozs2QkFVVUEsS0FBSUE7Ozs7O2dCQUY5QkEsZ0JBQWdCQTs7Ozs7Ozs7Ozs7OzZCQVVXQSxLQUFJQTs7Ozs7Z0JBRi9CQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBa0RXQSxLQUFJQTs7Ozs7Z0JBRi9CQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7NkJBOUVXQSxLQUFJQTs7Ozs7Z0JBRi9CQSxnQkFBZ0JBOzs7Ozs7Ozs7Ozs7O2dDMkI1Y29CQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQXRDckJBLE9BQU9BOzs7b0JBRVRBLElBQUdBLDRCQUFzQkE7d0JBRXJCQSwwQkFBcUJBO3dCQUNyQkE7Ozs7Ozs7MENBVDZCQTs7NEJBa0x0QkE7Ozs7Z0JBRWZBLFlBQU9BLElBQUlBOztnQkFFWEEsVUFBVUE7O2dCQUVWQSx5QkFBb0JBOztnQkFFcEJBLGNBQVNBLElBQUlBO2dCQUNiQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQSxnQ0FBMkJBOzs7Z0JBRzNCQSx3QkFBbUJBLFVBQUlBLDRDQUE2QkE7O2dCQUlwREE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUEsMENBQXFDQTs7Z0JBRXJDQSxlQUFVQSxVQUFJQSwwREFBd0NBLElBQUlBLCtDQUF3QkEsSUFBSUEsb0RBQTZCQTtnQkFDbkhBLGlDQUE0QkE7O2dCQUU1QkEsZ0JBQVdBLFVBQUlBLDBEQUF3Q0EsSUFBSUEsNERBQXFDQSxJQUFJQSxvREFBNkJBO2dCQUNqSUEsa0NBQTZCQTs7Z0JBRTdCQTtnQkFDQUE7O2dCQUVBQTtnQkFDQUE7O2dCQUVBQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBO29CQUNBQTs7b0JBRUFBO29CQUNBQTs7b0JBRUFBLG9CQUFlQSxJQUFJQTtvQkFDbkJBO29CQUNBQTs7b0JBRUFBLHFCQUFnQkEsSUFBSUE7b0JBQ3BCQTtvQkFDQUE7b0JBQ0FBOztvQkFFQUEsb0JBQWVBLFVBQUlBLHlDQUFtQkEsSUFBSUEsOEVBQXVEQSxJQUFJQTs7b0JBSXJHQSxvQkFBZUEsVUFBSUEseUNBQW1CQSxJQUFJQSw2RUFBc0RBLElBQUlBOzs7O2dCQUl4R0Esc0NBQWlDQTs7Z0JBRWpDQSxnQkFBV0EsVUFBSUEsOEVBSUNBOztnQkFnQmhCQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUEsSUFBR0E7b0JBRUNBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTs7b0JBSUFBOzs7O2dCQUlKQSxrQ0FBNkJBOztnQkFFN0JBLDJDQUFtQkEsYUFBUUEsY0FBU0EsdUJBQWtCQSxlQUFVQSxtQkFBY0E7Z0JBQzlFQSxJQUFHQSx5QkFBYUE7b0JBQ1pBLFlBQVlBOzs7Z0JBRWhCQSx5QkFBb0JBOztnQkFFcEJBLHFCQUFnQkE7Ozs7O1lBdFJoQkEsT0FBT0EsdUJBQWFBLG1CQUFjQSxvQkFBZUE7O21DQUd6QkE7WUFFeEJBLHNCQUFzQkE7WUFDdEJBLHVCQUF1QkE7WUFDdkJBLHFCQUFxQkE7O1lBRXJCQSxJQUFHQSxvQkFBbUJBLHFCQUNsQkEscUJBQW9CQSxzQkFDcEJBLG1CQUFrQkEsb0JBQWVBLG9CQUFRQTtnQkFFekNBLG9CQUFlQTtnQkFDZkEscUJBQWdCQTtnQkFDaEJBLG1CQUFjQTs7Z0JBRWRBLElBQUdBLHlDQUFpQkE7b0JBQ2hCQSxtQkFBY0E7OztnQkFFbEJBOzs7OztZQWtCSkEsV0FBV0E7WUFDWEEsbUJBQWNBOztZQUVkQSxVQUFVQTs7WUFFVkEsUUFBT0E7Z0JBRUhBLEtBQUtBO29CQUNEQSw2QkFBd0JBO29CQUV4QkEsZ0JBQXFCQSx1QkFBYUEsK0JBQVdBO29CQUM3Q0EsY0FBbUJBLGlFQUErQkE7b0JBR2xEQSxnQkFBZ0JBLENBQUNBLCtCQUFVQTtvQkFFM0JBLG9CQUFvQkEsRUFBQ0EsNENBQXVCQSw4QkFBdUJBLEFBQUtBO29CQUN4RUE7b0JBQ0FBO29CQUVBQSxtQkFBd0JBLHNCQUNwQkEsWUFBWUEsbUNBQWtCQSxHQUFDQTtvQkFFbkNBLGtCQUFrQkEsRUFBQ0EsMENBQXFCQSw4QkFBdUJBLEFBQUtBO29CQUVwRUEsS0FBSUEsV0FBV0EsUUFBUUE7d0JBRW5CQSxvQkFBbUJBOzt3QkFFbkJBLFVBQVVBLFVBQUlBLHVDQUVIQSwwREFDRUEsSUFBSUEsNEJBQVFBLGFBQWFBLHNCQUFDQSw4QkFBNkJBLGVBQWVBLENBQUNBLHVEQUEwQ0Esc0JBQUNBLENBQUNBLHVDQUE4QkEsQ0FBQ0Esc0VBQXlEQSxjQUFjQSxDQUFDQSwyR0FDdk5BO2lFQUFDQTtnQ0FFVEEsSUFBR0Esc0NBQXFCQTtvQ0FFcEJBLElBQUdBLDRDQUFvQkE7d0NBQ25CQTs7O2dDQUVSQSxxQkFBZ0JBOzs7d0JBR3hCQSxJQUFHQTs0QkFFQ0E7NEJBQ0FBOzt3QkFFSkEsSUFBR0EseUJBQVdBOzRCQUVWQTs7d0JBRUpBOzt3QkFFQUEsSUFBR0EsOEJBQVVBLGNBQWFBLDhCQUFVQTs7K0JBRzlCQSxJQUFJQSw0Q0FBcUJBLDZCQUFzQkEsNENBQXFCQTs0QkFFdEVBOzRCQUNBQTs7NEJBSUFBOzt3QkFFSkEsd0JBQXdCQTs7d0JBRXhCQSxnQkFBZ0JBOzt3QkFFaEJBOzt3QkFFQUEsSUFBR0E7NEJBRUNBOzRCQUNBQTs7O3dCQUdKQSxlQUFlQTt3QkFDZkEsSUFBR0E7NEJBRUNBLGVBQWVBOzs7b0JBSXZCQSxLQUFJQSxXQUFXQSxPQUFPQTt3QkFFbEJBLFlBQVlBLDJCQUFNQSxpREFBS0EsR0FBTEE7d0JBQ2xCQSx1Q0FBa0JBLGFBQWFBLHNCQUFDQTs7d0JBRWhDQSxJQUFHQTs0QkFFQ0E7Ozt3QkFHSkEsZ0JBQWdCQTs7O29CQUlwQkE7Z0JBQ0pBLEtBQUtBO29CQUNEQTtnQkFDSkEsS0FBS0E7b0JBQ0RBO2dCQUNKQTtvQkFDSUE7OztZQUdSQTtZQUNBQSxzQ0FBaUNBOztpQ0FLWEE7WUFFdEJBLElBQUdBO2dCQUVDQSxJQUFHQSw0Q0FBb0JBO29CQUNuQkE7O2dCQUNKQTs7OztZQTZISkEscUJBQWdCQTs7OztZQU1oQkE7O21DQVF3QkE7WUFFeEJBLFdBQVdBOztZQUVYQSxRQUFPQTtnQkFFSEE7Z0JBQ0FBLEtBQUtBO29CQUNEQSxPQUFPQSxnQ0FBZUEsQ0FBQ0Esa0JBQUlBO29CQUMzQkE7Z0JBQ0pBLEtBQUtBO29CQUNEQSxPQUFPQSxnQ0FBZUEsQ0FBQ0EsbUJBQUtBO29CQUM1QkE7Z0JBQ0pBLEtBQUtBO29CQUNEQSxPQUFPQSwrQkFBY0EsQ0FBQ0Esb0JBQU1BO29CQUM1QkE7OztZQUdSQSxxQkFBZ0JBOzs7WUFLaEJBOzs7Ozs7OztzQkE1SXFEQTtZQUNqREE7O3NCQVdnSEE7WUFBU0E7O3NCQUdLQTtZQUFTQTs7c0JBeUMxSEE7WUFFVEEseUJBQW9CQTtZQUNwQkEscUJBQWdCQTs7WUFFaEJBLElBQUdBLHlDQUFpQkE7Z0JBQ2hCQSxtQkFBY0E7OztZQUVsQkEsSUFBR0Esc0NBQXFCQTtnQkFFcEJBLElBQUdBLDRDQUFvQkE7b0JBQ25CQTs7Ozs7Ozs7Ozs7Ozs7Ozs7dUVDL1FxQkE7O2dCQUU5Q0EsZ0JBQVdBLFVBQUlBLDZDQUE4QkEsSUFBSUE7Z0JBQ2pEQSw0QkFBdUJBO2dCQUN2QkEsb0NBQStCQTs7Z0JBa0IvQkEscUNBQWdDQTtnQkFJaENBLDJCQUEyQkE7Ozs7O1lBYTNCQSxJQUFHQTtnQkFDRkE7O1lBQ0RBLFFBQVFBO1lBQ1JBLHlCQUFvQkEsSUFBSUEsNEJBQVFBLEFBQUtBLFFBQVFBLEFBQUtBLEFBQUNBLFFBQVFBOztZQUUzREE7WUFDQUEsdUNBQXVDQTs7WUFFdkNBOztZQUVBQSxxQ0FBZ0NBLENBQUNBLGlEQUFrQ0E7WUFDbkVBOzs7WUFLQUEsSUFBR0E7Z0JBRUZBLGdEQUEyQ0E7Z0JBQzNDQTtnQkFDQUE7Ozs7Ozs7OztzQkF2RCtCQSxXQUFXQTs7WUFFMUNBOztZQUVBQSxJQUFHQSxZQUFZQTtnQkFFZEEseUJBQXlCQSx5REFFWkEsQ0FBQ0EsMENBQXlCQSxXQUFXQSxnREFDekNBLENBQUNBLDBDQUF5QkEsV0FBV0E7O1lBRy9DQSxJQUFHQTtnQkFFRkE7OztzQkFJK0JBO1lBRWhDQTs7c0JBRTJCQTtZQUUzQkE7WUFDQUE7WUFDQUEsSUFBR0E7Z0JBQ0ZBOztnQkFFQUE7Ozs7Ozs7Ozs7Ozs7Ozt5QkM1QjZCQTtpQ0FFY0E7OEJBQ1JBOzhCQUNhQTs7Ozs7K0JBT2RBOzs7Ozs7Ozs7Ozs7OzsyQkF3a0JIQTs7Ozs7O3dCQTZ2QkdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBMXlDOUJBLE9BQU9BOzs7b0JBR1pBLElBQUdBLHVCQUFpQkE7d0JBRW5CQSxxQkFBZ0JBO3dCQUNoQkE7Ozs7OztvQkFXSUEsT0FBT0E7OztvQkFFWkEsSUFBR0EsMkJBQXFCQTt3QkFFdkJBLHlCQUFvQkE7d0JBQ3BCQSxJQUFHQSxDQUFDQTs7NEJBR0hBLEtBQUlBLFdBQVdBLElBQUlBLG9CQUFlQTs7Z0NBR2pDQSxxQkFBUUEsZ0JBQWdCQTtnQ0FDeEJBLHFCQUFRQSxpQkFBaUJBOzs0QkFFMUJBOzt3QkFFREE7Ozs7OztvQkF1Q1dBLE9BQU9BOzs7b0JBSVBBLElBQUlBLFVBQVNBO3dCQUVUQSxXQUFXQTt3QkFDWEEsc0JBQWlCQTs7Ozs7OztvQkFXakNBLE9BQU9BOzs7b0JBSVBBLElBQUdBLFVBQVNBO3dCQUVYQSxXQUFXQTt3QkFDWEEsMEJBQXFCQTt3QkFDckJBO3dCQUNBQSxJQUFHQSwrQ0FBdUJBOzRCQUN6QkEseUJBQW9CQSx5QkFBb0JBOzs7Ozs7O29CQTRCMUNBLE9BQU9BOzs7b0JBSVBBLElBQUdBLFVBQVNBO3dCQUVYQSw2QkFBd0JBOzt3QkFFeEJBOzt3QkFFQUE7Ozs7OztvQkFTREEsT0FBT0E7OztvQkFJUEEsSUFBR0E7d0JBQ0ZBLHlDQUFvQ0E7O3dCQUVwQ0EseUNBQW9DQTs7O29CQUVyQ0EsSUFBR0EsMEJBQW9CQTt3QkFFdEJBLHdCQUFtQkE7d0JBQ25CQTs7Ozs7O29CQVVEQSxPQUFPQTs7O29CQUlQQSxJQUFHQSxVQUFTQTt3QkFFWEEsb0JBQWVBO3dCQUNmQTs7Ozs7O29CQWdIREEsT0FBT0E7OztvQkFJUEEseUJBQW9CQTtvQkFDcEJBLG9CQUFlQSxLQUFJQTtvQkFDbkJBLHlCQUFvQkEsS0FBSUE7O29CQUV4QkEsSUFBR0Esb0JBQWVBO3dCQUVqQkEsMkNBQW1DQTs7O29CQUdwQ0EsbUJBQWNBOztvQkFFZEEsSUFBR0Esb0JBQWVBO3dCQUVqQkEsd0NBQW1DQTs7d0JBRW5DQSxJQUFHQSw0QkFBc0JBOzRCQUV4QkEsU0FBU0E7OzRCQUVUQSxLQUFJQSxXQUFXQSxJQUFJQSw4QkFBeUJBO2dDQUUzQ0EsVUFBVUE7O2dDQUVWQSxVQUFVQSxJQUFJQSw0QkFBZUE7Z0NBQzdCQSxjQUFjQSxpQ0FBb0JBO2dDQUNsQ0EsYUFBYUEsaUNBQW9CQTtnQ0FDakNBOztnQ0FFQUEsUUFBT0EsaUNBQW9CQTtvQ0FFMUJBLEtBQUtBO29DQUNMQSxLQUFLQTtvQ0FDTEEsS0FBS0E7b0NBQ0xBLEtBQUtBO29DQUNMQSxLQUFLQTtvQ0FDTEEsS0FBS0E7b0NBQ0xBLEtBQUtBO3dDQUNKQSw4QkFBOEJBO3dDQUM5QkE7b0NBQ0RBLEtBQUtBO3dDQUNKQSxJQUFHQTs0Q0FFRkEsSUFBR0E7Z0RBQ0ZBOztnREFFQUE7Ozt3Q0FJRkE7b0NBQ0RBLEtBQUtBO3dDQUNKQSxrQkFBa0JBLElBQUlBO3dDQUN0QkE7OztnQ0FHRkEsaUJBQVlBOztnQ0FFWkE7Z0NBQ0FBLHlCQUFrQkEsZ0NBQWdDQTs7OzRCQUduREE7NEJBQ0FBLHlCQUFrQkEsNkJBQTZCQTs7d0JBRWhEQTs7Ozs7OztvQ0FoWXNDQSxLQUFJQTs7Ozs7OztzQ0ErRlZBOzBDQWtCSUE7OzsrQkFvUkRBLEtBQUlBOzhDQWdMTEE7aUNBOHdCYkE7bUNBQ0VBOzs4QkEwQmJBO2tDQUVJQTtrQ0FzQlFBOzs0QkE5d0JIQSxxQkFBaUNBOzs7Ozs7Z0JBRTdDQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBOztvQkFFQUE7O29CQUlBQTtvQkFDQUE7b0JBQ0FBOzs7Z0JBR0pBLDhCQUE4QkE7O2dCQUV2Q0EsMEJBQXFCQTtvQkFFcEJBLGtCQUFrQkE7O29CQUVsQkEsc0NBQWlDQTtvQkFDakNBLElBQUdBO3dCQUNGQTs7O29CQUVEQTs7b0JBRUFBLElBQUdBO3dCQUVGQTt3QkFDQUE7OztvQkFHREE7b0JBQ0FBOztvQkFFQUEsdUJBQXVCQTs7b0JBRXZCQTtvQkFDQUE7b0JBQ0FBOztvQkFFQUEsa0JBQWtCQTtvQkFFbEJBLGdCQUFrQkEscUNBQStCQTtvQkFDakRBOztvQkFFWUEsSUFBR0E7d0JBRWRBLHlCQUF5QkEsMEJBQTBCQSw4QkFBY0E7OztvQkFHdERBO29CQUNBQTs7b0JBRUFBLEtBQUlBLFdBQVdBLElBQUlBLG9CQUFlQTt3QkFFOUJBLElBQUdBLENBQUNBLHFCQUFRQTs0QkFDUkE7Ozt3QkFFbkJBLHFCQUFRQSxhQUFhQTt3QkFDTkEsWUFBWUEsd0JBQW1CQSx5QkFBeUJBLHFCQUFRQTt3QkFDaEVBLGdCQUFnQkE7d0JBQy9CQSxJQUFHQSxDQUFDQSxxQkFBcUJBLGdCQUFnQkE7NEJBRXhDQTs0QkFDQUEsbUJBQW1CQTs0QkFDbkJBLDJCQUEyQkEsZUFBZUE7O3dCQUUzQ0EsSUFBR0EscUJBQXFCQSxDQUFDQSxzQkFBc0JBLGdCQUFnQkE7NEJBRTlEQTs0QkFDQUEsbUJBQW1CQTs0QkFDbkJBOzt3QkFFREEsSUFBR0EsZ0JBQWVBOzRCQUVqQkE7Ozs7b0JBSVVBLFdBQVdBOztvQkFFWEEsa0JBQWtCQTs7b0JBRTlCQSxxQkFBcUJBOztvQkFFVEEsSUFBR0E7d0JBRWRBLEtBQUlBLFNBQVFBLGtCQUFrQkEsS0FBSUEsa0JBQWtCQTs0QkFFbkRBLElBQUdBLE1BQUtBO2dDQUNQQTs7NEJBQ2lCQSxJQUFHQSxDQUFDQSxxQkFBUUE7Z0NBQ1JBOzs7NEJBRXRCQSxXQUFXQSxxQkFBUUE7NEJBQ25CQSxlQUFlQTs0QkFDZkEsZ0JBQWdCQTs7NEJBRWhCQSxVQUFVQSw2QkFBTUEsY0FDZkEsQ0FBQ0Esd0JBQW1CQSxlQUFlQSxrQkFBa0JBLENBQUNBLHdCQUFtQkEseUJBQXlCQSxjQUFjQSxDQUFDQSxPQUFLQSx5QkFDdEhBLHlCQUF5QkEsbUJBQWNBLHFCQUFxQkE7NEJBQzdEQSxJQUFHQSxvQkFBbUJBO2dDQUVBQSxnQkFBZ0JBLDJCQUFJQSxvQkFBbUJBO2dDQUN2Q0E7Z0NBQ3JCQSxnQkFBZ0JBOzs7NEJBR2pCQSxpQkFBWUEsS0FBS0EsSUFBR0E7OzRCQUVGQSx3QkFBd0JBOzs0QkFFMUNBLElBQUdBLGdCQUFlQTtnQ0FFakJBOzs7Ozs7O29CQVFIQSxJQUFHQSxvQkFBZUEsUUFBUUEsbUNBQTZCQTt3QkFFdERBO3dCQUNlQSw0QkFBdUJBO3dCQUN0Q0E7OztvQkFHREEsVUFBVUEsa0JBQWFBOztvQkFFdkJBLHFCQUF1QkE7b0JBQ3ZCQSw2QkFBK0JBO29CQUMvQkEseUJBQTJCQTs7b0JBRTNCQSxhQUFhQSxtQkFBS0EsQ0FBQ0EscUJBQXFCQTtvQkFDeENBLFlBQVlBLGtCQUFLQTtvQkFFakJBLEtBQUlBLFNBQVFBLHNDQUEyQkEsU0FBUUE7d0JBRTlDQTt3QkFDQUEsS0FBSUEsUUFBUUEsT0FBT0EsSUFBSUEsUUFBUUE7NEJBRTlCQSxJQUFHQSxJQUFJQTtnQ0FFTkEsb0JBQW9CQSxzQkFBaUJBO2dDQUNyQ0EsSUFBR0EsK0NBQTBDQSw2QkFBZ0JBLGVBQWFBO29DQUV6RUE7b0NBQ0FBOzs7NEJBR0ZBLElBQUdBLGdCQUFlQTtnQ0FFakJBOzs7d0JBR0ZBLElBQUdBLGdCQUFlQTs0QkFFakJBOzt3QkFFREEsSUFBR0EsQ0FBQ0E7NEJBRUhBLDhCQUF5QkE7Ozs7b0JBS2ZBLGtCQUFrQkE7O29CQUU5QkEsSUFBR0E7d0JBRUZBLGlCQUFTQTt3QkFDVEEsbUJBQVVBOzs7b0JBR1hBLFFBQVVBLENBQUNBLFFBQVFBLENBQUNBLFFBQVFBOzs7b0JBRzVCQSxJQUFHQTt3QkFFRkE7d0JBQ0FBLEtBQUtBOzs7O29CQUlOQSxJQUFHQTt3QkFDRkE7O29CQUNEQSxJQUFHQSxTQUFTQTt3QkFDWEEsU0FBU0E7OztvQkFFVkEsS0FBSUEsU0FBUUEsT0FBT0EsS0FBSUEsUUFBUUE7d0JBRTlCQSxxQkFBb0JBLHNCQUFpQkE7d0JBQ3JDQSxTQUFTQSwyQkFBSUEsc0JBQUNBLDRDQUEyQ0EsQ0FBQ0EsMkJBQXNCQSxtREFBbURBLENBQUNBLG1CQUFpQkE7O3dCQUVySkEsdUNBQWdCQSxHQUFHQSx3QkFBbUJBLGNBQWNBLFVBQVVBO3dCQUM5REEscUJBQXFCQSx3QkFBaUJBOzt3QkFFdENBLGFBQWFBO3dCQUNiQSxJQUFHQTs0QkFFRkEsZ0JBQWdCQTs7O3dCQUdqQkEsS0FBSUEsU0FBUUEsa0JBQWtCQSxLQUFJQSxrQkFBa0JBOzRCQUVuREEsV0FBVUEscUJBQVFBOzRCQUNBQSxJQUFHQSxDQUFDQTtnQ0FDQUE7Ozs0QkFFdEJBLGlCQUFnQkE7NEJBQ2hCQTs0QkFDQUE7NEJBQ0FBLElBQUdBLG9CQUFtQkEsUUFBUUEsQ0FBQ0EsY0FBYUE7Z0NBRTNDQSxPQUFPQSw2QkFBTUEsb0NBQW1DQSxpQkFDaERBLGlCQUFnQkEsd0JBQW1CQSx5QkFBeUJBLFlBQVdBLDBCQUF5QkEsZ0JBQVdBLHNCQUFxQkE7O2dDQUVoSUEsZUFBZUEsYUFDZEEsaUNBQWdDQSxNQUFNQSxNQUFNQSxnQkFBZUEsTUFDM0RBOztnQ0FJREEsT0FBT0EsMEJBQXlCQSxNQUFNQSxnQkFBZUE7Z0NBQ3JEQSxzQ0FBaUJBO2dDQUNqQkEsbUJBQW1CQSxxQ0FBQ0Esd0JBQW1CQSx5QkFBeUJBOztnQ0FFaEVBLGVBQWVBOzs0QkFFaEJBLHVCQUF1QkE7NEJBQ3ZCQSxtQkFBbUJBOzs7d0JBR3BCQSxJQUFHQTs0QkFFRkE7OzRCQUVBQSxpQkFBaUJBOzs7d0JBR0hBLHdCQUF3QkE7O3dCQUV2Q0EsS0FBS0E7O3dCQUVMQSxJQUFHQSxnQkFBZUE7NEJBRWpCQTs7OztvQkFJRkE7O29CQUVZQSxJQUFHQSw0Q0FBb0JBO3dCQUVuQkEsWUFBWUE7d0JBQ1pBLEtBQUlBLFlBQVdBLEtBQUlBLE9BQU9BOzRCQUV0QkEsSUFBR0EsZ0JBQWVBO2dDQUVkQTs7OzRCQUdKQTtnQ0FFSUEsWUFBWUEsd0NBQXFCQSxJQUFyQkE7Z0NBQ1pBLHNCQUFpQkEsT0FBT0EsU0FBZ0JBOzs7OztnQ0FLeENBLElBQUdBLGdEQUFrQ0E7b0NBQ2pDQSw2QkFBZ0JBLGVBQWVBOzs7Ozs7b0JBSy9DQSw0QkFBdUJBO29CQUN2QkEsMEJBQXFCQTs7b0JBRXJCQSxJQUFHQSxnQkFBZUE7d0JBRTdCQTs7O29CQUdEQSxrQkFBYUE7OztnQkFHZEEsMkJBQXNCQTs7Z0JBRXRCQSxrQkFBYUE7Z0JBQ2JBO2dCQUNBQSx5QkFBb0JBOztnQkFFcEJBLHlDQUFvQ0E7Z0JBQ3BDQSx5Q0FBb0NBOztnQkFFcENBLDBDQUFxQ0E7O2dCQUVyQ0EsZ0JBQVdBO2dCQUNYQTs7Z0JBRUFBLG1DQUE4QkE7Z0JBQzlCQSxxQ0FBZ0NBOztnQkFFaENBOztnQkFFQUEseUJBQW9CQTs7Z0JBbUJwQkEsZ0JBQVdBO2dCQUdYQSxrQ0FBNkJBO2dCQUc3QkEsZ0JBQVdBO2dCQUdYQSwwQkFBcUJBO2dCQUlyQkEsa0JBQWFBO2dCQThDYkE7Z0JBQ0FBLHFCQUFnQkE7O2dCQWVoQkEseUJBQW9CQTs7Z0JBZXBCQSxtQkFBY0EsSUFBSUE7O2dCQUVsQkEsdUNBQWtDQSxtQkFDakNBLElBQUlBLGtEQUE4QkEsd0RBTWxDQSxJQUFJQSxtREFBK0JBLHdEQU1uQ0EsSUFBSUEscURBQWlDQSwrREFHckNBLElBQUlBLHlEQUNKQSxJQUFJQSw0REFDSkEsSUFBSUEscURBQ0pBLElBQUlBLGlEQUNKQSxJQUFJQSx1REFDSkEsSUFBSUEsNkNBQ0pBLElBQUlBLGlFQUNKQSxJQUFJQSxxREFDSkEsSUFBSUEsb0RBQ0pBLElBQUlBLHlEQUNKQSxJQUFJQSw4Q0FBMEJBLHlEQUNsQkEsSUFBSUEsZ0RBQTRCQTs7Z0JBRzdDQSw2QkFBd0JBOztnQkFtQnhCQSx1QkFBa0JBO2dCQTJCbEJBLHlCQUFvQkE7Z0JBR3BCQSx3QkFBbUJBO2dCQUduQkEsb0JBQWVBO2dCQW9EZkEseUJBQW9CQTtnQkFzQnBCQSx5QkFBb0JBOztnQkFnQnBCQSwwQkFBcUJBOztnQkFPckJBLHNCQUFpQkE7O2dCQUlqQkEsb0RBQXVCQSwwQkFBcUJBOztnQkFFNUNBLHlCQUFvQkE7O2dCQUtwQkEscUNBQWdDQTtnQkFDaENBLHVCQUFrQkE7Ozs7NENBMXNDY0EsR0FBR0EsT0FBZUE7Z0JBRWxEQSxJQUFHQTtvQkFFRkEsYUFBYUEsNEJBQXlGQSxjQUN6R0EsQUFBdUZBLFVBQUNBLEdBQUdBO21DQUFNQSxLQUFJQSwyREFBcUJBLEdBQUdBO21DQUM3R0EsQUFBa0ZBOztvQkFHL0ZBLHlCQUFvQkEsNEJBQTJGQSxlQUFPQSxBQUFvRkE7O29CQUkxTUEsY0FBYUEsNEJBQXlGQSxjQUN6R0EsQUFBdUZBLFVBQUNBLEdBQUdBO21DQUFNQSxLQUFJQSwyREFBcUJBLEdBQUdBOzZDQUNuR0EsQUFBa0ZBOztvQkFHekdBLHlCQUFvQkEsNEJBQTJGQSxnQkFBT0EsQUFBb0ZBOzs7O2dCQStDM01BLHNCQUE0QkEsS0FBSUE7O2dCQUVoQ0EsS0FBSUEsV0FBV0EsSUFBSUEsaUJBQVlBO29CQUU5QkE7O29CQUVBQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBZUE7d0JBRWpDQSxJQUFHQSxDQUFDQSxxQkFBUUEsb0JBQW9CQTs0QkFFL0JBOzRCQUNBQTs7O29CQUdGQSxJQUFHQTt3QkFFRkEsb0JBQW9CQTs7OztnQkFJdEJBLHlCQUFvQkE7Z0JBQ3BCQTs7O2dCQThDQUEsSUFBR0E7b0JBRUZBLHdFQUE0Q0E7b0JBQzVDQSwyREFBK0JBLDZCQUF3QkEsYUFBYUEsc0JBQUNBO29CQUNyRUEsbUNBQThCQTtvQkFDbEJBLDRDQUF1Q0E7O29CQUluREEsbUNBQThCQTtvQkFDbEJBLDRDQUF1Q0E7O29CQUV2Q0E7Ozs7Z0JBa0VQQSxJQUFLQSxxQkFBZ0JBO29CQUNkQSxrQkFBV0EsMEJBQXFCQTs7O29DQVl2QkEsUUFBdUJBOzs7Z0JBRTdDQSxvQkFBb0JBOztnQkFFWEEsSUFBR0EscUJBQWdCQSxRQUFRQSxrREFBdUJBO29CQUU5Q0Esc0NBQWlDQTtvQkFDakNBLHlCQUFvQkE7OztnQkFHakNBLElBQUdBLFNBQVFBO29CQUVWQSx5QkFBb0JBOztvQkFJcEJBLFlBQWFBLFNBQVFBOztvQkFFckJBLFFBQU9BO3dCQUVOQTt3QkFDQUEsS0FBS0E7NEJBQ0pBLHlDQUE2QkEsQ0FBQ0EsZ0VBQTBDQTs0QkFDeEVBO3dCQUNjQSxLQUFLQTs0QkFDREEsNkRBQTRCQSxDQUFDQSw4REFBd0NBOzRCQUNyRUE7d0JBQ0pBLEtBQUtBOzRCQUNuQkEsOERBQStDQSxDQUFDQSxrRUFBNENBOzRCQUM1RkE7d0JBQ0RBLEtBQUtBOzRCQUNKQSx5Q0FBNkJBLENBQUNBLGdFQUEwQ0E7NEJBQ3hFQTt3QkFDY0EsS0FBS0E7NEJBQ0RBLDBEQUE0QkEsQ0FBQ0EsOERBQXdDQTs0QkFDckVBO3dCQUNKQSxLQUFLQTs0QkFDREEsMkRBQTZCQSxDQUFDQSwrREFBeUNBOzRCQUN2RUE7d0JBQ0pBLEtBQUtBOzRCQUNuQkEsMkRBQTJCQSxDQUFDQSxpRUFBMkNBOzRCQUN2RUE7d0JBQ0RBLEtBQUtBOzRCQUNKQSwyREFBNEJBLENBQUNBLDhEQUF3Q0E7NEJBQ3JFQTt3QkFDREEsS0FBS0E7NEJBQ0pBLDREQUE2QkEsQ0FBQ0EsK0RBQXlDQTs0QkFDdkVBO3dCQUNEQSxLQUFLQTs0QkFDSkEsNERBQThCQSxDQUFDQSxnRUFBMENBOzRCQUN6RUE7d0JBQ0RBLEtBQUtBOzRCQUNKQSw2REFBK0JBLENBQUNBLGlFQUEyQ0E7NEJBQzNFQTs7OztnQkFJSEE7Z0JBQ0dBLG9CQUFlQSxVQUFJQSx3Q0FDTkEsc0JBQ1FBOzs7Z0JBbEVmQSxJQUFJQSxxQkFBZ0JBO29CQUVoQkEsa0JBQVdBLDBCQUFxQkE7Ozs7Z0JBc0U3Q0EsT0FBT0E7OztnQkFLUEEsSUFBR0Esb0JBQWVBO29CQUNqQkE7O2dCQUNEQSxPQUFPQTs7O2dCQUtQQSxtQ0FBOEJBLDhCQUF3QkE7OztnQkFLdERBOztpQ0FrRitCQTtnQkFFL0JBLE9BQU9BLHFCQUFRQTs7Z0RBR3FCQTtnQkFFcENBLE9BQU9BLDhCQUF1QkEscUJBQVFBOztnREFlRkE7Z0JBRXBDQSxPQUFPQSw0QkFBdUJBLDBCQUFxQkE7O2dEQUdmQTtnQkFFcENBLE9BQU9BLHVCQUFnQkEsd0JBQW1CQTs7OENBR05BO2dCQUVwQ0EsT0FBT0EscUJBQWdCQSx3QkFBbUJBOztvREF4QlFBO2dCQUVsREEsS0FBSUEsV0FBV0EsSUFBSUEsb0JBQWVBO29CQUVqQ0EsSUFBR0EsNENBQVFBLHFCQUF1QkE7d0JBRWpDQSxPQUFPQSxxQkFBUUE7OztnQkFHakJBLE9BQU9BOztzREF3Q2lEQSxXQUFrQkE7O2dCQUVqRUEsS0FBSUEsV0FBV0EsSUFBSUEsb0JBQWVBO29CQUU5QkEsSUFBR0EscUJBQVFBLE1BQU1BLFFBQVFBLHFCQUFRQSxhQUFjQSxRQUMzQ0Esc0JBQWVBLHFCQUFRQSxxQkFBcUJBLFdBQVdBO3dCQUN2REEsT0FBT0EscUJBQVFBOzs7O2dCQUd2QkEsT0FBT0E7O3lDQS9CYUEsWUFBZ0JBO2dCQUU3Q0EsT0FBT0EscUJBQWdCQSxZQUFZQTs7dUNBR05BLFlBQWdCQTtnQkFFN0NBLElBQUdBLGVBQWNBO29CQUNoQkEsT0FBT0E7O2dCQUNSQSxPQUFPQSxvQkFBb0JBOzt5Q0FHRUEsWUFBZ0JBO2dCQUU3Q0EsT0FBT0EscUJBQWdCQSxZQUFZQSwwQkFBcUJBOzt5Q0FHM0JBLFlBQWdCQTtnQkFFN0NBLE9BQU9BLHVCQUFnQkEsWUFBWUEscUJBQVFBOzs0Q0FlQ0EsV0FBa0JBOztnQkFFOURBLElBQUdBLG1CQUFjQTtvQkFDaEJBLE9BQU9BOzs7Z0JBRVJBLEtBQUlBLFdBQVdBLElBQUlBLDZCQUF3QkE7b0JBRTFDQSxJQUFHQSxnQ0FBbUJBLE1BQU1BLFFBQzNCQSxzQkFBZUEsZ0NBQW1CQSxjQUFjQSxXQUFXQTt3QkFDM0RBLE9BQU9BLGdDQUFtQkE7Ozs7Z0JBRzVCQSxPQUFPQTs7bUNBR2NBLFNBQWdCQSxXQUFrQkEsT0FBaUJBLGNBQTBCQSxXQUFzQ0EsV0FBeUJBOzs7Ozs7Z0JBRWpLQSxVQUFVQSwwQkFBcUJBO2dCQUMvQkEsSUFBR0EsT0FBT0E7b0JBQ1RBOztnQkFDREEsaUJBQVVBLFNBQVNBLEtBQUtBLE9BQU9BLGNBQWNBLFdBQVdBLFdBQVdBOzttQ0FHOUNBLFNBQWdCQSxRQUFtQkEsT0FBaUJBLGNBQTBCQSxXQUFzQ0EsV0FBeUJBOzs7Ozs7O2dCQUVsS0EsZUFBVUEsVUFBSUEsNEJBQWVBLE1BQU1BLHFCQUFtQkEsNEJBQXlCQSxJQUFJQSwwQ0FBc0JBLFFBQVFBLFdBQVdBLDhCQUEyQkEsMEJBQXVCQTs7aUNBR3pKQTtnQkFFckJBLElBQUdBLFVBQVVBO29CQUNaQTs7O2dCQUVEQSxpQkFBWUE7O2dCQUVaQTs7a0NBR3NCQTs7Z0JBRXRCQSxJQUFHQSxXQUFXQSxRQUFRQTtvQkFDckJBOzs7Z0JBRURBLHNCQUFpQkE7O2dCQUVqQkE7O29DQUd3QkE7Z0JBRXhCQSxvQkFBZUE7O2dCQUVmQTs7d0NBRzJCQTtnQkFFM0JBLElBQUdBLDBCQUFxQkEsUUFBUUE7b0JBQy9CQSxPQUFPQTs7Z0JBQ1JBLE9BQU9BLCtCQUFrQkE7OztnQkFLekJBLElBQUdBO29CQUVGQSxPQUFPQTs7b0JBSVBBO29CQUNBQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBZUE7d0JBRWpDQSxTQUFTQSxxQkFBUUE7O29CQUVsQkEsT0FBT0E7Ozs7Z0JBTUNBLG9CQUFlQSxLQUFJQTtnQkFDbkJBOzs7Z0JBS1RBLGFBQWFBO2dCQUNiQSxJQUFHQTtvQkFFRkE7O29CQUlBQSxZQUFjQSxrQkFBUUE7b0JBQ3RCQSxLQUFJQSxXQUFXQSxJQUFJQSxRQUFRQTt3QkFFMUJBLHlCQUFNQSxHQUFOQSxVQUFXQSxzQkFBaUJBOztvQkFFN0JBLDZDQUF3Q0E7O2dCQUV6Q0E7OztnQkFNQUEsSUFBR0E7b0JBRUZBLElBQUdBLGdDQUEwQkE7d0JBRTVCQSwyQkFBb0JBO3dCQUNwQkEsOEJBQXlCQTs7b0JBRTFCQSw4QkFBeUJBLHlCQUFrQkEsQUFBd0JBLHdEQUUvREEsWUFBWUE7O29CQUloQkE7Ozs7Z0JBT1FBLElBQUdBLHlCQUFvQkE7b0JBRW5CQSxPQUFPQSx3QkFBV0Esc0JBQWlCQTs7b0JBSW5DQSxPQUFPQTs7OztnQkFPWEEsSUFBR0EsZ0JBQVdBLFFBQVFBO29CQUNsQkE7O2dCQUNKQSxhQUFhQTtnQkFDYkEsY0FBY0E7O2dCQUVkQSxLQUFJQSxXQUFXQSxJQUFJQSxRQUFRQTtvQkFFdkJBLElBQUdBLENBQUNBLHFCQUFRQTt3QkFDUkE7OztnQkFFUkEsT0FBT0E7O3NEQTRtQjJCQSxRQUFlQTtnQkFFMURBO2dCQUNBQTs7O2dCQUtBQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUEsSUFBR0EsOEJBQXlCQTs7Ozs7Z0JBUTVCQSxPQUFPQSxrREFBNkNBLHNDQUFpQ0E7OztnQkFLckZBLE9BQU9BLCtDQUEwQ0EsbUNBQThCQSxrQkFBYUE7OztnQkFLNUZBLFlBQVlBO2dCQUNaQSw0QkFBdUJBLHFDQUFDQTtnQkFDeEJBLDhCQUF5QkEscUNBQUNBLENBQUNBO2dCQUMzQkEsSUFBR0EscUJBQWdCQTtvQkFFbEJBLG9CQUFlQTtvQkFDZkEsMEJBQXFCQTs7Z0JBRXRCQSxJQUFHQSwyQkFBc0JBO29CQUV4QkEsMEJBQXFCQTtvQkFDckJBLDRCQUF1QkE7O2dCQUV4QkEsbURBQXVCQTtnQkFDdkJBLHlEQUE2QkE7O29DQUdKQTtnQkFFekJBLElBQUdBLFdBQVdBO29CQUViQTs7b0JBSUFBLE9BQU9BOzs7O2dCQU1SQSxRQUFRQTtnQkFDUkEsVUFBVUEsa0JBQWFBO2dCQUN2QkEsYUFBYUEsTUFBTUE7O2dCQUVuQkEsSUFBR0EsSUFBSUEsbURBQXNDQTtvQkFFNUNBLFVBQVVBLENBQUNBLENBQUNBLHNDQUFpQ0EsbUJBQWNBOzs7Z0JBRzVEQSw2QkFBd0JBO2dCQUN4QkEsSUFBR0Esc0JBQWlCQTtvQkFFbkJBLHFCQUFnQkE7b0JBQ2hCQSwwQkFBcUJBOztnQkFFdEJBLHVEQUEyQkE7OztnQkFLM0JBO2dCQUNBQTs7O2dCQUtBQTtnQkFDQUEsNEJBQXVCQTs7O2dCQUt2QkEsZUFBVUEsS0FBSUE7OztnQkFLZEEsZUFBVUEsS0FBSUE7Z0JBQ2RBLHlCQUFvQkEsS0FBSUE7Z0JBQ3hCQSxvQkFBZUEsS0FBSUE7Z0JBQ25CQSxtQkFBY0E7OztnQkFLZEE7Z0JBQ0FBLHFEQUF3QkEsbUJBQWNBOzs7Z0JBS3RDQTtnQkFDQUE7O21DQWlCd0JBLElBQW9CQSxPQUFXQTtnQkFFdkRBLHFCQUFxQkEsd0JBQWlCQTtnQkFDdENBO2dCQUNBQSxhQUFhQTtnQkFDYkEsaUJBQWlCQTtnQkFDakJBLGdCQUFnQkE7Z0JBQ2hCQSxZQUFZQTtnQkFDWkEsaUJBQWlCQTtnQkFDakJBLGlCQUFpQkE7Z0JBQ2pCQSxrQkFBa0JBOzs7Z0JBUWxCQSxJQUFHQSxvQkFBY0E7b0JBRWhCQTtvQkFDQUEsSUFBR0EsZ0JBQVVBO3dCQUVaQSwyQkFBb0JBO3dCQUNwQkEsY0FBU0E7OztvQkFHVkEsY0FBU0EseUJBQWtCQSxBQUF3QkE7O2dCQUlwREEsa0JBQWFBOzs7Z0JBVWJBLElBQUdBLGtCQUFhQTtvQkFFZkEsMkJBQW9CQTtvQkFDcEJBLGtCQUFhQSx5QkFBa0JBLEFBQXVCQTs7b0JBSXREQTs7Ozs7Ozs7O3NCQW5lb0JBO1lBQ3BCQSxJQUFHQSxxQkFBZUE7Z0JBQ2pCQTs7WUFDREEsUUFBUUE7WUFDUkEsSUFBSUEsc0JBQVFBLDBCQUFxQkEsQ0FBQ0EsTUFBSUE7WUFDdENBLElBQUdBO2dCQUNGQTs7WUFDREEscUJBQVFBLDBCQUFxQkE7O1lBRTdCQSw0QkFBZUE7O1lBRWZBO1lBQ0FBO1lBQ0FBOztZQUVBQSxtQkFBY0E7WUFDZEEsa0JBQWFBOztzQkFHRkE7WUFDWEE7O3NCQUtXQTtZQUNYQTs7c0JBRXFCQTtZQUVyQkEscUJBQWdCQSxTQUFnQkE7O3NCQUVuQkE7WUFDYkEsSUFBR0EsQ0FBQ0E7Z0JBRUhBLElBQUdBLHNCQUFpQkE7b0JBRW5CQSxxQkFBZ0JBOztvQkFJaEJBO29CQUNBQSxVQUFVQTtvQkFDVkEscUJBQWdCQTs7b0JBRWhCQSxJQUFHQTt3QkFFRkEsbUJBQWNBOzs7OztZQUtqQkEsb0JBQW9CQSxTQUFnQkE7O1lBRXBDQSxVQUFVQTtZQUNWQSxJQUFHQTtnQkFFRkEsSUFBR0E7b0JBRUZBLGlDQUE0QkE7b0JBQzVCQTtvQkFDQUE7dUJBRUlBLElBQUdBO29CQUVQQTs7O1lBR0ZBLHlDQUFvQ0E7WUFDcENBLElBQUdBLGtCQUFpQkE7Z0JBRW5CQSx5QkFBb0JBOztnQkFJcEJBOzs7c0JBSWVBO1lBQ2hCQSxVQUFVQSxTQUFnQkE7WUFDMUJBLElBQUdBLDRDQUFvQkE7Z0JBQ3RCQSxzQkFBaUJBOzs7WUFFbEJBLElBQUdBO2dCQUVGQSxVQUFVQSx3QkFBV0E7O2dCQUVyQkEsV0FBV0EsSUFBSUEsNkJBQWdCQSxLQUFLQTtnQkFDcENBOzs7O3NCQUttQkE7WUFDcEJBLFVBQVVBOztZQUVWQSxJQUFHQSw0QkFBdUJBLGVBQWVBLENBQUNBLHNCQUFxQkE7OztnQkFJOURBOzs7OztzQkFXa0NBO1lBQ25CQSxJQUFHQSxxQkFBZ0JBO2dCQUVmQSxrQkFBV0EscUJBQVFBLHFCQUFnQkE7OztzQkFHbkJBO1lBQ3BCQSxJQUFHQSxxQkFBZ0JBO2dCQUVmQSxrQkFBV0EscUJBQVFBLHFCQUFnQkE7Ozt1QkFHakJBO1lBQ3RCQTs7dUJBWWVBO1lBQVNBOzt1QkFDS0E7WUFBU0E7O3VCQUc5QkE7WUFDWkEsSUFBR0E7Z0JBRUNBO2dCQUNBQTs7Z0JBRUFBLG1CQUFjQTs7Z0JBR2RBLElBQUdBLG9CQUFlQTtvQkFFZEEsc0JBQWlCQSwyQ0FBOEJBO29CQUMvQ0E7b0JBQ0FBOzs7Ozt1QkFNRkE7WUFDbEJBLElBQUdBO2dCQUNGQTs7O1lBRURBLFdBQVdBLHFCQUFRQSxTQUFnQkE7O1lBRW5DQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBZUE7Z0JBRWpDQSxJQUFHQSw2Q0FBUUEsSUFBTUE7b0JBRWhCQSxxQkFBUUEsZ0JBQWdCQTs7O1lBRzFCQSxRQUFPQTtnQkFFTkE7Z0JBQ0FBLEtBQUtBO29CQUNKQSxrQkFBV0EsTUFBTUE7b0JBQ2pCQTtnQkFDREEsS0FBS0E7b0JBQ0pBLGtCQUFXQSxNQUFNQTtvQkFDakJBO2dCQUNEQSxLQUFLQTtvQkFDSkEsa0JBQVdBLE1BQU1BO29CQUNqQkE7Ozt1QkFHa0JBO1lBQ3BCQSw4Q0FBNkRBOzt1QkFFMUNBO1lBQ25CQTs7dUJBRWVBO1lBQ2ZBLElBQUdBLGFBQWFBLFFBQVFBLENBQUNBLENBQUNBO2dCQUN6QkE7OztZQUVEQSxhQUFhQTs7WUFFYkEsSUFBR0EsOENBQXdCQTtnQkFDMUJBOzs7WUFFREEsaUJBQWlCQSxTQUFnQkE7WUFDakNBLG9CQUFvQkE7WUFDcEJBLElBQUdBLGtCQUFpQkE7Z0JBQ25CQTs7O1lBRURBLElBQUdBO2dCQUNGQTs7O1lBRURBLFFBQVFBO1lBQ1JBLFNBQUtBO1lBQ0xBLFFBQVFBOztZQUVSQSxJQUFHQSxlQUFjQSw2QkFBcUJBLElBQUlBO2dCQUN6Q0E7O1lBQ0RBLElBQUdBLGVBQWNBLDZCQUFxQkEsSUFBSUE7Z0JBQ3pDQTs7O1lBRURBLElBQUdBLElBQUlBO2dCQUVOQSxpQkFBWUE7O2dCQUlaQSxpQkFBWUE7OztZQUdiQSxJQUFHQSxzQkFBaUJBO2dCQUNuQkE7O1lBQ0RBLFVBQVVBLHFCQUFRQTtZQUNsQkEsSUFBR0EsbUJBQWFBO2dCQUVmQSxvQkFBZUE7Z0JBQ2ZBLGlCQUFZQTs7Z0JBSVpBLFdBQVdBLHFCQUFRQTtnQkFDbkJBLG9CQUFlQTtnQkFDZkEsb0JBQWVBLHFCQUFnQkEsT0FBT0E7OztZQUd2Q0E7O3VCQUVvQkE7WUFDcEJBLFFBQVFBO1lBQ1JBLGFBQWFBO1lBQ2JBLFNBQUtBO1lBQ0xBLG1CQUFjQTs7WUFFZEEscUJBQWdCQSxTQUFnQkE7O1lBRWhDQSxJQUFHQSxLQUFLQTtnQkFFUEEsbUJBQWNBLFNBQWdCQTtnQkFDOUJBLGtCQUFhQTtnQkFDYkEsNEJBQWVBOztnQkFFZkE7O2dCQUlBQSxrQkFBYUE7Z0JBQ2JBLG1CQUFjQTs7O3VCQUdLQTtZQUNwQkEsSUFBR0EscUJBQWVBO2dCQUVqQkEsUUFBUUE7Z0JBQ1JBLGFBQWFBO2dCQUNiQSxTQUFLQTs7Z0JBRUxBLElBQUdBLEtBQUtBO29CQUVQQSw0QkFBZUE7b0JBQ2ZBOztnQkFFREEsNEJBQWVBOzs7dUJBSUtBO1lBQ3JCQSxJQUFHQSxxQkFBZUE7Z0JBRWpCQSw0QkFBZUE7Ozt1QkFJQ0E7WUFDakJBLDJDQUEwREEsZUFBZUEsd0JBQVdBLFNBQWdCQTs7dUJBS2hGQTtZQUVwQkEscUJBQVFBLFNBQWdCQSw2Q0FBNkNBOzs7bUJBaHNDK0JBOzs7bUJBRzJHQTs7O1lBcWpCOU1BOzs7WUE2eUJBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0NDcjRDa0NBLFVBQW1CQSxjQUFrQkE7Z0JBRXpFQSxZQUFZQSwyQkFBeUJBLGNBQWNBOztnQkFFMUNBLFdBQVdBO2dCQUNwQkEsWUFBWUEsK0JBQWtCQTtnQkFDOUJBO2dCQUNBQSxzQ0FBaUJBO2dCQUNSQTtnQkFDQUEsaUJBQWlCQTs7Z0JBRWpCQSxPQUFPQTs7Ozs7Ozs7Ozs7Z0NDUG9CQSxVQUFtQkEsY0FBa0JBO2dCQUV6RUEsVUFBVUEsbUNBQUNBLGdEQUF5QkEsY0FBY0E7Z0JBQ2xEQSxhQUFhQTs7Z0JBRWJBLHFDQUFnQkEsS0FBS0EsQ0FBQ0E7O2dCQUV0QkEsT0FBT0E7Ozs7Ozs7Ozs7Ozs7OztvQkNGUUEsT0FBT0E7OztvQkFFVEEsSUFBR0EsZ0JBQVVBO3dCQUVUQSxjQUFTQTt3QkFDVEE7Ozs7OztvQkFpQ0ZBLE9BQU9BOzs7O29CQUdUQSxJQUFHQSxvQ0FBVUE7d0JBQ1RBOztvQkFDSkEsY0FBU0E7b0JBQ1RBOzs7Ozs7OztnQkFoQ0pBLHdCQUFtQkEsSUFBSUE7Z0JBQ3ZCQTtnQkFDQUE7Z0JBQ0FBLGlEQUE0Q0E7O2dCQUU1Q0EseUJBQW9CQTs7Ozs7Z0JBT3BCQSxJQUFHQSxpQ0FBMEJBO29CQUV6QkE7b0JBQ0FBLGlEQUE0Q0E7O29CQUk1Q0EsaURBQTRDQTs7Z0JBRWhEQSxxQ0FBY0EsYUFBUUE7Ozs7Ozs7Ozs7OzRCbEJzZk5BLFFBQWNBOzs7OztnQkFFOUJBLGNBQVNBO2dCQUNUQSxhQUFRQTs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JtQjlnQlhBLE9BQU9BOzs7b0JBRVpBLElBQUdBO3dCQUNGQTs7b0JBQ0RBLElBQUdBLFFBQVFBO3dCQUNWQSxnQkFBV0E7O29CQUNaQSxlQUFVQTtvQkFDVkEsSUFBR0EsQ0FBQ0E7d0JBQ0hBOzs7Ozs7b0JBTUlBLE9BQU9BOzs7b0JBRVpBLElBQUdBO3dCQUNGQTs7d0JBQ0lBLElBQUdBLFFBQVFBOzRCQUNmQSxRQUFRQTs7O29CQUNUQSxnQkFBV0E7b0JBQ1hBLElBQUdBLENBQUNBO3dCQUNIQTs7Ozs7Ozs7Ozs7OztnQkFNRkEsK0JBQTBCQTs7Ozs7Z0JBakMxQkEsaUNBQVlBOzs7Z0JBc0NaQTs7Z0JBRUFBLHlCQUFvQkE7O2dCQUVwQkE7OztnQkFLQUEsSUFBR0Esc0JBQWlCQSxnQ0FBMkJBO29CQUM5Q0E7O2dCQUNEQSxJQUFHQSxzQkFBZ0JBO29CQUNsQkE7O29CQUdBQSxhQUFnQkE7b0JBQ2hCQSwyQ0FBc0NBLDhCQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozt3QkNkVEE7c0JBQ1JBOzs7Ozs7b0JBbEQvQkEsT0FBT0E7OztvQkFFUEEsSUFBR0Esb0NBQVNBO3dCQUVYQSxhQUFRQTt3QkFDUkE7Ozs7OztvQkFTREEsT0FBT0E7OztvQkFJUEEsSUFBR0EsdUNBQVlBO3dCQUVkQSxnQkFBV0E7d0JBQ1hBOzs7Ozs7b0JBU0RBLE9BQU9BOzs7b0JBSVBBLElBQUdBLHVDQUFZQTt3QkFFZEEsZ0JBQVdBO3dCQUNYQTs7Ozs7O29CQTJDREEsT0FBT0E7OztvQkFFUEEsZUFBVUE7b0JBQ1ZBLGdCQUFXQTs7Ozs7Ozs7Ozs7Ozs0QkFJT0EsU0FBcUJBOzs7Ozt1REFBcUNBO2dCQUU3RUEsZUFBVUE7Z0JBQ1ZBLHNCQUFpQkE7Ozs7a0NBdENLQTtnQkFFdEJBLGlCQUFZQTtnQkFDWkEsSUFBR0E7b0JBRUZBLElBQUdBLGlCQUFZQTt3QkFFZEE7O29CQUVEQSxJQUFHQSxtQkFBY0E7d0JBRWhCQTs7O29CQUtEQSxJQUFHQSxpQkFBWUE7d0JBRWRBOztvQkFFREEsSUFBR0EsbUJBQWNBO3dCQUVoQkE7Ozs7O2dCQXVCRkE7O2dCQUVBQSx1QkFBa0JBOztnQkFXVEE7Z0JBQ0FBOztnQkFFQUEsZ0JBQVdBOzs7Z0JBS1hBLElBQUdBLG1CQUFjQTtvQkFFYkE7b0JBQ0FBLGtCQUFhQTs7Z0JBRTFCQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO29CQUU3QkEsa0JBQWFBLDJCQUFJQTs7b0JBRWpCQSw0QkFBdUJBOztvQkFFdkJBLHlCQUFvQkE7Ozs7Z0JBTXJCQSxJQUFHQSxpQkFBWUE7b0JBRWRBLElBQUdBLENBQUNBLGlDQUEwQkE7d0JBRTdCQSxnQkFBV0EsMkJBQUlBO3dCQUNmQSxpQ0FBNEJBLG9DQUFlQTsyQkFFdkNBLElBQUdBLENBQUNBLGlDQUEwQkE7d0JBRWxDQSxnQkFBV0EsMkJBQUlBO3dCQUNmQSxpQ0FBNEJBLHVDQUFrQkE7O29CQUVuQ0EsSUFBR0EsaUJBQVlBO3dCQUVYQSx5QkFBb0JBOzs7b0JBS3BDQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO3dCQUU3QkEsaUNBQTRCQSxvQ0FBZUE7MkJBRXZDQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO3dCQUVsQ0EsaUNBQTRCQSx1Q0FBa0JBOzs7O2dCQUloREEsSUFBR0EsaUJBQVlBO29CQUVkQTs7b0JBRUFBLElBQUdBLG1CQUFjQSxRQUFRQTt3QkFDeEJBOzs7b0JBSURBLElBQUdBLG1CQUFjQSxRQUFRQTt3QkFDeEJBOzs7Ozs7Ozs7O3NCQTNFaUJBO1lBQ05BLGlCQUFrQkE7O1lBRWxCQSxJQUFHQSxnQkFBV0EsdUNBQWVBO2dCQUN4Q0EsaUJBQVlBOztZQUNEQSxJQUFHQSxjQUFjQSwwQ0FBa0JBO2dCQUMvQkEsb0JBQWVBOzs7WUFFbkJBOzs7Ozs7Ozs7NkJDekdnQ0E7a0NBQ2NBOzs7Ozs7O29CQTBCMURBLE9BQU9BOzs7b0JBRVBBLElBQUdBO3dCQUNGQTs7b0JBQ1dBLElBQUlBLHNCQUFpQkE7d0JBQ2pCQSxxQkFBZ0JBOzs7b0JBRXBCQSxJQUFJQSx1QkFBaUJBO3dCQUVqQkEscUJBQWdCQTt3QkFDaEJBLElBQUdBLGdEQUF3QkE7NEJBQ3ZCQSwwQkFBcUJBLG9CQUFlQSx5QkFBWUE7OztvQkFFcEVBLHNCQUFpQkE7Ozs7Ozs7O3FDQWZTQTttQ0FzSWdDQSxLQUFJQTs7NEJBdEozQ0E7Ozs7dURBQTBDQSxzQ0FBa0JBLENBQUNBLFNBQVFBO2dCQUV6RkEsWUFBT0E7O2dCQUVFQSw2QkFBd0JBOzs7O3NDQU1QQTs7Z0JBRTFCQSxJQUFHQSxTQUFTQTtvQkFDWEEsMEJBQXFCQTs7OztnQkF3QmJBLElBQUdBOzs7O3dDQU1nQkE7Z0JBRTVCQSxJQUFHQSxvQkFBZUEsUUFBUUE7b0JBRXpCQSxLQUFJQSxXQUFXQSxJQUFJQSx3QkFBbUJBO3dCQUVyQ0EsSUFBR0EseUJBQVlBLG1CQUFtQkE7NEJBRWpDQSx5QkFBWUE7NEJBQ1pBLHlCQUFZQTs7NEJBRVpBLElBQUdBLE1BQUtBO2dDQUVQQSx5QkFBWUE7Z0NBQ1pBLHlCQUFZQSw4QkFBOEJBOztnQ0FHMUNBLHlCQUFZQTtnQ0FDWkEseUJBQVlBLDhCQUE4QkE7Ozs7Ozs7Z0JBUzlDQTtnQkFDQUEsSUFBR0EsY0FBUUE7b0JBRVZBLElBQUdBLHdCQUFtQkE7d0JBQ3JCQTs7b0JBQ0RBLHVCQUFrQkE7b0JBQ2xCQSxtQkFBbUJBO29CQUNuQkEsZ0NBQWdDQSx1Q0FBK0JBO29CQUMvREE7O29CQUVZQSxpQ0FBNEJBOztvQkFFeENBLHlCQUFvQkE7OztnQkFHckJBLElBQUdBLG9CQUFlQSxRQUFRQTtvQkFFekJBO29CQUNBQSxLQUFJQSxXQUFXQSxJQUFJQSx3QkFBbUJBO3dCQUVyQ0EsSUFBR0Esc0JBQWlCQSwwREFBWUE7NEJBRS9CQSxvREFBWUE7NEJBQ1pBLG9EQUFZQTs7d0JBRWJBLHlCQUFZQTs7d0JBRVpBLElBQUdBLGNBQVFBOzRCQUVWQSxJQUFHQSxDQUFDQSxnREFBWUE7Z0NBQ2ZBLHlCQUFZQTs7OzRCQUdiQSxJQUFHQSxnREFBWUE7Z0NBQ2RBLHlCQUFZQTs7Ozt3QkFHZEEsa0JBQVlBOzt3QkFFWkEsSUFBR0EsTUFBS0E7NEJBRVBBLHlCQUFZQSxrQkFBa0JBLDJCQUFJQSxpRUFBNkNBLENBQUNBLGNBQVFBOzRCQUN4RkEseUJBQVlBLDhCQUE4QkE7OzRCQUcxQ0EseUJBQVlBLGtCQUFrQkEsMkJBQUlBLGlFQUE2Q0EsQ0FBQ0EsY0FBUUE7NEJBQ3hGQSx5QkFBWUEsOEJBQThCQTs7O3dCQUczQ0EseUJBQVlBLDhCQUE4QkE7aUVBQUNBO2dDQUUxQ0EscUJBQWdCQTs7O3dCQUVqQkEseUJBQVlBLCtCQUErQkE7aUVBQUNBO2dDQUUzQ0EscUJBQWdCQTs7Ozt3QkFHakJBLHlCQUFZQSw0QkFBNEJBLHlCQUFZQTs7d0JBRXBEQTs7d0JBRUFBLElBQUdBLENBQUNBLDRCQUFxQkEseUJBQVlBOzRCQUVwQ0EscUJBQVdBLGtCQUFLQSxrQ0FBYUEseUJBQVlBLFlBQVlBOzs7d0JBR3REQSx5QkFBWUEsNkJBQTZCQTt3QkFDekNBLHlCQUFZQSw4QkFBOEJBOzt3QkFFMUNBLHlCQUFvQkEseUJBQVlBO3dCQUNoQ0EseUJBQW9CQSwwREFBWUE7O3dCQUVoQ0EsaUJBQVNBOzs7Z0JBR0ZBLHFCQUFnQkE7Ozs7Ozs7O3NCQTlJU0E7WUFDckJBO1lBQ0FBOzs7Ozs7Ozt3QkNmc0JBO29CQXFGSEE7Ozs7Ozs7b0JBL0UvQkEsT0FBT0E7OztvQkFJUEEsZUFBVUE7b0JBQ1ZBLGdCQUFXQTs7Ozs7Ozs7NEJBbUNNQTs7Ozs7Z0JBRWxCQSxlQUFVQTtnQkFDVkEsZUFBVUEsS0FBSUE7OzhCQUdJQSxVQUFpQkE7Ozs7O2dCQUVuQ0EsZUFBVUE7Z0JBQ1ZBLGVBQVVBLEtBQUlBO2dCQUNkQSxJQUFHQSxXQUFVQTtvQkFDWkEsc0JBQWlCQTs7Ozs7a0NBMUNJQTtnQkFFdEJBLElBQUdBO29CQUVGQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBZUE7d0JBRWpDQSxJQUFHQSxDQUFDQTs0QkFDSEEscUJBQVFBLGNBQWNBOzs0QkFHdEJBLHFCQUFRQSxjQUFjQSxxQkFBUUE7Ozs7Z0JBSWpDQSxpQkFBWUE7Z0JBQ1pBLElBQUdBO29CQUVGQSxJQUFHQSxtQkFBY0E7d0JBRWhCQTs7O29CQUtEQSxJQUFHQSxtQkFBY0E7d0JBRWhCQTs7OzswQ0FtQnVDQTtnQkFFekNBLGNBQWNBO2dCQUNkQSxJQUFHQTtvQkFFRkEsdUJBQXVCQTs7O2dCQUd4QkEsT0FBT0E7Ozs7Z0JBc0JQQSxTQUFnQkE7O2dCQUVoQkEsSUFBR0EsZUFBVUE7b0JBRVpBLGNBQVNBLEtBQUlBO29CQUNiQSxLQUFJQSxXQUFXQSxJQUFJQSxvQkFBZUE7d0JBRWpDQSxJQUFHQSxNQUFNQTs0QkFFUkEsS0FBS0EsSUFBSUE7NEJBQ1RBLGlCQUFpQkEscUJBQVFBOzRCQUN6QkEsYUFBYUE7OzRCQUliQSxJQUFHQSxlQUFjQSxxQkFBUUEscUJBQXFCQSxxQkFBUUEsaUJBQWlCQSxDQUFDQSxxQkFBUUEscUJBQXFCQSxDQUFDQSxrQkFBa0JBLFFBQVFBLG1CQUFtQkEsUUFBUUEsa0JBQWtCQTtnQ0FFNUtBLGdCQUFXQTs7Z0NBRVhBLEtBQUtBLElBQUlBO2dDQUNUQSxpQkFBaUJBLHFCQUFRQTtnQ0FDekJBLGFBQWFBLHFCQUFRQTtnQ0FDckJBLGdCQUFnQkEscUJBQVFBOztnQ0FJeEJBLElBQUdBLG1CQUFtQkE7b0NBRXJCQSxrQkFBa0JBLHFCQUFRQTs7b0NBSTFCQSxpQkFBaUJBLHFCQUFRQTs7Ozs7O29CQU03QkEsSUFBR0EsTUFBTUE7d0JBRVJBLGdCQUFXQTt3QkFDWEEsS0FBS0E7Ozs7O2dCQU9QQTs7Z0JBRUFBOztnQkFFQUE7O2dCQUVBQTs7Z0JBRUFBLEtBQUlBLFdBQVdBLElBQUlBLG1CQUFjQTtvQkFFaENBLFNBQVNBLG9CQUFPQTs7b0JBRWhCQSxJQUFHQTt3QkFFRkE7d0JBQ0FBLFdBQVdBO3dCQUNYQSxrQkFBa0JBOzt3QkFFbEJBLHlCQUFvQkE7OztvQkFHckJBOztvQkFFQUEsSUFBR0E7d0JBRUZBOzt3QkFFQUEsSUFBR0Esa0JBQWtCQTs0QkFFcEJBLElBQUlBLG1CQUFtQkE7Z0NBRXRCQSxXQUFXQSxTQUFTQSxzQkFBS0Esa0NBQWFBLHdCQUF3QkE7O2dDQUU5REE7O2dDQUVBQSxvQ0FBb0NBO2dDQUNwQ0EscUNBQXFDQTs7Z0NBRXJDQTs7Z0NBRUFBLHlCQUFvQkE7OztnQ0FLcEJBLFdBQVdBLFNBQVNBLGFBQVNBLGtCQUFLQSxrQ0FBYUEsd0JBQXdCQSxxQ0FDdEVBLGtCQUFLQSxrQ0FBYUEseUJBQXlCQTs7Z0NBRTVDQTtnQ0FDQUE7O2dDQUVBQSxvQ0FBb0NBO2dDQUNwQ0EscUNBQXFDQTs7Z0NBRXJDQSxtQ0FBbUNBLENBQUNBOztnQ0FFcENBLHFDQUFxQ0E7Z0NBQ3JDQSxzQ0FBc0NBOztnQ0FFdENBO2dDQUNBQTs7Z0NBRUFBLHlCQUFvQkE7Z0NBQ3BCQSx5QkFBb0JBOzs7OzRCQUtyQkEsV0FBV0EsU0FDV0EsYUFBU0EsU0FBVUEsa0JBQUtBLGtDQUFhQSx3QkFBd0JBLHFDQUNqRkEsa0JBQUtBLGtDQUFhQSx5QkFBeUJBLHNDQUMzQ0Esa0JBQUtBLGtDQUFhQSx3QkFBd0JBOzs0QkFFNUNBOzRCQUNBQTs0QkFDQUE7OzRCQUVBQSxvQ0FBb0NBOzRCQUNwQ0EscUNBQXFDQTs0QkFDckNBLG9DQUFvQ0E7OzRCQUVwQ0EscUNBQXFDQTs0QkFDckNBLHNDQUFzQ0E7NEJBQ3RDQSxxQ0FBcUNBOzs0QkFFckNBOzRCQUNBQTs0QkFDQUE7Ozs0QkFHQUEseUJBQW9CQTs0QkFDcEJBLHlCQUFvQkE7NEJBQ3BCQSx5QkFBb0JBOzs7d0JBR3JCQSxpQkFBU0E7O3dCQUlUQTs7d0JBRUFBLG9DQUFvQ0E7d0JBQ3BDQTt3QkFDQUEsSUFBR0E7NEJBRUZBLGNBQWNBOzRCQUNkQSxjQUFjQSxJQUFJQTs7NEJBRWxCQSxhQUFhQTs7NEJBRWJBLEtBQUlBLFdBQVdBLElBQUlBLGdCQUFnQkE7Z0NBRWxDQSxJQUFHQSxzQkFBaUJBO29DQUVuQkEsVUFBVUEsbUJBQUtBLGtDQUFhQSxvQkFBb0JBO29DQUNoREE7O2dDQUVEQSxJQUFHQTtvQ0FFRkEsZUFBZUEsMEJBQU1BLDJCQUFRQSxHQUFSQTs7b0NBSXJCQSxlQUFlQSwyQkFBUUEsR0FBUkE7Ozs0QkFHakJBLElBQUdBO2dDQUVGQSxVQUFVQSxtQkFBS0Esa0NBQWFBLG9CQUFvQkE7Ozs0QkFLakRBLFVBQVVBLG1CQUFLQSxrQ0FBYUEsd0JBQXdCQTs7O3dCQUdyREEsSUFBR0E7NEJBRUZBOzs7d0JBR0RBLHFDQUFxQ0E7O3dCQUVyQ0EsaUJBQVNBOzt3QkFFVEEseUJBQW9CQTs7OztnQkFJdEJBLGVBQWVBLG1CQUFLQSxrQ0FBYUEsY0FBU0E7O2dCQUUxQ0EsSUFBR0EsUUFBUUE7b0JBQ1ZBLFFBQVFBOzs7Z0JBRVRBOztnQkFFQUEsU0FBU0E7Z0JBQ1RBLGdCQUFnQkE7O2dCQUVoQkEseUJBQW9CQTs7Z0JBRXBCQSwyQkFBc0JBOztnQkFFdEJBLElBQUdBLENBQUNBLGlDQUEwQkE7b0JBRTdCQSxrQkFBYUE7O29CQUViQSw0QkFBdUJBO29CQUN2QkEseUJBQW9CQTs7O2dCQUdyQkEsZ0JBQVdBOzs7Ozs7OzswQkN2VHlCQTs7Ozs7Ozs7b0NBNkJ5QkEsS0FBSUE7OzRCQTNCaERBOzs7OztnQkFFakJBLGVBQVVBOzs7O3VDQUdpQkE7O2dCQUUzQkEsSUFBR0EsU0FBU0E7b0JBQ1hBLDJCQUFzQkE7Ozs7Z0JBS3ZCQTtnQkFDQUEsSUFBR0EscUJBQWdCQSxRQUFRQTtvQkFDMUJBOztnQkFDREE7Z0JBQ0FBLEtBQUlBLFdBQVdBLElBQUlBLHlCQUFvQkE7b0JBRXRDQSwwQkFBYUE7b0JBQ2JBLDBCQUFhQSx3QkFBd0JBO29CQUNyQ0EsaUJBQVNBLFVBQWdCQSwwQkFBYUE7b0JBQ3RDQSx5QkFBb0JBLDJEQUFhQTs7Ozs7Ozs7Ozt3QkMzQkpBOzs7Ozs7O29CQTREeEJBLE9BQU9BOzs7b0JBR1pBLHlCQUFnREE7Ozs7O29CQU8zQ0EsT0FBT0E7OztvQkFHWkEsZUFBVUE7b0JBQ0VBLElBQUdBO3dCQUVDQTs7d0JBSUFBLHNDQUFzQ0EseUJBQUNBLENBQUNBOzs7Ozs7O29DQS9FYkE7Ozs0QkFFbkJBLFFBQXVDQTs7Ozs7dUVBQXVDQSxRQUFRQTtnQkFFdEdBLDZCQUF3QkE7O2dCQU1qQ0EsSUFBR0E7b0JBQ0ZBLGtCQUFhQTs7O2dCQUVkQTs7Z0JBRUFBLHVCQUFrQkE7Z0JBd0JUQSwwQkFBcUJBO2dCQUtyQkEsMkJBQXNCQTtnQkFLdEJBLHlCQUFvQkE7Ozs7Ozs7OztzQkE3Q0tBO1lBRXJCQTtZQUNBQTs7c0JBUU1BO1lBQ2xCQSxJQUFHQTtnQkFFYUE7O2dCQUVBQSxJQUFJQSxzQkFBZ0JBLHNDQUNoQkEsbUJBQWNBLFFBQVFBO29CQUV0QkEsK0JBQTBCQTs7O2dCQUc5QkEsSUFBSUEscUNBQWFBO29CQUNiQSxlQUFVQTs7O2dCQUVkQSxJQUFJQSxzQkFBZ0JBLHNDQUF5QkEsaUNBQTJCQSxzQ0FDcEVBLG1CQUFjQSxRQUFRQTtvQkFFdEJBOzs7O1lBSXBCQTtZQUNZQTs7c0JBRWtCQTtZQUVsQkE7WUFDQUE7Ozs7Ozs7Ozs7NkJDeEN1QkE7Ozs7Ozs7Ozs7Ozs7b0JBVTlCQSxPQUFPQTs7O29CQUVaQSw0QkFBdUJBO29CQUN2QkE7Ozs7O29CQVFLQSxPQUFPQTs7O29CQUVaQSxJQUFHQTt3QkFDRkE7O29CQUNEQSx5QkFBb0JBO29CQUNwQkE7Ozs7O29CQU9LQSxPQUFPQTs7O29CQUVaQSxJQUFHQSxVQUFTQTt3QkFFWEE7d0JBQ0FBLGtCQUFhQTs7Ozs7Ozs7Ozt5Q0FqQ2dCQTs0Q0FFcUJBOzs7Ozs7O2dCQXFEcERBLGNBQVNBLFVBQUlBLDZDQUF1QkEsSUFBSUE7Z0JBQ3hDQSxjQUFTQSxJQUFJQTtnQkFDSkEsNkJBQXdCQTtnQkFDeEJBLDZCQUF3QkE7O2dCQUV4QkEsZ0JBQVdBLElBQUlBOztnQkFFeEJBLG9DQUErQkE7O2dCQVcvQkEsZ0JBQVdBOztnQkFxRFhBLDJCQUFzQkE7O2dCQXFCdEJBLHlCQUFvQkE7O2dCQU1wQkEsMENBQW9CQSxhQUFRQSxlQUFVQTs7Ozs7WUFqSHRDQTs7WUFFQUE7OztZQUtBQSxJQUFHQSxtQkFBbUJBLFFBQVFBLGdCQUFnQkE7Z0JBRTdDQSwrQkFBK0JBOzs7O1lBNkdoQ0EsY0FBY0EsbUJBQUtBLENBQUNBLGtCQUFhQSw4Q0FBOENBO1lBQy9FQSxJQUFHQTtnQkFDRkE7O1lBQ0RBLE9BQU9BOzs7WUFLUEEsU0FBU0E7WUFDVEEsY0FBY0E7O1lBRWRBLElBQUdBLHdCQUFtQkE7Z0JBRXJCQSxJQUFHQSxLQUFLQTtvQkFFUEEsS0FBS0E7Ozs7WUFJUEEsSUFBR0E7Z0JBRUZBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUEsSUFBR0EsOEJBQXdCQTtvQkFFMUJBLHlCQUFvQkEsSUFBSUEsK0JBQVdBOztvQkFFbkNBLHFCQUFnQkE7b0JBQ2hCQSx1QkFBa0JBLElBQUlBLCtCQUFXQTtvQkFDakNBLHFCQUFnQkEsYUFBYUEsQ0FBQ0E7b0JBQWtCQTs7b0JBSWhEQSx5QkFBb0JBLElBQUlBLCtCQUFXQSxhQUFhQSxDQUFDQTs7b0JBRWpEQSxxQkFBZ0JBLGFBQWFBOztvQkFFN0JBLHFCQUFnQkE7b0JBQ2hCQSx1QkFBa0JBLElBQUlBLCtCQUFXQSxhQUFhQSxDQUFDQTs7O2dCQUtoREE7Z0JBQ0FBO2dCQUNBQTs7Z0JBRUFBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQSxJQUFHQSw4QkFBd0JBO29CQUUxQkEseUJBQW9CQSxJQUFJQSw0QkFBUUE7O29CQUVoQ0Esb0JBQWVBOztvQkFFZkEsb0JBQWVBLGFBQWFBLENBQUNBO29CQUM3QkEsdUJBQWtCQSxJQUFJQSw0QkFBUUE7O29CQUk5QkEseUJBQW9CQSxJQUFJQSw0QkFBUUEsYUFBYUE7O29CQUU3Q0Esb0JBQWVBLGFBQWFBOztvQkFFNUJBLG9CQUFlQTtvQkFDZkEsdUJBQWtCQSxJQUFJQSw0QkFBUUEsYUFBYUEsQ0FBQ0E7Ozs7Ozs7Ozs7c0JBektkQTtZQUUvQkEsSUFBR0EsQ0FBQ0E7Z0JBQ0hBOztZQUNEQTtZQUNBQSx3QkFBbUJBLDJDQUE4QkE7WUFDakRBLGNBQWNBO1lBQ2RBLDRCQUF1QkEseUJBQW9CQSxVQUFVQSxVQUFVQTtZQUMvREE7O3NCQUdXQTtZQUVYQSxJQUFHQSxtQkFBbUJBO2dCQUVyQkEsSUFBR0EsQ0FBQ0E7b0JBRUhBOzs7WUFHRkEsZ0JBQWdCQTs7WUFFaEJBLElBQUdBLHdCQUFtQkE7Z0JBRXJCQSx1QkFBa0JBOzs7WUFHbkJBLElBQUdBLDhCQUF3QkE7Z0JBRTFCQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUEsSUFBR0E7b0JBRUZBLElBQUdBLHFCQUFvQkE7d0JBRXRCQSxLQUFLQTt3QkFDTEEsS0FBS0E7d0JBQ0xBOzs7b0JBS0RBLElBQUdBLG9CQUFtQkE7d0JBRXJCQSxLQUFLQTt3QkFDTEEsS0FBS0E7d0JBQ0xBOzs7Z0JBR0ZBLElBQUdBO29CQUVGQSx3QkFBbUJBLFlBQVdBLGVBQWNBLGtCQUFLQSxBQUFDQSx3QkFBbUJBLENBQUNBLEtBQUtBOzs7O1lBSTdFQSx1QkFBa0JBOztZQUVsQkE7O1lBRUFBOztzQkFHc0JBO1lBRXRCQSxJQUFHQTtnQkFFRkEsK0JBQTBCQSwyQ0FBOEJBO2dCQUN4REE7Z0JBQ0FBLFFBQVFBLGtCQUFhQSxDQUFDQSw2QkFBc0JBLHlDQUE4QkEsQ0FBQ0EsNkJBQXNCQTs7Z0JBRWpHQSxRQUFRQTtnQkFDUkEsSUFBR0EsQ0FBQ0EsS0FBSUEsOEJBQXdCQSw0Q0FBK0JBLDhCQUF1QkEsVUFBSUEsOEJBQXVCQSxZQUM5R0E7b0JBRUZBLElBQUlBOztnQkFFTEEsd0JBQW1CQTtnQkFDbkJBLCtCQUEwQkE7O2dCQUUxQkE7OztzQkFJbUJBO1lBRXBCQTtZQUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkN6SmtDQSxPQUFPQTs7O29CQUU3QkEsSUFBR0EscUJBQWVBO3dCQUVkQSxtQkFBY0E7d0JBQ2RBO3dCQUNBQTs7Ozs7O29CQU1pQ0EsT0FBT0E7OztvQkFFNUNBLElBQUdBLHlCQUFtQkE7d0JBRWxCQSx1QkFBa0JBO3dCQUNsQkE7d0JBQ0FBOzs7Ozs7b0JBS3NCQSxPQUFPQTs7O29CQUVqQ0EsSUFBR0Esd0JBQWtCQTt3QkFFakJBLHNCQUFpQkE7d0JBQ2pCQTt3QkFDQUE7Ozs7Ozs7dUNBbEI2QkE7O2lDQXFCakJBOzs7OztnQkFtQnBCQSxZQUFPQSxJQUFJQTtnQkFDWEEsY0FBU0EsSUFBSUE7Z0JBQ2JBLGFBQVFBLElBQUlBO2dCQUNaQSxZQUFPQTtnQkFDUEE7O2dCQUVBQTtnQkFDQUE7O2dCQUVBQSxnQ0FBMkJBOztnQkFFM0JBLG1DQUE4QkE7O2dCQUs5QkEsbUNBQThCQTs7Z0JBSzlCQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUE7O2dCQUVBQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBOztvQkFJQUE7b0JBQ0FBOzs7Z0JBR0pBOztnQkFFQUEsOEJBQXlCQTtnQkFJekJBO2dCQUNBQSxvREFBdUJBLFlBQU9BLGFBQVFBOztnQkFFdENBOzs7OztnQkEvREFBLElBQUdBLG1CQUFtQkEsUUFBUUEsZ0JBQWdCQTtvQkFFMUNBLElBQUdBLG1CQUFhQTt3QkFFWkEsMkJBQW9CQTs7b0JBRXhCQSxpQkFBWUEseUJBQWtCQSxBQUF3QkE7Ozs7Z0JBOEQxREE7Z0JBQ0FBLElBQUdBO29CQUVDQTs7b0JBSUFBOzs7Z0JBR0pBLElBQUdBLHdCQUFrQkE7b0JBRWpCQSxJQUFHQTt3QkFFQ0E7d0JBQ0FBLG1CQUFjQTt3QkFDZEEsbUJBQWNBO3dCQUNkQSxxQkFBZ0JBLElBQUlBLDRCQUFRQSxVQUFRQTt3QkFDcENBLGlCQUFZQSxJQUFJQSw0QkFBUUEsYUFBYUEsQ0FBQ0EsVUFBUUE7O3dCQUk5Q0E7d0JBQ0FBO3dCQUNBQTt3QkFDQUEscUJBQWdCQSxJQUFJQSw0QkFBUUE7d0JBQzVCQSxpQkFBWUEsSUFBSUEsNEJBQVFBLGFBQWFBLENBQUNBOzs7b0JBRzFDQSxzQkFBaUJBLElBQUlBO29CQUNyQkE7Ozs7Ozs7Ozs7O3NCQXZFMkJBO1lBRTNCQTs7c0JBRzJCQTtZQUUzQkE7O3NCQXNCc0JBO1lBRXRCQSxxQkFBZ0JBLENBQUNBOzs7WUFsRGJBLCtCQUErQkE7WUFDL0JBLGlCQUFZQTs7Ozs7Ozs7Ozt1Q0NkdUJBOzs7Ozs7O29CQVpuREEsT0FBT0E7OztvQkFJUEEsSUFBR0EsVUFBU0E7d0JBRVhBLHdCQUFtQkE7d0JBQ25CQTs7Ozs7O29CQVlEQSxPQUFPQTs7O29CQUlQQSxJQUFHQTt3QkFDRkE7O29CQUNXQSxJQUFHQSx1QkFBaUJBO3dCQUVoQkEscUJBQWdCQTt3QkFDaEJBLHFEQUEyQkEsUUFBS0EsQUFBNkJBLCtCQUFpQ0EsU0FBUUE7OztvQkFHdEhBLElBQUdBLGlCQUFZQSxRQUFRQTt3QkFFdEJBLEtBQUlBLFdBQVdBLElBQUlBLHFCQUFnQkE7NEJBRWxDQSxpQkFBV0Esc0JBQVNBOzRCQUNwQkEsaUNBQTRCQSxHQUFPQTs0QkFDbkNBLHNCQUFTQSxHQUFLQTs7Ozs7Ozs7O2dDQXlNMkNBLEtBQUlBOzs7OztnQkFoUXZEQSw2QkFBd0JBOzs7O2dDQU1iQTs7Z0JBRXBCQSx1QkFBa0JBO2dCQUNsQkEsSUFBR0E7b0JBQ0ZBOzs7bURBbUR1Q0EsR0FBT0E7Z0JBRS9DQSxpQkFBa0JBLE1BQUtBOztnQkFFdkJBLFlBQWVBO2dCQUNmQSxJQUFHQSx3QkFBc0JBO29CQUV4QkE7b0JBQ0FBOztvQkFFQUEsbUNBQWlDQSw4Q0FBMEJBOztvQkFHM0RBLHVCQUFxQkEsMkJBQUlBLG1FQUErQ0E7O2dCQUVoRUEsSUFBR0E7b0JBRUNBLElBQUdBO3dCQUVDQTs7d0JBSUFBOztvQkFFSkE7OztnQkFHSkEsdUNBQXFDQTtnQkFDOUNBLElBQUdBO29CQUVGQSxJQUFHQSw2QkFBMkJBO3dCQUU3QkEsNEJBQTBCQTt3QkFDMUJBLG9DQUFrQ0E7d0JBd0JsQ0EsaUNBQStCQTs7O29CQUloQ0EsSUFBR0EsNkJBQTJCQTt3QkFFN0JBLGlDQUErQkE7Ozs7Z0JBSWpDQSxrQ0FBZ0NBLGFBQWFBLFlBQXFCQTs7OztnQkFLekRBLElBQUdBLG1CQUFjQTtvQkFFYkEsa0JBQWFBLFVBQUlBLGtFQUE0Q0EsSUFBSUE7b0JBQ2pFQSxJQUFHQTt3QkFFQ0E7d0JBQ0FBLDBCQUFxQkEsVUFBSUEsNkNBQXVCQSxJQUFJQTt3QkFDcERBO3dCQUNBQTt3QkFDQUEseURBQStCQTt3QkFDL0JBO3dCQUNBQSwwQ0FBcUNBOzt3QkFFckNBOzt3QkFFQUEseUJBQW9CQTs7d0JBSXBCQTt3QkFDQUEseUJBQW9CQTt3QkFDcEJBOzs7OztnQkFLakJBLElBQUdBLGlCQUFZQSxRQUFRQTtvQkFFdEJBOztvQkFFQUEsS0FBSUEsV0FBV0EsSUFBSUEscUJBQWdCQTt3QkFFbENBLGlCQUFXQSxzQkFBU0E7O3dCQUVwQkE7O3dCQUVBQSxJQUFHQSx3QkFBc0JBOzRCQUV4QkEsaUNBQTRCQSxHQUFPQTs0QkFDakJBLG1DQUFpQ0E7NEJBSWpDQSxvQ0FBa0NBOzRCQUlsQ0Esb0NBQStCQTs0QkFDL0JBLHlCQUFvQkE7O3dCQUV2Q0EsdUNBQXFDQTs7d0JBRXJDQTs7d0JBRUFBLElBQUdBLENBQUNBLDRCQUFxQkE7NEJBRU5BLElBQUdBO2dDQUVDQSxxQkFBV0Esa0JBQUtBLGtDQUFhQTs7Z0NBSTdCQSxxQkFBV0Esa0JBQUtBLGtDQUFhQSxnQkFBY0E7Ozs7d0JBSWxFQSxJQUFHQTs0QkFFRkE7O3dCQUVEQSxXQUF1QkE7d0JBQ3ZCQSwwQkFBb0JBOzs7O2dDQUVuQkEsSUFBR0E7b0NBRUZBLENBQUNBLFFBQU9BLG1CQUF3Q0E7b0NBQ2hEQTs7Ozs7Ozt5QkFHRkEsSUFBR0EsUUFBUUE7NEJBRVFBLE9BQU9BLHVEQUFvQ0E7OzRCQUUzQ0EsaUNBQStCQTs7d0JBRW5DQSxJQUFHQTs0QkFFQ0E7Ozs7d0JBSUpBLGtDQUFnQ0E7d0JBQy9DQSxtQ0FBaUNBOzs7Ozt3QkFLbEJBLElBQUdBOzRCQUVDQTs0QkFDQUE7Ozt3QkFHSkEsaUJBQVNBOzt3QkFFeEJBLHNCQUFTQSxHQUFLQTs7b0JBRUhBLElBQUdBO3dCQUVDQSx3QkFBbUJBOzs7Ozs7Z0JBUXBDQTtnQkFDQUE7Ozs7Ozs7O3NCQTVQa0NBO1lBQ3JCQTtZQUNBQTs7c0JBNkZ3QkE7WUFFbENBLFlBQVlBLFNBQWdCQTtZQUM1QkEsWUFBWUEsc0JBQVNBO1lBQ3JCQSxJQUFHQSxpQkFBaUJBO2dCQUVuQkE7Z0JBQ0FBOztZQUVEQSxJQUFHQSx1QkFBdUJBO2dCQUV6QkE7Z0JBQ0FBOztZQUVEQSxxQkFBZ0JBO1lBQ2hCQSxJQUFHQSxRQUFRQTtnQkFDVkEsUUFBUUE7OztZQUVUQTs7WUFFQUEscUJBQWdCQTs7WUFFaEJBOztzQkF3RG9EQTtZQUU5QkEscUJBQWdCQSxTQUFnQkE7Ozs7Ozs7OzJCQzlLcEJBO2dDQUNLQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQ0xVQTs7Ozs7OztvQkFFUkEsT0FBT0E7OztvQkFDdENBLElBQUdBLHNCQUFnQkE7d0JBRWZBLDJCQUFvQkE7d0JBQ3BCQSxvQkFBZUE7O29CQUVuQkEsSUFBR0EsVUFBU0E7d0JBRVJBLGtCQUFhQTt3QkFDYkEsSUFBR0Esb0JBQWNBOzRCQUViQSxvQkFBZUEseUJBQWtCQSxBQUF3QkE7NEJBR3pEQSxnQkFBV0EsSUFBSUE7OzRCQUVmQSxJQUFHQSw4QkFBeUJBLFFBQVFBLHFCQUFnQkE7Z0NBRWhEQSw0Q0FBdUNBOzs7NEJBSzNDQSxnQkFBV0EsSUFBSUE7NEJBQ2ZBLGdDQUEyQkE7NEJBQzNCQTs0QkFDQUEsSUFBR0EsOEJBQXlCQTtnQ0FFeEJBLG9CQUFlQTtnQ0FDZkEsNENBQXVDQTs7Ozs7Ozs7OztrQ0FoQ3hCQTtvQ0FFUkE7bUNBOEwyQkEsS0FBSUE7Ozs7O2dCQWpCdERBLHVCQUFrQkE7Z0JBQ2xCQSxnQkFBV0EsSUFBSUE7Z0JBQ2ZBLFlBQU9BLElBQUlBOzs7Z0JBR1hBO2dCQUNBQSxnQ0FBMkJBO2dCQUMzQkE7Ozs7OztnQkE3SUFBO2dCQUNBQTs7Z0JBRUFBLFVBQVVBO2dCQUNWQSxVQUFVQSxJQUFJQTtnQkFDZEE7Z0JBQ0FBO2dCQUNBQTs7Z0JBRUFBLFdBQVdBLElBQUlBO2dCQUNmQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTs7Z0JBRUFBO2dCQUNBQTs7Z0JBRUFBLDBCQUFvQkE7Ozs7d0JBRWhCQSxJQUFHQSxDQUFDQSxpQ0FBMEJBOzRCQUUxQkEsVUFBVUEsMkJBQWNBLGlCQUFpQkE7NEJBQ3pDQTs0QkFDQUE7NEJBQ0FBLGdCQUFnQkE7NEJBQ2hCQTs7O3dCQUdKQSwyQkFBcUJBOzs7O2dDQUVqQkEsMkJBQXNCQTs7Ozt3Q0FFbEJBO3dDQUNBQTt3Q0FDQUEsd0JBQXdCQTt3Q0FJeEJBLElBQUdBOzRDQUVDQTs0Q0FDQUE7NENBQ0FBOzs0Q0FHQUE7NENBQ0FBOzRDQUNBQTs7d0NBRUpBO3dDQUNBQTt3Q0FDQUE7d0NBQ0FBO3dDQUNBQTt3Q0FDQUEsY0FBY0EsSUFBSUE7d0NBQ2xCQSxrQkFBa0JBLElBQUlBLDRCQUFRQSx3QkFBd0JBLENBQUNBLDBEQUF3QkEsQ0FBQ0Esa0JBQUlBLENBQUNBLHFCQUFvQkE7O3dDQUV6R0EsSUFBR0EscUJBQXFCQTs0Q0FFcEJBLElBQUdBO2dEQUVDQTs7Z0RBSUFBOzs7NENBR0pBOzRDQUNBQTs7O3dDQUdKQSxJQUFHQSxtQkFBbUJBOzRDQUVsQkE7NENBQ0FBLGlCQUFpQkEsMEJBQUNBOzRDQUNsQkE7NENBQ0FBLElBQUdBOzs7Ozs7O3dDQVVQQSxJQUFHQTs0Q0FFQ0E7NENBQ0FBOzs0Q0FJQUE7O3dDQUVKQTt3Q0FDQUEsZ0JBQWdCQTs7Ozs7Ozs7Ozs7Ozt3QkFJeEJBLElBQUdBOzRCQUVDQTs0QkFDQUE7Ozs7Ozs7O2dCQUlSQSxhQUFhQTtnQkFDYkEsY0FBY0E7O2dCQUVkQTtnQkFDQUEsd0JBQXdCQTs7Z0JBRXhCQSwyQkFBMkJBOztnQkFLM0JBLHlCQUFvQkE7Z0JBQ3BCQSx5QkFBb0JBOztnQkFFcEJBOzs7Z0JBS0FBO2dCQUNBQTs7c0NBZXVCQTs7Z0JBRXZCQSxJQUFHQSxTQUFTQTtvQkFDUkEsMEJBQXFCQTs7Ozs7Ozs7OztZQTdLVEEsZ0NBQTJCQTs7c0JBNkROQTtZQUVyQkEsaUJBQVlBOztzQkE4RUFBO1lBRXhCQTs7Ozs7Ozs7Ozs7Ozs7NEJ4QjVKUUE7OztnQkFFckJBLGtCQUFXQTs7Ozs0QkFHS0E7O2dCQUVoQkEsSUFBR0E7b0JBQ0ZBOzs7Z0JBRURBOztnQkFFQUEsSUFBR0EsbUJBQVlBO29CQUVkQSxJQUFHQSxDQUFDQTt3QkFFSEEseUJBQXlCQSxxRkFBeUVBOztvQkFFbkdBLElBQUdBLENBQUNBO3dCQUVIQSx5QkFBeUJBLGtGQUFzRUE7OztnQkFHakdBLFlBQVlBLDJDQUE4QkE7O2dCQUUxQ0EsZ0JBQWdCQSxJQUFJQSw0QkFBUUEsU0FBU0E7O2dCQUVyQ0EsSUFBR0EsQ0FBQ0E7b0JBRUhBO29CQUNBQTtvQkFDQUEsNEJBQXVCQSxDQUFDQSxpREFBa0NBO29CQUMxREEsMEJBQTBCQTs7OztnQkFNM0JBLElBQUdBO29CQUVGQSxJQUFHQSxnQkFBZ0JBO3dCQUVsQkEsRUFBY0EsMkJBQTJCQSxBQUF3QkE7O29CQUlsRUE7b0JBQ0FBOzs7Ozs7Ozs7O1lBSm9CQTs7Ozs7Ozs7bUR5QjdDOEJBLFNBQWlCQTs7b0JBRTNEQSxJQUFHQTt3QkFDQ0EsT0FBT0EsSUFBSUE7OztvQkFFZkEsSUFBR0E7d0JBRUNBLFVBQVVBO3dCQUNWQSxPQUFPQSxJQUFJQSw0QkFBUUEsQUFBT0EsVUFBVUEsQUFBT0EsQUFBQ0EsVUFBVUE7O3dCQUd0REEsV0FBVUE7d0JBQ1ZBLE9BQU9BLElBQUlBLDRCQUFRQSxBQUFPQSxXQUFVQSxBQUFPQSxBQUFDQSxXQUFVQTs7Ozs7Ozs7Ozs7OztnQkFNMURBLDZCQUF3QkE7Z0JBQ3hCQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQSxxQkFBZ0JBOztnQkFFaEJBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTs7OztpQ0FHa0JBO2dCQUVsQkEsZ0JBQWdCQTtnQkFDaEJBOzs7Z0JBS0FBLGdCQUFnQkEsSUFBSUEsNEJBQVFBLFdBQVdBLHdDQUFxQkE7OztnQkFLNURBOztnQkFFQUEsSUFBR0E7b0JBRUNBO29CQUNBQSxtQkFBY0E7b0JBQ2RBOztvQkFJQUEsV0FBV0E7O29CQUVYQTt3QkFFSUEsSUFBR0EsY0FBY0Esc0JBQXNCQSxjQUFjQTs0QkFFakRBOzs7Ozs7Ozs7O2dCQVlaQTs7Ozs7Ozs7Ozt5REM5RWtCQTs7Ozs7Ozs7Ozs7OEJDRWNBOzs7Ozs7Ozs7OzsyQ0FFT0E7O29DQUdmQTs7Ozs7b0JBd0dqQ0EsSUFBR0EsQ0FBQ0E7d0JBRUhBLHdDQUFlQSxJQUFJQTt3QkFDbkJBOzs7K0JBR3FCQSxRQUFlQTs7b0JBRXJDQTtvQkFDQUEsa0RBQXlCQSxRQUFRQTs7O29CQUtqQ0E7b0JBQ0FBOzs7Ozt3QkEzSG1DQTs7Ozs7O2dCQXFEbkNBLGtCQUFhQTtnQkFDYkEsc0JBQXNCQTtnQkFDdEJBLDZCQUE2QkE7Z0JBQzdCQSw0QkFBNEJBOztnQkFFNUJBLFlBQVlBO2dCQUNaQSxJQUFHQTtvQkFFRkEscUJBQXFCQTtvQkFDckJBLFlBQVlBOztvQkFJWkEscUJBQXFCQTtvQkFDckJBLGdCQUFnQkE7O29CQUVoQkEsSUFBR0EsNkNBQW1CQTt3QkFFckJBLG9DQUFXQTs7O29CQUdaQSxZQUFZQTs7b0JBRVpBLElBQUdBLDZDQUFtQkE7d0JBRXJCQSxvQkFBZUE7Ozs7Ozs7OztnQkF0RWpCQTs7bUNBR3VCQSxRQUFlQTs7O2dCQUV0Q0EsV0FBV0E7Z0JBQ1hBLFFBQU9BO29CQUVOQSxLQUFLQTt3QkFDSkEsbUJBQW1CQTt3QkFDbkJBO29CQUNEQSxLQUFLQTt3QkFDSkEsbUJBQW1CQTt3QkFDbkJBOzs7Z0JBR0ZBLGlCQUFpQkE7Z0JBQ2pCQSw0QkFBdUJBO2dCQUN2QkEsSUFBR0E7b0JBRUZBLDRCQUF1QkE7O2dCQUV4QkE7OztnQkFLQUEsSUFBR0EsZ0JBQVdBO29CQUViQTs7Z0JBRURBOzs7Z0JBS0FBLElBQUdBLGdCQUFXQTtvQkFFYkE7O2dCQUVEQTs7O2dCQXVDQUE7Z0JBQ0FBO2dCQUNBQTs7O2dCQUtBQTs7Z0JBRUFBLG9DQUFXQTtnQkFDWEEsd0NBQWVBO2dCQUNmQSwyQ0FBa0JBOzs7Z0JBS2xCQTtnQkFDQUE7Ozs7Ozs7Ozs7Ozs0QkN4R2lCQTs7Ozs7Z0JBRWpCQSxZQUFZQTtnQkFDWkE7Ozs7Ozs7Z0JBT0FBLHFCQUFnQkEsSUFBSUE7O2dCQUVYQSxJQUFHQTtvQkFFQ0E7b0JBQ0FBLDBCQUFxQkEsSUFBSUE7Ozs7OztnQkFNdENBLHNCQUFzQkE7Z0JBQ3RCQTs7Ozs7Ozs7Ozs7OzRCQ0k4QkE7Ozs7dURBQTZDQTs7Z0JBRWxFQTs7Z0JBRUFBLElBQUdBO29CQUVDQTs7O2dCQUdKQSxZQUFPQTs7Z0JBRVBBLGdCQUFXQSxVQUFJQSw4QkFBVUEsdURBQWtEQSxJQUFJQSw2Q0FBc0JBLElBQUlBLDRCQUFRQSxhQUFhQSxDQUFDQTtnQkFDL0hBLHNCQUFpQkEsVUFBSUEsMkNBQTRCQSxJQUFJQSw0QkFBUUEsYUFBYUEscUNBQWtDQSxJQUFJQSw0QkFBUUE7Z0JBQ3hIQSwwQ0FBcUNBOztnQkFNckNBOztnQkFFQUE7O2dCQUVBQSxJQUFHQTtvQkFFQ0E7OztnQkFHSkEsb0RBQXVCQSxlQUFVQTs7Ozs7WUFuRGpDQSxPQUFPQTs7O1lBS1BBLE9BQU9BLEFBQU9BOztvQ0FHb0JBO1lBRWxDQSwrQkFBMEJBOzs7WUFLMUJBOzs7WUFLQUEsT0FBT0E7OztZQW9DUEEsT0FBT0E7OzRCQUdtQkE7WUFFMUJBLHFCQUFnQkE7O3FDQUdrQkE7Ozs7Ozs7OztzQkE1QklBO1lBRWxDQSxJQUFHQSxDQUFDQSxpQkFBWUE7Z0JBQ1pBLHVCQUFrQkE7Ozs7Ozs7Ozs7Ozs7Ozs7b0JDekNwQkEsT0FBT0E7OztvQkFDUEEsb0JBQXlDQTs7Ozs7b0JBS3pDQSxPQUFPQTs7O29CQUNQQSxvQkFBeUNBOzs7Ozs7Ozs7Ozs7dURBb0J6QkE7Z0JBRXRCQSxvQkFBZUE7O2dCQUVmQSxrQkFBYUE7Z0JBaUJiQSxtQkFBY0E7Ozs7O2dCQTdCZEEsT0FBT0E7O2dDQUdtQkE7Z0JBRTFCQSxxQkFBMENBOzs7Ozs7OztzQkFPNUJBO1lBRVZBLElBQUdBO2dCQUNDQTs7O1lBRUpBLG9CQUFlQTtZQUNmQSxrQkFBYUE7O1lBRWJBLElBQUdBO2dCQUNDQSxZQUFPQTs7Z0JBR1BBO2dCQUNBQSxlQUFVQTs7OztzQkFJSEE7WUFFWEEsb0JBQWVBO1lBQ2ZBLGVBQVVBO1lBQ1ZBLFlBQU9BOzs7Ozs7Ozs7Ozs0QmxDK0VPQTs7Ozs7O2dCQUUxQkEsWUFBWUE7Z0JBQ1pBO2dCQUNBQTs7Z0JBRUFBLHVCQUFrQkEsSUFBSUE7Z0JBQ3RCQTs7Z0JBRUFBLG9CQUFlQSxVQUFJQSxnQ0FBbUJBLE1BQU1BO2dCQUM1Q0E7Z0JBQ0FBOztnQkFFQUEsaURBQW9CQSxtQkFBY0E7O2dCQUVsQ0E7Ozs7Ozs7Ozs7Ozs7NEJtQ2hKb0JBLFFBQWVBOzs7OztnQkFFcENBLGNBQVNBO2dCQUNUQSxxQkFBZ0JBOztnQkFFaEJBLGlCQUFZQSx1QkFBdUJBLGlDQUEwQkEsa0JBQWlCQTtnQkFDOUVBOztnQkFFQUE7Z0JBQ0FBO2dCQUNBQTs7O2dCQUdBQSxzQkFBc0JBOzs7OztnQkFNdEJBOztnQkFFQUEsSUFBR0EsdUJBQWlCQTtvQkFFbkJBLG1DQUE4QkE7O29CQUc5QkEsb0NBQStCQSxrQ0FBYUE7Ozs7Ozs7Ozs0QkNoQ2RBLFlBQWlCQTs7Ozs7Z0JBRXZDQSxrQkFBa0JBO2dCQUNsQkEsb0JBQW9CQTs7Z0JBRXBCQTs7Ozs7Ozs7Ozs7Ozs7Ozs0QkNDWUE7OztnQkFFWkEsSUFBR0Esc0NBQXNDQSxRQUFRQSxvREFBb0RBLFFBQVFBLGtFQUFrRUE7b0JBRTNLQSx5QkFBb0JBO29CQUNwQkEsdUJBQWtCQTs7O2dCQUd0QkEsb0JBQWVBO2dCQUNmQSxrQkFBYUEsSUFBSUEsK0JBQWtCQTtnQkFDbkNBO2dCQUNBQSwwQkFBcUJBOztnQkFNckJBLDBCQUFxQkE7O2dCQUtyQkEsbUJBQVlBOztnQkFFWkEsWUFBT0EsSUFBSUE7Ozs7O2dCQUtYQTtnQkFDQUEsSUFBR0EsQ0FBQ0E7b0JBQ0FBOztvQkFHQUEseUJBQW9CQSx3QkFBbUJBOzs7O2dCQU0zQ0E7O2dCQUVBQSxJQUFHQSxDQUFDQTtvQkFFQUE7b0JBQ0FBLDRCQUF1QkE7Ozs7Z0JBTTNCQTtnQkFDQUEsSUFBR0EscUJBQWdCQTtvQkFDZkE7OztnQkFFSkE7Ozs7Ozs7OztZQTFDSUE7WUFDQUE7O3NCQUdrQkE7WUFFbEJBLHlCQUFvQkE7Ozs7Ozs7Ozs7Ozs7OzRCQ2hCWEEsVUFBa0JBLFdBQW9CQTs7Ozs7Z0JBRW5EQSxnQkFBV0Esa0JBQVdBOztnQkFFdEJBLEtBQUtBLFdBQVdBLElBQUlBLGtDQUFrQ0E7b0JBRWxEQSxpQ0FBU0EsR0FBVEEsa0JBQWNBLGlCQUFTQTs7O2dCQUczQkEsZUFBVUE7Z0JBQ25CQSxnQkFBV0E7Z0JBQ1hBLGdCQUFXQTs7Z0JBRVhBO2dCQUNBQTtnQkFDQUE7Z0JBQ0FBLDRCQUE0QkE7O2dCQUVuQkEsYUFBUUE7Z0JBQ1JBLDZCQUF3QkE7Z0JBQ3hCQTtnQkFDQUE7O2dCQUVBQSx5QkFBb0JBLEFBQXFEQSwrQkFBQ0E7O3dCQUFPQSxRQUFRQSxVQUFJQSxnQ0FBbUJBLE1BQU1BLHlFQUF1REEsSUFBSUEsOEVBQXVEQSwrQkFBQ0E7NEJBQ3pOQSxLQUFLQSxZQUFXQSxLQUFJQSxzQ0FBaUNBO2dDQUVqREEsaUJBQVNBLElBQUtBLGlDQUFTQSxJQUFUQTs7OzRCQUdsQkE7O3dCQUNBQSxRQUFRQSxVQUFJQSxnQ0FBbUJBLE1BQU1BLGlFQUErQ0EsSUFBSUE7d0JBQStDQSxPQUFPQTt1QkFQcEhBLEtBQUlBOztnQkFTOUNBLGlFQUFxQ0E7O2dCQUVyQ0Esc0JBQXNCQTs7Z0JBRXRCQTs7Ozs7Z0JBTVRBOztnQkFFQUE7OztnQkFNQUE7O2dCQUVBQSxJQUFHQSxnQkFBV0E7b0JBRWJBLG9CQUFvQkE7b0JBQ3BCQTs7b0JBR0FBOztvQkFFQUE7Ozs7Z0JBTURBO2dCQUNBQSxhQUFhQTs7Z0JBRWJBO2dCQUNBQTs7Z0JBRUFBLG9CQUFvQkE7Z0JBQ3BCQSxzQkFBc0JBO2dCQUN0QkEsc0JBQXNCQTs7Z0JBRXRCQSxnQkFBZ0JBOztnQkFFaEJBLEtBQUlBLFdBQVdBLElBQUlBLFFBQVFBO29CQUUxQkEsa0JBQWtCQTtvQkFDbEJBLFlBQVlBLHdCQUFtQkE7O29CQUUvQkEsSUFBR0EsQ0FBQ0E7d0JBQ0hBOzs7b0JBRURBLFlBQVlBOztvQkFFWkEsb0JBQWNBOztvQkFFZEEsSUFBR0E7d0JBRUZBOzs7b0JBR0RBLFFBQU9BO3dCQUVOQSxLQUFLQTs0QkFDSkEsY0FBY0EsMkJBQU1BLGVBQWVBLE9BQUtBLENBQUNBLHNCQUFNQSxhQUFZQSxDQUFDQSxzQ0FBV0E7NEJBQ3ZFQSxzQkFBZ0JBLElBQUlBLDhCQUFVQTs0QkFDOUJBLDJDQUFvQkEsT0FBS0EsQ0FBQ0Esc0JBQU1BLGFBQVlBLENBQUNBLHNDQUFXQSxpQ0FBaUJBOzRCQUN6RUEsb0JBQWtCQSx3QkFBaUJBLHFCQUFRQTs0QkFDM0NBLHVCQUFxQkE7NEJBQ3JCQSxJQUFHQSxDQUFDQTtnQ0FFSEEsNEJBQTBCQTt5RUFBQ0E7d0NBRTFCQSxxQkFBUUEsV0FBV0E7d0NBQ25CQSxJQUFHQTs0Q0FDRkE7Ozs7OzRCQUllQSxrREFBcUJBLFNBQVNBOzRCQUVoREE7d0JBQ0RBLEtBQUtBO3dCQUNMQSxLQUFLQTt3QkFDTEEsS0FBS0E7d0JBQ0xBLEtBQUtBO3dCQUNMQSxLQUFLQTt3QkFDTEEsS0FBS0E7d0JBQ0xBLEtBQUtBO3dCQUNMQSxLQUFLQTs0QkFFSkEsYUFBYUEsMkJBQU1BLGVBQWVBLE9BQUtBLENBQUNBLHNCQUFNQSxhQUFZQSxDQUFDQSxzQ0FBV0E7NEJBQ3RFQTs0QkFDQUEsSUFBR0E7Z0NBRUZBLGFBQVdBLElBQUlBLDhCQUFVQTtnQ0FDekJBLDZDQUFvQkEscUJBQVFBOztnQ0FJNUJBLGFBQVdBLElBQUlBLDhCQUFVQTtnQ0FDekJBLGtCQUFnQkEsd0JBQWlCQSxxQkFBUUE7OzRCQUcxQ0EsMENBQW1CQSxPQUFLQSxDQUFDQSxzQkFBTUEsYUFBWUEsQ0FBQ0Esc0NBQVdBLGlDQUFpQkE7NEJBRXhFQSxzQkFBb0JBOzRCQUVwQkEsSUFBR0EsQ0FBQ0E7Z0NBRUhBLDJCQUF5QkE7eUVBQUNBO3dDQUV6QkEsSUFBR0Esb0JBQWlCQTs0Q0FFbkJBLHFCQUFRQSxXQUFXQTs7NENBSW5CQSxxQkFBUUEsV0FBV0E7O3dDQUVwQkEsSUFBR0E7NENBQ0ZBOzs7Ozs0QkFJZUEsa0RBQXFCQSxRQUFRQTs0QkFDL0NBO3dCQUNEQTt3QkFDQUEsS0FBS0E7d0JBQ0xBLEtBQUtBOzRCQUNKQSxhQUFhQSwyQkFBTUEsZUFBZUEsT0FBS0EsQ0FBQ0Esc0JBQU1BLGFBQVlBLENBQUNBLHNDQUFXQTs0QkFDdEVBLHFCQUFlQSxJQUFJQSw4QkFBVUE7NEJBQzdCQSwwQ0FBbUJBLE9BQUtBLENBQUNBLHNCQUFNQSxhQUFZQSxDQUFDQSxzQ0FBV0EsaUNBQWlCQTs0QkFDeEVBLGtCQUFnQkEsd0JBQWlCQSxxQkFBUUE7NEJBQ3pDQSxzQkFBb0JBOzRCQUVwQkEsSUFBR0EsQ0FBQ0E7Z0NBRUhBLDJCQUF5QkE7eUVBQUNBO3dDQUV6QkEscUJBQVFBLFdBQVdBOzt3Q0FFbkJBLElBQUdBOzRDQUNGQTs7Ozs7NEJBSWVBLGtEQUFxQkEsUUFBUUE7Ozs7Ozs7Ozs0QkFhL0NBOztvQkFFRkEsSUFBR0E7d0JBRUZBLG1CQUFVQTt3QkFDVkE7O3dCQUdBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDN01tQkE7OztnQkFFWkEsSUFBR0Esc0NBQXNDQSxRQUFRQSxvREFBb0RBLFFBQVFBLGtFQUFrRUE7b0JBRTNLQSx5QkFBb0JBO29CQUNwQkEsdUJBQWtCQTs7O2dCQUd0QkEsWUFBT0EsSUFBSUE7O2dCQUVYQSxvQkFBZUE7Z0JBQ2ZBLG1CQUFjQSxJQUFJQSx5QkFBWUE7Z0JBQzlCQTs7Z0JBRUFBLGlDQUE0QkEsVUFBQ0E7b0JBRXpCQSxJQUFHQSxvQkFBUUE7d0JBRVBBOzt3QkFHQUEscUJBQXFCQSxxQkFBY0EsNEJBQVFBLGtDQUFrQ0E7Ozs7Z0JBSXJGQSxvQ0FBK0JBOztnQkFLL0JBLHlCQUFvQkE7O2dCQUVwQkEsbUJBQVlBOzs7OztnQkFLWkE7Z0JBQ0FBLElBQUdBLENBQUNBO29CQUNBQTs7b0JBR0FBLHlCQUFvQkEsd0JBQW1CQTs7OztnQkFNM0NBO2dCQUNBQSxJQUFHQSxxQkFBZ0JBO29CQUNmQTs7O2dCQUVKQTs7Ozs7Ozs7O1lBekJJQTs7Ozs7Ozs7OytEQ2hDa0JBOzs7Ozt5Q0FLYUE7Z0JBRW5DQSxJQUFHQSxDQUFDQSxpQkFBWUE7b0JBQ1pBLENBQUNBLElBQUlBLHNCQUFTQSwwQkFDSkEsK0NBQ2tCQTs7Ozs7Ozs7Ozs7Ozs7Ozs0QkMwU1ZBLE9BQWNBLE9BQVdBOzt3REFBd0JBO2dCQUV2RUEsYUFBUUE7Z0JBQ1JBLGVBQVVBO2dCQUNWQSxtQkFBY0E7Z0JBQ2RBLGlCQUFZQTtnQkFDWkEseUJBQW9CQSxBQUFxREEsNkRBQS9CQSxLQUFJQTs7Z0JBRTlDQSwrQkFBMEJBO2dCQUMxQkE7Z0JBQ0FBLGtDQUE2QkE7Z0JBQzdCQTtnQkFDQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUEsZ0NBQTJCQTtnQkFDM0JBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQSxTQUFTQSxJQUFJQSx1QkFBVUEsVUFBVUE7Z0JBQ2pDQTs7Z0JBRUFBLElBQUlBLENBQUNBO29CQUVEQSxRQUFRQSxxQkFBTUE7b0JBQ2RBLElBQUlBLFFBQVFBO3dCQUNSQSxRQUFRQTs7O2dCQUVoQkEsSUFBSUEsb0JBQW9CQTtvQkFDcEJBLG9CQUFvQkE7O2dCQUN4QkEsSUFBSUEsb0JBQW9CQTtvQkFDcEJBLG9CQUFvQkE7OztnQkFFeEJBLDZCQUF3QkE7Z0JBQ3hCQSxvQkFBZUEsdUJBQWdCQTs7Ozs4QkFTYkE7Z0JBRWxCQSx5QkFBb0JBO2dCQUNwQkEseUJBQW9CQTtnQkFDcEJBLHlCQUFvQkE7Z0JBQ3BCQSxzQkFBaUJBOztnQkFFakJBLGlFQUFxQ0E7O2dCQUVyQ0EsY0FBU0E7Z0JBQ1RBOzs7Ozs7OztzQkFoRDBFQTs7WUFBT0EsUUFBUUEsVUFBSUEsZ0NBQW1CQSxNQUFNQTtZQUF3Q0EsUUFBUUEsVUFBSUEsZ0NBQW1CQSxNQUFNQTtZQUE0Q0EsT0FBT0E7Ozs7Ozs7O3FCQzFUMU5BOzs7O29CQUtyQ0EsSUFBR0EsQ0FBQ0E7d0JBQ0hBOztvQkFDREEsSUFBR0EsbUNBQU9BO3dCQUNUQSxrQ0FBTUEsVUFBcUJBOztvQkFDNUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0QkFVMkJBLFFBQWVBOzhEQUE0QkEsUUFBUUEsSUFBSUEscUNBQXdCQTs7Ozs7Ozs7Ozs7Ozs7OEJBUS9FQSxRQUFlQSxJQUFxQkE7OERBQXFCQSxRQUFRQSxJQUFJQSxxQ0FBd0JBOzs7Ozs7Ozs7Ozs7Ozs4QkFRN0ZBLFFBQWVBLElBQXFCQTs4REFBa0NBLFFBQVFBLElBQUlBLFNBQVNBOzs7Ozs7Ozs7Ozs7Ozs7OEJBUzNGQSxRQUFlQSxJQUFxQkEsU0FBMkJBOzt3REFBcUJBO2dCQUN0R0EsY0FBY0E7Z0JBQ3ZCQSxVQUFVQTtnQkFDVkEsa0JBQWtCQTtnQkFDVEEsZUFBVUE7Z0JBQ1ZBLGdCQUFXQTs7Z0JBRXBCQSxRQUFRQTtvQkFDS0EsS0FBS0E7d0JBQ0RBLElBQUdBLGtCQUFZQTs0QkFDWEEsZ0JBQVdBOzt3QkFFOUJBO3dCQUNlQTtvQkFDSkEsS0FBS0E7d0JBQ0RBLElBQUdBLGtCQUFZQTs0QkFDWEEsZ0JBQVdBOzt3QkFFOUJBO3dCQUNBQTtvQkFDV0EsS0FBS0E7d0JBQ0RBLElBQUdBLGtCQUFZQTs0QkFDWEEsZ0JBQVdBOzt3QkFFOUJBO3dCQUNBQTtvQkFDV0EsS0FBS0E7d0JBQ0RBLElBQUdBLGtCQUFZQTs0QkFDWEEsZ0JBQVdBOzt3QkFFOUJBO3dCQUNBQTtvQkFDV0E7d0JBQ0lBLE1BQU1BLDZDQUEwQ0EsWUFBSkE7O2dCQUVwREEsaUJBQW9CQTtnQkFDcEJBLFFBQVFBO29CQUVKQSxLQUFLQTt3QkFDREEseUJBQW9CQSxBQUFxREEsK0JBQUNBOztnQ0FBT0EsUUFBUUEsVUFBSUEsZ0NBQW1CQSxNQUFNQSxpRUFBK0NBLElBQUlBLDhDQUEwQkE7Z0NBQWNBLE9BQU9BOytCQUE5S0EsS0FBSUE7d0JBQzlDQTtvQkFDSkEsS0FBS0E7d0JBQ0RBLHlCQUFvQkEsQUFBcURBLCtCQUFDQTs7Z0NBQU9BLFFBQVFBLFVBQUlBLGdDQUFtQkEsTUFBTUEsaUVBQStDQSxJQUFJQSw2Q0FBeUJBO2dDQUFjQSxRQUFRQSxVQUFJQSxnQ0FBbUJBLE1BQU1BLG1FQUFpREEsSUFBSUEsOENBQTBCQTtnQ0FBY0EsT0FBT0E7K0JBQS9TQSxLQUFJQTt3QkFDOUNBO29CQUNKQSxLQUFLQTt3QkFDREEseUJBQW9CQSxBQUFxREEsK0JBQUNBOztnQ0FBT0EsUUFBUUEsVUFBSUEsZ0NBQW1CQSxNQUFNQSx5RUFBdURBLElBQUlBLDZDQUF5QkE7Z0NBQWVBLFFBQVFBLFVBQUlBLGdDQUFtQkEsTUFBTUEsaUVBQStDQSxJQUFJQSw4Q0FBMEJBO2dDQUFlQSxRQUFRQSxVQUFJQSxnQ0FBbUJBLE1BQU1BLG1FQUFpREEsSUFBSUEsOENBQTBCQTtnQ0FBZUEsT0FBT0E7K0JBQTFiQSxLQUFJQTt3QkFDOUNBO29CQUNKQSxLQUFLQTt3QkFDREEseUJBQW9CQSxBQUFxREEsK0JBQUNBOztnQ0FBT0EsUUFBUUEsVUFBSUEsZ0NBQW1CQSxNQUFNQSx5RUFBdURBLElBQUlBLDZDQUF5QkE7Z0NBQWNBLFFBQVFBLFVBQUlBLGdDQUFtQkEsTUFBTUEscUVBQW1EQSxJQUFJQSw4Q0FBMEJBLDRCQUF5QkE7Z0NBRzlWQSxRQUFRQSxVQUFJQSxnQ0FBbUJBLE1BQU1BLHVFQUFxREEsSUFBSUEsOENBQTBCQSw0QkFBeUJBO2dDQU1sSkEsT0FBT0E7K0JBVDJCQSxLQUFJQTt3QkFVOUNBO29CQUNKQTt3QkFDSUEsTUFBTUEsSUFBSUE7O2dCQUVsQkEsU0FBZUE7O2dCQUV4QkE7O2dCQUVTQSxJQUFHQSxDQUFDQTtvQkFFQUEsS0FBS0EsSUFBSUEsdUJBQVVBLFFBQVFBO29CQUMzQkE7b0JBQ0FBLElBQUdBO3dCQUVDQSxJQUFHQTs0QkFDQ0E7OztvQkFFUkEsSUFBR0EsQ0FBQ0E7d0JBRUFBLFFBQVFBLHFCQUFLQTt3QkFDYkEsSUFBR0EsUUFBUUE7NEJBQ1BBLFFBQVFBOzs7O29CQUtoQkEsWUFBWUE7b0JBQ1pBLEtBQUlBLFdBQVdBLElBQUlBLE9BQU9BO3dCQUV0QkEsVUFBVUEsK0JBQWtCQTt3QkFDNUJBO3dCQUNBQTt3QkFDQUE7d0JBQ0FBLElBQUdBLHFCQUFtQkEsb0NBQXVCQSxxQkFBb0JBOzRCQUU3REE7NEJBQ0FBOzRCQUNBQTs7Ozs7Z0JBS3JCQSx3QkFBeUJBOztnQkFFekJBLDBCQUEwQkE7Z0JBQ2pCQTtnQkFDVEEsMEJBQTBCQTtnQkFDakJBLG9CQUFvQkE7Z0JBQzdCQTtnQkFDQUE7O2dCQUVTQSxpREFBeUJBLEtBQUtBOztnQkFFdkNBLGlFQUFxQ0E7Z0JBQzVCQSxJQUFHQTtvQkFFQ0EsMEJBQTBCQTtvQkFDMUJBOztvQkFFQUEsbUJBQWNBO29CQUNkQSw2QkFBd0JBO29CQUN4QkE7b0JBQ0FBO29CQUNBQSxxQkFBZ0JBO29CQUNoQkE7b0JBQ0FBOztvQkFFQUE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBLDRCQUE0QkE7b0JBQzVCQTtvQkFDQUEsa0NBQWtDQTtvQkFDbENBOztvQkFJQUEsSUFBR0Esb0JBQW9CQTt3QkFDbkJBLG9CQUFvQkE7O29CQUN4QkEsSUFBR0Esb0JBQW9CQTt3QkFDbkJBLG9CQUFvQkE7OztvQkFFeEJBLGNBQWNBO29CQUNkQSxhQUFhQTs7O2dCQUcxQkE7Ozs7O2dCQUlBQTs7Z0JBRUFBO2dCQUNTQTs7Ozs7Ozs7c0JBeEdnWEE7WUFDaFdBLElBQUdBLHdEQUF3QkE7Z0JBQ3ZCQSxrQ0FBcUJBOzs7c0JBQzBIQTtZQUNuSkEsVUFBVUE7O1lBRVZBO1lBQ0FBO1lBQ0FBLGtEQUFxQ0E7Ozs7Ozs7OzsrRENwRzdCQTtnQkFFeEJBOzs7O3lDQUdtQ0E7Z0JBRW5DQSxJQUFHQSxDQUFDQSxpQkFBWUE7b0JBQ1pBLENBQUNBLElBQUlBLHNCQUFTQSwwQkFDSkEsK0NBQ2tCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrRENOUkE7Z0JBRXhCQSwwQkFBcUJBO2dCQU9yQkEsb0NBQStCQTs7Ozs7Z0JBVS9CQTs7dUNBR2dDQSxhQUFvQkE7Z0JBRXBEQSxJQUFHQSxvQ0FBWUE7b0JBQ1hBLGNBQVNBLGFBQWFBOzs7O2dCQUsxQkE7O3NDQUcrQkE7Z0JBRS9CQSxJQUFHQSxTQUFTQTtvQkFFUkEsaUJBQVlBO29CQUNaQTs7b0JBSUFBLElBQUdBO3dCQUVDQSxpQkFBWUEsaUJBQWVBOztvQkFFL0JBLElBQUdBLHNCQUFpQkE7d0JBRWhCQSxZQUFPQSxDQUFDQSxzQ0FBZUE7Ozs7O29DQU1GQTs7O2dDQUtKQTs7O3lDQUtVQTtnQkFFbkNBLElBQUdBLENBQUNBLGlCQUFZQTtvQkFDWkEsQ0FBQ0EsSUFBSUEsOEJBQWlCQSxpQkFDWkEsK0NBQ2tCQTs7Ozs7Ozs7O3NCQW5FVkEsS0FBS0E7WUFFdkJBLElBQUdBLHFCQUFvQkE7Z0JBRW5CQSx1QkFBa0JBLElBQUlBOzs7c0JBR0VBO1lBRTVCQSx1QkFBa0JBLElBQUlBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJDTU5BOzs7O2dCQUVwQkEsSUFBR0EscUNBQXFDQSxRQUFRQSxtREFBbURBO29CQUUvRkEseUJBQW9CQTtvQkFDcEJBLHVCQUFrQkE7O2dCQUV0QkEsUUFBUUE7O2dCQUVSQTtnQkFDQUE7O2dCQUVBQSxVQUFVQTtnQkFDVkEsSUFBR0E7b0JBQ0NBOzs7Z0JBRUpBLFlBQU9BLElBQUlBLDRCQUFRQTs7Z0JBRW5CQTs7Z0JBRUFBLG1CQUFjQTs7Z0JBRWRBLFdBQVdBOztnQkFFWEEsNENBQ0lBLG1CQUFhQSxVQUFJQSwyQ0FBcUJBLGlDQUFrQ0EsZ0dBQ2pDQSxJQUFJQSxxRUFBOENBLElBQUlBLHFIQUU3RkEsa0JBQVlBLFVBQUlBLDZEQUNIQSxJQUFJQSx3RUFBaURBLHFFQUdsRUEsYUFBUUEsVUFBSUEsdUdBQ0NBLElBQUlBLDRFQUNqQkEsaUJBQVdBLFVBQUlBLDhEQUNGQSxJQUFJQSx3RUFBaURBLHFFQUdsRUEsZUFBU0EsVUFBSUEsMERBR0FBLElBQUlBLHNGQUNEQSxxRUFHYkEsZUFBU0EsVUFBSUEsMERBR0hBLElBQUlBLHVGQUNEQSxxRUFZaEJBLGlCQUFXQSxVQUFJQSw0REFHRkEsSUFBSUEsdUZBQ0RBOztnQkFPcEJBOztnQkFFQUEsSUFBR0E7b0JBRUNBO29CQUNBQTs7b0JBRUFBO29CQUNBQTs7b0JBRUFBO29CQUNBQTs7b0JBRUFBO29CQUNBQTtvQkFDQUE7O29CQUVBQTtvQkFDQUE7b0JBQ0FBOztvQkFFQUE7b0JBQ0FBO29CQUNBQTs7b0JBRUFBO29CQUNBQTtvQkFDQUE7b0JBQ0FBO29CQUNBQTs7O2dCQUdKQSw0QkFBdUJBOztnQkF1QnZCQSxnQ0FBMkJBOztnQkFXM0JBLDZCQUF3QkE7OztnQkFjeEJBLHNCQUFzQkE7O2dCQUV0QkEsNkJBQXdCQTs7Z0JBS3hCQSxxQkFBZ0JBOzs7OztZQXZLaEJBOztZQUVBQTs7WUFFQUEsSUFBR0E7Z0JBQ0NBOzs7O1lBdUtKQTs7WUFFQUEsMEJBQXFCQTtZQUNyQkEsSUFBR0EsQ0FBQ0E7Z0JBQ0FBOztnQkFFQUEsd0JBQW1CQSx3QkFBbUJBOzs7Ozs7Ozs7c0JBN0k2QkE7WUFDM0RBLGlDQUE0QkEsc0JBQWlCQTs7c0JBS2NBO1lBQzNEQTs7c0JBTVNBO1lBQ1RBLDhCQUF5QkE7O3NCQU1oQkE7WUFDVEEsSUFBR0EsZ0NBQTBCQSxNQUFNQTtnQkFFL0JBOztZQUVKQSxJQUFHQSxtQkFBY0E7Z0JBRWJBLGdDQUEyQkE7Z0JBQzNCQTs7O3NCQVFLQTtZQUNUQSxrQkFBYUE7WUFDYkEsZ0NBQTJCQTtZQUMzQkE7O3NCQW9DWUEsS0FBS0E7WUFFekJBLElBQUdBO2dCQUVDQTtnQkFDQUE7bUJBQ0VBLElBQUdBO2dCQUVMQSxpQ0FBNEJBLHNCQUFpQkE7Z0JBQzdDQSxJQUFHQTtvQkFFQ0E7O2dCQUVKQTttQkFFQ0EsSUFBR0E7Z0JBRUpBLGtCQUFhQTtnQkFDYkE7Z0JBQ0FBOzs7c0JBSW9CQSxLQUFLQTtZQUM3QkEsSUFBR0EsOEJBQXlCQTtnQkFFeEJBLGtCQUFhQSw2QkFBZ0JBLDJCQUFzQkE7O2dCQUduREEsa0JBQWFBOztZQUVqQkEsZ0NBQTJCQTs7c0JBR05BO1lBQ3JCQSxJQUFHQSw4QkFBeUJBO2dCQUV4QkEsa0JBQWFBLDZCQUFnQkEsMkJBQXNCQTs7Z0JBSW5EQSxrQkFBYUE7O1lBRWpCQSxnQ0FBMkJBO1lBQzNCQTs7c0JBTXFCQTtZQUVyQkEsNENBQXVDQTs7Ozs7Ozs7Ozs7OzRCQzFKL0JBOzs7O2dCQUVaQSxJQUFHQSwrQkFBK0JBLFFBQVFBLDZDQUE2Q0E7b0JBRW5GQSx5QkFBb0JBO29CQUNwQkEsdUJBQWtCQTs7O2dCQUd0QkEsbUJBQWNBOztnQkFFZEEsaUJBQVlBOztnQkFFWkEsSUFBR0E7b0JBRUNBLGlCQUFZQSxJQUFJQTs7b0JBSWhCQSxpQkFBWUEsVUFBSUEsOEJBQVVBLGdDQUE4QkE7b0JBQ3hEQSwyQkFBc0JBOzs7Z0JBUTFCQSxzQkFBaUJBO2dCQUNqQkE7O2dCQUVBQTtnQkFDQUEsc0JBQWlCQSxJQUFJQTtnQkFDckJBLDBCQUFxQkEsSUFBSUE7O2dCQUV6QkEsZUFBVUEsVUFBSUEsOERBQ2lCQSxJQUFJQSx5RkFDbkJBOztnQkErQmhCQTtnQkFDQUE7Z0JBQ0FBOztnQkFFQUE7Z0JBQ0FBO2dCQUNBQTtnQkFDQUE7O2dCQUVBQSwrQkFBMEJBOztnQkFnQjFCQSx1QkFBZUEsZ0JBQVdBOzs7OztZQTVHMUJBOztZQUVBQSxZQUFlQTtZQUNmQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO2dCQUUxQkEsMkNBQXNDQTs7Z0JBSXRDQSxJQUFHQSxDQUFDQSxpQ0FBMEJBO29CQUMxQkEsMkNBQXNDQTs7OztZQUc5Q0E7OztZQW9HQUEsc0JBQWlCQSx3QkFBbUJBO1lBQ3BDQTs7Ozs7Ozs7c0JBL0UyQkEsR0FBR0E7WUFDdEJBLElBQUdBO2dCQUVDQTs7O3NCQWNLQTtZQUNUQTtZQUNBQSxJQUFHQSx1REFBNEJBO2dCQUUzQkEsc0JBQWlCQTs7Z0JBRWpCQSxJQUFHQTtvQkFFQ0EsUUFBWUE7b0JBQ1pBO29CQUNBQTtvQkFDQUEsRUFBY0EsZ0NBQTJCQSxZQUFhQTt1QkFFckRBLElBQUdBO29CQUVKQSxRQUFRQTtvQkFDUkEsZUFBZUE7b0JBQ2ZBLEtBQUlBLFdBQVdBLElBQUlBLFVBQVVBO3dCQUV6QkEsSUFBR0EscUJBQUVBLEdBQUZBLGlCQUFtQ0E7NEJBRWxDQSxzREFBRUEsR0FBRkE7NEJBQ0FBOzs7Ozs7O3NCQWtCR0E7WUFFdkJBLElBQUdBLHNEQUE0QkE7Z0JBRTNCQTtnQkFDQUE7Z0JBQ0FBOztnQkFJQUEsb0JBQWVBLHFDQUFnQ0E7Z0JBQy9DQTtnQkFDQUE7Ozs7Ozs7Ozs7MkJDMUdtQkE7Ozs7b0JBSXBDQSxJQUFHQSxDQUFDQTt3QkFFSEEsbUNBQVlBLElBQUlBO3dCQUNoQkE7O3dCQUVBQTs7Ozs7Ozs7Ozs7Ozs7Z0JBOEJEQSxpQkFBWUE7Z0JBQ1pBLG9CQUFlQSw4Q0FBcUNBLDRDQUE0QkEsZ0JBQVdBLFVBQUlBLGdFQUE4Q0EsZ0RBQWhHQSxvQkFBNkhBLFVBQUlBLGdFQUE4Q0E7O2dCQUU1TkEsb0NBQXVCQTs7Z0JBRXZCQSx5QkFBb0JBLEFBQXFEQSx1REFBL0JBLEtBQUlBO2dCQU85Q0EsaUVBQXFDQTs7Z0JBRXJDQSxhQUFhQTtnQkFDYkE7Z0JBQ0FBOztnQkFFQUEsWUFBWUE7Z0JBQ1pBLHdCQUF3QkE7Z0JBQ3hCQTs7Z0JBRUFBLGtDQUE2QkE7O2dCQUU3QkEsS0FBSUEsV0FBV0EsSUFBSUEsUUFBUUE7b0JBRTFCQSxrQkFBa0JBLHlFQUFJQSxxQ0FBc0JBLG9EQUFvQkEsa0NBQXlCQSxJQUFJQSwwR0FBbUZBLDhFQU05SkEsSUFDUkEsR0FBR0E7O29CQUViQTs7b0JBRUFBLElBQUdBO3dCQUVGQTt3QkFDQUE7Ozs7Z0JBSUZBLHNCQUFpQkE7O2dCQUVqQkEsWUFBWUEsSUFBSUE7Z0JBQ2hCQTs7Z0JBRUFBO2dCQUNBQTs7Z0JBRUFBO2dCQUNBQTtnQkFDQUE7Ozs7O1lBOUVBQTtZQUNBQTs7O1lBS0FBLElBQUdBLGdCQUFXQTtnQkFFYkE7O1lBRURBOzs7WUFLQUEsSUFBR0EsZ0JBQVdBO2dCQUViQTs7WUFFREE7Ozs7Ozs7O3NCQVV5T0E7WUFDck9BLG9DQUF1QkE7WUFDdkJBOztzQkFDb0pBO1lBQ3BKQTtZQUNBQTs7c0JBTHNFQTs7WUFBT0EsUUFBUUEsV0FBSUEsZ0NBQW1CQSxNQUFNQSwyRUFBdURBLElBQUlBLCtFQUF1REE7WUFHak9BLFFBQVFBLFdBQUlBLGdDQUFtQkEsTUFBTUEsbUVBQStDQSxJQUFJQSxnRkFBd0RBO1lBR2hKQSxPQUFPQTs7c0JBZW9LQTs7WUFDaExBLFlBQVlBO1lBQ1pBLG9EQUFvQkEsZUFBU0E7O1lBRTdCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0Qk5wRThCQSxPQUFjQTttRUFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OzhCQVk3Q0EsT0FBY0EsVUFBaUJBOzs2REFBaUJBLE9BQU9BLE1BQU1BO2dCQUVwRkEsWUFBWUEsMkNBQXNCQTtnQkFDbENBO2dCQUNBQTtnQkFDQUEsaUJBQWlCQTtvQkFDYkEsY0FBU0E7O2dCQUViQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQWNjQSxPQUFjQTtpRUFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OEJBVzdDQSxPQUFjQSxVQUFpQkE7OzZEQUFpQkEsT0FBT0EsTUFBTUE7Z0JBRWxGQSxZQUFZQSwyQ0FBc0JBO2dCQUNsQ0E7Z0JBQ0FBO2dCQUNBQSxpQkFBaUJBO29CQUFRQSxjQUFTQTs7Z0JBQ2xDQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQWNZQSxPQUFjQTsrREFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OEJBVzdDQSxPQUFjQSxVQUFpQkE7OzZEQUFpQkEsT0FBT0EsTUFBTUE7Z0JBRWhGQSxZQUFZQSwyQ0FBc0JBO2dCQUNsQ0E7Z0JBQ0FBO2dCQUNBQSxpQkFBaUJBO29CQUFRQSxjQUFTQTs7Z0JBQ2xDQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQWNxQkEsT0FBY0E7d0VBQXdCQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7OzhCQVU3Q0EsT0FBY0EsVUFBaUJBOzs2REFBaUJBLE9BQU9BLE1BQU1BO2dCQUV6RkEsY0FBU0E7Z0JBQ1RBLFlBQVlBLDJDQUFzQkE7Z0JBQ2xDQTtnQkFDQUE7Z0JBQ0FBLGlCQUFpQkE7b0JBRWJBLGNBQVNBLDJCQUFvQkEsaUNBQWlDQTs7Z0JBRWxFQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQWdCYUEsT0FBY0E7Z0VBQXdCQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7OzhCQVU3Q0EsT0FBY0EsVUFBaUJBOzs2REFBaUJBLE9BQU9BLE1BQU1BO2dCQUNqRkEsWUFBWUEsMkNBQXNCQTtnQkFDbENBO2dCQUNBQTtnQkFDQUEsaUJBQWlCQTs7O29CQUdiQSxjQUFTQTs7Z0JBRWJBLDJCQUFzQkE7Z0JBQ3RCQSxZQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBa0RhQSxPQUFjQTtnRUFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OEJBVTdDQSxPQUFjQSxVQUFpQkE7OzZEQUFpQkEsT0FBT0EsTUFBTUE7Z0JBQ2pGQSxZQUFZQSwyQ0FBc0JBO2dCQUNsQ0E7Z0JBQ0FBO2dCQUNBQSxpQkFBaUJBO29CQUNiQSxjQUFTQTs7Z0JBRWJBLDJCQUFzQkE7Z0JBQ3RCQSxZQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBa0JjQSxPQUFjQTtpRUFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OEJBVzdDQSxPQUFjQSxVQUFpQkE7OzZEQUFpQkEsT0FBT0EsTUFBTUE7Z0JBRWxGQSxZQUFZQSwyQ0FBc0JBO2dCQUNsQ0E7Z0JBQ0FBO2dCQUNBQSxpQkFBaUJBO29CQUFRQSxjQUFTQTs7Z0JBQ2xDQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQWVZQSxPQUFjQTsrREFBd0JBLE9BQU9BOzs7Ozs7Ozs7Ozs7Ozs7OEJBVzdDQSxPQUFjQSxVQUFpQkE7OzZEQUFpQkEsT0FBT0EsTUFBTUE7Z0JBRWhGQSxZQUFZQSwyQ0FBc0JBO2dCQUNsQ0E7Z0JBQ0FBO2dCQUNBQSxpQkFBaUJBO29CQUFRQSxjQUFTQTs7Z0JBQ2xDQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzRCQXpIWUEsT0FBY0E7K0RBQXdCQSxPQUFPQTs7Ozs7Ozs7Ozs7Ozs7OzhCQVU3Q0EsT0FBY0EsVUFBaUJBOzs2REFBaUJBLE9BQU9BLE1BQU1BO2dCQUNoRkEsWUFBWUEsMkNBQXNCQTtnQkFDbENBO2dCQUNBQTtnQkFDQUEsaUJBQWlCQTtvQkFDYkEsY0FBU0E7O2dCQUViQSwyQkFBc0JBO2dCQUN0QkEsWUFBT0EiLAogICJzb3VyY2VzQ29udGVudCI6IFsidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBlbnVtIENvbWJvQm94VHlwZXNcclxuXHR7XHRcdFxyXG5cdFx0RGVmYXVsdFxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgY2xhc3MgQ29udHJvbFxyXG5cdHtcdFx0XHJcblx0XHRwdWJsaWMgSFRNTEVsZW1lbnQgQ29udGVudDtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcblx0XHRwdWJsaWMgYm9vbCBIYXNSZW5kZXJlZCA9IGZhbHNlO1xyXG5cdFx0cHVibGljIGNvbnN0IHN0cmluZyBDb250cm9sQ2xhc3MgPSBcImNvbnRyb2xcIjtcclxuXHJcblx0XHRwcml2YXRlIFRvb2xUaXAgX3Rvb2xUaXAgPSBudWxsO1xyXG5cdFx0cHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudD4gX09uTW91c2VFbnRlclRvb2xUaXAgPSBudWxsO1xyXG5cdFx0cHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudD4gX09uTW91c2VMZWF2ZVRvb2xUaXAgPSBudWxsO1xyXG5cdFx0cHVibGljIFRvb2xUaXAgVG9vbFRpcFxyXG5cdFx0e1xyXG5cdFx0XHRnZXQge1xyXG5cdFx0XHRcdHJldHVybiBfdG9vbFRpcDsgfVxyXG5cdFx0XHRzZXQge1xyXG5cdFx0XHRcdGlmKF90b29sVGlwICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKHZhbHVlICE9IG51bGwpIFxyXG5cdFx0XHRcdFx0e1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZih2YWx1ZS5BdHRhY2hlZENvbnRyb2wgIT0gbnVsbCAmJiB2YWx1ZS5BdHRhY2hlZENvbnRyb2wgIT0gdGhpcylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHZhbHVlID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR2YWx1ZS5BdHRhY2hlZENvbnRyb2wgPSB0aGlzO1xyXG5cdFx0XHRcdFx0XHR9XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRfdG9vbFRpcCA9IHZhbHVlO1xyXG5cclxuXHRcdFx0XHRcdGlmKF90b29sVGlwICE9IG51bGwgJiYgKCFfdG9vbFRpcC5IZWFkaW5nLklzRW1wdHkoKSB8fCAhX3Rvb2xUaXAuRGVzY3JpcHRpb24uSXNFbXB0eSgpKSlcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0X09uTW91c2VFbnRlclRvb2xUaXAgPSAoZXYpID0+XHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpZighKHRoaXMgaXMgVG9vbFRpcENvbnRyb2wpKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdEZvcm0uQWN0aXZlVG9vbFRpcCA9IF90b29sVGlwO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0X09uTW91c2VMZWF2ZVRvb2xUaXAgPSAoZXYpID0+XHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpZighKHRoaXMgaXMgVG9vbFRpcENvbnRyb2wpKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdEZvcm0uQWN0aXZlVG9vbFRpcCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRcdFx0Q29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZUVudGVyLCBfT25Nb3VzZUVudGVyVG9vbFRpcCk7XHJcblx0XHRcdFx0XHRcdENvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VMZWF2ZSwgX09uTW91c2VMZWF2ZVRvb2xUaXApO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYoX09uTW91c2VFbnRlclRvb2xUaXAgIT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Q29udGVudC5SZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZUVudGVyLCBfT25Nb3VzZUVudGVyVG9vbFRpcCk7XHJcblx0XHRcdFx0XHRcdF9Pbk1vdXNlRW50ZXJUb29sVGlwID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKF9Pbk1vdXNlTGVhdmVUb29sVGlwICE9IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdENvbnRlbnQuUmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VMZWF2ZSwgX09uTW91c2VMZWF2ZVRvb2xUaXApO1xyXG5cdFx0XHRcdFx0XHRfT25Nb3VzZUxlYXZlVG9vbFRpcCA9IG51bGw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBBY3Rpb248Q29udHJvbD4gT25SZXNpemUgPSBudWxsO1xyXG5cdFx0cHVibGljIEFjdGlvbjxDb250cm9sPiBPbkxvYWRlZCA9IG51bGw7XHJcblxyXG5cdFx0cHVibGljIENvbnRleHRNZW51IENvbnRleHRNZW51ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIENTU1N0eWxlRGVjbGFyYXRpb24gU3R5bGUge2dldHtyZXR1cm4gQ29udGVudC5TdHlsZTt9fVxyXG4gICAgICAgIHB1YmxpYyBET01Ub2tlbkxpc3QgQ2xhc3NMaXN0IHtnZXR7cmV0dXJuIENvbnRlbnQuQ2xhc3NMaXN0O319XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgU2V0QXR0cmlidXRlKHN0cmluZyBuYW1lLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlLlRvU3RyKCkpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RyaW5nIEdldEF0dHJpYnV0ZShzdHJpbmcgbmFtZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuQ29udGVudC5HZXRBdHRyaWJ1dGUobmFtZSk7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgaW50IEdldEF0dHJpYnV0ZWkoc3RyaW5nIG5hbWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBHbG9iYWwuUGFyc2VJbnQodGhpcy5Db250ZW50LkdldEF0dHJpYnV0ZShuYW1lKSk7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgZmxvYXQgR2V0QXR0cmlidXRlZihzdHJpbmcgbmFtZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdCh0aGlzLkNvbnRlbnQuR2V0QXR0cmlidXRlKG5hbWUpKTtcclxuXHRcdH1cclxuXHRcdHB1YmxpYyBGb3JtIExpbmtlZEZvcm0gPSBudWxsO1x0XHRcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBCYXNlQ2xhc3MoYm9vbCBhZGQgPSB0cnVlLCBib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIGFjID8gKGFkZCA/IFwiIFwiICsgQ29udHJvbENsYXNzIDpcclxuXHRcdFx0XHRDb250cm9sQ2xhc3MpIDogXCJcIjtcclxuXHRcdH1cdFx0XHJcblxyXG5cdFx0cHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gV2lkdGhcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIHRoaXMuQ29udGVudC5TdHlsZS5XaWR0aDsgfVxyXG5cdFx0XHRzZXQge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSB2YWx1ZS5Ub0h0bWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgeCA9IFZlY3RvcjIucGYoeCk7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLkNvbnRlbnQuU3R5bGUuV2lkdGggIT0geClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU3R5bGUuV2lkdGggPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIE9uU2l6ZUNoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gSGVpZ2h0XHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiB0aGlzLkNvbnRlbnQuU3R5bGUuSGVpZ2h0OyB9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHZhbHVlLlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gVmVjdG9yMi5wZih4KTtcclxuICAgICAgICAgICAgICAgIGlmKHggIT0gdGhpcy5Db250ZW50LlN0eWxlLkhlaWdodClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU3R5bGUuSGVpZ2h0ID0geDtcclxuICAgICAgICAgICAgICAgICAgICBPblNpemVDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gTGVmdFxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gdGhpcy5Db250ZW50LlN0eWxlLkxlZnQ7IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gdmFsdWUuVG9IdG1sVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHggPSBWZWN0b3IyLnBmKHgpO1xyXG4gICAgICAgICAgICAgICAgaWYoeCAhPSB0aGlzLkNvbnRlbnQuU3R5bGUuTGVmdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Mb2NhdGlvbkNoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFRvcFxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gdGhpcy5Db250ZW50LlN0eWxlLlRvcDsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSB2YWx1ZS5Ub0h0bWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgeCA9IFZlY3RvcjIucGYoeCk7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLkNvbnRlbnQuU3R5bGUuVG9wICE9IHgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LlN0eWxlLlRvcCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Mb2NhdGlvbkNoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIE9uTG9jYXRpb25DaGFuZ2VkKClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBPblNpemVDaGFuZ2VkKClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlY3RvcjIgU2l6ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5XaWR0aCwgdGhpcy5IZWlnaHQpOyB9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5XaWR0aCA9IHZhbHVlLlg7XHJcblx0XHRcdFx0dGhpcy5IZWlnaHQgPSB2YWx1ZS5ZOyAgICAgICAgICAgICAgICBcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBWZWN0b3IyIExvY2F0aW9uXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBuZXcgVmVjdG9yMih0aGlzLkxlZnQsIHRoaXMuVG9wKTsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuTGVmdCA9IHZhbHVlLlg7XHJcblx0XHRcdFx0dGhpcy5Ub3AgPSB2YWx1ZS5ZO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIFZlY3RvcjQgQm91bmRzXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBuZXcgVmVjdG9yNCh0aGlzLkxlZnQsIHRoaXMuVG9wLCB0aGlzLldpZHRoLCB0aGlzLkhlaWdodCk7IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLkxlZnQgPSB2YWx1ZS5YO1xyXG5cdFx0XHRcdHRoaXMuVG9wID0gdmFsdWUuWTtcclxuXHRcdFx0XHR0aGlzLldpZHRoID0gdmFsdWUuWjtcclxuXHRcdFx0XHR0aGlzLkhlaWdodCA9IHZhbHVlLk07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRJbWFnZVN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICB7XHJcblx0XHRcdHJldHVybiBzdHJpbmcuRm9ybWF0KFwidXJsKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsezB9Jykgbm8tcmVwZWF0XCIsIHMpO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRQZGZTdHJpbmcoc3RyaW5nIHMpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBzdHJpbmcuRm9ybWF0KFwiZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LHswfVwiLCBzKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBHZXRJbWFnZVN0cmluZ1VSSShzdHJpbmcgcywgYm9vbCB1c2VSZXNvdXJjZVVSTCA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInVybCgnezB9ezF9Jykgbm8tcmVwZWF0XCIsIHVzZVJlc291cmNlVVJMID8gU2V0dGluZ3MuUmVzb3VyY2VVUkwgOiBcIlwiLCBzKTtcclxuICAgICAgICB9XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBDb250cm9sKGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRDb250ZW50ID0gRGl2KGFjKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgQ29udHJvbChIVE1MRWxlbWVudCBlbGVtZW50KVxyXG5cdFx0e1xyXG5cdFx0XHRDb250ZW50ID0gZWxlbWVudDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgQ29udHJvbChzdHJpbmcgY24sIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRDb250ZW50ID0gRGl2KGNuLCBhYyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIENvbnRyb2woc3RyaW5nIGNuLCBCdXR0b25UeXBlIGJ0LCBib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0Q29udGVudCA9IEJ1dHRvbihjbiwgYnQsIGFjKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgQ29udHJvbChzdHJpbmcgY24sIENvbWJvQm94VHlwZXMgY3QsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRDb250ZW50ID0gQ29tYm9Cb3goY24sIGN0LCBhYyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIENvbnRyb2woc3RyaW5nIGNuLCBJbnB1dFR5cGUgaXQsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRDb250ZW50ID0gSW5wdXQoY24sIGl0LCBhYyk7XHRcdFx0XHJcblx0XHR9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBSZW5kZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRIYXNSZW5kZXJlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBIVE1MRGl2RWxlbWVudCBEaXYoYm9vbCBhYyA9IHRydWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBuZXcgSFRNTERpdkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IEJhc2VDbGFzcyhmYWxzZSwgYWMpIH07XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBIVE1MU3BhbkVsZW1lbnQgU3Bhbihib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG5ldyBIVE1MU3BhbkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IEJhc2VDbGFzcyhmYWxzZSwgYWMpIH07XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBIVE1MU3BhbkVsZW1lbnQgTGFiZWwoc3RyaW5nIENhcHRpb24sIGZsb2F0IFgsIGZsb2F0IFksIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbGJsID0gbmV3IEhUTUxTcGFuRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gQmFzZUNsYXNzKGZhbHNlLCBhYykgfTtcclxuXHJcblx0XHRcdGxibC5Jbm5lckhUTUwgPSBDYXB0aW9uLkh0bWxFc2NhcGUoKTtcclxuXHRcdFx0bGJsLlNldExvY2F0aW9uKFgsIFkpO1xyXG4gICAgICAgICAgICBTZXRCVChsYmwsIElzQm9sZCwgSXNUaW55KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsYmw7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBIVE1MU3BhbkVsZW1lbnQgTGFiZWwoc3RyaW5nIENhcHRpb24sIGZsb2F0IFgsIGZsb2F0IFksIGZsb2F0IHdpZHRoLCBmbG9hdCBoZWlnaHQsIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIHN0cmluZyBjbGFzc3IgPSBcIlwiLCBUZXh0QWxpZ24gQWxpZ25tZW50ID0gVGV4dEFsaWduLkxlZnQsIHN0cmluZyBGb3JlY29sb3IgPSBudWxsLCBib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIGxibCA9IG5ldyBIVE1MU3BhbkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IGNsYXNzciArIEJhc2VDbGFzcyghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShjbGFzc3IpLCBhYykgfTtcclxuXHJcblx0XHRcdGxibC5Jbm5lckhUTUwgPSBDYXB0aW9uLkh0bWxFc2NhcGUoKTtcclxuXHRcdFx0bGJsLlNldEJvdW5kcyhYLCBZLCB3aWR0aCwgaGVpZ2h0KTtcdFx0XHRcclxuXHRcdFx0aWYoQWxpZ25tZW50ICE9IFRleHRBbGlnbi5MZWZ0KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGJsLlN0eWxlLlRleHRBbGlnbiA9IEFsaWdubWVudDtcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICBTZXRCVChsYmwsIElzQm9sZCwgSXNUaW55KTtcclxuICAgICAgICAgICAgaWYgKEZvcmVjb2xvciAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGJsLlN0eWxlLkNvbG9yID0gRm9yZWNvbG9yO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gbGJsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBDYXB0aW9uLCBmbG9hdCBYLCBmbG9hdCBZLCBmbG9hdCB3aWR0aCwgYm9vbCBJc0JvbGQgPSBmYWxzZSwgYm9vbCBJc1RpbnkgPSBmYWxzZSwgc3RyaW5nIGNsYXNzciA9IFwiXCIsIFRleHRBbGlnbiBBbGlnbm1lbnQgPSBUZXh0QWxpZ24uTGVmdCwgc3RyaW5nIEZvcmVjb2xvciA9IG51bGwsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbGJsID0gbmV3IEhUTUxTcGFuRWxlbWVudCgpO1xyXG5cdFx0XHRsYmwuQ2xhc3NOYW1lID0gY2xhc3NyICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNsYXNzciksIGFjKTtcclxuICAgICAgICAgICAgbGJsLlRleHRDb250ZW50ID0gQ2FwdGlvbjtcclxuICAgICAgICAgICAgbGJsLlN0eWxlLkxlZnQgPSBYLlRvUHgoKTtcclxuICAgICAgICAgICAgbGJsLlN0eWxlLlRvcCA9IFkuVG9QeCgpO1xyXG4gICAgICAgICAgICBsYmwuU3R5bGUuV2lkdGggPSB3aWR0aC5Ub1B4KCk7XHJcblxyXG5cdFx0XHRpZihBbGlnbm1lbnQgIT0gVGV4dEFsaWduLkxlZnQpXHJcblx0XHRcdHtcdFx0XHRcdFxyXG5cdFx0XHRcdGlmKEFsaWdubWVudCA9PSBUZXh0QWxpZ24uUmlnaHQpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bGJsLlN0eWxlLkRpcmVjdGlvbiA9IERpcmVjdGlvbi5SdGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRsYmwuU3R5bGUuVGV4dEFsaWduID0gQWxpZ25tZW50O1xyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHR9XHJcbiAgICAgICAgICAgIFNldEJUKGxibCwgSXNCb2xkLCBJc1RpbnkpO1xyXG4gICAgICAgICAgICBpZiAoRm9yZWNvbG9yICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRsYmwuU3R5bGUuQ29sb3IgPSBGb3JlY29sb3I7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBsYmw7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZvY3VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5Gb2N1cygpO1xyXG4gICAgICAgICAgICB9KSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIFNldEJUKEhUTUxTcGFuRWxlbWVudCBsYmwsIGJvb2wgSXNCb2xkLCBib29sIElzVGlueSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChJc0JvbGQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxibC5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKElzVGlueSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGJsLlN0eWxlLkZvbnRTaXplID0gXCI2Ljc1cHRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIEhUTUxTcGFuRWxlbWVudCBMYWJlbChzdHJpbmcgYywgZmxvYXQgWCwgZmxvYXQgWSwgZmxvYXQgd2lkdGgsIGZsb2F0IGhlaWdodCwgYm9vbCBJc0JvbGQgPSBmYWxzZSwgYm9vbCBJc1RpbnkgPSBmYWxzZSwgc3RyaW5nIGNsYXNzciA9XCJcIiwgYm9vbCBhYyA9IHRydWUpXHJcblx0XHR7XHJcblx0XHRcdHZhciBsYmwgPSBuZXcgSFRNTFNwYW5FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbGFzc3IgKyBCYXNlQ2xhc3MoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY2xhc3NyKSwgYWMpIH07XHJcblxyXG5cdFx0ICAgIGxibC5Jbm5lckhUTUwgPSBjLkh0bWxFc2NhcGUoKTtcclxuXHRcdFx0bGJsLlNldEJvdW5kcyhYLCBZLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgU2V0QlQobGJsLCBJc0JvbGQsIElzVGlueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbGJsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBjLCBpbnQgWCwgaW50IFksIGludCB3aWR0aCwgYm9vbCBJc0JvbGQgPSBmYWxzZSwgYm9vbCBJc1RpbnkgPSBmYWxzZSwgc3RyaW5nIGNsYXNzciA9IFwiXCIsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbGJsID0gbmV3IEhUTUxTcGFuRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gY2xhc3NyICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNsYXNzciksIGFjKSB9O1xyXG5cclxuXHRcdFx0bGJsLklubmVySFRNTCA9IGMuSHRtbEVzY2FwZSgpO1xyXG5cdFx0XHRsYmwuU2V0TG9jYXRpb24oWCwgWSk7XHJcblx0XHRcdGxibC5TdHlsZS5XaWR0aCA9IHdpZHRoLlRvUHgoKTtcclxuXHRcdFx0U2V0QlQobGJsLCBJc0JvbGQsIElzVGlueSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gbGJsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IExhYmVsKHN0cmluZyBjLCBpbnQgWCwgaW50IFksIGJvb2wgSXNCb2xkID0gZmFsc2UsIGJvb2wgSXNUaW55ID0gZmFsc2UsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gTGFiZWwoYywgKGZsb2F0KVgsIChmbG9hdClZLCBJc0JvbGQsIElzVGlueSwgYWMpO1x0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTFNwYW5FbGVtZW50IFNwYW4oc3RyaW5nIGNuLCBib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIG5ldyBIVE1MU3BhbkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IGNuICsgQmFzZUNsYXNzKHRydWUsIGFjKSB9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTFNlbGVjdEVsZW1lbnQgQ29tYm9Cb3goc3RyaW5nIGNuLCBDb21ib0JveFR5cGVzIGN0LCBib29sIGFjID0gdHJ1ZSlcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0dmFyIGNvbWJvID0gbmV3IEhUTUxTZWxlY3RFbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbiArIEJhc2VDbGFzcyh0cnVlLCBhYykgfTtcclxuXHRcdFx0aWYoY3QgPT0gQ29tYm9Cb3hUeXBlcy5EZWZhdWx0KVxyXG5cdFx0XHR7XHJcblxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBjb21ibztcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIEhUTUxCdXR0b25FbGVtZW50IEJ1dHRvbihzdHJpbmcgY24sIEJ1dHRvblR5cGUgYnQsIGJvb2wgYWMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gbmV3IEhUTUxCdXR0b25FbGVtZW50KCkgeyBDbGFzc05hbWUgPSBjbiArIEJhc2VDbGFzcyh0cnVlLCBhYyksIFR5cGUgPSBidCB9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTERpdkVsZW1lbnQgRGl2KHN0cmluZyBjbiwgYm9vbCBhYyA9IHRydWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBuZXcgSFRNTERpdkVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IGNuICsgQmFzZUNsYXNzKHRydWUsIGFjKSB9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTElucHV0RWxlbWVudCBJbnB1dChzdHJpbmcgY24sIElucHV0VHlwZSBpdCwgYm9vbCBhYyA9IHRydWUpXHJcblx0XHR7XHJcblx0XHRcdHZhciBpbnB1dCA9IG5ldyBIVE1MSW5wdXRFbGVtZW50KCk7XHJcblx0XHRcdGlucHV0LkNsYXNzTmFtZSA9IGNuICsgQmFzZUNsYXNzKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGNuKSwgYWMpO1xyXG5cdFx0XHRkeW5hbWljIHR5ID0gaXQ7XHJcblx0XHRcdGlmKEJyb3dzZXIuSXNJRSAmJiAodHkgPT0gXCJ0ZXh0XCIgfHwgdHkgPT0gXCJkYXRlXCIgfHwgdHkgPT0gXCJjb2xvclwiIHx8IHR5ID09IDE5IHx8IHR5ID09IDMgfHwgdHkgPT0gMikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gaW5wdXQ7XHJcblx0XHRcdH1cclxuXHRcdFx0aW5wdXQuVHlwZSA9IGl0O1xyXG5cclxuXHRcdFx0cmV0dXJuIGlucHV0O1xyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIEhUTUxDYW52YXNFbGVtZW50IGN2YSA9IG51bGw7XHJcblxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgVGV4dCBNZXRyaWNzIGZvciBhIGdpdmVuIHN0cmluZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidFwiPnRoZSBzdHJpbmc8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImZcIj50aGUgZm9udCB1c2VkPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+VGV4dE1ldHJpY3M8L3JldHVybnM+XHJcblx0XHRwdWJsaWMgc3RhdGljIFRleHRNZXRyaWNzIEdldFRleHRNZXRyaWNzKHN0cmluZyB0LCBzdHJpbmcgZilcclxuXHRcdHtcclxuICAgICAgICAgICAgaWYoZiA9PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmID0gXCI4LjI1cHQgVGFob21hXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGMgPSAoY3ZhID8/IChjdmEgPSBuZXcgSFRNTENhbnZhc0VsZW1lbnQoKSkpLkdldENvbnRleHQoQ2FudmFzVHlwZXMuQ2FudmFzQ29udGV4dDJEVHlwZS5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpLkFzPENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD4oKTtcclxuICAgICAgICAgICAgYy5Gb250ID0gZjtcclxuICAgICAgICAgICAgcmV0dXJuIGMuTWVhc3VyZVRleHQodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFJldHVybnMgdGV4dCB3aWR0aFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidFwiPnRoZSBzdHJpbmc8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImZcIj50aGUgZm9udCB1c2VkPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHJldHVybnM+ZG91YmxlPC9yZXR1cm5zPlxyXG5cdFx0cHVibGljIHN0YXRpYyBkb3VibGUgR2V0VGV4dFdpZHRoKHN0cmluZyB0LCBzdHJpbmcgZilcclxuXHRcdHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldFRleHRNZXRyaWNzKHQsIGYpLldpZHRoO1x0XHJcblx0XHR9ICAgICAgICBcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIE5vZGUoQ29udHJvbCBjb250cm9sKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihTZXR0aW5ncy5BdXRvUmVuZGVyICYmICFjb250cm9sLkhhc1JlbmRlcmVkKVx0XHRcdFxyXG5cdFx0XHRcdGNvbnRyb2wuUmVuZGVyKCk7XHRcdFx0XHJcblx0XHRcdHJldHVybiBjb250cm9sLkNvbnRlbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2hhbmdlU3RhdGUoYm9vbCBzLCBzdHJpbmcgc2YgPSBcImRpc2FibGVkXCIpXHJcblx0XHR7XHRcdFx0XHJcblx0XHRcdGlmKHMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRDb250ZW50LkNsYXNzTGlzdC5SZW1vdmUoc2YpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdENvbnRlbnQuQ2xhc3NMaXN0LkFkZChzZik7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVx0XHRcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIEFwcFxyXG5cdHtcclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKClcclxuXHRcdHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgU2V0dGluZ3MuU2V0dXAoKTsgICAgICAgICAgICBcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgZW51bSBBcHBsaWNhdGlvbkRlZml0bmlvblxyXG5cdHtcclxuXHRcdE5vbmUsXHJcblx0XHRCcm93c2VyQ29uc29sZSxcclxuXHRcdEJyaWRnZUNvbnNvbGUsXHJcblx0XHRFeHByZXNzQ3JhZnRDb25zb2xlXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIGNsYXNzIEFwcGxpY2F0aW9uXHJcbiAgICB7XHJcblx0XHRwdWJsaWMgc3RhdGljIEZvcm0gTWFpbkZvcm0gPSBudWxsO1x0XHRcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIENsb3NlKClcclxuICAgICAgICB7XHJcblx0XHRcdGlmKE1haW5Gb3JtICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRNYWluRm9ybS5DbG9zZSgpO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgICAgIFdpbmRvdy5DbG9zZSgpO1xyXG4gICAgICAgICAgICBXaW5kb3cuTG9jYXRpb24uUmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIEFwcGxpY2F0aW9uRGVmaXRuaW9uIF9hcHBsaWNhdGlvbkRlZml0aW9uID0gQXBwbGljYXRpb25EZWZpdG5pb24uQnJpZGdlQ29uc29sZTtcclxuXHRcdHB1YmxpYyBzdGF0aWMgQXBwbGljYXRpb25EZWZpdG5pb24gQXBsaWNhdGlvbkRlZml0aW9uIHsgZ2V0IHsgcmV0dXJuIF9hcHBsaWNhdGlvbkRlZml0aW9uOyB9IH1cclxuXHRcdFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBSdW4oRm9ybSBfTWFpbmZvcm0pXHJcblx0XHR7ICAgICAgICAgICBcclxuICAgICAgICAgICAgTWFpbkZvcm0gPSBfTWFpbmZvcm07XHJcblx0XHRcdE1haW5Gb3JtLlNob3dTdGFydE5ld0xldmVsKCk7XHJcblx0XHR9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQmFyY29kZVF1YWdnYUpTXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxRdWFnZ2FKUyA9IG5ldyBFeHRlcm5hbFBsdWdpbihcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3F1YWdnYS8wLjEyLjEvcXVhZ2dhLm1pbi5qc1wiKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldHVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEV4dGVybmFsUXVhZ2dhSlMuU2V0dXAodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRGVjb2RlU2luZ2xlKHN0cmluZyBzb3VyY2UsIEFjdGlvbjxzdHJpbmc+IG9uRGV0ZWN0LCBBY3Rpb24gb25Ob0RldGVjdCA9IG51bGwsIGJvb2wgbG9jYXRlID0gdHJ1ZSwgUmVhZGVycyByZWFkZXIgPSBSZWFkZXJzLkNvZGVfMzlfUmVhZGVyLCBib29sIHNvdXJjZUlzQmFzZTY0ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighRXh0ZXJuYWxRdWFnZ2FKUy5TZXR1cENvbXBsZXRlZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKG9uRGV0ZWN0ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgY29kZU5hbWUgPSByZWFkZXIuVG9TdHJpbmcoXCJHXCIpLlRvTG93ZXIoKTtcclxuICAgICAgICAgICAgaWYoY29kZU5hbWUuU3RhcnRzV2l0aChcIl9cIikpXHJcbiAgICAgICAgICAgICAgICBjb2RlTmFtZSA9IGNvZGVOYW1lLlN1YnN0cmluZygxKTtcclxuICAgICAgICAgICAgaWYoc291cmNlSXNCYXNlNjQgJiYgIXNvdXJjZS5TdGFydHNXaXRoKFwiZGF0YTppbWFnZVwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc291cmNlID0gXCJkYXRhOmltYWdlL2pwZztiYXNlNjQsXCIgKyBzb3VyY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLypAXHRcdFx0XHJcbiAgICAgICAgICAgIFF1YWdnYS5kZWNvZGVTaW5nbGUoe1xyXG4gICAgICAgICAgICAgICAgZGVjb2Rlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlcnM6IFtjb2RlTmFtZV0gLy8gTGlzdCBvZiBhY3RpdmUgcmVhZGVyc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxvY2F0ZTogbG9jYXRlLFxyXG4gICAgICAgICAgICAgICAgc3JjOiBzb3VyY2VcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ob25kLCBvbm5kKSB7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LmNvZGVSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25kKHJlc3VsdC5jb2RlUmVzdWx0LmNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9ubmQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25uZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KG9uRGV0ZWN0LCBvbk5vRGV0ZWN0KSk7ICAgICAgICBcclxuICAgICAgICAgICAgKi9cclxuXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGVudW0gUmVhZGVyc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29kZV8xMjhfUmVhZGVyLFxyXG4gICAgICAgICAgICBFYW5fUmVhZGVyLFxyXG4gICAgICAgICAgICBFYW5fOF9SZWFkZXIsXHJcbiAgICAgICAgICAgIENvZGVfMzlfUmVhZGVyLFxyXG4gICAgICAgICAgICBDb2RlXzM5X1Zpbl9SZWFkZXIsXHJcbiAgICAgICAgICAgIENvZGFiYXJfUmVhZGVyLFxyXG4gICAgICAgICAgICBVcGNfUmVhZGVyLFxyXG4gICAgICAgICAgICBVcGNfZV9SZWFkZXIsXHJcbiAgICAgICAgICAgIEkyb2Y1X1JlYWRlcixcclxuICAgICAgICAgICAgXzJvZjVfUmVhZGVyLFxyXG4gICAgICAgICAgICBDb2RlXzkzX1JlYWRlcixcclxuICAgICAgICB9XHJcbi8vICAgICAgICBRdWFnZ2EuZGVjb2RlU2luZ2xlKHtcclxuLy8gICAgZGVjb2Rlcjoge1xyXG4vLyAgICAgICAgcmVhZGVyczogW1wiY29kZV8xMjhfcmVhZGVyXCJdIC8vIExpc3Qgb2YgYWN0aXZlIHJlYWRlcnNcclxuLy8gICAgfSxcclxuLy8gICAgbG9jYXRlOiB0cnVlLCAvLyB0cnkgdG8gbG9jYXRlIHRoZSBiYXJjb2RlIGluIHRoZSBpbWFnZVxyXG4vLyAgICBzcmM6ICcvdGVzdC9maXh0dXJlcy9jb2RlXzEyOC9pbWFnZS0wMDEuanBnJyAvLyBvciAnZGF0YTppbWFnZS9qcGc7YmFzZTY0LCcgKyBkYXRhXHJcbi8vfSwgZnVuY3Rpb24ocmVzdWx0KXtcclxuLy8gICAgaWYocmVzdWx0LmNvZGVSZXN1bHQpIHtcclxuLy8gICAgICAgIGNvbnNvbGUubG9nKFwicmVzdWx0XCIsIHJlc3VsdC5jb2RlUmVzdWx0LmNvZGUpO1xyXG4vLyAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgY29uc29sZS5sb2coXCJub3QgZGV0ZWN0ZWRcIik7XHJcbi8vICAgIH1cclxuLy99KTtcclxuXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcdFxyXG5cdHB1YmxpYyBzdHJ1Y3QgQ29sb3JcclxuXHR7XHJcblx0XHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENvbG9yIEVtcHR5O1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgc2hvcnQgU3RhdGVLbm93bkNvbG9yVmFsaWQ7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBzaG9ydCBTdGF0ZUFSR0JWYWx1ZVZhbGlkO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgc2hvcnQgU3RhdGVWYWx1ZU1hc2s7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBzaG9ydCBTdGF0ZU5hbWVWYWxpZDtcclxuXHRcdHByaXZhdGUgc3RhdGljIGxvbmcgTm90RGVmaW5lZFZhbHVlO1xyXG5cdFx0cHJpdmF0ZSBjb25zdCBpbnQgQVJHQkFscGhhU2hpZnQgPSAweDE4O1xyXG5cdFx0cHJpdmF0ZSBjb25zdCBpbnQgQVJHQlJlZFNoaWZ0ID0gMHgxMDtcclxuXHRcdHByaXZhdGUgY29uc3QgaW50IEFSR0JHcmVlblNoaWZ0ID0gODtcclxuXHRcdHByaXZhdGUgY29uc3QgaW50IEFSR0JCbHVlU2hpZnQgPSAwO1xyXG5cdFx0cHJpdmF0ZSByZWFkb25seSBzdHJpbmcgbmFtZTtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9uZyB2YWx1ZTtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc2hvcnQga25vd25Db2xvcjtcclxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc2hvcnQgc3RhdGU7XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFRyYW5zcGFyZW50XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlRyYW5zcGFyZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBBbGljZUJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQWxpY2VCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBBbnRpcXVlV2hpdGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQW50aXF1ZVdoaXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBBcXVhXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkFxdWEpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEFxdWFtYXJpbmVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQXF1YW1hcmluZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQXp1cmVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQXp1cmUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEJlaWdlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkJlaWdlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBCaXNxdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQmlzcXVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBCbGFja1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5CbGFjayk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQmxhbmNoZWRBbG1vbmRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQmxhbmNoZWRBbG1vbmQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQmx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQmx1ZVZpb2xldFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5CbHVlVmlvbGV0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBCcm93blxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Ccm93bik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQnVybHlXb29kXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkJ1cmx5V29vZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQ2FkZXRCbHVlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkNhZGV0Qmx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQ2hhcnRyZXVzZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5DaGFydHJldXNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBDaG9jb2xhdGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ2hvY29sYXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBDb3JhbFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Db3JhbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgQ29ybmZsb3dlckJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ29ybmZsb3dlckJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIENvcm5zaWxrXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkNvcm5zaWxrKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBDcmltc29uXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkNyaW1zb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEN5YW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuQ3lhbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya0JsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0JsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERhcmtDeWFuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtDeWFuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrR29sZGVucm9kXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtHb2xkZW5yb2QpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERhcmtHcmF5XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtHcmF5KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0dyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrS2hha2lcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya0toYWtpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrTWFnZW50YVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrTWFnZW50YSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya09saXZlR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya09saXZlR3JlZW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERhcmtPcmFuZ2VcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya09yYW5nZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya09yY2hpZFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrT3JjaGlkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrUmVkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtSZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERhcmtTYWxtb25cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya1NhbG1vbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya1NlYUdyZWVuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtTZWFHcmVlbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya1NsYXRlQmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrU2xhdGVCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEYXJrU2xhdGVHcmF5XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkRhcmtTbGF0ZUdyYXkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERhcmtUdXJxdW9pc2VcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGFya1R1cnF1b2lzZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGFya1Zpb2xldFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EYXJrVmlvbGV0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBEZWVwUGlua1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5EZWVwUGluayk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRGVlcFNreUJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGVlcFNreUJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIERpbUdyYXlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRGltR3JheSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRG9kZ2VyQmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Eb2RnZXJCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBGaXJlYnJpY2tcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRmlyZWJyaWNrKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBGbG9yYWxXaGl0ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5GbG9yYWxXaGl0ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRm9yZXN0R3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRm9yZXN0R3JlZW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEZ1Y2hzaWFcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuRnVjaHNpYSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgR2FpbnNib3JvXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkdhaW5zYm9ybyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgR2hvc3RXaGl0ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5HaG9zdFdoaXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBHb2xkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkdvbGQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEdvbGRlbnJvZFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Hb2xkZW5yb2QpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEdyYXlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuR3JheSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuR3JlZW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEdyZWVuWWVsbG93XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkdyZWVuWWVsbG93KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBIb25leWRld1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Ib25leWRldyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgSG90UGlua1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Ib3RQaW5rKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBJbmRpYW5SZWRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuSW5kaWFuUmVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBJbmRpZ29cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuSW5kaWdvKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBJdm9yeVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Jdm9yeSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgS2hha2lcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuS2hha2kpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExhdmVuZGVyXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxhdmVuZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBMYXZlbmRlckJsdXNoXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxhdmVuZGVyQmx1c2gpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExhd25HcmVlblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MYXduR3JlZW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExlbW9uQ2hpZmZvblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MZW1vbkNoaWZmb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0Qmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodEJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0Q29yYWxcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRDb3JhbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRDeWFuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0Q3lhbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRHb2xkZW5yb2RZZWxsb3dcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRHb2xkZW5yb2RZZWxsb3cpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0R3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRHcmVlbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRHcmF5XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0R3JheSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRQaW5rXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0UGluayk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRTYWxtb25cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRTYWxtb24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0U2VhR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRTZWFHcmVlbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRTa3lCbHVlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0U2t5Qmx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGlnaHRTbGF0ZUdyYXlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGlnaHRTbGF0ZUdyYXkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIExpZ2h0U3RlZWxCbHVlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLkxpZ2h0U3RlZWxCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBMaWdodFllbGxvd1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaWdodFllbGxvdyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTGltZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBMaW1lR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTGltZUdyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBMaW5lblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5MaW5lbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTWFnZW50YVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NYWdlbnRhKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNYXJvb25cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWFyb29uKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1BcXVhbWFyaW5lXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1lZGl1bUFxdWFtYXJpbmUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bUJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtQmx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtT3JjaGlkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1lZGl1bU9yY2hpZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtUHVycGxlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1lZGl1bVB1cnBsZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTWVkaXVtU2VhR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtU2VhR3JlZW4pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bVNsYXRlQmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5NZWRpdW1TbGF0ZUJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIE1lZGl1bVNwcmluZ0dyZWVuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk1lZGl1bVNwcmluZ0dyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1UdXJxdW9pc2VcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtVHVycXVvaXNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNZWRpdW1WaW9sZXRSZWRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWVkaXVtVmlvbGV0UmVkKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNaWRuaWdodEJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWlkbmlnaHRCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNaW50Q3JlYW1cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWludENyZWFtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNaXN0eVJvc2VcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTWlzdHlSb3NlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBNb2NjYXNpblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Nb2NjYXNpbik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgTmF2YWpvV2hpdGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTmF2YWpvV2hpdGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIE5hdnlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuTmF2eSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgT2xkTGFjZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5PbGRMYWNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBPbGl2ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5PbGl2ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgT2xpdmVEcmFiXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9saXZlRHJhYik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgT3JhbmdlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9yYW5nZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgT3JhbmdlUmVkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9yYW5nZVJlZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgT3JjaGlkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLk9yY2hpZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgUGFsZUdvbGRlbnJvZFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QYWxlR29sZGVucm9kKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBQYWxlR3JlZW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGFsZUdyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBQYWxlVHVycXVvaXNlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBhbGVUdXJxdW9pc2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFBhbGVWaW9sZXRSZWRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGFsZVZpb2xldFJlZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgUGFwYXlhV2hpcFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QYXBheWFXaGlwKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBQZWFjaFB1ZmZcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGVhY2hQdWZmKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBQZXJ1XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBlcnUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFBpbmtcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuUGluayk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgUGx1bVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QbHVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBQb3dkZXJCbHVlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlBvd2RlckJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFB1cnBsZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5QdXJwbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFJlZFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5SZWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFJvc3lCcm93blxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Sb3N5QnJvd24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFJveWFsQmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Sb3lhbEJsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFNhZGRsZUJyb3duXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNhZGRsZUJyb3duKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTYWxtb25cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2FsbW9uKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTYW5keUJyb3duXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNhbmR5QnJvd24pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFNlYUdyZWVuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNlYUdyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTZWFTaGVsbFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5TZWFTaGVsbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgU2llbm5hXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNpZW5uYSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgU2lsdmVyXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNpbHZlcik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgU2t5Qmx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5Ta3lCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTbGF0ZUJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2xhdGVCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTbGF0ZUdyYXlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU2xhdGVHcmF5KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTbm93XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNub3cpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFNwcmluZ0dyZWVuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlNwcmluZ0dyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBTdGVlbEJsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuU3RlZWxCbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBUYW5cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVGFuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBUZWFsXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlRlYWwpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFRoaXN0bGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuVGhpc3RsZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgVG9tYXRvXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlRvbWF0byk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgVHVycXVvaXNlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlR1cnF1b2lzZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgVmlvbGV0XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlZpb2xldCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgV2hlYXRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IENvbG9yKEtub3duQ29sb3IuV2hlYXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFdoaXRlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLldoaXRlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBXaGl0ZVNtb2tlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLldoaXRlU21va2UpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFllbGxvd1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBuZXcgQ29sb3IoS25vd25Db2xvci5ZZWxsb3cpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIFllbGxvd0dyZWVuXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBDb2xvcihLbm93bkNvbG9yLlllbGxvd0dyZWVuKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGludGVybmFsIENvbG9yKEtub3duQ29sb3Iga25vd25Db2xvcilcclxuXHRcdHtcclxuXHRcdFx0dGhpcy52YWx1ZSA9IDBMO1xyXG5cdFx0XHR0aGlzLnN0YXRlID0gU3RhdGVLbm93bkNvbG9yVmFsaWQ7XHJcblx0XHRcdHRoaXMubmFtZSA9IG51bGw7XHJcblx0XHRcdHRoaXMua25vd25Db2xvciA9IChzaG9ydClrbm93bkNvbG9yO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgQ29sb3IobG9uZyB2YWx1ZSwgc2hvcnQgc3RhdGUsIHN0cmluZyBuYW1lLCBLbm93bkNvbG9yIGtub3duQ29sb3IpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdFx0XHR0aGlzLm5hbWUgPSBuYW1lO1xyXG5cdFx0XHR0aGlzLmtub3duQ29sb3IgPSAoc2hvcnQpa25vd25Db2xvcjtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgYnl0ZSBSXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIChieXRlKSgodGhpcy5WYWx1ZSA+PiAweDEwKSAmIDB4ZmZMKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHVibGljIGJ5dGUgR1xyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiAoYnl0ZSkoKHRoaXMuVmFsdWUgPj4gOCkgJiAweGZmTCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBieXRlIEJcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gKGJ5dGUpKHRoaXMuVmFsdWUgJiAweGZmTCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBieXRlIEFcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gKGJ5dGUpKCh0aGlzLlZhbHVlID4+IDB4MTgpICYgMHhmZkwpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgYm9vbCBJc0tub3duQ29sb3JcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gKCh0aGlzLnN0YXRlICYgU3RhdGVLbm93bkNvbG9yVmFsaWQpID4gMCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBib29sIElzRW1wdHlcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gKHRoaXMuc3RhdGUgPT0gMCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgYm9vbCBJc05hbWVkQ29sb3JcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZigodGhpcy5zdGF0ZSAmIFN0YXRlTmFtZVZhbGlkKSA9PSAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLklzS25vd25Db2xvcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgYm9vbCBJc1N5c3RlbUNvbG9yXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIXRoaXMuSXNLbm93bkNvbG9yKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYodGhpcy5rbm93bkNvbG9yID4gMHgxYSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gKHRoaXMua25vd25Db2xvciA+IDB4YTcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3Igc3RyaW5nKENvbG9yIGNvbG9yKSAgLy8gaW1wbGljaXQgZGlnaXQgdG8gYnl0ZSBjb252ZXJzaW9uIG9wZXJhdG9yXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBjb2xvci5Ub0hleCgpO1x0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIENvbG9yKHN0cmluZyBoZXhWYWx1ZSkgIC8vIGltcGxpY2l0IGRpZ2l0IHRvIGJ5dGUgY29udmVyc2lvbiBvcGVyYXRvclxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gQ29sb3IuRnJvbUhleChoZXhWYWx1ZSk7XHRcdFx0XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdHJpbmcgTmFtZUFuZEFSR0JWYWx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7e05hbWU9ezB9LCBBUkdCPSh7MX0sIHsyfSwgezN9LCB7NH0pfX1cIiwgdGhpcy5OYW1lLCB0aGlzLkEsIHRoaXMuUiwgdGhpcy5HLCB0aGlzLkIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgc3RyaW5nIE5hbWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZigodGhpcy5zdGF0ZSAmIFN0YXRlTmFtZVZhbGlkKSAhPSAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLm5hbWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCF0aGlzLklzS25vd25Db2xvcilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gQ29udmVydC5Ub1N0cmluZyh0aGlzLnZhbHVlLCAweDEwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3RyaW5nIHN0ciA9IEtub3duQ29sb3JUYWJsZS5Lbm93bkNvbG9yVG9OYW1lKChLbm93bkNvbG9yKXRoaXMua25vd25Db2xvcik7XHJcblx0XHRcdFx0aWYoc3RyICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMua25vd25Db2xvci5Ub1N0cmluZygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwcml2YXRlIGxvbmcgVmFsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZigodGhpcy5zdGF0ZSAmIFN0YXRlVmFsdWVNYXNrKSAhPSAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLnZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZih0aGlzLklzS25vd25Db2xvcilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gKGxvbmcpS25vd25Db2xvclRhYmxlLktub3duQ29sb3JUb0FyZ2IoKEtub3duQ29sb3IpdGhpcy5rbm93bkNvbG9yKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIE5vdERlZmluZWRWYWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgdm9pZCBDaGVja0J5dGUoaW50IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZigodmFsdWUgPCAwKSB8fCAodmFsdWUgPiAweGZmKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWRFeDJCb3VuZEFyZ3VtZW50XCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgbG9uZyBNYWtlQXJnYihieXRlIGFscGhhLCBieXRlIHJlZCwgYnl0ZSBncmVlbiwgYnl0ZSBibHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKGxvbmcpKCgodWxvbmcpKCgoKHJlZCA8PCAweDEwKSB8IChncmVlbiA8PCA4KSkgfCBibHVlKSB8IChhbHBoYSA8PCAweDE4KSkpICYgMHhmZmZmZmZmZkwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRnJvbUFyZ2IoaW50IGFyZ2IpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBuZXcgQ29sb3IoYXJnYiAmICgobG9uZykweGZmZmZmZmZmTCksIFN0YXRlQVJHQlZhbHVlVmFsaWQsIG51bGwsIChLbm93bkNvbG9yKTApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRnJvbUFyZ2IoaW50IGFscGhhLCBpbnQgcmVkLCBpbnQgZ3JlZW4sIGludCBibHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRDaGVja0J5dGUoYWxwaGEpO1xyXG5cdFx0XHRDaGVja0J5dGUocmVkKTtcclxuXHRcdFx0Q2hlY2tCeXRlKGdyZWVuKTtcclxuXHRcdFx0Q2hlY2tCeXRlKGJsdWUpO1xyXG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKE1ha2VBcmdiKChieXRlKWFscGhhLCAoYnl0ZSlyZWQsIChieXRlKWdyZWVuLCAoYnl0ZSlibHVlKSwgU3RhdGVBUkdCVmFsdWVWYWxpZCwgbnVsbCwgKEtub3duQ29sb3IpMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBGcm9tQXJnYihpbnQgYWxwaGEsIENvbG9yIGJhc2VDb2xvcilcclxuXHRcdHtcclxuXHRcdFx0Q2hlY2tCeXRlKGFscGhhKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBDb2xvcihNYWtlQXJnYigoYnl0ZSlhbHBoYSwgYmFzZUNvbG9yLlIsIGJhc2VDb2xvci5HLCBiYXNlQ29sb3IuQiksIFN0YXRlQVJHQlZhbHVlVmFsaWQsIG51bGwsIChLbm93bkNvbG9yKTApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRnJvbUFyZ2IoaW50IHJlZCwgaW50IGdyZWVuLCBpbnQgYmx1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIEZyb21BcmdiKDB4ZmYsIHJlZCwgZ3JlZW4sIGJsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBJc0VudW1WYWxpZChFbnVtIGVudW1WYWx1ZSwgaW50IHZhbHVlLCBpbnQgbWluVmFsdWUsIGludCBtYXhWYWx1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICgodmFsdWUgPj0gbWluVmFsdWUpICYmICh2YWx1ZSA8PSBtYXhWYWx1ZSkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29sb3IgRnJvbUtub3duQ29sb3IoS25vd25Db2xvciBjb2xvcilcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0cmV0dXJuIG5ldyBDb2xvcihjb2xvcik7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBjb21wb25lbnRUb0hleChieXRlIHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgeCA9IHZhbHVlLlRvU3RyaW5nKDE2KTtcdFx0XHRcclxuXHRcdFx0cmV0dXJuICh4Lkxlbmd0aCA9PSAxID8gXCIwXCIgOiBcIlwiKSArIHg7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBUb0hleCgpXHJcblx0XHR7XHJcblx0XHRcdGlmKEEgIT0gMjU1KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoXCIjezB9ezF9ezJ9ezN9XCIsIGNvbXBvbmVudFRvSGV4KEEpICwgY29tcG9uZW50VG9IZXgoUiksIGNvbXBvbmVudFRvSGV4KEcpLCBjb21wb25lbnRUb0hleChCKSk7IC8vIFwiI1wiICsgKDE1NSkudG9TdHJpbmcoMTYpICsgKDEwMikudG9TdHJpbmcoMTYpICsgKDEwMikudG9TdHJpbmcoMTYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBzdHJpbmcuRm9ybWF0KFwiI3swfXsxfXsyfVwiLCBjb21wb25lbnRUb0hleChSKSwgY29tcG9uZW50VG9IZXgoRyksIGNvbXBvbmVudFRvSGV4KEIpKTsgLy8gXCIjXCIgKyAoMTU1KS50b1N0cmluZygxNikgKyAoMTAyKS50b1N0cmluZygxNikgKyAoMTAyKS50b1N0cmluZygxNik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIENvbG9yIEZyb21IZXgoc3RyaW5nIHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZih2YWx1ZS5TdGFydHNXaXRoKFwiI1wiKSlcclxuXHRcdFx0XHRyZXR1cm4gRnJvbUhleCh2YWx1ZS5TdWJzdHJpbmcoMSkpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gQ29sb3IuRnJvbUFyZ2IoR2xvYmFsLlBhcnNlSW50KHZhbHVlKSk7XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgZmxvYXQgR2V0QnJpZ2h0bmVzcygpXHJcblx0XHR7XHJcblx0XHRcdGZsb2F0IHogPSBSIC8gcTtcclxuXHRcdFx0ZmxvYXQgeCA9IEcgLyBxO1xyXG5cdFx0XHRmbG9hdCBjID0gQiAvIHE7XHJcblx0XHRcdGZsb2F0IHYgPSB6O1xyXG5cdFx0XHRmbG9hdCBiID0gejtcclxuXHRcdFx0aWYoeCA+IHYpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2ID0geDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihjID4gdilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHYgPSBjO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKHggPCBiKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YiA9IHg7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoYyA8IGIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRiID0gYztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gKCh2ICsgYikgLyAyZik7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGZsb2F0IEdldEh1ZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKCh0aGlzLlIgPT0gdGhpcy5HKSAmJiAodGhpcy5HID09IHRoaXMuQikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gMGY7XHJcblx0XHRcdH1cclxuXHRcdFx0ZmxvYXQgeiA9IFIgLyBxO1xyXG5cdFx0XHRmbG9hdCB4ID0gRyAvIHE7XHJcblx0XHRcdGZsb2F0IGMgPSBCIC8gcTtcclxuXHRcdFx0ZmxvYXQgdiA9IDBmO1xyXG5cdFx0XHRmbG9hdCBiID0gejtcclxuXHRcdFx0ZmxvYXQgbiA9IHo7XHJcblx0XHRcdGlmKHggPiBiKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YiA9IHg7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoYyA+IGIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRiID0gYztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZih4IDwgbilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG4gPSB4O1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGMgPCBuKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0biA9IGM7XHJcblx0XHRcdH1cclxuXHRcdFx0ZmxvYXQgbnVtNiA9IGIgLSBuO1xyXG5cdFx0XHRpZih6ID09IGIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2ID0gKHggLSBjKSAvIG51bTY7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZih4ID09IGIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2ID0gMmYgKyAoKGMgLSB6KSAvIG51bTYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoYyA9PSBiKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0diA9IDRmICsgKCh6IC0geCkgLyBudW02KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2ICo9IDYwZjtcclxuXHRcdFx0aWYodiA8IDBmKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0diArPSAzNjBmO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB2O1xyXG5cdFx0fVxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZsb2F0IHEgPSAyNTVmO1xyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBHZXRTYXR1cmF0aW9uKClcclxuXHRcdHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgZmxvYXQgeiA9IFIgLyBxO1xyXG5cdFx0XHRmbG9hdCB4ID0gRyAvIHE7XHJcblx0XHRcdGZsb2F0IGMgPSBCIC8gcTtcclxuXHRcdFx0ZmxvYXQgdiA9IDBmO1xyXG5cdFx0XHRmbG9hdCBiID0gejtcclxuXHRcdFx0ZmxvYXQgbiA9IHo7XHJcblx0XHRcdGlmKHggPiBiKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YiA9IHg7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoYyA+IGIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRiID0gYztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZih4IDwgbilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG4gPSB4O1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKGMgPCBuKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0biA9IGM7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoYiA9PSBuKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIHY7XHJcblx0XHRcdH1cclxuXHRcdFx0ZmxvYXQgbSA9IChiICsgbikgLyAyZjtcclxuXHRcdFx0aWYobSA8PSAwLjUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gKChiIC0gbikgLyAoYiArIG4pKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gKChiIC0gbikgLyAoKDJmIC0gYikgLSBuKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBUb0FyZ2IoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKGludCl0aGlzLlZhbHVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBLbm93bkNvbG9yIFRvS25vd25Db2xvcigpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiAoS25vd25Db2xvcil0aGlzLmtub3duQ29sb3I7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcblx0XHR7XHJcblx0XHRcdFN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKDB4MjApO1xyXG5cdFx0XHRidWlsZGVyLkFwcGVuZChiYXNlLkdldFR5cGUoKS5OYW1lKTtcclxuXHRcdFx0YnVpbGRlci5BcHBlbmQoXCIgW1wiKTtcclxuXHRcdFx0aWYoKHRoaXMuc3RhdGUgJiBTdGF0ZU5hbWVWYWxpZCkgIT0gMClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJ1aWxkZXIuQXBwZW5kKHRoaXMuTmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZigodGhpcy5zdGF0ZSAmIFN0YXRlS25vd25Db2xvclZhbGlkKSAhPSAwKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YnVpbGRlci5BcHBlbmQodGhpcy5OYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKCh0aGlzLnN0YXRlICYgU3RhdGVWYWx1ZU1hc2spICE9IDApXHJcblx0XHRcdHtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kRm9ybWF0KFwiQT17MH0sIFI9ezF9LCBHPXsyfSwgQj17M31cIiwgQSwgUiwgRywgQik7ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJ1aWxkZXIuQXBwZW5kKFwiRW1wdHlcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0YnVpbGRlci5BcHBlbmQoXCJdXCIpO1xyXG5cdFx0XHRyZXR1cm4gYnVpbGRlci5Ub1N0cmluZygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShDb2xvciBsZWZ0LCBDb2xvciByaWdodClcclxuXHRcdHtcclxuXHRcdFx0aWYoKChsZWZ0LnZhbHVlICE9IHJpZ2h0LnZhbHVlKSB8fCAobGVmdC5zdGF0ZSAhPSByaWdodC5zdGF0ZSkpIHx8IChsZWZ0Lmtub3duQ29sb3IgIT0gcmlnaHQua25vd25Db2xvcikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICgobGVmdC5uYW1lID09IHJpZ2h0Lm5hbWUpIHx8ICgoKGxlZnQubmFtZSAhPSBudWxsKSAmJiAocmlnaHQubmFtZSAhPSBudWxsKSkgJiYgbGVmdC5uYW1lLkVxdWFscyhyaWdodC5uYW1lKSkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShDb2xvciBsZWZ0LCBDb2xvciByaWdodClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICEobGVmdCA9PSByaWdodCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcblx0XHR7XHJcblx0XHRcdGlmKG9iaiBpcyBDb2xvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdENvbG9yIGNvbG9yID0gKENvbG9yKW9iajtcclxuXHRcdFx0XHRpZigoKHRoaXMudmFsdWUgPT0gY29sb3IudmFsdWUpICYmICh0aGlzLnN0YXRlID09IGNvbG9yLnN0YXRlKSkgJiYgKHRoaXMua25vd25Db2xvciA9PSBjb2xvci5rbm93bkNvbG9yKSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gKCh0aGlzLm5hbWUgPT0gY29sb3IubmFtZSkgfHwgKCgodGhpcy5uYW1lICE9IG51bGwpICYmIChjb2xvci5uYW1lICE9IG51bGwpKSAmJiB0aGlzLm5hbWUuRXF1YWxzKHRoaXMubmFtZSkpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKCh0aGlzLnZhbHVlLkdldEhhc2hDb2RlKCkgXiB0aGlzLnN0YXRlLkdldEhhc2hDb2RlKCkpIF4gdGhpcy5rbm93bkNvbG9yLkdldEhhc2hDb2RlKCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHN0YXRpYyBDb2xvcigpXHJcblx0XHR7XHJcblx0XHRcdEVtcHR5ID0gbmV3IENvbG9yKCk7XHJcblx0XHRcdFN0YXRlS25vd25Db2xvclZhbGlkID0gMTtcclxuXHRcdFx0U3RhdGVBUkdCVmFsdWVWYWxpZCA9IDI7XHJcblx0XHRcdFN0YXRlVmFsdWVNYXNrID0gU3RhdGVBUkdCVmFsdWVWYWxpZDtcclxuXHRcdFx0U3RhdGVOYW1lVmFsaWQgPSA4O1xyXG5cdFx0XHROb3REZWZpbmVkVmFsdWUgPSAwTDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBlbnVtIEtub3duQ29sb3JcclxuXHR7XHJcblx0XHRBY3RpdmVCb3JkZXIgPSAxLFxyXG5cdFx0QWN0aXZlQ2FwdGlvbiA9IDIsXHJcblx0XHRBY3RpdmVDYXB0aW9uVGV4dCA9IDMsXHJcblx0XHRBbGljZUJsdWUgPSAweDFjLFxyXG5cdFx0QW50aXF1ZVdoaXRlID0gMHgxZCxcclxuXHRcdEFwcFdvcmtzcGFjZSA9IDQsXHJcblx0XHRBcXVhID0gMzAsXHJcblx0XHRBcXVhbWFyaW5lID0gMHgxZixcclxuXHRcdEF6dXJlID0gMHgyMCxcclxuXHRcdEJlaWdlID0gMHgyMSxcclxuXHRcdEJpc3F1ZSA9IDB4MjIsXHJcblx0XHRCbGFjayA9IDB4MjMsXHJcblx0XHRCbGFuY2hlZEFsbW9uZCA9IDB4MjQsXHJcblx0XHRCbHVlID0gMHgyNSxcclxuXHRcdEJsdWVWaW9sZXQgPSAweDI2LFxyXG5cdFx0QnJvd24gPSAweDI3LFxyXG5cdFx0QnVybHlXb29kID0gNDAsXHJcblx0XHRCdXR0b25GYWNlID0gMHhhOCxcclxuXHRcdEJ1dHRvbkhpZ2hsaWdodCA9IDB4YTksXHJcblx0XHRCdXR0b25TaGFkb3cgPSAxNzAsXHJcblx0XHRDYWRldEJsdWUgPSAweDI5LFxyXG5cdFx0Q2hhcnRyZXVzZSA9IDB4MmEsXHJcblx0XHRDaG9jb2xhdGUgPSAweDJiLFxyXG5cdFx0Q29udHJvbCA9IDUsXHJcblx0XHRDb250cm9sRGFyayA9IDYsXHJcblx0XHRDb250cm9sRGFya0RhcmsgPSA3LFxyXG5cdFx0Q29udHJvbExpZ2h0ID0gOCxcclxuXHRcdENvbnRyb2xMaWdodExpZ2h0ID0gOSxcclxuXHRcdENvbnRyb2xUZXh0ID0gMTAsXHJcblx0XHRDb3JhbCA9IDB4MmMsXHJcblx0XHRDb3JuZmxvd2VyQmx1ZSA9IDB4MmQsXHJcblx0XHRDb3Juc2lsayA9IDB4MmUsXHJcblx0XHRDcmltc29uID0gMHgyZixcclxuXHRcdEN5YW4gPSAweDMwLFxyXG5cdFx0RGFya0JsdWUgPSAweDMxLFxyXG5cdFx0RGFya0N5YW4gPSA1MCxcclxuXHRcdERhcmtHb2xkZW5yb2QgPSAweDMzLFxyXG5cdFx0RGFya0dyYXkgPSAweDM0LFxyXG5cdFx0RGFya0dyZWVuID0gMHgzNSxcclxuXHRcdERhcmtLaGFraSA9IDB4MzYsXHJcblx0XHREYXJrTWFnZW50YSA9IDB4MzcsXHJcblx0XHREYXJrT2xpdmVHcmVlbiA9IDB4MzgsXHJcblx0XHREYXJrT3JhbmdlID0gMHgzOSxcclxuXHRcdERhcmtPcmNoaWQgPSAweDNhLFxyXG5cdFx0RGFya1JlZCA9IDB4M2IsXHJcblx0XHREYXJrU2FsbW9uID0gNjAsXHJcblx0XHREYXJrU2VhR3JlZW4gPSAweDNkLFxyXG5cdFx0RGFya1NsYXRlQmx1ZSA9IDB4M2UsXHJcblx0XHREYXJrU2xhdGVHcmF5ID0gMHgzZixcclxuXHRcdERhcmtUdXJxdW9pc2UgPSAweDQwLFxyXG5cdFx0RGFya1Zpb2xldCA9IDB4NDEsXHJcblx0XHREZWVwUGluayA9IDB4NDIsXHJcblx0XHREZWVwU2t5Qmx1ZSA9IDB4NDMsXHJcblx0XHREZXNrdG9wID0gMTEsXHJcblx0XHREaW1HcmF5ID0gMHg0NCxcclxuXHRcdERvZGdlckJsdWUgPSAweDQ1LFxyXG5cdFx0RmlyZWJyaWNrID0gNzAsXHJcblx0XHRGbG9yYWxXaGl0ZSA9IDB4NDcsXHJcblx0XHRGb3Jlc3RHcmVlbiA9IDB4NDgsXHJcblx0XHRGdWNoc2lhID0gMHg0OSxcclxuXHRcdEdhaW5zYm9ybyA9IDB4NGEsXHJcblx0XHRHaG9zdFdoaXRlID0gMHg0YixcclxuXHRcdEdvbGQgPSAweDRjLFxyXG5cdFx0R29sZGVucm9kID0gMHg0ZCxcclxuXHRcdEdyYWRpZW50QWN0aXZlQ2FwdGlvbiA9IDB4YWIsXHJcblx0XHRHcmFkaWVudEluYWN0aXZlQ2FwdGlvbiA9IDB4YWMsXHJcblx0XHRHcmF5ID0gMHg0ZSxcclxuXHRcdEdyYXlUZXh0ID0gMTIsXHJcblx0XHRHcmVlbiA9IDB4NGYsXHJcblx0XHRHcmVlblllbGxvdyA9IDgwLFxyXG5cdFx0SGlnaGxpZ2h0ID0gMTMsXHJcblx0XHRIaWdobGlnaHRUZXh0ID0gMTQsXHJcblx0XHRIb25leWRldyA9IDB4NTEsXHJcblx0XHRIb3RQaW5rID0gMHg1MixcclxuXHRcdEhvdFRyYWNrID0gMTUsXHJcblx0XHRJbmFjdGl2ZUJvcmRlciA9IDB4MTAsXHJcblx0XHRJbmFjdGl2ZUNhcHRpb24gPSAweDExLFxyXG5cdFx0SW5hY3RpdmVDYXB0aW9uVGV4dCA9IDB4MTIsXHJcblx0XHRJbmRpYW5SZWQgPSAweDUzLFxyXG5cdFx0SW5kaWdvID0gMHg1NCxcclxuXHRcdEluZm8gPSAweDEzLFxyXG5cdFx0SW5mb1RleHQgPSAyMCxcclxuXHRcdEl2b3J5ID0gMHg1NSxcclxuXHRcdEtoYWtpID0gMHg1NixcclxuXHRcdExhdmVuZGVyID0gMHg1NyxcclxuXHRcdExhdmVuZGVyQmx1c2ggPSAweDU4LFxyXG5cdFx0TGF3bkdyZWVuID0gMHg1OSxcclxuXHRcdExlbW9uQ2hpZmZvbiA9IDkwLFxyXG5cdFx0TGlnaHRCbHVlID0gMHg1YixcclxuXHRcdExpZ2h0Q29yYWwgPSAweDVjLFxyXG5cdFx0TGlnaHRDeWFuID0gMHg1ZCxcclxuXHRcdExpZ2h0R29sZGVucm9kWWVsbG93ID0gMHg1ZSxcclxuXHRcdExpZ2h0R3JheSA9IDB4NWYsXHJcblx0XHRMaWdodEdyZWVuID0gMHg2MCxcclxuXHRcdExpZ2h0UGluayA9IDB4NjEsXHJcblx0XHRMaWdodFNhbG1vbiA9IDB4NjIsXHJcblx0XHRMaWdodFNlYUdyZWVuID0gMHg2MyxcclxuXHRcdExpZ2h0U2t5Qmx1ZSA9IDEwMCxcclxuXHRcdExpZ2h0U2xhdGVHcmF5ID0gMHg2NSxcclxuXHRcdExpZ2h0U3RlZWxCbHVlID0gMHg2NixcclxuXHRcdExpZ2h0WWVsbG93ID0gMHg2NyxcclxuXHRcdExpbWUgPSAweDY4LFxyXG5cdFx0TGltZUdyZWVuID0gMHg2OSxcclxuXHRcdExpbmVuID0gMHg2YSxcclxuXHRcdE1hZ2VudGEgPSAweDZiLFxyXG5cdFx0TWFyb29uID0gMHg2YyxcclxuXHRcdE1lZGl1bUFxdWFtYXJpbmUgPSAweDZkLFxyXG5cdFx0TWVkaXVtQmx1ZSA9IDExMCxcclxuXHRcdE1lZGl1bU9yY2hpZCA9IDB4NmYsXHJcblx0XHRNZWRpdW1QdXJwbGUgPSAweDcwLFxyXG5cdFx0TWVkaXVtU2VhR3JlZW4gPSAweDcxLFxyXG5cdFx0TWVkaXVtU2xhdGVCbHVlID0gMHg3MixcclxuXHRcdE1lZGl1bVNwcmluZ0dyZWVuID0gMHg3MyxcclxuXHRcdE1lZGl1bVR1cnF1b2lzZSA9IDB4NzQsXHJcblx0XHRNZWRpdW1WaW9sZXRSZWQgPSAweDc1LFxyXG5cdFx0TWVudSA9IDB4MTUsXHJcblx0XHRNZW51QmFyID0gMHhhZCxcclxuXHRcdE1lbnVIaWdobGlnaHQgPSAweGFlLFxyXG5cdFx0TWVudVRleHQgPSAweDE2LFxyXG5cdFx0TWlkbmlnaHRCbHVlID0gMHg3NixcclxuXHRcdE1pbnRDcmVhbSA9IDB4NzcsXHJcblx0XHRNaXN0eVJvc2UgPSAxMjAsXHJcblx0XHRNb2NjYXNpbiA9IDB4NzksXHJcblx0XHROYXZham9XaGl0ZSA9IDB4N2EsXHJcblx0XHROYXZ5ID0gMHg3YixcclxuXHRcdE9sZExhY2UgPSAweDdjLFxyXG5cdFx0T2xpdmUgPSAweDdkLFxyXG5cdFx0T2xpdmVEcmFiID0gMHg3ZSxcclxuXHRcdE9yYW5nZSA9IDB4N2YsXHJcblx0XHRPcmFuZ2VSZWQgPSAweDgwLFxyXG5cdFx0T3JjaGlkID0gMHg4MSxcclxuXHRcdFBhbGVHb2xkZW5yb2QgPSAxMzAsXHJcblx0XHRQYWxlR3JlZW4gPSAweDgzLFxyXG5cdFx0UGFsZVR1cnF1b2lzZSA9IDB4ODQsXHJcblx0XHRQYWxlVmlvbGV0UmVkID0gMHg4NSxcclxuXHRcdFBhcGF5YVdoaXAgPSAweDg2LFxyXG5cdFx0UGVhY2hQdWZmID0gMHg4NyxcclxuXHRcdFBlcnUgPSAweDg4LFxyXG5cdFx0UGluayA9IDB4ODksXHJcblx0XHRQbHVtID0gMHg4YSxcclxuXHRcdFBvd2RlckJsdWUgPSAweDhiLFxyXG5cdFx0UHVycGxlID0gMTQwLFxyXG5cdFx0UmVkID0gMHg4ZCxcclxuXHRcdFJvc3lCcm93biA9IDB4OGUsXHJcblx0XHRSb3lhbEJsdWUgPSAweDhmLFxyXG5cdFx0U2FkZGxlQnJvd24gPSAweDkwLFxyXG5cdFx0U2FsbW9uID0gMHg5MSxcclxuXHRcdFNhbmR5QnJvd24gPSAweDkyLFxyXG5cdFx0U2Nyb2xsQmFyID0gMHgxNyxcclxuXHRcdFNlYUdyZWVuID0gMHg5MyxcclxuXHRcdFNlYVNoZWxsID0gMHg5NCxcclxuXHRcdFNpZW5uYSA9IDB4OTUsXHJcblx0XHRTaWx2ZXIgPSAxNTAsXHJcblx0XHRTa3lCbHVlID0gMHg5NyxcclxuXHRcdFNsYXRlQmx1ZSA9IDB4OTgsXHJcblx0XHRTbGF0ZUdyYXkgPSAweDk5LFxyXG5cdFx0U25vdyA9IDB4OWEsXHJcblx0XHRTcHJpbmdHcmVlbiA9IDB4OWIsXHJcblx0XHRTdGVlbEJsdWUgPSAweDljLFxyXG5cdFx0VGFuID0gMHg5ZCxcclxuXHRcdFRlYWwgPSAweDllLFxyXG5cdFx0VGhpc3RsZSA9IDB4OWYsXHJcblx0XHRUb21hdG8gPSAxNjAsXHJcblx0XHRUcmFuc3BhcmVudCA9IDB4MWIsXHJcblx0XHRUdXJxdW9pc2UgPSAweGExLFxyXG5cdFx0VmlvbGV0ID0gMHhhMixcclxuXHRcdFdoZWF0ID0gMHhhMyxcclxuXHRcdFdoaXRlID0gMHhhNCxcclxuXHRcdFdoaXRlU21va2UgPSAweGE1LFxyXG5cdFx0V2luZG93ID0gMHgxOCxcclxuXHRcdFdpbmRvd0ZyYW1lID0gMHgxOSxcclxuXHRcdFdpbmRvd1RleHQgPSAweDFhLFxyXG5cdFx0WWVsbG93ID0gMHhhNixcclxuXHRcdFllbGxvd0dyZWVuID0gMHhhN1xyXG5cdH1cclxuXHJcblx0aW50ZXJuYWwgc3RhdGljIGNsYXNzIEtub3duQ29sb3JUYWJsZVxyXG5cdHtcclxuXHRcdC8vIEZpZWxkc1xyXG5cdFx0cHJpdmF0ZSBjb25zdCBpbnQgQWxwaGFTaGlmdCA9IDB4MTg7XHJcblx0XHRwcml2YXRlIGNvbnN0IGludCBCbHVlU2hpZnQgPSAwO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgc3RyaW5nW10gY29sb3JOYW1lVGFibGU7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBpbnRbXSBjb2xvclRhYmxlO1xyXG5cdFx0cHJpdmF0ZSBjb25zdCBpbnQgR3JlZW5TaGlmdCA9IDg7XHJcblx0XHRwcml2YXRlIGNvbnN0IGludCBSZWRTaGlmdCA9IDB4MTA7XHJcblx0XHRwcml2YXRlIGNvbnN0IGludCBXaW4zMkJsdWVTaGlmdCA9IDB4MTA7XHJcblx0XHRwcml2YXRlIGNvbnN0IGludCBXaW4zMkdyZWVuU2hpZnQgPSA4O1xyXG5cdFx0cHJpdmF0ZSBjb25zdCBpbnQgV2luMzJSZWRTaGlmdCA9IDA7XHJcblxyXG5cdFx0Ly8gTWV0aG9kc1xyXG5cdFx0cHVibGljIHN0YXRpYyBDb2xvciBBcmdiVG9Lbm93bkNvbG9yKGludCB0YXJnZXRBUkdCKVxyXG5cdFx0e1xyXG5cdFx0XHRFbnN1cmVDb2xvclRhYmxlKCk7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBjb2xvclRhYmxlLkxlbmd0aDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW50IG51bTIgPSBjb2xvclRhYmxlW2ldO1xyXG5cdFx0XHRcdGlmKG51bTIgPT0gdGFyZ2V0QVJHQilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRDb2xvciBjb2xvciA9IENvbG9yLkZyb21Lbm93bkNvbG9yKChLbm93bkNvbG9yKWkpO1xyXG5cdFx0XHRcdFx0aWYoIWNvbG9yLklzU3lzdGVtQ29sb3IpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHJldHVybiBjb2xvcjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIENvbG9yLkZyb21BcmdiKHRhcmdldEFSR0IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIGludCBFbmNvZGUoaW50IGFscGhhLCBpbnQgcmVkLCBpbnQgZ3JlZW4sIGludCBibHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKCgoKHJlZCA8PCAweDEwKSB8IChncmVlbiA8PCA4KSkgfCBibHVlKSB8IChhbHBoYSA8PCAweDE4KSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgdm9pZCBFbnN1cmVDb2xvck5hbWVUYWJsZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKGNvbG9yTmFtZVRhYmxlID09IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRJbml0Q29sb3JOYW1lVGFibGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIHZvaWQgRW5zdXJlQ29sb3JUYWJsZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKGNvbG9yVGFibGUgPT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdEluaXRDb2xvclRhYmxlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIHN0YXRpYyBpbnQgRnJvbVdpbjMyVmFsdWUoaW50IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gRW5jb2RlKDB4ZmYsIHZhbHVlICYgMHhmZiwgKHZhbHVlID4+IDgpICYgMHhmZiwgKHZhbHVlID4+IDB4MTApICYgMHhmZik7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgdm9pZCBJbml0Q29sb3JOYW1lVGFibGUoKVxyXG5cdFx0e1xyXG5cdFx0XHRzdHJpbmdbXSBzID0gbmV3IHN0cmluZ1sweGFmXTtcclxuXHRcdFx0c1sxXSA9IFwiQWN0aXZlQm9yZGVyXCI7XHJcblx0XHRcdHNbMl0gPSBcIkFjdGl2ZUNhcHRpb25cIjtcclxuXHRcdFx0c1szXSA9IFwiQWN0aXZlQ2FwdGlvblRleHRcIjtcclxuXHRcdFx0c1s0XSA9IFwiQXBwV29ya3NwYWNlXCI7XHJcblx0XHRcdHNbMHhhOF0gPSBcIkJ1dHRvbkZhY2VcIjtcclxuXHRcdFx0c1sweGE5XSA9IFwiQnV0dG9uSGlnaGxpZ2h0XCI7XHJcblx0XHRcdHNbMTcwXSA9IFwiQnV0dG9uU2hhZG93XCI7XHJcblx0XHRcdHNbNV0gPSBcIkNvbnRyb2xcIjtcclxuXHRcdFx0c1s2XSA9IFwiQ29udHJvbERhcmtcIjtcclxuXHRcdFx0c1s3XSA9IFwiQ29udHJvbERhcmtEYXJrXCI7XHJcblx0XHRcdHNbOF0gPSBcIkNvbnRyb2xMaWdodFwiO1xyXG5cdFx0XHRzWzldID0gXCJDb250cm9sTGlnaHRMaWdodFwiO1xyXG5cdFx0XHRzWzEwXSA9IFwiQ29udHJvbFRleHRcIjtcclxuXHRcdFx0c1sxMV0gPSBcIkRlc2t0b3BcIjtcclxuXHRcdFx0c1sweGFiXSA9IFwiR3JhZGllbnRBY3RpdmVDYXB0aW9uXCI7XHJcblx0XHRcdHNbMHhhY10gPSBcIkdyYWRpZW50SW5hY3RpdmVDYXB0aW9uXCI7XHJcblx0XHRcdHNbMTJdID0gXCJHcmF5VGV4dFwiO1xyXG5cdFx0XHRzWzEzXSA9IFwiSGlnaGxpZ2h0XCI7XHJcblx0XHRcdHNbMTRdID0gXCJIaWdobGlnaHRUZXh0XCI7XHJcblx0XHRcdHNbMTVdID0gXCJIb3RUcmFja1wiO1xyXG5cdFx0XHRzWzB4MTBdID0gXCJJbmFjdGl2ZUJvcmRlclwiO1xyXG5cdFx0XHRzWzB4MTFdID0gXCJJbmFjdGl2ZUNhcHRpb25cIjtcclxuXHRcdFx0c1sweDEyXSA9IFwiSW5hY3RpdmVDYXB0aW9uVGV4dFwiO1xyXG5cdFx0XHRzWzB4MTNdID0gXCJJbmZvXCI7XHJcblx0XHRcdHNbMjBdID0gXCJJbmZvVGV4dFwiO1xyXG5cdFx0XHRzWzB4MTVdID0gXCJNZW51XCI7XHJcblx0XHRcdHNbMHhhZF0gPSBcIk1lbnVCYXJcIjtcclxuXHRcdFx0c1sweGFlXSA9IFwiTWVudUhpZ2hsaWdodFwiO1xyXG5cdFx0XHRzWzB4MTZdID0gXCJNZW51VGV4dFwiO1xyXG5cdFx0XHRzWzB4MTddID0gXCJTY3JvbGxCYXJcIjtcclxuXHRcdFx0c1sweDE4XSA9IFwiV2luZG93XCI7XHJcblx0XHRcdHNbMHgxOV0gPSBcIldpbmRvd0ZyYW1lXCI7XHJcblx0XHRcdHNbMHgxYV0gPSBcIldpbmRvd1RleHRcIjtcclxuXHRcdFx0c1sweDFiXSA9IFwiVHJhbnNwYXJlbnRcIjtcclxuXHRcdFx0c1sweDFjXSA9IFwiQWxpY2VCbHVlXCI7XHJcblx0XHRcdHNbMHgxZF0gPSBcIkFudGlxdWVXaGl0ZVwiO1xyXG5cdFx0XHRzWzMwXSA9IFwiQXF1YVwiO1xyXG5cdFx0XHRzWzB4MWZdID0gXCJBcXVhbWFyaW5lXCI7XHJcblx0XHRcdHNbMHgyMF0gPSBcIkF6dXJlXCI7XHJcblx0XHRcdHNbMHgyMV0gPSBcIkJlaWdlXCI7XHJcblx0XHRcdHNbMHgyMl0gPSBcIkJpc3F1ZVwiO1xyXG5cdFx0XHRzWzB4MjNdID0gXCJCbGFja1wiO1xyXG5cdFx0XHRzWzB4MjRdID0gXCJCbGFuY2hlZEFsbW9uZFwiO1xyXG5cdFx0XHRzWzB4MjVdID0gXCJCbHVlXCI7XHJcblx0XHRcdHNbMHgyNl0gPSBcIkJsdWVWaW9sZXRcIjtcclxuXHRcdFx0c1sweDI3XSA9IFwiQnJvd25cIjtcclxuXHRcdFx0c1s0MF0gPSBcIkJ1cmx5V29vZFwiO1xyXG5cdFx0XHRzWzB4MjldID0gXCJDYWRldEJsdWVcIjtcclxuXHRcdFx0c1sweDJhXSA9IFwiQ2hhcnRyZXVzZVwiO1xyXG5cdFx0XHRzWzB4MmJdID0gXCJDaG9jb2xhdGVcIjtcclxuXHRcdFx0c1sweDJjXSA9IFwiQ29yYWxcIjtcclxuXHRcdFx0c1sweDJkXSA9IFwiQ29ybmZsb3dlckJsdWVcIjtcclxuXHRcdFx0c1sweDJlXSA9IFwiQ29ybnNpbGtcIjtcclxuXHRcdFx0c1sweDJmXSA9IFwiQ3JpbXNvblwiO1xyXG5cdFx0XHRzWzB4MzBdID0gXCJDeWFuXCI7XHJcblx0XHRcdHNbMHgzMV0gPSBcIkRhcmtCbHVlXCI7XHJcblx0XHRcdHNbNTBdID0gXCJEYXJrQ3lhblwiO1xyXG5cdFx0XHRzWzB4MzNdID0gXCJEYXJrR29sZGVucm9kXCI7XHJcblx0XHRcdHNbMHgzNF0gPSBcIkRhcmtHcmF5XCI7XHJcblx0XHRcdHNbMHgzNV0gPSBcIkRhcmtHcmVlblwiO1xyXG5cdFx0XHRzWzB4MzZdID0gXCJEYXJrS2hha2lcIjtcclxuXHRcdFx0c1sweDM3XSA9IFwiRGFya01hZ2VudGFcIjtcclxuXHRcdFx0c1sweDM4XSA9IFwiRGFya09saXZlR3JlZW5cIjtcclxuXHRcdFx0c1sweDM5XSA9IFwiRGFya09yYW5nZVwiO1xyXG5cdFx0XHRzWzB4M2FdID0gXCJEYXJrT3JjaGlkXCI7XHJcblx0XHRcdHNbMHgzYl0gPSBcIkRhcmtSZWRcIjtcclxuXHRcdFx0c1s2MF0gPSBcIkRhcmtTYWxtb25cIjtcclxuXHRcdFx0c1sweDNkXSA9IFwiRGFya1NlYUdyZWVuXCI7XHJcblx0XHRcdHNbMHgzZV0gPSBcIkRhcmtTbGF0ZUJsdWVcIjtcclxuXHRcdFx0c1sweDNmXSA9IFwiRGFya1NsYXRlR3JheVwiO1xyXG5cdFx0XHRzWzB4NDBdID0gXCJEYXJrVHVycXVvaXNlXCI7XHJcblx0XHRcdHNbMHg0MV0gPSBcIkRhcmtWaW9sZXRcIjtcclxuXHRcdFx0c1sweDQyXSA9IFwiRGVlcFBpbmtcIjtcclxuXHRcdFx0c1sweDQzXSA9IFwiRGVlcFNreUJsdWVcIjtcclxuXHRcdFx0c1sweDQ0XSA9IFwiRGltR3JheVwiO1xyXG5cdFx0XHRzWzB4NDVdID0gXCJEb2RnZXJCbHVlXCI7XHJcblx0XHRcdHNbNzBdID0gXCJGaXJlYnJpY2tcIjtcclxuXHRcdFx0c1sweDQ3XSA9IFwiRmxvcmFsV2hpdGVcIjtcclxuXHRcdFx0c1sweDQ4XSA9IFwiRm9yZXN0R3JlZW5cIjtcclxuXHRcdFx0c1sweDQ5XSA9IFwiRnVjaHNpYVwiO1xyXG5cdFx0XHRzWzB4NGFdID0gXCJHYWluc2Jvcm9cIjtcclxuXHRcdFx0c1sweDRiXSA9IFwiR2hvc3RXaGl0ZVwiO1xyXG5cdFx0XHRzWzB4NGNdID0gXCJHb2xkXCI7XHJcblx0XHRcdHNbMHg0ZF0gPSBcIkdvbGRlbnJvZFwiO1xyXG5cdFx0XHRzWzB4NGVdID0gXCJHcmF5XCI7XHJcblx0XHRcdHNbMHg0Zl0gPSBcIkdyZWVuXCI7XHJcblx0XHRcdHNbODBdID0gXCJHcmVlblllbGxvd1wiO1xyXG5cdFx0XHRzWzB4NTFdID0gXCJIb25leWRld1wiO1xyXG5cdFx0XHRzWzB4NTJdID0gXCJIb3RQaW5rXCI7XHJcblx0XHRcdHNbMHg1M10gPSBcIkluZGlhblJlZFwiO1xyXG5cdFx0XHRzWzB4NTRdID0gXCJJbmRpZ29cIjtcclxuXHRcdFx0c1sweDU1XSA9IFwiSXZvcnlcIjtcclxuXHRcdFx0c1sweDU2XSA9IFwiS2hha2lcIjtcclxuXHRcdFx0c1sweDU3XSA9IFwiTGF2ZW5kZXJcIjtcclxuXHRcdFx0c1sweDU4XSA9IFwiTGF2ZW5kZXJCbHVzaFwiO1xyXG5cdFx0XHRzWzB4NTldID0gXCJMYXduR3JlZW5cIjtcclxuXHRcdFx0c1s5MF0gPSBcIkxlbW9uQ2hpZmZvblwiO1xyXG5cdFx0XHRzWzB4NWJdID0gXCJMaWdodEJsdWVcIjtcclxuXHRcdFx0c1sweDVjXSA9IFwiTGlnaHRDb3JhbFwiO1xyXG5cdFx0XHRzWzB4NWRdID0gXCJMaWdodEN5YW5cIjtcclxuXHRcdFx0c1sweDVlXSA9IFwiTGlnaHRHb2xkZW5yb2RZZWxsb3dcIjtcclxuXHRcdFx0c1sweDVmXSA9IFwiTGlnaHRHcmF5XCI7XHJcblx0XHRcdHNbMHg2MF0gPSBcIkxpZ2h0R3JlZW5cIjtcclxuXHRcdFx0c1sweDYxXSA9IFwiTGlnaHRQaW5rXCI7XHJcblx0XHRcdHNbMHg2Ml0gPSBcIkxpZ2h0U2FsbW9uXCI7XHJcblx0XHRcdHNbMHg2M10gPSBcIkxpZ2h0U2VhR3JlZW5cIjtcclxuXHRcdFx0c1sxMDBdID0gXCJMaWdodFNreUJsdWVcIjtcclxuXHRcdFx0c1sweDY1XSA9IFwiTGlnaHRTbGF0ZUdyYXlcIjtcclxuXHRcdFx0c1sweDY2XSA9IFwiTGlnaHRTdGVlbEJsdWVcIjtcclxuXHRcdFx0c1sweDY3XSA9IFwiTGlnaHRZZWxsb3dcIjtcclxuXHRcdFx0c1sweDY4XSA9IFwiTGltZVwiO1xyXG5cdFx0XHRzWzB4NjldID0gXCJMaW1lR3JlZW5cIjtcclxuXHRcdFx0c1sweDZhXSA9IFwiTGluZW5cIjtcclxuXHRcdFx0c1sweDZiXSA9IFwiTWFnZW50YVwiO1xyXG5cdFx0XHRzWzB4NmNdID0gXCJNYXJvb25cIjtcclxuXHRcdFx0c1sweDZkXSA9IFwiTWVkaXVtQXF1YW1hcmluZVwiO1xyXG5cdFx0XHRzWzExMF0gPSBcIk1lZGl1bUJsdWVcIjtcclxuXHRcdFx0c1sweDZmXSA9IFwiTWVkaXVtT3JjaGlkXCI7XHJcblx0XHRcdHNbMHg3MF0gPSBcIk1lZGl1bVB1cnBsZVwiO1xyXG5cdFx0XHRzWzB4NzFdID0gXCJNZWRpdW1TZWFHcmVlblwiO1xyXG5cdFx0XHRzWzB4NzJdID0gXCJNZWRpdW1TbGF0ZUJsdWVcIjtcclxuXHRcdFx0c1sweDczXSA9IFwiTWVkaXVtU3ByaW5nR3JlZW5cIjtcclxuXHRcdFx0c1sweDc0XSA9IFwiTWVkaXVtVHVycXVvaXNlXCI7XHJcblx0XHRcdHNbMHg3NV0gPSBcIk1lZGl1bVZpb2xldFJlZFwiO1xyXG5cdFx0XHRzWzB4NzZdID0gXCJNaWRuaWdodEJsdWVcIjtcclxuXHRcdFx0c1sweDc3XSA9IFwiTWludENyZWFtXCI7XHJcblx0XHRcdHNbMTIwXSA9IFwiTWlzdHlSb3NlXCI7XHJcblx0XHRcdHNbMHg3OV0gPSBcIk1vY2Nhc2luXCI7XHJcblx0XHRcdHNbMHg3YV0gPSBcIk5hdmFqb1doaXRlXCI7XHJcblx0XHRcdHNbMHg3Yl0gPSBcIk5hdnlcIjtcclxuXHRcdFx0c1sweDdjXSA9IFwiT2xkTGFjZVwiO1xyXG5cdFx0XHRzWzB4N2RdID0gXCJPbGl2ZVwiO1xyXG5cdFx0XHRzWzB4N2VdID0gXCJPbGl2ZURyYWJcIjtcclxuXHRcdFx0c1sweDdmXSA9IFwiT3JhbmdlXCI7XHJcblx0XHRcdHNbMHg4MF0gPSBcIk9yYW5nZVJlZFwiO1xyXG5cdFx0XHRzWzB4ODFdID0gXCJPcmNoaWRcIjtcclxuXHRcdFx0c1sxMzBdID0gXCJQYWxlR29sZGVucm9kXCI7XHJcblx0XHRcdHNbMHg4M10gPSBcIlBhbGVHcmVlblwiO1xyXG5cdFx0XHRzWzB4ODRdID0gXCJQYWxlVHVycXVvaXNlXCI7XHJcblx0XHRcdHNbMHg4NV0gPSBcIlBhbGVWaW9sZXRSZWRcIjtcclxuXHRcdFx0c1sweDg2XSA9IFwiUGFwYXlhV2hpcFwiO1xyXG5cdFx0XHRzWzB4ODddID0gXCJQZWFjaFB1ZmZcIjtcclxuXHRcdFx0c1sweDg4XSA9IFwiUGVydVwiO1xyXG5cdFx0XHRzWzB4ODldID0gXCJQaW5rXCI7XHJcblx0XHRcdHNbMHg4YV0gPSBcIlBsdW1cIjtcclxuXHRcdFx0c1sweDhiXSA9IFwiUG93ZGVyQmx1ZVwiO1xyXG5cdFx0XHRzWzE0MF0gPSBcIlB1cnBsZVwiO1xyXG5cdFx0XHRzWzB4OGRdID0gXCJSZWRcIjtcclxuXHRcdFx0c1sweDhlXSA9IFwiUm9zeUJyb3duXCI7XHJcblx0XHRcdHNbMHg4Zl0gPSBcIlJveWFsQmx1ZVwiO1xyXG5cdFx0XHRzWzB4OTBdID0gXCJTYWRkbGVCcm93blwiO1xyXG5cdFx0XHRzWzB4OTFdID0gXCJTYWxtb25cIjtcclxuXHRcdFx0c1sweDkyXSA9IFwiU2FuZHlCcm93blwiO1xyXG5cdFx0XHRzWzB4OTNdID0gXCJTZWFHcmVlblwiO1xyXG5cdFx0XHRzWzB4OTRdID0gXCJTZWFTaGVsbFwiO1xyXG5cdFx0XHRzWzB4OTVdID0gXCJTaWVubmFcIjtcclxuXHRcdFx0c1sxNTBdID0gXCJTaWx2ZXJcIjtcclxuXHRcdFx0c1sweDk3XSA9IFwiU2t5Qmx1ZVwiO1xyXG5cdFx0XHRzWzB4OThdID0gXCJTbGF0ZUJsdWVcIjtcclxuXHRcdFx0c1sweDk5XSA9IFwiU2xhdGVHcmF5XCI7XHJcblx0XHRcdHNbMHg5YV0gPSBcIlNub3dcIjtcclxuXHRcdFx0c1sweDliXSA9IFwiU3ByaW5nR3JlZW5cIjtcclxuXHRcdFx0c1sweDljXSA9IFwiU3RlZWxCbHVlXCI7XHJcblx0XHRcdHNbMHg5ZF0gPSBcIlRhblwiO1xyXG5cdFx0XHRzWzB4OWVdID0gXCJUZWFsXCI7XHJcblx0XHRcdHNbMHg5Zl0gPSBcIlRoaXN0bGVcIjtcclxuXHRcdFx0c1sxNjBdID0gXCJUb21hdG9cIjtcclxuXHRcdFx0c1sweGExXSA9IFwiVHVycXVvaXNlXCI7XHJcblx0XHRcdHNbMHhhMl0gPSBcIlZpb2xldFwiO1xyXG5cdFx0XHRzWzB4YTNdID0gXCJXaGVhdFwiO1xyXG5cdFx0XHRzWzB4YTRdID0gXCJXaGl0ZVwiO1xyXG5cdFx0XHRzWzB4YTVdID0gXCJXaGl0ZVNtb2tlXCI7XHJcblx0XHRcdHNbMHhhNl0gPSBcIlllbGxvd1wiO1xyXG5cdFx0XHRzWzB4YTddID0gXCJZZWxsb3dHcmVlblwiO1xyXG5cdFx0XHRjb2xvck5hbWVUYWJsZSA9IHM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgdm9pZCBJbml0Q29sb3JUYWJsZSgpXHJcblx0XHR7XHJcblx0XHRcdGludFtdIGMgPSBuZXcgaW50WzB4YWZdO1x0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Y1sweDFiXSA9IDB4ZmZmZmZmO1xyXG5cdFx0XHRjWzB4MWNdID0gLTk4NDgzMztcclxuXHRcdFx0Y1sweDFkXSA9IC0zMzI4NDE7XHJcblx0XHRcdGNbMzBdID0gLTE2NzExNjgxO1xyXG5cdFx0XHRjWzB4MWZdID0gLTgzODg2NTI7XHJcblx0XHRcdGNbMHgyMF0gPSAtOTgzMDQxO1xyXG5cdFx0XHRjWzB4MjFdID0gLTY1Nzk1NjtcclxuXHRcdFx0Y1sweDIyXSA9IC02OTcyO1xyXG5cdFx0XHRjWzB4MjNdID0gLTE2Nzc3MjE2O1xyXG5cdFx0XHRjWzB4MjRdID0gLTUxNzE7XHJcblx0XHRcdGNbMHgyNV0gPSAtMTY3NzY5NjE7XHJcblx0XHRcdGNbMHgyNl0gPSAtNzcyMjAxNDtcclxuXHRcdFx0Y1sweDI3XSA9IC01OTUyOTgyO1xyXG5cdFx0XHRjWzQwXSA9IC0yMTgwOTg1O1xyXG5cdFx0XHRjWzB4MjldID0gLTEwNTEwNjg4O1xyXG5cdFx0XHRjWzB4MmFdID0gLTgzODg4NjQ7XHJcblx0XHRcdGNbMHgyYl0gPSAtMjk4Nzc0NjtcclxuXHRcdFx0Y1sweDJjXSA9IC0zMjk0NDtcclxuXHRcdFx0Y1sweDJkXSA9IC0xMDE4NTIzNTtcclxuXHRcdFx0Y1sweDJlXSA9IC0xODI4O1xyXG5cdFx0XHRjWzB4MmZdID0gLTIzNTQxMTY7XHJcblx0XHRcdGNbMHgzMF0gPSAtMTY3MTE2ODE7XHJcblx0XHRcdGNbMHgzMV0gPSAtMTY3NzcwNzc7XHJcblx0XHRcdGNbNTBdID0gLTE2NzQxNDkzO1xyXG5cdFx0XHRjWzB4MzNdID0gLTQ2ODQyNzc7XHJcblx0XHRcdGNbMHgzNF0gPSAtNTY1ODE5OTtcclxuXHRcdFx0Y1sweDM1XSA9IC0xNjc1MTYxNjtcclxuXHRcdFx0Y1sweDM2XSA9IC00MzQzOTU3O1xyXG5cdFx0XHRjWzB4MzddID0gLTc2Njc1NzM7XHJcblx0XHRcdGNbMHgzOF0gPSAtMTExNzkyMTc7XHJcblx0XHRcdGNbMHgzOV0gPSAtMjk2OTY7XHJcblx0XHRcdGNbMHgzYV0gPSAtNjczNzIwNDtcclxuXHRcdFx0Y1sweDNiXSA9IC03NjY3NzEyO1xyXG5cdFx0XHRjWzYwXSA9IC0xNDY4ODA2O1xyXG5cdFx0XHRjWzB4M2RdID0gLTczNTczMDE7XHJcblx0XHRcdGNbMHgzZV0gPSAtMTIwNDI4Njk7XHJcblx0XHRcdGNbMHgzZl0gPSAtMTM2NzY3MjE7XHJcblx0XHRcdGNbMHg0MF0gPSAtMTY3MjQyNzE7XHJcblx0XHRcdGNbMHg0MV0gPSAtNzA3NzY3NztcclxuXHRcdFx0Y1sweDQyXSA9IC02MDI2OTtcclxuXHRcdFx0Y1sweDQzXSA9IC0xNjcyODA2NTtcclxuXHRcdFx0Y1sweDQ0XSA9IC05ODY4OTUxO1xyXG5cdFx0XHRjWzB4NDVdID0gLTE0Nzc0MDE3O1xyXG5cdFx0XHRjWzcwXSA9IC01MTAzMDcwO1xyXG5cdFx0XHRjWzB4NDddID0gLTEyOTY7XHJcblx0XHRcdGNbMHg0OF0gPSAtMTQ1MTMzNzQ7XHJcblx0XHRcdGNbMHg0OV0gPSAtNjUyODE7XHJcblx0XHRcdGNbMHg0YV0gPSAtMjMwMjc1NjtcclxuXHRcdFx0Y1sweDRiXSA9IC00NjA1NDU7XHJcblx0XHRcdGNbMHg0Y10gPSAtMTA0OTY7XHJcblx0XHRcdGNbMHg0ZF0gPSAtMjQ0ODA5NjtcclxuXHRcdFx0Y1sweDRlXSA9IC04MzU1NzEyO1xyXG5cdFx0XHRjWzB4NGZdID0gLTE2NzQ0NDQ4O1xyXG5cdFx0XHRjWzgwXSA9IC01Mzc0MTYxO1xyXG5cdFx0XHRjWzB4NTFdID0gLTk4MzA1NjtcclxuXHRcdFx0Y1sweDUyXSA9IC0zODQ3NjtcclxuXHRcdFx0Y1sweDUzXSA9IC0zMzE4NjkyO1xyXG5cdFx0XHRjWzB4NTRdID0gLTExODYxODg2O1xyXG5cdFx0XHRjWzB4NTVdID0gLTE2O1xyXG5cdFx0XHRjWzB4NTZdID0gLTk4OTU1NjtcclxuXHRcdFx0Y1sweDU3XSA9IC0xNjQ0ODA2O1xyXG5cdFx0XHRjWzB4NThdID0gLTM4NTE7XHJcblx0XHRcdGNbMHg1OV0gPSAtODU4NjI0MDtcclxuXHRcdFx0Y1s5MF0gPSAtMTMzMTtcclxuXHRcdFx0Y1sweDViXSA9IC01MzgzOTYyO1xyXG5cdFx0XHRjWzB4NWNdID0gLTEwMTU2ODA7XHJcblx0XHRcdGNbMHg1ZF0gPSAtMjAzMTYxNztcclxuXHRcdFx0Y1sweDVlXSA9IC0zMjkwMDY7XHJcblx0XHRcdGNbMHg1Zl0gPSAtMjg5NDg5MztcclxuXHRcdFx0Y1sweDYwXSA9IC03Mjc4OTYwO1xyXG5cdFx0XHRjWzB4NjFdID0gLTE4NzUxO1xyXG5cdFx0XHRjWzB4NjJdID0gLTI0NDU0O1xyXG5cdFx0XHRjWzB4NjNdID0gLTE0NjM0MzI2O1xyXG5cdFx0XHRjWzEwMF0gPSAtNzg3Njg3MDtcclxuXHRcdFx0Y1sweDY1XSA9IC04OTQzNDYzO1xyXG5cdFx0XHRjWzB4NjZdID0gLTUxOTI0ODI7XHJcblx0XHRcdGNbMHg2N10gPSAtMzI7XHJcblx0XHRcdGNbMHg2OF0gPSAtMTY3MTE5MzY7XHJcblx0XHRcdGNbMHg2OV0gPSAtMTM0NDc4ODY7XHJcblx0XHRcdGNbMHg2YV0gPSAtMzMxNTQ2O1xyXG5cdFx0XHRjWzB4NmJdID0gLTY1MjgxO1xyXG5cdFx0XHRjWzB4NmNdID0gLTgzODg2MDg7XHJcblx0XHRcdGNbMHg2ZF0gPSAtMTAwMzk4OTQ7XHJcblx0XHRcdGNbMTEwXSA9IC0xNjc3NzAxMTtcclxuXHRcdFx0Y1sweDZmXSA9IC00NTY1NTQ5O1xyXG5cdFx0XHRjWzB4NzBdID0gLTcxMTQ1MzM7XHJcblx0XHRcdGNbMHg3MV0gPSAtMTI3OTkxMTk7XHJcblx0XHRcdGNbMHg3Ml0gPSAtODY4OTQyNjtcclxuXHRcdFx0Y1sweDczXSA9IC0xNjcxMzA2MjtcclxuXHRcdFx0Y1sweDc0XSA9IC0xMjAwNDkxNjtcclxuXHRcdFx0Y1sweDc1XSA9IC0zNzMwMDQzO1xyXG5cdFx0XHRjWzB4NzZdID0gLTE1MTMyMzA0O1xyXG5cdFx0XHRjWzB4NzddID0gLTY1NTM2NjtcclxuXHRcdFx0Y1sxMjBdID0gLTY5NDM7XHJcblx0XHRcdGNbMHg3OV0gPSAtNjk4NztcclxuXHRcdFx0Y1sweDdhXSA9IC04NTMxO1xyXG5cdFx0XHRjWzB4N2JdID0gLTE2Nzc3MDg4O1xyXG5cdFx0XHRjWzB4N2NdID0gLTEzMzY1ODtcclxuXHRcdFx0Y1sweDdkXSA9IC04MzU1ODQwO1xyXG5cdFx0XHRjWzB4N2VdID0gLTk3Mjg0Nzc7XHJcblx0XHRcdGNbMHg3Zl0gPSAtMjMyOTY7XHJcblx0XHRcdGNbMHg4MF0gPSAtNDc4NzI7XHJcblx0XHRcdGNbMHg4MV0gPSAtMjQ2MTQ4MjtcclxuXHRcdFx0Y1sxMzBdID0gLTExMjAwODY7XHJcblx0XHRcdGNbMHg4M10gPSAtNjc1MTMzNjtcclxuXHRcdFx0Y1sweDg0XSA9IC01MjQ3MjUwO1xyXG5cdFx0XHRjWzB4ODVdID0gLTIzOTYwMTM7XHJcblx0XHRcdGNbMHg4Nl0gPSAtNDEzOTtcclxuXHRcdFx0Y1sweDg3XSA9IC05NTQzO1xyXG5cdFx0XHRjWzB4ODhdID0gLTMzMDgyMjU7XHJcblx0XHRcdGNbMHg4OV0gPSAtMTYxODE7XHJcblx0XHRcdGNbMHg4YV0gPSAtMjI1MjU3OTtcclxuXHRcdFx0Y1sweDhiXSA9IC01MTg1MzA2O1xyXG5cdFx0XHRjWzE0MF0gPSAtODM4ODQ4MDtcclxuXHRcdFx0Y1sweDhkXSA9IC02NTUzNjtcclxuXHRcdFx0Y1sweDhlXSA9IC00NDE5Njk3O1xyXG5cdFx0XHRjWzB4OGZdID0gLTEyNDkwMjcxO1xyXG5cdFx0XHRjWzB4OTBdID0gLTc2NTAwMjk7XHJcblx0XHRcdGNbMHg5MV0gPSAtMzYwMzM0O1xyXG5cdFx0XHRjWzB4OTJdID0gLTc0NDM1MjtcclxuXHRcdFx0Y1sweDkzXSA9IC0xMzcyNjg4OTtcclxuXHRcdFx0Y1sweDk0XSA9IC0yNTc4O1xyXG5cdFx0XHRjWzB4OTVdID0gLTYyNzA0MTk7XHJcblx0XHRcdGNbMTUwXSA9IC00MTQ0OTYwO1xyXG5cdFx0XHRjWzB4OTddID0gLTc4NzY4ODU7XHJcblx0XHRcdGNbMHg5OF0gPSAtOTgwNzE1NTtcclxuXHRcdFx0Y1sweDk5XSA9IC05NDA0MjcyO1xyXG5cdFx0XHRjWzB4OWFdID0gLTEyODY7XHJcblx0XHRcdGNbMHg5Yl0gPSAtMTY3MTE4MDk7XHJcblx0XHRcdGNbMHg5Y10gPSAtMTIxNTYyMzY7XHJcblx0XHRcdGNbMHg5ZF0gPSAtMjk2ODQzNjtcclxuXHRcdFx0Y1sweDllXSA9IC0xNjc0NDMyMDtcclxuXHRcdFx0Y1sweDlmXSA9IC0yNTcyMzI4O1xyXG5cdFx0XHRjWzE2MF0gPSAtNDAxMjE7XHJcblx0XHRcdGNbMHhhMV0gPSAtMTI1MjUzNjA7XHJcblx0XHRcdGNbMHhhMl0gPSAtMTE0NjEzMDtcclxuXHRcdFx0Y1sweGEzXSA9IC02NjM4ODU7XHJcblx0XHRcdGNbMHhhNF0gPSAtMTtcclxuXHRcdFx0Y1sweGE1XSA9IC02NTc5MzE7XHJcblx0XHRcdGNbMHhhNl0gPSAtMjU2O1xyXG5cdFx0XHRjWzB4YTddID0gLTY2MzIxNDI7XHJcbiAgICAgICAgICAgIGNvbG9yVGFibGUgPSBjO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgaW50IEtub3duQ29sb3JUb0FyZ2IoS25vd25Db2xvciBjb2xvcilcclxuXHRcdHtcclxuXHRcdFx0RW5zdXJlQ29sb3JUYWJsZSgpO1xyXG5cdFx0XHRpZihjb2xvciA8PSBLbm93bkNvbG9yLk1lbnVIaWdobGlnaHQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gY29sb3JUYWJsZVsoaW50KWNvbG9yXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBLbm93bkNvbG9yVG9OYW1lKEtub3duQ29sb3IgY29sb3IpXHJcblx0XHR7XHJcblx0XHRcdEVuc3VyZUNvbG9yTmFtZVRhYmxlKCk7XHJcblx0XHRcdGlmKGNvbG9yIDw9IEtub3duQ29sb3IuTWVudUhpZ2hsaWdodClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBjb2xvck5hbWVUYWJsZVsoaW50KWNvbG9yXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cdFx0XHRcclxuXHR9XHRcclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBjbGFzcyBDb250ZXh0TWVudSA6IENvbnRyb2xcclxuXHR7XHJcblx0XHQvLy8gPHN1bW1hcnk+XHJcblx0XHQvLy8gRm9yIGludGVybmFsIHVzZSBvbmx5IC0gc28gaWYgd2UgY2xpY2sgb24gZG9jdW1lbnQgLSB3ZSBjYW4gY2xvc2UgYWxsIGNvbnRleHQgbWVudXMgLS0tXHJcblx0XHQvLy8gPC9zdW1tYXJ5PlxyXG5cdFx0cHJvdGVjdGVkIENvbnRleHRNZW51IFN1YkNvbnRleHRPcGVuZWQgPSBudWxsO1xyXG5cdFx0cHVibGljIExpc3Q8Q29udGV4dEl0ZW0+IENvbnRleHRJdGVtcyA9IG5ldyBMaXN0PENvbnRleHRJdGVtPigpO1xyXG5cdFx0cHJvdGVjdGVkIGJvb2wgVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0cHVibGljIHN0YXRpYyBpbnQgVG90YWxDb250ZXh0SGFuZGxlcyA9IDA7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBDb250ZXh0TWVudSBNYWluQ29udGV4dE1lbnUgPSBudWxsO1xyXG5cclxuXHRcdHB1YmxpYyBDb250ZXh0TWVudSgpIDogYmFzZShcImNvbnRleHRtZW51XCIpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuQ29udGVudC5Pbk1vdXNlTGVhdmUgPSAoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLkNsb3NlKCk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIHZvaWQgUmVuZGVyQ29udGV4dE1lbnUoKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBXaGF0IHdlIG5lZWQgdG8gZG8gZmlyc3QgaXMgZ2V0IHRoZSBtYXhlZCBzaXplIHRleHQuLi5cclxuXHRcdFx0aW50IHggPSAwO1xyXG5cdFx0XHRpbnQgaWkgPSAtMTtcclxuXHJcblx0XHRcdHRoaXMuQ29udGVudC5FbXB0eSgpO1xyXG5cclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IENvbnRleHRJdGVtcy5Db3VudDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW50IHkgPSBDb250ZXh0SXRlbXNbaV0uQ2FwdGlvbi5MZW5ndGg7XHJcblx0XHRcdFx0aWYoeSA+IHgpIHsgeCA9IHk7IGlpID0gaTsgfVx0XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYoaWkgPT0gLTEpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRpbnQgY2Fsd2lkdGggPSAoaW50KUdldFRleHRXaWR0aChDb250ZXh0SXRlbXNbaWldLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KTtcclxuXHRcdFx0aWYoY2Fsd2lkdGggPCBTZXR0aW5ncy5Db250ZXh0TWVudU1pbldpZHRoKVxyXG5cdFx0XHRcdGNhbHdpZHRoID0gU2V0dGluZ3MuQ29udGV4dE1lbnVNaW5XaWR0aDtcclxuXHRcdFx0aW50IHdpZHRoID0gKGNhbHdpZHRoICsgMzQgKyA4ICsgMik7XHJcblx0XHRcdFxyXG5cdFx0XHRpbnQgdG9wID0gMTtcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBDb250ZXh0SXRlbXMuQ291bnQ7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBjb250ZXh0SXRlbSA9IENvbnRleHRJdGVtc1tpXTtcclxuXHRcdFx0XHRpbnQgeSA9IGNvbnRleHRJdGVtLkNhcHRpb24uTGVuZ3RoO1xyXG5cdFx0XHRcdHZhciBpdGVtID0gTGFiZWwoY29udGV4dEl0ZW0uQ2FwdGlvbiwgMSwgdG9wLCB3aWR0aCAtIDIsIGZhbHNlLCBmYWxzZSwgXCJjb250ZXh0aXRlbVwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpdGVtLk9uQ2xpY2sgPSAoZXYpID0+XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYoY29udGV4dEl0ZW0uRW5hYmxlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRleHRJdGVtLk9uSXRlbUNsaWNrICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJdGVtLk9uSXRlbUNsaWNrKGNvbnRleHRJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRDb250ZW50LkFwcGVuZENoaWxkKGl0ZW0pO1xyXG5cclxuXHRcdFx0XHR0b3AgKz0gMjQ7XHJcblxyXG5cdFx0XHRcdGlmKENvbnRleHRJdGVtc1tpXS5CZWdpbkdyb3VwICYmIGkgIT0gQ29udGV4dEl0ZW1zLkNvdW50KVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRvcCArPSAxO1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBzZXAgPSBEaXYoXCJjb250ZXh0aXRlbXNlcGVyYXRvclwiKTtcclxuXHJcblx0XHRcdFx0XHRzZXAuU3R5bGUuVG9wID0gdG9wLlRvUHgoKTtcclxuXHRcdFx0XHRcdHNlcC5TdHlsZS5XaWR0aCA9IGNhbHdpZHRoLlRvUHgoKTtcclxuXHJcblx0XHRcdFx0XHRDb250ZW50LkFwcGVuZENoaWxkKHNlcCk7XHJcblxyXG5cdFx0XHRcdFx0dG9wICs9IDI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0b3ArKztcclxuXHJcblx0XHRcdHRoaXMuQ29udGVudC5TZXRTaXplKHdpZHRoLCB0b3ApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFNob3coVmVjdG9yMiBMb2NhdGlvbilcclxuXHRcdHtcdFx0XHJcblx0XHRcdGlmKE1haW5Db250ZXh0TWVudSAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0TWFpbkNvbnRleHRNZW51LkNsb3NlKCk7XHJcblx0XHRcdFx0TWFpbkNvbnRleHRNZW51ID0gbnVsbDtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdE1haW5Db250ZXh0TWVudSA9IHRoaXM7XHJcblxyXG5cdFx0XHRpZihWaXNpYmxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5DbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKCFWaXNpYmxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Q29udGVudC5TZXRMb2NhdGlvbihMb2NhdGlvbi5YaSAtIDUsIExvY2F0aW9uLllpIC0gNSk7XHJcblx0XHRcdFx0UmVuZGVyQ29udGV4dE1lbnUoKTtcclxuXHJcblx0XHRcdFx0VG90YWxDb250ZXh0SGFuZGxlcysrO1xyXG5cdFx0XHRcdENvbnRlbnQuU3R5bGUuWkluZGV4ID0gKFRvdGFsQ29udGV4dEhhbmRsZXMgKyBTZXR0aW5ncy5Db250ZXh0TWVudVN0YXJ0aW5nWkluZGV4KS5Ub1N0cmluZygpO1x0XHRcdFx0XHJcblx0XHRcdFx0RG9jdW1lbnQuQm9keS5BcHBlbmRDaGlsZCh0aGlzKTtcclxuXHRcdFx0XHRWaXNpYmxlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIENsb3NlKClcclxuXHRcdHtcclxuXHRcdFx0aWYoVmlzaWJsZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFRvdGFsQ29udGV4dEhhbmRsZXMtLTtcclxuXHRcdFx0XHREb2N1bWVudC5Cb2R5LlJlbW92ZUNoaWxkKHRoaXMpO1x0XHRcdFx0XHJcblx0XHRcdFx0VmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihTdWJDb250ZXh0T3BlbmVkICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRTdWJDb250ZXh0T3BlbmVkLkNsb3NlKCk7XHJcblx0XHRcdFx0U3ViQ29udGV4dE9wZW5lZCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBjbGFzcyBDb250ZXh0SXRlbVxyXG5cdHtcclxuXHRcdHB1YmxpYyBzdHJpbmcgQ2FwdGlvbiA9IFwiXCI7XHJcblx0XHRwdWJsaWMgQWN0aW9uPENvbnRleHRJdGVtPiBPbkl0ZW1DbGljayA9IG51bGw7XHJcblx0XHRwdWJsaWMgYm9vbCBCZWdpbkdyb3VwID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgYm9vbCBFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRwdWJsaWMgQ29udGV4dEl0ZW0oKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgQ29udGV4dEl0ZW0oc3RyaW5nIGNhcHRpb24sIGJvb2wgYmVnaW5Hcm91cCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHRDYXB0aW9uID0gY2FwdGlvbjtcclxuXHRcdFx0QmVnaW5Hcm91cCA9IGJlZ2luR3JvdXA7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIENvbnRleHRJdGVtKHN0cmluZyBjYXB0aW9uLCBBY3Rpb248Q29udGV4dEl0ZW0+IF9Pbkl0ZW1DbGljaywgYm9vbCBiZWdpbkdyb3VwID0gZmFsc2UpXHJcblx0XHR7XHJcblx0XHRcdENhcHRpb24gPSBjYXB0aW9uO1xyXG5cdFx0XHRCZWdpbkdyb3VwID0gYmVnaW5Hcm91cDtcclxuXHRcdFx0T25JdGVtQ2xpY2sgPSBfT25JdGVtQ2xpY2s7XHJcblxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgZW51bSBEYXRhVHlwZVxyXG5cdHtcclxuXHRcdE9iamVjdCxcclxuXHRcdERhdGVUaW1lLFxyXG5cdFx0U3RyaW5nLFxyXG5cdFx0SW50ZWdlcixcclxuXHRcdExvbmcsXHJcblx0XHRGbG9hdCxcclxuXHRcdERvdWJsZSxcclxuXHRcdERlY2ltYWwsXHJcblx0XHRCb29sLFxyXG5cdFx0Qnl0ZSxcclxuXHRcdFNob3J0XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBjbGFzcyBEYXRhVGFibGVcclxuXHR7XHJcblx0XHRwdWJsaWMgTGlzdDxEYXRhQ29sdW1uPiBDb2x1bW5zID0gbmV3IExpc3Q8RGF0YUNvbHVtbj4oKTtcclxuXHRcdHB1YmxpYyBldmVudCBFdmVudEhhbmRsZXIgT25EYXRhU291cmNlQ2hhbmdlZCA9IG51bGw7XHRcdFxyXG5cdFx0XHJcblx0XHRwcml2YXRlIGJvb2wgX2luRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG5cdFx0cHJpdmF0ZSBib29sIF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBSZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZighX2luRGF0YUNoYW5nZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuXHRcdFx0XHRpZihPbkRhdGFTb3VyY2VDaGFuZ2VkICE9IG51bGwpXHJcblx0XHRcdFx0T25EYXRhU291cmNlQ2hhbmdlZCh0aGlzLCBudWxsKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyUm93cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfUm93Q291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IENvbHVtbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2xlYXJDZWxscyhDb2x1bW5zW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwcml2YXRlIGludCBfQ29sQ291bnQ7XHJcblx0XHRwdWJsaWMgaW50IENvbHVtbkNvdW50XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIF9Db2xDb3VudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBpbnQgX1Jvd0NvdW50O1xyXG5cdFx0cHVibGljIGludCBSb3dDb3VudFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBfUm93Q291bnQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIExpc3Q8RGF0YVJvdz4gTmV3Um93cyA9IG5ldyBMaXN0PERhdGFSb3c+KCk7XHRcdFxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhckNlbGxzPFQ+KERhdGFDb2x1bW4gX2NvbHVtbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGR5bmFtaWMgX2NvbCA9IF9jb2x1bW47XHJcbiAgICAgICAgICAgIF9jb2wuQ2VsbHMgPSBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXJDZWxscyhEYXRhQ29sdW1uIF9jb2x1bW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9jb2x1bW4uRGF0YVR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLk9iamVjdDpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPG9iamVjdD4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8RGF0ZVRpbWU/PihfY29sdW1uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8c3RyaW5nPihfY29sdW1uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuSW50ZWdlcjpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPGludD8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Mb25nOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8bG9uZz8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5GbG9hdDpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPGZsb2F0Pz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRvdWJsZTpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPGRvdWJsZT8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8ZGVjaW1hbD8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5Cb29sOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8Ym9vbD8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5CeXRlOlxyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyQ2VsbHM8Ynl0ZT8+KF9jb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuICAgICAgICAgICAgICAgICAgICBDbGVhckNlbGxzPHNob3J0Pz4oX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0UmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhQ29sdW1uIEdldENvbHVtbkJ5RGF0YVR5cGUoRGF0YVR5cGUgdHlwZSA9IERhdGFUeXBlLk9iamVjdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbk9iamVjdCgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbkRhdGVUaW1lKCk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtblN0cmluZygpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uSW50ZWdlcigpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkxvbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uTG9uZygpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbkZsb2F0KCk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtbkRvdWJsZSgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uRGVjaW1hbCgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJvb2w6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uQm9vbCgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ29sdW1uQnl0ZSgpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLlNob3J0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUNvbHVtblNob3J0KCk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBBZGRDb2x1bW4oc3RyaW5nIGZpZWxkTmFtZSwgRGF0YVR5cGUgdHlwZSA9IERhdGFUeXBlLk9iamVjdClcclxuXHRcdHtcclxuICAgICAgICAgICAgdmFyIGNvbCA9IEdldENvbHVtbkJ5RGF0YVR5cGUodHlwZSk7XHJcbiAgICAgICAgICAgIGNvbC5GaWVsZE5hbWUgPSBmaWVsZE5hbWU7XHJcblxyXG4gICAgICAgICAgICBDb2x1bW5zLkFkZChjb2wpO1xyXG5cdFx0XHRfQ29sQ291bnQgPSBDb2x1bW5zLkNvdW50O1xyXG5cclxuXHRcdFx0UmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIERhdGFSb3cgdGhpc1tpbnQgcm93SW5kZXhdXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBEYXRhUm93KHRoaXMsIHJvd0luZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIEJlZ2luTmV3Um93KGludCBFc3RpbWF0ZWROZXdSb3dzKVxyXG5cdFx0e1xyXG5cdFx0XHROZXdSb3dzID0gbmV3IExpc3Q8RGF0YVJvdz4oRXN0aW1hdGVkTmV3Um93cyk7XHJcblx0XHRcdEJlZ2luRGF0YVVwZGF0ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBEYXRhUm93IEFkZFJvdygpXHJcblx0XHR7XHRcdFx0XHJcblx0XHRcdHZhciBkciA9IG5ldyBEYXRhUm93KHRoaXMsIF9Sb3dDb3VudCsrKTtcclxuXHRcdFx0aW50IGNvbExlbmd0aCA9IENvbHVtbnMuQ291bnQ7XHJcblx0XHRcdGZvcihpbnQgeCA9IDA7IHggPCBjb2xMZW5ndGg7IHgrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGR5bmFtaWMgY29sID0gQ29sdW1uc1t4XTtcclxuXHRcdFx0XHRjb2wuQ2VsbHMuYWRkKG51bGwpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdFJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGRyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIEFkZFJvdyhwYXJhbXMgb2JqZWN0W10gcm93KVxyXG5cdFx0e1xyXG5cdFx0XHRpZihyb3cuTGVuZ3RoID09IENvbHVtbkNvdW50KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0X1Jvd0NvdW50Kys7XHJcblx0XHRcdFx0aW50IGNvbExlbmd0aCA9IENvbHVtbnMuQ291bnQ7XHJcblx0XHRcdFx0Zm9yKGludCB4ID0gMDsgeCA8IGNvbExlbmd0aDsgeCsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGR5bmFtaWMgY29sID0gQ29sdW1uc1t4XTtcclxuXHRcdFx0XHRcdGNvbC5DZWxscy5hZGQocm93W3hdKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIERhdGFSb3cgTmV3Um93KClcclxuXHRcdHtcclxuXHRcdFx0dmFyIGRyID0gbmV3IERhdGFSb3codGhpcyk7XHJcblxyXG5cdFx0XHROZXdSb3dzLkFkZChkcik7XHJcblxyXG5cdFx0XHRyZXR1cm4gZHI7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQWNjZXB0TmV3Um93cygpXHJcblx0XHR7XHJcblx0XHRcdGlmKE5ld1Jvd3MgPT0gbnVsbCB8fCBOZXdSb3dzLkNvdW50ID09IDApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRpbnQgY29sTGVuZ3RoID0gQ29sdW1ucy5Db3VudDtcclxuXHRcdFx0aW50IHJvd0xlbmd0aCA9IE5ld1Jvd3MuQ291bnQ7XHRcdFx0XHJcblx0XHRcdGludCBjb2xOMSA9IGNvbExlbmd0aCAtIDE7XHJcblxyXG5cdFx0XHRmb3IoaW50IHggPSAwOyB4IDwgY29sTGVuZ3RoOyB4KyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkeW5hbWljIGNvbCA9IENvbHVtbnNbeF07XHJcblx0XHRcdFx0dmFyIERhdGFDZWxscyA9IG5ldyBvYmplY3Rbcm93TGVuZ3RoXTtcclxuXHJcblx0XHRcdFx0aWYoeCA9PSAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TmV3Um93c1t5XS5Sb3dJbmRleCA9IF9Sb3dDb3VudCsrO1xyXG5cdFx0XHRcdFx0XHREYXRhQ2VsbHNbeV0gPSBOZXdSb3dzW3ldLmJhdGNoRGF0YVt4XTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZih4ID09IGNvbE4xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0RGF0YUNlbGxzW3ldID0gTmV3Um93c1t5XS5iYXRjaERhdGFbeF07XHJcblx0XHRcdFx0XHRcdE5ld1Jvd3NbeV0uYmF0Y2hEYXRhID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcihpbnQgeSA9IDA7IHkgPCByb3dMZW5ndGg7IHkrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0RGF0YUNlbGxzW3ldID0gTmV3Um93c1t5XS5iYXRjaERhdGFbeF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbC5DZWxscy5hZGRSYW5nZShEYXRhQ2VsbHMpO1xyXG5cclxuXHRcdFx0fVxyXG5cdFx0XHROZXdSb3dzLkNsZWFyKCk7XHJcblxyXG5cdFx0XHRFbmREYXRhVXBkYXRlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQmVnaW5EYXRhVXBkYXRlKClcclxuXHRcdHtcclxuXHRcdFx0X2luRGF0YUNoYW5nZSA9IHRydWU7XHJcblx0XHRcdF9yZXF1ZXN0ZWRPbkRhdGFDaGFuZ2UgPSBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBFbmREYXRhVXBkYXRlKClcclxuXHRcdHtcclxuXHRcdFx0X2luRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG5cdFx0XHRpZihfcmVxdWVzdGVkT25EYXRhQ2hhbmdlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0X3JlcXVlc3RlZE9uRGF0YUNoYW5nZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGlmKE9uRGF0YVNvdXJjZUNoYW5nZWQgIT0gbnVsbClcclxuXHRcdFx0XHRcdE9uRGF0YVNvdXJjZUNoYW5nZWQodGhpcywgbnVsbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBSZWplY3ROZXdSb3dzKClcclxuXHRcdHtcclxuXHRcdFx0TmV3Um93cy5DbGVhcigpO1xyXG5cdFx0XHRfaW5EYXRhQ2hhbmdlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVx0XHJcblx0XHJcblx0cHVibGljIGNsYXNzIERhdGFSb3dcclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YVRhYmxlIFBhcmVudFRhYmxlO1xyXG5cdFx0cHVibGljIGludCBSb3dJbmRleCA9IC0xO1xyXG5cdFx0cHVibGljIG9iamVjdFtdIGJhdGNoRGF0YTtcclxuXHJcblx0XHRwdWJsaWMgRGF0YVJvdyBHZXRPZmZsaW5lRGF0YVJvdygpXHJcblx0XHR7XHJcblx0XHRcdHZhciBkciA9IG5ldyBEYXRhUm93KFBhcmVudFRhYmxlLkNvbHVtbkNvdW50KTtcclxuXHRcdFx0dmFyIGRhdGEgPSBuZXcgb2JqZWN0W1BhcmVudFRhYmxlLkNvbHVtbkNvdW50XTtcclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IFBhcmVudFRhYmxlLkNvbHVtbkNvdW50OyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkYXRhW2ldID0gdGhpc1tpXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRkci5iYXRjaERhdGEgPSBkYXRhO1xyXG5cdFx0XHRyZXR1cm4gZHI7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIERhdGFSb3coKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgRGF0YVJvdyhpbnQgY29sdW1uTGVuZ3RoKVxyXG5cdFx0e1xyXG5cdFx0XHRQYXJlbnRUYWJsZSA9IG51bGw7XHJcblx0XHRcdFJvd0luZGV4ID0gLTE7XHJcblx0XHRcdGJhdGNoRGF0YSA9IG5ldyBvYmplY3RbY29sdW1uTGVuZ3RoXTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgRGF0YVJvdyhEYXRhVGFibGUgcGFyZW50VGFibGUsIGludCByb3dJbmRleCA9IC0xKVxyXG5cdFx0e1xyXG5cdFx0XHRQYXJlbnRUYWJsZSA9IHBhcmVudFRhYmxlO1xyXG5cdFx0XHRSb3dJbmRleCA9IHJvd0luZGV4O1xyXG5cdFx0XHRpZihyb3dJbmRleCA9PSAtMSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJhdGNoRGF0YSA9IG5ldyBvYmplY3RbcGFyZW50VGFibGUuQ29sdW1uQ291bnRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFZhbHVlKHN0cmluZyBmaWVsZE5hbWUsIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBQYXJlbnRUYWJsZS5Db2x1bW5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihQYXJlbnRUYWJsZS5Db2x1bW5zW2ldLkZpZWxkTmFtZSA9PSBmaWVsZE5hbWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoUm93SW5kZXggPT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihiYXRjaERhdGFbaV0gIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoRGF0YVtpXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyZW50VGFibGUuUmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbC5DZWxscy5pdGVtc1tSb3dJbmRleF0gIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuQ2VsbHMuaXRlbXNbUm93SW5kZXhdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhcmVudFRhYmxlLlJlcXVpcmVPbkRhdGFDaGFuZ2VFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvYmplY3QgR2V0VmFsdWUoc3RyaW5nIGZpZWxkTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBQYXJlbnRUYWJsZS5Db2x1bW5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihQYXJlbnRUYWJsZS5Db2x1bW5zW2ldLkZpZWxkTmFtZSAgPT0gZmllbGROYW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKFJvd0luZGV4ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoRGF0YVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2wuQ2VsbHMuaXRlbXNbUm93SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBHZXRWYWx1ZShpbnQgY29sdW1uSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihSb3dJbmRleCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhdGNoRGF0YVtjb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2NvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbC5DZWxscy5pdGVtc1tSb3dJbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRWYWx1ZShpbnQgY29sdW1uSW5kZXgsIG9iamVjdCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKFJvd0luZGV4ID09IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihiYXRjaERhdGFbY29sdW1uSW5kZXhdICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoRGF0YVtjb2x1bW5JbmRleF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBQYXJlbnRUYWJsZS5SZXF1aXJlT25EYXRhQ2hhbmdlRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHluYW1pYyBjb2wgPSBQYXJlbnRUYWJsZS5Db2x1bW5zW2NvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgaWYoY29sLkNlbGxzLml0ZW1zW1Jvd0luZGV4XSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29sLkNlbGxzLml0ZW1zW1Jvd0luZGV4XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgUGFyZW50VGFibGUuUmVxdWlyZU9uRGF0YUNoYW5nZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIG9iamVjdCB0aGlzW2ludCBjb2x1bW5JbmRleF0geyBnZXQge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEdldFZhbHVlKGNvbHVtbkluZGV4KTtcclxuICAgICAgICAgICAgfSBzZXQge1xyXG4gICAgICAgICAgICAgICAgU2V0VmFsdWUoY29sdW1uSW5kZXgsIHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuXHR9XHRcclxuXHJcblx0cHVibGljIGNsYXNzIERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgc3RyaW5nIEZpZWxkTmFtZTtcclxuXHRcdHB1YmxpYyBEYXRhVHlwZSBEYXRhVHlwZTtcclxuXHRcdC8vcHVibGljIExpc3Q8b2JqZWN0PiBDZWxscyA9IG5ldyBMaXN0PG9iamVjdD4oKTtcclxuXHRcdHB1YmxpYyBzdHJpbmcgR2V0RGlzcGxheVZhbHVlKGludCByb3dJbmRleCwgc3RyaW5nIGZvcm1hdFN0cmluZylcclxuXHRcdHtcclxuXHRcdFx0c3dpdGNoKERhdGFUeXBlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLk9iamVjdDpcclxuXHRcdFx0XHRcdHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKCgoRGF0YUNvbHVtbk9iamVjdCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG5cdFx0XHRcdFx0ZHluYW1pYyBvYmogPSAoKERhdGFDb2x1bW5EYXRlVGltZSl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblx0XHRcdFx0XHRpZihvYmogPT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5FbXB0eTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKG9iaiBpcyBEYXRlVGltZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoRGF0ZVRpbWUpb2JqKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdERhdGVUaW1lIGQ7XHJcblx0XHRcdFx0XHRpZihEYXRlVGltZS5UcnlQYXJzZShvYmosIG91dCBkKSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCBkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHZhciBzdHIgPSBvYmogYXMgc3RyaW5nO1xyXG5cdFx0XHRcdFx0aWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShzdHIpKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gc3RyaW5nLkVtcHR5O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCBzdHIpO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuU3RyaW5nOlxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5TdHJpbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcblx0XHRcdFx0XHRyZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoRGF0YUNvbHVtbkludGVnZXIpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkxvbmc6XHJcblx0XHRcdFx0XHRyZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoRGF0YUNvbHVtbkxvbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5GbG9hdCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5Eb3VibGUpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcblx0XHRcdFx0XHRyZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoRGF0YUNvbHVtbkRlY2ltYWwpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkJ5dGU6XHJcblx0XHRcdFx0XHRyZXR1cm4gc3RyaW5nLkZvcm1hdChmb3JtYXRTdHJpbmcsICgoRGF0YUNvbHVtbkJ5dGUpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLlNob3J0OlxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5Gb3JtYXQoZm9ybWF0U3RyaW5nLCAoKERhdGFDb2x1bW5TaG9ydCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuQm9vbDpcclxuXHRcdFx0XHRcdHJldHVybiBzdHJpbmcuRm9ybWF0KGZvcm1hdFN0cmluZywgKChEYXRhQ29sdW1uQm9vbCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG9iamVjdCBHZXRDZWxsVmFsdWUoaW50IHJvd0luZGV4KVxyXG5cdFx0e1xyXG5cdFx0XHRzd2l0Y2goRGF0YVR5cGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG5cdFx0XHRcdFx0cmV0dXJuICgoRGF0YUNvbHVtbk9iamVjdCl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuXHRcdFx0XHRcdHJldHVybiAoKERhdGFDb2x1bW5EYXRlVGltZSl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5TdHJpbmc6XHJcblx0XHRcdFx0XHRyZXR1cm4gKChEYXRhQ29sdW1uU3RyaW5nKXRoaXMpLkNlbGxzW3Jvd0luZGV4XTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkludGVnZXI6XHJcblx0XHRcdFx0XHRyZXR1cm4gKCgoRGF0YUNvbHVtbkludGVnZXIpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkxvbmc6XHJcblx0XHRcdFx0XHRyZXR1cm4gKCgoRGF0YUNvbHVtbkxvbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG5cdFx0XHRcdFx0cmV0dXJuICgoKERhdGFDb2x1bW5GbG9hdCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG5cdFx0XHRcdFx0cmV0dXJuICgoKERhdGFDb2x1bW5Eb3VibGUpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHJcblx0XHRcdFx0XHRyZXR1cm4gKCgoRGF0YUNvbHVtbkRlY2ltYWwpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkJ5dGU6XHJcblx0XHRcdFx0XHRyZXR1cm4gKCgoRGF0YUNvbHVtbkJ5dGUpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkJvb2w6XHJcblx0XHRcdFx0XHRyZXR1cm4gKCgoRGF0YUNvbHVtbkJvb2wpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLlNob3J0OlxyXG5cdFx0XHRcdFx0cmV0dXJuICgoKERhdGFDb2x1bW5TaG9ydCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBHZXREaXNwbGF5VmFsdWUoaW50IHJvd0luZGV4KVxyXG5cdFx0e1xyXG5cdFx0XHRzd2l0Y2goRGF0YVR5cGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG5cdFx0XHRcdFx0cmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uT2JqZWN0KXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRGF0ZVRpbWU6XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkRhdGVUaW1lKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5TdHJpbmc6XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuICgoRGF0YUNvbHVtblN0cmluZyl0aGlzKS5DZWxsc1tyb3dJbmRleF07XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5JbnRlZ2VyOlx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkludGVnZXIpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Mb25nOlx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkxvbmcpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkZsb2F0Olx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkZsb2F0KXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Eb3VibGU6XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uRG91YmxlKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5EZWNpbWFsOlx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybiBDb252ZXJ0LlRvU3RyaW5nKCgoRGF0YUNvbHVtbkRlY2ltYWwpdGhpcykuQ2VsbHNbcm93SW5kZXhdKTtcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkJ5dGU6XHJcblx0XHRcdFx0XHRyZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5CeXRlKXRoaXMpLkNlbGxzW3Jvd0luZGV4XSk7XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Cb29sOlxyXG5cdFx0XHRcdFx0cmV0dXJuIENvbnZlcnQuVG9TdHJpbmcoKChEYXRhQ29sdW1uQm9vbCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuU2hvcnQ6XHJcblx0XHRcdFx0XHRyZXR1cm4gQ29udmVydC5Ub1N0cmluZygoKERhdGFDb2x1bW5TaG9ydCl0aGlzKS5DZWxsc1tyb3dJbmRleF0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtblN0cmluZyA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtblN0cmluZygpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5TdHJpbmc7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxzdHJpbmc+IENlbGxzID0gbmV3IExpc3Q8c3RyaW5nPigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkRhdGVUaW1lIDogRGF0YUNvbHVtblxyXG5cdHtcclxuXHRcdHB1YmxpYyBEYXRhQ29sdW1uRGF0ZVRpbWUoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuRGF0ZVRpbWU7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxEYXRlVGltZT8+IENlbGxzID0gbmV3IExpc3Q8RGF0ZVRpbWU/PigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkludGVnZXIgOiBEYXRhQ29sdW1uXHJcblx0e1xyXG5cdFx0cHVibGljIERhdGFDb2x1bW5JbnRlZ2VyKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkludGVnZXI7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxpbnQ/PiBDZWxscyA9IG5ldyBMaXN0PGludD8+KCk7XHJcblx0fVxyXG5cdHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uTG9uZyA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtbkxvbmcoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuTG9uZztcclxuXHRcdH1cclxuXHRcdHB1YmxpYyBMaXN0PGxvbmc/PiBDZWxscyA9IG5ldyBMaXN0PGxvbmc/PigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbk9iamVjdCA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtbk9iamVjdCgpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5PYmplY3Q7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxvYmplY3Q+IENlbGxzID0gbmV3IExpc3Q8b2JqZWN0PigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkRlY2ltYWwgOiBEYXRhQ29sdW1uXHJcblx0e1xyXG5cdFx0cHVibGljIERhdGFDb2x1bW5EZWNpbWFsKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkRlY2ltYWw7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxkZWNpbWFsPz4gQ2VsbHMgPSBuZXcgTGlzdDxkZWNpbWFsPz4oKTtcclxuXHR9XHRcclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkZsb2F0IDogRGF0YUNvbHVtblxyXG5cdHtcclxuXHRcdHB1YmxpYyBEYXRhQ29sdW1uRmxvYXQoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuRmxvYXQ7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxmbG9hdD8+IENlbGxzID0gbmV3IExpc3Q8ZmxvYXQ/PigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkRvdWJsZSA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtbkRvdWJsZSgpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuRGF0YVR5cGUgPSBEYXRhVHlwZS5Eb3VibGU7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxkb3VibGU/PiBDZWxscyA9IG5ldyBMaXN0PGRvdWJsZT8+KCk7XHJcblx0fVxyXG5cdHB1YmxpYyBjbGFzcyBEYXRhQ29sdW1uQm9vbCA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtbkJvb2woKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLkRhdGFUeXBlID0gRGF0YVR5cGUuQm9vbDtcclxuXHRcdH1cclxuXHRcdHB1YmxpYyBMaXN0PGJvb2w/PiBDZWxscyA9IG5ldyBMaXN0PGJvb2w/PigpO1xyXG5cdH1cclxuXHRwdWJsaWMgY2xhc3MgRGF0YUNvbHVtbkJ5dGUgOiBEYXRhQ29sdW1uXHJcblx0e1xyXG5cdFx0cHVibGljIERhdGFDb2x1bW5CeXRlKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLkJ5dGU7XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgTGlzdDxieXRlPz4gQ2VsbHMgPSBuZXcgTGlzdDxieXRlPz4oKTtcclxuXHR9XHJcblx0cHVibGljIGNsYXNzIERhdGFDb2x1bW5TaG9ydCA6IERhdGFDb2x1bW5cclxuXHR7XHJcblx0XHRwdWJsaWMgRGF0YUNvbHVtblNob3J0KClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5EYXRhVHlwZSA9IERhdGFUeXBlLlNob3J0O1xyXG5cdFx0fVxyXG5cdFx0cHVibGljIExpc3Q8c2hvcnQ/PiBDZWxscyA9IG5ldyBMaXN0PHNob3J0Pz4oKTtcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIENvbWJvQm94RWRpdCA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwdWJsaWMgSFRNTFNlbGVjdEVsZW1lbnQgQ29tYm9Cb3hCYXNlO1xyXG5cdFx0cHJpdmF0ZSBpbnQgcHJldmlvdXNTZWxlY3RlZEluZGV4ID0gLTE7XHJcblxyXG5cdFx0cHVibGljIEFjdGlvbjxDb21ib0JveEVkaXQ+IFNlbGVjdGVkSW5kZXhDaGFuZ2VkID0gbnVsbDtcclxuXHJcblx0XHRwdWJsaWMgQ29tYm9Cb3hFZGl0KCkgOiBiYXNlKFwiaW5wdXRjb250cm9sXCIsIENvbWJvQm94VHlwZXMuRGVmYXVsdClcclxuXHRcdHtcclxuXHRcdFx0Q29tYm9Cb3hCYXNlID0gdGhpcy5Db250ZW50IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5cclxuXHRcdFx0dGhpcy5Db250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+IHtcclxuXHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdENvbWJvQm94QmFzZS5PbkNoYW5nZSA9IChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKHByZXZpb3VzU2VsZWN0ZWRJbmRleCAhPSBDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihTZWxlY3RlZEluZGV4Q2hhbmdlZCAhPSBudWxsKVxyXG5cdFx0XHRcdFx0XHRTZWxlY3RlZEluZGV4Q2hhbmdlZCh0aGlzKTtcclxuXHJcblx0XHRcdFx0XHRwcmV2aW91c1NlbGVjdGVkSW5kZXggPSBDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgRmlsbERhdGEocGFyYW1zIERhdGFJdGVtW10gZGF0YWl0ZW1zKVxyXG5cdFx0e1x0XHRcdFxyXG5cdFx0XHRqUXVlcnkuU2VsZWN0KENvbWJvQm94QmFzZSkuRW1wdHkoKTtcclxuXHJcblx0XHRcdGlmKGRhdGFpdGVtcyA9PSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IGRhdGFpdGVtcy5MZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRDb21ib0JveEJhc2UuQXBwZW5kQ2hpbGQobmV3IEhUTUxPcHRpb25FbGVtZW50KClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0SW5uZXJIVE1MID0gZGF0YWl0ZW1zW2ldLlRleHQsXHJcblx0XHRcdFx0XHRcdFZhbHVlID0gZGF0YWl0ZW1zW2ldLlZhbHVlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLlJlbmRlcigpO1x0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdHJpbmcgVGV4dFxyXG5cdFx0e1xyXG5cdFx0XHRnZXQge1xyXG5cdFx0XHRcdGlmKENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID09IC0xKVxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5FbXB0eTtcclxuXHRcdFx0XHRyZXR1cm4gQ29tYm9Cb3hCYXNlLk9wdGlvbnNbQ29tYm9Cb3hCYXNlLlNlbGVjdGVkSW5kZXhdLklubmVySFRNTDsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBDb21ib0JveEJhc2UuT3B0aW9ucy5MZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihDb21ib0JveEJhc2UuT3B0aW9uc1tpXS5Jbm5lckhUTUwgPT0gdmFsdWUpXHJcblx0XHRcdFx0XHRcdENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID0gaTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Q29tYm9Cb3hCYXNlLlNlbGVjdGVkSW5kZXggPSAtMTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBWYWx1ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID09IC0xKVxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0cmluZy5FbXB0eTtcclxuXHRcdFx0XHRyZXR1cm4gQ29tYm9Cb3hCYXNlLk9wdGlvbnNbQ29tYm9Cb3hCYXNlLlNlbGVjdGVkSW5kZXhdLlZhbHVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IENvbWJvQm94QmFzZS5PcHRpb25zLkxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKENvbWJvQm94QmFzZS5PcHRpb25zW2ldLlZhbHVlID09IHZhbHVlKVxyXG5cdFx0XHRcdFx0XHRDb21ib0JveEJhc2UuU2VsZWN0ZWRJbmRleCA9IGk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdENvbWJvQm94QmFzZS5TZWxlY3RlZEluZGV4ID0gLTE7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblx0XHRwdWJsaWMgYm9vbCBFbmFibGVkXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBlbmFibGVkOyB9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCAoIWVuYWJsZWQpLlRvU3RyaW5nKCkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBib29sIF9yZWFkb25seSA9IGZhbHNlO1xyXG5cdFx0cHVibGljIGJvb2wgUmVhZG9ubHlcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIF9yZWFkb25seTsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdF9yZWFkb25seSA9IHZhbHVlO1xyXG5cdFx0XHRcdHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCAoX3JlYWRvbmx5KS5Ub1N0cmluZygpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGNsYXNzIERhdGFJdGVtXHJcblx0e1xyXG5cdFx0cHVibGljIHN0cmluZyBUZXh0O1xyXG5cdFx0cHVibGljIHN0cmluZyBWYWx1ZTtcclxuXHJcblx0XHRwdWJsaWMgRGF0YUl0ZW0oc3RyaW5nIHRleHQsIHN0cmluZyB2YWx1ZSlcclxuXHRcdHtcclxuXHRcdFx0VGV4dCA9IHRleHQ7XHJcblx0XHRcdFZhbHVlID0gdmFsdWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIERhdGFJdGVtKHN0cmluZyB0ZXh0KVxyXG5cdFx0e1xyXG5cdFx0XHRUZXh0ID0gdGV4dDtcclxuXHRcdFx0VmFsdWUgPSB0ZXh0O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEaWFsb2dSZXN1bHRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRGlhbG9nUmVzdWx0RW51bSBSZXN1bHRFbnVtID0gRGlhbG9nUmVzdWx0RW51bS5Ob25lO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb24gQ2FsbEJhY2sgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgRGlhbG9nUmVzdWx0KERpYWxvZ1Jlc3VsdEVudW0gcmVzdWx0RW51bSwgQWN0aW9uIGNhbGxCYWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzdWx0RW51bSA9IHJlc3VsdEVudW07XHJcbiAgICAgICAgICAgIENhbGxCYWNrID0gY2FsbEJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludm9rZUlmUmVzdWx0KERpYWxvZ1Jlc3VsdEVudW0gcmVzdWx0RW51bSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRFbnVtID09IFJlc3VsdEVudW0gJiYgQ2FsbEJhY2sgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIENhbGxCYWNrLkludm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW51bSBEaWFsb2dSZXN1bHRFbnVtXHJcbiAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIE5vbmUsXHJcbiAgICAgICAgICAgIE9LLFxyXG4gICAgICAgICAgICBDYW5jZWwsXHJcbiAgICAgICAgICAgIEFib3J0LFxyXG4gICAgICAgICAgICBTZW5kLFxyXG4gICAgICAgICAgICBJZ25vcmUsXHJcbiAgICAgICAgICAgIFllcyxcclxuICAgICAgICAgICAgTm9cclxuICAgIH0gICAgXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgRXh0ZXJuYWxQbHVnaW5cclxuXHR7XHJcblx0XHRwdWJsaWMgc3RyaW5nIFNvdXJjZVVybDtcclxuXHRcdHB1YmxpYyBib29sIFNldHVwQ29tcGxldGVkID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgYm9vbCBJbkxvYWQgPSBmYWxzZTtcclxuXHJcblx0XHRwdWJsaWMgQWN0aW9uIE9uUmVhZHkgPSBudWxsO1xyXG5cclxuXHRcdHB1YmxpYyBFeHRlcm5hbFBsdWdpbihzdHJpbmcgc291cmNlVXJsKVxyXG5cdFx0e1xyXG5cdFx0XHRTb3VyY2VVcmwgPSBzb3VyY2VVcmw7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgU2V0dXAoYm9vbCBhc3luYyA9IGZhbHNlLCBib29sIGRlZmVyID0gZmFsc2UpXHJcblx0XHR7XHJcblx0XHRcdGlmKCFTZXR1cENvbXBsZXRlZClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKEluTG9hZCkgcmV0dXJuO1xyXG5cdFx0XHRcdEluTG9hZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gbmV3IEhUTUxTY3JpcHRFbGVtZW50KClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBPbkxvYWQgPSAoZWxlKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbkxvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoT25SZWFkeSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT25SZWFkeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgU3JjID0gU291cmNlVXJsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYoYXN5bmMpXHJcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0LkFzeW5jID0gYXN5bmM7XHJcbiAgICAgICAgICAgICAgICBpZihkZWZlcilcclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuRGVmZXIgPSBkZWZlcjsgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIERvY3VtZW50LkhlYWQuQXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFVzYWdlQ2hlY2soKVxyXG5cdFx0e1xyXG5cdFx0XHRpZighU2V0dXBDb21wbGV0ZWQpXHJcblx0XHRcdFx0dGhyb3cgbmV3IEV4Y2VwdGlvbihcIidcIiArIFNvdXJjZVVybCArICBcIicgcmVxdWlyZXMgdG8gYmUgc2V0dXAhXCIpO1xyXG5cdFx0XHRpZihJbkxvYWQpXHJcblx0XHRcdFx0dGhyb3cgbmV3IEV4Y2VwdGlvbihcIidcIiArIFNvdXJjZVVybCArIFwiJyBpcyBjdXJyZW50bHkgbG9hZGluZywgUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIGZldyBzZWNvbmRzIVwiKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2U7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgRmlyZWJhc2VcclxuXHR7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBFeHRlcm5hbFBsdWdpbiBFeHRlcm5hbEZpcmVCYXNlID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy8zLjYuOC9maXJlYmFzZS5qc1wiKTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBEaXNwbGF5TmFtZTtcclxuXHRcdHB1YmxpYyBzdGF0aWMgc3RyaW5nIFBob3RvVVJMO1xyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIFVzZXJTaWduZWRJbjtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoQWN0aW9uIE9uUmVhZHkgPSBudWxsKVxyXG5cdFx0e1xyXG5cdFx0XHRFeHRlcm5hbEZpcmVCYXNlLk9uUmVhZHkgPSBPblJlYWR5O1xyXG5cdFx0XHRFeHRlcm5hbEZpcmVCYXNlLlNldHVwKCk7XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBJbml0aWFsaXplQXBwKHN0cmluZyBBcGlLZXksIHN0cmluZyBBdXRoRG9tYWluLCBzdHJpbmcgRGF0YWJhc2VVUkwsIHN0cmluZyBQcm9qZWN0SWQsIHN0cmluZyBTdG9yYWdlQnVja2V0LCBzdHJpbmcgTWVzc2FnaW5nU2VuZGVySWQpXHJcblx0XHR7XHJcblx0XHRcdEV4dGVybmFsRmlyZUJhc2UuVXNhZ2VDaGVjaygpO1xyXG5cdFx0XHRpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKEFwaUtleSkpXHJcblx0XHRcdFx0dGhyb3cgbmV3IEV4Y2VwdGlvbihzdHJpbmcuRm9ybWF0KFwiSW52YWxpZCBGaXJlYmFzZSB7MH0gIVwiLFwiQXBpS2V5XCIpKTtcclxuXHRcdFx0aWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShBdXRoRG9tYWluKSlcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIkF1dGhEb21haW5cIikpO1xyXG5cdFx0XHRpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKERhdGFiYXNlVVJMKSlcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIkRhdGFiYXNlVVJMXCIpKTtcclxuXHRcdFx0aWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShQcm9qZWN0SWQpKVxyXG5cdFx0XHRcdHRocm93IG5ldyBFeGNlcHRpb24oc3RyaW5nLkZvcm1hdChcIkludmFsaWQgRmlyZWJhc2UgezB9IVwiLFwiUHJvamVjdElkXCIpKTtcclxuXHRcdFx0aWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShTdG9yYWdlQnVja2V0KSlcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIlN0b3JhZ2VCdWNrZXRcIikpO1xyXG5cdFx0XHRpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKE1lc3NhZ2luZ1NlbmRlcklkKSlcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXhjZXB0aW9uKHN0cmluZy5Gb3JtYXQoXCJJbnZhbGlkIEZpcmViYXNlIHswfSFcIixcIk1lc3NhZ2luZ1NlbmRlcklkXCIpKTtcclxuXHJcblx0XHRcdC8qQFxyXG5cdFx0XHRmaXJlYmFzZS5pbml0aWFsaXplQXBwKHthcGlLZXk6IEFwaUtleSwgYXV0aERvbWFpbjogQXV0aERvbWFpbiwgZGF0YWJhc2VVUkw6IERhdGFiYXNlVVJMLCBwcm9qZWN0SWQgOiBQcm9qZWN0SWQsIHN0b3JhZ2VCdWNrZXQ6IFN0b3JhZ2VCdWNrZXQsIG1lc3NhZ2luZ1NlbmRlcklkOiBNZXNzYWdpbmdTZW5kZXJJZCB9KTtcclxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbih1c2VyKSB7XHJcblx0XHRcdFx0aWYgKHVzZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMuVXNlclNpZ25lZEluID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHRoaXMuRGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xyXG5cdFx0XHRcdFx0dGhpcy5QaG90b1VSTCA9IHVzZXIucGhvdG9VUkw7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHR0aGlzLlVzZXJTaWduZWRJbiA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQqL1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBTaWduSW4oKVxyXG5cdFx0e1xyXG5cdFx0XHQvKkBcdFx0XHRcclxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQb3B1cChuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKSk7XHJcblx0XHRcdCovXHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNpZ25PdXQoKVxyXG5cdFx0e1xyXG5cdFx0XHQvKkBcdFx0XHRcclxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKTtcclxuXHRcdFx0Ki9cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIG9iamVjdCBEYXRhYmFzZVJlZihzdHJpbmcgbmFtZSlcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0dmFyIGRhdGFSZWYgPSBTY3JpcHQuV3JpdGU8ZHluYW1pYz4oXCJmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihuYW1lKVwiKTtcclxuXHRcdFx0ZGF0YVJlZi5vZmYoKTtcclxuXHRcdFx0cmV0dXJuIGRhdGFSZWY7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIElzU2lnbmVkSW5XaXRoRmlyZWJhc2UoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gU2NyaXB0LldyaXRlPGJvb2w+KEBcIlxyXG5cdFx0XHRpZihmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fWVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVwiKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRm9ybUNvbGxlY3Rpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRm9ybSBGb3JtT3duZXI7XHJcbiAgICAgICAgcHVibGljIExpc3Q8Rm9ybT4gVmlzaWJsZUZvcm1zID0gbmV3IExpc3Q8Rm9ybT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEZvcm1Db2xsZWN0aW9uKEZvcm0gZm9ybU93bmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRm9ybU93bmVyID0gZm9ybU93bmVyO1x0XHRcdFxyXG5cdFx0fVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdtYWlsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBFeHRlcm5hbFBsdWdpbiBFeHRlcm5hbEdtYWlsID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvYXBpLmpzXCIpO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIENsaWVudElkO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgb2JqZWN0IEdvb2dsZUF1dGg7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIExpc3Q8QWN0aW9uPiBfb25lVGltZUNhbGwgPSBuZXcgTGlzdDxBY3Rpb24+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBdXRob3JpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUV4dGVybmFsR21haWwuU2V0dXBDb21wbGV0ZWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZihJc1NpZ25lZEluKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC8qQFx0XHRcdFxyXG5cdFx0XHRFeHByZXNzQ3JhZnQuR21haWwuR29vZ2xlQXV0aCA9IGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKClcclxuICAgICAgICAgICAgZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5zaWduSW4oKTsgICAgICAgICAgICBcclxuXHRcdFx0Ki9cclxuICAgICAgICAgICAgICAgIF9oYXNSYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIFB1c2hFdmVudHNUaW1lQ2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgV2luZG93LkZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYm9vbCBfaGFzUmFuID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFB1c2hFdmVudHNUaW1lQ2FsbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihfaGFzUmFuKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBfaGFzUmFuID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBjYWxscHVtcCBpbiBfb25lVGltZUNhbGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FsbHB1bXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbHB1bXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIF9vbmVUaW1lQ2FsbCA9IG5ldyBMaXN0PEFjdGlvbj4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBPblNpZ25lZEluKEFjdGlvbiBtZXRob2QpICAgICAgICAgICAgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtZXRob2QgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmKF9oYXNSYW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX29uZVRpbWVDYWxsLkFkZCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKW1ldGhvZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzU2lnbmVkSW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUV4dGVybmFsR21haWwuU2V0dXBDb21wbGV0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJTZXR1cCBmb3IgZ21haWwgaXMgbm90IHJlYWR5IHlldCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoR29vZ2xlQXV0aCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiR29vZ2xlQXV0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib29sIHNpZ25lZEluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0c2lnbmVkSW4gPSBFeHByZXNzQ3JhZnQuR21haWwuR29vZ2xlQXV0aC5pc1NpZ25lZEluLmdldCgpO1xyXG5cdFx0XHQqL1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNpZ25lZEluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgQWNjZXNzVG9rZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIUV4dGVybmFsR21haWwuU2V0dXBDb21wbGV0ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJTZXR1cCBmb3IgZ21haWwgaXMgbm90IHJlYWR5IHlldCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoR29vZ2xlQXV0aCA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKFwiR29vZ2xlQXV0aFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3RyaW5nIGFjY2Vzc190b2tlbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0YWNjZXNzX3Rva2VuID0gRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGguY3VycmVudFVzZXIuQWIuWmkuYWNjZXNzX3Rva2VuO1xyXG5cdFx0XHQqL1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc190b2tlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEZ1bGxuYW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFFeHRlcm5hbEdtYWlsLlNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiU2V0dXAgZm9yIGdtYWlsIGlzIG5vdCByZWFkeSB5ZXQhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKEdvb2dsZUF1dGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIkdvb2dsZUF1dGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBmdWxsbmFtZSA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0ZnVsbG5hbWUgPSBFeHByZXNzQ3JhZnQuR21haWwuR29vZ2xlQXV0aC5jdXJyZW50VXNlci5BYi53My5pZztcclxuXHRcdFx0Ki9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdWxsbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEVtYWlsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFFeHRlcm5hbEdtYWlsLlNldHVwQ29tcGxldGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiU2V0dXAgZm9yIGdtYWlsIGlzIG5vdCByZWFkeSB5ZXQhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKEdvb2dsZUF1dGggPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEV4Y2VwdGlvbihcIkdvb2dsZUF1dGhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0cmluZyBlbWFpbCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0ZW1haWwgPSBFeHByZXNzQ3JhZnQuR21haWwuR29vZ2xlQXV0aC5jdXJyZW50VXNlci5BYi53My5VMztcclxuXHRcdFx0Ki9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbWFpbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldENvbnRlbnRUeXBlRnJvbUZpbGVOYW1lKHN0cmluZyBmaWxlbmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZmlsZW5hbWUpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XHJcblxyXG4gICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lLlRvTG93ZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGZpbGVuYW1lLkVuZHNXaXRoKFwiLnBkZlwiKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImFwcGxpY2F0aW9uL3BkZlwiO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGZpbGVuYW1lLkVuZHNXaXRoKFwiLnBuZ1wiKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImltYWdlL3BuZ1wiO1xyXG4gICAgICAgICAgICBlbHNlIGlmKGZpbGVuYW1lLkVuZHNXaXRoKFwiLmpwZ1wiKSB8fCBmaWxlbmFtZS5FbmRzV2l0aChcIi5qcGVnXCIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW1hZ2UvanBlZ1wiO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZW5kRW1haWwoR21haWxNZXNzYWdlIG1lc3NhZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtZXNzYWdlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtVHlwZTogbXVsdGlwYXJ0L21peGVkOyBib3VuZGFyeT1cXFwiX2ludGVsb2d5XzhhYjMzN2VjMmUzOGUxYThiODJhMDFhNTcxMmE4YmRiXFxcIlxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJNSU1FLVZlcnNpb246IDEuMFxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJGcm9tOiBcIiArIEVtYWlsKCkgKyBcIlxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJUbzogXCIgKyBtZXNzYWdlLlRvRW1haWwgKyBcIlxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJTdWJqZWN0OiBcIiArIG1lc3NhZ2UuU3ViamVjdCArIFwiXFxyXFxuXFxyXFxuXCIpO1xyXG5cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCItLV9pbnRlbG9neV84YWIzMzdlYzJlMzhlMWE4YjgyYTAxYTU3MTJhOGJkYlxcclxcblwiKTtcclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCJDb250ZW50LVR5cGU6IHRleHQvXCIgKyAobWVzc2FnZS5Jc0hUTUwgPyBcImh0bWxcIiA6IFwicGxhaW5cIikgKyBcIjsgY2hhcnNldD1cXFwiVVRGLThcXFwiXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIk1JTUUtVmVyc2lvbjogMS4wXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDdiaXRcXHJcXG5cXHJcXG5cIik7XHJcblxyXG4gICAgICAgICAgICBpZihtZXNzYWdlLklzSFRNTClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoKG1lc3NhZ2UuQm9keSArIFwiXCIpLlJlcGxhY2UoXCJcXHJcXG5cIiwgXCI8YnIgLz5cIikgKyBcIlxcclxcblxcclxcblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKG1lc3NhZ2UuQm9keSArIFwiXFxyXFxuXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcblxyXG5cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCItLV9pbnRlbG9neV84YWIzMzdlYzJlMzhlMWE4YjgyYTAxYTU3MTJhOGJkYlxcclxcblwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2UuQXR0YWNobWVudHMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYXR0YWNobWVudCBpbiBtZXNzYWdlLkF0dGFjaG1lbnRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGF0dGFjaG1lbnQuRGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIi0tX2ludGVsb2d5XzhhYjMzN2VjMmUzOGUxYThiODJhMDFhNTcxMmE4YmRiXFxyXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtVHlwZTogXCIgKyBHZXRDb250ZW50VHlwZUZyb21GaWxlTmFtZShhdHRhY2htZW50LkZpbGVuYW1lKSArIFwiOyBjaGFyc2V0PVxcXCJVVEYtOFxcXCJcXHJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiTUlNRS1WZXJzaW9uOiAxLjBcXHJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogYmFzZTY0XFxyXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChcIkNvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPVxcXCJcIiArIChhdHRhY2htZW50LkZpbGVuYW1lKS5SZXBsYWNlKFwiXFxcIlwiLCBcIlwiKSArIFwiXFxcIlxcclxcblxcclxcblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGF0dGFjaG1lbnQuSXNCYXNlNjQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKGF0dGFjaG1lbnQuRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChHbG9iYWwuQnRvYShhdHRhY2htZW50LkRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKFwiXFxyXFxuXFxyXFxuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoXCItLV9pbnRlbG9neV84YWIzMzdlYzJlMzhlMWE4YjgyYTAxYTU3MTJhOGJkYlxcclxcblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gbmV3IEFqYXhPcHRpb25zKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHlwZSA9IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS91cGxvYWQvZ21haWwvdjEvdXNlcnMvbWUvbWVzc2FnZXMvc2VuZD91cGxvYWRUeXBlPW11bHRpcGFydFwiLFxyXG4gICAgICAgICAgICAgICAgQ29udGVudFR5cGUgPSBcIm1lc3NhZ2UvcmZjODIyXCIgICAsXHJcbiAgICAgICAgICAgICAgICBEYXRhID0gYnVpbGRlci5Ub1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgSGVhZGVycyA9IG5ldyB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbiA9IFwiQmVhcmVyIFwiICsgQWNjZXNzVG9rZW4oKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIEVycm9yID0gKGEsIGIsIGMpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgQ29tcGxldGUgPSAoanEsIGRhdGEpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPSAob2JqLCBkYXRhLCBqcSkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBqUXVlcnkuQWpheChzZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgSWNvblVSTCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighRXh0ZXJuYWxHbWFpbC5TZXR1cENvbXBsZXRlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlNldHVwIGZvciBnbWFpbCBpcyBub3QgcmVhZHkgeWV0IVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihHb29nbGVBdXRoID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oXCJHb29nbGVBdXRoXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgaWNvblVybCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0aWNvblVybCA9IEV4cHJlc3NDcmFmdC5HbWFpbC5Hb29nbGVBdXRoLmN1cnJlbnRVc2VyLkFiLnczLlBhYTtcclxuXHRcdFx0Ki9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpY29uVXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldHVwKHN0cmluZyBjbGllbnRJZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENsaWVudElkID0gY2xpZW50SWQ7XHJcblxyXG4gICAgICAgICAgICBFeHRlcm5hbEdtYWlsLk9uUmVhZHkgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvKkBcdFx0XHRcclxuXHRcdFx0ICAgIGdhcGkubG9hZCgnY2xpZW50OmF1dGgyJywgZnVuY3Rpb24oKSB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGdhcGkuY2xpZW50LmluaXQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJ5RG9jczogW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZ21haWwvdjEvcmVzdFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElkOiBFeHByZXNzQ3JhZnQuR21haWwuQ2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZ21haWwuc2VuZCdcclxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIExpc3RlbiBmb3Igc2lnbi1pbiBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc0NyYWZ0LkdtYWlsLkdvb2dsZUF1dGggPSBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIEV4cHJlc3NDcmFmdC5HbWFpbC5QdXNoRXZlbnRzVGltZUNhbGwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cdFx0XHQgICAgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBFeHRlcm5hbEdtYWlsLlNldHVwKHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR21haWxNZXNzYWdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0VtYWlsIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdWJqZWN0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEJvZHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSFRNTCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHbWFpbE1lc3NhZ2Uoc3RyaW5nIHRvRW1haWwsIHN0cmluZyBzdWJqZWN0LCBzdHJpbmcgYm9keSwgYm9vbCBpc0hUTUwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb0VtYWlsID0gdG9FbWFpbDtcclxuICAgICAgICAgICAgU3ViamVjdCA9IHN1YmplY3Q7XHJcbiAgICAgICAgICAgIEJvZHkgPSBib2R5O1xyXG4gICAgICAgICAgICBJc0hUTUwgPSBpc0hUTUw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxHbWFpbE1lc3NhZ2VBdHRhY2htZW50PiBBdHRhY2htZW50cyB7IGdldDsgc2V0OyB9XHJcblxuICAgIFxucHJpdmF0ZSBMaXN0PEdtYWlsTWVzc2FnZUF0dGFjaG1lbnQ+IF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19BdHRhY2htZW50cz1uZXcgTGlzdDxHbWFpbE1lc3NhZ2VBdHRhY2htZW50PigpO31cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgR21haWxNZXNzYWdlQXR0YWNobWVudFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRmlsZW5hbWUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRGF0YSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNCYXNlNjQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR21haWxNZXNzYWdlQXR0YWNobWVudChzdHJpbmcgZmlsZW5hbWUsIHN0cmluZyBkYXRhLCBib29sIGlzQmFzZTY0ID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaWxlbmFtZSA9IGZpbGVuYW1lOyBEYXRhID0gZGF0YTsgSXNCYXNlNjQgPSBpc0Jhc2U2NDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIEdvb2dsZUNsb3VkUHJpbnRcclxuXHR7XHRcclxuXHRcdHByaXZhdGUgc3RyaW5nIF9zb3VyY2U7XHJcblx0XHRwcml2YXRlIHN0cmluZyBfbWltZXR5cGU7XHJcblx0XHRwcml2YXRlIHN0cmluZyBfZW5jb2RpbmcgPSBcIlwiO1xyXG5cdFx0cHJpdmF0ZSBzdHJpbmcgX3RpdGxlO1xyXG5cdFx0cHJpdmF0ZSBvYmplY3QgX2dhZGdldCA9IG51bGw7XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxHb29nbGVDbG91ZFByaW50ID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jbG91ZHByaW50L2NsaWVudC9jcGdhZGdldC5qc1wiKTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoKVxyXG5cdFx0e1xyXG5cdFx0XHRFeHRlcm5hbEdvb2dsZUNsb3VkUHJpbnQuU2V0dXAoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgR29vZ2xlQ2xvdWRQcmludChzdHJpbmcgc291cmNlLCBzdHJpbmcgdGl0bGUgPSBcIlwiLCAgR29vZ2xlQ2xvdWRQcmludGluZ01pbWVUeXBlIGdjcG10ID0gR29vZ2xlQ2xvdWRQcmludGluZ01pbWVUeXBlLlVybCwgc3RyaW5nIGVuY29kaW5nID0gXCJcIikgOiBiYXNlKClcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0X3RpdGxlID0gdGl0bGU7XHJcblx0XHRcdF9zb3VyY2UgPSBzb3VyY2U7XHJcblx0XHRcdF9lbmNvZGluZyA9IGVuY29kaW5nO1xyXG5cdFx0XHRfbWltZXR5cGUgPSBnY3BtdC5Ub1N0cmluZyhcIkdcIikuVG9Mb3dlcigpLlJlcGxhY2UoXCJfXCIsIFwiLlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTaG93KClcclxuXHRcdHtcclxuXHRcdFx0RXh0ZXJuYWxHb29nbGVDbG91ZFByaW50LlVzYWdlQ2hlY2soKTtcclxuXHJcblx0XHRcdC8qQFxyXG5cdFx0XHR0aGlzLl9nYWRnZXQgPSBuZXcgY2xvdWRwcmludC5HYWRnZXQoKTtcdFx0XHRcclxuXHRcdFx0Ki9cclxuXHRcdFx0aWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoX2VuY29kaW5nKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8qQFxyXG5cdFx0XHRcdHRoaXMuX2dhZGdldC5zZXRQcmludERvY3VtZW50KHRoaXMuX21pbWV0eXBlLCB0aGlzLl90aXRsZSwgdGhpcy5fc291cmNlLCB0aGlzLl9lbmNvZGluZyk7XHJcblx0XHRcdFx0Ki9cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvKkBcclxuXHRcdFx0XHR0aGlzLl9nYWRnZXQuc2V0UHJpbnREb2N1bWVudCh0aGlzLl9taW1ldHlwZSwgdGhpcy5fdGl0bGUsIHRoaXMuX3NvdXJjZSk7XHJcblx0XHRcdFx0Ki9cclxuXHRcdFx0fVxyXG5cdFx0XHQvKkBcclxuXHRcdFx0dGhpcy5fZ2FkZ2V0Lm9wZW5QcmludERpYWxvZygpO1xyXG5cdFx0XHR0aGlzLl9nYWRnZXQuc2V0T25DbG9zZUNhbGxiYWNrKHRoaXMuY2xlYXJDb250ZW50KTtcdFx0XHRcclxuXHRcdFx0Ki9cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBjbGVhckNvbnRlbnQoKVxyXG5cdFx0e1xyXG5cdFx0XHR0cnlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGpRdWVyeS5TZWxlY3QoXCIuX19nY3BfZGlhbG9nX2NvbnRhaW5lcl9jbHNcIikuUGFyZW50KCkuR2V0KDApLkRlbGV0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNhdGNoKEV4Y2VwdGlvbilcclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDbG9zZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKHRoaXMuX2dhZGdldCAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0LypAXHRcdFx0XHJcblx0XHRcdFx0dGhpcy5fZ2FkZ2V0LmNsb3NlUHJpbnREaWFsb2coKTtcclxuXHRcdFx0XHR0aGlzLl9nYWRnZXQgPSBudWxsO1xyXG5cdFx0XHRcdCovXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG4vLzxzY3JpcHQgc3JjID0gXCJodHRwczovL3d3dy5nb29nbGUuY29tL2Nsb3VkcHJpbnQvY2xpZW50L2NwZ2FkZ2V0LmpzXCIgPlxyXG4vLzwvIHNjcmlwdCA+XHJcbi8vPCBzY3JpcHQgPlxyXG4vLyAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4vLyAgICB2YXIgZ2FkZ2V0ID0gbmV3IGNsb3VkcHJpbnQuR2FkZ2V0KCk7XHJcbi8vZ2FkZ2V0LnNldFByaW50RG9jdW1lbnQoXCJ1cmxcIiwgXCJUZXN0IFBhZ2VcIiwgXCJodHRwczovL3d3dy5nb29nbGUuY29tLmF1Lz9nZmVfcmQ9Y3ImZWk9SnBxR1dKdzV4T3Z3QjhHV29jQUJcIik7XHJcbi8vXHRnYWRnZXQub3BlblByaW50RGlhbG9nKCk7XHJcbi8vICB9XHJcbi8vPC9zY3JpcHQ+IiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHRcclxuXHRwdWJsaWMgY2xhc3MgR3JpZFZpZXdDZWxsQXBwYXJlbmNlXHJcblx0e1xyXG5cdFx0cHVibGljIGJvb2wgSXNCb2xkID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgVGV4dEFsaWduIEFsaWdubWVudCA9IFRleHRBbGlnbi5MZWZ0O1xyXG5cdFx0cHVibGljIHN0cmluZyBGb3JlY29sb3IgPSBudWxsO1xyXG5cclxuXHRcdHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoYm9vbCBpc0JvbGQpXHJcblx0XHR7XHJcblx0XHRcdElzQm9sZCA9IGlzQm9sZDtcclxuXHRcdH1cclxuXHRcdHB1YmxpYyBHcmlkVmlld0NlbGxBcHBhcmVuY2UoYm9vbCBpc0JvbGQsIFRleHRBbGlnbiBhbGlnbm1lbnQpXHJcblx0XHR7XHJcblx0XHRcdElzQm9sZCA9IGlzQm9sZDtcclxuXHRcdFx0QWxpZ25tZW50ID0gYWxpZ25tZW50O1xyXG5cdFx0fVxyXG5cdFx0cHVibGljIEdyaWRWaWV3Q2VsbEFwcGFyZW5jZShib29sIGlzQm9sZCwgVGV4dEFsaWduIGFsaWdubWVudCwgc3RyaW5nIGZvcmVjb2xvcilcclxuXHRcdHtcclxuXHRcdFx0SXNCb2xkID0gaXNCb2xkO1xyXG5cdFx0XHRBbGlnbm1lbnQgPSBhbGlnbm1lbnQ7XHJcblx0XHRcdEZvcmVjb2xvciA9IGZvcmVjb2xvcjtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgYWJzdHJhY3QgY2xhc3MgR3JpZFZpZXdDZWxsRGlzcGxheVxyXG5cdHtcclxuXHRcdHB1YmxpYyBib29sIFVzZURlZmF1bHRFbGVtZW50O1xyXG5cclxuXHRcdHB1YmxpYyB2aXJ0dWFsIEhUTUxFbGVtZW50IE9uQ3JlYXRlKEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2aXJ0dWFsIEhUTUxFbGVtZW50IE9uQ3JlYXRlRGVmYXVsdChIVE1MRWxlbWVudCBvcmlnaW5hbEVsZW1lbnQsIEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBvcmlnaW5hbEVsZW1lbnQ7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBjbGFzcyBHcmlkVmlld0NvbHVtblxyXG5cdHtcclxuXHRcdHB1YmxpYyBEYXRhQ29sdW1uIENvbHVtbjtcclxuXHRcdHB1YmxpYyBHcmlkVmlldyBWaWV3O1xyXG5cdFx0cHVibGljIHN0cmluZyBDYXB0aW9uO1xyXG5cdFx0cHVibGljIGJvb2wgVmlzaWJsZTtcclxuXHRcdHB1YmxpYyBmbG9hdCBDYWNoZWRYO1xyXG5cdFx0cHVibGljIHN0cmluZyBGb3JtYXRTdHJpbmcgPSBzdHJpbmcuRW1wdHk7XHJcblx0XHRwdWJsaWMgR3JpZFZpZXdDZWxsQXBwYXJlbmNlIEhlYWRpbmdBcHBhcmVuY2UgPSBuZXcgR3JpZFZpZXdDZWxsQXBwYXJlbmNlKCk7XHJcblx0XHRwdWJsaWMgR3JpZFZpZXdDZWxsQXBwYXJlbmNlIEJvZHlBcHBhcmVuY2UgPSBuZXcgR3JpZFZpZXdDZWxsQXBwYXJlbmNlKCk7XHJcblx0XHRwdWJsaWMgR3JpZFZpZXdDZWxsRGlzcGxheSBDZWxsRGlzcGxheSA9IG51bGw7XHJcblx0XHRwdWJsaWMgR3JpZFZpZXdTb3J0TW9kZSBTb3J0ZWRNb2RlID0gR3JpZFZpZXdTb3J0TW9kZS5Ob25lO1x0XHRcclxuXHJcblx0XHRwdWJsaWMgVGV4dElucHV0IEZpbHRlckVkaXQgPSBudWxsO1xyXG5cclxuXHRcdHByaXZhdGUgb2JqZWN0IGZpbHRlclZhbHVlO1xyXG5cclxuXHRcdHB1YmxpYyBvYmplY3QgRmlsdGVyVmFsdWVcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIGZpbHRlclZhbHVlOyB9XHJcblx0XHRcdHNldCB7XHJcblx0XHRcdFx0aWYoZmlsdGVyVmFsdWUgIT0gdmFsdWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZmlsdGVyVmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGlmKFZpZXcuU2hvd0F1dG9GaWx0ZXJSb3cpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFZpZXcuQ2FsY3VsYXRlVmlzaWJsZVJvd3MoKTtcclxuXHRcdFx0XHRcdH1cdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGJvb2wgVmFsdWVNYXRjaEZpbHRlcihpbnQgaW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdGlmKGZpbHRlclZhbHVlID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0XHRvYmplY3QgYWJjID0gR2V0RGlzcGxheVZhbHVlQnlEYXRhUm93SGFuZGxlKGluZGV4KTtcclxuXHJcblx0XHRcdHN3aXRjaChDb2x1bW4uRGF0YVR5cGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuSW50ZWdlcjpcdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuTG9uZzpcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkZsb2F0OlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRGVjaW1hbDpcclxuXHRcdFx0XHRjYXNlIERhdGFUeXBlLkJvb2w6XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5CeXRlOlxyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuU2hvcnQ6XHJcblx0XHRcdFx0XHRyZXR1cm4gYWJjID09IGZpbHRlclZhbHVlO1xyXG5cdFx0XHRcdGNhc2UgRGF0YVR5cGUuRGF0ZVRpbWU6XHJcblx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5TdHJpbmc6XHJcblx0XHRcdFx0XHRyZXR1cm4gKGFiYyArIFwiXCIpLlN0YXJ0c1dpdGgoZmlsdGVyVmFsdWUgKyBcIlwiKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGJvb2wgQWxsb3dFZGl0ID0gdHJ1ZTtcclxuXHRcdHB1YmxpYyBib29sIFJlYWRPbmx5ID0gZmFsc2U7XHJcblxyXG5cdFx0cHVibGljIGludCBHZXREYXRhQ29sdW1uSW5kZXgoKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbGVuZ3RoID0gVmlldy5EYXRhU291cmNlLkNvbHVtbkNvdW50O1xyXG5cdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihWaWV3LkRhdGFTb3VyY2UuQ29sdW1uc1tpXSA9PSBDb2x1bW4pXHJcblx0XHRcdFx0XHRyZXR1cm4gaTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gLTE7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBHZXREaXNwbGF5VmFsdWVCeURhdGFSb3dIYW5kbGUoaW50IFJvd0hhbmRsZSlcclxuXHRcdHtcclxuXHRcdFx0aWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShGb3JtYXRTdHJpbmcpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIENvbHVtbi5HZXREaXNwbGF5VmFsdWUoUm93SGFuZGxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gQ29sdW1uLkdldERpc3BsYXlWYWx1ZShSb3dIYW5kbGUsIEZvcm1hdFN0cmluZyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RyaW5nIEdldERpc3BsYXlWYWx1ZShpbnQgUm93SGFuZGxlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihWaWV3LlZpc2libGVSb3dIYW5kbGVzICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRSb3dIYW5kbGUgPSBWaWV3LlZpc2libGVSb3dIYW5kbGVzW1Jvd0hhbmRsZV07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoRm9ybWF0U3RyaW5nKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBDb2x1bW4uR2V0RGlzcGxheVZhbHVlKFJvd0hhbmRsZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIENvbHVtbi5HZXREaXNwbGF5VmFsdWUoUm93SGFuZGxlLCBGb3JtYXRTdHJpbmcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBpbnQgX3dpZHRoO1xyXG5cclxuXHRcdHB1YmxpYyBpbnQgV2lkdGhcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gX3dpZHRoO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodmFsdWUgPCAyNClcclxuXHRcdFx0XHRcdHZhbHVlID0gMjQ7XHJcblx0XHRcdFx0aWYoX3dpZHRoICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF93aWR0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0Vmlldy5SZW5kZXJHcmlkKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIEdyaWRWaWV3Q29sdW1uKEdyaWRWaWV3IHZpZXcsIGludCB3aWR0aCA9IDEwMClcclxuXHRcdHtcclxuXHRcdFx0VmlldyA9IHZpZXc7XHJcblx0XHRcdF93aWR0aCA9IHdpZHRoO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgSW5kZXhWYWx1ZTxUPlxyXG5cdHtcclxuXHRcdHB1YmxpYyByZWFkb25seSBpbnQgSW5kZXg7XHJcblx0XHRwdWJsaWMgVCBWYWx1ZTtcclxuXHJcblx0XHRwdWJsaWMgSW5kZXhWYWx1ZShpbnQgaW5kZXgsIFQgdmFsdWUpXHJcblx0XHR7XHJcblx0XHRcdEluZGV4ID0gaW5kZXg7XHJcblx0XHRcdFZhbHVlID0gdmFsdWU7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY2xhc3MgSGFyZFNvZnRMaXN0PFQ+XHJcblx0e1xyXG4gICAgICAgIHByaXZhdGUgTGlzdDxUPiBfaGhsID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICBwcm90ZWN0ZWQgTGlzdDxJbmRleFZhbHVlPFQ+PiBfaGwgPSBuZXcgTGlzdDxJbmRleFZhbHVlPFQ+PigpO1xyXG5cdFx0cHVibGljIExpc3Q8aW50PiBTTCA9IG5ldyBMaXN0PGludD4oKTsgICAgXHRcdFxyXG5cclxuXHRcdHByaXZhdGUgaW50IExpbWl0O1xyXG5cclxuXHRcdHByaXZhdGUgaW50IEhhcmRMZW5ndGggPSAwO1xyXG5cclxuXHRcdHB1YmxpYyBJbmRleFZhbHVlPFQ+IEdldEluZGV4VmFsdWVCeUhhcmRMaXN0SW5kZXgoaW50IGluZGV4KVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gX2hsW2luZGV4XTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgVCBEZWZhdWx0VmFsdWU7XHJcblxyXG5cdFx0cHVibGljIEhhcmRTb2Z0TGlzdChUIGRlZmF1bHRWYWx1ZSwgaW50IGxpbWl0ID0gMTAwMDApXHJcblx0XHR7XHJcblx0XHRcdERlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuXHRcdFx0TGltaXQgPSBsaW1pdDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDbGVhckFsbCgpXHJcblx0XHR7XHJcblx0XHRcdF9oaGwgPSBuZXcgTGlzdDxUPigpO1xyXG5cdFx0XHRfaGwgPSBuZXcgTGlzdDxJbmRleFZhbHVlPFQ+PigpO1xyXG5cdFx0XHRTTCA9IG5ldyBMaXN0PGludD4oKTtcclxuXHRcdFx0SGFyZExlbmd0aCA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2xlYXJBbGxTZXRIYXJkUmFuZ2UoVCB2YWx1ZSwgcGFyYW1zIGludFtdIEluZGV4cylcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0SGFyZExlbmd0aCA9IDA7XHJcblx0XHRcdGlmKEluZGV4cyA9PSBudWxsIHx8IEluZGV4cy5MZW5ndGggPT0gMClcclxuXHRcdFx0XHRDbGVhckFsbCgpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihJbmRleHMuTGVuZ3RoID4gTGltaXQpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0SGFyZExlbmd0aCA9IEluZGV4cy5MZW5ndGg7XHJcblx0XHRcdFx0XHRfaGwgPSBuZXcgTGlzdDxJbmRleFZhbHVlPFQ+PigpO1xyXG5cdFx0XHRcdFx0U0wgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aW50IG1heCA9IDA7XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBIYXJkTGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmKEluZGV4c1tpXSA+IG1heClcclxuXHRcdFx0XHRcdFx0XHRtYXggPSBJbmRleHNbaV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpbnQgbGVuZ3RoID0gbWF4ICsgMTtcclxuXHRcdFx0XHRcdF9oaGwgPSBuZXcgTGlzdDxUPihsZW5ndGgpO1xyXG5cclxuXHRcdFx0XHRcdGlmKGxlbmd0aCA9PSBJbmRleHMuTGVuZ3RoKVxyXG5cdFx0XHRcdFx0e1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgSGFyZExlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0X2hobC5BZGQodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdF9oaGwuQWRkKERlZmF1bHRWYWx1ZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IEhhcmRMZW5ndGg7IGkrKylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdF9oaGxbSW5kZXhzW2ldXSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfaGhsID0gbmV3IExpc3Q8VD4oKTtcclxuXHRcdFx0XHRcdEhhcmRMZW5ndGggPSBJbmRleHMuTGVuZ3RoO1xyXG5cdFx0XHRcdFx0X2hsID0gbmV3IExpc3Q8SW5kZXhWYWx1ZTxUPj4oSGFyZExlbmd0aCk7XHJcblx0XHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgSGFyZExlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRfaGwuQWRkKG5ldyBJbmRleFZhbHVlPFQ+KEluZGV4c1tpXSwgdmFsdWUpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFNMID0gbmV3IExpc3Q8aW50PigpO1xyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2xlYXJTb2Z0TGlzdCgpXHJcblx0XHR7XHJcblx0XHRcdFNMID0gbmV3IExpc3Q8aW50PigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIENsZWFyQW5kQWRkT3JTZXQoVCB2YWx1ZSwgaW50IGluZGV4LCBib29sIEFkZFRvU29mdExpc3QgPSBmYWxzZSlcclxuXHRcdHtcclxuXHRcdFx0X2hobCA9IG5ldyBMaXN0PFQ+KCk7XHJcblx0XHRcdF9obCA9IG5ldyBMaXN0PEluZGV4VmFsdWU8VD4+KCk7XHJcblx0XHRcdFNMID0gbmV3IExpc3Q8aW50PigpO1xyXG5cdFx0XHRIYXJkTGVuZ3RoID0gMDtcclxuXHRcdFx0QWRkT3JTZXQodmFsdWUsIGluZGV4LCBBZGRUb1NvZnRMaXN0KTtcclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgSW5kZXhWYWx1ZTxUPiBHZXRIYXJkT3JTb2Z0SW5kZXhWYWx1ZShpbnQgaW5kZXgsIGJvb2wgQWRkVG9Tb2Z0TGlzdCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHRpbnQgbGVuZ3RoID0gU0wuQ291bnQ7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBzbEkgPSBTTFtpXTtcclxuXHRcdFx0XHRpZihfaGxbc2xJXS5JbmRleCA9PSBpbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRyZXR1cm4gX2hsW3NsSV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHRcdFx0XHJcblxyXG5cdFx0XHRsZW5ndGggPSBfaGwuQ291bnQ7XHJcblxyXG5cdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgaGxpID0gX2hsW2ldO1xyXG5cdFx0XHRcdGlmKGhsaS5JbmRleCA9PSBpbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihBZGRUb1NvZnRMaXN0KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRTTC5BZGQoaSk7XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gaGxpO1xyXG5cdFx0XHRcdH1cdFx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCBJbmRleFZhbHVlPFQ+IEdldEhhcmRJbmRleFZhbHVlKHJlZiBpbnQgaW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdGludCBsZW5ndGggPSBfaGwuQ291bnQ7XHJcblxyXG5cdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgaGxpID0gX2hsW2ldO1xyXG5cdFx0XHRcdGlmKGhsaS5JbmRleCA9PSBpbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpbmRleCA9IGk7XHJcblx0XHRcdFx0XHRyZXR1cm4gaGxpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpbmRleCA9IGxlbmd0aDtcclxuXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBUIEdldFZhbHVlKGludCBpbmRleCwgYm9vbCBBZGRUb1NvZnRMaXN0ID0gZmFsc2UpXHJcblx0XHR7XHJcblx0XHRcdGlmKEhhcmRMZW5ndGggPiBMaW1pdClcclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuIF9oaGxbaW5kZXhdO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBoaXYgPSBHZXRIYXJkT3JTb2Z0SW5kZXhWYWx1ZShpbmRleCwgQWRkVG9Tb2Z0TGlzdCk7XHJcblx0XHRcdGlmKGhpdiA9PSBudWxsKVxyXG5cdFx0XHRcdHJldHVybiBEZWZhdWx0VmFsdWU7XHJcblx0XHRcdHJldHVybiBoaXYuVmFsdWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBHZXRJbmRleChpbnQgaW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdGlmKEhhcmRMZW5ndGggPiBMaW1pdClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGhpdiA9IEdldEhhcmRPclNvZnRJbmRleFZhbHVlKGluZGV4KTtcclxuXHRcdFx0aWYoaGl2ID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRyZXR1cm4gaGl2LkluZGV4O1xyXG5cdFx0fVx0XHRcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBBZGRPclNldChUIHZhbHVlLCBpbnQgaW5kZXgsIGJvb2wgQWRkVG9Tb2Z0TGlzdCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihIYXJkTGVuZ3RoID4gTGltaXQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihpbmRleCA+PSBIYXJkTGVuZ3RoKVxyXG5cdFx0XHRcdHtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpbnQgYWRkRGlmZiA9IChpbmRleCArIDEpIC0gX2hobC5Db3VudDtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZihhZGREaWZmID4gMClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0VFtdIGRhdGEgPSBuZXcgVFthZGREaWZmXTtcclxuXHRcdFx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IGFkZERpZmY7IGkrKylcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdGRhdGFbaV0gPSBEZWZhdWx0VmFsdWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0X2hobC5BZGRSYW5nZShkYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdF9oaGwuQWRkKHZhbHVlKTtcclxuXHRcdFx0XHRcdEhhcmRMZW5ndGggPSBfaGhsLkNvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X2hobFtpbmRleF0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpbnQgbGVuZ3RoID0gU0wuQ291bnQ7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBobGkgPSBfaGxbU0xbaV1dO1xyXG5cdFx0XHRcdGlmKGhsaS5JbmRleCA9PSBpbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRobGkuVmFsdWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGludCBoaW5kZXggPSBpbmRleDtcclxuXHRcdFx0dmFyIGhpdiA9IEdldEhhcmRJbmRleFZhbHVlKHJlZiBoaW5kZXgpO1xyXG5cdFx0XHRpZihoaXYgPT0gbnVsbClcdFx0XHRcclxuXHRcdFx0XHRfaGwuQWRkKChoaXYgPSBuZXcgSW5kZXhWYWx1ZTxUPihpbmRleCwgdmFsdWUpKSk7XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0ZWxzZVx0XHRcdFxyXG5cdFx0XHRcdGhpdi5WYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0aWYoQWRkVG9Tb2Z0TGlzdClcclxuXHRcdFx0XHRTTC5BZGQoaGluZGV4KTtcdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBSZW1vdmUoaW50IGluZGV4LCBib29sIE9ubHlTb2Z0TGlzdCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihIYXJkTGVuZ3RoID4gTGltaXQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihIYXJkTGVuZ3RoIC0gMSA+IExpbWl0KVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF9oaGxbaW5kZXhdID0gRGVmYXVsdFZhbHVlO1xyXG5cdFx0XHRcdH1lbHNlXHJcblx0XHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgSGFyZExlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihpICE9IGluZGV4ICYmICFfaGhsW2ldLkVxdWFscyhEZWZhdWx0VmFsdWUpKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0X2hsLkFkZChuZXcgSW5kZXhWYWx1ZTxUPihpLCBfaGhsW2ldKSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRIYXJkTGVuZ3RoIC09IDE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW50IExlbmd0aCA9IFNMLkNvdW50O1xyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBMZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgc2xpID0gU0xbaV07XHJcblx0XHRcdFx0XHRpZihfaGxbc2xpXS5JbmRleCA9PSBpbmRleClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0U0wuUmVtb3ZlQXQoaSk7XHJcblx0XHRcdFx0XHRcdGlmKE9ubHlTb2Z0TGlzdClcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHRcdF9obC5SZW1vdmVBdChzbGkpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGludCBsZW5ndGggPSBfaGwuQ291bnQ7XHJcblxyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgaGxpID0gX2hsW2ldO1xyXG5cdFx0XHRcdFx0aWYoaGxpLkluZGV4ID09IGluZGV4KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRfaGwuUmVtb3ZlQXQoaSk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdH1cclxuXHR9XHRcclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIHN0YXRpYyBjbGFzcyBIZWxwZXJcclxuXHR7ICAgICAgICBcclxuXHRcdHB1YmxpYyBjbGFzcyBEYXRhVGFibGVKc29uXHJcblx0XHR7XHJcblx0XHRcdHB1YmxpYyBzdHJpbmdbXSBmaWVsZE5hbWVzID0gbnVsbDtcclxuXHRcdFx0cHVibGljIG9iamVjdFtdW10gcm93cyA9IG51bGw7XHJcblx0XHRcdHB1YmxpYyBEYXRhVHlwZVtdIGRhdGFUeXBlcyA9IG51bGw7XHJcblxyXG5cdFx0XHRwdWJsaWMgc3RhdGljIERhdGFUYWJsZUpzb24gRnJvbUV4dGVybmFsKG9iamVjdCBvKVxyXG5cdFx0XHR7XHJcbiAgICAgICAgICAgICAgICBEYXRhVGFibGVKc29uIHg7XHJcblx0XHRcdFx0eCA9IFNjcmlwdC5Xcml0ZTxEYXRhVGFibGVKc29uPihcIkJyaWRnZS5tZXJnZShCcmlkZ2UuY3JlYXRlSW5zdGFuY2UoRXhwcmVzc0NyYWZ0LkhlbHBlci5EYXRhVGFibGVKc29uKSwgbyk7XCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHB1YmxpYyBzdGF0aWMgRGF0YVRhYmxlIFBhcnNlKGR5bmFtaWMgbylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdERhdGFUYWJsZSBkdCA9IG5ldyBEYXRhVGFibGUoKTtcclxuXHRcdFx0XHR2YXIgbGVuZ3RoID0gby5maWVsZE5hbWVzLmxlbmd0aDtcclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZHQuQWRkQ29sdW1uKG8uZmllbGROYW1lc1tpXSwgby5kYXRhVHlwZXNbaV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihvLnJvd3MgIT0gbnVsbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRsZW5ndGggPSBvLnJvd3MubGVuZ3RoO1xyXG5cdFx0XHRcdFx0ZHQuQmVnaW5OZXdSb3cobGVuZ3RoKTtcclxuXHJcblx0XHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBkciA9IGR0Lk5ld1JvdygpO1xyXG5cdFx0XHRcdFx0XHRkci5iYXRjaERhdGEgPSBvLnJvd3NbaV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRkdC5BY2NlcHROZXdSb3dzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBkdDtcclxuXHRcdFx0fSAgICAgICAgICAgIFxyXG5cclxuXHRcdFx0cHVibGljIERhdGFUYWJsZSBUb1RhYmxlKClcclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGR0ID0gbmV3IERhdGFUYWJsZSgpO1xyXG5cclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgZmllbGROYW1lcy5MZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkdC5BZGRDb2x1bW4oZmllbGROYW1lc1tpXSwgZGF0YVR5cGVzW2ldKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKHJvd3MgIT0gbnVsbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkdC5CZWdpbk5ld1Jvdyhyb3dzLkxlbmd0aCk7XHJcblxyXG5cdFx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IHJvd3MuTGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBkciA9IGR0Lk5ld1JvdygpO1xyXG5cdFx0XHRcdFx0XHRkci5iYXRjaERhdGEgPSByb3dzW2ldO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZHQuQWNjZXB0TmV3Um93cygpO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdHJldHVybiBkdDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNJUGhvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCByID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8qQFx0XHRcdFxyXG4gICAgICAgICAgIHIgPSAhIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKTsgICAgICAgXHJcbiAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNJUGFkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJvb2wgciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvKkBcdFx0XHRcclxuICAgICAgICAgICByID0gISFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpOyAgICAgICBcclxuICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJvb2wgX25vdERlc2t0b3A7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIF9zZXR1cERlc2t0b3A7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE5vdERlc2t0b3AgeyBnZXQge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9zZXR1cERlc2t0b3AgPyBfbm90RGVza3RvcCA6IF9ub3REZXNrdG9wID0gKCFCcm93c2VyLklzRGVza3RvcCB8fCBJc0lQaG9uZSgpIHx8IElzSVBhZCgpKTtcclxuICAgICAgICAgICAgICAgIF9zZXR1cERlc2t0b3AgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSB9XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBJc1RydWUodGhpcyBzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKCh2YWx1ZSA9IHZhbHVlLlRvTG93ZXIoKSkgPT0gXCJ0cnVlXCIgfHwgdmFsdWUgPT0gXCIxXCIgfHwgdmFsdWUgPT0gXCJvblwiKSA/IDEgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBUb0ludCh0aGlzIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdmFsdWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBHbG9iYWwuUGFyc2VJbnQodmFsdWUuQXM8c3RyaW5nPigpKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGZsb2F0IFRvRmxvYXQodGhpcyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KHZhbHVlLkFzPHN0cmluZz4oKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgVG9TdHIodGhpcyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gdmFsdWUuQXM8c3RyaW5nPigpO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGaXJlRm94KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJvb2wgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8qQFxyXG5pZihuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZmlyZWZveCcpID4gLTEpXHJcbntcclxuICAgIHZhbHVlID0gdHJ1ZTtcclxufVxyXG5cdFx0XHQqL1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgRm9jdXNFbGVtZW50KHRoaXMgSFRNTEVsZW1lbnQgZWxlbWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuRm9jdXMoKTtcclxuICAgICAgICAgICAgfSksIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsIFN0cmlwTm9uTnVtYmVyU3RyaW5nKHRoaXMgc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgQWRkZWREaWdpdHMgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCB2YWx1ZS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKGNoYXIuSXNEaWdpdCh2YWx1ZVtpXSkgfHwgdmFsdWVbaV0gPT0gJy4nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBBZGRlZERpZ2l0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih2YWx1ZVtpXSA9PSAnLScgJiYgIUFkZGVkRGlnaXRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBBZGRlZERpZ2l0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlY2ltYWwgdmFsdWUxID0gMDtcclxuICAgICAgICAgICAgZGVjaW1hbC5UcnlQYXJzZShidWlsZGVyLlRvU3RyaW5nKCksIG91dCB2YWx1ZTEpOyAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEYXRlVGltZSBTdHJpcE5vbkRhdGVTdHJpbmcodGhpcyBzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBEYXRlVGltZS5NaW5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLlRyaW0oKS5SZXBsYWNlKCdcXFxcJywgRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVTZXBlcmF0b3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvb2wgc3RhcnRzV2l0aFBsdXMgPSAodmFsdWUuU3RhcnRzV2l0aChcIitcIikpO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBzdGFydHNXaXRoTXVudXMgPSAhc3RhcnRzV2l0aFBsdXMgJiYgKHZhbHVlLlN0YXJ0c1dpdGgoXCItXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihzdGFydHNXaXRoTXVudXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5TdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5SZXBsYWNlKCctJywgRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVTZXBlcmF0b3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvb2wgZW5kc1dpdGhNb250aCA9IChzdGFydHNXaXRoUGx1cyB8fCBzdGFydHNXaXRoTXVudXMpICYmICh2YWx1ZS5Ub0xvd2VyKCkuRW5kc1dpdGgoXCJtXCIpKTtcclxuICAgICAgICAgICAgICAgIGJvb2wgZW5kc1dpdGh5ZWFyID0gIWVuZHNXaXRoTW9udGggJiYgKHN0YXJ0c1dpdGhQbHVzIHx8IHN0YXJ0c1dpdGhNdW51cykgJiYgKHZhbHVlLlRvTG93ZXIoKS5FbmRzV2l0aChcInlcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHZhbHVlLlRvTG93ZXIoKSA9PSBcImRcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuVG9kYXk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIExpc3Q8aW50PiBWYWx1ZXMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IHZhbHVlLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoYXIuSXNEaWdpdCh2YWx1ZVtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHZhbHVlW2ldID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlU2VwZXJhdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWVzLkFkZChpbnQuUGFyc2UoYnVpbGRlci5Ub1N0cmluZygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihidWlsZGVyLkxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmFsdWVzLkFkZChpbnQuUGFyc2UoYnVpbGRlci5Ub1N0cmluZygpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnVpbGRlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZihWYWx1ZXMuQ291bnQgPj0gMylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKFZhbHVlc1soaW50KUV4cHJlc3NDcmFmdC5TZXR0aW5ncy5ZZWFyUG9zaXRpb25dLCBWYWx1ZXNbKGludClFeHByZXNzQ3JhZnQuU2V0dGluZ3MuTW9udGhQb3NpdGlvbl0sIFZhbHVlc1soaW50KUV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXlQb3NpdGlvbl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihWYWx1ZXMuQ291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF5UG9zaXRpb24gPT0gRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVQb3NpdGlvbi5GaXJzdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXJ0c1dpdGhQbHVzIHx8IHN0YXJ0c1dpdGhNdW51cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBEYXRlVGltZS5Ub2RheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVuZHNXaXRoTW9udGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkTW9udGhzKHN0YXJ0c1dpdGhNdW51cyA/IC1WYWx1ZXNbMF0gOiBWYWx1ZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihlbmRzV2l0aHllYXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhcnRzV2l0aE11bnVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkWWVhcnMoLVZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlLkFkZFllYXJzKFZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlLkFkZERheXMoc3RhcnRzV2l0aE11bnVzID8gLVZhbHVlc1swXSA6IFZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRlLkhvdXIgPT0gMjMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5BZGRIb3VycygxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShEYXRlVGltZS5Ub2RheS5ZZWFyLCBEYXRlVGltZS5Ub2RheS5Nb250aCwgVmFsdWVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5Nb250aFBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uRmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKERhdGVUaW1lLlRvZGF5LlllYXIsIFZhbHVlc1swXSwgRGF0ZVRpbWUuVG9kYXkuRGF5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuWWVhclBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uRmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKFZhbHVlc1swXSwgRGF0ZVRpbWUuVG9kYXkuTW9udGgsIERhdGVUaW1lLlRvZGF5LkRheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihWYWx1ZXMuQ291bnQgPT0gMilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF5UG9zaXRpb24gPT0gRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVQb3NpdGlvbiAuRmlyc3QgJiYgRXhwcmVzc0NyYWZ0LlNldHRpbmdzLk1vbnRoUG9zaXRpb24gPT0gRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVQb3NpdGlvbi5TZWNvbmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKERhdGVUaW1lLlRvZGF5LlllYXIsIFZhbHVlc1sxXSwgVmFsdWVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF5UG9zaXRpb24gPT0gRXhwcmVzc0NyYWZ0LlNldHRpbmdzLkRhdGVQb3NpdGlvbiAuU2Vjb25kICYmIEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5Nb250aFBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uRmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKERhdGVUaW1lLlRvZGF5LlllYXIsIFZhbHVlc1swXSwgVmFsdWVzWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuWWVhclBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24gLlNlY29uZCAmJiBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuTW9udGhQb3NpdGlvbiA9PSBFeHByZXNzQ3JhZnQuU2V0dGluZ3MuRGF0ZVBvc2l0aW9uLkZpcnN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShWYWx1ZXNbMV0sIFZhbHVlc1swXSwgRGF0ZVRpbWUuVG9kYXkuRGF5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihFeHByZXNzQ3JhZnQuU2V0dGluZ3MuWWVhclBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24gLkZpcnN0ICYmIEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5Nb250aFBvc2l0aW9uID09IEV4cHJlc3NDcmFmdC5TZXR0aW5ncy5EYXRlUG9zaXRpb24uU2Vjb25kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZShWYWx1ZXNbMF0sIFZhbHVlc1sxXSwgRGF0ZVRpbWUuVG9kYXkuRGF5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIERhdGVUaW1lLk1pblZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWNpbWFsIEFkZFRheChkZWNpbWFsIHZhbHVlLCBkZWNpbWFsIHRheFBlcmNlbnQgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZih0YXhQZXJjZW50ID09IC0xKVxyXG4gICAgICAgICAgICAgICAgdGF4UGVyY2VudCA9IFNldHRpbmdzLlRheFBlcmNlbnQ7XHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAqICgxICsgdGF4UGVyY2VudCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZGVjaW1hbCBHZXRQb3J0aW9uVGF4KGRlY2ltYWwgdmFsdWUsIGRlY2ltYWwgdGF4UGVyY2VudCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICB0YXhQZXJjZW50ID0gU2V0dGluZ3MuVGF4UGVyY2VudDtcclxuICAgICAgICAgICAgaWYodGF4UGVyY2VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgLSB2YWx1ZSAvICgxICsgdGF4UGVyY2VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWwgRGVkdWN0VGF4KGRlY2ltYWwgdmFsdWUsIGRlY2ltYWwgdGF4UGVyY2VudCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRheFBlcmNlbnQgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICB0YXhQZXJjZW50ID0gU2V0dGluZ3MuVGF4UGVyY2VudDtcclxuICAgICAgICAgICAgaWYodGF4UGVyY2VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC0gR2V0UG9ydGlvblRheCh2YWx1ZSwgdGF4UGVyY2VudCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNOdW1iZXIodGhpcyBvYmplY3QgdmFsdWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiB2YWx1ZSBpcyBzYnl0ZVxyXG5cdFx0XHRcdFx0fHwgdmFsdWUgaXMgYnl0ZVxyXG5cdFx0XHRcdFx0fHwgdmFsdWUgaXMgc2hvcnRcclxuXHRcdFx0XHRcdHx8IHZhbHVlIGlzIHVzaG9ydFxyXG5cdFx0XHRcdFx0fHwgdmFsdWUgaXMgaW50XHJcblx0XHRcdFx0XHR8fCB2YWx1ZSBpcyB1aW50XHJcblx0XHRcdFx0XHR8fCB2YWx1ZSBpcyBsb25nXHJcblx0XHRcdFx0XHR8fCB2YWx1ZSBpcyB1bG9uZ1xyXG5cdFx0XHRcdFx0fHwgdmFsdWUgaXMgZmxvYXRcclxuXHRcdFx0XHRcdHx8IHZhbHVlIGlzIGRvdWJsZVxyXG5cdFx0XHRcdFx0fHwgdmFsdWUgaXMgZGVjaW1hbDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgRW1wdHkodGhpcyBIVE1MRWxlbWVudCBlbGVtZW50KVxyXG5cdFx0e1xyXG5cdFx0XHQvKkBcclxuXHRcdFx0dmFyIGxlbiA9IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7XHJcblx0XHRcdHdoaWxlKGxlbi0tKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50Lmxhc3RDaGlsZCk7XHJcblx0XHRcdH07XHJcblx0XHRcdCovXHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBWZWN0b3IyIEdldENsaWVudE1vdXNlTG9jYXRpb24ob2JqZWN0IGUpXHJcblx0XHR7XHJcblx0XHRcdHZhciB4ID0gMDtcclxuXHRcdFx0dmFyIHkgPSAwO1xyXG5cdFx0XHQvKkBcdFx0XHQgIFxyXG5cdFx0XHQgIGlmICghZSkgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7XHJcblxyXG5cdFx0XHQgIGlmIChlLnBhZ2VYIHx8IGUucGFnZVkpIHtcclxuXHRcdFx0XHR4ID0gZS5wYWdlWDtcclxuXHRcdFx0XHR5ID0gZS5wYWdlWTtcclxuXHRcdFx0ICB9IGVsc2UgaWYgKGUuY2xpZW50WCB8fCBlLmNsaWVudFkpIHtcclxuXHRcdFx0XHR4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICsgXHJcblx0XHRcdFx0XHRcdFx0XHQgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuXHRcdFx0XHR5ID0gZS5jbGllbnRZICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBcclxuXHRcdFx0XHRcdFx0XHRcdCAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQqL1xyXG5cdFx0XHRyZXR1cm4gbmV3IFZlY3RvcjIoeCwgeSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldENoZWNrZWQodGhpcyBDb250cm9sIGlucHV0LCBvYmplY3QgdmFsdWUpXHJcblx0XHR7XHJcblx0XHRcdGlucHV0LkNvbnRlbnQuU2V0Q2hlY2tlZCh2YWx1ZSk7XHRcdFx0XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldENoZWNrZWQodGhpcyBIVE1MRWxlbWVudCBpbnB1dCwgb2JqZWN0IHZhbHVlKVxyXG5cdFx0e1xyXG5cdFx0XHRib29sIGNoZWNrID0gZmFsc2U7XHJcblx0XHRcdGlmKHZhbHVlICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZih2YWx1ZSBpcyBib29sIHx8IHZhbHVlLklzTnVtYmVyKCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y2hlY2sgPSAoYm9vbCl2YWx1ZTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYodmFsdWUgaXMgc3RyaW5nKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHN0cmluZyBzdHJWYWx1ZSA9ICgoc3RyaW5nKXZhbHVlKTtcclxuXHRcdFx0XHRcdGNoZWNrID0gKHN0clZhbHVlID09IFwiMVwiIHx8IHN0cmluZy5Db21wYXJlKHN0clZhbHVlLlRvTG93ZXIoKSwgXCJ0cnVlXCIpID09IDApO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoIWNoZWNrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW5wdXQuUmVtb3ZlQXR0cmlidXRlKEdyaWRWaWV3Q2VsbERpc3BsYXlDaGVja0JveC5yZXNvdXJjZV9jaGVja2VkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpbnB1dC5TZXRBdHRyaWJ1dGUoR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94LnJlc291cmNlX2NoZWNrZWQsIG51bGwpO1xyXG5cdFx0XHR9XHRcdFx0XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vLyA8c3VtbWFyeT5cclxuXHRcdC8vLyBJRSBkb2VzIG5vdCBzdXBwb3J0IC5yZW1vdmUgb24gRWxlbWVudCB1c2UgZGVsZXRlXHJcblx0XHQvLy8gPC9zdW1tYXJ5PlxyXG5cdFx0Ly8vIDxwYXJhbSBuYW1lPVwiY1wiPjwvcGFyYW0+XHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgRGVsZXRlKHRoaXMgRWxlbWVudCBjKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihjICE9IG51bGwgJiYgXHJcblx0XHRcdFx0Yy5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiZcclxuXHRcdFx0XHRjLlBhcmVudEVsZW1lbnQuQ29udGFpbnMoYykpXHJcblx0XHRcdFx0Yy5QYXJlbnRFbGVtZW50LlJlbW92ZUNoaWxkKGMpO1xyXG5cdFx0fVxyXG4gICAgICAgIFxyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgVG9QeCh0aGlzIG9iamVjdCBpKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gU2NyaXB0LldyaXRlPHN0cmluZz4oXCJpICsgJ3B4J1wiKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgTG9nKG9iamVjdCBqc28pXHJcblx0XHR7XHJcblx0XHRcdFNjcmlwdC5DYWxsKFwiY29uc29sZS5sb2dcIiwganNvKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIEFwcGVuZENoaWxkcmVuKHRoaXMgTm9kZSBjLCBwYXJhbXMgTm9kZVtdIE5vZGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoTm9kZXMgIT0gbnVsbCAmJiBOb2Rlcy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHRcdFx0XHRcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTm9kZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcblx0XHRcdFx0XHRjLkFwcGVuZENoaWxkKE5vZGVzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgQXBwZW5kQ2hpbGRyZW5UYWJJbmRleCh0aGlzIE5vZGUgYywgcGFyYW1zIENvbnRyb2xbXSBOb2RlcylcclxuXHRcdHtcclxuXHRcdFx0aWYoTm9kZXMgIT0gbnVsbCAmJiBOb2Rlcy5MZW5ndGggPiAwKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IE5vZGVzLkxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdE5vZGVzW2ldLkNvbnRlbnQuVGFiSW5kZXggPSBpO1xyXG5cdFx0XHRcdFx0Yy5BcHBlbmRDaGlsZChOb2Rlc1tpXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBcHBlbmRDaGlsZHJlblRhYkluZGV4KHRoaXMgQ29udHJvbCBjLCBwYXJhbXMgQ29udHJvbFtdIE5vZGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5Db250ZW50LkFwcGVuZENoaWxkcmVuVGFiSW5kZXgoTm9kZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBDb250cm9sIEFwcGVuZENoaWxkKHRoaXMgQ29udHJvbCBjLCBDb250cm9sIE5vZGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLkNvbnRlbnQuQXBwZW5kQ2hpbGQoTm9kZSk7XHJcblx0XHRcdHJldHVybiBjO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIENvbnRyb2wgQXBwZW5kQ2hpbGRyZW4odGhpcyBDb250cm9sIGMsIHBhcmFtcyBDb250cm9sW10gTm9kZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLkNvbnRlbnQuQXBwZW5kQ2hpbGRyZW4oTm9kZXMpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQXBwZW5kQ2hpbGRyZW4odGhpcyBOb2RlIGMsIHBhcmFtcyBDb250cm9sW10gTm9kZXMpXHJcblx0XHR7XHJcblx0XHRcdGlmKE5vZGVzICE9IG51bGwgJiYgTm9kZXMuTGVuZ3RoID4gMClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBOb2Rlcy5MZW5ndGg7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjLkFwcGVuZENoaWxkKE5vZGVzW2ldKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0fVx0XHRcclxuICAgICAgICBcclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29udHJvbCBTZXRCb3VuZHModGhpcyBDb250cm9sIGMsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gbGVmdCwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB0b3AsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gd2lkdGgsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gaGVpZ2h0KVxyXG5cdFx0e1xyXG5cdFx0XHRjLkNvbnRlbnQuU2V0Qm91bmRzKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gYztcclxuXHRcdH0gICAgICAgIFxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29udHJvbCBTZXRCb3VuZHNGdWxsKHRoaXMgQ29udHJvbCBjKVxyXG5cdFx0e1xyXG5cdFx0XHRjLkNvbnRlbnQuU2V0Qm91bmRzRnVsbCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldEJvdW5kc0Z1bGwodGhpcyBIVE1MRWxlbWVudCBjKVxyXG5cdFx0e1xyXG5cdFx0XHRjLlNldEJvdW5kcygwLCAwLCBcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgQ29udHJvbCBTZXRTaXplKHRoaXMgQ29udHJvbCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHdpZHRoLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGhlaWdodClcclxuXHRcdHtcclxuXHRcdFx0Yy5Db250ZW50LlNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gYztcclxuXHRcdH0gICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRCb3VuZHModGhpcyBIVE1MRWxlbWVudCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHdpZHRoLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGhlaWdodClcclxuXHRcdHtcclxuXHRcdFx0Yy5TdHlsZS5MZWZ0ID0gbGVmdC5Ub0h0bWxWYWx1ZSgpO1xyXG5cdFx0XHRjLlN0eWxlLlRvcCA9IHRvcC5Ub0h0bWxWYWx1ZSgpO1xyXG5cdFx0XHRjLlN0eWxlLldpZHRoID0gd2lkdGguVG9IdG1sVmFsdWUoKTtcclxuXHRcdFx0Yy5TdHlsZS5IZWlnaHQgPSBoZWlnaHQuVG9IdG1sVmFsdWUoKTtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9IdG1sVmFsdWUodGhpcyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLklzPHN0cmluZz4oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBWZWN0b3IyLnBmKHZhbHVlLkFzPHN0cmluZz4oKSk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLklzPGludD4oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5BczxpbnQ+KCkuVG9QeCgpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuQXM8ZmxvYXQ+KCkuVG9QeCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldEltYWdlKHRoaXMgQ29udHJvbCBjLCBzdHJpbmcgc3RyLCBib29sIHVzZVVSTCA9IHRydWUsIGJvb2wgdXNlUmVzb3VyY2UgPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIXN0ci5TdGFydHNXaXRoKFwidXJsKFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gdXNlVVJMID8gQ29udHJvbC5HZXRJbWFnZVN0cmluZ1VSSShzdHIsIHVzZVJlc291cmNlKSA6IENvbnRyb2wuR2V0SW1hZ2VTdHJpbmcoc3RyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTZXRJbWFnZShjLkNvbnRlbnQsIHN0ciwgdXNlVVJMKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRJbWFnZSh0aGlzIEhUTUxFbGVtZW50IGMsIHN0cmluZyBzdHIsIGJvb2wgdXNlVVJMID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2Uoc3RyKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYy5TdHlsZS5CYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGMuU3R5bGUuQmFja2dyb3VuZFNpemUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFzdHIuU3RhcnRzV2l0aChcInVybChcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IHVzZVVSTCA/IENvbnRyb2wuR2V0SW1hZ2VTdHJpbmdVUkkoc3RyKSA6IENvbnRyb2wuR2V0SW1hZ2VTdHJpbmcoc3RyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjLlN0eWxlLkJhY2tncm91bmQgPSBzdHI7XHJcbiAgICAgICAgICAgIGMuU3R5bGUuQmFja2dyb3VuZFNpemUgPSBcIjEwMCUgMTAwJVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldFNpemUodGhpcyBIVE1MRWxlbWVudCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHdpZHRoLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGhlaWdodClcclxuXHRcdHtcclxuXHRcdFx0Yy5TdHlsZS5XaWR0aCA9IHdpZHRoLlRvSHRtbFZhbHVlKCk7XHJcblx0XHRcdGMuU3R5bGUuSGVpZ2h0ID0gaGVpZ2h0LlRvSHRtbFZhbHVlKCk7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRMb2NhdGlvbih0aGlzIENvbnRyb2wgYywgaW50IGxlZnQsIGludCB0b3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLkNvbnRlbnQuU2V0TG9jYXRpb24obGVmdC5Ub1B4KCksIHRvcC5Ub1B4KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFNldExvY2F0aW9uKHRoaXMgQ29udHJvbCBjLCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IGxlZnQsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gdG9wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYy5Db250ZW50LlNldExvY2F0aW9uKGxlZnQsIHRvcCk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRMb2NhdGlvbih0aGlzIEhUTUxFbGVtZW50IGMsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gbGVmdCwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB0b3ApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjLlN0eWxlLkxlZnQgPSBsZWZ0LlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgICAgIGMuU3R5bGUuVG9wID0gdG9wLlRvSHRtbFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdC8vLyA8c3VtbWFyeT5cclxuXHRcdC8vLyBIdG1sRXNjYXBlIFhTU1xyXG5cdFx0Ly8vIDwvc3VtbWFyeT5cclxuXHRcdC8vLyA8cGFyYW0gbmFtZT1cIm9ialwiPjwvcGFyYW0+XHJcblx0XHQvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgSHRtbEVzY2FwZSh0aGlzIG9iamVjdCBvYmopXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiAob2JqIGFzIHN0cmluZykuSHRtbEVzY2FwZSgpO1x0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vLyA8c3VtbWFyeT5cclxuXHRcdC8vLyBIdG1sVXJsVW5lc2NhcGUgWFNTXHJcblx0XHQvLy8gPC9zdW1tYXJ5PlxyXG5cdFx0Ly8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuXHRcdHB1YmxpYyBzdGF0aWMgc3RyaW5nIEh0bWxVcmxVbmVzY2FwZSh0aGlzIHN0cmluZyBpbnB1dClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuICFzdHJpbmcuSXNOdWxsT3JFbXB0eShpbnB1dClcclxuXHRcdFx0XHQ/IGlucHV0XHJcblx0XHRcdFx0XHQuUmVwbGFjZShcIiZhbXBcIiwgXCImXCIpXHJcblx0XHRcdFx0XHQuUmVwbGFjZShcIiZsdFwiLCBcIjxcIilcclxuXHRcdFx0XHRcdC5SZXBsYWNlKFwiJmd0XCIsIFwiPlwiKVxyXG5cdFx0XHRcdFx0LlJlcGxhY2UoXCImI3gyN1wiLCBcIidcIilcdFx0XHRcdFx0XHJcblx0XHRcdFx0OiBcIlwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vLyA8c3VtbWFyeT5cclxuXHRcdC8vLyBIdG1sVXJsRXNjYXBlIFhTU1xyXG5cdFx0Ly8vIDwvc3VtbWFyeT5cclxuXHRcdC8vLyA8cGFyYW0gbmFtZT1cImlucHV0XCI+PC9wYXJhbT5cclxuXHRcdC8vLyA8cmV0dXJucz48L3JldHVybnM+XHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBIdG1sVXJsRXNjYXBlKHRoaXMgc3RyaW5nIGlucHV0KVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gIXN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0KVxyXG5cdFx0XHRcdD8gaW5wdXRcclxuXHRcdFx0XHRcdC5SZXBsYWNlKFwiJlwiLCBcIiZhbXBcIilcclxuXHRcdFx0XHRcdC5SZXBsYWNlKFwiPFwiLCBcIiZsdFwiKVxyXG5cdFx0XHRcdFx0LlJlcGxhY2UoXCI+XCIsIFwiJmd0XCIpXHJcblx0XHRcdFx0XHQuUmVwbGFjZShcIidcIiwgXCImI3gyN1wiKVx0XHRcdFx0XHRcclxuXHRcdFx0XHQ6IHN0cmluZy5FbXB0eTtcclxuXHRcdH1cclxuXHJcblx0XHQvLy8gPHN1bW1hcnk+XHJcblx0XHQvLy8gSHRtbEVzY2FwZSBYU1NcclxuXHRcdC8vLyA8L3N1bW1hcnk+XHJcblx0XHQvLy8gPHBhcmFtIG5hbWU9XCJpbnB1dFwiPjwvcGFyYW0+XHJcblx0XHQvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgSHRtbEVzY2FwZSh0aGlzIHN0cmluZyBpbnB1dCkge1xyXG5cdFx0XHRyZXR1cm4gIXN0cmluZy5Jc051bGxPckVtcHR5KGlucHV0KSA/IFxyXG5cdFx0XHRcdEh0bWxVcmxFc2NhcGUoaW5wdXQpLlJlcGxhY2UoQFwiXFwvXCIsIFwiJiN4MkZcIikuUmVwbGFjZShcIlxcXCJcIiwgXCImcXVvdFwiKSA6IFxyXG5cdFx0XHRcdHN0cmluZy5FbXB0eTtcdFx0XHRcclxuICAgICAgICB9XHJcblxyXG5cdFx0Ly8vIDxzdW1tYXJ5PlxyXG5cdFx0Ly8vIEh0bWxVbmVzY2FwZSBYU1NcclxuXHRcdC8vLyA8L3N1bW1hcnk+XHJcblx0XHQvLy8gPHJldHVybnM+PC9yZXR1cm5zPlxyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgSHRtbFVuZXNjYXBlKHRoaXMgc3RyaW5nIGlucHV0KSB7XHJcblx0XHRcdHJldHVybiAhSXNFbXB0eShpbnB1dCkgP1xyXG5cdFx0XHRcdEh0bWxVcmxVbmVzY2FwZShpbnB1dCkuUmVwbGFjZShcIiYjeDJGXCIsIEBcIlxcL1wiKS5SZXBsYWNlKFwiJnF1b3RcIiwgXCJcXFwiXCIpIDpcclxuXHRcdFx0XHRzdHJpbmcuRW1wdHk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBFeGNoYW5nZUNsYXNzKHRoaXMgQ29udHJvbCBjb250cm9sLCBzdHJpbmcgb2xkQ2xhc3MsIHN0cmluZyBuZXdDbGFzcylcclxuXHRcdHtcclxuXHRcdFx0RXhjaGFuZ2VDbGFzcyhjb250cm9sLkNvbnRlbnQsIG9sZENsYXNzLCBuZXdDbGFzcyk7XHJcblxyXG5cdFx0fVxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIEV4Y2hhbmdlQ2xhc3ModGhpcyBIVE1MRWxlbWVudCBjb250cm9sLCBzdHJpbmcgb2xkQ2xhc3MsIHN0cmluZyBuZXdDbGFzcylcclxuXHRcdHtcclxuXHRcdFx0aWYoIUlzRW1wdHkob2xkQ2xhc3MpICYmIGNvbnRyb2wuQ2xhc3NMaXN0LkNvbnRhaW5zKG9sZENsYXNzKSlcclxuXHRcdFx0XHRjb250cm9sLkNsYXNzTGlzdC5SZW1vdmUob2xkQ2xhc3MpO1xyXG5cdFx0XHRpZighSXNFbXB0eShuZXdDbGFzcykgJiYgIWNvbnRyb2wuQ2xhc3NMaXN0LkNvbnRhaW5zKG5ld0NsYXNzKSlcclxuXHRcdFx0XHRjb250cm9sLkNsYXNzTGlzdC5BZGQobmV3Q2xhc3MpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgSXNFbXB0eSh0aGlzIHN0cmluZyB2YWx1ZSlcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UodmFsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBTdG9wQW5kTG9nKHRoaXMgU3RvcHdhdGNoIHN3LCBzdHJpbmcgbG9nTmFtZSA9IFwiVGFza1wiKVxyXG5cdFx0e1x0XHRcdFxyXG5cdFx0XHRzdy5TdG9wKCk7XHRcdFx0XHJcblx0XHRcdENvbnNvbGVGb3JtLkxvZyhsb2dOYW1lICsgXCIgdG9vayBcIiArIHN3LkVsYXBzZWRNaWxsaXNlY29uZHMgKyBcIm1zIHRvIGZpbmlzaFwiKTtcclxuXHRcdH1cclxuXHR9XHRcclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgc3RhdGljIGNsYXNzIEtleUNvZGVzXHJcblx0e1x0XHRcclxuXHRcdHB1YmxpYyBjb25zdCBpbnQgTW9kaWZpZXJzID0gLTY1NTM2LFx0XHRcclxuXHRcdE5vbmUgPSAwLFx0XHJcblx0XHRMQnV0dG9uID0gMSxcdFx0XHJcblx0XHRSQnV0dG9uID0gMixcdFx0XHJcblx0XHRDYW5jZWwgPSAzLFx0XHRcclxuXHRcdE1CdXR0b24gPSA0LFx0XHRcclxuXHRcdFhCdXR0b24xID0gNSxcdFx0XHJcblx0XHRYQnV0dG9uMiA9IDYsXHRcdFxyXG5cdFx0QmFjayA9IDgsXHRcdFxyXG5cdFx0VGFiID0gOSxcdFx0XHJcblx0XHRMaW5lRmVlZCA9IDEwLFx0XHRcclxuXHRcdENsZWFyID0gMTIsXHJcblx0XHRSZXR1cm4gPSAxMyxcdFx0XHJcblx0XHRFbnRlciA9IDEzLFx0XHRcclxuXHRcdFNoaWZ0S2V5ID0gMTYsXHRcdFxyXG5cdFx0Q29udHJvbEtleSA9IDE3LFx0XHRcclxuXHRcdE1lbnUgPSAxOCxcdFx0XHJcblx0XHRQYXVzZSA9IDE5LFx0XHRcclxuXHRcdENhcGl0YWwgPSAyMCxcdFx0XHJcblx0XHRDYXBzTG9jayA9IDIwLFx0XHRcclxuXHRcdEthbmFNb2RlID0gMjEsXHRcdFxyXG5cdFx0SGFuZ3VlbE1vZGUgPSAyMSxcdFx0XHJcblx0XHRIYW5ndWxNb2RlID0gMjEsXHRcdFxyXG5cdFx0SnVuamFNb2RlID0gMjMsXHRcdFxyXG5cdFx0RmluYWxNb2RlID0gMjQsXHRcdFxyXG5cdFx0SGFuamFNb2RlID0gMjUsXHRcdFxyXG5cdFx0S2FuamlNb2RlID0gMjUsXHRcdFxyXG5cdFx0RXNjYXBlID0gMjcsXHRcdFxyXG5cdFx0SU1FQ29udmVydCA9IDI4LFx0XHRcclxuXHRcdElNRU5vbmNvbnZlcnQgPSAyOSxcdFx0XHJcblx0XHRJTUVBY2NlcHQgPSAzMCxcdFx0XHJcblx0XHRJTUVBY2VlcHQgPSAzMCxcdFx0XHJcblx0XHRJTUVNb2RlQ2hhbmdlID0gMzEsXHRcdFxyXG5cdFx0U3BhY2UgPSAzMixcdFx0XHJcblx0XHRQcmlvciA9IDMzLFx0XHRcclxuXHRcdFBhZ2VVcCA9IDMzLFx0XHRcclxuXHRcdE5leHQgPSAzNCxcdFx0XHJcblx0XHRQYWdlRG93biA9IDM0LFx0XHRcclxuXHRcdEVuZCA9IDM1LFx0XHRcclxuXHRcdEhvbWUgPSAzNixcdFxyXG5cdFx0TGVmdCA9IDM3LFx0XHRcclxuXHRcdFVwID0gMzgsXHRcdFxyXG5cdFx0UmlnaHQgPSAzOSxcdFx0XHJcblx0XHREb3duID0gNDAsXHRcdFxyXG5cdFx0U2VsZWN0ID0gNDEsXHRcdFxyXG5cdFx0UHJpbnQgPSA0MixcdFx0XHJcblx0XHRFeGVjdXRlID0gNDMsXHRcdFxyXG5cdFx0U25hcHNob3QgPSA0NCxcdFx0XHJcblx0XHRQcmludFNjcmVlbiA9IDQ0LFx0XHRcclxuXHRcdEluc2VydCA9IDQ1LFx0XHRcclxuXHRcdERlbGV0ZSA9IDQ2LFx0XHRcclxuXHRcdEhlbHAgPSA0NyxcdFx0XHJcblx0XHREMCA9IDQ4LFx0XHRcclxuXHRcdEQxID0gNDksXHRcdFxyXG5cdFx0RDIgPSA1MCxcdFx0XHJcblx0XHREMyA9IDUxLFx0XHRcclxuXHRcdEQ0ID0gNTIsXHRcdFxyXG5cdFx0RDUgPSA1MyxcdFx0XHJcblx0XHRENiA9IDU0LFx0XHRcclxuXHRcdEQ3ID0gNTUsXHRcdFxyXG5cdFx0RDggPSA1NixcdFx0XHJcblx0XHREOSA9IDU3LFx0XHRcclxuXHRcdEEgPSA2NSxcdFx0XHJcblx0XHRCID0gNjYsXHRcdFxyXG5cdFx0QyA9IDY3LFx0XHRcclxuXHRcdEQgPSA2OCxcdFx0XHJcblx0XHRFID0gNjksXHRcdFxyXG5cdFx0RiA9IDcwLFx0XHRcclxuXHRcdEcgPSA3MSxcdFx0XHJcblx0XHRIID0gNzIsXHRcdFxyXG5cdFx0SSA9IDczLFx0XHRcclxuXHRcdEogPSA3NCxcdFx0XHJcblx0XHRLID0gNzUsXHRcdFxyXG5cdFx0TCA9IDc2LFx0XHRcclxuXHRcdE0gPSA3NyxcdFx0XHJcblx0XHROID0gNzgsXHRcdFxyXG5cdFx0TyA9IDc5LFx0XHRcclxuXHRcdFAgPSA4MCxcdFx0XHJcblx0XHRRID0gODEsXHRcdFxyXG5cdFx0UiA9IDgyLFx0XHJcblx0XHRTID0gODMsXHRcdFxyXG5cdFx0VCA9IDg0LFx0XHRcclxuXHRcdFUgPSA4NSxcdFx0XHJcblx0XHRWID0gODYsXHRcdFxyXG5cdFx0VyA9IDg3LFx0XHRcclxuXHRcdFggPSA4OCxcdFx0XHJcblx0XHRZID0gODksXHRcdFxyXG5cdFx0WiA9IDkwLFx0XHRcclxuXHRcdExXaW4gPSA5MSxcdFx0XHJcblx0XHRSV2luID0gOTIsXHRcdFxyXG5cdFx0QXBwcyA9IDkzLFx0XHRcclxuXHRcdFNsZWVwID0gOTUsXHRcdFxyXG5cdFx0TnVtUGFkMCA9IDk2LFx0XHRcclxuXHRcdE51bVBhZDEgPSA5NyxcdFx0XHJcblx0XHROdW1QYWQyID0gOTgsXHRcdFxyXG5cdFx0TnVtUGFkMyA9IDk5LFx0XHRcclxuXHRcdE51bVBhZDQgPSAxMDAsXHRcdFxyXG5cdFx0TnVtUGFkNSA9IDEwMSxcdFx0XHJcblx0XHROdW1QYWQ2ID0gMTAyLFx0XHRcclxuXHRcdE51bVBhZDcgPSAxMDMsXHRcdFxyXG5cdFx0TnVtUGFkOCA9IDEwNCxcdFx0XHJcblx0XHROdW1QYWQ5ID0gMTA1LFx0XHRcclxuXHRcdE11bHRpcGx5ID0gMTA2LFx0XHRcclxuXHRcdEFkZCA9IDEwNyxcdFx0XHJcblx0XHRTZXBhcmF0b3IgPSAxMDgsXHRcdFxyXG5cdFx0U3VidHJhY3QgPSAxMDksXHRcdFxyXG5cdFx0RGVjaW1hbCA9IDExMCxcdFx0XHJcblx0XHREaXZpZGUgPSAxMTEsXHRcdFxyXG5cdFx0RjEgPSAxMTIsXHRcdFxyXG5cdFx0RjIgPSAxMTMsXHRcdFxyXG5cdFx0RjMgPSAxMTQsXHRcdFxyXG5cdFx0RjQgPSAxMTUsXHRcdFxyXG5cdFx0RjUgPSAxMTYsXHRcdFxyXG5cdFx0RjYgPSAxMTcsXHRcdFxyXG5cdFx0RjcgPSAxMTgsXHRcdFxyXG5cdFx0RjggPSAxMTksXHRcdFxyXG5cdFx0RjkgPSAxMjAsXHRcdFxyXG5cdFx0RjEwID0gMTIxLFx0XHRcclxuXHRcdEYxMSA9IDEyMixcdFx0XHJcblx0XHRGMTIgPSAxMjMsXHJcblx0XHRGMTMgPSAxMjQsXHRcdFxyXG5cdFx0RjE0ID0gMTI1LFx0XHRcclxuXHRcdEYxNSA9IDEyNixcdFx0XHJcblx0XHRGMTYgPSAxMjcsXHRcdFxyXG5cdFx0RjE3ID0gMTI4LFxyXG5cdFx0RjE4ID0gMTI5LFx0XHRcclxuXHRcdEYxOSA9IDEzMCxcdFx0XHJcblx0XHRGMjAgPSAxMzEsXHRcdFxyXG5cdFx0RjIxID0gMTMyLFx0XHRcclxuXHRcdEYyMiA9IDEzMyxcdFx0XHJcblx0XHRGMjMgPSAxMzQsXHRcdFxyXG5cdFx0RjI0ID0gMTM1LFx0XHRcclxuXHRcdE51bUxvY2sgPSAxNDQsXHRcdFxyXG5cdFx0U2Nyb2xsID0gMTQ1LFx0XHRcclxuXHRcdExTaGlmdEtleSA9IDE2MCxcdFx0XHJcblx0XHRSU2hpZnRLZXkgPSAxNjEsXHRcdFxyXG5cdFx0TENvbnRyb2xLZXkgPSAxNjIsXHRcdFxyXG5cdFx0UkNvbnRyb2xLZXkgPSAxNjMsXHRcdFxyXG5cdFx0TE1lbnUgPSAxNjQsXHRcdFxyXG5cdFx0Uk1lbnUgPSAxNjUsXHRcdFxyXG5cdFx0QnJvd3NlckJhY2sgPSAxNjYsXHRcdFxyXG5cdFx0QnJvd3NlckZvcndhcmQgPSAxNjcsXHRcdFxyXG5cdFx0QnJvd3NlclJlZnJlc2ggPSAxNjgsXHRcdFxyXG5cdFx0QnJvd3NlclN0b3AgPSAxNjksXHRcdFxyXG5cdFx0QnJvd3NlclNlYXJjaCA9IDE3MCxcdFx0XHJcblx0XHRCcm93c2VyRmF2b3JpdGVzID0gMTcxLFx0XHRcclxuXHRcdEJyb3dzZXJIb21lID0gMTcyLFx0XHRcclxuXHRcdFZvbHVtZU11dGUgPSAxNzMsXHRcdFxyXG5cdFx0Vm9sdW1lRG93biA9IDE3NCxcdFx0XHJcblx0XHRWb2x1bWVVcCA9IDE3NSxcdFx0XHJcblx0XHRNZWRpYU5leHRUcmFjayA9IDE3NixcdFx0XHJcblx0XHRNZWRpYVByZXZpb3VzVHJhY2sgPSAxNzcsXHRcdFxyXG5cdFx0TWVkaWFTdG9wID0gMTc4LFx0XHRcclxuXHRcdE1lZGlhUGxheVBhdXNlID0gMTc5LFx0XHRcclxuXHRcdExhdW5jaE1haWwgPSAxODAsXHRcdFxyXG5cdFx0U2VsZWN0TWVkaWEgPSAxODEsXHRcdFxyXG5cdFx0TGF1bmNoQXBwbGljYXRpb24xID0gMTgyLFx0XHRcclxuXHRcdExhdW5jaEFwcGxpY2F0aW9uMiA9IDE4MyxcdFx0XHJcblx0XHRPZW1TZW1pY29sb24gPSAxODYsXHJcblx0XHRPZW0xID0gMTg2LFx0XHRcclxuXHRcdE9lbXBsdXMgPSAxODcsXHRcdFxyXG5cdFx0T2VtY29tbWEgPSAxODgsXHRcdFxyXG5cdFx0T2VtTWludXMgPSAxODksXHRcdFxyXG5cdFx0T2VtUGVyaW9kID0gMTkwLFx0XHRcclxuXHRcdE9lbVF1ZXN0aW9uID0gMTkxLFx0XHRcclxuXHRcdE9lbTIgPSAxOTEsXHRcdFxyXG5cdFx0T2VtdGlsZGUgPSAxOTIsXHRcdFxyXG5cdFx0T2VtMyA9IDE5MixcdFx0XHJcblx0XHRPZW1PcGVuQnJhY2tldHMgPSAyMTksXHRcdFxyXG5cdFx0T2VtNCA9IDIxOSxcdFx0XHJcblx0XHRPZW1QaXBlID0gMjIwLFxyXG5cdFx0T2VtNSA9IDIyMCxcdFx0XHJcblx0XHRPZW1DbG9zZUJyYWNrZXRzID0gMjIxLFx0XHRcclxuXHRcdE9lbTYgPSAyMjEsXHRcdFxyXG5cdFx0T2VtUXVvdGVzID0gMjIyLFxyXG5cdFx0T2VtNyA9IDIyMixcclxuXHRcdE9lbTggPSAyMjMsXHJcblx0XHRPZW1CYWNrc2xhc2ggPSAyMjYsXHJcblx0XHRPZW0xMDIgPSAyMjYsXHJcblx0XHRQcm9jZXNzS2V5ID0gMjI5LFx0XHRcclxuXHRcdFBhY2tldCA9IDIzMSxcclxuXHRcdEF0dG4gPSAyNDYsXHJcblx0XHRDcnNlbCA9IDI0NyxcclxuXHRcdEV4c2VsID0gMjQ4LFxyXG5cdFx0RXJhc2VFb2YgPSAyNDksXHJcblx0XHRQbGF5ID0gMjUwLFxyXG5cdFx0Wm9vbSA9IDI1MSxcclxuXHRcdE5vTmFtZSA9IDI1MixcclxuXHRcdFBhMSA9IDI1MyxcclxuXHRcdE9lbUNsZWFyID0gMjU0LFxyXG5cdFx0S2V5Q29kZSA9IDY1NTM1LFxyXG5cdFx0U2hpZnQgPSA2NTUzNixcclxuXHRcdENvbnRyb2wgPSAxMzEwNzIsXHJcblx0XHRBbHQgPSAyNjIxNDQ7XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRDb250YWluZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRDb2x1bW4+IENvbHVtbnMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sdW1uV2lkdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29udHJvbE1hcmdpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIGFwcGxpZWRMYXlvdXQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRDb250cm9sPiBDb250cm9scyA9IG5ldyBMaXN0PExheW91dENvbnRyb2w+KCk7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGF5b3V0Q29udHJvbD4gQ29udHJvbEVkaXRhYmxlID0gbmV3IExpc3Q8TGF5b3V0Q29udHJvbD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgVGFiSW5kZXggPSAyO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBcHBsaWVkTGF5b3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcHBsaWVkTGF5b3V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRm9jdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmKENvbnRyb2xzID09IG51bGwgfHwgQ29udHJvbHMuQ291bnQgPT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkV4cHJlc3NDcmFmdC5MYXlvdXRDb250cm9sPihDb250cm9scykuSW5wdXQ7XHJcbiAgICAgICAgICAgIHZhciB4ID0gaW5wdXQuR2V0SW5wdXQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHggIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeC5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LkNvbnRlbnQuRm9jdXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250YWluZXIoaW50IGNvbHVtbldpZHRoID0gNTAwLCBpbnQgY29udHJvbE1hcmdpbiA9IDYsIHBhcmFtcyBMYXlvdXRDb2x1bW5bXSBjb2x1bW5zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ29sdW1uV2lkdGggPSBjb2x1bW5XaWR0aDtcclxuICAgICAgICAgICAgQ29udHJvbE1hcmdpbiA9IGNvbnRyb2xNYXJnaW47XHJcblxyXG4gICAgICAgICAgICBpZihjb2x1bW5zICE9IG51bGwgJiYgY29sdW1ucy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgQ29sdW1ucy5BZGRSYW5nZShjb2x1bW5zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250YWluZXIocGFyYW1zIExheW91dENvbHVtbltdIGNvbHVtbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb2x1bW5XaWR0aCA9IDUwMDtcclxuICAgICAgICAgICAgQ29udHJvbE1hcmdpbiA9IDY7XHJcblxyXG4gICAgICAgICAgICBpZihjb2x1bW5zICE9IG51bGwgJiYgY29sdW1ucy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgQ29sdW1ucy5BZGRSYW5nZShjb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBDcmVhdGVMb2FkU1FMKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyU1FMID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBDb250cm9scy5Db3VudDtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihDb250cm9sc1tpXSA9PSBudWxsIHx8IENvbnRyb2xzW2ldLklucHV0ID09IG51bGwgfHwgc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShDb250cm9sc1tpXS5MaW5rRmllbGROYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGJ1aWxkZXJTUUwuQXBwZW5kKFwiYFwiICsgQ29udHJvbHNbaV0uTGlua0ZpZWxkTmFtZSArIFwiYCwgXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sID0gQ29udHJvbHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dCBpcyBTZWFyY2hJbnB1dClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoID0gY29udHJvbC5JbnB1dC5BczxTZWFyY2hJbnB1dD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRWYWx1ZSA9IChzZWFyY2guRWRpdFZhbHVlICsgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VhcmNoLkRpc3BsYXlNZW1iZXIgPT0gc2VhcmNoLlZhbHVlTWVtYmVyIHx8IHNlYXJjaC5WYWx1ZU1lbWJlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRUcmFuc2FjdGlvbi5BZGRDb21ibyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VhcmNoLlRleHQsIHNlYXJjaC5UZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9uZyBlZGl0diA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvbmcuVHJ5UGFyc2UoZWRpdFZhbHVlLCBvdXQgZWRpdHYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRUcmFuc2FjdGlvbi5BZGRDb21ibyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZWRpdHYsIHNlYXJjaC5UZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgaXMgQ2hlY2tFZGl0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZEJvb2xlYW4oY29udHJvbC5MaW5rRmllbGROYW1lLCAoY29udHJvbC5JbnB1dC5Db250cm9sbGVyLkFzPENoZWNrRWRpdD4oKS5DaGVja2VkKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoY29udHJvbC5JbnB1dC5Jc051bWVyaWNUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGVjID0gY29udHJvbC5JbnB1dC5HZXROdW1iZXJWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50VHJhbnNhY3Rpb24uQWRkTnVtZXIoY29udHJvbC5MaW5rRmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGVjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYoY29udHJvbC5JbnB1dC5Jc0RhdGVUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgZGF0ZSA9IGNvbnRyb2wuSW5wdXQuR2V0RGF0ZVRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZERhdGUoY29udHJvbC5MaW5rRmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudFRyYW5zYWN0aW9uLkFkZFN0cmluZyhjb250cm9sLkxpbmtGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb250cm9sLklucHV0LlRleHQpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyU1FMLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFwcGx5UmVhZE9ubHkoYm9vbCBkb2N1bWVudHJlYWRvbmx5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGxlbmd0aCA9IENvbnRyb2xFZGl0YWJsZS5Db3VudDtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBBcHBseVJlYWRPbmx5T25Db250cm9sKGRvY3VtZW50cmVhZG9ubHksIENvbnRyb2xFZGl0YWJsZVtpXS5JbnB1dCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdm9pZCBBcHBseVJlYWRPbmx5T25Db250cm9sKGJvb2wgZG9jdW1lbnRyZWFkb25seSwgVGV4dElucHV0IGlucHV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoaW5wdXQuQ29udHJvbGxlciAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihpbnB1dC5Db250cm9sbGVyIGlzIENoZWNrRWRpdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5FbmFibGVkID0gIWRvY3VtZW50cmVhZG9ubHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihpbnB1dCBpcyBUZXh0SW5wdXREcm9wRG93bilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5BczxUZXh0SW5wdXREcm9wRG93bj4oKS5HZXRJbnB1dCgpLlJlYWRPbmx5ID0gZG9jdW1lbnRyZWFkb25seTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlucHV0LlJlYWRvbmx5ID0gZG9jdW1lbnRyZWFkb25seTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBPbkNvbnRyb2xDcmVhdGVkKExheW91dENvbnRyb2wgQ29udHJvbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQXBwbHkoQ29udHJvbCBwYXJlbnQsIGJvb2wgZG9jdW1lbnRyZWFkb25seSA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFyZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXhjZXB0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBpZihhcHBsaWVkTGF5b3V0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBhcHBsaWVkTGF5b3V0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGludCBsZWZ0TWFyZ2luID0gMTA7XHJcbiAgICAgICAgICAgIGludCB0b3BNYXJnaW4gPSA1O1xyXG5cclxuICAgICAgICAgICAgaW50IGxlZnRMYWJlbCA9IDE1O1xyXG5cclxuICAgICAgICAgICAgaW50IGN1cnJlbnRMZWZ0ID0gbGVmdE1hcmdpbjtcclxuICAgICAgICAgICAgaW50IEFwcGVuZFggPSAwO1xyXG4gICAgICAgICAgICBpbnQgQXBwZW5kWSA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgRWRpdFN0YXJ0WCA9IDEyNTtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0U3RhcnRYID0gMTU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBCdXR0aW5XaWR0aCA9IDczO1xyXG4gICAgICAgICAgICBpbnQgWEluY3JlbWVudCA9IGxlZnRNYXJnaW4gKyBDb2x1bW5XaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGludCBpbnB1dEhlaWdodDtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJ1dHRpbldpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgIGlucHV0SGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEhlaWdodCA9IDIwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludCBHcm91cExhYmVsSW5jcmVtZW50ID0gQ29udHJvbE1hcmdpbiArIChIZWxwZXIuTm90RGVza3RvcCA/IChpbnB1dEhlaWdodCAtIDMwKSA6IChpbnB1dEhlaWdodCAtIDQpKTtcclxuICAgICAgICAgICAgaW50IFJvd0luY3JlbWVudCA9IGlucHV0SGVpZ2h0ICsgQ29udHJvbE1hcmdpbjtcclxuXHJcbiAgICAgICAgICAgIGludCBUaW55TGFiZWxJbmNyZW1lbnQgPSBpbnB1dEhlaWdodCAtIDg7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBjb2x1bW4gaW4gQ29sdW1ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF1dG9EaXYgPSBuZXcgQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgeSA9IHRvcE1hcmdpbjtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9EaXYuV2lkdGggPSBcIigxMDAlIC0gMTJweClcIjtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvRGl2LlRvcCA9IEFwcGVuZFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b0Rpdi5Ub3AgPSB5O1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9EaXYuV2lkdGggPSBDb2x1bW5XaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF1dG9EaXYuTGVmdCA9IEFwcGVuZFg7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRvY0ZyYWdtZW50ID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBjb2x1bW4uR3JvdXBzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGdyb3VwIGluIGdyb3VwcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShncm91cC5Hcm91cExhYmVsKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IENvbnRyb2wuTGFiZWwoZ3JvdXAuR3JvdXBMYWJlbCwgY3VycmVudExlZnQsIHksIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gR3JvdXBMYWJlbEluY3JlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSBncm91cC5Sb3dzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciByb3cgaW4gcm93cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHJvdy5MYWJlbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IENvbnRyb2wuTGFiZWwocm93LkxhYmVsLCBjdXJyZW50TGVmdCArIGxlZnRMYWJlbCArIChmbG9hdClyb3cuT2Zmc2V0LCB5LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5TdHlsZS5Gb250U2l6ZSA9IFwiMTJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gR3JvdXBMYWJlbEluY3JlbWVudCAtIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvdyBpcyBMYXlvdXRSb3dHYXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gcm93LkFzPExheW91dFJvd0dhcD4oKS5IZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocm93LkJ1dHRvbiAhPSBudWxsICYmICFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LkJ1dHRvbi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKENvbHVtbldpZHRoIC0gQnV0dGluV2lkdGggKyA2LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5CdXR0b24uV2lkdGggPSBCdXR0aW5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY0ZyYWdtZW50LkFwcGVuZENoaWxkKHJvdy5CdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbHMgPSByb3cuQ29udHJvbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wgSGFzVGlueUxhYmVsID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cm9scy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWwgVG90YWxQZXJjZW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb3RhbFBlcmNlbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IEFkZFdpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGNvbnRyb2wgaW4gY29udHJvbHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udHJvbC5QZXJjZW50ID4gMS4wbSB8fCBjb250cm9sLlBlcmNlbnQgPD0gMC4wbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5QZXJjZW50ID0gMS4wbTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG90YWxQZXJjZW50ICs9IGNvbnRyb2wuUGVyY2VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoVG90YWxQZXJjZW50ID4gMS4wbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQgaXMgTWVtb0lucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICs9IGNvbnRyb2wuSW5wdXQuSGVpZ2h0LlRvSW50KCkgKyBDb250cm9sTWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBSb3dJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvdy5Ob0dhcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgLT0gQ29udHJvbE1hcmdpbiArIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIYXNUaW55TGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gVGlueUxhYmVsSW5jcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGFzVGlueUxhYmVsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsUGVyY2VudCAtPSAxLjBtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGRXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IEFkZCA9IChjdXJyZW50TGVmdCArIEFkZFdpZHRoICsgRWRpdFN0YXJ0WCArIEJ1dHRpbldpZHRoICsgKGZsb2F0KXJvdy5PZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBvMTAwUGVyY2VudCA9IFwiKCgxMDAlIC0gXCIgKyBBZGQuVG9QeCgpICsgXCIpICogXCIgKyAoVG90YWxQZXJjZW50IC0gY29udHJvbC5QZXJjZW50KSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBvMTAwUGVyY2VudDIgPSBcIigxMDAlIC0gXCIgKyBBZGQuVG9QeCgpICsgXCIpXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gd2lkdGggPSBcIihcIiArIG8xMDBQZXJjZW50MiArIFwiICogXCIgKyBjb250cm9sLlBlcmNlbnQgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IyIGxvYyA9IG5ldyBWZWN0b3IyKFwiKFwiICsgbzEwMFBlcmNlbnQgKyBcIiArIFwiICsgKEFkZCAtIEJ1dHRpbldpZHRoKS5Ub1B4KCkgKyBcIilcIiwgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJvdy5Ob0dhcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZFdpZHRoICs9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlci5XaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkNvbnRyb2xsZXIuTG9jYXRpb24gPSBsb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuQ29udGVudC5UYWJJbmRleCA9IFRhYkluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkNsYXNzTGlzdC5SZW1vdmUoXCJjb250cm9sXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLklucHV0LkNvbnRyb2xsZXIgaXMgQ2hlY2tFZGl0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlci5BczxDaGVja0VkaXQ+KCkuc3BhbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuVG9wID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLlN0eWxlLkxlZnQgPSAoaW5wdXRIZWlnaHQgLSAyKS5Ub1B4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5TdHlsZS5Qb3NpdGlvbiA9IFBvc2l0aW9uLkFic29sdXRlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuV2hpdGVTcGFjZSA9IFdoaXRlU3BhY2UuUHJlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zcGFuLlN0eWxlLlRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKDNweCwgNTAlKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuV2hpdGVTcGFjZSA9IFdoaXRlU3BhY2UuTm9ybWFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpLlR5cGUgPT0gSW5wdXRUeXBlLkNoZWNrYm94KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuV2lkdGggPSAoaW5wdXRIZWlnaHQgLSA0KS5Ub1B4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5IZWlnaHQgPSAoaW5wdXRIZWlnaHQgLSA0KS5Ub1B4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY0ZyYWdtZW50LkFwcGVuZENoaWxkKGNvbnRyb2wuSW5wdXQuQ29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2wuSW5wdXQuV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5Mb2NhdGlvbiA9IGxvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5HZXRJbnB1dCgpLlRhYkluZGV4ID0gVGFiSW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChjb250cm9sLklucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LkhlaWdodCA9IGlucHV0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250cm9sLklucHV0LkdldElucHV0KCkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5HZXRJbnB1dCgpLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9uQ29udHJvbENyZWF0ZWQoY29udHJvbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXJvdy5Ob0dhcCAmJiAhcm93LkhpZGVUaW55TGFiZWwgJiYgIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY29udHJvbC5UaW55TGFiZWwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gQ29udHJvbC5MYWJlbChjb250cm9sLlRpbnlMYWJlbCwgMCwgeSArIChpbnB1dEhlaWdodCArIDMpLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLlN0eWxlLkxlZnQgPSBcImNhbGMoXCIgKyBvMTAwUGVyY2VudCArIFwiICsgXCIgKyAoQWRkIC0gQnV0dGluV2lkdGgpLlRvUHgoKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NGcmFnbWVudC5BcHBlbmRDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC5TdHlsZS5Gb250U2l6ZSA9IFwiMTJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhhc1RpbnlMYWJlbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyb3cuVXNlUGxhY2Vob2xkZXIgJiYgIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoY29udHJvbC5UaW55TGFiZWwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5TZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBjb250cm9sLlRpbnlMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRyb2wuSW5wdXQuVG9vbFRpcCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKHJvdy5MYWJlbCkgJiYgc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShncm91cC5Hcm91cExhYmVsKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sLklucHV0LlRvb2xUaXAgPSBuZXcgVG9vbFRpcChjb250cm9sLlRpbnlMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbC5JbnB1dC5Ub29sVGlwID0gbmV3IFRvb2xUaXAoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShyb3cuTGFiZWwpID8gZ3JvdXAuR3JvdXBMYWJlbCA6IHJvdy5MYWJlbCwgY29udHJvbC5UaW55TGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYWJJbmRleCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY29udHJvbC5JbnB1dC5SZWFkb25seSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFwcGx5UmVhZE9ubHlPbkNvbnRyb2woZG9jdW1lbnRyZWFkb25seSwgY29udHJvbC5JbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2xFZGl0YWJsZS5BZGQoY29udHJvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRyb2xzLkFkZChjb250cm9sKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihIYXNUaW55TGFiZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBUaW55TGFiZWxJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdE9yRGVmYXVsdDxnbG9iYWw6OkV4cHJlc3NDcmFmdC5MYXlvdXRDb250cm9sPihyb3cuQ29udHJvbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobGFzdCAhPSBudWxsICYmIGxhc3QuSW5wdXQgaXMgTWVtb0lucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gbGFzdC5JbnB1dC5IZWlnaHQuVG9JbnQoKSArIENvbnRyb2xNYXJnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBSb3dJbmNyZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhdXRvRGl2LkhlaWdodCA9IHk7XHJcbiAgICAgICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXBwZW5kWCArPSBYSW5jcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEFwcGVuZFkgKz0gKGludCl5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXV0b0Rpdi5Db250ZW50LkFwcGVuZENoaWxkKGRvY0ZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5Db250ZW50LkFwcGVuZENoaWxkKGF1dG9EaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBMYXN0Q29udHJvbCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdE9yRGVmYXVsdDxnbG9iYWw6OkV4cHJlc3NDcmFmdC5MYXlvdXRDb250cm9sPihDb250cm9scyk7XHJcbiAgICAgICAgICAgIGlmKExhc3RDb250cm9sICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBGaXJzdENvbnRyb2wgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6RXhwcmVzc0NyYWZ0LkxheW91dENvbnRyb2w+KENvbnRyb2xzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBBY3Rpb248S2V5Ym9hcmRFdmVudD4gUHJldmVudERlZmF1bHRNb3ZlRm9yd2FyZCA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkgJiYgIWV2LlNoaWZ0S2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBGaXJzdENvbnRyb2wuSW5wdXQuR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoeCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYXN0Q29udHJvbC5JbnB1dC5Db250ZW50LkZvY3VzRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBBY3Rpb248S2V5Ym9hcmRFdmVudD4gUHJldmVudERlZmF1bHRNb3ZlQmFjayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkgJiYgZXYuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IExhc3RDb250cm9sLklucHV0LkdldElucHV0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguRm9jdXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFzdENvbnRyb2wuSW5wdXQuQ29udGVudC5Gb2N1c0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgTGFzdENvbnRyb2wuSW5wdXQuQ29udGVudC5PbktleURvd24gPSBQcmV2ZW50RGVmYXVsdE1vdmVGb3J3YXJkO1xyXG4gICAgICAgICAgICAgICAgRmlyc3RDb250cm9sLklucHV0LkNvbnRlbnQuT25LZXlEb3duID0gUHJldmVudERlZmF1bHRNb3ZlQmFjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIExpc3Q8TGF5b3V0Q29sdW1uPiBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fQ29sdW1ucz1uZXcgTGlzdDxMYXlvdXRDb2x1bW4+KCk7cHJpdmF0ZSBib29sIF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19hcHBsaWVkTGF5b3V0PWZhbHNlO31cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTGF5b3V0Q29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGlua0ZpZWxkTmFtZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dCBJbnB1dCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaW55TGFiZWwgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIFBlcmNlbnQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENhbGN1bGF0ZWRcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgV2lkdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ2FsY3VsYXRlZFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIGRlY2ltYWwgTGluZU51bWJlciB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250cm9sKHN0cmluZyBsaW5rRmllbGROYW1lLCBUZXh0SW5wdXQgaW5wdXQsIHN0cmluZyB0aW55TGFiZWwgPSBcIlwiLCBkZWNpbWFsIHBlcmNlbnQgPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlua0ZpZWxkTmFtZSA9IGxpbmtGaWVsZE5hbWU7XHJcbiAgICAgICAgICAgIElucHV0ID0gaW5wdXQ7XHJcbiAgICAgICAgICAgIFRpbnlMYWJlbCA9IHRpbnlMYWJlbDtcclxuICAgICAgICAgICAgUGVyY2VudCA9IHBlcmNlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Q29udHJvbChzdHJpbmcgbGlua0ZpZWxkTmFtZSwgVGV4dElucHV0IGlucHV0LCBkZWNpbWFsIHBlcmNlbnQgPSAxKSA6IHRoaXMobGlua0ZpZWxkTmFtZSwgaW5wdXQsIFwiXCIsIHBlcmNlbnQpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRDb250cm9sKHN0cmluZyBsaW5rRmllbGROYW1lLCBUZXh0SW5wdXQgaW5wdXQpIDogdGhpcyhsaW5rRmllbGROYW1lLCBpbnB1dCwgXCJcIilcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgTGF5b3V0Q29sdW1uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGF5b3V0R3JvdXA+IEdyb3VwcyA9IG5ldyBMaXN0PExheW91dEdyb3VwPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0Q29sdW1uKHBhcmFtcyBMYXlvdXRHcm91cFtdIGdyb3VwcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGdyb3VwcyAhPSBudWxsICYmIGdyb3Vwcy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgR3JvdXBzLkFkZFJhbmdlKGdyb3Vwcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRHcm91cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PExheW91dFJvdz4gUm93cyA9IG5ldyBMaXN0PExheW91dFJvdz4oKTtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdyb3VwTGFiZWwgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGF5b3V0R3JvdXAocGFyYW1zIExheW91dFJvd1tdIHJvd3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcm91cExhYmVsID0gc3RyaW5nLkVtcHR5O1xyXG4gICAgICAgICAgICBpZihyb3dzICE9IG51bGwgJiYgcm93cy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgUm93cy5BZGRSYW5nZShyb3dzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRHcm91cChzdHJpbmcgZ3JvdXBMYWJlbCwgcGFyYW1zIExheW91dFJvd1tdIHJvd3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcm91cExhYmVsID0gZ3JvdXBMYWJlbDtcclxuICAgICAgICAgICAgaWYocm93cyAhPSBudWxsICYmIHJvd3MuTGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIFJvd3MuQWRkUmFuZ2Uocm93cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRSb3dHYXAgOiBMYXlvdXRSb3dcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgZmxvYXQgSGVpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIExheW91dFJvd0dhcChmbG9hdCBoZWlnaHQsIHN0cmluZyBsYWJlbCA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIExhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBMYXlvdXRSb3dcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMYXlvdXRDb250cm9sPiBDb250cm9scyA9IG5ldyBMaXN0PExheW91dENvbnRyb2w+KCk7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBCdXR0b24geyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIElmIHRoaXMgaXMgdHJ1ZSAtIHRpbnkgbGFiZWxzIGFyZSBpZ25vcmVkXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgYm9vbCBOb0dhcCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlUGxhY2Vob2xkZXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEhpZGVUaW55TGFiZWwgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIE9mZnNldCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3coc3RyaW5nIGxhYmVsLCBwYXJhbXMgTGF5b3V0Q29udHJvbFtdIGNvbnRyb2xzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGFiZWwgPSBsYWJlbDtcclxuICAgICAgICAgICAgaWYoY29udHJvbHMgIT0gbnVsbCAmJiBjb250cm9scy5MZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgQ29udHJvbHMuQWRkUmFuZ2UoY29udHJvbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExheW91dFJvdyhwYXJhbXMgTGF5b3V0Q29udHJvbFtdIGNvbnRyb2xzKSA6IHRoaXMoXCJcIiwgY29udHJvbHMpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3coZGVjaW1hbCBvZmZzZXQsIHBhcmFtcyBMYXlvdXRDb250cm9sW10gY29udHJvbHMpIDogdGhpcyhcIlwiLCBjb250cm9scylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE9mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRSb3coc3RyaW5nIGxhYmVsLCBTaW1wbGVCdXR0b24gYnV0dG9uLCBwYXJhbXMgTGF5b3V0Q29udHJvbFtdIGNvbnRyb2xzKSA6IHRoaXMobGFiZWwsIGNvbnRyb2xzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnV0dG9uID0gYnV0dG9uO1xyXG4gICAgICAgIH1cclxuXG4gICAgXG5wcml2YXRlIGJvb2wgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX05vR2FwPWZhbHNlO3ByaXZhdGUgYm9vbCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fVXNlUGxhY2Vob2xkZXI9ZmFsc2U7cHJpdmF0ZSBib29sIF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19IaWRlVGlueUxhYmVsPWZhbHNlO3ByaXZhdGUgZGVjaW1hbCBfX1Byb3BlcnR5X19Jbml0aWFsaXplcl9fT2Zmc2V0PTA7fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBzdGF0aWMgY2xhc3MgTmV0d29ya1xyXG5cdHtcdFx0XHJcblx0XHRwcml2YXRlIHN0YXRpYyBBamF4T3B0aW9ucyBHZXRBamF4T3B0aW9ucyhvYmplY3QgSnNvbkZpbGUsIGJvb2wgQXN5bmMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gbmV3IEFqYXhPcHRpb25zKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdEFzeW5jID0gQXN5bmMsXHJcblx0XHRcdFx0VXJsID0gU2V0dGluZ3MuTmV0d29ya1VSTCxcclxuXHRcdFx0XHRDYWNoZSA9IGZhbHNlLFxyXG5cdFx0XHRcdERhdGEgPSBKc29uRmlsZSA9PSBudWxsID8gc3RyaW5nLkVtcHR5IDogSlNPTi5TdHJpbmdpZnkoSnNvbkZpbGUpLFxyXG5cdFx0XHRcdERhdGFUeXBlID0gXCJqc29uXCIsXHJcblx0XHRcdFx0Q29udGVudFR5cGUgPSBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuXHRcdFx0XHRUeXBlID0gXCJQT1NUXCJcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgY2xhc3MgTWV0aG9kUmVxdWVzdFxyXG5cdFx0e1xyXG5cdFx0XHRwdWJsaWMgc3RyaW5nIE1ldGhvZDtcclxuXHRcdFx0cHVibGljIG9iamVjdFtdIEFyZ3VtZW50cztcclxuXHRcdFx0cHVibGljIHN0cmluZyBJbnRlcmZhY2U7XHJcblxyXG5cdFx0XHRwdWJsaWMgTWV0aG9kUmVxdWVzdChzdHJpbmcgaW50ZXJmYWNlTmFtZSwgc3RyaW5nIG1ldGhvZCwgcGFyYW1zIG9iamVjdFtdIGFyZ3VtZW50cylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdE1ldGhvZCA9IG1ldGhvZDtcclxuXHRcdFx0XHRBcmd1bWVudHMgPSBhcmd1bWVudHM7XHJcblx0XHRcdFx0SW50ZXJmYWNlID0gaW50ZXJmYWNlTmFtZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBJbnZva2VNZXRob2RVSShzdHJpbmcgaW50ZXJmYWNlTmFtZSwgc3RyaW5nIG1ldGhvZCwgQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBqcVhIUj4gU3VjY2VzcyA9IG51bGwsIEFjdGlvbjxqcVhIUiwgc3RyaW5nLCBzdHJpbmc+IEVycm9yID0gbnVsbCwgcGFyYW1zIG9iamVjdFtdIGFyZ3VtZW50cylcclxuXHRcdHtcclxuXHRcdFx0UG9zdEpzb25Qcm9ncmVzc0Zvcm0obmV3IE1ldGhvZFJlcXVlc3QoaW50ZXJmYWNlTmFtZSwgbWV0aG9kLCBhcmd1bWVudHMpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBnbG9iYWw6OkJyaWRnZS5qUXVlcnkyLmpxWEhSPilTdWNjZXNzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFIsIHN0cmluZywgc3RyaW5nPilFcnJvcik7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIEludm9rZU1ldGhvZFVJQ29udHJvbChzdHJpbmcgaW50ZXJmYWNlTmFtZSwgc3RyaW5nIG1ldGhvZCwgUHJvZ3Jlc3NDb250cm9sIHByb2dyZXNzQ29udHJvbCwgQWN0aW9uPG9iamVjdCwgc3RyaW5nLCBqcVhIUj4gU3VjY2VzcyA9IG51bGwsIEFjdGlvbjxqcVhIUiwgc3RyaW5nLCBzdHJpbmc+IEVycm9yID0gbnVsbCwgcGFyYW1zIG9iamVjdFtdIGFyZ3VtZW50cylcclxuXHRcdHtcclxuXHRcdFx0UG9zdEpzb25Qcm9ncmVzc0NvbnRyb2wobmV3IE1ldGhvZFJlcXVlc3QoaW50ZXJmYWNlTmFtZSwgbWV0aG9kLCBhcmd1bWVudHMpLCBwcm9ncmVzc0NvbnRyb2wsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBzdHJpbmcsIGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFI+KVN1Y2Nlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qcVhIUiwgc3RyaW5nLCBzdHJpbmc+KUVycm9yKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgSW52b2tlTWV0aG9kKHN0cmluZyBpbnRlcmZhY2VOYW1lLCBzdHJpbmcgbWV0aG9kLCBBY3Rpb248b2JqZWN0LCBzdHJpbmcsIGpxWEhSPiBTdWNjZXNzID0gbnVsbCwgQWN0aW9uPGpxWEhSLCBzdHJpbmcsIHN0cmluZz4gRXJyb3IgPSBudWxsLCBwYXJhbXMgb2JqZWN0W10gYXJndW1lbnRzKVxyXG5cdFx0e1xyXG5cdFx0XHRQb3N0SnNvbihuZXcgTWV0aG9kUmVxdWVzdChpbnRlcmZhY2VOYW1lLCBtZXRob2QsIGFyZ3VtZW50cyksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248b2JqZWN0LCBzdHJpbmcsIGdsb2JhbDo6QnJpZGdlLmpRdWVyeTIuanFYSFI+KVN1Y2Nlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UualF1ZXJ5Mi5qcVhIUiwgc3RyaW5nLCBzdHJpbmc+KUVycm9yKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgUG9zdEpzb24ob2JqZWN0IEpzb25GaWxlLCBBY3Rpb248b2JqZWN0LCBzdHJpbmcsIGpxWEhSPiBTdWNjZXNzID0gbnVsbCwgQWN0aW9uPGpxWEhSLCBzdHJpbmcsIHN0cmluZz4gRXJyb3IgPSBudWxsLCBib29sIEFzeW5jID0gdHJ1ZSlcclxuXHRcdHtcclxuXHRcdFx0Ly8gbGV0cyBjb252ZXJ0IHRoZSBKc29uRmlsZU9iamVjdCB0byBhIHN0cmluZztcdFx0XHRcclxuXHRcdFx0dmFyIGFqbyA9IEdldEFqYXhPcHRpb25zKEpzb25GaWxlLCBBc3luYyk7XHRcdFx0XHJcblx0XHRcdGFqby5TdWNjZXNzID0gU3VjY2VzcztcclxuXHRcdFx0YWpvLkVycm9yID0gRXJyb3I7XHJcblxyXG5cdFx0XHRqUXVlcnkuQWpheChham8pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBQb3N0SnNvblByb2dyZXNzQ29udHJvbChvYmplY3QgSnNvbkZpbGUsIFByb2dyZXNzQ29udHJvbCBwcm9ncmVzc0NvbnRyb2wsIEFjdGlvbjxvYmplY3QsIHN0cmluZywganFYSFI+IFN1Y2Nlc3MgPSBudWxsLCBBY3Rpb248anFYSFIsIHN0cmluZywgc3RyaW5nPiBFcnJvciA9IG51bGwsIGJvb2wgQXN5bmMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBsZXRzIGNvbnZlcnQgdGhlIEpzb25GaWxlT2JqZWN0IHRvIGEgc3RyaW5nO1x0XHRcdFxyXG5cdFx0XHR2YXIgYWpvID0gR2V0QWpheE9wdGlvbnMoSnNvbkZpbGUsIEFzeW5jKTtcclxuXHRcdFx0YWpvLlhociA9ICgpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgeG1sUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cdFx0XHRcdHhtbFJlcXVlc3QuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUHJvZ3Jlc3MsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZSkgPT5cclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcGUgPSBlIGFzIFByb2dyZXNzRXZlbnQ7XHJcblx0XHRcdFx0XHRpZihwcm9ncmVzc0NvbnRyb2wgPT0gbnVsbClcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0dmFyIHBjID0gcHJvZ3Jlc3NDb250cm9sO1xyXG5cclxuXHRcdFx0XHRcdGZsb2F0IFBlcmNlbnQgPSAwO1xyXG5cclxuXHRcdFx0XHRcdGlmKHBlLkxvYWRlZCAhPSAwICYmIHBlLlRvdGFsICE9IDApXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFBlcmNlbnQgPSAoKGZsb2F0KXBlLkxvYWRlZCAvIChmbG9hdClwZS5Ub3RhbCkgKiAxMDAuMGY7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwYy5pbnRlcm5hbFByb2dyZXNzQ29udHJvbC5TdHlsZS5XaWR0aCA9IFBlcmNlbnQuVG9TdHJpbmcoKSArIFwiJVwiO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHhtbFJlcXVlc3Q7XHJcblx0XHRcdH07XHJcblx0XHRcdGFqby5TdWNjZXNzID0gU3VjY2VzcztcclxuXHRcdFx0YWpvLkVycm9yID0gRXJyb3I7XHJcblx0XHRcdFxyXG5cdFx0XHRqUXVlcnkuQWpheChham8pO1x0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBQb3N0SnNvblByb2dyZXNzRm9ybShvYmplY3QgSnNvbkZpbGUsIEFjdGlvbjxvYmplY3QsIHN0cmluZywganFYSFI+IFN1Y2Nlc3MgPSBudWxsLCBBY3Rpb248anFYSFIsIHN0cmluZywgc3RyaW5nPiBFcnJvciA9IG51bGwsIGJvb2wgQXN5bmMgPSB0cnVlKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBsZXRzIGNvbnZlcnQgdGhlIEpzb25GaWxlT2JqZWN0IHRvIGEgc3RyaW5nO1xyXG5cdFx0XHR2YXIgbnBmID0gbmV3IE5ldHdvcmtQcm9ncmVzc0Zvcm0oKTtcclxuXHJcblx0XHRcdHZhciBham8gPSBHZXRBamF4T3B0aW9ucyhKc29uRmlsZSwgQXN5bmMpO1xyXG5cdFx0XHRham8uWGhyID0gKCkgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciB4bWxSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRcdFx0eG1sUmVxdWVzdC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Qcm9ncmVzcywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChlKSA9PlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBwZSA9IGUgYXMgUHJvZ3Jlc3NFdmVudDtcclxuXHRcdFx0XHRcdGlmKG5wZiA9PSBudWxsIHx8IG5wZi5wcm9ncmVzc0NvbnRyb2wgPT0gbnVsbClcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0dmFyIHBjID0gbnBmLnByb2dyZXNzQ29udHJvbDtcclxuXHJcblx0XHRcdFx0XHRmbG9hdCBQZXJjZW50ID0gMDtcclxuXHJcblx0XHRcdFx0XHRpZihwZS5Mb2FkZWQgIT0gMCAmJiBwZS5Ub3RhbCAhPSAwKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRQZXJjZW50ID0gKChmbG9hdClwZS5Mb2FkZWQgLyAoZmxvYXQpcGUuVG90YWwpICogMTAwLjBmO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cGMuaW50ZXJuYWxQcm9ncmVzc0NvbnRyb2wuU3R5bGUuV2lkdGggPSBQZXJjZW50LlRvU3RyaW5nKCkgKyBcIiVcIjsgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHhtbFJlcXVlc3Q7XHJcblx0XHRcdH07XHJcblx0XHRcdGFqby5TdWNjZXNzID0gKG8sIHMsIGpxKSA9PiB7XHJcblx0XHRcdFx0bnBmLkRpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdEVudW0uT0s7XHJcblx0XHRcdFx0U3VjY2VzcyhvLCBzLCBqcSk7XHJcblx0XHRcdH07XHJcblx0XHRcdGFqby5FcnJvciA9IChqcSwgczEsIHMyKSA9PiB7XHJcblx0XHRcdFx0bnBmLkRpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsO1xyXG5cdFx0XHRcdEVycm9yKGpxLCBzMSwgczIpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRham8uQ29tcGxldGUgPSAoanEsIHN0cikgPT4geyBucGYuQ2xvc2UoKTsgfTtcclxuXHJcblx0XHRcdHZhciBhanIgPSBqUXVlcnkuQWpheChham8pO1xyXG5cclxuXHRcdFx0bnBmLlNob3dEaWFsb2cobmV3IERpYWxvZ1Jlc3VsdChEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCwgKCkgPT4ge1xyXG5cdFx0XHRcdGFqci5BYm9ydCgpO1xyXG5cdFx0XHR9KSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGNsYXNzIE5ldHdvcmtQcm9ncmVzc0Zvcm0gOiBGb3JtXHJcblx0XHR7XHJcblx0XHRcdHB1YmxpYyBQcm9ncmVzc0NvbnRyb2wgcHJvZ3Jlc3NDb250cm9sO1xyXG5cdFx0XHRwdWJsaWMgU2ltcGxlRGlhbG9nQnV0dG9uIGJ1dHRvbkNhbmNlbDtcclxuXHJcblx0XHRcdHB1YmxpYyBOZXR3b3JrUHJvZ3Jlc3NGb3JtKHN0cmluZyBfdGV4dCA9IFwiTG9hZGluZy4uLlwiKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5UZXh0ID0gX3RleHQ7XHJcblx0XHRcdFx0dGhpcy5XaWR0aCA9IDQwMDtcclxuXHRcdFx0XHR0aGlzLkhlaWdodCA9IDIwMDtcclxuXHJcblx0XHRcdFx0cHJvZ3Jlc3NDb250cm9sID0gbmV3IFByb2dyZXNzQ29udHJvbCgpO1xyXG5cdFx0XHRcdHByb2dyZXNzQ29udHJvbC5TZXRCb3VuZHMoNTAsIDUwLCBcIigxMDAlIC0gMTAwcHgpXCIsIFwiMjNweFwiKTtcclxuXHJcblx0XHRcdFx0YnV0dG9uQ2FuY2VsID0gbmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiB9O1xyXG5cdFx0XHRcdGJ1dHRvbkNhbmNlbC5TZXRMb2NhdGlvbihcIigxMDAlIC0gNzhweClcIiwgXCIoMTAwJSAtIDI2cHgpXCIpO1xyXG5cdFx0XHRcdGJ1dHRvbkNhbmNlbC5Db250ZW50LlRhYkluZGV4ID0gMDtcclxuXHJcblx0XHRcdFx0Qm9keS5BcHBlbmRDaGlsZHJlbihidXR0b25DYW5jZWwsIHByb2dyZXNzQ29udHJvbCk7XHJcblxyXG5cdFx0XHRcdEFsbG93U2l6ZUNoYW5nZSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBSZXNvdXJjZU1hbmFnZXJcclxuICAgIHtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPiBjYWNoZVJlc291cmNlU3RyaW5nID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgR2V0UmVzb3VyY2VTdHJpbmcoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVSZXNvdXJjZVN0cmluZy5Db250YWluc0tleShuYW1lKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZVJlc291cmNlU3RyaW5nW25hbWVdO1xyXG4gICAgICAgICAgICByZXR1cm4gKGNhY2hlUmVzb3VyY2VTdHJpbmdbbmFtZV0gPSBTZXR0aW5ncy5HZXRTdHlsZVJ1bGVWYWx1ZShTZXR0aW5ncy5yZXNvdXJjZU1hbmFuZ2VyU2hlZXRzLCBcImNvbnRlbnRcIiwgXCIuXCIgKyBuYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgc3RhdGljIGNsYXNzIFNldHRpbmdzXHJcblx0e1xyXG5cdFx0cHVibGljIHN0YXRpYyBzdHJpbmcgTmV0d29ya1VSTCA9IFwiSG9zdC5hc2h4XCI7XHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyBSZXNvdXJjZVVSTCA9IFwiLi9pbWFnZXMvXCI7XHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgQXV0b1JlbmRlciA9IHRydWU7XHJcblx0XHRwdWJsaWMgY29uc3Qgc3RyaW5nIEZvbnQgPSBcIjguMjVwdCBUYWhvbWFcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRlY2ltYWwgVGF4UGVyY2VudCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgRGVmYXVsdEZvbnQgPSBGb250O1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIE9ubHkgZm9yIGZpcmVmb3ggLSBhcyBubyBlcnJvciB3aXRoIG51bWJlciBpbnB1dFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE9uRm9jdXNTZWxlY3RBbGwgPSB0cnVlO1xyXG5cdFx0XHJcblx0XHRwdWJsaWMgc3RhdGljIFN0eWxlU2hlZXQgRGVmYXVsdFN0eWxlU2hlZXQ7XHJcblx0XHRwdWJsaWMgc3RhdGljIFN0eWxlU2hlZXQgUGx1Z2luU3R5bGVTaGVldDtcclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgTGlzdDxTdHlsZVNoZWV0PiByZXNvdXJjZU1hbmFuZ2VyU2hlZXRzID0gbmV3IExpc3Q8U3R5bGVTaGVldD4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEdyaWRWaWV3QXV0b0NvbHVtbkdlbmVyYXRlRm9ybWF0QXNEYXRlID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgR3JpZFZpZXdBdXRvQ29sdW1uRm9ybWF0RGF0ZXMgPSB0cnVlO1xyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIEdyaWRWaWV3Qmx1ck9uU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR3JpZFZpZXdSb3dTY3JvbGxQYWRkaW5nID0gMDtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgR3JpZFZpZXdTY3JvbGxEZWxheWVkID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBHcmlkVmlld1Njcm9sbERlbGF5TVMgPSAyNTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBDb250ZXh0TWVudVN0YXJ0aW5nWkluZGV4ID0gNTAwO1xyXG5cdFx0cHVibGljIHN0YXRpYyBpbnQgQ29udGV4dE1lbnVNaW5XaWR0aCA9IDIwMDtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBNZXNzYWdlRm9ybVRleHRNYXhpbXVtSGVpZ2h0SW5QeCA9IDUwMDtcclxuXHRcdHB1YmxpYyBzdGF0aWMgaW50IE1lc3NhZ2VGb3JtVGV4dE1pbmltdW1IZWlnaHRJblB4ID0gMzI7XHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBNZXNzYWdlRm9ybU1pbmltdW1XaWR0aEluUHggPSAxOTU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIERheVBvc2l0aW9uID0gRGF0ZVBvc2l0aW9uLkZpcnN0O1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIE1vbnRoUG9zaXRpb24gPSBEYXRlUG9zaXRpb24uU2Vjb25kO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgRGF0ZVBvc2l0aW9uIFllYXJQb3NpdGlvbiA9IERhdGVQb3NpdGlvbi5UaGlyZDtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIERpc2FibGVUZXh0UG9wdXBFZGl0b3IgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjaGFyIERhdGVTZXBlcmF0b3IgPSAnLyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGVudW0gRGF0ZVBvc2l0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBGaXJzdCxcclxuICAgICAgICAgICAgU2Vjb25kLFxyXG4gICAgICAgICAgICBUaGlyZFxyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgVmVjdG9yMiBDb25zb2xlRGVmYXVsdFNpemUgPSBuZXcgVmVjdG9yMig1NDAsIDI0MCk7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIE1lc3NhZ2VGb3JtQmVlcCA9IGZhbHNlO1xyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgaW50IE1heGltdW1QaXhlbFNjcm9sbGluZ1Jvd3MgPSA1MDAwMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBY3Rpb248c3RyaW5nPiBPblNlbmRFcnJvciA9IG51bGw7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIElzQ2hyb21lID0gQnJvd3Nlci5Jc0Nocm9tZTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgQWxsb3dDbG9zZVdpdGhvdXRRdWVzdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFjdGlvbiBPbkFwcGxpY2F0aW9uQ2xvc2UgPSBudWxsO1xyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBTaG93RXhjZXB0aW9uRGlhbG9nID0gdHJ1ZTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBGb3JtRmFkZUR1cmF0aW9uID0gMTAwO1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEluY3JlYXNlIFJlbmRlciBTcGVlZFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFJlbW92ZUF0dHJpYnV0ZXNPZmZFbGVtZW50c1doZW5Mb3NlRm9jdXM7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldHVwKClcclxuXHRcdHtcclxuICAgICAgICAgICAgQWN0aXZlVGhlbWUgPSBUaGVtZS5UaGVtZTE7XHJcbiAgICAgICAgICAgIFNldHVwU3R5bGVEZWZhdWx0cygpO1x0XHRcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldHVwU3R5bGVEZWZhdWx0cygpXHJcblx0XHR7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTdHlsZVNoZWV0TGlzdCBzaGVldHMgPSBEb2N1bWVudC5TdHlsZVNoZWV0cztcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBzaGVldHMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG93bmVyTm9kZSA9IHNoZWV0c1tpXS5Pd25lck5vZGUgYXMgSFRNTExpbmtFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG93bmVyTm9kZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihvd25lck5vZGUuSWQuVG9Mb3dlcigpID09IFwiZXhwcmVzc2NyYWZ0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEZWZhdWx0U3R5bGVTaGVldCA9IHNoZWV0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYob3duZXJOb2RlLklkLlRvTG93ZXIoKSA9PSBcImV4cHJlc3NjcmFmdHBsdWdpblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGx1Z2luU3R5bGVTaGVldCA9IHNoZWV0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYob3duZXJOb2RlLklkLlRvTG93ZXIoKSA9PSBcInJlc291cmNlbWFuYWdlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VNYW5hbmdlclNoZWV0cy5BZGQoc2hlZXRzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihEZWZhdWx0U3R5bGVTaGVldCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZhciBkZiA9IEdldEV4cHJlc3NTdHlsZVJ1bGVWYWx1ZShcImZvbnRcIiwgXCIuY29udHJvbFwiKTtcclxuICAgICAgICAgICAgICAgIGlmKGRmICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgRGVmYXVsdEZvbnQgPSBkZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZHluYW1pYyBHZXRTdHlsZVJ1bGVWYWx1ZShMaXN0PFN0eWxlU2hlZXQ+IGNzc0ZpbGUsIHN0cmluZyBzdHlsZSwgc3RyaW5nIGNsYXNzTmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3NzRmlsZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpdGVtIGluIGNzc0ZpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljIHZhbHVlID0gR2V0U3R5bGVSdWxlVmFsdWUoaXRlbSwgc3R5bGUsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGR5bmFtaWMgR2V0U3R5bGVSdWxlVmFsdWUoU3R5bGVTaGVldCBjc3NGaWxlLCBzdHJpbmcgc3R5bGUsIHN0cmluZyBjbGFzc05hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNzc0ZpbGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkeW5hbWljIHBTdHlsZXMgPSBjc3NGaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwU3R5bGVzLmNzc1J1bGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwU3R5bGVzLmNzc1J1bGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljIHJ1bGUgPSBwU3R5bGVzLmNzc1J1bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3JUZXh0ICYmIHJ1bGUuc2VsZWN0b3JUZXh0LnNwbGl0KCcsJykuaW5kZXhPZihjbGFzc05hbWUpICE9IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBydWxlLnN0eWxlW3N0eWxlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGR5bmFtaWMgR2V0RXhwcmVzc1N0eWxlUnVsZVZhbHVlKHN0cmluZyBzdHlsZSwgc3RyaW5nIGNsYXNzTmFtZSlcclxuXHRcdHtcclxuICAgICAgICAgICAgZHluYW1pYyB2YWx1ZSA9IEdldFN0eWxlUnVsZVZhbHVlKFBsdWdpblN0eWxlU2hlZXQsIHN0eWxlLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEdldFN0eWxlUnVsZVZhbHVlKERlZmF1bHRTdHlsZVNoZWV0LCBzdHlsZSwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7ICAgICAgICAgICAgXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHByaXZhdGUgc3RhdGljIEhUTUxTdHlsZUVsZW1lbnQgdGhlbWVFbGVtZW50ID0gbnVsbDtcclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBBcHBseUFjdGl2ZVRoZW1lKClcclxuXHRcdHtcclxuXHRcdFx0aWYodGhlbWVFbGVtZW50ICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGVtZUVsZW1lbnQuUGFyZW50RWxlbWVudC5SZW1vdmVDaGlsZCh0aGVtZUVsZW1lbnQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKF9hY3RpdmVUaGVtZSA9PSBudWxsKVxyXG5cdFx0XHRcdF9hY3RpdmVUaGVtZSA9IFRoZW1lLlRoZW1lMTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIG9iakxpc3QgPSBuZXcgTGlzdDxvYmplY3Q+KCk7XHJcbiAgICAgICAgICAgIG9iakxpc3QuQWRkUmFuZ2UoX2FjdGl2ZVRoZW1lLkNvbG9ycyk7XHJcbiAgICAgICAgICAgIG9iakxpc3QuQWRkUmFuZ2UobmV3IG9iamVjdFtdIHsgXCJjb250cm9sXCIsIFwiYmFja2dyb3VuZC1jb2xvclwiLCBcImJvcmRlclwiLCBcInJpYmJvblwiLCBcIi1sZWZ0LWNvbG9yXCIgLCBcIi10b3AtY29sb3JcIiwgXCItcmlnaHQtY29sb3JcIiwgXCItYm90dG9tLWNvbG9yXCIsIFwiYnV0dG9uXCIsIFwiZm9ybS1oZWFkaW5nXCIsIFwicGFnZWhlYWRlclwiLCBcImhlYWRpbmdcIiB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGVtZUVsZW1lbnQgPSBuZXcgSFRNTFN0eWxlRWxlbWVudCgpXHJcblx0XHRcdHsgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0SW5uZXJIVE1MID0gc3RyaW5nLkZvcm1hdCh0aGVtZVRlbXBsYXRlLlJlcGxhY2UoXCIjZm9jdXNMaW5lO1wiLCBfaW5jbHVkZUZvY3VzUmVnaW9uID8gdGhlbWVmb2N1c1ZhbHVlIDogc3RyaW5nLkVtcHR5KSxcclxuXHRcdFx0XHRvYmpMaXN0LlRvQXJyYXkoKSlcclxuXHRcdFx0fTsgICAgICAgICAgICBcclxuXHJcblx0XHRcdERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQodGhlbWVFbGVtZW50KTtcclxuXHRcdH1cclxuXHRcdHByaXZhdGUgc3RhdGljIGJvb2wgX2luY2x1ZGVGb2N1c1JlZ2lvbiA9IHRydWU7XHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgSW5jbHVkZUZvY3VzUmVnaW9uIHsgZ2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gX2luY2x1ZGVGb2N1c1JlZ2lvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKF9pbmNsdWRlRm9jdXNSZWdpb24gIT0gdmFsdWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X2luY2x1ZGVGb2N1c1JlZ2lvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0QXBwbHlBY3RpdmVUaGVtZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIFRoZW1lIF9hY3RpdmVUaGVtZSA9IG51bGw7XHJcblx0XHRwdWJsaWMgc3RhdGljIFRoZW1lIEFjdGl2ZVRoZW1lIHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIF9hY3RpdmVUaGVtZTsgfVxyXG5cdFx0XHRzZXQge1xyXG5cdFx0XHRcdGlmKF9hY3RpdmVUaGVtZSAhPSB2YWx1ZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfYWN0aXZlVGhlbWUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdEFwcGx5QWN0aXZlVGhlbWUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vVGhlbWVGb3JtXHJcblx0XHQjcmVnaW9uIFRoZW1lVGVtcGxhdGVDb2RlXHJcblx0XHRwcml2YXRlIHN0YXRpYyBzdHJpbmcgdGhlbWVmb2N1c1ZhbHVlID0gQFwiLnsyNX06Zm9jdXM6bm90KC5ncmlkKXt7XHJcbmJvcmRlcjogc29saWQgMXB4IHswfTtcclxufX1cIjtcclxuXHRcdHByaXZhdGUgc3RhdGljIHN0cmluZyB0aGVtZVRlbXBsYXRlID0gQFwiLnsyNX17e1xyXG4gICAgY29sb3I6ezIyfTtcclxufX1cclxuI2ZvY3VzTGluZTtcclxuLnsyNX06OnNlbGVjdGlvbnt7XHJcbnsyNn06ezF9O1xyXG59fVxyXG4uezI1fTo6LW1vei1zZWxlY3Rpb257e1xyXG57MjZ9OnsxfTtcclxufX1cclxuLnsyNX06ZGlzYWJsZWR7e1xyXG57MjZ9OnsyfTtcclxufX1cclxuLmlucHV0ezI1fTpyZWFkLW9ubHl7e1xyXG57MjZ9OnszfTtcclxufX1cclxuLnsyOH17MjV9e3tcclxuezI2fTp7MH07XHJcbnsyN317Mjl9OnswfTtcclxuezI3fXszMX06ezB9O1xyXG57Mjd9ezMyfTp7MX07XHJcbn19XHJcbi57Mjh9cGFnZXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4uezI4fWdyb3Vwe3tcclxuezI2fTp7M307XHJcbn19XHJcbi57Mjh9ezMzfXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4uezI4fXszM306aG92ZXI6bm90KDphY3RpdmUpOm5vdCguZGlzYWJsZWQpXHJcbnt7XHJcbnsyNn06ezR9O1xyXG59fVxyXG4uezI4fXszM306YWN0aXZlOm5vdCguZGlzYWJsZWQpe3tcclxuezI2fTp7NX07XHJcbn19XHJcbi57Mjh9ezMzfXNtYWxse3tcclxuezI2fTp7M307IFxyXG59fVxyXG4uezI4fXszM31zbWFsbDpob3Zlcjpub3QoOmFjdGl2ZSk6bm90KC5kaXNhYmxlZClcclxue3tcclxuezI2fTp7NH07XHJcbn19XHJcbi57Mjh9ezMzfXNtYWxsOmFjdGl2ZTpub3QoLmRpc2FibGVkKXt7XHJcbnsyNn06ezV9O1xyXG59fVxyXG4uezI4fXNlcGVyYXRvcnt7XHJcbnsyNn06ezF9O1xyXG59fVxyXG4uezI4fXszNX0taGlkZGVue3tcclxuezI2fTp7MH07XHJcbmNvbG9yOnsyM307XHJcbn19XHJcbi57Mjh9ezM1fS1oaWRkZW46aG92ZXJ7e1xyXG57MjZ9Ons2fTtcclxufX1cclxuLnsyOH17MzV9LWFjdGl2ZXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4udGFiezI1fXt7XHJcbnsyNn06ezN9O1xyXG59fVxyXG4udGFiezI1fXBhZ2V7e1xyXG57MjZ9OnszfTtcclxuezI3fXsyOX06ezF9O1xyXG57Mjd9ezMxfTp7MX07XHJcbnsyN317MzJ9OnsxfTtcclxufX1cclxuLnRhYnsyNX17MzV9IHt7XHJcbnsyNn06ezN9OyAgIFxyXG59fVxyXG4udGFiezI1fXszNX0taGlkZGVue3tcclxuezI3fXszMH06ezN9O1xyXG57Mjd9ezI5fTp7M307XHJcbnsyN317MzF9OnszfTtcclxuezI3fXszMn06dHJhbnNwYXJlbnQ7XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1oaWRkZW46aG92ZXJ7e1xyXG57MjZ9Ons3fTtcclxuezI3fXsyOX06ezd9O1xyXG57Mjd9ezMxfTp7N307XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1hY3RpdmV7e1xyXG57Mjd9ezMwfTp7MH07XHJcbnsyN317Mjl9OnsxfTtcclxuezI3fXszMX06ezF9O1xyXG57Mjd9ezMyfTp7M307XHJcbmJvcmRlci10b3Atd2lkdGg6MnB4O1xyXG5saW5lLWhlaWdodDoxOHB4O1xyXG50b3A6MnB4O1xyXG59fVxyXG4udGFiezI1fXszNX0tY2xvc2V7MzN9e3tcclxuY29sb3I6ezF9O1x0XHJcbn19XHJcbi50YWJ7MjV9ezM1fS1jbG9zZXszM306aG92ZXJ7e1xyXG5jb2xvcjp7MjR9O1xyXG5cdHsyNn06ezJ9O1xyXG5cdHsyN306MXB4IHNvbGlkIHsxOX07XHJcbn19XHJcbi5pbnB1dHsyNX0ge3tcclxuezI3fToxcHggc29saWQgezF9OyAgIFxyXG57MjZ9OnsxNH07XHJcbn19XHJcbi5zaW1wbGV7MzN9e3tcclxuezI3fToxcHggc29saWQgezE5fTtcclxuezI2fTp7M307XHJcbn19XHJcbi5zaW1wbGV7MzN9OmhvdmVyOm5vdCguZGlzYWJsZWQpXHJcbnt7XHJcblx0ezI2fTp7MX07XHJcbn19XHJcbi5zaW1wbGV7MzN9OmFjdGl2ZTpub3QoLmRpc2FibGVkKVxyXG57e1xyXG5cdHsyNn06ezEyfTtcclxuezI3fTogMXB4IHNvbGlkIHsyMH07XHJcbn19XHJcbkBrZXlmcmFtZXMgQ29sb3JGbGFzaCB7e1xyXG5mcm9tIHt7IHsyNn06IHsyM307fX1cclxudG8ge3sgezI2fTogezB9O319XHJcbn19XHJcbi5mb3JtLWJhc2V7e1xyXG57Mjd9LWNvbG9yOnswfTtcclxufX1cclxuLnszNH17e1xyXG57MjZ9OnswfTsgIFxyXG59fVxyXG4uezM0fS10aXRsZXt7XHJcbmNvbG9yOnsyM307IFxyXG59fVxyXG4uezM0fS17MzN9e3tcclxuY29sb3I6ezIzfTtcclxufX1cclxuLnszNH0tezMzfTpob3Zlcjpub3QoLnszNH0tezMzfS1jbG9zZSl7e1xyXG57MjZ9Ons4fTtcclxufX1cclxuLnszNH0tezMzfTphY3RpdmU6bm90KC57MzR9LXszM30tY2xvc2Upe3tcclxuezI2fTp7OX07XHJcbn19XHJcbi57MzR9LXszM30tY2xvc2U6aG92ZXJ7e1xyXG57MjZ9OnsxMH07XHJcbn19XHJcbi57MzR9LXszM30tY2xvc2U6YWN0aXZle3tcclxuezI2fTp7MTF9O1xyXG59fVxyXG4uY2VsbHt7XHJcbnsyN306IDFweCBzb2xpZCB7M307ICAgXHJcbn19XHJcbi5jZWxscm93e3tcclxuezI2fTp7MTR9O1xyXG59fVxyXG4uY2VsbHJvdzpob3Zlcnt7XHJcbnsyNn06ezN9ICFpbXBvcnRhbnQ7XHJcbn19XHJcbi5jZWxscm93OmFjdGl2ZXt7XHJcbnsyNn06ezEyfSAhaW1wb3J0YW50O1xyXG59fVxyXG4uZXZlbnt7XHJcbiAgIHsyNn06ezEzfSAhaW1wb3J0YW50O1xyXG59fVxyXG4uY2VsbHJvdy1zZWxlY3RlZHt7XHJcbnsyNn06ezE3fSAhaW1wb3J0YW50O1xyXG59fVxyXG4uY2VsbHJvdy1zZWxlY3RlZDpob3Zlcnt7XHJcbnsyNn06ezE4fSAhaW1wb3J0YW50O1xyXG59fVxyXG4uezM2fXt7XHJcbnsyNn06ezN9O1xyXG57Mjd9LXJpZ2h0OjFweCBzb2xpZCB7MTl9ICFpbXBvcnRhbnQ7XHJcbn19XHJcbi57MzZ9OmhvdmVye3tcclxuezI2fTp7MX07XHJcbn19XHJcbi57MzZ9OmFjdGl2ZXt7XHJcbnsyNn06ezEyfTtcclxufX1cclxuLnszNn0tY29udGFpbmVye3tcclxuezI2fTp7M307XHJcbnsyN30tYm90dG9tOjFweCBzb2xpZCB7MTl9ICFpbXBvcnRhbnQ7XHRcclxufX1cclxuLmdyaWR7e1xyXG57MjZ9OnsxNH07XHJcbnsyN306MXB4IHNvbGlkIHsxOX07IFxyXG59fVxyXG4ucHJvZ3Jlc3NiYXJ7e1xyXG57Mjd9OjFweCBzb2xpZCB7MTl9O1xyXG57MjZ9OnsxNH07XHJcbn19XHJcbi5wcm9ncmVzc2JhcmJvZHl7e1xyXG57MjZ9OnswfTtcclxufX1cclxuLmNvbnRleHRtZW51e3tcclxuezI2fTp7MTR9OyBcclxuezI3fTogc29saWQgMXB4IHsyMX07XHJcbn19XHJcbi5jb250ZXh0aXRlbTpob3Zlcnt7XHJcbnsyNn06ezE1fTtcclxufX1cclxuLmNvbnRleHRpdGVtc2VwZXJhdG9ye3tcclxuezI2fTp7MTZ9O1xyXG59fVxyXG4uZGlhbG9nezMzfXNlY3Rpb257e1xyXG57MjZ9OnszfTtcclxufX1cclxuLnNwbGl0ezI1fVxyXG57e1xyXG57Mjd9OjFweCBzb2xpZCB7MTl9O1xyXG59fVxyXG4uc3BsaXR0ZXJ2ZXJ0aWNhbCB7e1xyXG57Mjd9LWxlZnQ6IDFweCB7NH0gc29saWQ7XHJcbnsyN30tcmlnaHQ6IDFweCB7NH0gc29saWQ7XHJcbn19XHJcbi5zcGxpdHRlcmhvcml6b250YWwge3tcclxuezI3fS10b3A6IDFweCB7NH0gc29saWQ7XHJcbnsyN30tYm90dG9tOiAxcHggezR9IHNvbGlkO1xyXG59fVxyXG4uc3BsaXR0ZXJob3Jpem9udGFsOmhvdmVyIHt7XHJcbnsyNn06ezR9O1xyXG59fVxyXG4uc3BsaXR0ZXJ2ZXJ0aWNhbDpob3ZlciB7e1xyXG57MjZ9Ons0fTtcclxufX1cclxuLnRvb2wtdGlwe3tcclxuezI2fTp7MTR9O1xyXG57Mjd9OiBzb2xpZCAxcHggezIxfTtcclxufX1cclxuLnszNH0tbWluOmhvdmVye3tcclxuXHR7MjZ9Ons4fTtcclxufX1cclxuLnNpbXBsZWJ1dHRvbi1hY3RpdmVcclxue3tcclxuXHR7MjZ9OnsxMn07XHJcbnsyN306IDFweCBzb2xpZCB7MjB9O1xyXG59fVxyXG4ucHJpbWFyeXt7XHJcbiAgICB7MjZ9OnswfTtcclxufX1cclxuLnRhYmhlYWRlci1jb250YWluZXJ7e1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHswfSBzb2xpZDtcclxufX1cclxuXCI7XHJcblx0XHQjZW5kcmVnaW9uXHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIE9uRjJTaG93VGhlbWVGb3JtID0gdHJ1ZTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBUb29sVGlwUG9wdXBEZWxheU1zID0gMTAwMDtcclxuXHRcdHB1YmxpYyBzdGF0aWMgaW50IFRvb2xUaXBQb3B1cFN0YXlPcGVuRGVsYXlQZXJXb3JkTXMgPSAyNTA7XHJcblxuXHRcbnByaXZhdGUgc3RhdGljIGRlY2ltYWwgX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1RheFBlcmNlbnQ9MC4xbTt9XHJcblx0cHVibGljIGNsYXNzIFRoZW1lXHJcblx0e1xyXG5cdFx0cHVibGljIHN0cmluZ1tdIENvbG9ycyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjE7IC8vICMwMTczQzcgezB9IGZvcm0gaGVhZGVyIGNvbG9yIHJpYmJvbiBjb2xvciBldGMsIHJpYmJvbiBoZWFkZXIgaGlkZGVuIC0gbm90IGFjdGl2ZS4uXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjI7IC8vICNDNUM1QzUgezF9IHRleHQgc2VsZWN0aW9uIGJhY2sgY29sb3IsIHJpYmJvbiBzcGxpdGVyXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjM7IC8vICNDQ0NDQ0MgezJ9IGRpc2FibGVkIGJhY2tjb2xvclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I0OyAvLyAjRjBGMEYwIHszfSBpbnB1dCBiYWNrY29sb3IuLi4gLSByaWJib24gcGFnZSBiYWNrLCByaWJib24gZ3JvdXAsIHJpYmJvbiBidXR0b24sIHJpYmJvbnNtYWxsLCByaWJib24gaGVhZGVyIGFjdGl2ZSBjb2xyb1xyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3I1OyAvLyAjQzNDM0MzIHs0fXJpYmJvbiBpdGVtcyBkaXNhYmxlZCwgcmliYm9uIGhvdmVyXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjY7IC8vICNBREFEQUQgezV9IHJpYmJvbiBidXR0b24gQWN0aXZlXHRcdFxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yNzsgLy8gIzJBOEFEMCB7Nn0gcmliYm9uIGhlYWRlciBoaWRkZW4gaG92ZXJcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yODsgLy8gI0QzRDNEMyB7N30gdGFiY29udHJvbCBoZWFkZXIgaGlkZGVuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjk7IC8vICMyQThBRDQgezh9IEZvcm0gSGVhZGluZyBCdXR0b24gbm90IGNsb3NlIEhvdmVyLlxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxMDsgLy8gIzAxNUM5RiB7OX0gRm9ybSBIZWFkaW5nIEJ1dHRvbiBub3QgY2xvc2UgQWN0aXZlLlxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxMTsgLy8gI0U4MTEyMyB7MTB9IEZvcm0gSGVhZGluZyBCdXR0b24gY2xvc2UgSG92ZXIuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjEyOyAvLyAjRjE3MDdBIHsxMX0gRm9ybSBIZWFkaW5nIEJ1dHRvbiBjbG9zZSBBY3RpdmUuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEJhY2tncm91bmRDb2xvcjEzOyAvLyAjQUVBRUFFIHsxMn0gQ2VsbFJvdyBBY3RpdmVcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTQ7IC8vICNGQUZBRkEgezEzfTsgUm93IEV2ZW5cdFx0XHRcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTU7IC8vIHdoaXRlIHsxNH0gQ29udGV4dCBNZW51IEJhY2sgQ29sb3JcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTY7IC8vICNDRkNGQ0YgezE1fSBDb250ZXh0IE1lbnUgSXRlbSBIb3ZlclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxNzsgLy8gI0I5QjlCOSB7MTZ9IENvbnRleHQgTWVudSBJdGVtIFNwbGl0dGVyXHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCYWNrZ3JvdW5kQ29sb3IxODsgLy8gcmdiYSgxLCAxMTUsIDE5OSwgMC4zKSB7MTd9IENlbGxSb3ctU2VsZWN0ZWRcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQmFja2dyb3VuZENvbG9yMTk7IC8vIHJnYmEoMSwgMTE1LCAxOTksIDAuNSkgezE4fSBDZWxsUm93LVNlbGVjdGVkXHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBCb3JkZXJDb2xvcjE7IC8vICNBNkE2QTYgezE5fSBCdXR0b24gQm9yZGVyLCBzcGxpdHRlciBCb3JkZXJcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQm9yZGVyQ29sb3IyOyAvLyAjNzc3Nzc3IHsyMH0gYnV0dG9uIEJvcmRlciBBY3RpdmVcclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgQm9yZGVyQ29sb3IzOyAvLyAjODA4NjhBIHsyMX0gQ29udGV4dCBNZW51IEJvcmRlciBDb2xvclxyXG4gICAgICAgIC8vcHVibGljIHN0cmluZyBGb3JlQ29sb3IxOyAvLyAjNDA0MDQwIHsyMn1cclxuICAgICAgICAvL3B1YmxpYyBzdHJpbmcgRm9yZUNvbG9yMjsgLy8gcmliYm9ucGFnZWhlYWRlciB3aGl0ZSB7MjN9IHJpYmJvbnBhZ2VoZWFkZXItaGlkZGVuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RyaW5nIEZvcmVDb2xvcjM7IC8vIHJpYmJvbnBhZ2VoZWFkZXIgYmxhY2sgezI0fSBIb3ZlciB0YWJjb250cm9scGFnZWhlYWRlci1jbG9zZWJ1dHRvblxyXG4gICAgICAgIC8vIGNvbnRyb2wgezI1fVxyXG4gICAgICAgIC8vIGJhY2tncm91bmQtY29sb3IgezI2fVxyXG4gICAgICAgIC8vIGJvcmRlciB7Mjd9XHJcbiAgICAgICAgLy8gcmliYm9uIHsyOH1cclxuICAgICAgICAvLyAtbGVmdC1jb2xvciB7Mjl9XHJcbiAgICAgICAgLy8gLXRvcC1jb2xvciB7MzB9XHJcbiAgICAgICAgLy8gLXJpZ2h0LWNvbG9yIHszMX1cclxuICAgICAgICAvLyAtYm90dG9tLWNvbG9yIHszMn1cclxuICAgICAgICAvLyBidXR0b24gezMzfVxyXG4gICAgICAgIC8vIGZvcm0taGVhZGluZyB7MzR9XHJcbiAgICAgICAgLy8gcGFnZWhlYWRlciB7MzV9XHJcbiAgICAgICAgLy8gaGVhZGluZyB7MzZ9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUaGVtZShwYXJhbXMgc3RyaW5nW10gY29sb3JzKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihjb2xvcnMgIT0gbnVsbCAmJiBjb2xvcnMuTGVuZ3RoID09IDI1KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Q29sb3JzID0gY29sb3JzO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMSA9IGJnYzE7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMiA9IGJnYzI7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMyA9IGJnYzM7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yNCA9IGJnYzQ7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yNSA9IGJnYzU7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yNiA9IGJnYzY7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yNyA9IGJnYzc7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yOCA9IGJnYzg7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yOSA9IGJnYzk7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMTAgPSBiZ2MxMDtcclxuXHRcdFx0Ly9CYWNrZ3JvdW5kQ29sb3IxMSA9IGJnYzExO1xyXG5cdFx0XHQvL0JhY2tncm91bmRDb2xvcjEyID0gYmdjMTI7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMTMgPSBiZ2MxMztcclxuXHRcdFx0Ly9CYWNrZ3JvdW5kQ29sb3IxNCA9IGJnYzE0O1x0XHRcclxuXHRcdFx0Ly9CYWNrZ3JvdW5kQ29sb3IxNSA9IGJnYzE1O1xyXG5cdFx0XHQvL0JhY2tncm91bmRDb2xvcjE2ID0gYmdjMTY7XHJcblx0XHRcdC8vQmFja2dyb3VuZENvbG9yMTcgPSBiZ2MxNztcclxuXHRcdFx0Ly9CYWNrZ3JvdW5kQ29sb3IxOCA9IGJnYzE4O1xyXG5cdFx0XHQvL0JhY2tncm91bmRDb2xvcjE5ID0gYmdjMTk7XHJcblx0XHRcdC8vQm9yZGVyQ29sb3IxID0gYmMxO1xyXG5cdFx0XHQvL0JvcmRlckNvbG9yMiA9IGJjMjtcclxuXHRcdFx0Ly9Cb3JkZXJDb2xvcjMgPSBiYzM7XHJcblx0XHRcdC8vRm9yZUNvbG9yMSA9IGZjMTtcclxuXHRcdFx0Ly9Gb3JlQ29sb3IyID0gZmMyO1xyXG5cdFx0XHQvL0ZvcmVDb2xvcjMgPSBmYzM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBUaGVtZSBUaGVtZTEgPSBuZXcgVGhlbWUoXHJcblx0XHRcdFwiIzAxNzNDN1wiLCBcIiNDNUM1QzVcIiwgXCIjQ0NDQ0NDXCIsXHJcblx0XHRcdFwiI0YwRjBGMFwiLCBcIiNDM0MzQzNcIiwgXCIjQURBREFEXCIsXHJcblx0XHRcdFwiIzJBOEFEMFwiLCBcIiNEM0QzRDNcIiwgXCIjMkE4QUQ0XCIsXHJcblx0XHRcdFwiIzAxNUM5RlwiLCBcIiNFODExMjNcIiwgXCIjRjE3MDdBXCIsXHJcblx0XHRcdFwiI0FFQUVBRVwiLCBcIiNGQUZBRkFcIiwgXCIjZmZmZmZmXCIsXHJcblx0XHRcdFwiI0NGQ0ZDRlwiLCBcIiNCOUI5QjlcIiwgXCJyZ2JhKDEsIDExNSwgMTk5LCAwLjMpXCIsXHJcblx0XHRcdFwicmdiYSgxLCAxMTUsIDE5OSwgMC41KVwiLCBcIiNBNkE2QTZcIixcclxuXHRcdFx0XCIjNzc3Nzc3XCIsIFwiIzgwODY4QVwiLCBcIiM0MDQwNDBcIixcclxuXHRcdFx0XCIjZmZmZmZmXCIsIFwiIzAwMDAwMFwiKTtcdFx0XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdCB7XHJcbiAgICBwdWJsaWMgY2xhc3MgVGV4dEJsb2NrXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBPcmlnaW5hbFNvdXJjZTsgICAgICAgIFxyXG5cdFx0cHVibGljIGludCBNYXhXaWR0aDtcclxuXHJcblx0XHRwdWJsaWMgZmxvYXQgQ29tcHV0ZWRIZWlnaHQ7XHJcblx0XHRwdWJsaWMgaW50IExpbmVzQ29tcHV0ZWQ7XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBib29sIEVsZWxlbXRzT3Zlck1heCA9IGZhbHNlO1xyXG5cdFx0cHVibGljIGZsb2F0IE1heENhbGN1bGF0ZWRXaWR0aCA9IDA7XHJcblxyXG5cdFx0cHVibGljIFRleHRCbG9jayhzdHJpbmcgc291cmNlLCBpbnQgbWF4V2lkdGgpIHtcclxuXHRcdFx0T3JpZ2luYWxTb3VyY2UgPSBzb3VyY2U7XHJcblx0XHRcdE1heFdpZHRoID0gbWF4V2lkdGg7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ29tcHV0ZVN0cmluZygpXHJcblx0XHR7XHJcblx0XHRcdEVsZWxlbXRzT3Zlck1heCA9IGZhbHNlO1xyXG5cdFx0XHRzdHJpbmdbXSBMaW5lcyA9IE9yaWdpbmFsU291cmNlLlNwbGl0KG5ldyBjaGFyW10geyAnXFxyJywgJ1xcbicgfSk7XHJcblx0XHRcclxuXHRcdFx0ZG91YmxlIHNpemVQZXJDaGFyID0gQ29udHJvbC5HZXRUZXh0V2lkdGgoXCJNXCIsIFNldHRpbmdzLkRlZmF1bHRGb250KTtcclxuXHJcblx0XHRcdExpbmVzQ29tcHV0ZWQgPSAwO1xyXG5cclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IExpbmVzLkxlbmd0aDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3RyaW5nIGxpbmUgPSBMaW5lc1tpXTtcclxuXHJcblx0XHRcdFx0ZG91YmxlIGxpbmVXaWR0aCA9IENvbnRyb2wuR2V0VGV4dFdpZHRoKE9yaWdpbmFsU291cmNlLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYobGluZVdpZHRoID4gTWF4V2lkdGgpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0RWxlbGVtdHNPdmVyTWF4ID0gdHJ1ZTtcclxuXHRcdFx0XHRcdE1heENhbGN1bGF0ZWRXaWR0aCA9IE1heFdpZHRoO1xyXG5cdFx0XHRcdFx0aW50IHl5ID0gMDtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRmb3IoaW50IHggPSAwOyB4IDwgbGluZS5MZW5ndGg7IHgrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0eXkrKztcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmKHl5ICogc2l6ZVBlckNoYXIgPiBNYXhXaWR0aClcclxuXHRcdFx0XHRcdFx0e1x0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0TGluZXNDb21wdXRlZCsrO1xyXG5cdFx0XHRcdFx0XHRcdHl5ID0gMDtcclxuXHRcdFx0XHRcdFx0fVx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmKHl5ID4gMClcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TGluZXNDb21wdXRlZCsrO1xyXG5cdFx0XHRcdFx0fVx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0TGluZXNDb21wdXRlZCsrO1xyXG5cdFx0XHRcdFx0aWYobGluZVdpZHRoID4gTWF4Q2FsY3VsYXRlZFdpZHRoKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRNYXhDYWxjdWxhdGVkV2lkdGggPSAoZmxvYXQpbGluZVdpZHRoO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVx0XHRcdFxyXG5cdFx0XHRDb21wdXRlZEhlaWdodCA9IEdldEZvbnRTaXplKFNldHRpbmdzLkRlZmF1bHRGb250KSAqIExpbmVzQ29tcHV0ZWQ7XHRcdFx0XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGZsb2F0IEdldEZvbnRTaXplKHN0cmluZyBmb250V2l0aFNpemUpXHJcblx0XHR7XHJcblx0XHRcdHN0cmluZ1tdIHN0cnMgPSBmb250V2l0aFNpemUuU3BsaXQobmV3IGNoYXJbXSB7ICcgJyB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuUmVtb3ZlRW1wdHlFbnRyaWVzKTtcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBzdHJzLkxlbmd0aDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoc3Ryc1tpXS5FbmRzV2l0aChcInB0XCIpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiAoZmxvYXQpR2xvYmFsLlBhcnNlRmxvYXQoc3Ryc1tpXSkgKiAxLjMzMzMzM0Y7XHJcblx0XHRcdFx0fWVsc2UgaWYoc3Ryc1tpXS5FbmRzV2l0aChcInB4XCIpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybiAoZmxvYXQpR2xvYmFsLlBhcnNlRmxvYXQoc3Ryc1tpXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gOC4yNUYgKiAxLjMzMzMzM0Y7XHJcblx0XHR9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRpbnRlcm5hbCBjbGFzcyBUb29sVGlwQ29udHJvbCA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwcml2YXRlIGJvb2wgdmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0cHJpdmF0ZSBUb29sVGlwIF90b29sVGlwO1xyXG5cdFx0cHVibGljIFRvb2xUaXBDb250cm9sKFRvb2xUaXAgdG9vbFRpcCkgOiBiYXNlKFwidG9vbC10aXBcIilcclxuXHRcdHtcclxuXHRcdFx0X3Rvb2xUaXAgPSB0b29sVGlwO1xyXG5cdFx0fVx0XHRcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTaG93KE1vdXNlRXZlbnQgZXYpXHJcblx0XHR7XHJcblx0XHRcdGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdHRoaXMuQ29udGVudC5FbXB0eSgpO1xyXG5cclxuXHRcdFx0aWYoX3Rvb2xUaXAgIT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKCFfdG9vbFRpcC5IZWFkaW5nLklzRW1wdHkoKSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0aGlzLkNvbnRlbnQuQXBwZW5kQ2hpbGQobmV3IEhUTUxQYXJhZ3JhcGhFbGVtZW50KCkgeyBDbGFzc05hbWUgPSBcInRvb2wtdGlwLWhlYWRpbmdcIiwgSW5uZXJIVE1MID0gX3Rvb2xUaXAuSGVhZGluZy5IdG1sRXNjYXBlKCkuUmVwbGFjZShcIlxcclxcblwiLCBcIjxicj5cIikgfSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKCFfdG9vbFRpcC5EZXNjcmlwdGlvbi5Jc0VtcHR5KCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGhpcy5Db250ZW50LkFwcGVuZENoaWxkKG5ldyBIVE1MUGFyYWdyYXBoRWxlbWVudCgpIHsgQ2xhc3NOYW1lID0gXCJ0b29sLXRpcC1ib2R5XCIsIElubmVySFRNTCA9IF90b29sVGlwLkRlc2NyaXB0aW9uLkh0bWxFc2NhcGUoKS5SZXBsYWNlKFwiXFxyXFxuXCIsIFwiPGJyPlwiKSB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIG1vdXNlID0gSGVscGVyLkdldENsaWVudE1vdXNlTG9jYXRpb24oZXYpO1xyXG5cclxuXHRcdFx0dGhpcy5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKG1vdXNlLlgsIG1vdXNlLlkuVG9JbnQoKSArIDIyKTtcclxuXHJcblx0XHRcdGlmKCF2aXNpYmxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmlzaWJsZSA9IHRydWU7XHJcblx0XHRcdFx0Q29udGV4dE1lbnUuVG90YWxDb250ZXh0SGFuZGxlcysrO1xyXG5cdFx0XHRcdENvbnRlbnQuU3R5bGUuWkluZGV4ID0gKENvbnRleHRNZW51LlRvdGFsQ29udGV4dEhhbmRsZXMgKyBTZXR0aW5ncy5Db250ZXh0TWVudVN0YXJ0aW5nWkluZGV4KS5Ub1N0cmluZygpO1xyXG5cdFx0XHRcdERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQodGhpcyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDbG9zZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKHZpc2libGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZih0aGlzLkNvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRqUXVlcnkuU2VsZWN0KHRoaXMuQ29udGVudCkuRmFkZU91dCgxMDAsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHZpc2libGUgPSBmYWxzZTtcclxuXHRcdFx0XHRDb250ZXh0TWVudS5Ub3RhbENvbnRleHRIYW5kbGVzLS07XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIGNsYXNzIFRvb2xUaXBcclxuXHR7XHJcblx0XHRwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uO1xyXG5cdFx0cHVibGljIHN0cmluZyBIZWFkaW5nO1xyXG5cclxuXHRcdHB1YmxpYyBDb250cm9sIEF0dGFjaGVkQ29udHJvbDtcclxuXHJcblx0XHRwdWJsaWMgVG9vbFRpcChzdHJpbmcgY29udGVudClcclxuXHRcdHtcclxuXHRcdFx0RGVzY3JpcHRpb24gPSBjb250ZW50O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBUb29sVGlwKHN0cmluZyBoZWFkaW5nLCBzdHJpbmcgZGVzY3JpcHRpb24pXHJcblx0XHR7XHJcblx0XHRcdERlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcblx0XHRcdEhlYWRpbmcgPSBoZWFkaW5nO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBpbnQgR2V0V29yZENvdW50KClcclxuXHRcdHtcclxuXHRcdFx0dmFyIGZ1bGxDb250ZW50ID0gc3RyaW5nLkNvbmNhdChIZWFkaW5nLCBcIiBcIiwgRGVzY3JpcHRpb24pLlRyaW0oKTtcclxuXHRcdFx0dmFyIGxlbmd0aCA9IGZ1bGxDb250ZW50Lkxlbmd0aDtcclxuXHRcdFx0Y2hhciBwcmV2Q2hhciA9ICdcXDAnO1xyXG5cdFx0XHR2YXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblx0XHRcdGNoYXIgY3VycmVudDtcclxuXHRcdFx0aW50IFdvcmRDb3VudCA9IDE7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGN1cnJlbnQgPSBmdWxsQ29udGVudFtpXTtcclxuXHRcdFx0XHRpZihjaGFyLklzV2hpdGVTcGFjZShjdXJyZW50KSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihjaGFyLklzV2hpdGVTcGFjZShwcmV2Q2hhcikpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHByZXZDaGFyID0gY3VycmVudDtcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFdvcmRDb3VudCsrO1xyXG5cdFx0XHRcdFx0fVx0XHRcdFxyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHRcdHByZXZDaGFyID0gY3VycmVudDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gV29yZENvdW50O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBzdHJ1Y3QgVmVjdG9yMlxyXG5cdHtcclxuXHRcdHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFg7XHJcblx0XHRwdWJsaWMgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiBZO1xyXG5cdFx0XHJcblx0XHRwdWJsaWMgaW50IFhpXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiAoaW50KVg7IH1cclxuXHRcdFx0c2V0IHsgWCA9IHZhbHVlOyB9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBZaVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gKGludClZOyB9XHJcblx0XHRcdHNldCB7IFkgPSB2YWx1ZTsgfVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBmbG9hdCBYZlxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gKGZsb2F0KVg7IH1cclxuXHRcdFx0c2V0IHsgWCA9IHZhbHVlOyB9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGZsb2F0IFlmXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiAoZmxvYXQpWTsgfVxyXG5cdFx0XHRzZXQgeyBZID0gdmFsdWU7IH1cclxuXHRcdH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBhZGRzIGNhbGMgdG8gKDEwMCUgLSA1MHB4KSB0dXJucyB0byBjYWxjKDEwMCUgLSA1MHB4KVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYVwiPjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPjwvcmV0dXJucz5cclxuICAgICAgICBpbnRlcm5hbCBzdGF0aWMgc3RyaW5nIHBmKHN0cmluZyBhKVxyXG4gICAgICAgIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuICFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGEpICYmIGEuU3RhcnRzV2l0aChcIihcIikgJiYgYS5FbmRzV2l0aChcIilcIikgPyBcImNhbGNcIiArIGEgOiBhOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgVmVjdG9yMihVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHgsIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4geSlcclxuXHRcdHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgWCA9IHg7XHJcblx0XHRcdFkgPSB5O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBzdHJ1Y3QgVmVjdG9yNFxyXG5cdHtcclxuXHRcdHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IFg7XHJcblx0XHRwdWJsaWMgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiBZO1xyXG5cdFx0cHVibGljIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gWjtcclxuXHRcdHB1YmxpYyBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IE07XHJcblx0XHRcclxuXHRcdHB1YmxpYyBWZWN0b3I0KFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4geCwgVW5pb248c3RyaW5nLCBpbnQsIGZsb2F0PiB5LCBVbmlvbjxzdHJpbmcsIGludCwgZmxvYXQ+IHosIFVuaW9uPHN0cmluZywgaW50LCBmbG9hdD4gbSlcclxuXHRcdHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgWCA9IHg7XHJcblx0XHRcdFkgPSB5O1xyXG5cdFx0XHRaID0gejtcclxuXHRcdFx0TSA9IG07XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIEFjZUNvZGVFZGl0b3IgOiBDb250cm9sXHJcblx0e1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgRXh0ZXJuYWxQbHVnaW4gRXh0ZXJuYWxBY2VDb2RlRWRpdG9yID0gbmV3IEV4dGVybmFsUGx1Z2luKFwiaHR0cHM6Ly9hY2UuYzkuaW8vYnVpbGQvc3JjL2FjZS5qc1wiKTtcclxuXHRcdHB1YmxpYyBvYmplY3QgZWRpdG9yID0gbnVsbDtcdFx0XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2xlYXJTZWxlY3Rpb24oKVxyXG5cdFx0e1xyXG5cdFx0XHRTY3JpcHQuQ2FsbChcInRoaXMuZWRpdG9yLmNsZWFyU2VsZWN0aW9uXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBib29sIFJlYWRPbmx5XHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIFNjcmlwdC5Xcml0ZTxib29sPihcInRoaXMuZWRpdG9yLmdldFJlYWRPbmx5KClcIik7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXQgeyBTY3JpcHQuQ2FsbChcInRoaXMuZWRpdG9yLnNldFJlYWRPbmx5XCIsIHZhbHVlKTsgfVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdHJpbmcgU291cmNlXHJcblx0XHR7XHJcblx0XHRcdGdldCB7XHJcblx0XHRcdFx0cmV0dXJuIFNjcmlwdC5Xcml0ZTxzdHJpbmc+KFwidGhpcy5lZGl0b3IuZ2V0VmFsdWUoKVwiKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZXQgeyBTY3JpcHQuQ2FsbChcInRoaXMuZWRpdG9yLnNldFZhbHVlXCIsIHZhbHVlKTsgfVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgU2V0dXAoKVxyXG5cdFx0e1xyXG5cdFx0XHRFeHRlcm5hbEFjZUNvZGVFZGl0b3IuU2V0dXAoKTtcclxuXHRcdH1cclxuXHRcdHByaXZhdGUgQWNlTW9kZVR5cGVzIF9tb2RlVHlwZTtcclxuXHRcdHByaXZhdGUgQWNlVGhlbWVUeXBlcyBfdGhlbWVUeXBlO1xyXG5cclxuXHRcdHB1YmxpYyBBY2VDb2RlRWRpdG9yKEFjZU1vZGVUeXBlcyBtb2RlVHlwZSA9IEFjZU1vZGVUeXBlcy5jc2hhcnAsIEFjZVRoZW1lVHlwZXMgdGhlbWVUeXBlID0gQWNlVGhlbWVUeXBlcy54Y29kZSlcclxuXHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0X21vZGVUeXBlID0gbW9kZVR5cGU7XHJcblx0XHRcdF90aGVtZVR5cGUgPSB0aGVtZVR5cGU7XHRcdFx0XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0XHRwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRFeHRlcm5hbEFjZUNvZGVFZGl0b3IuVXNhZ2VDaGVjaygpO1xyXG5cclxuXHRcdFx0dmFyIHRoZW1lID0gX21vZGVUeXBlLlRvU3RyaW5nKFwiR1wiKTtcclxuXHRcdFx0dmFyIG1vZGUgPSBfbW9kZVR5cGUuVG9TdHJpbmcoXCJHXCIpO1xyXG5cclxuXHRcdFx0LypAXHRcdFx0XHJcblx0XHRcdHRoaXMuZWRpdG9yID0gYWNlLmVkaXQodGhpcy5jb250ZW50KTtcclxuXHRcdFx0dGhpcy5lZGl0b3Iuc2V0VGhlbWUoXCJhY2UvdGhlbWUvXCIgKyB0aGVtZSk7XHJcblx0XHRcdHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKFwiYWNlL21vZGUvXCIgKyBtb2RlKTtcdFxyXG5cdFx0XHQqL1xyXG5cdFx0XHR0aGlzLk9uUmVzaXplID0gKGNvbnQpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHQvKkBcclxuXHRcdFx0XHR0aGlzLmVkaXRvci5yZXNpemUodHJ1ZSk7XHJcblx0XHRcdFx0Ki9cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMuQ29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZURvd24sIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRGb3JtLkluRXh0ZXJuYWxNb3VzZUV2ZW50ID0gdHJ1ZTtcclxuXHRcdFx0fSkpO1xyXG5cclxuXHRcdFx0dGhpcy5Db250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlVXAsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRGb3JtLkluRXh0ZXJuYWxNb3VzZUV2ZW50ID0gZmFsc2U7XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRcdGJhc2UuUmVuZGVyKCk7XHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZW51bSBBY2VUaGVtZVR5cGVzXHJcblx0e1xyXG5cdFx0bGFiZWwsIC8vIGJyaWdodFxyXG5cdFx0Y2hyb21lLCAvLyBjaHJvbWVcclxuXHRcdGNsb3VkcywgLy8gY2xvdWRzXHJcblx0XHRjcmltc29uX2VkaXRvciwgLy8gY3JpbXNvbl9lZGl0b3JcclxuXHRcdGRhd24sIC8vIGRhd25cclxuXHRcdGRyZWFtd2VhdmVyLCAvLyBkcmVhbXdlYXZlclxyXG5cdFx0ZWNsaXBzZSwgLy8gZWNsaXBzZVxyXG5cdFx0Z2l0aHViLCAvLyBnaXRodWJcclxuXHRcdHNvbGFyaXplZF9saWdodCwgLy8gc29sYXJpemVkX2xpZ2h0XHJcblx0XHR0ZXh0bWF0ZSwgLy8gdGV4dG1hdGVcclxuXHRcdHRvbW9ycm93LCAvLyB0b21vcnJvd1xyXG5cdFx0eGNvZGUsIC8vIHhjb2RlXHJcblx0XHRjbG91ZHNfbWlkbmlnaHQsIC8vIGNsb3Vkc19taWRuaWdodFxyXG5cdFx0Y29iYWx0LCAvLyBjb2JhbHRcclxuXHRcdGlkbGVfZmluZ2VycywgLy8gaWRsZV9maW5nZXJzXHJcblx0XHRrcl90aGVtZSwgLy8ga3JfdGhlbWVcclxuXHRcdG1lcmJpdm9yZSwgLy8gbWVyYml2b3JlXHJcblx0XHRtZXJiaXZvcmVfc29mdCwgLy8gbWVyYml2b3JlX3NvZnRcclxuXHRcdG1vbm9faW5kdXN0cmlhbCwgLy8gbW9ub19pbmR1c3RyaWFsXHJcblx0XHRtb25va2FpLCAvLyBtb25va2FpXHJcblx0XHRwYXN0ZWxfb25fZGFyaywgLy8gcGFzdGVsX29uX2RhcmtcclxuXHRcdHNvbGFyaXplZF9kYXJrLCAvLyBzb2xhcml6ZWRfZGFya1xyXG5cdFx0dGVybWluYWwsIC8vIHRlcm1pbmFsXHJcblx0XHR0b21vcnJvd19uaWdodCwgLy8gdG9tb3Jyb3dfbmlnaHRcclxuXHRcdHRvbW9ycm93X25pZ2h0X2JsdWUsIC8vIHRvbW9ycm93X25pZ2h0X2JsdWVcclxuXHRcdHRvbW9ycm93X25pZ2h0X2JyaWdodCwgLy8gdG9tb3Jyb3dfbmlnaHRfYnJpZ2h0XHJcblx0XHR0b21vcnJvd19uaWdodF9laWdodGllcywgLy8gdG9tb3Jyb3dfbmlnaHRfZWlnaHRpZXNcclxuXHRcdHR3aWxpZ2h0LCAvLyB0d2lsaWdodFxyXG5cdFx0dmlicmFudF9pbmsgLy8gdmlicmFudF9pbms8L29wdGlvbj48L29wdGdyb3VwPlxyXG5cdH1cclxuXHJcblx0cHVibGljIGVudW0gQWNlTW9kZVR5cGVzXHJcblx0e1xyXG5cdFx0YWJhcCwgLy8gQUJBUFxyXG5cdFx0YWJjLCAvLyBBQkNcclxuXHRcdGFjdGlvbnNjcmlwdCwgLy8gQWN0aW9uU2NyaXB0XHJcblx0XHRhZGEsIC8vIEFEQVxyXG5cdFx0YXBhY2hlX2NvbmYsIC8vIEFwYWNoZSwgLy8gQ29uZlxyXG5cdFx0YXNjaWlkb2MsIC8vIEFzY2lpRG9jXHJcblx0XHRhc3NlbWJseV94ODYsIC8vIEFzc2VtYmx5LCAvLyB4ODZcclxuXHRcdGF1dG9ob3RrZXksIC8vIEF1dG9Ib3RLZXlcclxuXHRcdGJhdGNoZmlsZSwgLy8gQmF0Y2hGaWxlXHJcblx0XHRicm8sIC8vIEJyb1xyXG5cdFx0Y19jcHAsIC8vIEMsIC8vIGFuZCwgLy8gQysrXHJcblx0XHRjOXNlYXJjaCwgLy8gQzlTZWFyY2hcclxuXHRcdGNpcnJ1LCAvLyBDaXJydVxyXG5cdFx0Y2xvanVyZSwgLy8gQ2xvanVyZVxyXG5cdFx0Y29ib2wsIC8vIENvYm9sXHJcblx0XHRjb2ZmZWUsIC8vIENvZmZlZVNjcmlwdFxyXG5cdFx0Y29sZGZ1c2lvbiwgLy8gQ29sZEZ1c2lvblxyXG5cdFx0Y3NoYXJwLCAvLyBDI1xyXG5cdFx0Y3NzLCAvLyBDU1NcclxuXHRcdGN1cmx5LCAvLyBDdXJseVxyXG5cdFx0ZCwgLy8gRFxyXG5cdFx0ZGFydCwgLy8gRGFydFxyXG5cdFx0ZGlmZiwgLy8gRGlmZlxyXG5cdFx0ZG9ja2VyZmlsZSwgLy8gRG9ja2VyZmlsZVxyXG5cdFx0ZG90LCAvLyBEb3RcclxuXHRcdGRyb29scywgLy8gRHJvb2xzXHJcblx0XHRkdW1teSwgLy8gRHVtbXlcclxuXHRcdGR1bW15c3ludGF4LCAvLyBEdW1teVN5bnRheFxyXG5cdFx0ZWlmZmVsLCAvLyBFaWZmZWxcclxuXHRcdGVqcywgLy8gRUpTXHJcblx0XHRlbGl4aXIsIC8vIEVsaXhpclxyXG5cdFx0ZWxtLCAvLyBFbG1cclxuXHRcdGVybGFuZywgLy8gRXJsYW5nXHJcblx0XHRmb3J0aCwgLy8gRm9ydGhcclxuXHRcdGZvcnRyYW4sIC8vIEZvcnRyYW5cclxuXHRcdGZ0bCwgLy8gRnJlZU1hcmtlclxyXG5cdFx0Z2NvZGUsIC8vIEdjb2RlXHJcblx0XHRnaGVya2luLCAvLyBHaGVya2luXHJcblx0XHRnaXRpZ25vcmUsIC8vIEdpdGlnbm9yZVxyXG5cdFx0Z2xzbCwgLy8gR2xzbFxyXG5cdFx0Z29ic3RvbmVzLCAvLyBHb2JzdG9uZXNcclxuXHRcdGdvbGFuZywgLy8gR29cclxuXHRcdGdyb292eSwgLy8gR3Jvb3Z5XHJcblx0XHRoYW1sLCAvLyBIQU1MXHJcblx0XHRoYW5kbGViYXJzLCAvLyBIYW5kbGViYXJzXHJcblx0XHRoYXNrZWxsLCAvLyBIYXNrZWxsXHJcblx0XHRoYXNrZWxsX2NhYmFsLCAvLyBIYXNrZWxsLCAvLyBDYWJhbFxyXG5cdFx0aGF4ZSwgLy8gaGFYZVxyXG5cdFx0aGpzb24sIC8vIEhqc29uXHJcblx0XHRodG1sLCAvLyBIVE1MXHJcblx0XHRodG1sX2VsaXhpciwgLy8gSFRNTCwgLy8gKEVsaXhpcilcclxuXHRcdGh0bWxfcnVieSwgLy8gSFRNTCwgLy8gKFJ1YnkpXHJcblx0XHRpbmksIC8vIElOSVxyXG5cdFx0aW8sIC8vIElvXHJcblx0XHRqYWNrLCAvLyBKYWNrXHJcblx0XHRqYWRlLCAvLyBKYWRlXHJcblx0XHRqYXZhLCAvLyBKYXZhXHJcblx0XHRqYXZhc2NyaXB0LCAvLyBKYXZhU2NyaXB0XHJcblx0XHRqc29uLCAvLyBKU09OXHJcblx0XHRqc29uaXEsIC8vIEpTT05pcVxyXG5cdFx0anNwLCAvLyBKU1BcclxuXHRcdGpzeCwgLy8gSlNYXHJcblx0XHRqdWxpYSwgLy8gSnVsaWFcclxuXHRcdGtvdGxpbiwgLy8gS290bGluXHJcblx0XHRsYXRleCwgLy8gTGFUZVhcclxuXHRcdGxlc3MsIC8vIExFU1NcclxuXHRcdGxpcXVpZCwgLy8gTGlxdWlkXHJcblx0XHRsaXNwLCAvLyBMaXNwXHJcblx0XHRsaXZlc2NyaXB0LCAvLyBMaXZlU2NyaXB0XHJcblx0XHRsb2dpcWwsIC8vIExvZ2lRTFxyXG5cdFx0bHNsLCAvLyBMU0xcclxuXHRcdGx1YSwgLy8gTHVhXHJcblx0XHRsdWFwYWdlLCAvLyBMdWFQYWdlXHJcblx0XHRsdWNlbmUsIC8vIEx1Y2VuZVxyXG5cdFx0bWFrZWZpbGUsIC8vIE1ha2VmaWxlXHJcblx0XHRtYXJrZG93biwgLy8gTWFya2Rvd25cclxuXHRcdG1hc2ssIC8vIE1hc2tcclxuXHRcdG1hdGxhYiwgLy8gTUFUTEFCXHJcblx0XHRtYXplLCAvLyBNYXplXHJcblx0XHRtZWwsIC8vIE1FTFxyXG5cdFx0bXVzaGNvZGUsIC8vIE1VU0hDb2RlXHJcblx0XHRteXNxbCwgLy8gTXlTUUxcclxuXHRcdG5peCwgLy8gTml4XHJcblx0XHRuc2lzLCAvLyBOU0lTXHJcblx0XHRvYmplY3RpdmVjLCAvLyBPYmplY3RpdmUtQ1xyXG5cdFx0b2NhbWwsIC8vIE9DYW1sXHJcblx0XHRwYXNjYWwsIC8vIFBhc2NhbFxyXG5cdFx0cGVybCwgLy8gUGVybFxyXG5cdFx0cGdzcWwsIC8vIHBnU1FMXHJcblx0XHRwaHAsIC8vIFBIUFxyXG5cdFx0cG93ZXJzaGVsbCwgLy8gUG93ZXJzaGVsbFxyXG5cdFx0cHJhYXQsIC8vIFByYWF0XHJcblx0XHRwcm9sb2csIC8vIFByb2xvZ1xyXG5cdFx0cHJvcGVydGllcywgLy8gUHJvcGVydGllc1xyXG5cdFx0cHJvdG9idWYsIC8vIFByb3RvYnVmXHJcblx0XHRweXRob24sIC8vIFB5dGhvblxyXG5cdFx0ciwgLy8gUlxyXG5cdFx0cmF6b3IsIC8vIFJhem9yXHJcblx0XHRyZG9jLCAvLyBSRG9jXHJcblx0XHRyaHRtbCwgLy8gUkhUTUxcclxuXHRcdHJzdCwgLy8gUlNUXHJcblx0XHRydWJ5LCAvLyBSdWJ5XHJcblx0XHRydXN0LCAvLyBSdXN0XHJcblx0XHRzYXNzLCAvLyBTQVNTXHJcblx0XHRzY2FkLCAvLyBTQ0FEXHJcblx0XHRzY2FsYSwgLy8gU2NhbGFcclxuXHRcdHNjaGVtZSwgLy8gU2NoZW1lXHJcblx0XHRzY3NzLCAvLyBTQ1NTXHJcblx0XHRzaCwgLy8gU0hcclxuXHRcdHNqcywgLy8gU0pTXHJcblx0XHRzbWFydHksIC8vIFNtYXJ0eVxyXG5cdFx0c25pcHBldHMsIC8vIHNuaXBwZXRzXHJcblx0XHRzb3lfdGVtcGxhdGUsIC8vIFNveSwgLy8gVGVtcGxhdGVcclxuXHRcdHNwYWNlLCAvLyBTcGFjZVxyXG5cdFx0c3FsLCAvLyBTUUxcclxuXHRcdHNxbHNlcnZlciwgLy8gU1FMU2VydmVyXHJcblx0XHRzdHlsdXMsIC8vIFN0eWx1c1xyXG5cdFx0c3ZnLCAvLyBTVkdcclxuXHRcdHN3aWZ0LCAvLyBTd2lmdFxyXG5cdFx0dGNsLCAvLyBUY2xcclxuXHRcdHRleCwgLy8gVGV4XHJcblx0XHR0ZXh0LCAvLyBUZXh0XHJcblx0XHR0ZXh0aWxlLCAvLyBUZXh0aWxlXHJcblx0XHR0b21sLCAvLyBUb21sXHJcblx0XHR0c3gsIC8vIFRTWFxyXG5cdFx0dHdpZywgLy8gVHdpZ1xyXG5cdFx0dHlwZXNjcmlwdCwgLy8gVHlwZXNjcmlwdFxyXG5cdFx0dmFsYSwgLy8gVmFsYVxyXG5cdFx0dmJzY3JpcHQsIC8vIFZCU2NyaXB0XHJcblx0XHR2ZWxvY2l0eSwgLy8gVmVsb2NpdHlcclxuXHRcdHZlcmlsb2csIC8vIFZlcmlsb2dcclxuXHRcdHZoZGwsIC8vIFZIRExcclxuXHRcdHdvbGxvaywgLy8gV29sbG9rXHJcblx0XHR4bWwsIC8vIFhNTFxyXG5cdFx0eHF1ZXJ5LCAvLyBYUXVlcnlcclxuXHRcdHlhbWwsIC8vIFlBTUxcclxuXHRcdGRqYW5nbyAvLyBEamFuZ29cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cclxuXHRwdWJsaWMgY2xhc3MgRm9ybSA6IENvbnRyb2xcclxuXHR7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MRGl2RWxlbWVudCBXaW5kb3dIb2xkZXI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PEZvcm0+IE1pbmltaXplZEZvcm1zID0gbmV3IExpc3Q8Rm9ybT4oKTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEhUTUxEaXZFbGVtZW50IFdpbmRvd0xvYWRlcjtcclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBUb29sVGlwIF9hY3RpdmVUb29sVGlwO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgaW50IF90b29sVGlwVGltZXJIYW5kbGUgPSAtMTtcclxuXHRcdHByaXZhdGUgc3RhdGljIEFjdGlvbjxNb3VzZUV2ZW50PiBfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZTtcclxuXHRcdHByaXZhdGUgc3RhdGljIFRvb2xUaXBDb250cm9sIF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG51bGw7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBpbnQgX29lcG50b29sVGlwVGltZXJIYW5kbGUgPSAtMTtcclxuXHRcdHB1YmxpYyBzdGF0aWMgVG9vbFRpcCBBY3RpdmVUb29sVGlwXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBfYWN0aXZlVG9vbFRpcDsgfVxyXG5cdFx0XHRzZXQge1xyXG5cdFx0XHRcdGlmKF9hY3RpdmVUb29sVGlwICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKHZhbHVlICE9IG51bGwgJiYgdmFsdWUuQXR0YWNoZWRDb250cm9sICE9IG51bGwgJiYgdmFsdWUuQXR0YWNoZWRDb250cm9sLkNvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoX2FjdGl2ZVRvb2xUaXBNb3VzZU1vdmUgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHZhbHVlLkF0dGFjaGVkQ29udHJvbC5Db250ZW50LlJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTW92ZSwgX2FjdGl2ZVRvb2xUaXBNb3VzZU1vdmUpO1xyXG5cdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoX2FjdGl2ZVRvb2xUaXBDb250cm9sICE9IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwQ29udHJvbC5DbG9zZSgpO1xyXG5cdFx0XHRcdFx0XHRfYWN0aXZlVG9vbFRpcENvbnRyb2wgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoX3Rvb2xUaXBUaW1lckhhbmRsZSA+IC0xKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRHbG9iYWwuQ2xlYXJUaW1lb3V0KF90b29sVGlwVGltZXJIYW5kbGUpO1xyXG5cdFx0XHRcdFx0XHRfdG9vbFRpcFRpbWVySGFuZGxlID0gLTE7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0X2FjdGl2ZVRvb2xUaXAgPSB2YWx1ZTtcclxuXHJcblxyXG5cdFx0XHRcdFx0aW50IG1lc3NhZ2VMZW5ndGg7XHJcblx0XHRcdFx0XHRpZihfYWN0aXZlVG9vbFRpcCAhPSBudWxsICYmIChtZXNzYWdlTGVuZ3RoID0gX2FjdGl2ZVRvb2xUaXAuR2V0V29yZENvdW50KCkpID4gMCAmJiBfYWN0aXZlVG9vbFRpcC5BdHRhY2hlZENvbnRyb2wgIT0gbnVsbClcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gKGV2KSA9PlxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aWYoX3Rvb2xUaXBUaW1lckhhbmRsZSA+IC0xKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdEdsb2JhbC5DbGVhclRpbWVvdXQoX3Rvb2xUaXBUaW1lckhhbmRsZSk7XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRfdG9vbFRpcFRpbWVySGFuZGxlID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRpZihfYWN0aXZlVG9vbFRpcENvbnRyb2wgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0X2FjdGl2ZVRvb2xUaXBDb250cm9sLkNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRpZihfb2VwbnRvb2xUaXBUaW1lckhhbmRsZSA+IC0xKVxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRHbG9iYWwuQ2xlYXJUaW1lb3V0KF9vZXBudG9vbFRpcFRpbWVySGFuZGxlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0X29lcG50b29sVGlwVGltZXJIYW5kbGUgPSAtMTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG5ldyBUb29sVGlwQ29udHJvbChfYWN0aXZlVG9vbFRpcCk7XHJcblx0XHRcdFx0XHRcdFx0XHRfYWN0aXZlVG9vbFRpcENvbnRyb2wuU2hvdyhldik7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0X29lcG50b29sVGlwVGltZXJIYW5kbGUgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG5cdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZihfYWN0aXZlVG9vbFRpcENvbnRyb2wgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwQ29udHJvbC5DbG9zZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwQ29udHJvbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pLCBNYXRoLk1heCgxMDAwLCBtZXNzYWdlTGVuZ3RoICogTWF0aC5NYXgoU2V0dGluZ3MuVG9vbFRpcFBvcHVwU3RheU9wZW5EZWxheVBlcldvcmRNcywgMTApKSk7XHRcdFx0XHRcdFx0XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoX2FjdGl2ZVRvb2xUaXBNb3VzZU1vdmUgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUuQXR0YWNoZWRDb250cm9sLkNvbnRlbnQuUmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VNb3ZlLCBfYWN0aXZlVG9vbFRpcE1vdXNlTW92ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KSwgTWF0aC5NYXgoMSwgU2V0dGluZ3MuVG9vbFRpcFBvcHVwRGVsYXlNcykpO1xyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHR2YWx1ZS5BdHRhY2hlZENvbnRyb2wuQ29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZU1vdmUsIF9hY3RpdmVUb29sVGlwTW91c2VNb3ZlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIGJvb2wgSW5EZXNpZ24gPSBmYWxzZTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBSZXNpemVDb3JuZXJzID0gMjtcclxuXHRcdHB1YmxpYyBzdGF0aWMgRm9ybSBNb3ZpbmdGb3JtID0gbnVsbDtcclxuXHRcdHB1YmxpYyBzdGF0aWMgSFRNTEVsZW1lbnQgUGFyZW50ID0gbnVsbDtcclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBNb3VzZV9Eb3duID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE1lbnVPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBIVE1MRWxlbWVudCBGb3JtT3ZlckxheTtcdFx0XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgSFRNTFN0eWxlRWxlbWVudCBXaW5kb3dDdXJzb3JNYW5hZ2VyID0gbnVsbDtcclxuXHRcdHByaXZhdGUgc3RhdGljIGJvb2wgX2hhc1NldHVwID0gZmFsc2U7XHJcblxyXG5cdFx0cHVibGljIGJvb2wgSGFzU2V0dXAgeyBnZXQgeyByZXR1cm4gX2hhc1NldHVwOyB9IH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFByZXZpb3VzU2l6ZUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFByZXZpb3VzTW92ZUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFByZXZpb3VzU2hvd01heCA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBib29sIFByZXZpb3VzU2hvd01pbiA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgUHJldmlvdXNPcGFjaXR5ID0gXCJcIjtcclxuICAgICAgICBwcm90ZWN0ZWQgYm9vbCBIYXNSZW1vdmVkUGxhY2VIb2xkZXI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFsbG93U2l6ZUNoYW5nZSA9IHRydWU7XHJcblx0XHRwdWJsaWMgYm9vbCBBbGxvd01vdmVDaGFuZ2UgPSB0cnVlO1xyXG5cclxuXHRcdHB1YmxpYyBIVE1MQ29sbGVjdGlvbiBDb250cm9scyB7Z2V0e3JldHVybiBCb2R5LkNoaWxkcmVuO319XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBib29sIEluRXh0ZXJuYWxNb3VzZUV2ZW50ID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdHB1YmxpYyBib29sIFNob3dNaW5pbWl6ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gQnV0dG9uTWluaW1pemUgIT0gbnVsbDsgfVxyXG5cdFx0XHRzZXQge1xyXG5cdFx0XHRcdENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuTWluaW1pemUsIHZhbHVlKTtcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgQ1NTU3R5bGVEZWNsYXJhdGlvbiBCb2R5U3R5bGUge2dldHtyZXR1cm4gQm9keS5TdHlsZTt9fVxyXG5cclxuXHRcdHB1YmxpYyBib29sIFNob3dDbG9zZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gQnV0dG9uQ2xvc2UgIT0gbnVsbDsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuQ2xvc2UsIHZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBib29sIFNob3dNYXhpbWl6ZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gQnV0dG9uRXhwYW5kICE9IG51bGw7IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRDaGFuZ2VIZWFkaW5nQnV0dG9uKEZvcm1CdXR0b25UeXBlLk1heGltaXplLCB2YWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgU2hvd01lbnVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBCdXR0b25NZW51ICE9IG51bGw7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuTWVudSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBGb3JSZXVzZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3RhdGljIGJvb2wgSW5FcnJvckRpYWxvZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgalF1ZXJ5IFNlbGY7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBib29sIF9Jc0RpYWxvZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0RpYWxvZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX0lzRGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwcml2YXRlIExpc3Q8Q29udHJvbD4gQ2hpbGRyZW4gPSBuZXcgTGlzdDxDb250cm9sPigpO1xyXG5cclxuXHRcdHB1YmxpYyB2b2lkIExpbmtjaGlsZFRvRm9ybShDb250cm9sIGNoaWxkKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihjaGlsZCA9PSBudWxsKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0Q2hpbGRyZW4uQWRkKGNoaWxkKTtcclxuXHRcdFx0Y2hpbGQuTGlua2VkRm9ybSA9IHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgTGlua2NoaWxkcmVuVG9Gb3JtKHBhcmFtcyBDb250cm9sW10gY2hpbGRyZW4pXHJcblx0XHR7XHJcblx0XHRcdGlmKGNoaWxkcmVuID09IG51bGwgfHwgY2hpbGRyZW4uTGVuZ3RoID09IDApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRDaGlsZHJlbi5BZGRSYW5nZShjaGlsZHJlbik7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBjaGlsZHJlbi5MZW5ndGg7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNoaWxkcmVuW2ldLkxpbmtlZEZvcm0gPSB0aGlzO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIEZvcm0gQXBwZW5kQ2hpbGQoQ29udHJvbCBub2RlKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLkJvZHkuQXBwZW5kQ2hpbGQobm9kZSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgRm9ybSBBcHBlbmRDaGlsZHJlbihwYXJhbXMgQ29udHJvbFtdIG5vZGUpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuQm9keS5BcHBlbmRDaGlsZHJlbihub2RlKTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBGb3JtIEFwcGVuZENoaWxkKEhUTUxFbGVtZW50IG5vZGUpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuQm9keS5BcHBlbmRDaGlsZChub2RlKTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBGb3JtIEFwcGVuZENoaWxkcmVuKHBhcmFtcyBIVE1MRWxlbWVudFtdIG5vZGUpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuQm9keS5BcHBlbmRDaGlsZHJlbihub2RlKTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCBzdGF0aWMgRm9ybUNvbGxlY3Rpb24gc3RhbmRBbG9uZUZvcm1zID0gbmV3IEZvcm1Db2xsZWN0aW9uKG51bGwpO1xyXG5cdFx0cHVibGljIHN0YXRpYyBMaXN0PEZvcm1Db2xsZWN0aW9uPiBGb3JtQ29sbGVjdGlvbnMgPSBuZXcgTGlzdDxGb3JtQ29sbGVjdGlvbj4oKTsgICAgICAgIFxyXG5cclxuXHRcdHB1YmxpYyBGb3JtU3RhcnRQb3NpdGlvbiBTdGFydFBvc2l0aW9uID0gRm9ybVN0YXJ0UG9zaXRpb24uV2luZG93c0RlZmF1bHRMb2NhdGlvbjtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgU2hvd0JvZHlPdmVyTGF5ID0gZmFsc2U7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBpbnQgV2luZG93X0RlZmF1bHRIZWlnaHQgPSA0ODA7XHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBXaW5kb3dfRGVmYXVsdFdpZHRoID0gNjQwO1xyXG5cclxuXHRcdHByaXZhdGUgc3RhdGljIEZvcm0gX0FjdGl2ZUZvcm07XHJcblx0XHRwcml2YXRlIHN0YXRpYyBGb3JtIF9QcmV2QWN0aXZlRm9ybTtcclxuXHRcdHByaXZhdGUgc3RhdGljIE1vdXNlTW92ZUFjdGlvbiBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk1vdmU7XHJcbiAgICAgICAgXHJcblx0XHRwdWJsaWMgYm9vbCBUb3BNb3N0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEaWFsb2dSZXN1bHRFbnVtIERpYWxvZ1Jlc3VsdCA9IERpYWxvZ1Jlc3VsdEVudW0uTm9uZTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3hYO1xyXG5cdFx0cHVibGljIHN0YXRpYyBpbnQgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94WTtcclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGludCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3hYT2ZmO1xyXG5cdFx0cHVibGljIHN0YXRpYyBpbnQgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94WU9mZjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEhlYWRpbmc7XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEJ1dHRvbkNsb3NlO1xyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MRGl2RWxlbWVudCBCdXR0b25FeHBhbmQ7XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEJ1dHRvbk1pbmltaXplO1xyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MRGl2RWxlbWVudCBCdXR0b25NZW51O1xyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MU3BhbkVsZW1lbnQgSGVhZGluZ1RpdGxlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgQm9keTtcclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgQm9keU92ZXJMYXk7XHJcblxyXG5cdFx0cHVibGljIGZsb2F0IHByZXZfcHg7XHJcblx0XHRwdWJsaWMgZmxvYXQgcHJldl9weTtcclxuXHJcblx0XHRwcml2YXRlIGludCBwcmV2X3dpZHRoO1xyXG5cdFx0cHJpdmF0ZSBpbnQgcHJldl9oZWlnaHQ7XHJcblxyXG5cdFx0cHJpdmF0ZSBpbnQgcHJldl90b3A7XHJcblx0XHRwcml2YXRlIGludCBwcmV2X2xlZnQ7XHJcblxyXG5cdFx0cHVibGljIGludCBNaW5XaWR0aCA9IDIwMDtcclxuXHRcdHB1YmxpYyBpbnQgTWluSGVpZ2h0ID0gNTA7ICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBSZXNpemVDaGlsZHJlbihIVE1MRWxlbWVudCBwYXJlbnQpXHJcblx0XHR7XHJcblx0XHRcdGlmKE9uUmVzaXplICE9IG51bGwpXHJcblx0XHRcdFx0T25SZXNpemUodGhpcyk7XHJcblx0XHRcdE9uUmVzaXppbmcoKTtcclxuXHJcblx0XHRcdGZvcihpbnQgeCA9IDA7IHggPCBwYXJlbnQuQ2hpbGRyZW4uTGVuZ3RoOyB4KyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighcGFyZW50LkNoaWxkcmVuW3hdLkNsYXNzTGlzdC5Db250YWlucyhcImNvbnRyb2xcIikpXHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgQ2hpbGRyZW4uQ291bnQ7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihDaGlsZHJlbltpXSAhPSBudWxsICYmIENoaWxkcmVuW2ldLk9uUmVzaXplICE9IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmKENoaWxkcmVuW2ldLkNvbnRlbnQgPT0gcGFyZW50LkNoaWxkcmVuW3hdKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Q2hpbGRyZW5baV0uT25SZXNpemUoQ2hpbGRyZW5baV0pO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFJlc2l6ZUNoaWxkcmVuKHBhcmVudC5DaGlsZHJlblt4XSk7XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBSZXNpemluZygpXHJcblx0XHR7XHJcblx0XHRcdGlmKE9uUmVzaXplICE9IG51bGwpXHJcblx0XHRcdFx0T25SZXNpemUodGhpcyk7XHJcblx0XHRcdE9uUmVzaXppbmcoKTtcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBDaGlsZHJlbi5Db3VudDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoQ2hpbGRyZW5baV0gIT0gbnVsbCAmJiBDaGlsZHJlbltpXS5PblJlc2l6ZSAhPSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdENoaWxkcmVuW2ldLk9uUmVzaXplKENoaWxkcmVuW2ldKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uUmVzaXppbmcoKVxyXG5cdFx0e1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHJpdmF0ZSBXaW5kb3dTdGF0ZVR5cGUgd2luZG93U3RhdGU7XHJcbiAgICAgICAgcHJpdmF0ZSBXaW5kb3dTdGF0ZVR5cGUgX3ByZXZ3aW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5Ob3JtYWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXaW5kb3dTdGF0ZVR5cGUgV2luZG93U3RhdGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIHdpbmRvd1N0YXRlOyB9XHJcblx0XHRcdHNldCB7IFNldFdpbmRvd1N0YXRlKHZhbHVlKTsgfVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIGJvb2wgTWlkbGVPZkFjdGlvbigpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiAgTW92aW5nRm9ybSAhPSBudWxsOyAvLyBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbCB8fFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBib29sIElzQ29udGVudFZpc2libGUoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gQ29udGVudCAhPSBudWxsICYmIENvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eS5FcXVhbHMoVmlzaWJpbGl0eS5WaXNpYmxlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIHZvaWQgQ2hhbmdlSGVhZGluZ0J1dHRvbihGb3JtQnV0dG9uVHlwZSBidXR0b24sIGJvb2wgdmlzaWJsZSA9IHRydWUpXHJcblx0XHR7ICAgICAgICAgICAgXHJcblx0XHRcdHN3aXRjaChidXR0b24pXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjYXNlIEZvcm1CdXR0b25UeXBlLk1pbmltaXplOlxyXG5cdFx0XHRcdFx0aWYoQnV0dG9uTWluaW1pemUgIT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0QnV0dG9uTWluaW1pemUuRGVsZXRlKCk7XHJcblx0XHRcdFx0XHRcdEJ1dHRvbk1pbmltaXplID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmKHZpc2libGUpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdEJ1dHRvbk1pbmltaXplID0gQ3JlYXRlRm9ybUJ1dHRvbihidXR0b24pOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgRm9ybUJ1dHRvblR5cGUuTWF4aW1pemU6XHJcblx0XHRcdFx0XHRpZihCdXR0b25FeHBhbmQgIT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0QnV0dG9uRXhwYW5kLkRlbGV0ZSgpO1xyXG5cdFx0XHRcdFx0XHRCdXR0b25FeHBhbmQgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYodmlzaWJsZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0QnV0dG9uRXhwYW5kID0gQ3JlYXRlRm9ybUJ1dHRvbihidXR0b24pOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBGb3JtQnV0dG9uVHlwZS5DbG9zZTpcclxuXHRcdFx0XHRcdGlmKEJ1dHRvbkNsb3NlICE9IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbkNsb3NlLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25DbG9zZSA9IG51bGw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZih2aXNpYmxlKVxyXG5cdFx0XHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25DbG9zZSA9IENyZWF0ZUZvcm1CdXR0b24oYnV0dG9uKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGb3JtQnV0dG9uVHlwZS5NZW51OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKEJ1dHRvbk1lbnUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbk1lbnUuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbk1lbnUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih2aXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uTWVudSA9IENyZWF0ZUZvcm1CdXR0b24oYnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgIENhbGN1bGF0ZUJ1dHRvbkxvY2F0aW9ucygpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBJbml0aWFsaXNlKClcclxuXHRcdHtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPblNob3dpbmcoKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uU2hvd2VkKClcclxuXHRcdHtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkNsb3NpbmcoKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkNsb3NlZCgpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHRcdFxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEZvcm1Db2xsZWN0aW9uIEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBGb3JtQ29sbGVjdGlvbnMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZybUNvbCA9IEZvcm1Db2xsZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChmcm1Db2wuRm9ybU93bmVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgeCA9IDA7IHggPCBmcm1Db2wuVmlzaWJsZUZvcm1zLkNvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJtQ29sLlZpc2libGVGb3Jtc1t4XSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm1Db2wuVmlzaWJsZUZvcm1zW3hdLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgRm9ybUNvbGxlY3Rpb25zLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJtQ29sO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNldEJvZHlPdmVyTGF5KClcclxuXHRcdHtcclxuICAgICAgICAgICAgdmFyIEFjdGl2ZUNvbGxlY3Rpb24gPSBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoQWN0aXZlQ29sbGVjdGlvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgQWN0aXZlQ29sbGVjdGlvbi5Gb3JtT3duZXIuU2hvd0JvZHlPdmVyTGF5U3R5bGUoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBWaXNpYmxlRm9ybXMgPSBBY3RpdmVDb2xsZWN0aW9uLlZpc2libGVGb3JtczsgICAgICAgICAgICBcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBWaXNpYmxlRm9ybXMuQ291bnQ7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBmb3JtID0gVmlzaWJsZUZvcm1zW2ldO1xyXG5cdFx0XHRcdGlmKGZvcm0gIT0gbnVsbClcclxuXHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5TaG93Qm9keU92ZXJMYXlTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93Qm9keU92ZXJMYXlTdHlsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQm9keU92ZXJMYXkgIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eS5FcXVhbHMoVmlzaWJpbGl0eS5Db2xsYXBzZSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihJbkRlc2lnbilcclxuXHRcdFx0XHR7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRCb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5WaXNpYmxlO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25Hb3RGb2N1cygpXHJcblx0XHR7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25Mb3N0Rm9jdXMoKVxyXG5cdFx0e1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIEZvcm0gQWN0aXZlRm9ybVxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gX0FjdGl2ZUZvcm07IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihfQWN0aXZlRm9ybSAhPSB2YWx1ZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfUHJldkFjdGl2ZUZvcm0gPSBfQWN0aXZlRm9ybTtcclxuXHJcblx0XHRcdFx0XHRpZihfQWN0aXZlRm9ybSAhPSBudWxsKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRfQWN0aXZlRm9ybS5Pbkxvc3RGb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRpZihfQWN0aXZlRm9ybS5Db250ZW50ICE9IG51bGwpXHJcblx0XHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmKF9BY3RpdmVGb3JtLkluRGVzaWduKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdF9BY3RpdmVGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRfQWN0aXZlRm9ybS5Cb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5WaXNpYmxlO1x0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdF9BY3RpdmVGb3JtID0gdmFsdWU7XHJcblx0XHRcdFx0XHRpZihfQWN0aXZlRm9ybSAhPSBudWxsKVxyXG5cdFx0XHRcdFx0eyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0XHRfQWN0aXZlRm9ybS5PbkdvdEZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdGlmKF9BY3RpdmVGb3JtLkNvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdF9BY3RpdmVGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1x0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0X0FjdGl2ZUZvcm0uQnJpbmdUb0Zyb250KCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdGlmKEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKCkgIT0gbnVsbCAmJiBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpLkZvcm1Pd25lciAhPSBudWxsICYmICBfQWN0aXZlRm9ybSA9PSBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpLkZvcm1Pd25lcilcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdENsZWFyWkluZGV4KCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0QXBwbHlaSW5kZXgoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9QcmV2QWN0aXZlRm9ybSBpcyBGb3JtUG9wdXAgJiYgKChfQWN0aXZlRm9ybSAhPSBudWxsICYmICEoX0FjdGl2ZUZvcm0gaXMgRm9ybVBvcHVwKSkgfHwgX0FjdGl2ZUZvcm0gPT0gbnVsbCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDbG9zZUZvcm1Qb3B1cHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRwdWJsaWMgc3RhdGljIHZvaWQgQ2hhbmdlU3RhdGVUZXh0U2VsZWN0aW9uKEhUTUxFbGVtZW50IGVsZW1lbnQsIGJvb2wgc3RhdGUpXHJcblx0XHR7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoZWxlbWVudCkuQ3NzKFwidXNlci1zZWxlY3RcIiwgc3RhdGUgPyBcInRleHRcIiA6IFwibm9uZVwiKTsgICAgICAgICAgICBcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFBlcmZvcm1Gb2N1c1NoYWtlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEFjdGl2ZUZvcm0gIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBBY3RpdmVGb3JtO1xyXG4gICAgICAgICAgICAgICAgZm9ybS5IZWFkaW5nLkNsYXNzTGlzdC5BZGQoXCJmb3JtLWhlYWRpbmctZmxhc2hcIik7XHJcbiAgICAgICAgICAgICAgICBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm0uSGVhZGluZy5DbGFzc0xpc3QuUmVtb3ZlKFwiZm9ybS1oZWFkaW5nLWZsYXNoXCIpO1xyXG4gICAgICAgICAgICAgICAgfSksIDgwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIERpc2FibGVTdGF0ZURyYWcoSFRNTEVsZW1lbnQgZWxlbWVudClcclxuXHRcdHtcclxuXHRcdFx0aWYoZWxlbWVudCBpcyBIVE1MSW1hZ2VFbGVtZW50KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZWxlbWVudC5BczxIVE1MSW1hZ2VFbGVtZW50PigpLk9uRHJhZ1N0YXJ0ID0gKGV2KSA9PlxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRqUXVlcnkuU2VsZWN0KGVsZW1lbnQpLkNzcyhcInVzZXItZHJhZzpcIiwgXCJub25lXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBTZXR1cEhpZGVFbGVtZW50c09uVmlldygpXHJcblx0XHR7XHJcblx0XHRcdFdpbmRvdy5PbkJsdXIgPSAoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGdsb2JhbDo6QnJpZGdlLkh0bWw1Lk5vZGU+KERvY3VtZW50LkJvZHkuQ2hpbGROb2RlcyxXaW5kb3dIb2xkZXIpKVxyXG5cdFx0XHRcdFx0RG9jdW1lbnQuQm9keS5SZW1vdmVDaGlsZChXaW5kb3dIb2xkZXIpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0V2luZG93Lk9uRm9jdXMgPSAoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxnbG9iYWw6OkJyaWRnZS5IdG1sNS5Ob2RlPihEb2N1bWVudC5Cb2R5LkNoaWxkTm9kZXMsV2luZG93SG9sZGVyKSlcclxuXHRcdFx0XHRcdERvY3VtZW50LkJvZHkuQXBwZW5kQ2hpbGQoV2luZG93SG9sZGVyKTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQ2xvc2VGb3JtUG9wdXBzKClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IHguVmlzaWJsZUZvcm1zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoeC5WaXNpYmxlRm9ybXNbaV0gIT0gbnVsbCAmJiB4LlZpc2libGVGb3Jtc1tpXSBpcyBGb3JtUG9wdXAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgeC5WaXNpYmxlRm9ybXNbaV0uSXNDb250ZW50VmlzaWJsZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeC5WaXNpYmxlRm9ybXNbaV0uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZih4LkZvcm1Pd25lciBpcyBGb3JtUG9wdXApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgeC5Gb3JtT3duZXIuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpbnQgTG9hZGluZ0NvdW50ID0gMDtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgQmVnaW5Mb2FkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvYWRpbmdDb3VudCsrO1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLk9wYWNpdHkgPSBcIjAuNFwiOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEVuZExvYWRpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTG9hZGluZ0NvdW50LS07XHJcbiAgICAgICAgICAgIGlmKExvYWRpbmdDb3VudCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgV2luZG93TG9hZGVyLlN0eWxlLk9wYWNpdHkgPSBcIjBcIjsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTZXR1cChIVE1MRWxlbWVudCBwYXJlbnQgPSBudWxsKVxyXG5cdFx0e1xyXG5cdFx0XHQvL1NldHRpbmdzLlNldHVwKCk7XHJcblx0XHRcdGlmKF9oYXNTZXR1cClcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdF9oYXNTZXR1cCA9IHRydWU7XHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocGFyZW50ID09IG51bGwpXHJcblx0XHRcdFx0UGFyZW50ID0gRG9jdW1lbnQuQm9keTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFBhcmVudCA9IHBhcmVudDtcclxuXHJcblx0XHRcdFdpbmRvd0N1cnNvck1hbmFnZXIgPSBuZXcgSFRNTFN0eWxlRWxlbWVudCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0V2luZG93SG9sZGVyID0gRGl2KFwiZm9ybS1jb250YWluZXJcIik7XHJcblxyXG4gICAgICAgICAgICBGb3JtT3ZlckxheSA9IERpdihcInN5c3RlbS1mb3JtLWNvbGxlY3Rpb24tb3ZlcmxheVwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlciA9IG5ldyBIVE1MRGl2RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuQ2xhc3NOYW1lID0gXCJhamF4LWxvYWRpbmctc2NyZWVuXCI7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5PcGFjaXR5ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TZXRCb3VuZHNGdWxsKCk7XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5TdHlsZS5Qb3NpdGlvbiA9IFBvc2l0aW9uLkZpeGVkO1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuWkluZGV4ID0gXCIxMDAwMDBcIjtcclxuICAgICAgICAgICAgV2luZG93TG9hZGVyLk9uQ29udGV4dE1lbnUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFdpbmRvd0xvYWRlci5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXaW5kb3dMb2FkZXIuU3R5bGUuVHJhbnNpdGlvbiA9IFwib3BhY2l0eSAxcyBlYXNlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBEb2N1bWVudC5Cb2R5LkFwcGVuZENoaWxkKFdpbmRvd0xvYWRlcik7XHJcblxyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5Pbk1vdXNlRG93biA9IChldikgPT5cclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgaWYoQWN0aXZlRm9ybSBpcyBGb3JtUG9wdXApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2xvc2VGb3JtUG9wdXBzKCk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihEb2N1bWVudC5BY3RpdmVFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Gb3JtUG9wdXBcclxuICAgICAgICAgICAgICAgICAgICBEb2N1bWVudC5BY3RpdmVFbGVtZW50LkZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5PbkNsaWNrID0gKGV2KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgUGVyZm9ybUZvY3VzU2hha2UoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgRm9ybU92ZXJMYXkuT25Db250ZXh0TWVudSA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5WaXNpYmxlO1xyXG5cclxuXHRcdFx0V2luZG93Lk9uS2V5VXAgPSAoZXYpID0+IHtcclxuXHRcdFx0XHRpZihTZXR0aW5ncy5PbkYyU2hvd1RoZW1lRm9ybSAmJiBldi5LZXlDb2RlID09IEtleUNvZGVzLkYyKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRUaGVtZUZvcm0uU2hvd1RoZW1lRm9ybSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuICAgICAgICAgICAgXHJcblx0XHRcdFdpbmRvdy5PblJlc2l6ZSA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoRm9ybUNvbGxlY3Rpb25zID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBGb3JtQ29sbGVjdGlvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihGb3JtQ29sbGVjdGlvbnNbaV0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZjID0gRm9ybUNvbGxlY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZjLkZvcm1Pd25lciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYy5Gb3JtT3duZXIuUmVzaXppbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgZmMuVmlzaWJsZUZvcm1zLkNvdW50OyB4KyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmYy5WaXNpYmxlRm9ybXNbeF0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjLlZpc2libGVGb3Jtc1t4XS5SZXNpemluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBDYWxjdWxhdGVNaW5taXplZEZvcm1zTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgfTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFdpbmRvdy5Pbk1vdXNlTW92ZSA9IChldikgPT5cclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgaWYoSW5FeHRlcm5hbE1vdXNlRXZlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtZXYgPSBldi5BczxNb3VzZUV2ZW50PigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkuRXF1YWxzKFZpc2liaWxpdHkuQ29sbGFwc2UpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybS5JbkRlc2lnbilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX0FjdGl2ZUZvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLkJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uSGVhZGluZy5Gb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vdXNlUG9zID0gSGVscGVyLkdldENsaWVudE1vdXNlTG9jYXRpb24oZXYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBtWDtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBtWTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ggPSAoKG1YID0gbW91c2VQb3MuWGYpICsgTW92aW5nRm9ybS5wcmV2X3B4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3WSA9ICgobVkgPSBtb3VzZVBvcy5ZZikgKyBNb3ZpbmdGb3JtLnByZXZfcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihNb3ZpbmdGb3JtLndpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uTW92ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uY2hhbmdlV2luZG93U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3WCA9IG1vdXNlUG9zLlhmIC0gKE1vdmluZ0Zvcm0ucHJldl93aWR0aCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLnByZXZfcHggPSBuZXdYIC0gbW91c2VQb3MuWGY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB4ID0gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KE1vdmluZ0Zvcm0uU3R5bGUuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgeSA9IChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdChNb3ZpbmdGb3JtLlN0eWxlLlRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgdyA9IChmbG9hdClHbG9iYWwuUGFyc2VGbG9hdChNb3ZpbmdGb3JtLlN0eWxlLldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBoID0gKGZsb2F0KUdsb2JhbC5QYXJzZUZsb2F0KE1vdmluZ0Zvcm0uU3R5bGUuSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgcHggPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHB5ID0geTtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBwdyA9IHc7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgcGggPSBoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdZIDwgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3WSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3WCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ggPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihtWCA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1YID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZihtWSA8IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ZID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKE1vdmVBY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Nb3ZlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG5ld1g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gbmV3WTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Ub3BMZWZ0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyAtPSBuZXdYIC0geDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggLT0gbmV3WSAtIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodyA8IE1vdmluZ0Zvcm0uTWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3WCAtPSBNb3ZpbmdGb3JtLk1pbldpZHRoIC0gdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gTW92aW5nRm9ybS5NaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGggPCBNb3ZpbmdGb3JtLk1pbkhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdZIC09IE1vdmluZ0Zvcm0uTWluSGVpZ2h0IC0gaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTW92aW5nRm9ybS5NaW5IZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gbmV3WDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBuZXdZO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Ub3BSZXNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoIC09IG5ld1kgLSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGggPCBNb3ZpbmdGb3JtLk1pbkhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdZIC09IE1vdmluZ0Zvcm0uTWluSGVpZ2h0IC0gaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTW92aW5nRm9ybS5NaW5IZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IG5ld1k7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW91c2VNb3ZlQWN0aW9uLlRvcFJpZ2h0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaCAtPSBuZXdZIC0geTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBtWCAtIHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaCA8IE1vdmluZ0Zvcm0uTWluSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1kgLT0gTW92aW5nRm9ybS5NaW5IZWlnaHQgLSBoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBNb3ZpbmdGb3JtLk1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHcgPCBNb3ZpbmdGb3JtLk1pbldpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNb3ZpbmdGb3JtLk1pbldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBuZXdZO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5MZWZ0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyAtPSBuZXdYIC0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih3IDwgTW92aW5nRm9ybS5NaW5XaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdYIC09IE1vdmluZ0Zvcm0uTWluV2lkdGggLSB3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNb3ZpbmdGb3JtLk1pbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBuZXdYO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21MZWZ0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyAtPSBuZXdYIC0geDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBtWSAtIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodyA8IE1vdmluZ0Zvcm0uTWluV2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3WCAtPSBNb3ZpbmdGb3JtLk1pbldpZHRoIC0gdztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gTW92aW5nRm9ybS5NaW5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihoIDwgTW92aW5nRm9ybS5NaW5IZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IE1vdmluZ0Zvcm0uTWluSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBuZXdYO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21SZXNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gbVkgLSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGggPCBNb3ZpbmdGb3JtLk1pbkhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTW92aW5nRm9ybS5NaW5IZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW91c2VNb3ZlQWN0aW9uLlJpZ2h0UmVzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IG1YIC0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih3IDwgTW92aW5nRm9ybS5NaW5XaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gTW92aW5nRm9ybS5NaW5XaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNb3VzZU1vdmVBY3Rpb24uQm90dG9tUmlnaHRSZXNpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gbVggLSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBtWSAtIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaCA8IE1vdmluZ0Zvcm0uTWluSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBNb3ZpbmdGb3JtLk1pbkhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHcgPCBNb3ZpbmdGb3JtLk1pbldpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBNb3ZpbmdGb3JtLk1pbldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBib29sIGNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihweCAhPSB4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLlN0eWxlLkxlZnQgPSBTY3JpcHQuV3JpdGU8c3RyaW5nPihcInggKyAncHgnXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHB5ICE9IHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uU3R5bGUuVG9wID0gU2NyaXB0LldyaXRlPHN0cmluZz4oXCJ5ICsgJ3B4J1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihwdyAhPSB3ICYmIChjaGFuZ2VkID0gdHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uU3R5bGUuV2lkdGggPSBTY3JpcHQuV3JpdGU8c3RyaW5nPihcIncgKyAncHgnXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBoICE9IGggJiYgKGNoYW5nZWQgPSB0cnVlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW92aW5nRm9ybS5TdHlsZS5IZWlnaHQgPSBTY3JpcHQuV3JpdGU8c3RyaW5nPihcImggKyAncHgnXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihjaGFuZ2VkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZpbmdGb3JtLlJlc2l6aW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBXaW5kb3cuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG5cdFx0XHR7XHJcbiAgICAgICAgICAgICAgICBJbkV4dGVybmFsTW91c2VFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIE1vdmluZ0Zvcm0uQm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgTW92aW5nRm9ybSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBNb3VzZV9Eb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk1vdmU7XHJcbiAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXaW5kb3cuT25CZWZvcmVVbmxvYWQgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuXHRcdFx0XHRpZighU2V0dGluZ3MuQWxsb3dDbG9zZVdpdGhvdXRRdWVzdGlvbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRTY3JpcHQuV3JpdGUoXCJyZXR1cm4gJ1dvdWxkIHlvdSBsaWtlIHRvIGNsb3NlIHRoaXMgYXBwbGljYXRpb24/J1wiKTtcclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFdpbmRvdy5PblVubG9hZCA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoU2V0dGluZ3MuT25BcHBsaWNhdGlvbkNsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3MuT25BcHBsaWNhdGlvbkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFdpbmRvdy5PbkVycm9yICs9IG5ldyBFcnJvckV2ZW50SGFuZGxlcigoc3RyaW5nIG1lc3NhZ2UsIHN0cmluZyB1cmwsIGludCBsaW5lTnVtYmVyLCBpbnQgY29sdW1uTnVtYmVyLCBvYmplY3QgZXJyb3IpID0+IHtcdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgaWYoSW5FcnJvckRpYWxvZylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuXHRcdFx0XHRcdEluRXJyb3JEaWFsb2cgPSB0cnVlO1xyXG5cdFx0XHRcdFx0c3RyaW5nIGVyclN0cjtcclxuXHRcdFx0XHRcdGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UobWVzc2FnZSkgfHwgbWVzc2FnZSA9PSBcIlNjcmlwdCBlcnJvci5cIilcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0ZXJyU3RyID0gXCJTY3JpcHQgRXJyb3I6IFNlZSBCcm93c2VyIENvbnNvbGUgZm9yIERldGFpbCdzXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVyclN0ciA9IFwiU2NyaXB0IEVycm9yOiBcIiArIG1lc3NhZ2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHJcblx0XHRcdFx0XHRpZihBcHBsaWNhdGlvbi5BcGxpY2F0aW9uRGVmaXRpb24gPT0gQXBwbGljYXRpb25EZWZpdG5pb24uRXhwcmVzc0NyYWZ0Q29uc29sZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Q29uc29sZUZvcm0uTG9nKGVyclN0ciwgQ29uc29sZUxvZ1R5cGUuRXJyb3IpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmKFNldHRpbmdzLlNob3dFeGNlcHRpb25EaWFsb2cpXHJcblx0XHRcdFx0XHR7XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBtc2dCb3ggPSBuZXcgTWVzc2FnZUJveEZvcm0oZXJyU3RyLCBNZXNzYWdlQm94TGF5b3V0LkVycm9yKTtcclxuXHRcdFx0XHRcdFx0bXNnQm94LlNob3dEaWFsb2coKTtcclxuXHRcdFx0XHRcdH1cdFx0XHRcdFx0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW5FcnJvckRpYWxvZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgV2luZG93SG9sZGVyLkFwcGVuZENoaWxkKEZvcm1PdmVyTGF5KTtcclxuXHJcblx0XHRcdFBhcmVudC5BcHBlbmRDaGlsZHJlbihXaW5kb3dIb2xkZXIsIFdpbmRvd0N1cnNvck1hbmFnZXIpO1xyXG5cdFx0fVx0XHRcclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBTZXRDdXJzb3IoQ3Vyc29yIGN1cnNvcilcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0V2luZG93Q3Vyc29yTWFuYWdlci5Jbm5lckhUTUwgPSBzdHJpbmcuRm9ybWF0KEBcIlxyXG5cdFx0XHRcdC5jb250cm9seyAgICBcclxuXHRcdFx0XHRcdGN1cnNvcjp7MH0gIWltcG9ydGFudDsgICAgXHJcblx0XHRcdFx0fVwiLCBjdXJzb3IpO1x0XHRcdFxyXG5cdFx0fVxyXG4gICAgICAgIFVuaW9uPHN0cmluZywgRGlzcGxheT4gcHJldmlvdXNEaXNwbGF5O1xyXG4gICAgICAgIFxyXG5cdFx0cHVibGljIHZvaWQgU2V0V2luZG93U3RhdGUoV2luZG93U3RhdGVUeXBlIFN0YXRlKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBpZihTdGF0ZSA9PSB3aW5kb3dTdGF0ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIF9wcmV2d2luZG93U3RhdGUgPSB3aW5kb3dTdGF0ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQm9keS5TdHlsZS5PcGFjaXR5ID0gUHJldmlvdXNPcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gUHJldmlvdXNTaXplQ2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgQWxsb3dNb3ZlQ2hhbmdlID0gUHJldmlvdXNNb3ZlQ2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgU2hvd01heGltaXplID0gUHJldmlvdXNTaG93TWF4O1xyXG4gICAgICAgICAgICAgICAgU2hvd01pbmltaXplID0gUHJldmlvdXNTaG93TWluO1xyXG4gICAgICAgICAgICAgICAgSGVhZGluZ1RpdGxlLlN0eWxlLkxlZnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgSGVhZGluZ1RpdGxlLlN0eWxlLk1hcmdpblJpZ2h0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmdUaXRsZS5TdHlsZS5UcmFuc2Zvcm0gPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoQnV0dG9uTWluaW1pemUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBCdXR0b25NaW5pbWl6ZS5Jbm5lckhUTUwgPSBcIi1cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEhlYWRpbmcuQ2xhc3NMaXN0LlJlbW92ZShcImZvcm0taGVhZGluZy1taW5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgTWluaW1pemVkRm9ybXMuUmVtb3ZlKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIEJvZHkuU3R5bGUuRGlzcGxheSA9IHByZXZpb3VzRGlzcGxheTtcclxuXHJcbiAgICAgICAgICAgICAgICBDYWxjdWxhdGVNaW5taXplZEZvcm1zTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoIUFsbG93U2l6ZUNoYW5nZSlcclxuXHRcdFx0XHRyZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZigod2luZG93U3RhdGUgPSBTdGF0ZSkgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRCb3VuZHMocHJldl9sZWZ0LCBwcmV2X3RvcCwgcHJldl93aWR0aCwgcHJldl9oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgUmVzaXppbmcoKTtcclxuICAgICAgICAgICAgICAgIFN0eWxlLkJvcmRlcldpZHRoID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHdpbmRvd1N0YXRlID09IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2xlZnQgPSBMZWZ0LlRvSW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldl90b3AgPSBUb3AuVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X3dpZHRoID0gV2lkdGguVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2hlaWdodCA9IEhlaWdodC5Ub0ludCgpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBTdHlsZS5Cb3JkZXJXaWR0aCA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLlNldEJvdW5kcygwLCAwLCBcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYod2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTaXplQ2hhbmdlID0gQWxsb3dTaXplQ2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNNb3ZlQ2hhbmdlID0gQWxsb3dNb3ZlQ2hhbmdlOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzT3BhY2l0eSA9IEJvZHkuU3R5bGUuT3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2hvd01heCA9IFNob3dNYXhpbWl6ZTtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2hvd01pbiA9IFNob3dNaW5pbWl6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEJvZHkuU3R5bGUuT3BhY2l0eSA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgU2hvd01heGltaXplID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBTaG93TWluaW1pemUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEFsbG93TW92ZUNoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKF9wcmV2d2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2xlZnQgPSBMZWZ0LlRvSW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldl90b3AgPSBUb3AuVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X3dpZHRoID0gV2lkdGguVG9JbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2X2hlaWdodCA9IEhlaWdodC5Ub0ludCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFN0eWxlLkJvcmRlcldpZHRoID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nVGl0bGUuU3R5bGUuTWFyZ2luUmlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmdUaXRsZS5TdHlsZS5MZWZ0ID0gXCIzcHhcIjsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nVGl0bGUuU3R5bGUuVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoMCwgLTUwJSlcIjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IChTaG93Q2xvc2UgPyA0NS41ZiA6IDApO1xyXG5cclxuICAgICAgICAgICAgICAgIFdpZHRoID0gKGZsb2F0KU1hdGguTWF4KEdldFRleHRXaWR0aChUZXh0LCBcIjEwcHQgVGFob21hXCIpICsgMzIsIDEwMCkgKyBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICBIZWlnaHQgPSAzMDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgSGVhZGluZy5DbGFzc0xpc3QuQWRkKFwiZm9ybS1oZWFkaW5nLW1pblwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoQnV0dG9uTWluaW1pemUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBCdXR0b25NaW5pbWl6ZS5Jbm5lckhUTUwgPSBcIitcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNEaXNwbGF5ID0gQm9keS5TdHlsZS5EaXNwbGF5O1xyXG4gICAgICAgICAgICAgICAgQm9keS5TdHlsZS5EaXNwbGF5ID0gRGlzcGxheS5Ob25lO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBNaW5pbWl6ZWRGb3Jtcy5BZGQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlc2l6aW5nKCk7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgQ2FsY3VsYXRlTWlubWl6ZWRGb3Jtc0xvY2F0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1pbmltaXplZEZvcm1zLlJlbW92ZShudWxsKTtcclxuICAgICAgICAgICAgdmFyIFJlbW92ZUxpc3QgPSBuZXcgTGlzdDxGb3JtPigpO1xyXG4gICAgICAgICAgICBpbnQgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBmbG9hdCB3aWR0aFRvdGFsID0gMDtcclxuICAgICAgICAgICAgaW50IHkgPSAzMDtcclxuXHJcbiAgICAgICAgICAgIHZhciB2aWV3U2l6ZSA9IFBhcmVudC5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGl0ZW0gaW4gTWluaW1pemVkRm9ybXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW0uQ29udGVudCA9PSBudWxsIHx8IGl0ZW0ud2luZG93U3RhdGUgIT0gV2luZG93U3RhdGVUeXBlLk1pbmltaXplZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBSZW1vdmVMaXN0LkFkZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgVG9JbmNyZW1lbnQgPSAzICsgaXRlbS5XaWR0aC5Ub0Zsb2F0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHdpZHRoVG90YWwgKyBUb0luY3JlbWVudCAgPiB2aWV3U2l6ZS5XaWR0aClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoVG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIod2lkdGhUb3RhbCwgXCIoMTAwJSAtIFwiICsgKHkgKyAyKSArIFwicHgpXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoVG90YWwgKz0gVG9JbmNyZW1lbnQ7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgaXRlbSBpbiBSZW1vdmVMaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNaW5pbWl6ZWRGb3Jtcy5SZW1vdmUoaXRlbSk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIC8vTGVmdCA9IDA7XHJcbiAgICAgICAgICAgIC8vVG9wID0gXCJjYWxjKDEwMCUgLSAzMHB4KVwiO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwcml2YXRlIHZvaWQgY2hhbmdlV2luZG93U3RhdGUoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZih3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0U2V0V2luZG93U3RhdGUoV2luZG93U3RhdGVUeXBlLk5vcm1hbCk7XHJcblx0XHRcdH1cclxuICAgICAgICAgICAgZWxzZSBpZih3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWluaW1pemVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTZXRXaW5kb3dTdGF0ZShfcHJldndpbmRvd1N0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRTZXRXaW5kb3dTdGF0ZShXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKTtcclxuXHRcdFx0fVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2FsY3VsYXRlQnV0dG9uTG9jYXRpb25zKClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZsb2F0IFJpZ2h0T2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgZmxvYXQgYXBwZW5kID0gNDUuNWY7XHJcblxyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXBwZW5kID0gNjUuNWY7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKFNob3dDbG9zZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnV0dG9uQ2xvc2UuU3R5bGUuTGVmdCA9IFwiY2FsYygxMDAlIC0gXCIgKyBhcHBlbmQgKyBcInB4KVwiOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBSaWdodE9mZnNldCArPSBhcHBlbmQ7XHJcbiAgICAgICAgICAgICAgICBpZighU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db250YWluczxnbG9iYWw6OkJyaWRnZS5IdG1sNS5IVE1MRWxlbWVudD4oSGVhZGluZy5DaGlsZHJlbixCdXR0b25DbG9zZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgSGVhZGluZy5BcHBlbmRDaGlsZChCdXR0b25DbG9zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKFNob3dNYXhpbWl6ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmlnaHRPZmZzZXQgKz0gYXBwZW5kO1xyXG4gICAgICAgICAgICAgICAgQnV0dG9uRXhwYW5kLlN0eWxlLkxlZnQgPSBcImNhbGMoMTAwJSAtIFwiICsgUmlnaHRPZmZzZXQgKyBcInB4KVwiO1xyXG4gICAgICAgICAgICAgICAgaWYoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuSFRNTEVsZW1lbnQ+KEhlYWRpbmcuQ2hpbGRyZW4sQnV0dG9uRXhwYW5kKSlcclxuICAgICAgICAgICAgICAgICAgICBIZWFkaW5nLkFwcGVuZENoaWxkKEJ1dHRvbkV4cGFuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoU2hvd01pbmltaXplKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSaWdodE9mZnNldCArPSBhcHBlbmQ7XHJcbiAgICAgICAgICAgICAgICBCdXR0b25NaW5pbWl6ZS5TdHlsZS5MZWZ0ID0gXCJjYWxjKDEwMCUgLSBcIiArIFJpZ2h0T2Zmc2V0ICsgXCJweClcIjtcclxuICAgICAgICAgICAgICAgIGlmKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkhUTUxFbGVtZW50PihIZWFkaW5nLkNoaWxkcmVuLEJ1dHRvbk1pbmltaXplKSlcclxuICAgICAgICAgICAgICAgICAgICBIZWFkaW5nLkFwcGVuZENoaWxkKEJ1dHRvbk1pbmltaXplKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoU2hvd01lbnUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJ1dHRvbk1lbnUuU3R5bGUuTGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgaWYoIVN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29udGFpbnM8Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuSFRNTEVsZW1lbnQ+KEhlYWRpbmcuQ2hpbGRyZW4sQnV0dG9uTWVudSkpXHJcbiAgICAgICAgICAgICAgICAgICAgSGVhZGluZy5BcHBlbmRDaGlsZChCdXR0b25NZW51KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cdFx0cHJpdmF0ZSBIVE1MRGl2RWxlbWVudCBDcmVhdGVGb3JtQnV0dG9uKEZvcm1CdXR0b25UeXBlIFR5cGUpXHJcblx0XHR7XHJcblx0XHRcdHZhciBidXR0ID0gRGl2KFwiZm9ybS1oZWFkaW5nLWJ1dHRvblwiKTtcdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdHN3aXRjaChUeXBlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y2FzZSBGb3JtQnV0dG9uVHlwZS5DbG9zZTpcclxuXHRcdFx0XHRcdGJ1dHQuQ2xhc3NMaXN0LkFkZChcImZvcm0taGVhZGluZy1idXR0b24tY2xvc2VcIik7XHJcblx0XHRcdFx0XHRidXR0LklubmVySFRNTCA9IFwiJnRpbWVzO1wiO1xyXG5cclxuXHRcdFx0XHRcdGJ1dHQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHRNb3VzZV9Eb3duID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHRcdGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRcdFx0QWN0aXZlRm9ybSA9IHRoaXM7XHJcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcclxuXHJcblx0XHRcdFx0XHRidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoTW92aW5nRm9ybSAhPSBudWxsKSAvL3x8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdFx0ZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZihJbkRlc2lnbilcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRDbG9zZSgpO1xyXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIEZvcm1CdXR0b25UeXBlLk1heGltaXplOlx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0YnV0dC5Jbm5lckhUTUwgPSBcIiYjOTYzMztcIjtcclxuXHRcdFx0XHJcblx0XHRcdFx0XHRidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyAgfHwgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ICE9IG51bGxcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0ZXYuUHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0XHRcdE1vdXNlX0Rvd24gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNoYW5nZVdpbmRvd1N0YXRlKCk7XHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgRm9ybUJ1dHRvblR5cGUuTWluaW1pemU6XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0YnV0dC5Jbm5lckhUTUwgPSBcIi1cIjtcclxuXHJcblx0XHRcdFx0XHRidXR0Lk9uTW91c2VVcCA9IChldikgPT5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyB8fCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbFxyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRcdGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dC5Jbm5lckhUTUwgPT0gXCItXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHQuSW5uZXJIVE1MID0gXCIrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5NaW5pbWl6ZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRvd1N0YXRlID0gX3ByZXZ3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWluaW1pemVkID8gV2luZG93U3RhdGVUeXBlLk5vcm1hbCAgOiBfcHJldndpbmRvd1N0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dC5Jbm5lckhUTUwgPSBcIi1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgTW91c2VfRG93biA9IGZhbHNlO1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIEZvcm1CdXR0b25UeXBlLlJlc3RvcmU6XHJcblxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBGb3JtQnV0dG9uVHlwZS5IZWxwOlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJ1dHQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihNb3ZpbmdGb3JtICE9IG51bGwpIC8vICB8fCBXaW5kb3dIb2xkZXJTZWxlY3Rpb25Cb3ggIT0gbnVsbFxyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRcdGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRcdFx0TW91c2VfRG93biA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBGb3JtQnV0dG9uVHlwZS5NZW51OlxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuSW5uZXJIVE1MID0gXCImIzk3NzY7XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoTW92aW5nRm9ybSAhPSBudWxsKSAvLyAgfHwgV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ICE9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTW91c2VfRG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgT25NZW51Q2xpY2soKTsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnV0dC5Pbk1vdXNlRW50ZXIgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHQuT25EYmxDbGljayA9IChldikgPT4ge1xyXG5cdFx0XHRcdGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0YnV0dC5Pbk1vdXNlTW92ZSA9IChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCkgLy8gIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdGV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpZihUeXBlICE9IEZvcm1CdXR0b25UeXBlLkNsb3NlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YnV0dC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihNb3ZpbmdGb3JtICE9IG51bGwpIC8vIHx8IFdpbmRvd0hvbGRlclNlbGVjdGlvbkJveCAhPSBudWxsXHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHRNb3VzZV9Eb3duID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRBY3RpdmVGb3JtID0gdGhpcztcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblxyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnV0dC5TdHlsZS5XaWR0aCA9IFwiNjVweFwiO1xyXG4gICAgICAgICAgICAgICAgYnV0dC5TdHlsZS5IZWlnaHQgPSBcIjQ5cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ1dHQuU3R5bGUuRm9udFNpemUgPSBcIjE2cHRcIjtcclxuICAgICAgICAgICAgICAgIGJ1dHQuU3R5bGUuTGluZUhlaWdodCA9IFwiNDlweFwiO1xyXG4gICAgICAgICAgICAgICAgYnV0dC5FeGNoYW5nZUNsYXNzKFwicHJpbWFyeVwiLCBcInByaW1hcnlcIik7XHJcbiAgICAgICAgICAgICAgICBidXR0LlN0eWxlLkZpbHRlciA9IFwiYnJpZ2h0bmVzcygxMTAlKVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cdFx0XHRyZXR1cm4gYnV0dDtcclxuXHRcdH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIE9uTWVudUNsaWNrKClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgRm9ybSgpIDogYmFzZShcImZvcm0tYmFzZVwiKVxyXG5cdFx0e1x0XHRcdFx0XHJcblx0XHRcdEhlYWRpbmcgPSBEaXYoXCJmb3JtLWhlYWRpbmdcIik7XHJcblxyXG4gICAgICAgICAgICBcclxuXHJcblx0XHRcdEhlYWRpbmcuT25Db250ZXh0TWVudSA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cdFx0XHRcclxuXHRcdFx0SGVhZGluZ1RpdGxlID0gU3BhbihcImZvcm0taGVhZGluZy10aXRsZVwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEJvZHkgPSBEaXYoXCJmb3JtLWJvZHlcIik7XHJcblxyXG5cdFx0XHRCb2R5Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+IHtcclxuXHRcdFx0XHRpZihldi5UYXJnZXQgPT0gQm9keSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0QmFja0NvbG9yID0gXCIjRjBGMEYwXCI7XHJcblxyXG4gICAgICAgICAgICBCb2R5T3ZlckxheSA9IERpdihcImZvcm0tYm9keS1vdmVybGF5XCIpO1xyXG5cclxuXHRcdFx0Qm9keU92ZXJMYXkuU3R5bGUuT3BhY2l0eSA9IFNob3dCb2R5T3ZlckxheSA/IFwiMC41XCIgOiBcIjBcIjtcclxuXHJcblx0XHRcdENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuQ2xvc2UpO1xyXG4gICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoYW5nZUhlYWRpbmdCdXR0b24oRm9ybUJ1dHRvblR5cGUuTWF4aW1pemUpO1xyXG4gICAgICAgICAgICAgICAgQ2hhbmdlSGVhZGluZ0J1dHRvbihGb3JtQnV0dG9uVHlwZS5NaW5pbWl6ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBIZWFkaW5nLlN0eWxlLkhlaWdodCA9IFwiNTBweFwiO1xyXG4gICAgICAgICAgICAgICAgSGVhZGluZ1RpdGxlLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgQm9keS5TdHlsZS5Ub3AgPSBcIjUwcHhcIjtcclxuICAgICAgICAgICAgICAgIEJvZHkuU3R5bGUuSGVpZ2h0ID0gXCJjYWxjKDEwMCUgLSA1MHB4KVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIEJvZHlPdmVyTGF5LlN0eWxlLlRvcCA9IFwiNTBweFwiO1xyXG4gICAgICAgICAgICAgICAgQm9keU92ZXJMYXkuU3R5bGUuSGVpZ2h0ID0gXCJjYWxjKDEwMCUgLSA1MHB4KVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Db2xsYXBzZTtcclxuXHJcbiAgICAgICAgICAgIFNlbGYgPSBqUXVlcnkuU2VsZWN0KENvbnRlbnQpO1xyXG5cdFx0XHRcclxuICAgICAgICAgICAgQ29udGVudC5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZURvd24sIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+IHtcdFx0XHRcclxuXHRcdFx0XHRpZihJbkV4dGVybmFsTW91c2VFdmVudClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR2YXIgbWV2ID0gZXYuQXM8TW91c2VFdmVudD4oKTtcclxuXHJcblx0XHRcdFx0bWV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdG1ldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRcdFx0aWYgKCFJc0FjdGl2ZUZvcm1Db2xsZWN0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdE1vdXNlX0Rvd24gPSB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdE1vdmluZ0Zvcm0gPSB0aGlzO1xyXG5cdFx0XHRcdEFjdGl2ZUZvcm0gPSB0aGlzO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFNldEJvZHlPdmVyTGF5KCk7XHJcblxyXG5cdFx0XHRcdHZhciBjbGllbnRSZWMgPSB0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG5cdFx0XHRcdHZhciBtb3VzZVBvcyA9IEhlbHBlci5HZXRDbGllbnRNb3VzZUxvY2F0aW9uKGV2KTtcclxuXHJcblx0XHRcdFx0cHJldl9weCA9IChmbG9hdCljbGllbnRSZWMuTGVmdCAtIG1vdXNlUG9zLlhmO1xyXG5cdFx0XHRcdHByZXZfcHkgPSAoZmxvYXQpY2xpZW50UmVjLlRvcCAtIG1vdXNlUG9zLllmO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciB3aWR0aCA9IChmbG9hdCljbGllbnRSZWMuV2lkdGg7XHJcblx0XHRcdFx0dmFyIGhlaWdodCA9IChmbG9hdCljbGllbnRSZWMuSGVpZ2h0O1x0XHRcdFx0XHJcblxyXG5cdFx0XHRcdGZsb2F0IFggPSBtb3VzZVBvcy5YZiAtIChmbG9hdCljbGllbnRSZWMuTGVmdDtcclxuXHRcdFx0XHRmbG9hdCBZID0gbW91c2VQb3MuWWYgLSAoZmxvYXQpY2xpZW50UmVjLlRvcDtcclxuXHJcblx0XHRcdFx0aWYod2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1heGltaXplZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG5cdFx0XHRcdFx0TW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlOyAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWluaW1pemVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uTm9uZTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VXaW5kb3dTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKEluRGVzaWduKVxyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0aWYoSGVhZGluZ1RpdGxlICE9IG51bGwgJiYgZXYuVGFyZ2V0ID09IEhlYWRpbmdUaXRsZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0U2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fWVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoQWxsb3dTaXplQ2hhbmdlKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aWYoWCA8PSBSZXNpemVDb3JuZXJzICYmIFkgPD0gUmVzaXplQ29ybmVycylcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoV2VzdFNvdXRoRWFzdFJlc2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLlRvcExlZnRSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWSA8PSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuTm9ydGhFYXN0U291dGhXZXN0UmVzaXplKTtcclxuXHRcdFx0XHRcdFx0XHRcdE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uVG9wUmlnaHRSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWSA8PSBSZXNpemVDb3JuZXJzKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuTm9ydGhSZXNpemUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0TW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Ub3BSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWCA8PSBSZXNpemVDb3JuZXJzICYmIFkgPj0gaGVpZ2h0IC0gUmVzaXplQ29ybmVycylcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoRWFzdFNvdXRoV2VzdFJlc2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLkJvdHRvbUxlZnRSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWSA+PSBoZWlnaHQgLSBSZXNpemVDb3JuZXJzICYmIFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuTm9ydGhXZXN0U291dGhFYXN0UmVzaXplKTtcclxuXHRcdFx0XHRcdFx0XHRcdE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uQm90dG9tUmlnaHRSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWSA+PSBoZWlnaHQgLSBSZXNpemVDb3JuZXJzKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuU291dGhSZXNpemUpO1x0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLkJvdHRvbVJlc2l6ZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZihYIDw9IFJlc2l6ZUNvcm5lcnMpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0U2V0Q3Vyc29yKEN1cnNvci5XZXN0UmVzaXplKTtcclxuXHRcdFx0XHRcdFx0XHRcdE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uTGVmdFJlc2l6ZTtcclxuXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoWCA+PSB3aWR0aCAtIFJlc2l6ZUNvcm5lcnMpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0U2V0Q3Vyc29yKEN1cnNvci5FYXN0UmVzaXplKTtcclxuXHRcdFx0XHRcdFx0XHRcdE1vdmVBY3Rpb24gPSBNb3VzZU1vdmVBY3Rpb24uUmlnaHRSZXNpemU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0TW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYoIUFsbG93TW92ZUNoYW5nZSAmJiBNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblx0XHRcdFx0XHRNb3ZlQWN0aW9uID0gTW91c2VNb3ZlQWN0aW9uLk5vbmU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0XHRIZWFkaW5nLkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkRibENsaWNrLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihBbGxvd1NpemVDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlV2luZG93U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0XHRDb250ZW50LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlTGVhdmUsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+IHtcclxuXHRcdFx0XHRpZihNb3ZpbmdGb3JtID09IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0U2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRcdEJvZHkuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VFbnRlciwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT4ge1xyXG5cdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRcdENvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VNb3ZlLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PiB7XHJcblxyXG5cclxuXHRcdFx0XHRpZihJbkV4dGVybmFsTW91c2VFdmVudClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZihldi5UYXJnZXQgPT0gSGVhZGluZ1RpdGxlKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdHZhciBtZXYgPSBldi5BczxNb3VzZUV2ZW50PigpO1xyXG5cclxuXHRcdFx0XHR2YXIgd2lkdGggPSBDb250ZW50LkNsaWVudFdpZHRoO1xyXG5cdFx0XHRcdHZhciBoZWlnaHQgPSBDb250ZW50LkNsaWVudEhlaWdodDtcclxuXHRcdFx0XHRpbnQgWCA9IG1ldi5QYWdlWCAtIENvbnRlbnQuT2Zmc2V0TGVmdDtcclxuXHRcdFx0XHRpbnQgWSA9IG1ldi5QYWdlWSAtIENvbnRlbnQuT2Zmc2V0VG9wO1x0XHRcdFx0XHRcdFx0XHJcblxyXG5cdFx0XHRcdGlmKE1vdmluZ0Zvcm0gIT0gbnVsbCAmJiBNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYod2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1heGltaXplZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRTZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihJbkRlc2lnbilcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0aWYoQWxsb3dTaXplQ2hhbmdlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Ub3BMZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycyAmJiBZIDw9IFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoV2VzdFNvdXRoRWFzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1vdmVBY3Rpb24gPT0gTW91c2VNb3ZlQWN0aW9uLlRvcFJpZ2h0UmVzaXplIHx8IFkgPD0gUmVzaXplQ29ybmVycyAmJiBYID49IHdpZHRoIC0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuTm9ydGhFYXN0U291dGhXZXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoWSA8PSBSZXNpemVDb3JuZXJzIHx8IE1vdmVBY3Rpb24gPT0gTW91c2VNb3ZlQWN0aW9uLlRvcFJlc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuTm9ydGhSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5Cb3R0b21MZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycyAmJiBZID49IGhlaWdodCAtIFJlc2l6ZUNvcm5lcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZXRDdXJzb3IoQ3Vyc29yLk5vcnRoRWFzdFNvdXRoV2VzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1vdmVBY3Rpb24gPT0gTW91c2VNb3ZlQWN0aW9uLkJvdHRvbVJpZ2h0UmVzaXplIHx8IFkgPj0gaGVpZ2h0IC0gUmVzaXplQ29ybmVycyAmJiBYID49IHdpZHRoIC0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuTm9ydGhXZXN0U291dGhFYXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoTW92ZUFjdGlvbiA9PSBNb3VzZU1vdmVBY3Rpb24uQm90dG9tUmVzaXplIHx8IFkgPj0gaGVpZ2h0IC0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuU291dGhSZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChNb3ZlQWN0aW9uID09IE1vdXNlTW92ZUFjdGlvbi5MZWZ0UmVzaXplIHx8IFggPD0gUmVzaXplQ29ybmVycylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuV2VzdFJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1vdmVBY3Rpb24gPT0gTW91c2VNb3ZlQWN0aW9uLlJpZ2h0UmVzaXplIHx8IFggPj0gd2lkdGggLSBSZXNpemVDb3JuZXJzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5FYXN0UmVzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHJcblx0XHRcdH0pKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdEhlYWRpbmcuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VEb3duLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PiB7XHJcblx0XHRcdFx0U2V0Qm9keU92ZXJMYXkoKTtcclxuICAgICAgICAgICAgICAgIGlmICghSXNBY3RpdmVGb3JtQ29sbGVjdGlvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcblx0XHRcdFx0aWYod2luZG93U3RhdGUgPT0gV2luZG93U3RhdGVUeXBlLk1heGltaXplZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRNb3ZpbmdGb3JtID0gdGhpcztcclxuXHRcdFx0XHRcdFNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblxyXG5cdFx0XHRcdFx0TW92ZUFjdGlvbiA9IE1vdXNlTW92ZUFjdGlvbi5Nb3ZlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0TW92aW5nRm9ybSA9IHRoaXM7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRBY3RpdmVGb3JtID0gdGhpcztcclxuXHRcdFx0fSkpO1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cclxuXHRcdFx0Qm9keS5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZURvd24sIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpCcmlkZ2UuSHRtbDUuRXZlbnQ+KSgoZXYpID0+IHtcclxuXHRcdFx0XHRpZihJbkV4dGVybmFsTW91c2VFdmVudClcclxuXHRcdFx0XHRcdHJldHVybjtcdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghSXNBY3RpdmVGb3JtQ29sbGVjdGlvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRBY3RpdmVGb3JtID0gdGhpcztcclxuXHRcdFx0XHRNb3ZpbmdGb3JtID0gbnVsbDtcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0ZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRcdEJvZHkuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VNb3ZlLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PiB7XHRcdFx0XHRcclxuXHRcdFx0XHRpZihJbkV4dGVybmFsTW91c2VFdmVudClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0aWYoTW92aW5nRm9ybSA9PSBudWxsKVxyXG5cdFx0XHRcdHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUlzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1x0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcdFx0XHRcclxuXHJcblx0XHRcdEJvZHlPdmVyTGF5LkFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLk1vdXNlRG93biwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKEluRGVzaWduKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIUlzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0XHRcdFx0Qm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcblx0XHRcdFx0QWN0aXZlRm9ybSA9IHRoaXM7XHJcblx0XHRcdH0pKTtcclxuXHRcdFx0XHJcblx0XHRcdEJvZHkuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTW91c2VMZWF2ZSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkJyaWRnZS5IdG1sNS5FdmVudD4pKChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKEluRGVzaWduKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYoTW92aW5nRm9ybSA9PSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFNldEJvZHlPdmVyTGF5KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0XHRCb2R5T3ZlckxheS5BZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5Nb3VzZUVudGVyLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QnJpZGdlLkh0bWw1LkV2ZW50PikoKGV2KSA9PlxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHRpZihJbkRlc2lnbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRCb2R5T3ZlckxheS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Db2xsYXBzZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoTW92aW5nRm9ybSA9PSBudWxsICYmIElzQWN0aXZlRm9ybUNvbGxlY3Rpb24oKSkgLy8gV2luZG93SG9sZGVyU2VsZWN0aW9uQm94ID09IG51bGwgJiYgXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0U2V0Q3Vyc29yKEN1cnNvci5EZWZhdWx0KTtcclxuXHRcdFx0XHRcdEJvZHlPdmVyTGF5LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkNvbGxhcHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Qm9keU92ZXJMYXkuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuVmlzaWJsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRcdGpRdWVyeS5TZWxlY3QoQ29udGVudClcclxuXHRcdFx0XHQuQ3NzKFwid2lkdGhcIiwgV2luZG93X0RlZmF1bHRXaWR0aClcclxuXHRcdFx0XHQuQ3NzKFwiaGVpZ2h0XCIsIFdpbmRvd19EZWZhdWx0SGVpZ2h0KTtcclxuXHJcblx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQoSGVhZGluZyk7XHJcblx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQoQm9keSk7XHJcblx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQoQm9keU92ZXJMYXkpO1xyXG5cclxuXHRcdFx0SGVhZGluZy5BcHBlbmRDaGlsZChIZWFkaW5nVGl0bGUpO1xyXG4gICAgICAgICAgICBcclxuXHRcdFx0IGNsb3NlQWN0aW9uID0gKCkgPT4ge1xyXG5cdFx0XHRcdCBDb250ZW50LkVtcHR5KCk7XHJcblx0XHRcdFx0IGlmKENvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0XHQge1xyXG5cdFx0XHRcdFx0IENvbnRlbnQuRGVsZXRlKCk7IENvbnRlbnQgPSBudWxsO1xyXG5cdFx0XHRcdCB9XHJcblx0XHRcdCB9O1xyXG5cclxuXHRcdFx0SW5pdGlhbGlzZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBpbnQgVGl0bGVCYXJIZWlnaHQoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gSGVhZGluZy5DbGllbnRIZWlnaHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBUaXRsZUJhcldpZHRoKClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIEhlYWRpbmcuQ2xpZW50V2lkdGg7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBDbGllbnRYKClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIEJvZHkuQ2xpZW50TGVmdDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgaW50IENsaWVudFkoKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gQm9keS5DbGllbnRUb3A7XHJcblx0XHR9XHRcdFxyXG5cclxuXHRcdHB1YmxpYyBzdHJpbmcgVGV4dFxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gSGVhZGluZ1RpdGxlLklubmVySFRNTDsgfVxyXG5cdFx0XHRzZXQgeyBIZWFkaW5nVGl0bGUuSW5uZXJIVE1MID0gdmFsdWU7IH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RyaW5nIEJhY2tDb2xvclxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gQm9keS5TdHlsZS5CYWNrZ3JvdW5kQ29sb3I7IH1cclxuXHRcdFx0c2V0IHsgQm9keS5TdHlsZS5CYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTsgfVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdHJpbmcgRm9yZUNvbG9yXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBCb2R5LlN0eWxlLkNvbG9yOyB9XHJcblx0XHRcdHNldCB7IEJvZHkuU3R5bGUuQ29sb3IgPSB2YWx1ZTsgfVxyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxEaWFsb2dSZXN1bHQ+IERpYWxvZ1Jlc3VsdHMgPSBuZXcgTGlzdDxEaWFsb2dSZXN1bHQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb3JtQ29sbGVjdGlvbiBHZXRGb3JtQ29sbGVjdGlvbkZyb21Gb3JtKEZvcm0gZm9ybSlcclxuICAgICAgICB7XHJcblx0XHRcdGlmKGZvcm0uX3NlcGVyYXRlSW5zdGFuY2UpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgdmlzaWJsZUZvcm1zID0gc3RhbmRBbG9uZUZvcm1zLlZpc2libGVGb3JtcztcclxuXHRcdFx0XHRmb3IoaW50IHggPSAwOyB4IDwgdmlzaWJsZUZvcm1zLkNvdW50OyB4KyspXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYodmlzaWJsZUZvcm1zW3hdID09IHRoaXMpXHJcblx0XHRcdFx0XHRcdHJldHVybiBzdGFuZEFsb25lRm9ybXM7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBGb3JtQ29sbGVjdGlvbnMuQ291bnQ7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZih0aGlzID09IEZvcm1Db2xsZWN0aW9uc1tpXS5Gb3JtT3duZXIpXHJcblx0XHRcdFx0XHRcdHJldHVybiBGb3JtQ29sbGVjdGlvbnNbaV07XHJcblx0XHRcdFx0XHR2YXIgdmlzaWJsZUZvcm1zID0gRm9ybUNvbGxlY3Rpb25zW2ldLlZpc2libGVGb3JtcztcclxuXHRcdFx0XHRcdGZvcihpbnQgeCA9IDA7IHggPCB2aXNpYmxlRm9ybXMuQ291bnQ7IHgrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYodmlzaWJsZUZvcm1zW3hdID09IHRoaXMpXHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIEZvcm1Db2xsZWN0aW9uc1tpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNBY3RpdmVGb3JtQ29sbGVjdGlvbigpXHJcbiAgICAgICAge1xyXG5cdFx0XHRpZih0aGlzLl9zZXBlcmF0ZUluc3RhbmNlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIEdldEZvcm1Db2xsZWN0aW9uRnJvbUZvcm0odGhpcykgPT0gc3RhbmRBbG9uZUZvcm1zO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBHZXRGb3JtQ29sbGVjdGlvbkZyb21Gb3JtKHRoaXMpID09IEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKCk7XHJcblx0XHRcdH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzVmlzaWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0Rm9ybUNvbGxlY3Rpb25Gcm9tRm9ybSh0aGlzKSAhPSBudWxsOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2hvd1N0YXJ0TmV3TGV2ZWwoKVxyXG4gICAgICAgIHtcclxuXHRcdFx0aWYoIUhhc1NldHVwKVxyXG5cdFx0XHRcdFNldHVwKCk7XHJcblxyXG5cdFx0XHRpZiAoSXNWaXNpYmxlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgT3Blbj8/P1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIkludmFsaWQgcmVxdWVzdCB0byBvcGVuIGZvcm0gYXMgYSBkaWFsb2cgdGhhdCBpcyBhbHJlYWR5IHZpc2libGUhXCIpO1xyXG4gICAgICAgICAgICB9XHRcdFxyXG5cclxuICAgICAgICAgICAgRm9ybUNvbGxlY3Rpb25zLkFkZChuZXcgRm9ybUNvbGxlY3Rpb24odGhpcykpO1xyXG5cclxuICAgICAgICAgICAgQ2FsY3VsYXRlWk9yZGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZihTdGFydFBvc2l0aW9uID09IEZvcm1TdGFydFBvc2l0aW9uLkNlbnRlcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2VudHJlRm9ybSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBPblNob3dlZCgpO1xyXG5cclxuICAgICAgICAgICAgQm9keS5Gb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgQWN0aXZlRm9ybSA9IHRoaXM7XHJcbiAgICAgICAgfVx0XHRcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTaG93RGlhbG9nKHBhcmFtcyBEaWFsb2dSZXN1bHRbXSBkaWFsb2dSZXN1bHRzKVxyXG5cdFx0e1xyXG5cdFx0XHRpZighSGFzU2V0dXApXHJcblx0XHRcdFx0U2V0dXAoKTtcclxuXHJcblx0XHRcdEluRGlhbG9nUmVzdWx0ID0gZmFsc2U7XHJcblxyXG5cdFx0XHRpZiAoQnV0dG9uTWluaW1pemUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEJ1dHRvbk1pbmltaXplLkRlbGV0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoQnV0dG9uRXhwYW5kICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBCdXR0b25FeHBhbmQuRGVsZXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChCdXR0b25DbG9zZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQnV0dG9uQ2xvc2UuRGVsZXRlKCk7XHJcbiBcclxuICAgICAgICAgICAgX0lzRGlhbG9nID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYoU3RhcnRQb3NpdGlvbiAhPSBGb3JtU3RhcnRQb3NpdGlvbi5NYW51YWwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgICAgICBTdGFydFBvc2l0aW9uID0gRm9ybVN0YXJ0UG9zaXRpb24uQ2VudGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNob3dTdGFydE5ld0xldmVsKCk7XHJcblxyXG4gICAgICAgICAgICBpZihkaWFsb2dSZXN1bHRzICE9IG51bGwgJiYgZGlhbG9nUmVzdWx0cy5MZW5ndGggPiAwKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0RGlhbG9nUmVzdWx0cy5BZGRSYW5nZShkaWFsb2dSZXN1bHRzKTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHJcblx0XHRwcml2YXRlIGZsb2F0IE1pblplcm8oZmxvYXQgaW5wdXQpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBpbnB1dCA8IDAgPyAwIDogaW5wdXQ7XHJcblx0XHR9XHJcblx0XHRwcml2YXRlIGludCBNaW5aZXJvKGludCBpbnB1dClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIGlucHV0IDwgMCA/IDAgOiBpbnB1dDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDZW50cmVGb3JtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChXaW5kb3dIb2xkZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHRcdFxyXG5cdFx0XHRTZWxmXHJcbiAgICAgICAgICAgIC5Dc3MoXCJsZWZ0XCIsIE1pblplcm8oKFdpbmRvd0hvbGRlci5DbGllbnRXaWR0aCAvIDIpIC0gKEdsb2JhbC5QYXJzZUludCh0aGlzLldpZHRoLlRvSHRtbFZhbHVlKCkpIC8gMikpKVxyXG4gICAgICAgICAgICAuQ3NzKFwidG9wXCIsIE1pblplcm8oKFdpbmRvd0hvbGRlci5DbGllbnRIZWlnaHQgLyAyKSAtIChHbG9iYWwuUGFyc2VJbnQodGhpcy5IZWlnaHQuVG9IdG1sVmFsdWUoKSkgLyAyKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFIYXNSZW5kZXJlZClcclxuICAgICAgICAgICAgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJhc2UuUmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBPblNob3dpbmcoKTtcclxuICAgICAgICAgICAgICAgIFNob3duKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgU2hvd24oKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBJbkNsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmKENoaWxkcmVuID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgQ2hpbGRyZW4uQ291bnQ7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKENoaWxkcmVuW2ldICE9IG51bGwgJiZcclxuXHRcdFx0XHRcdENoaWxkcmVuW2ldLk9uTG9hZGVkICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Q2hpbGRyZW5baV0uT25Mb2FkZWQoQ2hpbGRyZW5baV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRDaGlsZHJlbi5SZW1vdmUobnVsbCk7XHJcblx0XHR9XHJcblx0XHRwcm90ZWN0ZWQgYm9vbCBfc2VwZXJhdGVJbnN0YW5jZSA9IGZhbHNlO1xyXG5cdFx0cHVibGljIHZvaWQgU2hvdyhib29sIHNlcGVyYXRlSW5zdGFuY2UgPSBmYWxzZSlcclxuXHRcdHtcclxuXHRcdFx0aWYoIUhhc1NldHVwKVxyXG5cdFx0XHRcdFNldHVwKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoX0lzRGlhbG9nKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0XHRfc2VwZXJhdGVJbnN0YW5jZSA9IHNlcGVyYXRlSW5zdGFuY2U7XHJcblx0XHRcdGlmKCFzZXBlcmF0ZUluc3RhbmNlICYmIChGb3JtQ29sbGVjdGlvbnMgPT0gbnVsbCB8fCBGb3JtQ29sbGVjdGlvbnMuQ291bnQgPT0gMCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRTaG93U3RhcnROZXdMZXZlbCgpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgdmFyIGFjdGl2ZUNvbGxlY3QgPSAhc2VwZXJhdGVJbnN0YW5jZSA/IEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKCkgOiBzdGFuZEFsb25lRm9ybXM7XHJcbiAgICAgICAgICAgIHZhciB2aXNiaWxlRm9ybXMgPSBhY3RpdmVDb2xsZWN0LlZpc2libGVGb3JtcztcclxuICAgICAgICAgICAgXHJcblx0XHRcdGlmKCF2aXNiaWxlRm9ybXMuQ29udGFpbnModGhpcykpXHJcblx0XHRcdHtcclxuICAgICAgICAgICAgICAgIHZpc2JpbGVGb3Jtcy5BZGQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5WaXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBDYWxjdWxhdGVaT3JkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihTdGFydFBvc2l0aW9uICE9IEZvcm1TdGFydFBvc2l0aW9uLk1hbnVhbCAmJiB3aW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTm9ybWFsKVxyXG5cdFx0XHRcdHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3RhcnRQb3NpdGlvbiA9PSBGb3JtU3RhcnRQb3NpdGlvbi5DZW50ZXIgfHwgKGFjdGl2ZUNvbGxlY3QgPT0gbnVsbCB8fCB2aXNiaWxlRm9ybXMgPT0gbnVsbCB8fCB2aXNiaWxlRm9ybXMuQ291bnQgPT0gMCB8fCB2aXNiaWxlRm9ybXNbdmlzYmlsZUZvcm1zLkNvdW50IC0gMV0ud2luZG93U3RhdGUgIT0gV2luZG93U3RhdGVUeXBlLk5vcm1hbCB8fCB2aXNiaWxlRm9ybXNbdmlzYmlsZUZvcm1zLkNvdW50IC0gMV0uQ29udGVudCA9PSBudWxsKSlcclxuXHRcdFx0XHRcdHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2VudHJlRm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRlbHNlIGlmKFN0YXJ0UG9zaXRpb24gPT0gRm9ybVN0YXJ0UG9zaXRpb24uV2luZG93c0RlZmF1bHRMb2NhdGlvbilcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0dmFyIG9iaiA9IHZpc2JpbGVGb3Jtc1t2aXNiaWxlRm9ybXMuQ291bnQgLSAxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCB4ID0gR2xvYmFsLlBhcnNlSW50KG9iai5MZWZ0LlRvSHRtbFZhbHVlKCkpO1xyXG5cdFx0XHRcdFx0XHRvYmplY3QgeSA9IEdsb2JhbC5QYXJzZUludChvYmouVG9wLlRvSHRtbFZhbHVlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoR2xvYmFsLklzTmFOKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihHbG9iYWwuSXNOYU4oeSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjID0gV2luZG93SG9sZGVyLkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHRcdFx0XHRcdFx0ZG91YmxlIHB3MjUgPSByZWMuV2lkdGggKiAwLjE1O1xyXG5cdFx0XHRcdFx0XHRkb3VibGUgcGgyNSA9IHJlYy5IZWlnaHQgKiAwLjE1O1xyXG5cclxuXHRcdFx0XHRcdFx0ZG91YmxlIHB3NzUgPSByZWMuV2lkdGggKiAwLjU1O1xyXG5cdFx0XHRcdFx0XHRkb3VibGUgcGg3NSA9IHJlYy5IZWlnaHQgKiAwLjU1O1x0XHRcdFx0XHRcdFxyXG5cclxuXHRcdFx0XHRcdFx0aWYoKGludCl4IDwgcHcyNSlcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR4ID0gKGludClwdzI1O1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZigoaW50KXkgPCBwaDI1KVx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHkgPSAoaW50KXBoMjU7XHRcdFx0XHRcdFx0XHJcblxyXG5cdFx0XHRcdFx0XHRpZigoaW50KXggPiBwdzc1KVxyXG5cdFx0XHRcdFx0XHRcdHggPSAoaW50KXB3MjU7XHJcblx0XHRcdFx0XHRcdGlmKChpbnQpeSA+IHBoNzUpXHJcblx0XHRcdFx0XHRcdFx0eSA9IChpbnQpcGgyNTtcclxuXHRcdFx0XHRcdFx0eCA9IChpbnQpeCArIDEwO1xyXG5cdFx0XHRcdFx0XHR5ID0gKGludCl5ICsgMTA7XHJcblxyXG5cdFx0XHRcdFx0XHRTZWxmLkNzcyhcImxlZnRcIiwgTWluWmVybygoaW50KXgpKVxyXG5cdFx0XHRcdFx0XHRcdC5Dc3MoXCJ0b3BcIiwgTWluWmVybygoaW50KXkpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHRcdFx0XHRcclxuXHJcblx0XHRcdFx0Qm9keS5Gb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0T25TaG93ZWQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0QWN0aXZlRm9ybSA9IHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQnJpbmdUb0Zyb250KClcclxuXHRcdHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZUNvbGxlY3QgPSBHZXRBY3RpdmVGb3JtQ29sbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZihhY3RpdmVDb2xsZWN0ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVDb2xsZWN0LkZvcm1Pd25lciA9PSB0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZhciB2aXNpYmxlRm9ybXMgPSBhY3RpdmVDb2xsZWN0LlZpc2libGVGb3JtcztcclxuXHRcdFx0XHRpZih2aXNpYmxlRm9ybXMgIT0gbnVsbCAmJiB2aXNpYmxlRm9ybXMuQ291bnQgPiAxKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZpc2libGVGb3Jtcy5SZW1vdmUodGhpcyk7XHJcblx0XHRcdFx0XHR2aXNpYmxlRm9ybXMuQWRkKHRoaXMpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Q2FsY3VsYXRlWk9yZGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0WkluZGV4KHJlZiBpbnQgekluZGV4KVxyXG4gICAgICAgIHtcclxuXHRcdFx0dGhpcy5Db250ZW50LlN0eWxlLlpJbmRleCA9ICh6SW5kZXgrKykuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgdm9pZCBDbGVhclpJbmRleCgpXHJcblx0XHR7XHJcblx0XHRcdHZhciB4ID0gR2V0QWN0aXZlRm9ybUNvbGxlY3Rpb24oKS5Gb3JtT3duZXI7XHJcblx0XHRcdFdpbmRvd0hvbGRlci5TdHlsZS5aSW5kZXggPSBcIi1cIiArIFdpbmRvd0hvbGRlci5DaGlsZEVsZW1lbnRDb3VudDtcclxuXHRcdFx0Ym9vbCBGb3VuZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IFdpbmRvd0hvbGRlci5DaGlsZEVsZW1lbnRDb3VudDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoRm91bmQgfHwgeC5Db250ZW50ID09IFdpbmRvd0hvbGRlci5DaGlsZHJlbltpXSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRXaW5kb3dIb2xkZXIuQ2hpbGRyZW5baV0uU3R5bGUuWkluZGV4ID0gXCJcIjtcclxuXHRcdFx0XHRcdEZvdW5kID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFdpbmRvd0hvbGRlci5DaGlsZHJlbltpXS5TdHlsZS5aSW5kZXggPSAoaSAtIFdpbmRvd0hvbGRlci5DaGlsZEVsZW1lbnRDb3VudCAtIDEpLlRvU3RyaW5nKCk7XHJcblx0XHRcdFx0fVx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIHN0YXRpYyB2b2lkIEFwcGx5WkluZGV4KClcclxuXHRcdHtcclxuXHRcdFx0V2luZG93SG9sZGVyLlN0eWxlLlpJbmRleCA9IFwiXCI7XHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBXaW5kb3dIb2xkZXIuQ2hpbGRFbGVtZW50Q291bnQ7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFdpbmRvd0hvbGRlci5DaGlsZHJlbltpXS5TdHlsZS5aSW5kZXggPSBpLlRvU3RyaW5nKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIHN0YXRpYyBpbnQgQ2FsY3VsYXRlWk9yZGVyKEZvcm1Db2xsZWN0aW9uIGZvcm1Db2xsZWN0aW9uLCBpbnQgekluZGV4LCBEb2N1bWVudEZyYWdtZW50IGZyYWcpXHJcblx0XHR7XHJcblx0XHRcdExpc3Q8Rm9ybT4gVG9wTW9zdEZvcm1zID0gbmV3IExpc3Q8Rm9ybT4oKTtcclxuXHJcblx0XHRcdHZhciBWaXNpYmxlRm9ybXMgPSBmb3JtQ29sbGVjdGlvbi5WaXNpYmxlRm9ybXM7XHJcbiAgICAgICAgICAgIGlmKFZpc2libGVGb3JtcyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgVmlzaWJsZUZvcm1zLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVmlzaWJsZUZvcm1zW2ldLkNvbnRlbnQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRvQ2xlYW4uQWRkKFZpc2libGVGb3Jtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFZpc2libGVGb3Jtc1tpXS5Ub3BNb3N0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9wTW9zdEZvcm1zLkFkZChWaXNpYmxlRm9ybXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBUb0NsZWFuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVmlzaWJsZUZvcm1zLkNvbnRhaW5zKFRvQ2xlYW5baV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zLlJlbW92ZShUb0NsZWFuW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVG9DbGVhbltpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFRvQ2xlYW4uUmVtb3ZlKG51bGwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoVmlzaWJsZUZvcm1zLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lci5NYW5hZ2VQbGFjZUhvbGRlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWcuQXBwZW5kQ2hpbGQoZm9ybUNvbGxlY3Rpb24uRm9ybU93bmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB6SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbGxlY3Rpb24uRm9ybU93bmVyLk1hbmFnZVBsYWNlSG9sZGVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFnLkFwcGVuZENoaWxkKGZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IFRvcE1vc3RGb3Jtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtID0gVG9wTW9zdEZvcm1zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIFZpc2libGVGb3Jtcy5SZW1vdmUoZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zLkFkZChmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGludCBsZW5ndGggPSBWaXNpYmxlRm9ybXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVmlzaWJsZUZvcm1zW2ldICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zW2ldLkNvbnRlbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsZW5ndGggLSAxID09IGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlzaWJsZUZvcm1zW2ldLk1hbmFnZVBsYWNlSG9sZGVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWcuQXBwZW5kQ2hpbGQoVmlzaWJsZUZvcm1zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gekluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaXNpYmxlRm9ybXNbaV0uTWFuYWdlUGxhY2VIb2xkZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnLkFwcGVuZENoaWxkKFZpc2libGVGb3Jtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcblx0XHRcdHJldHVybiB6SW5kZXg7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIE1hbmFnZVBsYWNlSG9sZGVycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighU2V0dGluZ3MuUmVtb3ZlQXR0cmlidXRlc09mZkVsZW1lbnRzV2hlbkxvc2VGb2N1cylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGJvb2wgc2hvdWxkSGlkZVBsYWNlaG9sZGVycyA9IEFjdGl2ZUZvcm0gIT0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmKHNob3VsZEhpZGVQbGFjZWhvbGRlcnMgIT0gSGFzUmVtb3ZlZFBsYWNlSG9sZGVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBIYXNSZW1vdmVkUGxhY2VIb2xkZXIgPSBzaG91bGRIaWRlUGxhY2Vob2xkZXJzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZSA9IG5ldyBRdWV1ZTxIVE1MRWxlbWVudD4oKTtcclxuICAgICAgICAgICAgICAgIHF1ZS5FbnF1ZXVlKEJvZHkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlKHF1ZS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBxdWUuRGVxdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNob3VsZEhpZGVQbGFjZWhvbGRlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGVsZW1lbnQuR2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LlJlbW92ZUF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5TZXRBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIsIGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZWxlbWVudC5HZXRBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShhKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5SZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBsYWNlaG9sZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5TZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpbnQgbGVuZ3RoID0gZWxlbWVudC5DaGlsZEVsZW1lbnRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZihsZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWUuRW5xdWV1ZShlbGVtZW50LkNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIENhbGN1bGF0ZVpPcmRlcigpXHJcblx0XHR7XHRcdFx0XHJcblx0XHRcdEdldEFjdGl2ZUZvcm1Db2xsZWN0aW9uKCk7XHJcblxyXG5cdFx0XHRpZihGb3JtQ29sbGVjdGlvbnMgPT0gbnVsbCAmJiBzdGFuZEFsb25lRm9ybXMuVmlzaWJsZUZvcm1zLkNvdW50ID09IDApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRGb3JtQ29sbGVjdGlvbnMuUmVtb3ZlKG51bGwpO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBGb3JtQ29sbGVjdGlvbnMuQ291bnQ7XHJcbiAgICAgICAgICAgIGludCB6SW5kZXggPSAxO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZyYWcgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBGb3JtT3ZlckxheS5TdHlsZS5aSW5kZXggPSBjb3VudCA9PSAwID8gXCJcIiA6IGNvdW50ID09IDEgPyBcIjBcIiA6IFwiMC40XCI7XHJcblxyXG5cdFx0XHRmb3IgKGludCB4ID0gMDsgeCA8IGNvdW50OyB4KyspXHJcbiAgICAgICAgICAgIHsgICAgXHJcbiAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih4ID09IGNvdW50IC0gMSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYWcuQXBwZW5kQ2hpbGQoRm9ybU92ZXJMYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6SW5kZXggPSBDYWxjdWxhdGVaT3JkZXIoRm9ybUNvbGxlY3Rpb25zW3hdLCB6SW5kZXgsIGZyYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHggPT0gY291bnQgLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZy5BcHBlbmRDaGlsZChGb3JtT3ZlckxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleCA9IENhbGN1bGF0ZVpPcmRlcihGb3JtQ29sbGVjdGlvbnNbeF0sIHpJbmRleCwgZnJhZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuXHRcdFx0fVxyXG5cdFx0XHR6SW5kZXggPSBDYWxjdWxhdGVaT3JkZXIoc3RhbmRBbG9uZUZvcm1zLCB6SW5kZXgsIGZyYWcpO1xyXG5cclxuICAgICAgICAgICAgV2luZG93SG9sZGVyLkVtcHR5KCk7XHJcbiAgICAgICAgICAgIFdpbmRvd0hvbGRlci5BcHBlbmRDaGlsZChmcmFnKTtcclxuICAgICAgICAgICAgXHRcclxuXHRcdFx0aWYoQWN0aXZlRm9ybSAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0QWN0aXZlRm9ybS5Cb2R5LkZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIExpc3Q8Rm9ybT4gVG9DbGVhbiA9IG5ldyBMaXN0PEZvcm0+KCk7XHJcblx0XHRwcml2YXRlIEFjdGlvbiBjbG9zZUFjdGlvbjtcclxuICAgICAgICBwcm90ZWN0ZWQgYm9vbCBJbkNsb3NlID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgdm9pZCBDbG9zZSgpXHJcblx0XHR7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKF9Jc0RpYWxvZyAmJiBJbkRpYWxvZ1Jlc3VsdClcclxuXHRcdFx0XHRyZXR1cm47XHJcblxyXG4gICAgICAgICAgICBJbkNsb3NlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIE9uQ2xvc2luZygpOyAgICAgICAgICAgXHJcblxyXG5cdFx0XHRUb0NsZWFuLkFkZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvd25lckZvcm1Db2xsZWN0aW9uID0gR2V0Rm9ybUNvbGxlY3Rpb25Gcm9tRm9ybSh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIGlmKG93bmVyRm9ybUNvbGxlY3Rpb24gIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYob3duZXJGb3JtQ29sbGVjdGlvbi5Gb3JtT3duZXIgPT0gdGhpcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lckZvcm1Db2xsZWN0aW9uLkZvcm1Pd25lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBvd25lckZvcm1Db2xsZWN0aW9uLlZpc2libGVGb3Jtcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG93bmVyRm9ybUNvbGxlY3Rpb24uVmlzaWJsZUZvcm1zW2ldID09IHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJGb3JtQ29sbGVjdGlvbi5WaXNpYmxlRm9ybXNbaV0uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZvcm1Db2xsZWN0aW9ucy5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRm9ybUNvbGxlY3Rpb25zID0gbmV3IExpc3Q8Rm9ybUNvbGxlY3Rpb24+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyRm9ybUNvbGxlY3Rpb24uVmlzaWJsZUZvcm1zLlJlbW92ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0aWYoQ29udGVudCAhPSBudWxsKVxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHRpZighRm9yUmV1c2UpXHJcblx0XHRcdFx0e1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmKFNldHRpbmdzLkZvcm1GYWRlRHVyYXRpb24gPiAwKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRTZWxmLkZhZGVPdXQoU2V0dGluZ3MuRm9ybUZhZGVEdXJhdGlvbiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbiljbG9zZUFjdGlvbik7XHJcblx0XHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjbG9zZUFjdGlvbigpO1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVx0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdENvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuQ29sbGFwc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRDYWxjdWxhdGVaT3JkZXIoKTtcclxuXHJcblx0XHRcdEFjdGl2ZUZvcm0gPSBfUHJldkFjdGl2ZUZvcm07XHJcblx0XHRcdGlmKF9Jc0RpYWxvZylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdEluRGlhbG9nUmVzdWx0ID0gdHJ1ZTtcclxuXHRcdFx0XHRpZihEaWFsb2dSZXN1bHQgIT0gRGlhbG9nUmVzdWx0RW51bS5Ob25lICYmXHJcblx0XHRcdFx0RGlhbG9nUmVzdWx0cyAhPSBudWxsICYmIERpYWxvZ1Jlc3VsdHMuQ291bnQgPiAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBEaWFsb2dSZXN1bHRzLkNvdW50OyBpKyspXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdERpYWxvZ1Jlc3VsdHNbaV0uSW52b2tlSWZSZXN1bHQoRGlhbG9nUmVzdWx0KTtcclxuXHRcdFx0XHRcdH1cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgIE9uQ2xvc2VkKCk7XHJcblxyXG4gICAgICAgICAgICBpZihXaW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWluaW1pemVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBNaW5pbWl6ZWRGb3Jtcy5SZW1vdmUodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBDYWxjdWxhdGVNaW5taXplZEZvcm1zTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW5DbG9zZSA9IGZhbHNlOyBcclxuICAgICAgICB9XHJcblxyXG5cdFx0cHJpdmF0ZSBib29sIEluRGlhbG9nUmVzdWx0ID0gZmFsc2U7XHRcdFx0XHRcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDYWxjdWxhdG9yQ29udHJvbCA6IENvbnRyb2xcclxuICAgIHsgICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBNZW1vSW5wdXQgRGlzcGxheUlucHV0O1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkNsb3NlO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuQmFjaztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkNFO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuQztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blBUQVg7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5NVEFYO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuVEFYO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuRGJsO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjc7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG44O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuOTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkRpdjtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blNxcnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuNDtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjU7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG42O1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuTXVsO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuUGVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjE7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG4yO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuMztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bk1pbnVzO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuMU92ZXJYO1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bjA7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5wbHVzT3JOZWc7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5Eb3Q7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5QbHVzO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuRXE7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIFZhbHVlO1xyXG5cclxuICAgICAgICBwcml2YXRlIExpc3Q8c3RyaW5nPiBfY29tbWFuZHMgPSBuZXcgTGlzdDxzdHJpbmc+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIEFkZFRleHRUb0NvbW1hbmQoU2ltcGxlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGJ1dHRvbi5UZXh0ID09IFwiLlwiICYmIGN1cnJlbnRfY29tbWFuZC5Db250YWlucyhcIi5cIikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZihjdXJyZW50X2NvbW1hbmQgPT0gXCIwXCIpXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50X2NvbW1hbmQgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudF9jb21tYW5kICs9IGJ1dHRvbi5UZXh0O1xyXG5cclxuICAgICAgICAgICAgUmVmcmVzaFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uPGRlY2ltYWw+IE9uRXF1YWwgPSBudWxsO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDYWxjdWxhdGVBbmRDbG9zZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IENhbGN1bGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYoT25FcXVhbCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgT25FcXVhbCh4KTtcclxuICAgICAgICAgICAgaWYoIURvbnRSZWZyZXNoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihPbkNsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgT25DbG9zZSgpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uIE9uQ2xvc2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWNpbWFsIENhbGN1bGF0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkZWNpbWFsIHByZXZpb3VzVmFsdWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgc3RyaW5nIHByZXZpb3VzT3AgPSBcIlwiO1xyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gX2NvbW1hbmRzLkNvdW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IF9jb21tYW5kc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihjb21tYW5kLkVuZHNXaXRoKFwiJVwiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gY29tbWFuZC5TdWJzdHJpbmcoMCwgY29tbWFuZC5MZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZWNpbWFsIHRyeURlYztcclxuICAgICAgICAgICAgICAgIGlmKGRlY2ltYWwuVHJ5UGFyc2UoY29tbWFuZCwgb3V0IHRyeURlYykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldmlvdXNPcCAhPSBcIlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoX2NvbW1hbmRzW2ldLkVuZHNXaXRoKFwiJVwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5RGVjID0gcHJldmlvdXNWYWx1ZSAqICh0cnlEZWMgLyAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeURlYyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcmV2aW91c09wID09IFwiK1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZSArIHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCItXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlIC0gdHJ5RGVjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIi9cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWUgLyB0cnlEZWM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwiKlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZSAqIHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCIqXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlICogdHJ5RGVjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHRyeURlYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IGNvbW1hbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldmlvdXNPcCA9PSBcIitUQVhcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBIZWxwZXIuQWRkVGF4KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwiLVRBWFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IEhlbHBlci5EZWR1Y3RUYXgocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzT3AgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCJUQVhcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBIZWxwZXIuR2V0UG9ydGlvblRheChwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIkRibFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWUgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2aW91c09wID09IFwic3FydFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSAoZGVjaW1hbClNYXRoLlNxcnQoKGRvdWJsZSlwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChFeGNlcHRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzT3AgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZpb3VzT3AgPT0gXCIxL3hcIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gMS4wbSAvIHByZXZpb3VzVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNPcCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldmlvdXNPcCA9PSBcIisvLVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNWYWx1ZSA9IC1wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c09wID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmcmVzaFZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKERvbnRSZWZyZXNoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gX2NvbW1hbmRzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidWlsZGVyLkFwcGVuZChfY29tbWFuZHNbaV0gKyBcIiBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnVpbGRlci5BcHBlbmQoY3VycmVudF9jb21tYW5kKTtcclxuICAgICAgICAgICAgRGlzcGxheUlucHV0LlRleHQgPSBcIlwiO1xyXG4gICAgICAgICAgICBEaXNwbGF5SW5wdXQuVGV4dCA9IGJ1aWxkZXIuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWxsTnVtYmVycyhzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkZWNpbWFsIHg7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWNpbWFsLlRyeVBhcnNlKHZhbHVlLCBvdXQgeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQmFjayhTaW1wbGVCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoY3VycmVudF9jb21tYW5kICE9IFwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IGN1cnJlbnRfY29tbWFuZC5TdWJzdHJpbmcoMCwgY3VycmVudF9jb21tYW5kLkxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX2NvbW1hbmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxzdHJpbmc+KF9jb21tYW5kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoSXNBbGxOdW1iZXJzKHgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0geDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gY3VycmVudF9jb21tYW5kLlN1YnN0cmluZygwLCBjdXJyZW50X2NvbW1hbmQuTGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcy5SZW1vdmVBdChfY29tbWFuZHMuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSZWZyZXNoVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU2luZ2xlT3BlcmF0b3Ioc3RyaW5nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKHguQ29udGFpbnMoXCJUQVhcIikgfHwgeCA9PSBcIkRibFwiIHx8IHggPT0gXCIxL3hcIiB8fCB4ID09IFwiKy8tXCIgfHwgeCA9PSBcInNxcnRcIik7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIERvbnRSZWZyZXNoID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkT3BlcmF0b3IoU2ltcGxlQnV0dG9uIGJ1dHRvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKElzU2luZ2xlT3BlcmF0b3IoYnV0dG9uLlRleHQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfY29tbWFuZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PHN0cmluZz4oX2NvbW1hbmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighSXNTaW5nbGVPcGVyYXRvcih4KSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRfY29tbWFuZCA9PSBcIlwiICYmICFJc0FsbE51bWJlcnMoeCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihjdXJyZW50X2NvbW1hbmQgIT0gXCJcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29tbWFuZHMuQWRkKGN1cnJlbnRfY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfY29tbWFuZHMuQWRkKGJ1dHRvbi5UZXh0KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgUmVmcmVzaFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihjdXJyZW50X2NvbW1hbmQgPT0gXCJcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihidXR0b24uVGV4dCA9PSBcIj1cIilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhbGN1bGF0ZUFuZENsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoX2NvbW1hbmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkxhc3Q8c3RyaW5nPihfY29tbWFuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIUlzU2luZ2xlT3BlcmF0b3IoeCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGJ1dHRvbi5UZXh0ID09IFwiJVwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9jb21tYW5kcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTGFzdDxzdHJpbmc+KF9jb21tYW5kcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighSXNTaW5nbGVPcGVyYXRvcih4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kICs9IFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbW1hbmRzLkFkZChjdXJyZW50X2NvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbW1hbmRzLkFkZChjdXJyZW50X2NvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJ1dHRvbi5UZXh0ID09IFwiPVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FsY3VsYXRlQW5kQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvbW1hbmRzLkFkZChidXR0b24uVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgUmVmcmVzaFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIENhbGN1bGF0b3JDb250cm9sKGRlY2ltYWwgc3RhcnRpbmdWYWx1ZSwgYm9vbCBDbG9zZUJ1dHRvblZpc2libGUgPSBmYWxzZSkgOiBiYXNlKClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFZhbHVlID0gc3RhcnRpbmdWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZCA9IFZhbHVlLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZG9jID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgaW50IEFkZEhlaWdodCA9IChIZWxwZXIuTm90RGVza3RvcCA/IDQ1IDogMjIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8yNy43Nzc3OFxyXG5cclxuICAgICAgICAgICAgZG9jLkFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICAgICAgKERpc3BsYXlJbnB1dCA9IG5ldyBNZW1vSW5wdXQoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFJlYWRvbmx5ID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNCg0LCA0LCBcIigxMDAlIC0gOHB4KVwiLCBBZGRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICB9KS5Db250ZW50XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERpc3BsYXlJbnB1dC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgRGlzcGxheUlucHV0LkhlaWdodCA9IDQ1O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBMaXN0PFNpbXBsZUJ1dHRvbj4gYnV0dG9ucyA9IG5ldyBMaXN0PFNpbXBsZUJ1dHRvbj4oKTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbnMuQWRkUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICBuZXcgU2ltcGxlQnV0dG9uW10ge1xyXG4gICAgICAgICAgICAgICAgYnRuUFRBWCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIitUQVhcIiwgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnRuNyA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjdcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuOCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjhcIiwgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZFRleHRUb0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG45ID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiOVwiLCAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bkRpdiA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIi9cIiwgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuU3FydCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcInNxcnRcIiwgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuTVRBWCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIi1UQVhcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjQgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjUgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bjYgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCI2XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bk11bCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIipcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blBlciA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIiVcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blRBWCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIlRBWFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjFcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMiA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjJcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMyA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjNcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuTWludXMgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCItXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG4xT3ZlclggPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIxL3hcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bkRibCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIkRibFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IEFkZE9wZXJhdG9yXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRuMCA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIjBcIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRUZXh0VG9Db21tYW5kXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYnRucGx1c09yTmVnID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiKy8tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5Eb3QgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkVGV4dFRvQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0blBsdXMgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gQWRkT3BlcmF0b3JcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5FcSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIj1cIixcclxuICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBBZGRPcGVyYXRvclxyXG4gICAgICAgICAgICAgICAgfX0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpbnQgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICBpbnQgeSA9IDA7XHJcbiAgICAgICAgICAgIGludCB5T2Zmc2V0ID0gMjggKyBBZGRIZWlnaHQ7XHJcbiAgICAgICAgICAgIGJ0bkNsb3NlID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRleHQgPSBcIiZ0aW1lcztcIixcclxuICAgICAgICAgICAgICAgIFNpemUgPSBuZXcgVmVjdG9yMihcIigoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KVwiLCBcIigoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogMC4yKVwiKSxcclxuICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgxMDAlIC0gMjhweCkgKiBcIiArICg1ICogMC4xNjY2NjY2NjY2NjY2NjY3bSkgKyBcIikgKyBcIiArICgoNSAqIDQpICsgNCkgKyBcInB4KVwiLCBcIigoKDEwMCUgLSBcIiArIHlPZmZzZXQgKyBcInB4KSAqIFwiICsgKHkgKiAwLjJtKSArIFwiKSArIFwiICsgKCgoeSAqIDQpICsgOCkgKyBBZGRIZWlnaHQpICsgXCJweClcIiksXHJcbiAgICAgICAgICAgIEl0ZW1DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihPbkNsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ0bkNsb3NlLlN0eWxlLkZvbnRTaXplID0gXCIyNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnRuQmFjayA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZXh0ID0gXCJCYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBTaXplID0gbmV3IFZlY3RvcjIoXCIoKCgxMDAlIC0gMjRweCkgLSAoKDEwMCUgLSAyOHB4KSAqIDAuMTY2NjY2NjY2NjY2NjY2NykpICogMC4zMzMpXCIsIFwiKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiAwLjIpXCIpLFxyXG4gICAgICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigoKCgoMTAwJSAtIDI0cHgpIC0gKCgxMDAlIC0gMjhweCkgKiAwLjE2NjY2NjY2NjY2NjY2NjcpKSAqIDAuMzMzKSAqIDApICsgNHB4KVwiLCBcIigoKDEwMCUgLSBcIiArIHlPZmZzZXQgKyBcInB4KSAqIFwiICsgKHkgKiAwLjJtKSArIFwiKSArIFwiICsgKCgoeSAqIDQpICsgOCkgKyBBZGRIZWlnaHQpICsgXCJweClcIiksXHJcbiAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSBCYWNrXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgYnRuQmFjay5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICBidG5DRSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZXh0ID0gXCJDRVwiLFxyXG4gICAgICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKCgoMTAwJSAtIDI0cHgpIC0gKCgxMDAlIC0gMjhweCkgKiAwLjE2NjY2NjY2NjY2NjY2NjcpKSAqIDAuMzMzKVwiLCBcIigoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogMC4yKVwiKSxcclxuICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgoKDEwMCUgLSAyNHB4KSAtICgoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KSkgKiAwLjMzMykgKiAxKSArIDhweClcIiwgXCIoKCgxMDAlIC0gXCIgKyB5T2Zmc2V0ICsgXCJweCkgKiBcIiArICh5ICogMC4ybSkgKyBcIikgKyBcIiArICgoKHkgKiA0KSArIDgpICsgQWRkSGVpZ2h0KSArIFwicHgpXCIpLFxyXG4gICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBSZWZyZXNoVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICBidG5DRS5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICBidG5DID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRleHQgPSBcIkNcIixcclxuICAgICAgICAgICAgICAgIFNpemUgPSBuZXcgVmVjdG9yMihcIigoKCgxMDAlIC0gMjRweCkgLSAoKDEwMCUgLSAyOHB4KSAqIDAuMTY2NjY2NjY2NjY2NjY2NykpICogMC4zMzMpICsgNHB4KVwiLCBcIigoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogMC4yKVwiKSxcclxuICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgoKDEwMCUgLSAyNHB4KSAtICgoMTAwJSAtIDI4cHgpICogMC4xNjY2NjY2NjY2NjY2NjY3KSkgKiAwLjMzMykgKiAyKSArIDEycHgpXCIsIFwiKCgoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogXCIgKyAoeSAqIDAuMm0pICsgXCIpICsgXCIgKyAoKCh5ICogNCkgKyA4KSArIEFkZEhlaWdodCkgKyBcInB4KVwiKSxcclxuICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb21tYW5kcyA9IG5ldyBMaXN0PHN0cmluZz4oKTsgY3VycmVudF9jb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBSZWZyZXNoVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICBidG5DLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcblxyXG4gICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGRyZW4oYnRuQ2xvc2UuQ29udGVudCwgYnRuQmFjay5Db250ZW50LCBidG5DRS5Db250ZW50LCBidG5DLkNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgeSsrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IGJ1dHRvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uc1tpXS5TaXplID0gbmV3IFZlY3RvcjIoXCIoKDEwMCUgLSAyOHB4KSAqIDAuMTY2NjY2NjY2NjY2NjY2NylcIiwgXCIoKDEwMCUgLSBcIiArIHlPZmZzZXQgKyBcInB4KSAqIDAuMilcIik7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zW2ldLkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoKCgxMDAlIC0gMjhweCkgKiBcIiArIChpbmRleCAqIDAuMTY2NjY2NjY2NjY2NjY2N20pICsgXCIpICsgXCIgKyAoKGluZGV4ICogNCkgKyA0KSArIFwicHgpXCIsIFwiKCgoMTAwJSAtIFwiICsgeU9mZnNldCArIFwicHgpICogXCIgKyAoeSAqIDAuMm0pICsgXCIpICsgXCIgKyAoKCh5ICogNCkgKyA4KSArIEFkZEhlaWdodCkgKyBcInB4KVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNbaV0uU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGQoYnV0dG9uc1tpXS5Db250ZW50KTtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PSA2KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB5Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ0bkRibC5TdHlsZS5Gb250U2l6ZSA9IFwiNi41cHRcIjtcclxuICAgICAgICAgICAgYnRuVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG4gICAgICAgICAgICBidG5QVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG4gICAgICAgICAgICBidG5NVEFYLlN0eWxlLkZvbnRTaXplID0gXCI2LjVwdFwiO1xyXG5cclxuICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuQ29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcblxyXG4gICAgICAgICAgICBpZighQ2xvc2VCdXR0b25WaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJlZnJlc2hWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChkb2MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59XHJcbiIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ2hlY2tFZGl0IDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQgRWRpdDtcclxuICAgICAgICBwdWJsaWMgSFRNTFNwYW5FbGVtZW50IHNwYW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ2hlY2tlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEVkaXQuVGV4dC5Jc1RydWUoKSA9PSAxOyB9XHJcbiAgICAgICAgICAgIHNldCB7IEVkaXQuVGV4dCA9IHZhbHVlLlRvU3RyaW5nKCk7IH1cclxuICAgICAgICB9ICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIENoZWNrRWRpdChzdHJpbmcgbGFiZWwgPSBcIlwiKSA6IGJhc2UobmV3IEhUTUxMYWJlbEVsZW1lbnQoKSB7IENsYXNzTmFtZSA9IEJhc2VDbGFzcyhmYWxzZSwgdHJ1ZSkgfSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVkaXQgPSBuZXcgVGV4dElucHV0KElucHV0VHlwZS5DaGVja2JveCk7XHJcbiAgICAgICAgICAgIEVkaXQuQ29udHJvbGxlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNwYW4gPSBuZXcgSFRNTFNwYW5FbGVtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBUZXh0ID0gbGFiZWw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuQXBwZW5kQ2hpbGRyZW4oRWRpdCwgc3Bhbik7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIFRleHRJbnB1dChDaGVja0VkaXQgY2hlY2tFZGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrRWRpdC5FZGl0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBzcGFuLklubmVySFRNTDsgfVxyXG4gICAgICAgICAgICBzZXQgeyBzcGFuLklubmVySFRNTCA9IHZhbHVlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIFRleHRJbnB1dCA6IENvbnRyb2xcclxuXHR7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgcHJldlRleHQgPSBcIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFRleHRJbnB1dD4gT25UZXh0Q2hhbmdlZCA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxUZXh0SW5wdXQsIEtleWJvYXJkRXZlbnQ+IE9uS2V5RG93biA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxUZXh0SW5wdXQsIEtleWJvYXJkRXZlbnQ+IE9uS2V5VXAgPSBudWxsO1xyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248VGV4dElucHV0LCBLZXlib2FyZEV2ZW50PiBPbktleVByZXNzID0gbnVsbDtcclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFRleHRJbnB1dD4gT25Hb3RGb2N1cyA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxUZXh0SW5wdXQ+IE9uTG9zdEZvY3VzID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTdWJtaXQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEdvTmV4dCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIE9uRm9jdXNEb250U2VsZWN0QWxsIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgX2Rpc3BsYXlGb3JtYXQgPSBcIlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIFNldERpc3BsYXlGb3JtYXQoc3RyaW5nIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Rpc3BsYXlGb3JtYXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgZm9ybWF0VGV4dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERpc3BsYXlGb3JtYXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kaXNwbGF5Rm9ybWF0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEaXNwbGF5Rm9ybWF0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2Rpc3BsYXlGb3JtYXQ7IH1cclxuICAgICAgICAgICAgc2V0IHtcclxuICAgICAgICAgICAgICAgIFNldERpc3BsYXlGb3JtYXQodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIENvbnRyb2xsZXIgPSBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBJbnB1dFR5cGUgVHlwZTtcclxuICAgICAgICBwdWJsaWMgYm9vbCBEaXNhYmxlRm9jdXNQb3B1cDtcclxuICAgICAgICBwcml2YXRlIGJvb2wgSXNPdmVycmlkZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0VmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuSW5uZXJIVE1MO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBTZXRWYWx1ZShzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb250ZW50LklubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dChIVE1MRWxlbWVudCBvdmVycmlkZUVsZW1lbnQsIGJvb2wgYWRkSW5wdXRDb250cm9sID0gdHJ1ZSwgYm9vbCBhZGRFdmVudHNPbkNvbnRyb2wgPSB0cnVlKSA6IGJhc2Uob3ZlcnJpZGVFbGVtZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb3ZlcnJpZGVFbGVtZW50LkNsYXNzTmFtZSA9IChhZGRJbnB1dENvbnRyb2wgPyBcImlucHV0Y29udHJvbFwiIDogXCJcIikgKyBCYXNlQ2xhc3MoYWRkSW5wdXRDb250cm9sKTtcclxuICAgICAgICAgICAgSXNPdmVycmlkZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKGFkZEV2ZW50c09uQ29udHJvbClcclxuICAgICAgICAgICAgICAgIGFkZEV2ZW50cygpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBPbkZvY3VzKClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBIVE1MSW5wdXRFbGVtZW50IEdldElucHV0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKENvbnRlbnQuSXM8SFRNTElucHV0RWxlbWVudD4oKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuQXM8SFRNTElucHV0RWxlbWVudD4oKTtcclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbnRlbnQuQXM8SFRNTElucHV0RWxlbWVudD4oKTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlY2ltYWwgR2V0TnVtYmVyVmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGVjaW1hbCB2YWx1ZSA9IFRleHQuU3RyaXBOb25OdW1iZXJTdHJpbmcoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9iamVjdCBHZXRFZGl0VmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoVHlwZSA9PSBJbnB1dFR5cGUuTnVtYmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWNpbWFsIHZhbHVlID0gVGV4dC5TdHJpcE5vbk51bWJlclN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2Nyb2xsKGludCB2YWx1ZSwgSFRNTEVsZW1lbnQgcGFyZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFyZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHBhcmVudC5TY3JvbGxUb3AgPSB2YWx1ZTtcclxuICAgICAgICAgICAgLy9HbG9iYWwuU2V0VGltZW91dCgoKSA9PlxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgaWYodGhpcy5Db250ZW50LlBhcmVudEVsZW1lbnQgPT0gbnVsbCB8fCB0aGlzLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50ID09IG51bGwpXHJcbiAgICAgICAgICAgIC8vICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vICAgIHRoaXMuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuU2Nyb2xsVG9wID0gdmFsdWU7XHJcbiAgICAgICAgICAgIC8vfSwgMCk7ICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBHZXREaXNwbGF5VmFsdWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShEaXNwbGF5Rm9ybWF0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHQ7XHJcbiAgICAgICAgICAgIH1lbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFR5cGUgPT0gSW5wdXRUeXBlLk51bWJlcilcclxuICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGRlY2ltYWwgdmFsdWUgPSBUZXh0LlN0cmlwTm9uTnVtYmVyU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRGlzcGxheUZvcm1hdC5Ub0xvd2VyKCkuU3RhcnRzV2l0aChcImNcIikpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib29sIHdhc05lZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc05lZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IC12YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAod2FzTmVnID8gXCItXCIgOiBcIlwiKSArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nLkZvcm1hdChcIiR7MDpcIiArIERpc3BsYXlGb3JtYXQuUmVwbGFjZShcImNcIiwgXCJuXCIpLlJlcGxhY2UoXCJDXCIsIFwiTlwiKSArIFwifVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihEaXNwbGF5Rm9ybWF0LlRvTG93ZXIoKS5TdGFydHNXaXRoKFwicFwiKSlcclxuICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCB2YWx1ZSA9PSAwID8gMCA6IHZhbHVlIC8gMTAwLjBtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MDpcIiArIERpc3BsYXlGb3JtYXQgKyBcIn1cIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmIChUeXBlID09IElucHV0VHlwZS5EYXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIERhdGVUaW1lIHZhbHVlID0gVGV4dC5TdHJpcE5vbkRhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA9PSBEYXRlVGltZS5NaW5WYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MDpcIiArIERpc3BsYXlGb3JtYXQgKyBcIn1cIiwgVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBmb3JtYXRUZXh0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IEdldElucHV0KCk7XHJcbiAgICAgICAgICAgIGlmKGlucHV0ICE9IG51bGwgJiYgaW5wdXQgIT0gRG9jdW1lbnQuQWN0aXZlRWxlbWVudCkgLy8gSXMgQWN0aXZlXHJcbiAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShEaXNwbGF5Rm9ybWF0KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dC5UeXBlID0gSW5wdXRUeXBlLlRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG5ld1RleHQgPSBHZXREaXNwbGF5VmFsdWUoKTsgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld1RleHQgIT0gVGV4dClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSBuZXdUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwcml2YXRlIHN0cmluZyBQcmVaSW5kZXg7XHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIGFkZEV2ZW50cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighSXNPdmVycmlkZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgICAgIGlmKGlucHV0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKERpc3BsYXlGb3JtYXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoVHlwZSA9PSBJbnB1dFR5cGUuUGFzc3dvcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LlR5cGUgPSBJbnB1dFR5cGUuVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5PbkJsdXIgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuWkluZGV4ID0gUHJlWkluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcm1hdFRleHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihPbkxvc3RGb2N1cyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uTG9zdEZvY3VzKHRoaXMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25Gb2N1cyA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJlWkluZGV4ID0gQ29udGVudC5TdHlsZS5aSW5kZXg7XHJcbiAgICAgICAgICAgICAgICBDb250ZW50LlN0eWxlLlpJbmRleCA9IFwiMTAwMDBcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBPbkZvY3VzKCk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gR2V0SW5wdXQoKTtcclxuICAgICAgICAgICAgICAgIGlmKGlucHV0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoRGlzcGxheUZvcm1hdCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQgPSBUZXh0LlN0cmlwTm9uTnVtYmVyU3RyaW5nKCkuVG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKEV4Y2VwdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCIwLjAwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFIZWxwZXIuSXNGaXJlRm94KCkgJiYgIVJlYWRvbmx5ICYmIFR5cGUgIT0gSW5wdXRUeXBlLkRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5UeXBlID0gVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihUeXBlICE9IElucHV0VHlwZS5DaGVja2JveCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLk9uRm9jdXNTZWxlY3RBbGwgJiYgIU9uRm9jdXNEb250U2VsZWN0QWxsKSAvLyAmJiBIZWxwZXIuSXNGaXJlRm94KCkgJiYgQnJvd3Nlci5Jc0lFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LlNlbGVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoT25Hb3RGb2N1cyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uR290Rm9jdXModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIURpc2FibGVGb2N1c1BvcHVwICYmICFSZWFkb25seSAmJiBFbmFibGVkICYmIEhlbHBlci5Ob3REZXNrdG9wICYmICEodGhpcyBpcyBUZXh0SW5wdXREcm9wRG93bikgJiYgQ29udHJvbGxlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFTZXR0aW5ncy5EaXNhYmxlVGV4dFBvcHVwRWRpdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0Rm9ybSh0aGlzKS5TaG93UG9wdXAobmV3IFZlY3RvcjIoMCwgMCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25DaGFuZ2UgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgIENoZWNrVGV4dENoYW5nZWQoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25LZXlQcmVzcyA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2hlY2tUZXh0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoT25LZXlQcmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uS2V5UHJlc3ModGhpcywgZXYpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25LZXlEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDaGVja1RleHRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICBpZihPbktleURvd24gIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbktleURvd24odGhpcywgZXYpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuT25LZXlVcCA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2hlY2tUZXh0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYoT25LZXlVcCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uS2V5VXAodGhpcywgZXYpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUGFzdGUsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENoZWNrVGV4dENoYW5nZWQoKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuQWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ3V0LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBDaGVja1RleHRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW5wdXRUeXBlIEZpeElucHV0KElucHV0VHlwZSB0eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodHlwZSA9PSBJbnB1dFR5cGUuRGF0ZSB8fCAoSGVscGVyLklzRmlyZUZveCgpICYmIHR5cGUgIT0gSW5wdXRUeXBlLlBhc3N3b3JkICYmIHR5cGUgIT0gSW5wdXRUeXBlLkNoZWNrYm94KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIElucHV0VHlwZS5UZXh0O1xyXG4gICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dChJbnB1dFR5cGUgdHlwZSA9IElucHV0VHlwZS5UZXh0LCBib29sIGFjID0gdHJ1ZSkgOiBiYXNlKFwiaW5wdXRjb250cm9sXCIsIEZpeElucHV0KHR5cGUpLCBhYylcclxuXHRcdHtcdFx0XHRcclxuICAgICAgICAgICAgVHlwZSA9IHR5cGU7XHJcblxyXG4gICAgICAgICAgICBpZihUeXBlID09IElucHV0VHlwZS5OdW1iZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVGV4dEFsaWduID0gVGV4dEFsaWduLlJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5UZXh0SW5kZW50ID0gXCIzcHhcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuUGFkZGluZ1JpZ2h0ID0gXCIzcHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5Rm9ybWF0ID0gXCJuMlwiOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfWVsc2UgaWYoVHlwZSA9PSBJbnB1dFR5cGUuRGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9IG5ldyBzdHJpbmdbM107XHJcbiAgICAgICAgICAgICAgICBzdHJbKGludClTZXR0aW5ncy5EYXlQb3NpdGlvbl0gPSBcImRkXCI7XHJcbiAgICAgICAgICAgICAgICBzdHJbKGludClTZXR0aW5ncy5Nb250aFBvc2l0aW9uXSA9IFwiTU1cIjtcclxuICAgICAgICAgICAgICAgIHN0clsoaW50KVNldHRpbmdzLlllYXJQb3NpdGlvbl0gPSBcInl5eXlcIjtcclxuICAgICAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgMzsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuQXBwZW5kKHN0cltpXSArIFNldHRpbmdzLkRhdGVTZXBlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5MZW5ndGgtLTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5Rm9ybWF0ID0gYnVpbGRlci5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhZGRFdmVudHMoKTsgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGZvcm1hdFRleHQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBDaGVja1RleHRDaGFuZ2VkKClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChUZXh0ICE9IHByZXZUZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT25UZXh0Q2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uVGV4dENoYW5nZWQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dCA9IFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLlJlbmRlcigpO1xyXG4gICAgICAgICAgICBwcmV2VGV4dCA9IFRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRleHRcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKElzT3ZlcnJpZGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVHlwZSA9PSBJbnB1dFR5cGUuQ2hlY2tib3gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Db250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCkuQ2hlY2tlZC5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Db250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCkuVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgaWYoSXNPdmVycmlkZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBTZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoVHlwZSA9PSBJbnB1dFR5cGUuQ2hlY2tib3gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLlRvTG93ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Db250ZW50LkFzPEhUTUxJbnB1dEVsZW1lbnQ+KCkuQ2hlY2tlZCA9IHZhbHVlLklzVHJ1ZSgpID09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5BczxIVE1MSW5wdXRFbGVtZW50PigpLlZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBDaGVja1RleHRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTZXREYXRlKHN0cmluZyBkYXRlKVxyXG5cdFx0e1x0XHRcdFxyXG5cdFx0XHRpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShkYXRlKSlcclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgdmFyIGRkID0gZGF0ZS5TdHJpcE5vbkRhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmKGRkID09IERhdGVUaW1lLk1pblZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gc3RyaW5nLkZvcm1hdChcInswOlwiICsgRGlzcGxheUZvcm1hdCArIFwifVwiLCBkZCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgc3RyaW5nIEdldERhdGUoKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShUZXh0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRkID0gVGV4dC5TdHJpcE5vbkRhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmKGRkID09IERhdGVUaW1lLk1pblZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwiezA6XCIgKyBEaXNwbGF5Rm9ybWF0ICsgXCJ9XCIsIGRkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgR2V0RGF0ZVRpbWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRleHQuU3RyaXBOb25EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBib29sIElzTnVtZXJpY1R5cGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFR5cGUgPT0gSW5wdXRUeXBlLk51bWJlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRGF0ZVR5cGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFR5cGUgPT0gSW5wdXRUeXBlLkRhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblx0XHRwdWJsaWMgYm9vbCBFbmFibGVkXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBlbmFibGVkOyB9XHJcblx0XHRcdHNldCB7XHJcblx0XHRcdFx0ZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYoZW5hYmxlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuUmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5TZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBib29sIF9yZWFkb25seSA9IGZhbHNlO1xyXG5cdFx0cHVibGljIGJvb2wgUmVhZG9ubHlcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIF9yZWFkb25seTsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdF9yZWFkb25seSA9IHZhbHVlO1xyXG5cdFx0XHRcdGlmKF9yZWFkb25seSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgKF9yZWFkb25seSkuVG9TdHJpbmcoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0aGlzLkNvbnRlbnQuUmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHRcdFxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERhdGVDb250cm9sIDogQ29udHJvbFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuVG9wO1xyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24gYnRuU2VsZWN0ZWRSYW5nZTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blRvZGF5O1xyXG5cclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkxlZnQ7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5SaWdodDtcclxuXHJcbiAgICAgICAgcHVibGljIENvbnRyb2wgQ29udGVudFJhbmdlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgaW50IFNlbGVjdGVkWWVhcjtcclxuICAgICAgICBwcml2YXRlIGludCBTZWxlY3RlZE1vbnRoO1xyXG4gICAgICAgIHByaXZhdGUgaW50IFNlbGVjdGVkRGF5OyAgICAgICAgXHJcblxyXG4gICAgICAgIHByaXZhdGUgRGlzcGxheU1vZGUgX2FjdGl2ZURpc3BsYXlNb2RlID0gRGlzcGxheU1vZGUuRGF5O1xyXG5cclxuICAgICAgICBwdWJsaWMgRGlzcGxheU1vZGUgQWN0aXZlRGlzcGxheU1vZGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfYWN0aXZlRGlzcGxheU1vZGU7IH1cclxuICAgICAgICAgICAgc2V0IHtcclxuICAgICAgICAgICAgICAgIGlmKF9hY3RpdmVEaXNwbGF5TW9kZSAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlRGlzcGxheU1vZGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBSZWZyZXNoVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZVRpbWUgR2V0Vmlld0RhdGVUaW1lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoU2VsZWN0ZWRZZWFyLCBTZWxlY3RlZE1vbnRoLCBTZWxlY3RlZERheSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTZXRWaWV3RGF0ZVRpbWUoRGF0ZVRpbWUgZGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuZXdTZWxlY3RlZFllYXIgPSBkYXRlLlllYXI7XHJcbiAgICAgICAgICAgIHZhciBuZXdTZWxlY3RlZE1vbnRoID0gZGF0ZS5Nb250aDtcclxuICAgICAgICAgICAgdmFyIG5ld1NlbGVjdGVkRGF5ID0gZGF0ZS5EYXk7XHJcblxyXG4gICAgICAgICAgICBpZihuZXdTZWxlY3RlZFllYXIgIT0gU2VsZWN0ZWRZZWFyIHx8IFxyXG4gICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWRNb250aCAhPSBTZWxlY3RlZE1vbnRoIHx8IFxyXG4gICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWREYXkgIT0gU2VsZWN0ZWREYXkgfHwgZGF0ZSA9PSBEYXRlVGltZS5Ub2RheSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRZZWFyID0gbmV3U2VsZWN0ZWRZZWFyO1xyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRNb250aCA9IG5ld1NlbGVjdGVkTW9udGg7XHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZERheSA9IG5ld1NlbGVjdGVkRGF5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE9uRGF0ZUNoYW5nZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPbkRhdGVDaGFuZ2VkKGRhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIFJlZnJlc2hWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248RGF0ZVRpbWU+IE9uRGF0ZUNoYW5nZWQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0cmluZ1tdIERheXMgPSBuZXcgc3RyaW5nW10ge1xyXG4gICAgICAgICAgICBcIk1PXCIsXHJcbiAgICAgICAgICAgIFwiVFVcIixcclxuICAgICAgICAgICAgXCJXRVwiLFxyXG4gICAgICAgICAgICBcIlRIXCIsXHJcbiAgICAgICAgICAgIFwiRlJcIixcclxuICAgICAgICAgICAgXCJTQVwiLFxyXG4gICAgICAgICAgICBcIlNVXCJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWZyZXNoVmlldygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IEdldFZpZXdEYXRlVGltZSgpO1xyXG4gICAgICAgICAgICBidG5Ub3AuVGV4dCA9IGRhdGUuVG9TdHJpbmcoXCJkZGQsIGRkIE1NTSB5eXl5XCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGRvYyA9IERvY3VtZW50LkNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaChfYWN0aXZlRGlzcGxheU1vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRGlzcGxheU1vZGUuRGF5OlxyXG4gICAgICAgICAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuVGV4dCA9IGRhdGUuVG9TdHJpbmcoXCJNTU0geXl5eVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgc3RhcnREYXRlID0gbmV3IERhdGVUaW1lKGRhdGUuWWVhciwgZGF0ZS5Nb250aCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgRGF0ZVRpbWUgZW5kRGF0ZSA9IHN0YXJ0RGF0ZS5BZGRNb250aHMoMSkuQWRkRGF5cygtMSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnQgVG90YWxEYXlzID0gKGVuZERhdGUgLSBzdGFydERhdGUpLkRheXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGFydERheUluZGV4ID0gKHN0YXJ0RGF0ZS5EYXlPZldlZWsgPT0gRGF5T2ZXZWVrLlN1bmRheSA/IDcgOiAoaW50KXN0YXJ0RGF0ZS5EYXlPZldlZWspIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgb2Zmc2V0U3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGludCByb3cgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBEYXRlVGltZSBzdGFydE91dHNpZGUgPSBzdGFydERheUluZGV4ID09IDAgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGUgOiBzdGFydERhdGUuQWRkRGF5cygtc3RhcnREYXlJbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbmREYXlJbmRleCA9IChlbmREYXRlLkRheU9mV2VlayA9PSBEYXlPZldlZWsuU3VuZGF5ID8gNyA6IChpbnQpZW5kRGF0ZS5EYXlPZldlZWspIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgNDI7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERhdGVUaW1lIGN1ckRhdGUgPSBzdGFydE91dHNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ0biA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0ID0gY3VyRGF0ZS5EYXkuVG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJvdW5kcyA9IG5ldyBWZWN0b3I0KFwiKDEwMCUgKiBcIiArIChvZmZzZXRTdGFydCAqIDAuMTQyOCkgKyBcIilcIiwgXCIoKCgxMDAlIC0gXCIgKyAoSGVscGVyLk5vdERlc2t0b3AgPyAyNiA6IDEzKSArIFwicHgpICogXCIgKyAoKHJvdyAtIDEpICogMC4xNjY2KSArIFwiKSArIFwiICsgKEhlbHBlci5Ob3REZXNrdG9wID8gMjYgOiAxMykgKyBcInB4KVwiLCBcIigxMDAlICogMC4xNDI4KVwiLCBcIigoMTAwJSAtIFwiICsgKEhlbHBlci5Ob3REZXNrdG9wID8gMjYgOiAxMykgKyBcInB4KSAqIFwiICsgMC4xNjY2ICsgXCIpXCIpLCAvLyAgb2Zmc2V0U3RhcnQgKiAzMCwgICgyMiAqIHJvdykgLSA2LCAzMCwgMjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihHZXRWaWV3RGF0ZVRpbWUoKSA9PSBjdXJEYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoT25SZXF1ZXN0VG9DbG9zZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT25SZXF1ZXN0VG9DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXRWaWV3RGF0ZVRpbWUoY3VyRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyRGF0ZSA9PSBkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uQ2xhc3NMaXN0LkFkZChcInNpbXBsZWJ1dHRvbi1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlN0eWxlLkJvcmRlckNvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VyRGF0ZSA8IHN0YXJ0RGF0ZSB8fCBjdXJEYXRlID4gZW5kRGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9idG4uU3R5bGUuQ29sb3IgPSBcInJnYigyMTEsIDIxMSwgMjExKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoY3VyRGF0ZS5EYXlPZldlZWsgPT0gRGF5T2ZXZWVrLlNhdHVyZGF5IHx8IGN1ckRhdGUuRGF5T2ZXZWVrID09IERheU9mV2Vlay5TdW5kYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TdHlsZS5Db2xvciA9IFwicmdiKDE5MSwgMTEsIDExKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlN0eWxlLkZpbHRlciA9IFwiYnJpZ2h0bmVzcygxMTAlKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlN0eWxlLkZpbHRlciA9IFwiYnJpZ2h0bmVzcygxMTAlKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5Db250ZW50Lk9uS2V5RG93biA9IEJsb2NrVGFiRXZlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuQXBwZW5kQ2hpbGQoYnRuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFN0YXJ0Kys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvZmZzZXRTdGFydCA+IDYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0U3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydE91dHNpZGUgPSBzdGFydE91dHNpZGUuRGF0ZS5BZGREYXlzKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdGFydE91dHNpZGUuSG91ciA9PSAyMylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPdXRzaWRlID0gc3RhcnRPdXRzaWRlLkFkZEhvdXJzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IHggPSAwOyB4IDwgNzsgeCsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gTGFiZWwoRGF5c1t4XSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLlNldExvY2F0aW9uKFwiKDEwMCUgKiBcIiArICh4ICogMC4xNDI4KSArIFwiICsgKCgxMDAlICogMC4xNDI4KSAqIDAuNDUpIC0gNnB4KVwiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQm91bmRzID0gbmV3IFZlY3RvcjQoXCIoMTAwJSAqIFwiICsgKG9mZnNldFN0YXJ0ICogMC4xNDI4KSArIFwiKVwiLCBcIigoMTAwJSAqIFwiICsgKHJvdyAqIDAuMTY2NikgKyBcIikgKyAoMTAwJSAqIDAuMTY2NikpXCIsIFwiKDEwMCUgKiAwLjE0MjgpXCIsIFwiKCgxMDAlICogXCIgKyAwLjE2NjYgKyBcIikgKyAoMTAwJSAqIDAuMTY2NikpXCIpLCAvLyAgb2Zmc2V0U3RhcnQgKiAzMCwgICgyMiAqIHJvdykgLSA2LCAzMCwgMjJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIERpc3BsYXlNb2RlLk1vbnRoOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udGVudFJhbmdlLkNvbnRlbnQuRW1wdHkoKTsgLy8gZW1wdHkgYW5kIHJlLWNyZWF0ZVxyXG4gICAgICAgICAgICBDb250ZW50UmFuZ2UuQ29udGVudC5BcHBlbmRDaGlsZChkb2MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEFjdGlvbiBPblJlcXVlc3RUb0Nsb3NlO1xyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBCbG9ja1RhYkV2ZW50KEtleWJvYXJkRXZlbnQgZXYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKE9uUmVxdWVzdFRvQ2xvc2UgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBPblJlcXVlc3RUb0Nsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgRGF0ZUNvbnRyb2woRGF0ZVRpbWUgc3RhcnREYXRlKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKDIzMCwgMjQ1KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uS2V5RG93biA9IEJsb2NrVGFiRXZlbnQ7XHJcblxyXG4gICAgICAgICAgICBidG5Ub3AgPSBuZXcgU2ltcGxlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIGJ0blRvcC5TdHlsZS5UcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgtNTAlLCAwKVwiO1xyXG4gICAgICAgICAgICBidG5Ub3AuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvcC5TdHlsZS5NYXJnaW5SaWdodCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvcC5Ub3AgPSA2O1xyXG4gICAgICAgICAgICBidG5Ub3AuV2lkdGggPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgYnRuVG9wLlN0eWxlLkJvcmRlckNvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBidG5Ub3AuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuXHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UgPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgIE1vdmVVcCgpO1xyXG4gICAgICAgICAgICB9IH07XHJcblxyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlN0eWxlLlRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKC01MCUsIDApXCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuTWFyZ2luUmlnaHQgPSBcIjUwJVwiO1xyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlRvcCA9ICAzMDtcclxuICAgICAgICAgICAgYnRuU2VsZWN0ZWRSYW5nZS5XaWR0aCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlN0eWxlLkJvcmRlckNvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLkNvbnRlbnQuT25LZXlEb3duID0gQmxvY2tUYWJFdmVudDtcclxuXHJcbiAgICAgICAgICAgIGJ0bkxlZnQgPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBUZXh0ID0gXCI8XCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMTQsIDM2KSwgU2l6ZSA9IG5ldyBWZWN0b3IyKDEzLCAxMyksIEl0ZW1DbGljayA9IChldikgPT4geyBNb3ZlTGVmdCgpOyB9IH07XHJcbiAgICAgICAgICAgIGJ0bkxlZnQuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgYnRuUmlnaHQgPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBUZXh0ID0gXCI+XCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDI2cHgpXCIsIDM2KSwgU2l6ZSA9IG5ldyBWZWN0b3IyKDEzLCAxMyksIEl0ZW1DbGljayA9IChldikgPT4geyBNb3ZlUmlnaHQoKTsgfSB9O1xyXG4gICAgICAgICAgICBidG5SaWdodC5Db250ZW50Lk9uS2V5RG93biA9IEJsb2NrVGFiRXZlbnQ7XHJcblxyXG4gICAgICAgICAgICBidG5MZWZ0LlN0eWxlLkJvcmRlclJhZGl1cyA9IFwiNTAlXCI7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGJ0blJpZ2h0LlN0eWxlLkJvcmRlclJhZGl1cyA9IFwiNTAlXCI7XHJcblxyXG4gICAgICAgICAgICBidG5MZWZ0LlN0eWxlLkxpbmVIZWlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgYnRuUmlnaHQuU3R5bGUuTGluZUhlaWdodCA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ0blNlbGVjdGVkUmFuZ2UuSGVpZ2h0ID0gMzY7XHJcbiAgICAgICAgICAgICAgICBidG5TZWxlY3RlZFJhbmdlLlRvcCA9IDQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0blRvcC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuVG9wLkhlaWdodCA9IDM2O1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0bkxlZnQuU2l6ZSA9IG5ldyBWZWN0b3IyKDM2LCAzNik7XHJcbiAgICAgICAgICAgICAgICBidG5MZWZ0LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5MZWZ0LlRvcCA9IDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0blJpZ2h0LlNpemUgPSBuZXcgVmVjdG9yMigzNiwgMzYpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJ0blJpZ2h0LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5SaWdodC5Ub3AgPSAyMDtcclxuICAgICAgICAgICAgICAgIGJ0blJpZ2h0LkxlZnQgPSBcIigxMDAlIC0gNTBweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBDb250ZW50UmFuZ2UgPSBuZXcgQ29udHJvbCgpIHsgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAyMHB4KVwiLCBcIigxMDAlIC0gMTQ3cHgpXCIpLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDExLCA5MCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENvbnRlbnRSYW5nZSA9IG5ldyBDb250cm9sKCkgeyBTaXplID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDIwcHgpXCIsIFwiKDEwMCUgLSA5MnB4KVwiKSwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigxMSwgNjApIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBDb250ZW50UmFuZ2UuQ29udGVudC5PbktleURvd24gPSBCbG9ja1RhYkV2ZW50O1xyXG5cclxuICAgICAgICAgICAgYnRuVG9kYXkgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiVG9kYXlcIixcclxuICAgICAgICAgICAgICAgIFdpZHRoID0gNTAsXHJcbiAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBBY3RpdmVEaXNwbGF5TW9kZSA9IERpc3BsYXlNb2RlLkRheTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFNldFZpZXdEYXRlVGltZShEYXRlVGltZS5Ub2RheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoT25EYXRlQ2hhbmdlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPbkRhdGVDaGFuZ2VkKERhdGVUaW1lLlRvZGF5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoR2V0Vmlld0RhdGVUaW1lKCkgPT0gRGF0ZVRpbWUuVG9kYXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihPblJlcXVlc3RUb0Nsb3NlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPblJlcXVlc3RUb0Nsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYnRuVG9kYXkuU3R5bGUuVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoLTUwJSwgMClcIjtcclxuICAgICAgICAgICAgYnRuVG9kYXkuU3R5bGUuTGVmdCA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLk1hcmdpblJpZ2h0ID0gXCI1MCVcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuICAgICAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0blRvZGF5LlN0eWxlLk1pbldpZHRoID0gXCI2MHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5XaWR0aCA9IFwiKDEwMCUgKiAwLjE0MjgpXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBidG5Ub2RheS5Ub3AgPSBcIigxMDAlIC0gMjZweClcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGJ0blRvZGF5LkNvbnRlbnQuT25LZXlEb3duID0gQmxvY2tUYWJFdmVudDtcclxuXHJcbiAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZHJlbihidG5Ub3AsIGJ0bkxlZnQsIGJ0blNlbGVjdGVkUmFuZ2UsIGJ0blJpZ2h0LCBDb250ZW50UmFuZ2UsIGJ0blRvZGF5KTtcclxuICAgICAgICAgICAgaWYoc3RhcnREYXRlID09IERhdGVUaW1lLk1pblZhbHVlKVxyXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlID0gRGF0ZVRpbWUuVG9kYXk7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKGRvYyk7XHJcblxyXG4gICAgICAgICAgICBTZXRWaWV3RGF0ZVRpbWUoc3RhcnREYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1vdmVMZWZ0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1vdmVMZWZ0T3JSaWdodCgtMSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW92ZVVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYoX2FjdGl2ZURpc3BsYXlNb2RlICE9IERpc3BsYXlNb2RlLlllYXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9hY3RpdmVEaXNwbGF5TW9kZSsrO1xyXG4gICAgICAgICAgICAgICAgUmVmcmVzaFZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICBcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgdm9pZCBNb3ZlTGVmdE9yUmlnaHQoaW50IHRpbWVzVmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IEdldFZpZXdEYXRlVGltZSgpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoKF9hY3RpdmVEaXNwbGF5TW9kZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5EYXk6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IGRhdGUuQWRkTW9udGhzKCgxICogdGltZXNWYWx1ZSkpOyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5Nb250aDpcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gZGF0ZS5BZGRNb250aHMoKDEyICogdGltZXNWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBEaXNwbGF5TW9kZS5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlLkFkZFllYXJzKCgxMjAgKiB0aW1lc1ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTZXRWaWV3RGF0ZVRpbWUoZGF0ZSk7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW92ZVJpZ2h0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1vdmVMZWZ0T3JSaWdodCgxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIERpc3BsYXlNb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEYXksXHJcbiAgICAgICAgICAgIE1vbnRoLFxyXG4gICAgICAgICAgICBZZWFyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgR3JpZExvb2t1cEVkaXQgOiBDb250cm9sXHJcblx0e1xyXG5cdFx0cHVibGljIEdyaWRWaWV3IGdyaWRWaWV3O1xyXG5cdFx0cHVibGljIHN0cmluZyBGaWVsZE5hbWU7XHJcblx0XHRwdWJsaWMgc3RyaW5nIERpc3BsYXlOYW1lO1xyXG5cdFx0cHJpdmF0ZSBib29sIFZpc2libGU7XHRcdFxyXG5cdFx0XHRcdFxyXG5cdFx0cHVibGljIEdyaWRMb29rdXBFZGl0KCkgOiBiYXNlKFwiaW5wdXRjb250cm9sXCIsIENvbWJvQm94VHlwZXMuRGVmYXVsdClcclxuXHRcdHtcclxuXHRcdFx0Z3JpZFZpZXcgPSBuZXcgR3JpZFZpZXcodHJ1ZSwgdHJ1ZSkgeyBTaXplID0gbmV3IFZlY3RvcjIoMjUwLCA0MDApIH07XHJcblx0XHRcdGdyaWRWaWV3LkNvbnRleHRNZW51ID0gbnVsbDtcclxuXHRcdFx0Z3JpZFZpZXcuT25Gb2N1c2VkUm93Q2hhbmdlZCA9IChyb3dIYW5kbGUsIFByZXZSb3doYW5kbGUpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLkNvbnRlbnQuRW1wdHkoKTtcclxuXHJcblx0XHRcdFx0aWYocm93SGFuZGxlID4gLTEpXHRcdFx0XHRcclxuXHRcdFx0XHR7XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHRoaXMuQ29udGVudC5BcHBlbmRDaGlsZChuZXcgSFRNTE9wdGlvbkVsZW1lbnQoKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRJbm5lckhUTUwgPSAoZ3JpZFZpZXcuR2V0Um93Q2VsbFZhbHVlKHJvd0hhbmRsZSwgRGlzcGxheU5hbWUpIGFzIHN0cmluZyksXHJcblx0XHRcdFx0XHRcdFZhbHVlID0gKGdyaWRWaWV3LkdldFJvd0NlbGxWYWx1ZShyb3dIYW5kbGUsIEZpZWxkTmFtZSkgYXMgc3RyaW5nKVxyXG5cdFx0XHRcdFx0fSk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihWaXNpYmxlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdENsb3NlUG9wdXAoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRncmlkVmlldy5Db250ZW50Lk9uTW91c2VMZWF2ZSA9IChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdENsb3NlUG9wdXAoKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0dGhpcy5Db250ZW50Lk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZXYuUHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRldi5TdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRpZihWaXNpYmxlKVxyXG5cdFx0XHRcdFx0Q2xvc2VQb3B1cCgpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFNob3dQb3B1cCgpO1xyXG5cdFx0XHR9O1xyXG5cdFx0fVx0XHRcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTaG93UG9wdXAoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihWaXNpYmxlKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0dmFyIHggPSB0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdGdyaWRWaWV3LkxvY2F0aW9uID0gbmV3IFZlY3RvcjIoKGludCl4LkxlZnQsIChpbnQpKHguVG9wICsgeC5IZWlnaHQpKTtcclxuXHRcdFx0XHJcblx0XHRcdENvbnRleHRNZW51LlRvdGFsQ29udGV4dEhhbmRsZXMrKztcclxuXHRcdFx0dGhpcy5Db250ZW50LlBhcmVudEVsZW1lbnQuQXBwZW5kQ2hpbGQoZ3JpZFZpZXcpO1xyXG5cclxuXHRcdFx0Z3JpZFZpZXcuUmVuZGVyR3JpZCgpO1xyXG5cclxuXHRcdFx0Z3JpZFZpZXcuQ29udGVudC5TdHlsZS5aSW5kZXggPSAoQ29udGV4dE1lbnUuVG90YWxDb250ZXh0SGFuZGxlcyArIFNldHRpbmdzLkNvbnRleHRNZW51U3RhcnRpbmdaSW5kZXgpLlRvU3RyaW5nKCk7XHJcblx0XHRcdFZpc2libGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIENsb3NlUG9wdXAoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihWaXNpYmxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z3JpZFZpZXcuQ29udGVudC5QYXJlbnRFbGVtZW50LlJlbW92ZUNoaWxkKGdyaWRWaWV3KTtcclxuXHRcdFx0XHRDb250ZXh0TWVudS5Ub3RhbENvbnRleHRIYW5kbGVzLS07XHJcblx0XHRcdFx0VmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIEJyaWRnZS5qUXVlcnkyO1xyXG51c2luZyBCcmlkZ2U7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5EaWFnbm9zdGljcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBjbGFzcyBHcmlkVmlldyA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwdWJsaWMgSFRNTERpdkVsZW1lbnQgR3JpZEhlYWRlcjtcclxuXHRcdHB1YmxpYyBIVE1MRGl2RWxlbWVudCBHcmlkSGVhZGVyQ29udGFpbmVyO1xyXG5cdFx0cHVibGljIEhUTUxEaXZFbGVtZW50IEdyaWRCb2R5Q29udGFpbmVyO1xyXG5cdFx0cHVibGljIEhUTUxEaXZFbGVtZW50IEdyaWRCb2R5O1xyXG5cclxuXHRcdHByaXZhdGUgSFRNTERpdkVsZW1lbnQgQm90dG9uT2ZUYWJsZTtcclxuXHRcdHByaXZhdGUgSFRNTERpdkVsZW1lbnQgUmlnaHRPZlRhYmxlO1xyXG5cdFx0cHJpdmF0ZSBIVE1MRGl2RWxlbWVudCBSaWdodE9mVGFibGVIZWFkZXI7XHJcblxyXG5cdFx0cHJpdmF0ZSBEYXRhVGFibGUgX2RhdGFTb3VyY2UgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0cHVibGljIEFjdGlvbjxpbnQsIGludD4gT25Gb2N1c2VkUm93Q2hhbmdlZCA9IG51bGw7XHJcblx0XHRwdWJsaWMgQWN0aW9uPGludD4gT25Sb3dEb3VibGVDbGljayA9IG51bGw7XHJcblx0XHRwdWJsaWMgQWN0aW9uPEhUTUxFbGVtZW50LCBpbnQ+IE9uQ3VzdG9tUm93U3R5bGUgPSBudWxsO1xyXG5cclxuXHRcdHByb3RlY3RlZCBBY3Rpb248TW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4+IE9uUm93Q2xpY2s7XHJcblx0XHRwcm90ZWN0ZWQgQWN0aW9uPE1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+PiBPbkRvdWJsZUNsaWNrO1xyXG5cdFx0cHJvdGVjdGVkIEFjdGlvbjxNb3VzZUV2ZW50PiBPbkNlbGxSb3dNb3VzZURvd247XHJcblxyXG5cdFx0cHVibGljIEhhcmRTb2Z0TGlzdDxib29sPiBTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuXHRcdHB1YmxpYyBMaXN0PGludD4gVmlzaWJsZVJvd0hhbmRsZXMgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRwdWJsaWMgdm9pZCBTZXRWaXNpYmxlUm93SGFuZGxlczxUPihMaXN0PFQ+IENlbGxzLCBib29sIGFzYylcclxuXHRcdHtcclxuXHRcdFx0aWYoYXNjKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIHNvcnRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4oQ2VsbHNcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4pKCh4LCBpKSA9PiBuZXcgS2V5VmFsdWVQYWlyPGludCwgVD4oaSwgeCkpKVxyXG5cdFx0XHRcdFx0Lk9yZGVyQnk8VD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPiwgVD4pKHggPT4geC5WYWx1ZSkpXHJcblx0XHRcdFx0XHQuVG9MaXN0KCk7XHJcblxyXG5cdFx0XHRcdFZpc2libGVSb3dIYW5kbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPixpbnQ+KHNvcnRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIFQ+LCBpbnQ+KSh4ID0+IHguS2V5KSkuVG9MaXN0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIHNvcnRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4oQ2VsbHNcclxuLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPj4pKCh4LCBpKSA9PiBuZXcgS2V5VmFsdWVQYWlyPGludCwgVD4oaSwgeCkpKVxyXG5cdFx0XHRcdFx0Lk9yZGVyQnlEZXNjZW5kaW5nPFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4sIFQ+KSh4ID0+IHguVmFsdWUpKVxyXG5cdFx0XHRcdFx0LlRvTGlzdCgpO1xyXG5cclxuXHRcdFx0XHRWaXNpYmxlUm93SGFuZGxlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGludCwgVD4saW50Pihzb3J0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8aW50LCBUPiwgaW50PikoeCA9PiB4LktleSkpLlRvTGlzdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRwdWJsaWMgYm9vbCBfYWxsb3dSb3dEcmFnID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdHB1YmxpYyBib29sIEFsbG93Um93RHJhZ1xyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gX2FsbG93Um93RHJhZzsgfVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKF9hbGxvd1Jvd0RyYWcgIT0gdmFsdWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X2FsbG93Um93RHJhZyA9IHZhbHVlO1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBib29sIEF1dG9HZW5lcmF0ZUNvbHVtbnNGcm9tU291cmNlID0gdHJ1ZTtcclxuXHRcdHB1YmxpYyBib29sIEFsbG93TXVsdGlTZWxlY3Rpb24gPSB0cnVlO1xyXG5cclxuXHRcdHByaXZhdGUgYm9vbCBzaG93QXV0b0ZpbHRlclJvdyA9IGZhbHNlO1xyXG5cclxuXHRcdHB1YmxpYyBib29sIFNob3dBdXRvRmlsdGVyUm93XHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBzaG93QXV0b0ZpbHRlclJvdzsgfVxyXG5cdFx0XHRzZXQge1xyXG5cdFx0XHRcdGlmKHNob3dBdXRvRmlsdGVyUm93ICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHNob3dBdXRvRmlsdGVyUm93ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRpZighc2hvd0F1dG9GaWx0ZXJSb3cpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBGaWx0ZXIuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBDb2x1bW5Db3VudCgpOyBpKyspXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHQvL0ZpbHRlckVkaXQgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdENvbHVtbnNbaV0uRmlsdGVyRWRpdCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0Q29sdW1uc1tpXS5GaWx0ZXJWYWx1ZSA9IG51bGw7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Q2FsY3VsYXRlVmlzaWJsZVJvd3MoKTtcclxuXHRcdFx0XHRcdH1cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2FsY3VsYXRlVmlzaWJsZVJvd3MoKVxyXG5cdFx0e1xyXG5cdFx0XHRMaXN0PGludD4gY2FsY1Zpc2libGVSb3dzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuXHRcdFx0Zm9yKGludCB5ID0gMDsgeSA8IFJvd0NvdW50KCk7IHkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJvb2wgQWRkSW5kZXggPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRmb3IoaW50IHggPSAwOyB4IDwgQ29sdW1uQ291bnQoKTsgeCsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKCFDb2x1bW5zW3hdLlZhbHVlTWF0Y2hGaWx0ZXIoeSkpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdEFkZEluZGV4ID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihBZGRJbmRleClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjYWxjVmlzaWJsZVJvd3MuQWRkKHkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0VmlzaWJsZVJvd0hhbmRsZXMgPSBjYWxjVmlzaWJsZVJvd3M7XHJcblx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cHVibGljIGZsb2F0IFVuaXRIZWlnaHQgPSAyOC4wZjtcclxuXHRcdHByaXZhdGUgYm9vbCBfY29sdW1uQXV0b1dpZHRoID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9mb2N1c2VkY29sdW1uID0gLTE7XHJcbiAgICAgICAgcHVibGljIGludCBGb2N1c2VkQ29sdW1uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mb2N1c2VkY29sdW1uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gRm9jdXNlZENvbHVtbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldiA9IF9mb2N1c2VkY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgIF9mb2N1c2VkY29sdW1uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9SZW5kZXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW50IF9mb2N1c2VkRGF0YUhhbmRsZSA9IC0xO1xyXG5cdFx0cHVibGljIGludCBGb2N1c2VkRGF0YUhhbmRsZVxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBfZm9jdXNlZERhdGFIYW5kbGU7XHJcblx0XHRcdH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZih2YWx1ZSAhPSBfZm9jdXNlZERhdGFIYW5kbGUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIHByZXYgPSBfZm9jdXNlZERhdGFIYW5kbGU7XHJcblx0XHRcdFx0XHRfZm9jdXNlZERhdGFIYW5kbGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdFx0XHRcdGlmKE9uRm9jdXNlZFJvd0NoYW5nZWQgIT0gbnVsbClcclxuXHRcdFx0XHRcdFx0T25Gb2N1c2VkUm93Q2hhbmdlZChfZm9jdXNlZERhdGFIYW5kbGUsIHByZXYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFNldERlZmF1bHRTaXplcygpXHJcblx0XHR7XHJcblx0XHRcdGlmKF9jb2x1bW5IZWFkZXJzVmlzaWJsZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdEdyaWRIZWFkZXJDb250YWluZXIuU2V0Qm91bmRzKDAsIDAsIFwiMTAwJVwiLCBVbml0SGVpZ2h0ICsgMSk7XHRcdFx0XHRcclxuXHRcdFx0XHRHcmlkQm9keUNvbnRhaW5lci5TZXRCb3VuZHMoMCwgVW5pdEhlaWdodCArIDMsIFwiMTAwJVwiLCBcIigxMDAlIC0gXCIgKyAoVW5pdEhlaWdodCArIDMpICsgXCJweClcIik7XHJcblx0XHRcdFx0R3JpZEhlYWRlci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG4gICAgICAgICAgICAgICAgR3JpZEhlYWRlckNvbnRhaW5lci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG4gICAgICAgICAgICB9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdEdyaWRIZWFkZXIuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgR3JpZEhlYWRlckNvbnRhaW5lci5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcblxyXG4gICAgICAgICAgICAgICAgR3JpZEJvZHlDb250YWluZXIuU2V0Qm91bmRzKDAsIDEsIFwiMTAwJVwiLCBcIigxMDAlIC0gMXB4KVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgYm9vbCBfY29sdW1uSGVhZGVyc1Zpc2libGUgPSB0cnVlO1xyXG5cdFx0cHVibGljIGJvb2wgQ29sdW1uSGVhZGVyc1Zpc2libGVcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gX2NvbHVtbkhlYWRlcnNWaXNpYmxlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodmFsdWUgIT0gX2NvbHVtbkhlYWRlcnNWaXNpYmxlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF9jb2x1bW5IZWFkZXJzVmlzaWJsZSA9IHZhbHVlO1xyXG5cclxuXHRcdFx0XHRcdFNldERlZmF1bHRTaXplcygpO1xyXG5cclxuXHRcdFx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgYm9vbCBDb2x1bW5BdXRvV2lkdGhcclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gX2NvbHVtbkF1dG9XaWR0aDtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKHZhbHVlKVxyXG5cdFx0XHRcdFx0R3JpZEJvZHlDb250YWluZXIuU3R5bGUuT3ZlcmZsb3dYID0gT3ZlcmZsb3cuSGlkZGVuO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdEdyaWRCb2R5Q29udGFpbmVyLlN0eWxlLk92ZXJmbG93WCA9IE92ZXJmbG93LkF1dG87XHJcblxyXG5cdFx0XHRcdGlmKF9jb2x1bW5BdXRvV2lkdGggIT0gdmFsdWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X2NvbHVtbkF1dG9XaWR0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0UmVuZGVyR3JpZCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgYm9vbCBfdXNlRWRpdEZvcm0gPSB0cnVlO1xyXG5cdFx0cHVibGljIGJvb2wgVXNlRWRpdEZvcm1cclxuXHRcdHtcclxuXHRcdFx0Z2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gX3VzZUVkaXRGb3JtO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodmFsdWUgIT0gX3VzZUVkaXRGb3JtKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF91c2VFZGl0Rm9ybSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0UmVuZGVyR3JpZCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHQgICAgcHJpdmF0ZSBTb3J0U2V0dGluZyBTb3J0U2V0dGluZ3M7XHJcblxyXG5cdCAgICBwdWJsaWMgdm9pZCBTb3J0Q29sdW1uKClcclxuXHQgICAge1xyXG5cdCAgICAgICAgaWYgKCBTb3J0U2V0dGluZ3MgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIFNvcnRDb2x1bW4oU29ydFNldHRpbmdzLkNvbHVtbiwgU29ydFNldHRpbmdzLlNvcnRNb2RlKTtcclxuICAgICAgICAgICAgfVx0ICAgICAgICBcclxuXHQgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhclNvcnRDb2x1bW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFNvcnRTZXR0aW5ncyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTb3J0Q29sdW1uKFNvcnRTZXR0aW5ncy5Db2x1bW4sIEdyaWRWaWV3U29ydE1vZGUuTm9uZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgU29ydENvbHVtbihHcmlkVmlld0NvbHVtbiBjb2x1bW4sIEdyaWRWaWV3U29ydE1vZGUgc29ydCA9IEdyaWRWaWV3U29ydE1vZGUuQXNjKVxyXG5cdFx0e1xyXG5cdFx0XHRjb2x1bW4uU29ydGVkTW9kZSA9IHNvcnQ7XHJcblxyXG4gICAgICAgICAgICBpZihTb3J0U2V0dGluZ3MgIT0gbnVsbCAmJiBTb3J0U2V0dGluZ3MuQ29sdW1uICE9IGNvbHVtbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU29ydFNldHRpbmdzLkNvbHVtbi5Tb3J0ZWRNb2RlID0gR3JpZFZpZXdTb3J0TW9kZS5Ob25lO1xyXG4gICAgICAgICAgICAgICAgVmlzaWJsZVJvd0hhbmRsZXMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cdFx0XHRpZihzb3J0ID09IEdyaWRWaWV3U29ydE1vZGUuTm9uZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFZpc2libGVSb3dIYW5kbGVzID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRib29sIHNvcnQxID0gc29ydCA9PSBHcmlkVmlld1NvcnRNb2RlLkFzYztcclxuXHJcblx0XHRcdFx0c3dpdGNoKGNvbHVtbi5Db2x1bW4uRGF0YVR5cGUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGNhc2UgRGF0YVR5cGUuT2JqZWN0OlxyXG5cdFx0XHRcdFx0XHRTZXRWaXNpYmxlUm93SGFuZGxlczxvYmplY3Q+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5PYmplY3QpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuQm9vbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0VmlzaWJsZVJvd0hhbmRsZXM8Ym9vbD8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5Cb29sKS5DZWxscywgc29ydDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG5cdFx0XHRcdFx0XHRTZXRWaXNpYmxlUm93SGFuZGxlczxnbG9iYWw6OlN5c3RlbS5EYXRlVGltZT8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5EYXRlVGltZSkuQ2VsbHMsIHNvcnQxKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLlN0cmluZzpcclxuXHRcdFx0XHRcdFx0U2V0VmlzaWJsZVJvd0hhbmRsZXM8c3RyaW5nPigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uU3RyaW5nKS5DZWxscywgc29ydDEpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIERhdGFUeXBlLkJ5dGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldFZpc2libGVSb3dIYW5kbGVzPGJ5dGU/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uQnl0ZSkuQ2VsbHMsIHNvcnQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2V0VmlzaWJsZVJvd0hhbmRsZXM8c2hvcnQ/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uU2hvcnQpLkNlbGxzLCBzb3J0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGF0YVR5cGUuSW50ZWdlcjpcclxuXHRcdFx0XHRcdFx0U2V0VmlzaWJsZVJvd0hhbmRsZXM8aW50Pz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkludGVnZXIpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Mb25nOlxyXG5cdFx0XHRcdFx0XHRTZXRWaXNpYmxlUm93SGFuZGxlczxsb25nPz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkxvbmcpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5GbG9hdDpcclxuXHRcdFx0XHRcdFx0U2V0VmlzaWJsZVJvd0hhbmRsZXM8ZmxvYXQ/PigoY29sdW1uLkNvbHVtbiBhcyBEYXRhQ29sdW1uRmxvYXQpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Eb3VibGU6XHJcblx0XHRcdFx0XHRcdFNldFZpc2libGVSb3dIYW5kbGVzPGRvdWJsZT8+KChjb2x1bW4uQ29sdW1uIGFzIERhdGFDb2x1bW5Eb3VibGUpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG5cdFx0XHRcdFx0XHRTZXRWaXNpYmxlUm93SGFuZGxlczxkZWNpbWFsPz4oKGNvbHVtbi5Db2x1bW4gYXMgRGF0YUNvbHVtbkRlY2ltYWwpLkNlbGxzLCBzb3J0MSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0UmVuZGVyR3JpZCgpO1xyXG5cdFx0ICAgIFNvcnRTZXR0aW5ncyA9IG5ldyBTb3J0U2V0dGluZygpIHtcclxuXHRcdCAgICAgICAgQ29sdW1uID0gY29sdW1uLFxyXG4gICAgICAgICAgICAgICAgU29ydE1vZGUgPSBzb3J0XHJcblx0XHQgICAgfTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgaW50IENvbHVtbkNvdW50KClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIENvbHVtbnMuQ291bnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBSb3dDb3VudCgpXHJcblx0XHR7XHJcblx0XHRcdGlmKF9kYXRhU291cmNlID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdHJldHVybiBfZGF0YVNvdXJjZS5Sb3dDb3VudDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTY3JvbGxUb0JvdHRvbSgpXHJcblx0XHR7XHJcblx0XHRcdEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbFRvcCA9IEdyaWRCb2R5LkNsaWVudEhlaWdodCAtIEdyaWRCb2R5Q29udGFpbmVyLkNsaWVudEhlaWdodDtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTY3JvbGxUb1RvcCgpXHJcblx0XHR7XHJcblx0XHRcdEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbFRvcCA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIERhdGFUYWJsZSBEYXRhU291cmNlXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIF9kYXRhU291cmNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Rm9jdXNlZERhdGFIYW5kbGUgPSAtMTtcclxuXHRcdFx0XHRTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuXHRcdFx0XHRWaXNpYmxlUm93SGFuZGxlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcblx0XHRcdFx0aWYoX2RhdGFTb3VyY2UgIT0gbnVsbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfZGF0YVNvdXJjZS5PbkRhdGFTb3VyY2VDaGFuZ2VkIC09IERhdGFTb3VyY2VfT25EYXRhU291cmNlQ2hhbmdlZDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdF9kYXRhU291cmNlID0gdmFsdWU7XHJcblxyXG5cdFx0XHRcdGlmKF9kYXRhU291cmNlICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0X2RhdGFTb3VyY2UuT25EYXRhU291cmNlQ2hhbmdlZCArPSBEYXRhU291cmNlX09uRGF0YVNvdXJjZUNoYW5nZWQ7XHJcblxyXG5cdFx0XHRcdFx0aWYoQ29sdW1ucy5Db3VudCA9PSAwICYmIEF1dG9HZW5lcmF0ZUNvbHVtbnNGcm9tU291cmNlKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgc3cgPSBTdG9wd2F0Y2guU3RhcnROZXcoKTtcclxuXHJcblx0XHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBfZGF0YVNvdXJjZS5Db2x1bW5Db3VudDsgaSsrKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dmFyIHN3MSA9IFN0b3B3YXRjaC5TdGFydE5ldygpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR2YXIgZ3ZjID0gbmV3IEdyaWRWaWV3Q29sdW1uKHRoaXMpO1xyXG5cdFx0XHRcdFx0XHRcdGd2Yy5DYXB0aW9uID0gX2RhdGFTb3VyY2UuQ29sdW1uc1tpXS5GaWVsZE5hbWU7XHJcblx0XHRcdFx0XHRcdFx0Z3ZjLkNvbHVtbiA9IF9kYXRhU291cmNlLkNvbHVtbnNbaV07XHJcblx0XHRcdFx0XHRcdFx0Z3ZjLlZpc2libGUgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzd2l0Y2goX2RhdGFTb3VyY2UuQ29sdW1uc1tpXS5EYXRhVHlwZSlcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkJ5dGU6XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLlNob3J0OlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5JbnRlZ2VyOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Mb25nOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5GbG9hdDpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgRGF0YVR5cGUuRG91YmxlOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5EZWNpbWFsOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRndmMuQm9keUFwcGFyZW5jZS5BbGlnbm1lbnQgPSBUZXh0QWxpZ24uUmlnaHQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5EYXRlVGltZTpcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoU2V0dGluZ3MuR3JpZFZpZXdBdXRvQ29sdW1uRm9ybWF0RGF0ZXMpXHJcblx0XHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihTZXR0aW5ncy5HcmlkVmlld0F1dG9Db2x1bW5HZW5lcmF0ZUZvcm1hdEFzRGF0ZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGd2Yy5Gb3JtYXRTdHJpbmcgPSBcInswOmR9XCI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Z3ZjLkZvcm1hdFN0cmluZyA9IFwiezA6eXl5eS1NTS1kZH1cIjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Cb29sOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRndmMuQ2VsbERpc3BsYXkgPSBuZXcgR3JpZFZpZXdDZWxsRGlzcGxheUNoZWNrQm94KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0Q29sdW1ucy5BZGQoZ3ZjKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0c3cuU3RvcCgpO1xyXG5cdFx0XHRcdFx0XHRcdENvbnNvbGUuV3JpdGVMaW5lKFwiRGF0YVNvdXJjZSBBZGRDb2x1bW4gQXV0bzogXCIgKyBzdzEuRWxhcHNlZE1pbGxpc2Vjb25kcyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHN3LlN0b3AoKTtcclxuXHRcdFx0XHRcdFx0Q29uc29sZS5Xcml0ZUxpbmUoXCJEYXRhU291cmNlIEF1dG9Db2x1bW5zOiBcIiArIHN3LkVsYXBzZWRNaWxsaXNlY29uZHMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0UmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIExpc3Q8R3JpZFZpZXdDb2x1bW4+IENvbHVtbnMgPSBuZXcgTGlzdDxHcmlkVmlld0NvbHVtbj4oKTtcclxuXHJcblx0XHRwdWJsaWMgR3JpZFZpZXdDb2x1bW4gR2V0Q29sdW1uKGludCBpKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gQ29sdW1uc1tpXTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb2JqZWN0IEdldEZvY3VzZWRSb3dDZWxsVmFsdWUoaW50IGNvbHVtbkluZGV4KVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShDb2x1bW5zW2NvbHVtbkluZGV4XSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIEdyaWRWaWV3Q29sdW1uIEdldEdyaWRWaWV3Q29sdW1uQnlGaWVsZE5hbWUoc3RyaW5nIEZpZWxkTmFtZSlcclxuXHRcdHtcclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IENvbHVtbkNvdW50KCk7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKENvbHVtbnNbaV0uQ29sdW1uLkZpZWxkTmFtZSA9PSBGaWVsZE5hbWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cmV0dXJuIENvbHVtbnNbaV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBvYmplY3QgR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShzdHJpbmcgRmllbGROYW1lKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShHZXRDb2x1bW5CeUZpZWxkTmFtZShGaWVsZE5hbWUpKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb2JqZWN0IEdldEZvY3VzZWRSb3dDZWxsVmFsdWUoR3JpZFZpZXdDb2x1bW4gY29sdW1uKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gR2V0Um93Q2VsbFZhbHVlKEZvY3VzZWREYXRhSGFuZGxlLCBjb2x1bW4pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBvYmplY3QgR2V0Rm9jdXNlZFJvd0NlbGxWYWx1ZShEYXRhQ29sdW1uIGNvbHVtbilcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIEdldFJvd0NlbGxWYWx1ZShGb2N1c2VkRGF0YUhhbmRsZSwgY29sdW1uKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb2JqZWN0IEdldFJvd0NlbGxWYWx1ZShpbnQgRGF0YWhhbmRsZSwgR3JpZFZpZXdDb2x1bW4gY29sdW1uKVxyXG5cdFx0e1xyXG5cdFx0XHRyZXR1cm4gR2V0Um93Q2VsbFZhbHVlKERhdGFoYW5kbGUsIGNvbHVtbi5Db2x1bW4pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBvYmplY3QgR2V0Um93Q2VsbFZhbHVlKGludCBEYXRhaGFuZGxlLCBEYXRhQ29sdW1uIGNvbHVtbilcclxuXHRcdHtcclxuXHRcdFx0aWYoRGF0YWhhbmRsZSA9PSAtMSlcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0cmV0dXJuIGNvbHVtbi5HZXRDZWxsVmFsdWUoRGF0YWhhbmRsZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG9iamVjdCBHZXRSb3dDZWxsVmFsdWUoaW50IERhdGFoYW5kbGUsIHN0cmluZyBGaWVsZE5hbWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBHZXRSb3dDZWxsVmFsdWUoRGF0YWhhbmRsZSwgR2V0Q29sdW1uQnlGaWVsZE5hbWUoRmllbGROYW1lKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG9iamVjdCBHZXRSb3dDZWxsVmFsdWUoaW50IERhdGFoYW5kbGUsIGludCBjb2x1bW5JbmRleClcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuIEdldFJvd0NlbGxWYWx1ZShEYXRhaGFuZGxlLCBDb2x1bW5zW2NvbHVtbkluZGV4XSk7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NvbHVtbiBHZXRHcmlkVmlld0NvbHVtbkJ5RmllbGROYW1lKHN0cmluZyBmaWVsZE5hbWUsIGJvb2wgSWdub3JlQ2FzZSA9IGZhbHNlKVxyXG4gICAgICAgIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IENvbHVtbkNvdW50KCk7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoQ29sdW1uc1tpXSAhPSBudWxsICYmIENvbHVtbnNbaV0uQ29sdW1uICAhPSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLkNvbXBhcmUoQ29sdW1uc1tpXS5Db2x1bW4uRmllbGROYW1lLCBmaWVsZE5hbWUsIElnbm9yZUNhc2UpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENvbHVtbnNbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIERhdGFDb2x1bW4gR2V0Q29sdW1uQnlGaWVsZE5hbWUoc3RyaW5nIGZpZWxkTmFtZSwgYm9vbCBJZ25vcmVDYXNlID0gZmFsc2UpXHJcblx0XHR7XHJcblx0XHRcdGlmKERhdGFTb3VyY2UgPT0gbnVsbClcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBEYXRhU291cmNlLkNvbHVtbkNvdW50OyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihEYXRhU291cmNlLkNvbHVtbnNbaV0gIT0gbnVsbCAmJlxyXG5cdFx0XHRcdFx0c3RyaW5nLkNvbXBhcmUoRGF0YVNvdXJjZS5Db2x1bW5zW2ldLkZpZWxkTmFtZSwgZmllbGROYW1lLCBJZ25vcmVDYXNlKSA9PSAwKVxyXG5cdFx0XHRcdFx0cmV0dXJuIERhdGFTb3VyY2UuQ29sdW1uc1tpXTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQWRkQ29sdW1uKHN0cmluZyBjYXB0aW9uLCBzdHJpbmcgZmllbGRuYW1lLCBpbnQgd2lkdGggPSAxMDAsIHN0cmluZyBmb3JtYXRzdHJpbmcgPSBcIlwiLCBUZXh0QWxpZ24gYWxpZ25tZW50ID0gVGV4dEFsaWduLkxlZnQsIHN0cmluZyBmb3JlY29sb3IgPSBudWxsLCBib29sIGlzQm9sZCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgY29sID0gR2V0Q29sdW1uQnlGaWVsZE5hbWUoZmllbGRuYW1lKTtcclxuXHRcdFx0aWYoY29sID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRBZGRDb2x1bW4oY2FwdGlvbiwgY29sLCB3aWR0aCwgZm9ybWF0c3RyaW5nLCBhbGlnbm1lbnQsIGZvcmVjb2xvciwgaXNCb2xkKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBBZGRDb2x1bW4oc3RyaW5nIGNhcHRpb24sIERhdGFDb2x1bW4gY29sdW1uLCBpbnQgd2lkdGggPSAxMDAsIHN0cmluZyBmb3JtYXRzdHJpbmcgPSBcIlwiLCBUZXh0QWxpZ24gYWxpZ25tZW50ID0gVGV4dEFsaWduLkxlZnQsIHN0cmluZyBmb3JlY29sb3IgPSBudWxsLCBib29sIGlzQm9sZCA9IGZhbHNlKVxyXG5cdFx0e1xyXG5cdFx0XHRBZGRDb2x1bW4obmV3IEdyaWRWaWV3Q29sdW1uKHRoaXMsIHdpZHRoKSB7IENhcHRpb24gPSBjYXB0aW9uLCBCb2R5QXBwYXJlbmNlID0gbmV3IEdyaWRWaWV3Q2VsbEFwcGFyZW5jZShpc0JvbGQsIGFsaWdubWVudCwgZm9yZWNvbG9yKSwgRm9ybWF0U3RyaW5nID0gZm9ybWF0c3RyaW5nLCBDb2x1bW4gPSBjb2x1bW4gfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQWRkQ29sdW1uKEdyaWRWaWV3Q29sdW1uIGNvbHVtbilcclxuXHRcdHtcclxuXHRcdFx0aWYoY29sdW1uID09IG51bGwpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0Q29sdW1ucy5BZGQoY29sdW1uKTtcclxuXHJcblx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBBZGRDb2x1bW5zKHBhcmFtcyBHcmlkVmlld0NvbHVtbltdIGNvbHVtbnMpXHJcblx0XHR7XHJcblx0XHRcdGlmKGNvbHVtbnMgPT0gbnVsbCB8fCBjb2x1bW5zLkxlbmd0aCA9PSAwKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdENvbHVtbnMuQWRkUmFuZ2UoY29sdW1ucyk7XHJcblxyXG5cdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgUmVtb3ZlQ29sdW1uKEdyaWRWaWV3Q29sdW1uIGNvbHVtbilcclxuXHRcdHtcclxuXHRcdFx0Q29sdW1ucy5SZW1vdmUoY29sdW1uKTtcclxuXHJcblx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgaW50IEdldERhdGFTb3VyY2VSb3coaW50IGkpXHJcblx0XHR7XHJcblx0XHRcdGlmKFZpc2libGVSb3dIYW5kbGVzID09IG51bGwgfHwgVmlzaWJsZVJvd0hhbmRsZXMuQ291bnQgPT0gMClcclxuXHRcdFx0XHRyZXR1cm4gaTtcclxuXHRcdFx0cmV0dXJuIFZpc2libGVSb3dIYW5kbGVzW2ldO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBmbG9hdCBHZXRDb2x1bW5XaWR0aHMoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihfY29sdW1uQXV0b1dpZHRoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIEdyaWRCb2R5Q29udGFpbmVyLkNsaWVudFdpZHRoO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGZsb2F0IHdpZHRoID0gMC4wZjtcclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgQ29sdW1ucy5Db3VudDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHdpZHRoICs9IENvbHVtbnNbaV0uV2lkdGg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiB3aWR0aDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBDbGVhclNlbGVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuICAgICAgICAgICAgUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBTZWxlY3RBbGxSb3dzKClcclxuXHRcdHtcclxuXHRcdFx0aW50IGxlbmd0aCA9IFJvd0NvdW50KCk7XHJcblx0XHRcdGlmKGxlbmd0aCA9PSAwKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0U2VsZWN0ZWRSb3dzLkNsZWFyQWxsKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW50W10gaW5kZXggPSBuZXcgaW50W2xlbmd0aF07XHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGluZGV4W2ldID0gR2V0RGF0YVNvdXJjZVJvdyhpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0U2VsZWN0ZWRSb3dzLkNsZWFyQWxsU2V0SGFyZFJhbmdlKHRydWUsIGluZGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHR9XHJcblx0XHRwcml2YXRlIGludCBQcmV2UmVuZGVyR3JpZFNjcm9sbElkID0gLTE7XHJcblxyXG5cdFx0cHVibGljIHZvaWQgRGVsYXllZFJlbmRlckdyaWQoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihTZXR0aW5ncy5HcmlkVmlld1Njcm9sbERlbGF5ZWQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihQcmV2UmVuZGVyR3JpZFNjcm9sbElkICE9IC0xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdEdsb2JhbC5DbGVhclRpbWVvdXQoUHJldlJlbmRlckdyaWRTY3JvbGxJZCk7XHJcblx0XHRcdFx0XHRQcmV2UmVuZGVyR3JpZFNjcm9sbElkID0gLTE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFByZXZSZW5kZXJHcmlkU2Nyb2xsSWQgPSBHbG9iYWwuU2V0VGltZW91dCgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiB7XHJcblx0XHRcdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHRcdFx0fSksIE1hdGguTWF4KDEsIFNldHRpbmdzLkdyaWRWaWV3U2Nyb2xsRGVsYXlNUykpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cHJpdmF0ZSBTdG9wd2F0Y2ggY2xpY2tUaW1lRGlmZiA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRhUm93IEdldEZvY3VzZWRSb3coKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoRm9jdXNlZERhdGFIYW5kbGUgPiAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGFTb3VyY2VbR2V0RGF0YVNvdXJjZVJvdyhGb2N1c2VkRGF0YUhhbmRsZSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldFZpc2libGVDb3VudCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihDb2x1bW5zID09IG51bGwgfHwgQ29sdW1ucy5Db3VudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGludCBsZW5ndGggPSBDb2x1bW5zLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgbGVuZ3RoMSA9IENvbHVtbnMuQ291bnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFDb2x1bW5zW2ldLlZpc2libGUpXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoMS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsZW5ndGgxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdHJpbmcgaGVhZGluZ0NsYXNzO1xyXG4gICAgICAgIHN0cmluZyBjZWxsQ2xhc3M7XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3KGJvb2wgYXV0b0dlbmVyYXRlQ29sdW1ucyA9IHRydWUsIGJvb2wgY29sdW1uQXV0b1dpZHRoID0gZmFsc2UpIDogYmFzZShcImdyaWRcIilcclxuXHRcdHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFVuaXRIZWlnaHQgPSA1MztcclxuICAgICAgICAgICAgICAgIGhlYWRpbmdDbGFzcyA9IFwiaGVhZGluZyBoZWFkaW5nLXJlc3BvbnNpdmVcIjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2VsbENsYXNzID0gXCJjZWxsIGNlbGwtcmVzcG9uc2l2ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVW5pdEhlaWdodCA9IDI4O1xyXG4gICAgICAgICAgICAgICAgaGVhZGluZ0NsYXNzID0gXCJoZWFkaW5nXCI7XHJcbiAgICAgICAgICAgICAgICBjZWxsQ2xhc3MgPSBcImNlbGxcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLkNvbnRlbnQuU3R5bGUuT3ZlcmZsb3cgPSBPdmVyZmxvdy5IaWRkZW47XHJcblxyXG5cdFx0XHRyZW5kZXJHcmlkSW50ZXJuYWwgPSAoKSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW50IFN0YXJ0ZWRXaXRoID0gUmVuZGVyVGltZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRHcmlkSGVhZGVyQ29udGFpbmVyLlNjcm9sbExlZnQgPSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxMZWZ0O1xyXG5cdFx0XHRcdGlmKFNldHRpbmdzLkdyaWRWaWV3Qmx1ck9uU2Nyb2xsKVxyXG5cdFx0XHRcdFx0UHJvY2Vzc0JsdXIoKTtcclxuXHJcblx0XHRcdFx0VmFsaWRhdGVHcmlkU2l6ZSgpO1xyXG5cclxuXHRcdFx0XHRpZihDb2x1bW5Db3VudCgpID09IDApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Q2xlYXJHcmlkKCk7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aW50IFJhd0xlZnRDZWxsSW5kZXggPSAwO1xyXG5cdFx0XHRcdGZsb2F0IFJhd0xlZnRDZWxsU2Nyb2xsUGFkZGluZyA9IDA7XHJcblxyXG5cdFx0XHRcdGludCBSYXdMZWZ0Q2VsbENvdW50ID0gQ29sdW1ucy5Db3VudDtcclxuXHJcblx0XHRcdFx0ZmxvYXQgTGVmdExvY2F0aW9uID0gMDtcclxuXHRcdFx0XHRib29sIGZvdW5kTGVmdExvY2F0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0Ym9vbCBmb3VuZFJpZ2h0TG9jYXRpb24gPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0aW50IENsaWVudFdpZHRoID0gR3JpZEJvZHlDb250YWluZXIuQ2xpZW50V2lkdGg7XHJcblx0XHRcdFx0I3JlZ2lvbiBcIkNvbHVtbnNcIlxyXG5cdFx0XHRcdGZsb2F0IFZpZXdXaWR0aCA9IEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbExlZnQgKyBDbGllbnRXaWR0aDtcclxuXHRcdFx0XHRmbG9hdCBfY29sdW1uQXV0b1dpZHRoU2luZ2xlID0gMC4wZjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoX2NvbHVtbkF1dG9XaWR0aClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfY29sdW1uQXV0b1dpZHRoU2luZ2xlID0gQ2xpZW50V2lkdGggPT0gMCA/IDAuMGYgOiBDbGllbnRXaWR0aCAvIEdldFZpc2libGVDb3VudCgpO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgTWF4V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBMYXN0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGludCB4ID0gMDsgeCA8IENvbHVtbnMuQ291bnQ7IHgrKylcclxuXHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIUNvbHVtbnNbeF0uVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0Q29sdW1uc1t4XS5DYWNoZWRYID0gTGVmdExvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIExhc3RXaWR0aCA9IF9jb2x1bW5BdXRvV2lkdGggPyBfY29sdW1uQXV0b1dpZHRoU2luZ2xlIDogQ29sdW1uc1t4XS5XaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBMZWZ0TG9jYXRpb24gKz0gTGFzdFdpZHRoO1xyXG5cdFx0XHRcdFx0aWYoIWZvdW5kTGVmdExvY2F0aW9uICYmIExlZnRMb2NhdGlvbiA+PSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxMZWZ0KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRmb3VuZExlZnRMb2NhdGlvbiA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFJhd0xlZnRDZWxsSW5kZXggPSB4O1xyXG5cdFx0XHRcdFx0XHRSYXdMZWZ0Q2VsbFNjcm9sbFBhZGRpbmcgPSBMZWZ0TG9jYXRpb24gLSBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxMZWZ0O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoZm91bmRMZWZ0TG9jYXRpb24gJiYgIWZvdW5kUmlnaHRMb2NhdGlvbiAmJiBMZWZ0TG9jYXRpb24gPj0gVmlld1dpZHRoKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRmb3VuZFJpZ2h0TG9jYXRpb24gPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRSYXdMZWZ0Q2VsbENvdW50ID0geCArIDE7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoU3RhcnRlZFdpdGggIT0gUmVuZGVyVGltZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICBNYXhXaWR0aCA9IExlZnRMb2NhdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29sRnJhZ21lbnQgPSBEb2N1bWVudC5DcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0XHRcdGludCB1Ym91bmRSb3dDb3VudCA9IFJhd0xlZnRDZWxsQ291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihfY29sdW1uSGVhZGVyc1Zpc2libGUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Zm9yKGludCB4ID0gUmF3TGVmdENlbGxJbmRleDsgeCA8IFJhd0xlZnRDZWxsQ291bnQ7IHgrKylcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYoeCA+PSBDb2x1bW5zLkNvdW50KVxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighQ29sdW1uc1t4XS5WaXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgZ2NvbCA9IENvbHVtbnNbeF07XHJcblx0XHRcdFx0XHRcdHZhciBjb2xJbmRleCA9IHg7XHJcblx0XHRcdFx0XHRcdHZhciBhcHBhcmVuY2UgPSBnY29sLkhlYWRpbmdBcHBhcmVuY2U7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgY29sID0gTGFiZWwoZ2NvbC5DYXB0aW9uLFxyXG5cdFx0XHRcdFx0XHRcdChfY29sdW1uQXV0b1dpZHRoID8gZ2NvbC5DYWNoZWRYIDogZ2NvbC5DYWNoZWRYKSwgMCwgKF9jb2x1bW5BdXRvV2lkdGggPyBfY29sdW1uQXV0b1dpZHRoU2luZ2xlIDogZ2NvbC5XaWR0aCkgLSAoeCA9PSB1Ym91bmRSb3dDb3VudCA/IDAgOiAxKSxcclxuXHRcdFx0XHRcdFx0XHRhcHBhcmVuY2UuSXNCb2xkLCBmYWxzZSwgaGVhZGluZ0NsYXNzLCBhcHBhcmVuY2UuQWxpZ25tZW50LCBhcHBhcmVuY2UuRm9yZWNvbG9yKTtcclxuXHRcdFx0XHRcdFx0aWYoZ2NvbC5Tb3J0ZWRNb2RlICE9IEdyaWRWaWV3U29ydE1vZGUuTm9uZSlcclxuXHRcdFx0XHRcdFx0eyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3J0SW1hZ2UgPSBEaXYoZ2NvbC5Tb3J0ZWRNb2RlID09IEdyaWRWaWV3U29ydE1vZGUuQXNjID8gXCJncmlkLXNvcnQtdXBcIiA6IFwiZ3JpZC1zb3J0LWRvd25cIik7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0SW1hZ2UuU2V0Qm91bmRzKFwiKDEwMCUgLSAxM3B4KVwiLCAxMSwgOSwgNSk7XHJcblx0XHRcdFx0XHRcdFx0Y29sLkFwcGVuZENoaWxkKHNvcnRJbWFnZSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFNldHVwQ29sdW1uKGNvbCwgeCwgZ2NvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xGcmFnbWVudC5BcHBlbmRDaGlsZChjb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdFx0aWYoU3RhcnRlZFdpdGggIT0gUmVuZGVyVGltZSlcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0I2VuZHJlZ2lvblxyXG5cclxuXHJcblx0XHRcdFx0aWYoX2RhdGFTb3VyY2UgPT0gbnVsbCB8fCBfZGF0YVNvdXJjZS5Sb3dDb3VudCA9PSAwIHx8IF9kYXRhU291cmNlLkNvbHVtbkNvdW50ID09IDApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Q2xlYXJHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR3JpZEhlYWRlci5BcHBlbmRDaGlsZChjb2xGcmFnbWVudCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgcHByID0gUGl4ZWxzUGVyUm93KF9kYXRhU291cmNlLlJvd0NvdW50KTtcclxuXHJcblx0XHRcdFx0ZmxvYXQgUmF3VG9wUm93SW5kZXggPSBHZXRSYXdUb3BSb3dJbmRleCgpO1xyXG5cdFx0XHRcdGZsb2F0IFJhd1RvcFJvd1Njcm9sbFBhZGRpbmcgPSBSYXdUb3BSb3dJbmRleCAlIDEuMGY7XHJcblx0XHRcdFx0ZmxvYXQgUmF3VmlzaWJsZVJvd0NvdW50ID0gR2V0UmF3VmlzaWJsZVJvd0NvdW50KCk7XHJcblxyXG5cdFx0XHRcdGludCBMZW5ndGggPSAoaW50KShSYXdWaXNpYmxlUm93Q291bnQgKyBSYXdUb3BSb3dJbmRleCkgKyAxO1xyXG5cdFx0XHRcdGludCBzdGFydCA9IChpbnQpUmF3VG9wUm93SW5kZXg7XHJcblx0XHRcdFx0I3JlZ2lvbiBcIlNlbGVjdGlvblwiXHJcblx0XHRcdFx0Zm9yKGludCB4ID0gU2VsZWN0ZWRSb3dzLlNMLkNvdW50IC0gMTsgeCA+PSAwOyB4LS0pXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Ym9vbCBGb3VuZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0Zm9yKGludCBpID0gc3RhcnQ7IGkgPCBMZW5ndGg7IGkrKylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aWYoaSA8IERhdGFTb3VyY2UuUm93Q291bnQpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgRGF0YVJvd2hhbmRsZSA9IEdldERhdGFTb3VyY2VSb3coaSk7XHJcblx0XHRcdFx0XHRcdFx0aWYoU2VsZWN0ZWRSb3dzLkdldEluZGV4VmFsdWVCeUhhcmRMaXN0SW5kZXgoU2VsZWN0ZWRSb3dzLlNMW3hdKS5JbmRleCA9PSBEYXRhUm93aGFuZGxlKVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdEZvdW5kID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZighRm91bmQpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFNlbGVjdGVkUm93cy5TTC5SZW1vdmVBdCh4KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJvd0ZyYWdtZW50ID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdFx0XHRpZihTZXR0aW5ncy5HcmlkVmlld1Jvd1Njcm9sbFBhZGRpbmcgPiAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHN0YXJ0IC09IFNldHRpbmdzLkdyaWRWaWV3Um93U2Nyb2xsUGFkZGluZztcclxuXHRcdFx0XHRcdExlbmd0aCArPSBTZXR0aW5ncy5HcmlkVmlld1Jvd1Njcm9sbFBhZGRpbmc7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmbG9hdCBZID0gKHN0YXJ0ICogKHBwcikpIC0gUmF3VG9wUm93U2Nyb2xsUGFkZGluZztcclxuXHRcdFx0XHRcdFx0XHRcclxuXHJcblx0XHRcdFx0aWYoU2hvd0F1dG9GaWx0ZXJSb3cpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0TGVuZ3RoIC09IDE7XHJcblx0XHRcdFx0XHRZICs9IFVuaXRIZWlnaHQ7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyAjVE9ETyAtIENMRUFOLi4uXHJcblx0XHRcdFx0aWYoc3RhcnQgPCAwKVxyXG5cdFx0XHRcdFx0c3RhcnQgPSAwO1xyXG5cdFx0XHRcdGlmKExlbmd0aCA+IERhdGFTb3VyY2UuUm93Q291bnQpXHJcblx0XHRcdFx0XHRMZW5ndGggPSBEYXRhU291cmNlLlJvd0NvdW50O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGZvcihpbnQgaSA9IHN0YXJ0OyBpIDwgTGVuZ3RoOyBpKyspXHJcblx0XHRcdFx0e1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBEYXRhUm93aGFuZGxlID0gR2V0RGF0YVNvdXJjZVJvdyhpKTtcclxuXHRcdFx0XHRcdHZhciBkciA9IERpdigoaSAlIDIgPT0gMCA/IFwiY2VsbHJvdyBldmVuXCIgOiBcImNlbGxyb3dcIikgKyAoU2VsZWN0ZWRSb3dzLkdldFZhbHVlKERhdGFSb3doYW5kbGUsIHRydWUpID8gXCIgY2VsbHJvdy1zZWxlY3RlZFwiIDogXCJcIikgKyAoRGF0YVJvd2hhbmRsZSA9PSBGb2N1c2VkRGF0YUhhbmRsZSA/IFwiIGZvY3VzZWRyb3dcIiA6IFwiXCIpKTtcclxuXHJcblx0XHRcdFx0XHRkci5TZXRCb3VuZHMoMCwgWSwgX2NvbHVtbkF1dG9XaWR0aCA/IENsaWVudFdpZHRoIDogTWF4V2lkdGgsIFVuaXRIZWlnaHQpO1xyXG5cdFx0XHRcdFx0ZHIuU2V0QXR0cmlidXRlKFwiaVwiLCBDb252ZXJ0LlRvU3RyaW5nKERhdGFSb3doYW5kbGUpKTtcclxuXHJcblx0XHRcdFx0XHRkci5PbkNsaWNrID0gT25Sb3dDbGljaztcclxuXHRcdFx0XHRcdGlmKFNldHRpbmdzLklzQ2hyb21lKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRkci5PbkRibENsaWNrID0gT25Eb3VibGVDbGljaztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRmb3IoaW50IHggPSBSYXdMZWZ0Q2VsbEluZGV4OyB4IDwgUmF3TGVmdENlbGxDb3VudDsgeCsrKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR2YXIgY29sID0gQ29sdW1uc1t4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWNvbC5WaXNpYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0XHR2YXIgYXBwYXJlbmNlID0gY29sLkJvZHlBcHBhcmVuY2U7XHJcblx0XHRcdFx0XHRcdGJvb2wgdXNlRGVmYXVsdCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRIVE1MRWxlbWVudCBjZWxsO1xyXG5cdFx0XHRcdFx0XHRpZihjb2wuQ2VsbERpc3BsYXkgPT0gbnVsbCB8fCAodXNlRGVmYXVsdCA9IGNvbC5DZWxsRGlzcGxheS5Vc2VEZWZhdWx0RWxlbWVudCkpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRjZWxsID0gTGFiZWwoY29sLkdldERpc3BsYXlWYWx1ZUJ5RGF0YVJvd0hhbmRsZShEYXRhUm93aGFuZGxlKSxcclxuXHRcdFx0XHRcdFx0XHRjb2wuQ2FjaGVkWCwgMCwgX2NvbHVtbkF1dG9XaWR0aCA/IF9jb2x1bW5BdXRvV2lkdGhTaW5nbGUgOiBjb2wuV2lkdGgsIGFwcGFyZW5jZS5Jc0JvbGQsIGZhbHNlLCBjZWxsQ2xhc3MsIGFwcGFyZW5jZS5BbGlnbm1lbnQsIGFwcGFyZW5jZS5Gb3JlY29sb3IpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRkci5BcHBlbmRDaGlsZCh1c2VEZWZhdWx0ID9cclxuXHRcdFx0XHRcdFx0XHRcdGNvbC5DZWxsRGlzcGxheS5PbkNyZWF0ZURlZmF1bHQoY2VsbCwgdGhpcywgRGF0YVJvd2hhbmRsZSwgeCkgOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2VsbCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y2VsbCA9IGNvbC5DZWxsRGlzcGxheS5PbkNyZWF0ZSh0aGlzLCBEYXRhUm93aGFuZGxlLCB4KTtcclxuXHRcdFx0XHRcdFx0XHRjZWxsLlNldExvY2F0aW9uKGNvbC5DYWNoZWRYLCAwKTtcclxuXHRcdFx0XHRcdFx0XHRjZWxsLlN0eWxlLldpZHRoID0gKF9jb2x1bW5BdXRvV2lkdGggPyBfY29sdW1uQXV0b1dpZHRoU2luZ2xlIDogY29sLldpZHRoKS5Ub1B4KCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGRyLkFwcGVuZENoaWxkKGNlbGwpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGNlbGwuU2V0QXR0cmlidXRlKFwiaVwiLCB4LlRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdFx0XHRjZWxsLk9uTW91c2VEb3duID0gT25DZWxsUm93TW91c2VEb3duO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmKEFsbG93Um93RHJhZylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0ZHIuU2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTtcclxuXHJcblx0XHRcdFx0XHRcdGRyLk9uRHJhZ1N0YXJ0ID0gT25Sb3dEcmFnU3RhcnQ7XHJcblx0XHRcdFx0XHR9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJvd0ZyYWdtZW50LkFwcGVuZENoaWxkKGRyKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdFkgKz0gVW5pdEhlaWdodDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYoU3RhcnRlZFdpdGggIT0gUmVuZGVyVGltZSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdENsZWFyR3JpZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKE9uQ3VzdG9tUm93U3R5bGUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSByb3dGcmFnbWVudC5DaGlsZEVsZW1lbnRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKFN0YXJ0ZWRXaXRoICE9IFJlbmRlclRpbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHJvd0ZyYWdtZW50LkNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT25DdXN0b21Sb3dTdHlsZShjaGlsZCwgR2xvYmFsLlBhcnNlSW50KGNoaWxkLkdldEF0dHJpYnV0ZShcImlcIikpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uIGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihBcHBsaWNhdGlvbi5BcGxpY2F0aW9uRGVmaXRpb24gPT0gQXBwbGljYXRpb25EZWZpdG5pb24uRXhwcmVzc0NyYWZ0Q29uc29sZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlRm9ybS5Mb2coZXguVG9TdHJpbmcoKSwgQ29uc29sZUxvZ1R5cGUuRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEdyaWRIZWFkZXIuQXBwZW5kQ2hpbGQoY29sRnJhZ21lbnQpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIEdyaWRCb2R5LkFwcGVuZENoaWxkKHJvd0ZyYWdtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihTdGFydGVkV2l0aCAhPSBSZW5kZXJUaW1lKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFJlbmRlclRpbWUgPSAtMTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdEdyaWRIZWFkZXJDb250YWluZXIgPSBEaXYoXCJoZWFkaW5nLWNvbnRhaW5lclwiKTtcclxuXHRcdFx0XHJcblx0XHRcdEdyaWRIZWFkZXIgPSBEaXYoKTtcclxuXHRcdFx0R3JpZEhlYWRlci5TZXRCb3VuZHMoXCIwXCIsIFwiMFwiLCBcIjBcIiwgXCIyOXB4XCIpO1xyXG5cdFx0XHRHcmlkQm9keUNvbnRhaW5lciA9IERpdigpO1xyXG5cdFx0XHRcclxuXHRcdFx0R3JpZEJvZHlDb250YWluZXIuU3R5bGUuT3ZlcmZsb3dYID0gT3ZlcmZsb3cuQXV0bztcclxuXHRcdFx0R3JpZEJvZHlDb250YWluZXIuU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuQXV0bztcclxuXHJcblx0XHRcdEdyaWRIZWFkZXJDb250YWluZXIuU3R5bGUuT3ZlcmZsb3cgPSBPdmVyZmxvdy5IaWRkZW47XHJcblxyXG5cdFx0XHRHcmlkQm9keSA9IERpdigpO1xyXG5cdFx0XHRHcmlkQm9keS5TZXRCb3VuZHMoXCIwXCIsIFwiMFwiLCBcIjBcIiwgXCIwXCIpO1xyXG5cclxuXHRcdFx0R3JpZEJvZHlDb250YWluZXIuQXBwZW5kQ2hpbGQoR3JpZEJvZHkpO1xyXG5cdFx0XHRHcmlkSGVhZGVyQ29udGFpbmVyLkFwcGVuZENoaWxkKEdyaWRIZWFkZXIpO1xyXG5cclxuXHRcdFx0U2V0RGVmYXVsdFNpemVzKCk7XHJcblxyXG5cdFx0XHRDb250ZW50Lk9uTW91c2VVcCA9IChldikgPT4ge1xyXG5cdFx0XHRcdGlmKFJlc2l6ZUluZGV4ID09IC0xKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdGludCB4ID0gU2NyaXB0LldyaXRlPGludD4oXCJldi5wYWdlWFwiKTtcclxuXHRcdFx0XHR4ID0gQ29sdW1uc1tSZXNpemVJbmRleF0uV2lkdGggKyAoeCAtIFJlc2l6ZVBhZ2VYKTtcclxuXHRcdFx0XHRpZih4IDwgMjQpXHJcblx0XHRcdFx0XHR4ID0gMjQ7XHJcblx0XHRcdFx0Q29sdW1uc1tSZXNpemVJbmRleF0uV2lkdGggPSB4O1xyXG5cclxuXHRcdFx0XHRGb3JtLlNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblxyXG5cdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0ZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0XHRcdFJlc2l6ZUluZGV4ID0gLTE7XHJcblx0XHRcdFx0UmVzaXplU3BhbiA9IG51bGw7XHJcblx0XHRcdH07XHRcdFx0XHJcblxyXG5cdFx0XHRPblJlc2l6ZSA9IChldikgPT4ge1xyXG5cdFx0XHRcdERlbGF5ZWRSZW5kZXJHcmlkKCk7XHJcblx0XHRcdH07XHJcblx0XHRcdEdyaWRCb2R5Q29udGFpbmVyLk9uU2Nyb2xsID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0RGVsYXllZFJlbmRlckdyaWQoKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0T25Mb2FkZWQgPSAoZXYpID0+IHtcclxuXHRcdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHRcdH07XHJcblx0XHRcdE9uQ2VsbFJvd01vdXNlRG93biA9IChldikgPT5cclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0Rm9jdXNlZENvbHVtbiA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkFzPEhUTUxFbGVtZW50PigpLkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRPblJvd0NsaWNrID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYoIVNldHRpbmdzLklzQ2hyb21lKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKGNsaWNrVGltZURpZmYgPT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Y2xpY2tUaW1lRGlmZiA9IFN0b3B3YXRjaC5TdGFydE5ldygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRjbGlja1RpbWVEaWZmLlN0b3AoKTtcclxuXHRcdFx0XHRcdFx0dmFyIGVtcyA9IGNsaWNrVGltZURpZmYuRWxhcHNlZE1pbGxpc2Vjb25kcztcclxuXHRcdFx0XHRcdFx0Y2xpY2tUaW1lRGlmZiA9IG51bGw7XHJcblxyXG5cdFx0XHRcdFx0XHRpZihlbXMgPCAyMDApXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRPbkRvdWJsZUNsaWNrKGV2KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIERhdGFSb3dIYW5kbGUgPSBHbG9iYWwuUGFyc2VJbnQoZXYuQ3VycmVudFRhcmdldC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuXHJcblx0XHRcdFx0dmFyIG1ldiA9IGV2LkFzPE1vdXNlRXZlbnQ+KCk7XHJcblx0XHRcdFx0aWYoQWxsb3dNdWx0aVNlbGVjdGlvbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihtZXYuQ3RybEtleSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0U2VsZWN0ZWRSb3dzLkFkZE9yU2V0KHRydWUsIERhdGFSb3dIYW5kbGUsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRSZW5kZXJHcmlkKCk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYobWV2LlNoaWZ0S2V5KVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFNlbGVjdGVkUm93cy5DbGVhckFuZEFkZE9yU2V0KHRydWUsIERhdGFSb3dIYW5kbGUsIHRydWUpO1xyXG5cdFx0XHRcdGlmKERhdGFSb3dIYW5kbGUgIT0gX2ZvY3VzZWREYXRhSGFuZGxlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdEZvY3VzZWREYXRhSGFuZGxlID0gRGF0YVJvd0hhbmRsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFJlbmRlckdyaWQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdENvbnRlbnQuVGFiSW5kZXggPSAwO1xyXG5cdFx0XHRPbkRvdWJsZUNsaWNrID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0aW50IGRyaCA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG5cdFx0XHRcdGlmKE9uUm93RG91YmxlQ2xpY2sgIT0gbnVsbClcclxuXHRcdFx0XHRcdE9uUm93RG91YmxlQ2xpY2soZHJoKTtcclxuXHJcblx0XHRcdFx0aWYoX3VzZUVkaXRGb3JtKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciBpZHIgPSBEYXRhU291cmNlW2RyaF07XHJcblxyXG5cdFx0XHRcdFx0dmFyIGZkcmUgPSBuZXcgRGF0YVJvd0VkaXRGb3JtKGlkciwgdGhpcywgdHJ1ZSk7XHJcblx0XHRcdFx0XHRmZHJlLlNob3dEaWFsb2coKTtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Q29udGVudC5PbktleURvd24gPSAoZXYpID0+IHtcclxuXHRcdFx0XHR2YXIga2V2ID0gZXYuQXM8S2V5Ym9hcmRFdmVudD4oKTtcclxuXHRcdFx0XHQvL0dsb2JhbC5BbGVydChcIkNPTlRST0wgKyBBXCIpO1xyXG5cdFx0XHRcdGlmKEFsbG93TXVsdGlTZWxlY3Rpb24gJiYga2V2LkN0cmxLZXkgJiYgKGtldi5LZXlDb2RlID09IDY1IHx8IGtldi5LZXlDb2RlID09IDk3KSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvLyBrZXlDb2RlID09IDY1IHx8IGtleUNvZGUgPT0gOTdcclxuXHRcdFx0XHRcdC8vR2xvYmFsLkFsZXJ0KFwiQWxsb3dNdWx0aVNlbGVjdGlvbiA9IFRSVUVcIik7XHJcblx0XHRcdFx0XHRTZWxlY3RBbGxSb3dzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHQvL0dsb2JhbC5BbGVydChcIkFsbG93TXVsdGlTZWxlY3Rpb24gPSBGQUxTRVwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRDb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSgpO1xyXG5cclxuXHRcdFx0Q29udGV4dE1lbnUuQ29udGV4dEl0ZW1zLkFkZFJhbmdlKG5ldyBDb250ZXh0SXRlbVtdIHtcclxuXHRcdFx0XHRuZXcgQ29udGV4dEl0ZW0oXCJTb3J0IEFzY2VuZGluZ1wiLCAoY20pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihGb2N1c2VkQ29sdW1uID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb3J0Q29sdW1uKENvbHVtbnNbRm9jdXNlZENvbHVtbl0sIEdyaWRWaWV3U29ydE1vZGUuQXNjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuXHRcdFx0XHRuZXcgQ29udGV4dEl0ZW0oXCJTb3J0IERlc2NlbmRpbmdcIiwgKGNtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRm9jdXNlZENvbHVtbiA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU29ydENvbHVtbihDb2x1bW5zW0ZvY3VzZWRDb2x1bW5dLCBHcmlkVmlld1NvcnRNb2RlLkRlc2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIkNsZWFyIEFsbCBTb3J0aW5nXCIsIChjbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyU29ydENvbHVtbigpO1xyXG4gICAgICAgICAgICAgICAgfSwgIHRydWUpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIkdyb3VwIEJ5IFRoaXMgQ29sdW1uXCIpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIkhpZGUgR3JvdXAgQnkgQm94XCIsIHRydWUpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIkhpZGUgVGhpcyBDb2x1bW5cIiksXHJcblx0XHRcdFx0bmV3IENvbnRleHRJdGVtKFwiVmlldyBDb2x1bW5zXCIpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIlNhdmUgQ29sdW1uIExheW91dFwiKSxcclxuXHRcdFx0XHRuZXcgQ29udGV4dEl0ZW0oXCJCZXN0IEZpdFwiKSxcclxuXHRcdFx0XHRuZXcgQ29udGV4dEl0ZW0oXCJCZXN0IEZpdCAoYWxsIGNvbHVtbnMpXCIsIHRydWUpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIkZpbHRlciBFZGl0b3IuLi5cIiksXHJcblx0XHRcdFx0bmV3IENvbnRleHRJdGVtKFwiU2hvdyBGaW5kIFBhbmVsXCIpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIlNob3cgQXV0byBGaWx0ZXIgUm93XCIpLFxyXG5cdFx0XHRcdG5ldyBDb250ZXh0SXRlbShcIlNlbGVjdCBBbGxcIiwgKGNtKSA9PiB7IFNlbGVjdEFsbFJvd3MoKTsgfSksXHJcbiAgICAgICAgICAgICAgICBuZXcgQ29udGV4dEl0ZW0oXCJVbnNlbGVjdCBBbGxcIiwgKGNtKSA9PiB7IENsZWFyU2VsZWN0aW9uKCk7IH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHRcdFx0Q29udGVudC5PbkNvbnRleHRNZW51ID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPbkRvdWJsZUNsaWNrKGV2LkFzPE1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+PigpKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoQ29udGV4dE1lbnUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRleHRNZW51LlNob3coSGVscGVyLkdldENsaWVudE1vdXNlTG9jYXRpb24oZXYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0T25Db2x1bW5PbkNsaWNrID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYoUmVzaXplSW5kZXggPj0gMClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0dmFyIGdjb2wgPSBDb2x1bW5zW0dsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpXTtcclxuXHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IENvbHVtbkNvdW50KCk7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihDb2x1bW5zW2ldICE9IGdjb2wpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdENvbHVtbnNbaV0uU29ydGVkTW9kZSA9IEdyaWRWaWV3U29ydE1vZGUuTm9uZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3dpdGNoKGdjb2wuU29ydGVkTW9kZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0Y2FzZSBHcmlkVmlld1NvcnRNb2RlLk5vbmU6XHJcblx0XHRcdFx0XHRcdFNvcnRDb2x1bW4oZ2NvbCwgR3JpZFZpZXdTb3J0TW9kZS5Bc2MpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgR3JpZFZpZXdTb3J0TW9kZS5Bc2M6XHJcblx0XHRcdFx0XHRcdFNvcnRDb2x1bW4oZ2NvbCwgR3JpZFZpZXdTb3J0TW9kZS5EZXNjKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIEdyaWRWaWV3U29ydE1vZGUuRGVzYzpcclxuXHRcdFx0XHRcdFx0U29ydENvbHVtbihnY29sLCBHcmlkVmlld1NvcnRNb2RlLk5vbmUpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcdE9uQ29sdW1uRHJhZ1N0YXJ0ID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0U2NyaXB0LkNhbGwoXCJldi5kYXRhVHJhbnNmZXIuc2V0RGF0YVwiLCBcImdyaWR2aWV3Q29sdW1uRHJhZ1wiLCBldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpO1xyXG5cdFx0XHR9O1x0XHRcdFxyXG5cdFx0XHRPbkNvbHVtbkRyYWdPdmVyID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0ZXYuUHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0T25Db2x1bW5Ecm9wID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYoZXYuVGFyZ2V0ID09IG51bGwgfHwgIShldi5UYXJnZXQgaXMgSFRNTFNwYW5FbGVtZW50KSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0dmFyIHRhcmdldCA9IGV2LlRhcmdldC5BczxIVE1MU3BhbkVsZW1lbnQ+KCk7XHJcblxyXG5cdFx0XHRcdGlmKHRhcmdldC5QYXJlbnRFbGVtZW50ICE9IEdyaWRIZWFkZXIpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdHZhciBIb3ZlckluZGV4ID0gR2xvYmFsLlBhcnNlSW50KHRhcmdldC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuXHRcdFx0XHR2YXIgU2VsZWN0ZWRJbmRleCA9IFNjcmlwdC5Xcml0ZTxpbnQ+KFwicGFyc2VJbnQoZXYuZGF0YVRyYW5zZmVyLmdldERhdGEoXFxcImdyaWR2aWV3Q29sdW1uRHJhZ1xcXCIpKTtcIik7XHJcblx0XHRcdFx0aWYoU2VsZWN0ZWRJbmRleCA9PSBIb3ZlckluZGV4KVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHRpZihIb3ZlckluZGV4IDwgMClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0aW50IHggPSBTY3JpcHQuV3JpdGU8aW50PihcImV2LmxheWVyWFwiKTtcclxuXHRcdFx0XHR4IC09IHRhcmdldC5DbGllbnRMZWZ0O1xyXG5cdFx0XHRcdGludCB3ID0gdGFyZ2V0LkNsaWVudFdpZHRoIC8gMjtcclxuXHJcblx0XHRcdFx0aWYoSG92ZXJJbmRleCA9PSBTZWxlY3RlZEluZGV4IC0gMSAmJiB4ID4gdylcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRpZihIb3ZlckluZGV4ID09IFNlbGVjdGVkSW5kZXggKyAxICYmIHggPCB3KVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0XHRpZih4IDwgdylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHREcmFnSW5kZXggPSBIb3ZlckluZGV4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0RHJhZ0luZGV4ID0gSG92ZXJJbmRleCArIDE7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZihEcmFnSW5kZXggPCAwIHx8IFNlbGVjdGVkSW5kZXggPCAwKVxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdHZhciBjb2wgPSBDb2x1bW5zW1NlbGVjdGVkSW5kZXhdO1xyXG5cdFx0XHRcdGlmKERyYWdJbmRleCA9PSBDb2x1bW5zLkNvdW50KVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdENvbHVtbnMuUmVtb3ZlKGNvbCk7XHJcblx0XHRcdFx0XHRDb2x1bW5zLkFkZChjb2wpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIGNvbDEgPSBDb2x1bW5zW0RyYWdJbmRleF07XHJcblx0XHRcdFx0XHRDb2x1bW5zLlJlbW92ZShjb2wpO1xyXG5cdFx0XHRcdFx0Q29sdW1ucy5JbnNlcnQoQ29sdW1ucy5JbmRleE9mKGNvbDEpLCBjb2wpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0UmVuZGVyR3JpZCgpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRPbkNvbHVtbk1vdXNlRG93biA9IChldikgPT4ge1xyXG5cdFx0XHRcdGludCB4ID0gU2NyaXB0LldyaXRlPGludD4oXCJldi5sYXllclhcIik7XHJcblx0XHRcdFx0dmFyIHRhcmdldCA9IGV2LlRhcmdldC5BczxIVE1MU3BhbkVsZW1lbnQ+KCk7XHJcblx0XHRcdFx0eCAtPSB0YXJnZXQuQ2xpZW50TGVmdDtcclxuXHRcdFx0XHRSZXNpemVQYWdlWCA9IFNjcmlwdC5Xcml0ZTxpbnQ+KFwiZXYucGFnZVhcIik7XHJcblxyXG5cdFx0XHRcdEZvY3VzZWRDb2x1bW4gPSBHbG9iYWwuUGFyc2VJbnQoZXYuQ3VycmVudFRhcmdldC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuXHJcblx0XHRcdFx0aWYoeCA+PSB0YXJnZXQuQ2xpZW50V2lkdGggLSAyKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFJlc2l6ZUluZGV4ID0gR2xvYmFsLlBhcnNlSW50KHRhcmdldC5HZXRBdHRyaWJ1dGUoXCJpXCIpKTtcclxuXHRcdFx0XHRcdFJlc2l6ZVNwYW4gPSB0YXJnZXQ7XHJcblx0XHRcdFx0XHRGb3JtLlNldEN1cnNvcihDdXJzb3IuRWFzdFdlc3RSZXNpemUpO1xyXG5cclxuXHRcdFx0XHRcdGV2LlByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRSZXNpemVTcGFuID0gbnVsbDtcclxuXHRcdFx0XHRcdFJlc2l6ZUluZGV4ID0gLTE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRPbkNvbHVtbk1vdXNlTW92ZSA9IChldikgPT4ge1xyXG5cdFx0XHRcdGlmKFJlc2l6ZUluZGV4ID09IC0xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGludCB4ID0gU2NyaXB0LldyaXRlPGludD4oXCJldi5sYXllclhcIik7XHJcblx0XHRcdFx0XHR2YXIgdGFyZ2V0ID0gZXYuVGFyZ2V0LkFzPEhUTUxTcGFuRWxlbWVudD4oKTtcclxuXHRcdFx0XHRcdHggLT0gdGFyZ2V0LkNsaWVudExlZnQ7XHJcblxyXG5cdFx0XHRcdFx0aWYoeCA+PSB0YXJnZXQuQ2xpZW50V2lkdGggLSAyKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRGb3JtLlNldEN1cnNvcihDdXJzb3IuRWFzdFdlc3RSZXNpemUpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRGb3JtLlNldEN1cnNvcihDdXJzb3IuRGVmYXVsdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0T25Db2x1bW5Nb3VzZUxlYXZlID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0aWYoUmVzaXplSW5kZXggPT0gLTEpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Rm9ybS5TZXRDdXJzb3IoQ3Vyc29yLkRlZmF1bHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdE9uUm93RHJhZ1N0YXJ0ID0gKGV2KSA9PiB7XHJcblx0XHRcdFx0U2NyaXB0LkNhbGwoXCJldi5kYXRhVHJhbnNmZXIuc2V0RGF0YVwiLCBcImdyaWR2aWV3Um93RHJhZ1wiLCBKU09OLlN0cmluZ2lmeShEYXRhU291cmNlW0dsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LkdldEF0dHJpYnV0ZShcImlcIikpXS5HZXRPZmZsaW5lRGF0YVJvdygpKSk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRDb250ZW50LkFwcGVuZENoaWxkcmVuKEdyaWRIZWFkZXJDb250YWluZXIsIEdyaWRCb2R5Q29udGFpbmVyKTtcclxuXHJcblx0XHRcdEZpbHRlclJvd09uQ2hhbmdlID0gKHRlKSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Q29sdW1uc1tHbG9iYWwuUGFyc2VJbnQodGUuQ29udGVudC5HZXRBdHRyaWJ1dGUoXCJpXCIpKV0uRmlsdGVyVmFsdWUgPSB0ZS5UZXh0O1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0QXV0b0dlbmVyYXRlQ29sdW1uc0Zyb21Tb3VyY2UgPSBhdXRvR2VuZXJhdGVDb2x1bW5zO1xyXG5cdFx0XHRDb2x1bW5BdXRvV2lkdGggPSBjb2x1bW5BdXRvV2lkdGg7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSB2b2lkIERhdGFTb3VyY2VfT25EYXRhU291cmNlQ2hhbmdlZChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSlcclxuXHRcdHtcclxuXHRcdFx0U29ydENvbHVtbigpO1xyXG5cdFx0XHRSZW5kZXJHcmlkKCk7XHRcdFx0XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5SZW5kZXIoKTtcclxuXHRcdFx0SGFzUmVuZGVyZWQgPSB0cnVlO1xyXG5cdFx0XHRSZW5kZXJHcmlkKCk7XHJcblxyXG5cdFx0XHRpZihDb250ZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGZsb2F0IEdldFJhd1Zpc2libGVSb3dDb3VudCgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBHcmlkQm9keUNvbnRhaW5lci5DbGllbnRIZWlnaHQgPT0gMCA/IDAuMGYgOiBHcmlkQm9keUNvbnRhaW5lci5DbGllbnRIZWlnaHQgLyBVbml0SGVpZ2h0O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBmbG9hdCBHZXRSYXdUb3BSb3dJbmRleCgpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxUb3AgPT0gMCA/IDAuMGYgOiBHcmlkQm9keUNvbnRhaW5lci5TY3JvbGxUb3AgLyBQaXhlbHNQZXJSb3coUm93Q291bnQoKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgVmFsaWRhdGVHcmlkV2lkdGgoKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgd2lkdGggPSBHZXRDb2x1bW5XaWR0aHMoKTtcclxuXHRcdFx0R3JpZEJvZHkuU3R5bGUuV2lkdGggPSAod2lkdGgpLlRvUHgoKTtcclxuXHRcdFx0R3JpZEhlYWRlci5TdHlsZS5XaWR0aCA9ICgod2lkdGgpICsgMjQpLlRvUHgoKTsgLy8gKHdpZHRoKS5Ub1B4KCk7XHJcblx0XHRcdGlmKFJpZ2h0T2ZUYWJsZSA9PSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0UmlnaHRPZlRhYmxlID0gRGl2KCk7XHJcblx0XHRcdFx0R3JpZEJvZHkuQXBwZW5kQ2hpbGQoUmlnaHRPZlRhYmxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihSaWdodE9mVGFibGVIZWFkZXIgPT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFJpZ2h0T2ZUYWJsZUhlYWRlciA9IERpdigpO1xyXG5cdFx0XHRcdEdyaWRIZWFkZXIuQXBwZW5kQ2hpbGQoUmlnaHRPZlRhYmxlSGVhZGVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRSaWdodE9mVGFibGUuU2V0Qm91bmRzKHdpZHRoIC0gMSwgMCwgMSwgMSk7XHJcblx0XHRcdFJpZ2h0T2ZUYWJsZUhlYWRlci5TZXRCb3VuZHMod2lkdGggLSAxLCAwLCAxLCAxKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgZmxvYXQgUGl4ZWxzUGVyUm93KGludCByb3dDb3VudClcclxuXHRcdHtcclxuXHRcdFx0aWYocm93Q291bnQgPiBTZXR0aW5ncy5NYXhpbXVtUGl4ZWxTY3JvbGxpbmdSb3dzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIDMuMGY7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIFVuaXRIZWlnaHQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBWYWxpZGF0ZUdyaWRIZWlnaHQoKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgaSA9IFJvd0NvdW50KCk7XHJcblx0XHRcdHZhciBwcHIgPSBQaXhlbHNQZXJSb3coaSk7XHJcblx0XHRcdHZhciBoZWlnaHQgPSBwcHIgKiBpO1xyXG5cclxuXHRcdFx0aWYoaSA+IFNldHRpbmdzLk1heGltdW1QaXhlbFNjcm9sbGluZ1Jvd3MgJiYgR3JpZEJvZHlDb250YWluZXIuQ2xpZW50SGVpZ2h0ID4gMClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGhlaWdodCArPSAoKEdyaWRCb2R5Q29udGFpbmVyLkNsaWVudEhlaWdodCAvIFVuaXRIZWlnaHQpICogcHByKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0R3JpZEJvZHkuU3R5bGUuSGVpZ2h0ID0gaGVpZ2h0LlRvUHgoKTtcclxuXHRcdFx0aWYoQm90dG9uT2ZUYWJsZSA9PSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Qm90dG9uT2ZUYWJsZSA9IERpdigpO1xyXG5cdFx0XHRcdEdyaWRCb2R5LkFwcGVuZENoaWxkKEJvdHRvbk9mVGFibGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEJvdHRvbk9mVGFibGUuU2V0Qm91bmRzKDAsIGhlaWdodCAtIDEsIDEsIDEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFZhbGlkYXRlR3JpZFNpemUoKVxyXG5cdFx0e1xyXG5cdFx0XHRWYWxpZGF0ZUdyaWRIZWlnaHQoKTtcclxuXHRcdFx0VmFsaWRhdGVHcmlkV2lkdGgoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDbGVhckhlYWRlcigpXHJcblx0XHR7XHJcblx0XHRcdEdyaWRIZWFkZXIuRW1wdHkoKTtcclxuXHRcdFx0R3JpZEhlYWRlci5BcHBlbmRDaGlsZChSaWdodE9mVGFibGVIZWFkZXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIENsZWFyQ29sdW1ucygpXHJcblx0XHR7XHJcblx0XHRcdENvbHVtbnMgPSBuZXcgTGlzdDxHcmlkVmlld0NvbHVtbj4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBDbGVhclZpZXcoKVxyXG5cdFx0e1xyXG5cdFx0XHRDb2x1bW5zID0gbmV3IExpc3Q8R3JpZFZpZXdDb2x1bW4+KCk7XHJcblx0XHRcdFZpc2libGVSb3dIYW5kbGVzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cdFx0XHRTZWxlY3RlZFJvd3MgPSBuZXcgSGFyZFNvZnRMaXN0PGJvb2w+KGZhbHNlKTtcclxuXHRcdFx0X2RhdGFTb3VyY2UgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIENsZWFyQm9keSgpXHJcblx0XHR7XHJcblx0XHRcdEdyaWRCb2R5LkVtcHR5KCk7XHRcdFx0XHJcblx0XHRcdEdyaWRCb2R5LkFwcGVuZENoaWxkcmVuKFJpZ2h0T2ZUYWJsZSwgQm90dG9uT2ZUYWJsZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQ2xlYXJHcmlkKClcclxuXHRcdHtcclxuXHRcdFx0Q2xlYXJIZWFkZXIoKTtcclxuXHRcdFx0Q2xlYXJCb2R5KCk7XHJcblx0XHR9XHJcblx0XHRwcml2YXRlIGludCBEcmFnSW5kZXggPSAtMTtcclxuXHRcdHByaXZhdGUgaW50IFJlc2l6ZUluZGV4ID0gLTE7XHJcblx0XHRwcml2YXRlIGludCBSZXNpemVQYWdlWCA9IDA7XHJcblx0XHRwcml2YXRlIEhUTUxTcGFuRWxlbWVudCBSZXNpemVTcGFuID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0cHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbk9uQ2xpY2s7XHJcblx0XHRwcml2YXRlIEFjdGlvbjxFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbkRyYWdTdGFydDtcclxuXHRcdHByaXZhdGUgQWN0aW9uPEV2ZW50PEhUTUxTcGFuRWxlbWVudD4+IE9uQ29sdW1uRHJhZ092ZXI7XHJcblx0XHRwcml2YXRlIEFjdGlvbjxFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbkRyb3A7XHJcblx0XHRwcml2YXRlIEFjdGlvbjxNb3VzZUV2ZW50PEhUTUxTcGFuRWxlbWVudD4+IE9uQ29sdW1uTW91c2VEb3duO1xyXG5cdFx0cHJpdmF0ZSBBY3Rpb248TW91c2VFdmVudDxIVE1MU3BhbkVsZW1lbnQ+PiBPbkNvbHVtbk1vdXNlTW92ZTtcclxuXHRcdHByaXZhdGUgQWN0aW9uPE1vdXNlRXZlbnQ8SFRNTFNwYW5FbGVtZW50Pj4gT25Db2x1bW5Nb3VzZUxlYXZlO1xyXG5cclxuXHRcdHByaXZhdGUgQWN0aW9uPEV2ZW50PEhUTUxEaXZFbGVtZW50Pj4gT25Sb3dEcmFnU3RhcnQ7XHJcblxyXG5cdFx0cHJpdmF0ZSB2b2lkIFNldHVwQ29sdW1uKEhUTUxTcGFuRWxlbWVudCBzZSwgaW50IGluZGV4LCBHcmlkVmlld0NvbHVtbiBnY29sKVxyXG5cdFx0e1xyXG5cdFx0XHRzZS5TZXRBdHRyaWJ1dGUoXCJpXCIsIENvbnZlcnQuVG9TdHJpbmcoaW5kZXgpKTtcclxuXHRcdFx0c2UuU2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTtcclxuXHRcdFx0c2UuT25DbGljayA9IE9uQ29sdW1uT25DbGljaztcclxuXHRcdFx0c2UuT25EcmFnU3RhcnQgPSBPbkNvbHVtbkRyYWdTdGFydDtcclxuXHRcdFx0c2UuT25EcmFnT3ZlciA9IE9uQ29sdW1uRHJhZ092ZXI7XHJcblx0XHRcdHNlLk9uRHJvcCA9IE9uQ29sdW1uRHJvcDtcdFx0XHJcblx0XHRcdHNlLk9uTW91c2VEb3duID0gT25Db2x1bW5Nb3VzZURvd247XHJcblx0XHRcdHNlLk9uTW91c2VNb3ZlID0gT25Db2x1bW5Nb3VzZU1vdmU7XHJcblx0XHRcdHNlLk9uTW91c2VMZWF2ZSA9IE9uQ29sdW1uTW91c2VMZWF2ZTtcclxuXHRcdH1cclxuXHRcdGludCBsYXN0SWQgPSAtMTtcclxuXHJcblx0XHRpbnQgUHJldlNjcm9sbCA9IC0xO1xyXG5cclxuXHRcdHByaXZhdGUgdm9pZCBQcm9jZXNzQmx1cigpXHJcblx0XHR7XHJcblx0XHRcdGlmKFByZXZTY3JvbGwgIT0gR3JpZEJvZHlDb250YWluZXIuU2Nyb2xsVG9wKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0R3JpZEJvZHkuQ2xhc3NMaXN0LkFkZChcImJsdXJcIik7XHJcblx0XHRcdFx0aWYobGFzdElkICE9IC0xKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdEdsb2JhbC5DbGVhclRpbWVvdXQobGFzdElkKTtcclxuXHRcdFx0XHRcdGxhc3RJZCA9IC0xO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0bGFzdElkID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4ge1xyXG5cdFx0XHRcdFx0R3JpZEJvZHkuQ2xhc3NMaXN0LlJlbW92ZShcImJsdXJcIik7XHJcblx0XHRcdFx0fSksIDEwMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0UHJldlNjcm9sbCA9IEdyaWRCb2R5Q29udGFpbmVyLlNjcm9sbFRvcDtcclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIEFjdGlvbjxUZXh0SW5wdXQ+IEZpbHRlclJvd09uQ2hhbmdlO1xyXG5cclxuXHRcdHByaXZhdGUgaW50IFJlbmRlclRpbWUgPSAtMTtcclxuXHRcdHByaXZhdGUgQWN0aW9uIHJlbmRlckdyaWRJbnRlcm5hbDtcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBSZW5kZXJHcmlkKClcclxuXHRcdHtcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0aWYoUmVuZGVyVGltZSA+IC0xKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0R2xvYmFsLkNsZWFyVGltZW91dChSZW5kZXJUaW1lKTtcclxuXHRcdFx0XHRSZW5kZXJUaW1lID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbilyZW5kZXJHcmlkSW50ZXJuYWwsIDEpO1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmVuZGVyR3JpZEludGVybmFsKCk7XHJcblx0XHRcdH1cdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBTb3J0U2V0dGluZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlld0NvbHVtbiBDb2x1bW47XHJcbiAgICAgICAgcHVibGljIEdyaWRWaWV3U29ydE1vZGUgU29ydE1vZGU7XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIEdyaWRWaWV3Q2VsbERpc3BsYXlDaGVja0JveCA6IEdyaWRWaWV3Q2VsbERpc3BsYXlcclxuXHR7XHJcblx0XHRwdWJsaWMgc3RhdGljIHN0cmluZyByZXNvdXJjZV9jaGVja2VkID0gXCJjaGVja2VkXCI7XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIEhUTUxFbGVtZW50IE9uQ3JlYXRlKEdyaWRWaWV3IGdyaWRWaWV3LCBpbnQgZGF0YVJvd0luZGV4LCBpbnQgY29sdW1uSW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdHZhciB2YWx1ZSA9IGdyaWRWaWV3LkdldFJvd0NlbGxWYWx1ZShkYXRhUm93SW5kZXgsIGNvbHVtbkluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZWxsID0gQ29udHJvbC5EaXYoXCJjZWxsXCIpO1xyXG5cdFx0XHR2YXIgaW5wdXQgPSBDb250cm9sLklucHV0KFwiXCIsIElucHV0VHlwZS5DaGVja2JveCk7XHJcblx0XHRcdGlucHV0LlNldEJvdW5kc0Z1bGwoKTtcclxuXHRcdFx0aW5wdXQuU2V0Q2hlY2tlZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlucHV0LlN0eWxlLk1hcmdpbiA9IFwiMFwiO1xyXG4gICAgICAgICAgICBjZWxsLkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBjZWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBjbGFzcyBHcmlkVmlld0NlbGxEaXNwbGF5SW1hZ2UgOiBHcmlkVmlld0NlbGxEaXNwbGF5XHJcblx0e1xyXG5cdFx0cHVibGljIGJvb2wgVXNlQmFzZTY0UmVzb3VyY2U7XHJcblx0XHRwdWJsaWMgb3ZlcnJpZGUgSFRNTEVsZW1lbnQgT25DcmVhdGUoR3JpZFZpZXcgZ3JpZFZpZXcsIGludCBkYXRhUm93SW5kZXgsIGludCBjb2x1bW5JbmRleClcclxuXHRcdHtcclxuXHRcdFx0dmFyIHNyYyA9IChncmlkVmlldy5HZXRSb3dDZWxsVmFsdWUoZGF0YVJvd0luZGV4LCBjb2x1bW5JbmRleCkgKyBcIlwiKS5IdG1sVXJsRXNjYXBlKCk7XHJcblx0XHRcdHZhciBpbWdEaXYgPSBDb250cm9sLkRpdihcImNlbGxcIik7XHJcblxyXG5cdFx0XHRpbWdEaXYuU2V0SW1hZ2Uoc3JjLCAhVXNlQmFzZTY0UmVzb3VyY2UpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGltZ0RpdjtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBJbWFnZUVkaXQgOiBDb250cm9sXHJcbiAgICB7XHJcbiAgICAgICAgcHJpdmF0ZSBDb250cm9sIF9ub0ltYWdlRGF0YVRleHQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfaXNVUkw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIGlzVXJsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2lzVVJMOyB9XHJcbiAgICAgICAgICAgIHNldCB7XHJcbiAgICAgICAgICAgICAgICBpZihfaXNVUkwgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2lzVVJMID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVmcmVzaEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBJbWFnZUVkaXQoKSA6IGJhc2UoXCJpbnB1dGNvbnRyb2xcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQgPSBuZXcgQ29udHJvbChcImZvcm0taGVhZGluZy10aXRsZVwiKTtcclxuICAgICAgICAgICAgX25vSW1hZ2VEYXRhVGV4dC5Db250ZW50LklubmVySFRNTCA9IFwiTm8gaW1hZ2UgZGF0YVwiO1xyXG4gICAgICAgICAgICBfbm9JbWFnZURhdGFUZXh0LkNvbnRlbnQuU3R5bGUuQ29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQuQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0O1xyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZChfbm9JbWFnZURhdGFUZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RyaW5nIF9pbWFnZTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVmcmVzaEltYWdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoX2ltYWdlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2ltYWdlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIF9ub0ltYWdlRGF0YVRleHQuQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX25vSW1hZ2VEYXRhVGV4dC5Db250ZW50LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LkluaGVyaXQ7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuU2V0SW1hZ2UoX2ltYWdlLCBfaXNVUkwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBJbWFnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9pbWFnZTsgfVxyXG4gICAgICAgICAgICBzZXQge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihfaW1hZ2UgPT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgX2ltYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBSZWZyZXNoSW1hZ2UoKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIFByb2dyZXNzQ29udHJvbCA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwcml2YXRlIGludCBwb3NpdGlvbjtcclxuXHJcblx0XHRwdWJsaWMgSFRNTERpdkVsZW1lbnQgaW50ZXJuYWxQcm9ncmVzc0NvbnRyb2w7XHJcblxyXG5cdFx0cHJpdmF0ZSBpbnQgbWF4aW11bTtcclxuXHJcblx0XHRwdWJsaWMgaW50IFN0ZXAgPSAxO1xyXG5cclxuXHRcdHB1YmxpYyBib29sIERpc2FibGVVcGRhdGUgPSBmYWxzZTtcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBOZXh0U3RlcCgpXHJcblx0XHR7XHJcblx0XHRcdFBvc2l0aW9uICs9IFN0ZXA7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBNYXhpbXVtXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBtYXhpbXVtOyB9XHJcblx0XHRcdHNldCB7XHJcblx0XHRcdFx0aWYodmFsdWUgPCAxKVxyXG5cdFx0XHRcdFx0dmFsdWUgPSAxO1xyXG5cdFx0XHRcdGlmKHZhbHVlIDwgcG9zaXRpb24pXHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdG1heGltdW0gPSB2YWx1ZTtcclxuXHRcdFx0XHRpZighRGlzYWJsZVVwZGF0ZSlcclxuXHRcdFx0XHRcdFVwZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGludCBQb3NpdGlvblxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gcG9zaXRpb247IH1cclxuXHRcdFx0c2V0IHtcclxuXHRcdFx0XHRpZih2YWx1ZSA8IDApXHJcblx0XHRcdFx0XHR2YWx1ZSA9IDA7XHJcblx0XHRcdFx0ZWxzZSBpZih2YWx1ZSA+IG1heGltdW0pXHJcblx0XHRcdFx0XHR2YWx1ZSA9IG1heGltdW07XHJcblx0XHRcdFx0cG9zaXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRpZighRGlzYWJsZVVwZGF0ZSlcclxuXHRcdFx0XHRcdFVwZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIFByb2dyZXNzQ29udHJvbCgpIDogYmFzZShcInByb2dyZXNzYmFyXCIpXHJcblx0XHR7XHJcblx0XHRcdGludGVybmFsUHJvZ3Jlc3NDb250cm9sID0gRGl2KFwicHJvZ3Jlc3NiYXJib2R5XCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuUmVuZGVyKCk7XHJcblxyXG5cdFx0XHRDb250ZW50LkFwcGVuZENoaWxkKGludGVybmFsUHJvZ3Jlc3NDb250cm9sKTtcclxuXHJcblx0XHRcdFVwZGF0ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFVwZGF0ZSgpXHJcblx0XHR7XHJcblx0XHRcdGlmKERpc2FibGVVcGRhdGUgfHwgaW50ZXJuYWxQcm9ncmVzc0NvbnRyb2wgPT0gbnVsbClcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGlmKG1heGltdW0gPT0gMCB8fCBwb3NpdGlvbiA9PSAwKVxyXG5cdFx0XHRcdGludGVybmFsUHJvZ3Jlc3NDb250cm9sLlN0eWxlLldpZHRoID0gXCIwJVwiO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzdHJpbmcgc291cmNlID0gU2NyaXB0LldyaXRlPHN0cmluZz4oXCIoKHRoaXMucG9zaXRpb24gLyB0aGlzLm1heGltdW0pICogMTAwLjAwKSArICclJ1wiKTtcdFx0XHRcdFxyXG5cdFx0XHRcdGludGVybmFsUHJvZ3Jlc3NDb250cm9sLlN0eWxlLldpZHRoID0gXCJjYWxjKFwiICsgc291cmNlICsgXCIgLSAycHgpXCI7IFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRbTmFtZXNwYWNlKHRydWUpXVxyXG5cdHB1YmxpYyBjbGFzcyBSaWJib25CdXR0b24gOiBDb250cm9sXHJcblx0e1xyXG5cdFx0cHJpdmF0ZSBzdHJpbmcgX2ljb24gPSBcIlwiO1xyXG5cdFx0cHVibGljIHN0cmluZyBJY29uIHsgZ2V0IHtcclxuXHRcdFx0XHRyZXR1cm4gX2ljb247XHJcblx0XHRcdH0gc2V0IHtcdFx0XHRcdFxyXG5cdFx0XHRcdGlmKF9pY29uICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF9pY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRQcm9jZXNzSW1hZ2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHByaXZhdGUgc3RyaW5nIF9pY29uVVJMID0gXCJcIjtcclxuXHRcdHB1YmxpYyBzdHJpbmcgSWNvblVSTFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBfaWNvblVSTDtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKF9pY29uVVJMICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF9pY29uVVJMID0gdmFsdWU7XHJcblx0XHRcdFx0XHRQcm9jZXNzSW1hZ2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHByaXZhdGUgc3RyaW5nIF9jYXB0aW9uID0gXCJcIjtcclxuXHRcdHB1YmxpYyBzdHJpbmcgQ2FwdGlvblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBfY2FwdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKF9jYXB0aW9uICE9IHZhbHVlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdF9jYXB0aW9uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRQcm9jZXNzQ2FwdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRwdWJsaWMgYm9vbCBCZWdpbkdyb3VwID0gZmFsc2U7XHJcblx0XHRwdWJsaWMgYm9vbCBJc1NtYWxsQ2FwdGlvbiA9IGZhbHNlO1x0XHRcclxuXHJcblx0XHRwdWJsaWMgQWN0aW9uPFJpYmJvbkJ1dHRvbj4gT25JdGVtQ2xpY2s7XHJcblxyXG5cdFx0cHJpdmF0ZSBib29sIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgSFRNTERpdkVsZW1lbnQgY2FwdGlvbkRpdiA9IG51bGw7XHJcblx0XHRwdWJsaWMgSFRNTERpdkVsZW1lbnQgaW1hZ2VEaXYgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRwdWJsaWMgdm9pZCBzZXRFbmFibGVkKGJvb2wgdmFsdWUpXHJcblx0XHR7XHJcblx0XHRcdENoYW5nZVN0YXRlKHZhbHVlKTtcclxuXHRcdFx0aWYodmFsdWUpXHJcblx0XHRcdHtcdFx0XHRcdFxyXG5cdFx0XHRcdGlmKGltYWdlRGl2ICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYuQ2xhc3NMaXN0LlJlbW92ZShcImRpc2FibGVkXCIpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY2FwdGlvbkRpdiAhPSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNhcHRpb25EaXYuQ2xhc3NMaXN0LlJlbW92ZShcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcdFx0XHRcdFxyXG5cdFx0XHRcdGlmKGltYWdlRGl2ICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYuQ2xhc3NMaXN0LkFkZChcImRpc2FibGVkXCIpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY2FwdGlvbkRpdiAhPSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNhcHRpb25EaXYuQ2xhc3NMaXN0LkFkZChcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBib29sIEVuYWJsZWQgeyBnZXQge1xyXG5cdFx0XHRcdHJldHVybiBlbmFibGVkO1xyXG5cdFx0XHR9IHNldCB7XHJcblx0XHRcdFx0ZW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdHNldEVuYWJsZWQodmFsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHB1YmxpYyBSaWJib25CdXR0b24oc3RyaW5nIGNhcHRpb24gPSBcIlwiLCBib29sIF9pc1NtYWxsQ2FwdGlvbiA9IGZhbHNlKSA6IGJhc2UoX2lzU21hbGxDYXB0aW9uID8gXCJyaWJib25idXR0b25zbWFsbFwiIDogXCJyaWJib25idXR0b25cIilcclxuXHRcdHtcclxuXHRcdFx0Q2FwdGlvbiA9IGNhcHRpb247XHJcblx0XHRcdElzU21hbGxDYXB0aW9uID0gX2lzU21hbGxDYXB0aW9uO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgQWN0aW9uPFJpYmJvbkJ1dHRvbj4gQWZ0ZXJJdGVtQ2xpY2s7XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuXHRcdHtcclxuXHRcdFx0SGFzUmVuZGVyZWQgPSB0cnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0Q29udGVudC5PbkNsaWNrID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBib29sIHdhc0VuYWJsZWQgPSBlbmFibGVkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGVuYWJsZWQgJiYgT25JdGVtQ2xpY2sgIT0gbnVsbClcclxuXHRcdFx0XHRcdE9uSXRlbUNsaWNrKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgaWYod2FzRW5hYmxlZCAmJiBBZnRlckl0ZW1DbGljayAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIEFmdGVySXRlbUNsaWNrKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1x0XHRcdFx0XHJcblx0XHRcdH07XHJcblxyXG4gICAgICAgICAgICBQcm9jZXNzQ2FwdGlvbigpO1xyXG4gICAgICAgICAgICBQcm9jZXNzSW1hZ2UoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNldEVuYWJsZWQoZW5hYmxlZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgUHJvY2Vzc0NhcHRpb24oKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBpZihjYXB0aW9uRGl2ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhcHRpb25EaXYuUmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXB0aW9uRGl2ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShDYXB0aW9uKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhcHRpb25EaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsY2FwdGlvblwiIDogXCJyaWJib25idXR0b25jYXB0aW9uXCIpO1xyXG5cclxuXHRcdFx0XHRjYXB0aW9uRGl2LklubmVySFRNTCA9IENhcHRpb247XHJcblxyXG5cdFx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQoY2FwdGlvbkRpdik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBQcm9jZXNzSW1hZ2UoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihpbWFnZURpdiA9PSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoSWNvbikpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsaWNvblwiIDogXCJyaWJib25idXR0b25pY29uXCIpO1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYuU3R5bGUuQmFja2dyb3VuZCA9IEdldEltYWdlU3RyaW5nKEljb24pOyAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoSWNvblVSTCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYgPSBEaXYoSXNTbWFsbENhcHRpb24gPyBcInJpYmJvbmJ1dHRvbnNtYWxsaWNvblwiIDogXCJyaWJib25idXR0b25pY29uXCIpO1xyXG5cdFx0XHRcdFx0aW1hZ2VEaXYuU3R5bGUuQmFja2dyb3VuZCA9IEdldEltYWdlU3RyaW5nVVJJKEljb25VUkwpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICBpZihpbWFnZURpdiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQoaW1hZ2VEaXYpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShJY29uKSlcclxuXHRcdFx0XHR7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aW1hZ2VEaXYuU3R5bGUuQmFja2dyb3VuZCA9IEdldEltYWdlU3RyaW5nKEljb24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKEljb25VUkwpKVxyXG5cdFx0XHRcdHtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpbWFnZURpdi5TdHlsZS5CYWNrZ3JvdW5kID0gR2V0SW1hZ2VTdHJpbmdVUkkoSWNvblVSTCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZihpbWFnZURpdiAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aW1hZ2VEaXYuU3R5bGUuQmFja2dyb3VuZFNpemUgPSBcIjEwMCUgMTAwJVwiO1x0XHRcdFx0XHJcblxyXG5cdFx0XHRcdGlmKGNhcHRpb25EaXYgIT0gbnVsbCAmJiBJc1NtYWxsQ2FwdGlvbilcclxuXHRcdFx0XHRcdGNhcHRpb25EaXYuU3R5bGUuTGVmdCA9IFwiMjhweFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKGNhcHRpb25EaXYgIT0gbnVsbCAmJiBJc1NtYWxsQ2FwdGlvbilcclxuXHRcdFx0XHRcdGNhcHRpb25EaXYuU3R5bGUuTGVmdCA9IFwiNnB4XCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRbTmFtZXNwYWNlKHRydWUpXVxyXG5cdHB1YmxpYyBjbGFzcyBSaWJib25Db250cm9sIDogQ29udHJvbCwgSVBhZ2VzXHJcbiAgICB7XHJcblx0XHRwdWJsaWMgTGlzdDxSaWJib25QYWdlPiBSaWJib25QYWdlcyB7IGdldDsgc2V0OyB9XHJcblx0XHRwdWJsaWMgc3RyaW5nIEljb25VUkwgPSBcImZhdi5pY29cIjtcclxuXHRcdHB1YmxpYyByZWFkb25seSBSaWJib25UeXBlIFR5cGU7XHJcbiAgICAgICAgcHVibGljIEhUTUxEaXZFbGVtZW50IEFwcGxpY2F0aW9uSWNvbiA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIEFjdGlvbjxpbnQsIFJpYmJvblBhZ2U+IE9uU2VsZWN0ZWRQYWdlQ2hhbmdlID0gbnVsbDsgICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIFJpYmJvblR5cGVcclxuXHRcdHtcclxuXHRcdFx0RnVsbCxcclxuXHRcdFx0Q29tcGFjdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBSaWJib25Db250cm9sKFJpYmJvblR5cGUgdHlwZSA9IFJpYmJvblR5cGUuRnVsbCkgOiBiYXNlKFwicmliYm9uY29udHJvbFwiICsgKHR5cGUgPT0gUmliYm9uVHlwZS5GdWxsID8gXCJcIiA6IFwiIHJpYmJvbmNvbnRyb2wtY29tcGFjdFwiKSlcclxuXHRcdHtcclxuXHRcdFx0VHlwZSA9IHR5cGU7XHJcblxyXG4gICAgICAgICAgICBDb250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgQWRkUmliYm9uUGFnZXMocGFyYW1zIFJpYmJvblBhZ2VbXSBwYWdlcylcclxuXHRcdHtcclxuXHRcdFx0aWYocGFnZXMgIT0gbnVsbClcclxuXHRcdFx0XHRSaWJib25QYWdlcy5BZGRSYW5nZShwYWdlcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBpbnQgc2VsZWN0ZWRpbmRleCA9IC0xO1xyXG5cdFx0cHVibGljIGludCBTZWxlY3RlZEluZGV4IHsgZ2V0IHtcclxuXHRcdFx0XHRyZXR1cm4gc2VsZWN0ZWRpbmRleDtcclxuXHRcdFx0fSBzZXQge1xyXG5cdFx0XHRcdGlmKHZhbHVlIDwgMClcclxuXHRcdFx0XHRcdHZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZGluZGV4ID49IFJpYmJvblBhZ2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkaW5kZXggPSBSaWJib25QYWdlcy5Db3VudCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkaW5kZXggIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRpbmRleCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKE9uU2VsZWN0ZWRQYWdlQ2hhbmdlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9uU2VsZWN0ZWRQYWdlQ2hhbmdlKHNlbGVjdGVkaW5kZXgsIFJpYmJvblBhZ2VzW3NlbGVjdGVkaW5kZXhdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRTZXRTZWxlY3RlZEluZGV4KHZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBNZW51Q2xpY2soKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHZvaWQgU2V0U2VsZWN0ZWRJbmRleChpbnQgaW5kZXgpXHJcblx0XHR7XHJcblx0XHRcdGlmKFJpYmJvblBhZ2VzICE9IG51bGwgJiYgUmliYm9uUGFnZXMuQ291bnQgPiAwKVxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgUmliYm9uUGFnZXMuQ291bnQ7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZihSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIgIT0gbnVsbClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLkNsYXNzTGlzdC5SZW1vdmUoXCJyaWJib25wYWdlaGVhZGVyLWhpZGRlblwiKTtcclxuXHRcdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLkNsYXNzTGlzdC5SZW1vdmUoXCJyaWJib25wYWdlaGVhZGVyLWFjdGl2ZVwiKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmKGkgPT0gaW5kZXgpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuQ2xhc3NMaXN0LkFkZChcInJpYmJvbnBhZ2VoZWFkZXItYWN0aXZlXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFJpYmJvblBhZ2VzW2ldLkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSW5oZXJpdDtcclxuXHRcdFx0XHRcdFx0fWVsc2VcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlci5DbGFzc0xpc3QuQWRkKFwicmliYm9ucGFnZWhlYWRlci1oaWRkZW5cIik7XHJcblx0XHRcdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRIYXNSZW5kZXJlZCA9IHRydWU7XHJcblx0XHRcdGlmKFR5cGUgPT0gUmliYm9uVHlwZS5GdWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoQXBwbGljYXRpb25JY29uICE9IG51bGwpXHJcblx0XHRcdFx0XHRBcHBsaWNhdGlvbkljb24uRGVsZXRlKCk7XHJcblx0XHRcdFx0QXBwbGljYXRpb25JY29uID0gRGl2KFwiYXBwbGljYXRpb24taWNvblwiKTtcclxuXHRcdFx0XHR2YXIgYXBwSWNvbkltYWdlID0gRGl2KFwiZmF2LWljb25cIik7XHJcblx0XHRcdFx0YXBwSWNvbkltYWdlLlN0eWxlLkJhY2tncm91bmQgPSBSaWJib25CdXR0b24uR2V0SW1hZ2VTdHJpbmdVUkkoSWNvblVSTCk7XHJcblx0XHRcdFx0YXBwSWNvbkltYWdlLlN0eWxlLkJhY2tncm91bmRTaXplID0gXCIxMDAlIDEwMCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkljb24uQXBwZW5kQ2hpbGQoYXBwSWNvbkltYWdlKTtcclxuXHJcblx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChBcHBsaWNhdGlvbkljb24pO1xyXG5cdFx0XHR9XHRcdFx0XHJcblxyXG5cdFx0XHRpZihSaWJib25QYWdlcyAhPSBudWxsICYmIFJpYmJvblBhZ2VzLkNvdW50ID4gMClcdFx0XHRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGludCB3aWR0aCA9IDU4O1xyXG5cdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBSaWJib25QYWdlcy5Db3VudDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKENvbnRlbnQuQ29udGFpbnMoUmliYm9uUGFnZXNbaV0pKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5Db250ZW50LkRlbGV0ZSgpO1xyXG5cdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuRGVsZXRlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5SZW5kZXIoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYoVHlwZSA9PSBSaWJib25UeXBlLkNvbXBhY3QpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmKCFSaWJib25QYWdlc1tpXS5Db250ZW50LkNsYXNzTmFtZS5Db250YWlucyhcInJpYmJvbnBhZ2UtY29tcGFjdFwiKSlcclxuXHRcdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5Db250ZW50LkNsYXNzTGlzdC5BZGQoXCJyaWJib25wYWdlLWNvbXBhY3RcIik7XHJcblx0XHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihSaWJib25QYWdlc1tpXS5Db250ZW50LkNsYXNzTmFtZS5Db250YWlucyhcInJpYmJvbnBhZ2UtY29tcGFjdFwiKSlcclxuXHRcdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5Db250ZW50LkNsYXNzTGlzdC5SZW1vdmUoXCJyaWJib25wYWdlLWNvbXBhY3RcIik7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aW50IGluZGV4ID0gaTtcclxuXHJcblx0XHRcdFx0XHRpZihpID09IHNlbGVjdGVkaW5kZXgpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlciA9IERpdihcInJpYmJvbnBhZ2VoZWFkZXIgcmliYm9ucGFnZWhlYWRlci1hY3RpdmVcIiArIChUeXBlID09IFJpYmJvblR5cGUuRnVsbCA/IFwiXCIgOiBcIiByaWJib25wYWdlaGVhZGVyLWNvbXBhY3RcIikpO1xyXG5cdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5Db250ZW50LlN0eWxlLlZpc2liaWxpdHkgPSBWaXNpYmlsaXR5LlZpc2libGU7XHJcblx0XHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIgPSBEaXYoXCJyaWJib25wYWdlaGVhZGVyIHJpYmJvbnBhZ2VoZWFkZXItaGlkZGVuXCIgKyAoVHlwZSA9PSBSaWJib25UeXBlLkZ1bGwgPyBcIlwiIDogXCIgcmliYm9ucGFnZWhlYWRlci1jb21wYWN0XCIpKTtcclxuXHRcdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRTZWxlY3RlZEluZGV4ID0gaW5kZXg7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLk9uVG91Y2hTdGFydCA9IChldikgPT5cclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0U2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG5cdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0XHRSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIuSW5uZXJIVE1MID0gUmliYm9uUGFnZXNbaV0uQ2FwdGlvbjtcclxuXHJcblx0XHRcdFx0XHRpbnQgaW53aWR0aCA9IDI0O1xyXG5cclxuXHRcdFx0XHRcdGlmKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShSaWJib25QYWdlc1tpXS5DYXB0aW9uKSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aW53aWR0aCArPSAoaW50KUdldFRleHRXaWR0aChSaWJib25QYWdlc1tpXS5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0UmliYm9uUGFnZXNbaV0uUmliYm9uSGVhZGVyLlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuXHRcdFx0XHRcdFJpYmJvblBhZ2VzW2ldLlJpYmJvbkhlYWRlci5TdHlsZS5XaWR0aCA9IGlud2lkdGggKyBcInB4XCI7XHJcblxyXG5cdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChSaWJib25QYWdlc1tpXS5SaWJib25IZWFkZXIpO1xyXG5cdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChSaWJib25QYWdlc1tpXSk7XHJcblxyXG5cdFx0XHRcdFx0d2lkdGggKz0gaW53aWR0aDtcclxuXHRcdFx0XHR9XHRcdFx0XHRcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICBTZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRpbmRleDtcclxuXHRcdH1cclxuXG5cdFxucHJpdmF0ZSBMaXN0PFJpYmJvblBhZ2U+IF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19SaWJib25QYWdlcz1uZXcgTGlzdDxSaWJib25QYWdlPigpO31cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0W05hbWVzcGFjZSh0cnVlKV1cclxuXHRwdWJsaWMgY2xhc3MgUmliYm9uR3JvdXAgOiBDb250cm9sXHJcblx0e1xyXG5cdFx0cHVibGljIHN0cmluZyBDYXB0aW9uIHsgZ2V0OyBzZXQ7IH1cclxuXHRcdHB1YmxpYyBMaXN0PFJpYmJvbkJ1dHRvbj4gQnV0dG9ucyB7IGdldDsgc2V0OyB9XHJcblx0XHRwcml2YXRlIGJvb2wgZW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0cHJpdmF0ZSBIVE1MRGl2RWxlbWVudCBjYXB0aW9uRGl2ID0gbnVsbDtcclxuXHJcblx0XHRwdWJsaWMgYm9vbCBFbmFibGVkXHJcblx0XHR7XHJcblx0XHRcdGdldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIGVuYWJsZWQ7XHJcblx0XHRcdH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRlbmFibGVkID0gdmFsdWU7XHJcblx0XHRcdFx0c2V0RW5hYmxlZCh2YWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBzZXRFbmFibGVkKGJvb2wgdmFsdWUpXHJcblx0XHR7XHRcdFx0XHJcblx0XHRcdGlmKEJ1dHRvbnMuQ291bnQgPiAwKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IEJ1dHRvbnMuQ291bnQ7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRpZighdmFsdWUpXHJcblx0XHRcdFx0XHRcdEJ1dHRvbnNbaV0uc2V0RW5hYmxlZCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdEJ1dHRvbnNbaV0uc2V0RW5hYmxlZChCdXR0b25zW2ldLkVuYWJsZWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRDaGFuZ2VTdGF0ZSh2YWx1ZSk7XHJcblx0XHRcdGlmKHZhbHVlKVxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHRpZihjYXB0aW9uRGl2ICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y2FwdGlvbkRpdi5DbGFzc0xpc3QuUmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1x0XHRcdFx0XHJcblx0XHRcdFx0aWYoY2FwdGlvbkRpdiAhPSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGNhcHRpb25EaXYuQ2xhc3NMaXN0LkFkZChcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBSaWJib25Hcm91cChzdHJpbmcgX2NhcHRpb24gPSBcIlwiKSA6IGJhc2UoXCJyaWJib25ncm91cFwiKVxyXG5cdFx0e1xyXG5cdFx0XHRDYXB0aW9uID0gX2NhcHRpb247XHJcblx0XHRcdEJ1dHRvbnMgPSBuZXcgTGlzdDxSaWJib25CdXR0b24+KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIFJpYmJvbkdyb3VwKHN0cmluZyBfY2FwdGlvbiwgcGFyYW1zIFJpYmJvbkJ1dHRvbltdIGJ1dHRvbnMpIDogYmFzZShcInJpYmJvbmdyb3VwXCIpXHJcblx0XHR7XHJcblx0XHRcdENhcHRpb24gPSBfY2FwdGlvbjtcclxuXHRcdFx0QnV0dG9ucyA9IG5ldyBMaXN0PFJpYmJvbkJ1dHRvbj4oKTtcclxuXHRcdFx0aWYoYnV0dG9ucyAhPW51bGwpXHJcblx0XHRcdFx0QnV0dG9ucy5BZGRSYW5nZShidXR0b25zKTtcclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIEhUTUxEaXZFbGVtZW50IENyZWF0ZVZlcnRpY2FsTGluZShpbnQgaGVpZ2h0KVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgaHRtbERpdiA9IERpdihcInJpYmJvbnNlcGVyYXRvclwiKTtcclxuXHRcdFx0aWYoaGVpZ2h0ICE9IDU4KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aHRtbERpdi5TdHlsZS5IZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcblx0XHRcdH1cdFx0XHRcclxuXHJcblx0XHRcdHJldHVybiBodG1sRGl2O1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBjbGFzcyBSZW5kZXJJbmZvXHJcblx0XHR7XHJcblx0XHRcdHB1YmxpYyBpbnQgTGVmdDtcclxuXHRcdFx0cHVibGljIGludCBXaWR0aDtcclxuXHJcblx0XHRcdHB1YmxpYyBib29sIElzU21hbGwgPSBmYWxzZTtcclxuXHRcdFx0XHJcblx0XHRcdHB1YmxpYyBSaWJib25CdXR0b24gRmlyc3RCdXR0b247XHJcblx0XHRcdHB1YmxpYyBSaWJib25CdXR0b24gU2Vjb25kQnV0dG9uO1xyXG5cdFx0XHRwdWJsaWMgUmliYm9uQnV0dG9uIFRoaXJkQnV0dG9uO1xyXG5cclxuXHRcdFx0cHVibGljIGJvb2wgQmVnaW5Hcm91cCA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBMaXN0PFJlbmRlckluZm8+IHJpTGlzdCA9IG51bGw7XHJcblxyXG5cdFx0cHVibGljIHZvaWQgR2VuZXJhdGVSTGlzdCgpXHJcblx0XHR7XHJcblxyXG5cdFx0XHRSZW5kZXJJbmZvIHJpID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmKHJpTGlzdCA9PSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmlMaXN0ID0gbmV3IExpc3Q8UmVuZGVySW5mbz4oKTtcclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgQnV0dG9ucy5Db3VudDsgaSsrKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGlmKHJpID09IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHJpID0gbmV3IFJlbmRlckluZm8oKTtcclxuXHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24gPSBCdXR0b25zW2ldO1xyXG5cdFx0XHRcdFx0XHRyaS5Jc1NtYWxsID0gcmkuRmlyc3RCdXR0b24uSXNTbWFsbENhcHRpb247XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmKHJpLklzU21hbGwgIT0gQnV0dG9uc1tpXS5Jc1NtYWxsQ2FwdGlvbiB8fCBCdXR0b25zW2ldLkJlZ2luR3JvdXAgfHwgIUJ1dHRvbnNbaV0uSXNTbWFsbENhcHRpb24gfHwgKHJpLkZpcnN0QnV0dG9uICE9IG51bGwgJiYgcmkuU2Vjb25kQnV0dG9uICE9IG51bGwgJiYgcmkuVGhpcmRCdXR0b24gIT0gbnVsbCkpXHJcblx0XHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHJpTGlzdC5BZGQocmkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRyaSA9IG5ldyBSZW5kZXJJbmZvKCk7XHJcblx0XHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24gPSBCdXR0b25zW2ldO1xyXG5cdFx0XHRcdFx0XHRcdHJpLklzU21hbGwgPSBCdXR0b25zW2ldLklzU21hbGxDYXB0aW9uO1xyXG5cdFx0XHRcdFx0XHRcdHJpLkJlZ2luR3JvdXAgPSBCdXR0b25zW2ldLkJlZ2luR3JvdXA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aWYocmkuU2Vjb25kQnV0dG9uID09IG51bGwpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0cmkuU2Vjb25kQnV0dG9uID0gQnV0dG9uc1tpXTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdHJpLlRoaXJkQnV0dG9uID0gQnV0dG9uc1tpXTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmKHJpICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cmlMaXN0LkFkZChyaSk7XHJcblx0XHRcdFx0XHRyaSA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHRcdFx0XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuXHRcdHtcclxuXHRcdFx0SGFzUmVuZGVyZWQgPSB0cnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0R2VuZXJhdGVSTGlzdCgpO1xyXG5cclxuXHRcdFx0Q29udGVudC5FbXB0eSgpO1xyXG5cclxuXHRcdFx0aW50IHdpZHRoID0gMDtcclxuXHJcblx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCByaUxpc3QuQ291bnQ7IGkrKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciByaSA9IHJpTGlzdFtpXTtcclxuXHJcblx0XHRcdFx0aWYocmkuQmVnaW5Hcm91cClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR3aWR0aCArPSAzO1xyXG5cdFx0XHRcdFx0dmFyIHZsYmcgPSBDcmVhdGVWZXJ0aWNhbExpbmUoNTgpO1xyXG5cdFx0XHRcdFx0dmxiZy5TdHlsZS5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcblxyXG5cdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZCh2bGJnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHdpZHRoICs9IDM7XHJcblxyXG5cdFx0XHRcdGlmKHJpLklzU21hbGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aW50IE1heFdpZHRoO1xyXG5cclxuXHRcdFx0XHRcdGlmKHJpLlRoaXJkQnV0dG9uID09IG51bGwpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlmIChyaS5TZWNvbmRCdXR0b24gPT0gbnVsbClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdE1heFdpZHRoID0gTWF0aC5NYXgoKGludClHZXRUZXh0V2lkdGgocmkuRmlyc3RCdXR0b24uQ2FwdGlvbiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpICsgMjggKyA2LCA2NCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24uUmVuZGVyKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cdFx0XHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBNYXhXaWR0aCArIFwicHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5Ub3AgPSBcIjI2cHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChyaS5GaXJzdEJ1dHRvbik7XHJcblx0XHRcdFx0XHRcdFx0Ly8gMVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdE1heFdpZHRoID0gTWF0aC5NYXgoTWF0aC5NYXgoKGludClHZXRUZXh0V2lkdGgocmkuRmlyc3RCdXR0b24uQ2FwdGlvbiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpLFxyXG5cdFx0XHRcdFx0XHRcdFx0KGludClHZXRUZXh0V2lkdGgocmkuU2Vjb25kQnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSkgKyAyOCArIDYsIDY0KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRyaS5GaXJzdEJ1dHRvbi5SZW5kZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRyaS5TZWNvbmRCdXR0b24uUmVuZGVyKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cdFx0XHRcdFx0XHRcdHJpLlNlY29uZEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5Ub3AgPSAoKCgxMDAgLSAzKSAvIDMpIC0gMTEpICsgXCJweFwiO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRyaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLldpZHRoID0gTWF4V2lkdGggKyBcInB4XCI7XHJcblx0XHRcdFx0XHRcdFx0cmkuU2Vjb25kQnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBNYXhXaWR0aCArIFwicHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5Ub3AgPSBcIjExcHhcIjtcclxuXHRcdFx0XHRcdFx0XHRyaS5TZWNvbmRCdXR0b24uQ29udGVudC5TdHlsZS5Ub3AgPSBcIjQxcHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChyaS5GaXJzdEJ1dHRvbik7XHJcblx0XHRcdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChyaS5TZWNvbmRCdXR0b24pO1x0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gMlxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRNYXhXaWR0aCA9IE1hdGguTWF4KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5NYXgoTWF0aC5NYXgoIChpbnQpR2V0VGV4dFdpZHRoKHJpLkZpcnN0QnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSxcclxuXHRcdFx0XHRcdFx0XHRcdChpbnQpR2V0VGV4dFdpZHRoKHJpLlNlY29uZEJ1dHRvbi5DYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkpLCBcclxuXHRcdFx0XHRcdFx0XHRcdChpbnQpR2V0VGV4dFdpZHRoKHJpLlRoaXJkQnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSkgKyAyOCArIDYsIDY0KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLlJlbmRlcigpO1xyXG5cdFx0XHRcdFx0XHRyaS5TZWNvbmRCdXR0b24uUmVuZGVyKCk7XHJcblx0XHRcdFx0XHRcdHJpLlRoaXJkQnV0dG9uLlJlbmRlcigpO1xyXG5cclxuXHRcdFx0XHRcdFx0cmkuRmlyc3RCdXR0b24uQ29udGVudC5TdHlsZS5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcblx0XHRcdFx0XHRcdHJpLlNlY29uZEJ1dHRvbi5Db250ZW50LlN0eWxlLkxlZnQgPSB3aWR0aCArIFwicHhcIjtcclxuXHRcdFx0XHRcdFx0cmkuVGhpcmRCdXR0b24uQ29udGVudC5TdHlsZS5MZWZ0ID0gd2lkdGggKyBcInB4XCI7XHJcblxyXG5cdFx0XHRcdFx0XHRyaS5GaXJzdEJ1dHRvbi5Db250ZW50LlN0eWxlLldpZHRoID0gTWF4V2lkdGggKyBcInB4XCI7XHJcblx0XHRcdFx0XHRcdHJpLlNlY29uZEJ1dHRvbi5Db250ZW50LlN0eWxlLldpZHRoID0gTWF4V2lkdGggKyBcInB4XCI7XHJcblx0XHRcdFx0XHRcdHJpLlRoaXJkQnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBNYXhXaWR0aCArIFwicHhcIjtcclxuXHJcblx0XHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuVG9wID0gXCIzcHhcIjtcclxuXHRcdFx0XHRcdFx0cmkuU2Vjb25kQnV0dG9uLkNvbnRlbnQuU3R5bGUuVG9wID0gXCIyNnB4XCI7XHJcblx0XHRcdFx0XHRcdHJpLlRoaXJkQnV0dG9uLkNvbnRlbnQuU3R5bGUuVG9wID0gXCI0OXB4XCI7XHJcblx0XHRcdFx0XHRcdC8vIDNcclxuXHJcblx0XHRcdFx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQocmkuRmlyc3RCdXR0b24pO1xyXG5cdFx0XHRcdFx0XHRDb250ZW50LkFwcGVuZENoaWxkKHJpLlNlY29uZEJ1dHRvbik7XHJcblx0XHRcdFx0XHRcdENvbnRlbnQuQXBwZW5kQ2hpbGQocmkuVGhpcmRCdXR0b24pO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHdpZHRoICs9IE1heFdpZHRoO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLlJlbmRlcigpO1xyXG5cclxuXHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cdFx0XHRcdFx0aW50IGlud2lkdGggPSAwO1xyXG5cdFx0XHRcdFx0aWYocmkuRmlyc3RCdXR0b24uQ2FwdGlvbi5Db250YWlucyhcIiBcIikpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBzdHJpbmdzID0gcmkuRmlyc3RCdXR0b24uQ2FwdGlvbi5TcGxpdCgnICcpO1xyXG5cdFx0XHRcdFx0XHR2YXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpbnQgbGVuZ3RoID0gcmkuRmlyc3RCdXR0b24uQ2FwdGlvbi5MZW5ndGggLyAyO1x0XHRcdFx0XHRcdFxyXG5cclxuXHRcdFx0XHRcdFx0Zm9yKGludCBqID0gMDsgaiA8IHN0cmluZ3MuTGVuZ3RoOyBqKyspXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpZihidWlsZGVyLkxlbmd0aCA+IGxlbmd0aClcclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHRpbndpZHRoID0gKGludClHZXRUZXh0V2lkdGgoYnVpbGRlci5Ub1N0cmluZygpLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyMDtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZihidWlsZGVyLkxlbmd0aCA+IDApXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0YnVpbGRlci5BcHBlbmQoXCIgXCIgKyBzdHJpbmdzW2pdKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdGJ1aWxkZXIuQXBwZW5kKHN0cmluZ3Nbal0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVx0XHRcclxuXHRcdFx0XHRcdFx0aWYoaW53aWR0aCA9PSAwKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aW53aWR0aCA9IChpbnQpR2V0VGV4dFdpZHRoKGJ1aWxkZXIuVG9TdHJpbmcoKSwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpICsgMjA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aW53aWR0aCA9IChpbnQpR2V0VGV4dFdpZHRoKHJpLkZpcnN0QnV0dG9uLkNhcHRpb24sIFNldHRpbmdzLkRlZmF1bHRGb250KSArIDIwO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmKGlud2lkdGggPCA0NClcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0aW53aWR0aCA9IDQ0O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHJpLkZpcnN0QnV0dG9uLkNvbnRlbnQuU3R5bGUuV2lkdGggPSBpbndpZHRoICsgXCJweFwiO1xyXG5cclxuXHRcdFx0XHRcdHdpZHRoICs9IGlud2lkdGg7XHJcblxyXG5cdFx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChyaS5GaXJzdEJ1dHRvbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpbnQgbWluV2lkdGggPSAoaW50KUdldFRleHRXaWR0aChDYXB0aW9uLCBTZXR0aW5ncy5EZWZhdWx0Rm9udCkgKyAyMDtcclxuXHJcblx0XHRcdGlmKHdpZHRoIDwgbWluV2lkdGgpXHJcblx0XHRcdFx0d2lkdGggPSBtaW5XaWR0aDtcclxuXHJcblx0XHRcdHdpZHRoICs9IDM7XHJcblxyXG5cdFx0XHR2YXIgdmwgPSBDcmVhdGVWZXJ0aWNhbExpbmUoODApO1xyXG5cdFx0XHR2bC5TdHlsZS5MZWZ0ID0gd2lkdGggLSAxICsgXCJweFwiO1xyXG5cclxuXHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZCh2bCk7XHJcblxyXG5cdFx0XHRDb250ZW50LlN0eWxlLldpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcblxyXG5cdFx0XHRpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShDYXB0aW9uKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhcHRpb25EaXYgPSBEaXYoXCJyaWJib25ncm91cGNhcHRpb25cIik7XHJcblxyXG5cdFx0XHRcdGNhcHRpb25EaXYuSW5uZXJIVE1MID0gQ2FwdGlvbjtcclxuXHRcdFx0XHRDb250ZW50LkFwcGVuZENoaWxkKGNhcHRpb25EaXYpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZXRFbmFibGVkKGVuYWJsZWQpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0W05hbWVzcGFjZSh0cnVlKV1cclxuXHRwdWJsaWMgY2xhc3MgUmliYm9uUGFnZSA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwdWJsaWMgc3RyaW5nIENhcHRpb24geyBnZXQ7IHNldDsgfVxyXG5cdFx0cHVibGljIExpc3Q8UmliYm9uR3JvdXA+IFJpYmJvbkdyb3VwcyB7IGdldDsgc2V0OyB9XHJcblx0XHRwdWJsaWMgSFRNTERpdkVsZW1lbnQgUmliYm9uSGVhZGVyID0gbnVsbDtcclxuXHJcblx0XHRwdWJsaWMgUmliYm9uUGFnZShzdHJpbmcgX2NhcHRpb24gPSBcIlwiKSA6IGJhc2UoXCJyaWJib25wYWdlXCIpXHJcblx0XHR7XHJcblx0XHRcdENhcHRpb24gPSBfY2FwdGlvbjtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgdm9pZCBBZGRSaWJib25Hcm91cHMocGFyYW1zIFJpYmJvbkdyb3VwW10gcGFnZXMpXHJcblx0XHR7XHJcblx0XHRcdGlmKHBhZ2VzICE9IG51bGwpXHJcblx0XHRcdFx0UmliYm9uR3JvdXBzLkFkZFJhbmdlKHBhZ2VzKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZW5kZXIoKVxyXG5cdFx0e1xyXG5cdFx0XHRIYXNSZW5kZXJlZCA9IHRydWU7XHJcblx0XHRcdGlmKFJpYmJvbkdyb3VwcyA9PSBudWxsIHx8IFJpYmJvbkdyb3Vwcy5Db3VudCA9PSAwKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0aW50IHdpZHRoID0gMDtcclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IFJpYmJvbkdyb3Vwcy5Db3VudDsgaSsrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0UmliYm9uR3JvdXBzW2ldLlJlbmRlcigpO1x0XHRcdFx0XHJcblx0XHRcdFx0UmliYm9uR3JvdXBzW2ldLkNvbnRlbnQuU3R5bGUuTGVmdCA9IHdpZHRoICsgXCJweFwiO1xyXG5cdFx0XHRcdHdpZHRoICs9IEdsb2JhbC5QYXJzZUludChSaWJib25Hcm91cHNbaV0uQ29udGVudC5TdHlsZS5XaWR0aCk7XHJcblx0XHRcdFx0Q29udGVudC5BcHBlbmRDaGlsZChSaWJib25Hcm91cHNbaV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxuXHRcbnByaXZhdGUgTGlzdDxSaWJib25Hcm91cD4gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1JpYmJvbkdyb3Vwcz1uZXcgTGlzdDxSaWJib25Hcm91cD4oKTt9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgU2ltcGxlQnV0dG9uIDogQ29udHJvbFxyXG5cdHtcclxuXHRcdHB1YmxpYyBBY3Rpb248U2ltcGxlQnV0dG9uPiBJdGVtQ2xpY2s7XHJcbiAgICAgICAgcHVibGljIEZvcm0gUGFyZW50Rm9ybSA9IG51bGw7XHJcbiAgICAgICAgcHVibGljIERpYWxvZ1Jlc3VsdEVudW0gRGlhbG9nUmVzdWx0ID0gRGlhbG9nUmVzdWx0RW51bS5Ob25lOyAgICAgICAgXHJcblxyXG4gICAgICAgIHB1YmxpYyBTaW1wbGVCdXR0b24oQnV0dG9uVHlwZSBidXR0b24gPSBCdXR0b25UeXBlLkJ1dHRvbiwgYm9vbCBhYyA9IHRydWUpIDogYmFzZShcInNpbXBsZWJ1dHRvblwiLCBidXR0b24sIGFjKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBDb250ZW50Lk9uQ29udGV4dE1lbnUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuUHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcblx0XHRcdGlmKGFjKVxyXG5cdFx0XHRcdFN0eWxlLkZvbnQgPSBTZXR0aW5ncy5Gb250O1xyXG5cclxuXHRcdFx0dGhpcy5TZXRTaXplKFwiNjlweFwiLCBcIjIwcHhcIik7XHJcblxyXG5cdFx0XHRDb250ZW50Lk9uQ2xpY2sgPSAoZXYpID0+IHsgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0aWYoZW5hYmxlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuQmx1cigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoRGlhbG9nUmVzdWx0ICE9IERpYWxvZ1Jlc3VsdEVudW0uTm9uZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYXJlbnRGb3JtICE9IG51bGwgJiYgUGFyZW50Rm9ybS5Jc0RpYWxvZygpKSAvLyBKdXN0IGluY2FzZSB3ZSBzZXQgZGlzYWJsZWQgYW5kIGlzIGRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGFyZW50Rm9ybS5EaWFsb2dSZXN1bHQgPSBEaWFsb2dSZXN1bHQ7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoSXRlbUNsaWNrICE9IG51bGwpICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJdGVtQ2xpY2sodGhpcyk7ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRGlhbG9nUmVzdWx0ICE9IERpYWxvZ1Jlc3VsdEVudW0uTm9uZSAmJiBQYXJlbnRGb3JtLkRpYWxvZ1Jlc3VsdCAhPSBEaWFsb2dSZXN1bHRFbnVtLk5vbmUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGFyZW50Rm9ybSAhPSBudWxsICYmIFBhcmVudEZvcm0uSXNEaWFsb2coKSkgLy8gSnVzdCBpbmNhc2Ugd2Ugc2V0IGRpc2FibGVkIGFuZCBpcyBkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhcmVudEZvcm0uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9O1xyXG4gICAgICAgICAgICBDb250ZW50Lk9uRGJsQ2xpY2sgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIENvbnRlbnQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIENvbnRlbnQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0cmluZyBUZXh0XHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiB0aGlzLkNvbnRlbnQuQXM8SFRNTElucHV0RWxlbWVudD4oKS5Jbm5lckhUTUw7IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLkNvbnRlbnQuQXM8SFRNTElucHV0RWxlbWVudD4oKS5Jbm5lckhUTUwgPSB2YWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgYm9vbCBlbmFibGVkID0gdHJ1ZTtcclxuXHRcdHB1YmxpYyBib29sIEVuYWJsZWRcclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIGVuYWJsZWQ7IH1cclxuXHRcdFx0c2V0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRlbmFibGVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZihlbmFibGVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29udGVudC5SZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNvbnRlbnQuU2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgKCFlbmFibGVkKS5Ub1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblx0XHR9XHRcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgU3BsaXRDb250cm9sQ29udGFpbmVyIDogQ29udHJvbFxyXG5cdHtcclxuXHRcdHB1YmxpYyBDb250cm9sIFBhbmVsMTtcclxuXHRcdHB1YmxpYyBDb250cm9sIFBhbmVsMjtcclxuXHRcdHB1YmxpYyBDb250cm9sIFNwbGl0dGVyO1xyXG5cclxuXHRcdHByaXZhdGUgQ2xpZW50UmVjdCBfcHJldkNsaWVudFJlY3QgPSBudWxsO1xyXG5cdFx0cHJpdmF0ZSBib29sIElzTW91c2VEb3duID0gZmFsc2U7XHJcblx0XHRwcml2YXRlIFZlY3RvcjIgX21vdXNlRG93blZlY3RvcjtcclxuXHRcdHByaXZhdGUgVmVjdG9yMiBfY3VycmVudE1vdXNlRG93blZlY3RvcjtcclxuXHRcdHByaXZhdGUgaW50IF9zdGFydGluZ1NwbGl0dGVyUG9zO1x0XHRcclxuXHRcdHByaXZhdGUgaW50IF9zcGxpdHRlclBvc2l0aW9uID0gLTE7XHRcdFxyXG5cclxuXHRcdHByaXZhdGUgRml4ZWRTcGxpdHRlclBvc2l0aW9uIGZpeGVkU3BsaXR0ZXJQb3N0aW9uID0gRml4ZWRTcGxpdHRlclBvc2l0aW9uLlBhbmVsMTtcclxuXHRcdHB1YmxpYyBGaXhlZFNwbGl0dGVyUG9zaXRpb24gRml4ZWRTcGxpdHRlclBvc3Rpb25cclxuXHRcdHtcclxuXHRcdFx0Z2V0IHsgcmV0dXJuIGZpeGVkU3BsaXR0ZXJQb3N0aW9uOyB9XHJcblx0XHRcdHNldCB7XHJcblx0XHRcdFx0Zml4ZWRTcGxpdHRlclBvc3Rpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRSZW5kZXJDb250cm9scygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGJvb2wgU3BsaXR0ZXJSZXNpemFibGUgPSB0cnVlO1xyXG5cclxuXHRcdHB1YmxpYyBpbnQgU3BsaXR0ZXJQb3NpdGlvblxyXG5cdFx0e1xyXG5cdFx0XHRnZXQgeyByZXR1cm4gX3NwbGl0dGVyUG9zaXRpb247IH1cclxuXHRcdFx0c2V0IHtcclxuXHRcdFx0XHRpZih2YWx1ZSA8IDApXHJcblx0XHRcdFx0XHR2YWx1ZSA9IDA7XHRcdFx0XHRcclxuXHRcdFx0XHRfc3BsaXR0ZXJQb3NpdGlvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFJlbmRlckNvbnRyb2xzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cdFx0XHJcblxyXG5cdFx0cHJpdmF0ZSBib29sIGhvcml6b250YWw7XHJcblx0XHRwdWJsaWMgYm9vbCBIb3Jpem9udGFsXHJcblx0XHR7XHJcblx0XHRcdGdldCB7IHJldHVybiBob3Jpem9udGFsOyB9XHJcblx0XHRcdHNldCB7XHJcblx0XHRcdFx0aWYodmFsdWUgIT0gaG9yaXpvbnRhbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRSZW5kZXJDb250cm9scygpO1xyXG5cdFx0XHRcdFx0aG9yaXpvbnRhbCA9IHZhbHVlO1xyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5SZW5kZXIoKTtcclxuXHRcdFx0XHJcblx0XHRcdFJlbmRlckNvbnRyb2xzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSB2b2lkIFJlc2l6ZUNoaWxkcmVuKClcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0aWYodGhpcy5MaW5rZWRGb3JtICE9IG51bGwgJiYgdGhpcy5Db250ZW50ICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLkxpbmtlZEZvcm0uUmVzaXplQ2hpbGRyZW4odGhpcy5Db250ZW50KTtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHB1YmxpYyBTcGxpdENvbnRyb2xDb250YWluZXIoKSA6IGJhc2UoXCJzcGxpdGNvbnRyb2xcIilcclxuXHRcdHtcclxuXHRcdFx0UGFuZWwxID0gbmV3IENvbnRyb2woKSB7IExvY2F0aW9uID0gbmV3IFZlY3RvcjIoMCwgMCkgfTtcclxuXHRcdFx0UGFuZWwyID0gbmV3IENvbnRyb2woKTtcclxuICAgICAgICAgICAgUGFuZWwxLlN0eWxlLk92ZXJmbG93ID0gT3ZlcmZsb3cuQXV0bztcclxuICAgICAgICAgICAgUGFuZWwyLlN0eWxlLk92ZXJmbG93ID0gT3ZlcmZsb3cuQXV0bztcclxuXHJcbiAgICAgICAgICAgIFNwbGl0dGVyID0gbmV3IENvbnRyb2woKTtcclxuXHRcdFx0XHJcblx0XHRcdFNwbGl0dGVyLkNvbnRlbnQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZighU3BsaXR0ZXJSZXNpemFibGUpXHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0SXNNb3VzZURvd24gPSB0cnVlO1xyXG5cdFx0XHRcdF9tb3VzZURvd25WZWN0b3IgPSBIZWxwZXIuR2V0Q2xpZW50TW91c2VMb2NhdGlvbihldik7XHJcblx0XHRcdFx0dmFyIG1heFNpemUgPSBHZXRNYXhTcGxpdHRlclNpemUoKTtcclxuXHRcdFx0XHRfc3RhcnRpbmdTcGxpdHRlclBvcyA9IF9zcGxpdHRlclBvc2l0aW9uID4gbWF4U2l6ZSA/IG1heFNpemUgOiBfc3BsaXR0ZXJQb3NpdGlvbjtcdFx0XHRcdFxyXG5cdFx0XHRcdGV2LlN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9O1x0XHRcdFx0XHRcdFx0XHRcclxuXHJcblx0XHRcdE9uUmVzaXplID0gKGV2KSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodGhpcy5MaW5rZWRGb3JtICE9IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYoIXRoaXMuTGlua2VkRm9ybS5Jc1Zpc2libGUoKSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2YXIgY2xpZW50UmVjID0gdGhpcy5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHRcdFx0XHRpZihfcHJldkNsaWVudFJlY3QgPT0gbnVsbClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRfcHJldkNsaWVudFJlY3QgPSBjbGllbnRSZWM7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZihmaXhlZFNwbGl0dGVyUG9zdGlvbiA9PSBGaXhlZFNwbGl0dGVyUG9zaXRpb24uTm9uZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRkb3VibGUgVjEgPSAwO1xyXG5cdFx0XHRcdFx0ZG91YmxlIFYyID0gMDtcclxuXHRcdFx0XHRcdGJvb2wgZGlydHkgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0XHRpZihIb3Jpem9udGFsKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihjbGllbnRSZWMuSGVpZ2h0ICE9IF9wcmV2Q2xpZW50UmVjdC5IZWlnaHQpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRWMSA9IGNsaWVudFJlYy5IZWlnaHQ7XHJcblx0XHRcdFx0XHRcdFx0VjIgPSBfcHJldkNsaWVudFJlY3QuSGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHRcdGRpcnR5ID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihjbGllbnRSZWMuV2lkdGggIT0gX3ByZXZDbGllbnRSZWN0LldpZHRoKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0VjEgPSBjbGllbnRSZWMuV2lkdGg7XHJcblx0XHRcdFx0XHRcdFx0VjIgPSBfcHJldkNsaWVudFJlY3QuV2lkdGg7XHJcblx0XHRcdFx0XHRcdFx0ZGlydHkgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZihkaXJ0eSlcclxuXHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0U3BsaXR0ZXJQb3NpdGlvbiA9IFYxID09IDAgfHwgVjIgPT0gMCA/IDAgOiAoaW50KShTcGxpdHRlclBvc2l0aW9uICogKFYxIC8gVjIpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdF9wcmV2Q2xpZW50UmVjdCA9IGNsaWVudFJlYztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRSZW5kZXJDb250cm9scygpO1xyXG5cclxuXHRcdFx0XHRSZXNpemVDaGlsZHJlbigpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Q29udGVudC5Pbk1vdXNlTW92ZSA9IChldikgPT5cclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKElzTW91c2VEb3duKVxyXG5cdFx0XHRcdHtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRfY3VycmVudE1vdXNlRG93blZlY3RvciA9IEhlbHBlci5HZXRDbGllbnRNb3VzZUxvY2F0aW9uKGV2KTtcclxuXHRcdFx0XHRcdGludCB4O1xyXG5cdFx0XHRcdFx0aW50IG0gPSBob3Jpem9udGFsID8gKF9tb3VzZURvd25WZWN0b3IuWWkgLSBfY3VycmVudE1vdXNlRG93blZlY3Rvci5ZaSkgOiAoX21vdXNlRG93blZlY3Rvci5YaSAtIF9jdXJyZW50TW91c2VEb3duVmVjdG9yLlhpKTtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciB5ID0gR2V0TWF4U3BsaXR0ZXJTaXplKCk7XHJcblx0XHRcdFx0XHRpZigoeCA9IGZpeGVkU3BsaXR0ZXJQb3N0aW9uID09IEZpeGVkU3BsaXR0ZXJQb3NpdGlvbi5QYW5lbDIgPyBfc3RhcnRpbmdTcGxpdHRlclBvcyArIG0gOiBfc3RhcnRpbmdTcGxpdHRlclBvcyAtIG0pXHJcblx0XHRcdFx0XHRcdD4geSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0eCA9IHk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRTcGxpdHRlclBvc2l0aW9uID0geDtcclxuXHRcdFx0XHRcdF9jdXJyZW50TW91c2VEb3duVmVjdG9yID0gX21vdXNlRG93blZlY3RvcjtcclxuXHJcblx0XHRcdFx0XHRSZXNpemVDaGlsZHJlbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdENvbnRlbnQuT25Nb3VzZVVwID0gKGV2KSA9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0SXNNb3VzZURvd24gPSBmYWxzZTtcclxuXHRcdFx0XHRSZW5kZXJDb250cm9scygpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0dGhpcy5BcHBlbmRDaGlsZHJlbihQYW5lbDEsIFNwbGl0dGVyLCBQYW5lbDIpO1xyXG5cdFx0fVx0XHRcclxuXHJcblx0XHRwcml2YXRlIGludCBHZXRNYXhTcGxpdHRlclNpemUoKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgbWF4U2l6ZSA9IChpbnQpKEhvcml6b250YWwgPyB0aGlzLkNvbnRlbnQuR2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuSGVpZ2h0IDogdGhpcy5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLldpZHRoKSAtIDEyO1xyXG5cdFx0XHRpZihtYXhTaXplIDwgMClcclxuXHRcdFx0XHRtYXhTaXplID0gMDtcclxuXHRcdFx0cmV0dXJuIG1heFNpemU7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSB2b2lkIFJlbmRlckNvbnRyb2xzKClcclxuXHRcdHtcclxuXHRcdFx0dmFyIHNwID0gU3BsaXR0ZXJQb3NpdGlvbjtcclxuXHRcdFx0dmFyIG1heFNpemUgPSBHZXRNYXhTcGxpdHRlclNpemUoKTtcclxuXHJcblx0XHRcdGlmKF9wcmV2Q2xpZW50UmVjdCAhPSBudWxsKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYoc3AgPiBtYXhTaXplKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHNwID0gbWF4U2l6ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cdFx0XHRcclxuXHJcblx0XHRcdGlmKEhvcml6b250YWwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRQYW5lbDEuRXhjaGFuZ2VDbGFzcyhcInNwbGl0dmVydGljYWxcIiwgXCJzcGxpdGhvcml6b250YWxcIik7XHJcblx0XHRcdFx0UGFuZWwyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdHZlcnRpY2FsXCIsIFwic3BsaXRob3Jpem9udGFsXCIpO1xyXG5cdFx0XHRcdFNwbGl0dGVyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdHRlcnZlcnRpY2FsXCIsIFwic3BsaXR0ZXJob3Jpem9udGFsXCIpO1xyXG5cclxuXHRcdFx0XHRQYW5lbDEuV2lkdGggPSBcIlwiO1xyXG5cdFx0XHRcdFNwbGl0dGVyLldpZHRoID0gXCJcIjtcclxuXHRcdFx0XHRQYW5lbDIuV2lkdGggPSBcIlwiO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmKGZpeGVkU3BsaXR0ZXJQb3N0aW9uICE9IEZpeGVkU3BsaXR0ZXJQb3NpdGlvbi5QYW5lbDIpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0U3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCBzcCk7XHJcblxyXG5cdFx0XHRcdFx0UGFuZWwxLkhlaWdodCA9IHNwO1x0XHRcdFx0XHJcblx0XHRcdFx0XHRQYW5lbDIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCBzcCArIDEyKTtcclxuXHRcdFx0XHRcdFBhbmVsMi5IZWlnaHQgPSBcIigxMDAlIC0gXCIgKyAoc3AgKyAxMikgKyBcInB4KVwiOyA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHR7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0U3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCBcIigxMDAlIC0gXCIgKyAoc3ApICsgXCJweClcIik7XHJcblxyXG5cdFx0XHRcdFx0UGFuZWwxLkhlaWdodCA9IFwiKDEwMCUgLSBcIiArIHNwICsgXCJweClcIjtcclxuXHJcblx0XHRcdFx0XHRQYW5lbDIuSGVpZ2h0ID0gc3AgLSAxMjtcclxuXHRcdFx0XHRcdFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIFwiKDEwMCUgLSBcIiArIChzcCAtIDEyKSArIFwicHgpXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRQYW5lbDEuRXhjaGFuZ2VDbGFzcyhcInNwbGl0aG9yaXpvbnRhbFwiLCBcInNwbGl0dmVydGljYWxcIik7XHJcblx0XHRcdFx0UGFuZWwyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdGhvcml6b250YWxcIiwgXCJzcGxpdHZlcnRpY2FsXCIpO1xyXG5cdFx0XHRcdFNwbGl0dGVyLkV4Y2hhbmdlQ2xhc3MoXCJzcGxpdHRlcmhvcml6b250YWxcIiwgXCJzcGxpdHRlcnZlcnRpY2FsXCIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdFBhbmVsMS5IZWlnaHQgPSBcIlwiO1xyXG5cdFx0XHRcdFNwbGl0dGVyLkhlaWdodCA9IFwiXCI7XHJcblx0XHRcdFx0UGFuZWwyLkhlaWdodCA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdGlmKGZpeGVkU3BsaXR0ZXJQb3N0aW9uICE9IEZpeGVkU3BsaXR0ZXJQb3NpdGlvbi5QYW5lbDIpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0U3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMihzcCwgMCk7XHJcblxyXG5cdFx0XHRcdFx0UGFuZWwxLldpZHRoID0gc3A7XHJcblxyXG5cdFx0XHRcdFx0UGFuZWwyLldpZHRoID0gXCIoMTAwJSAtIFwiICsgKHNwICsgMTIpICsgXCJweClcIjtcclxuXHRcdFx0XHRcdFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKHNwICsgMTIsIDApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0U3BsaXR0ZXIuTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gXCIgKyBzcCArIFwicHgpXCIsIDApO1xyXG5cclxuXHRcdFx0XHRcdFBhbmVsMS5XaWR0aCA9IFwiKDEwMCUgLSBcIiArIHNwICsgXCJweClcIjtcclxuXHJcblx0XHRcdFx0XHRQYW5lbDIuV2lkdGggPSBzcDtcclxuXHRcdFx0XHRcdFBhbmVsMi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArIChzcCArIDEyKSArIFwicHgpXCIsIDApO1xyXG5cdFx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lciA6IENvbnRyb2xcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgQ29udHJvbCBCb2R5O1xyXG4gICAgICAgIHB1YmxpYyBDb250cm9sIFNsaWRlcjtcclxuICAgICAgICBwdWJsaWMgQ29udHJvbCBQYW5lbDtcclxuICAgICAgICBwcml2YXRlIEhUTUxTcGFuRWxlbWVudCBzcGFuO1xyXG5cclxuICAgICAgICBwcml2YXRlIGludCBfc2xpZGVXaWR0aDtcclxuICAgICAgICBwdWJsaWMgaW50IFNsaWRlV2lkdGggeyBnZXQgeyByZXR1cm4gX3NsaWRlV2lkdGg7IH0gc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKF9zbGlkZVdpZHRoICE9IHZhbHVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9zbGlkZVdpZHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgU2xpZGVyTG9jYXRpb24gX3NsaWRlckxvY2F0aW9uID0gU2xpZGVyTG9jYXRpb24uTGVmdDtcclxuICAgICAgICBwdWJsaWMgU2xpZGVyTG9jYXRpb24gU2xpZGVyTG9jYXRpb24geyBnZXQgeyByZXR1cm4gX3NsaWRlckxvY2F0aW9uOyB9IHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihfc2xpZGVyTG9jYXRpb24gIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NsaWRlckxvY2F0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVuZGVyQ29udHJvbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJlc2l6ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBib29sIF9zbGlkZXJWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIGJvb2wgU2xpZGVyVmlzaWJsZSB7IGdldCB7IHJldHVybiBfc2xpZGVyVmlzaWJsZTsgfSBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoX3NsaWRlclZpc2libGUgIT0gdmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NsaWRlclZpc2libGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBSZW5kZXJDb250cm9sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVzaXplQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSB9XHJcbiAgICAgICAgcHJpdmF0ZSBpbnQgcmVmcmVzaElkID0gLTE7XHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIFJlc2l6ZUNoaWxkcmVuKClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKHRoaXMuTGlua2VkRm9ybSAhPSBudWxsICYmIHRoaXMuQ29udGVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihyZWZyZXNoSWQgIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsLkNsZWFyVGltZW91dChyZWZyZXNoSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVmcmVzaElkID0gR2xvYmFsLlNldFRpbWVvdXQoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkxpbmtlZEZvcm0uUmVzaXplQ2hpbGRyZW4odGhpcy5Db250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoSWQgPSAtMTtcclxuICAgICAgICAgICAgICAgIH0pLCAxMDAwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3BsaXRIaWRlQ29udHJvbENvbnRhaW5lcigpIDogYmFzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2R5ID0gbmV3IENvbnRyb2woKTtcclxuICAgICAgICAgICAgU2xpZGVyID0gbmV3IENvbnRyb2woXCJwcmltYXJ5XCIpO1xyXG4gICAgICAgICAgICBQYW5lbCA9IG5ldyBDb250cm9sKCk7XHJcbiAgICAgICAgICAgIHNwYW4gPSBTcGFuKFwiZm9ybS1oZWFkaW5nLXRpdGxlXCIpO1xyXG4gICAgICAgICAgICBzcGFuLlRleHRDb250ZW50ID0gXCI+XCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzcGFuLlN0eWxlLkZvbnRXZWlnaHQgPSBcImJvbGRcIjtcclxuICAgICAgICAgICAgc3Bhbi5TdHlsZS5Db2xvciA9IFwid2hpdGVcIjtcclxuXHJcbiAgICAgICAgICAgIFNsaWRlci5Db250ZW50LkFwcGVuZENoaWxkKHNwYW4pO1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkNvbnRlbnQuT25Nb3VzZUVudGVyID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBTbGlkZXIuQ29udGVudC5Pbk1vdXNlTGVhdmUgPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNsaWRlci5TdHlsZS5GaWx0ZXIgPSBcImJyaWdodG5lc3MoOTAlKVwiO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLlN0eWxlLlRyYW5zaXRpb24gPSBcIndpZHRoIDFzLCBsZWZ0IDFzXCI7XHJcbiAgICAgICAgICAgIEJvZHkuU3R5bGUuVHJhbnNpdGlvbiA9IFwibGVmdCAxcywgd2lkdGggMXNcIjtcclxuICAgICAgICAgICAgUGFuZWwuU3R5bGUuVHJhbnNpdGlvbiA9IFwid2lkdGggMXNcIjtcclxuXHJcbiAgICAgICAgICAgIFNsaWRlci5TdHlsZS5GaWx0ZXIgPSBcImJyaWdodG5lc3MoOTAlKVwiO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuRm9udFN0eWxlID0gXCIzNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuV2lkdGggPSA2NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNwYW4uU3R5bGUuRm9udFN0eWxlID0gXCIyNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBTbGlkZXIuV2lkdGggPSAzMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICAgICAgU2xpZGVyLkNvbnRlbnQuT25DbGljayA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2xpZGVyVmlzaWJsZSA9ICFTbGlkZXJWaXNpYmxlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfc2xpZGVXaWR0aCA9IDI1MDtcclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZHJlbihQYW5lbCwgU2xpZGVyLCBCb2R5KTtcclxuXHJcbiAgICAgICAgICAgIFJlbmRlckNvbnRyb2woKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbmRlckNvbnRyb2woKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpZHRoO1xyXG4gICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2lkdGggPSA2NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gMzA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKFNsaWRlckxvY2F0aW9uID09IFNsaWRlckxvY2F0aW9uLkxlZnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFNsaWRlclZpc2libGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5UZXh0Q29udGVudCA9IFwiPFwiOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgUGFuZWwuV2lkdGggPSBTbGlkZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIFNsaWRlci5MZWZ0ID0gU2xpZGVXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBCb2R5LkxvY2F0aW9uID0gbmV3IFZlY3RvcjIod2lkdGggKyBTbGlkZVdpZHRoLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBCb2R5LlNpemUgPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gXCIgKyAod2lkdGggKyBTbGlkZVdpZHRoKSArIFwicHgpXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGFuLlRleHRDb250ZW50ID0gXCI+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgU2xpZGVyLkxlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhbmVsLldpZHRoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBCb2R5LkxvY2F0aW9uID0gbmV3IFZlY3RvcjIod2lkdGgsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIEJvZHkuU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArICh3aWR0aCkgKyBcInB4KVwiLCBcIjEwMCVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgUGFuZWwuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKTtcclxuICAgICAgICAgICAgICAgIFBhbmVsLkhlaWdodCA9IFwiMTAwJVwiOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIFNsaWRlckxvY2F0aW9uXHJcbiAgICB7XHJcbiAgICAgICAgTGVmdCxcclxuICAgICAgICBSaWdodFxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgVGFiQ29udHJvbCA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwdWJsaWMgTGlzdDxUYWJDb250cm9sUGFnZT4gVGFiUGFnZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHByaXZhdGUgQ29udHJvbCB0YWJIZWFkZXJzO1xyXG4gICAgICAgIHByaXZhdGUgQ29udHJvbCB0YWJIZWFkZXJDb250YWluZXI7XHJcblx0XHRwdWJsaWMgVGFiQ29udHJvbCgpIDogYmFzZShcInRhYmNvbnRyb2xcIilcclxuXHRcdHtcclxuICAgICAgICAgICAgQ29udGVudC5PbkNvbnRleHRNZW51ID0gKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIEFkZFBhZ2VzKHBhcmFtcyBUYWJDb250cm9sUGFnZVtdIFBhZ2VzKVxyXG5cdFx0e1xyXG5cdFx0XHRUYWJQYWdlcy5BZGRSYW5nZShQYWdlcyk7XHJcblx0XHRcdGlmKHRoaXMuSGFzUmVuZGVyZWQpXHJcblx0XHRcdFx0UmVzaXplVGFiSGVhZGVycygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgYm9vbCBzaG93Q2xvc2VkQnV0dG9uO1xyXG5cdFx0cHVibGljIGJvb2wgU2hvd0Nsb3NlZEJ1dHRvblxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBzaG93Q2xvc2VkQnV0dG9uO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodmFsdWUgIT0gc2hvd0Nsb3NlZEJ1dHRvbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzaG93Q2xvc2VkQnV0dG9uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRSZXNpemVUYWJIZWFkZXJzKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248aW50PiBPblNlbGVjdGVkVGFiSW5kZXhDaGFuZ2VkID0gbnVsbDtcclxuXHJcblx0XHRwcml2YXRlIGludCBzZWxlY3RlZGluZGV4ID0gMDtcclxuXHRcdHB1YmxpYyBpbnQgU2VsZWN0ZWRJbmRleFxyXG5cdFx0e1xyXG5cdFx0XHRnZXRcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiBzZWxlY3RlZGluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHRcdHNldFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYodmFsdWUgPCAwKVxyXG5cdFx0XHRcdFx0dmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWRpbmRleCAhPSB2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkaW5kZXggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPblNlbGVjdGVkVGFiSW5kZXhDaGFuZ2VkIT1udWxsP0JyaWRnZS5TY3JpcHQuRnJvbUxhbWJkYSgoKT0+T25TZWxlY3RlZFRhYkluZGV4Q2hhbmdlZC5JbnZva2UodmFsdWUpKTpudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdGlmKFRhYlBhZ2VzICE9IG51bGwgJiYgVGFiUGFnZXMuQ291bnQgPiAwKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGZvcihpbnQgaSA9IDA7IGkgPCBUYWJQYWdlcy5Db3VudDsgaSsrKVxyXG5cdFx0XHRcdFx0e1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIHBhZ2UgPSBUYWJQYWdlc1tpXTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0VGFiQ29udHJvbEFjdGl2ZVN0eWxlQ2hhbmdlKGksIHJlZiBwYWdlKTtcclxuXHRcdFx0XHRcdFx0VGFiUGFnZXNbaV0gPSBwYWdlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVx0XHRcclxuXHJcblx0XHRwcml2YXRlIHZvaWQgVGFiQ29udHJvbEFjdGl2ZVN0eWxlQ2hhbmdlKGludCBpLCByZWYgVGFiQ29udHJvbFBhZ2UgcGFnZSlcclxuXHRcdHtcclxuXHRcdFx0Ym9vbCBJc3NlbGVjdGVkID0gaSA9PSBzZWxlY3RlZGluZGV4O1xyXG5cclxuXHRcdFx0c3RyaW5nIHN0YXRlID0gSXNzZWxlY3RlZCA/IFwiYWN0aXZlXCIgOiBcImhpZGRlblwiO1xyXG5cdFx0XHRpZihwYWdlLlRhYlBhZ2VIZWFkZXIgIT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2UuVGFiUGFnZUhlYWRlci5DbGFzc0xpc3QuUmVtb3ZlKFwidGFiY29udHJvbHBhZ2VoZWFkZXItaGlkZGVuXCIpO1xyXG5cdFx0XHRcdHBhZ2UuVGFiUGFnZUhlYWRlci5DbGFzc0xpc3QuUmVtb3ZlKFwidGFiY29udHJvbHBhZ2VoZWFkZXItYWN0aXZlXCIpO1xyXG5cclxuXHRcdFx0XHRwYWdlLlRhYlBhZ2VIZWFkZXIuQ2xhc3NMaXN0LkFkZChcInRhYmNvbnRyb2xwYWdlaGVhZGVyLVwiICsgc3RhdGUpOyAgICAgICAgICAgICAgICBcclxuXHRcdFx0fWVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHBhZ2UuVGFiUGFnZUhlYWRlciA9IERpdihcInRhYmNvbnRyb2xwYWdlaGVhZGVyIHRhYmNvbnRyb2xwYWdlaGVhZGVyLVwiICsgc3RhdGUpO1x0ICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihJc3NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TdHlsZS5MaW5lSGVpZ2h0ID0gXCI0NHB4XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyLlN0eWxlLkxpbmVIZWlnaHQgPSBcIjQ2cHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5TdHlsZS5IZWlnaHQgPSBcIjQ1cHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyLlNldEF0dHJpYnV0ZShcImlcIiwgaS5Ub1N0cmluZygpKTtcclxuXHRcdFx0aWYoc2hvd0Nsb3NlZEJ1dHRvbilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGlmKHBhZ2UuVGFiUGFnZUhlYWRlckNsb3NlID09IG51bGwpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0cGFnZS5UYWJQYWdlSGVhZGVyQ2xvc2UgPSBEaXYoXCJ0YWJjb250cm9scGFnZWhlYWRlci1jbG9zZWJ1dHRvblwiKTtcclxuXHRcdFx0XHRcdHBhZ2UuVGFiUGFnZUhlYWRlckNsb3NlLk9uQ2xpY2sgPSAoZXYpID0+XHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHZhciBpbmRleCA9IEdsb2JhbC5QYXJzZUludChldi5DdXJyZW50VGFyZ2V0LlBhcmVudEVsZW1lbnQuR2V0QXR0cmlidXRlKFwiaVwiKSk7XHJcblx0XHRcdFx0XHRcdHZhciBjcGFnZSA9IFRhYlBhZ2VzW2luZGV4XTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYoY3BhZ2UuQ29udGVudCAhPSBudWxsKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y3BhZ2UuQ29udGVudC5FbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHRcdGNwYWdlLkNvbnRlbnQuRGVsZXRlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0aWYoY3BhZ2UuVGFiUGFnZUhlYWRlciAhPSBudWxsKVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0Y3BhZ2UuVGFiUGFnZUhlYWRlci5FbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHRcdGNwYWdlLlRhYlBhZ2VIZWFkZXIuRGVsZXRlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0VGFiUGFnZXMuUmVtb3ZlKGNwYWdlKTtcclxuXHRcdFx0XHRcdFx0aWYoaW5kZXggPiBUYWJQYWdlcy5Db3VudCAtIDEpXHJcblx0XHRcdFx0XHRcdFx0aW5kZXggPSBUYWJQYWdlcy5Db3VudCAtIDE7XHJcblxyXG5cdFx0XHRcdFx0XHRldi5TdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRcdFx0XHRcdFNlbGVjdGVkSW5kZXggPSBpbmRleDtcclxuXHJcblx0XHRcdFx0XHRcdFJlc2l6ZVRhYkhlYWRlcnMoKTtcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRwYWdlLlRhYlBhZ2VIZWFkZXIuQXBwZW5kQ2hpbGQocGFnZS5UYWJQYWdlSGVhZGVyQ2xvc2UpO1x0XHRcdFx0XHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1lbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZihwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZSAhPSBudWxsKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHBhZ2UuVGFiUGFnZUhlYWRlci5SZW1vdmVDaGlsZChwYWdlLlRhYlBhZ2VIZWFkZXJDbG9zZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRwYWdlLkNvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IElzc2VsZWN0ZWQgPyBWaXNpYmlsaXR5LkluaGVyaXQgOiBWaXNpYmlsaXR5LkNvbGxhcHNlO1x0XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIFJlc2l6ZVRhYkhlYWRlcnMoKVxyXG5cdFx0e1xyXG4gICAgICAgICAgICBpZih0YWJIZWFkZXJzID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMgPSBuZXcgQ29udHJvbChcInRhYmhlYWRlci1jb250YWluZXJcIikgeyBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApIH07XHJcbiAgICAgICAgICAgICAgICBpZihIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJzLkhlaWdodCA9IDQ3O1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlckNvbnRhaW5lciA9IG5ldyBDb250cm9sKCkgeyBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVyQ29udGFpbmVyLldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVyQ29udGFpbmVyLkhlaWdodCA9IDUwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlckNvbnRhaW5lci5BcHBlbmRDaGlsZCh0YWJIZWFkZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJDb250YWluZXIuU3R5bGUuQmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlckNvbnRhaW5lci5TdHlsZS5PdmVyZmxvd1ggPSBPdmVyZmxvdy5BdXRvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJzLlN0eWxlLk1pbldpZHRoID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQodGFiSGVhZGVyQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJIZWFkZXJzLkhlaWdodCA9IDIzO1xyXG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnQuQXBwZW5kQ2hpbGQodGFiSGVhZGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFiSGVhZGVycy5XaWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0aWYoVGFiUGFnZXMgIT0gbnVsbCAmJiBUYWJQYWdlcy5Db3VudCA+IDApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpbnQgd2lkdGggPSAyO1xyXG5cclxuXHRcdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgVGFiUGFnZXMuQ291bnQ7IGkrKylcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcGFnZSA9IFRhYlBhZ2VzW2ldO1xyXG5cclxuXHRcdFx0XHRcdHBhZ2UuUmVuZGVyKCk7XHRcdFx0XHRcdFxyXG5cclxuXHRcdFx0XHRcdGlmKHBhZ2UuVGFiUGFnZUhlYWRlciA9PSBudWxsKVxyXG5cdFx0XHRcdFx0e1x0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRUYWJDb250cm9sQWN0aXZlU3R5bGVDaGFuZ2UoaSwgcmVmIHBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGVkSW5kZXggPSBHbG9iYWwuUGFyc2VJbnQoZXYuQ3VycmVudFRhcmdldC5BczxIVE1MRGl2RWxlbWVudD4oKS5HZXRBdHRyaWJ1dGUoXCJpXCIpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UuVGFiUGFnZUhlYWRlci5PblRvdWNoU3RhcnQgPSAoZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdGVkSW5kZXggPSBHbG9iYWwuUGFyc2VJbnQoZXYuQ3VycmVudFRhcmdldC5BczxIVE1MRGl2RWxlbWVudD4oKS5HZXRBdHRyaWJ1dGUoXCJpXCIpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMuQ29udGVudC5BcHBlbmRDaGlsZChwYWdlLlRhYlBhZ2VIZWFkZXIpOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKHBhZ2UuQ29udGVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwYWdlLlRhYlBhZ2VIZWFkZXIuU2V0QXR0cmlidXRlKFwiaVwiLCBpLlRvU3RyaW5nKCkpO1xyXG5cclxuXHRcdFx0XHRcdGludCBpbndpZHRoID0gMjQ7XHJcblxyXG5cdFx0XHRcdFx0aWYoIXN0cmluZy5Jc051bGxPckVtcHR5KHBhZ2UuQ2FwdGlvbikpXHJcblx0XHRcdFx0XHR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW53aWR0aCArPSAoaW50KUdldFRleHRXaWR0aChwYWdlLkNhcHRpb24sIFwiMTRweCBUYWhvbWFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbndpZHRoICs9IChpbnQpR2V0VGV4dFdpZHRoKHBhZ2UuQ2FwdGlvbiwgU2V0dGluZ3MuRGVmYXVsdEZvbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmKHNob3dDbG9zZWRCdXR0b24pXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGlud2lkdGggKz0gMTk7XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdEhUTUxTcGFuRWxlbWVudCBzcGFuID0gbnVsbDtcclxuXHRcdFx0XHRcdGZvcmVhY2godmFyIGl0ZW0gaW4gcGFnZS5UYWJQYWdlSGVhZGVyLkNoaWxkcmVuKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRpZihpdGVtIGlzIEhUTUxTcGFuRWxlbWVudClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdChzcGFuID0gaXRlbS5BczxIVE1MU3BhbkVsZW1lbnQ+KCkpLklubmVySFRNTCA9IHBhZ2UuQ2FwdGlvbjtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYoc3BhbiA9PSBudWxsKVxyXG5cdFx0XHRcdFx0e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuID0gbmV3IEhUTUxTcGFuRWxlbWVudCgpIHsgSW5uZXJIVE1MID0gcGFnZS5DYXB0aW9uIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLlRhYlBhZ2VIZWFkZXIuQXBwZW5kQ2hpbGQoc3Bhbik7XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5UYWJQYWdlSGVhZGVyLlN0eWxlLkxlZnQgPSB3aWR0aC5Ub1B4KCk7XHJcblx0XHRcdFx0XHRwYWdlLlRhYlBhZ2VIZWFkZXIuU3R5bGUuV2lkdGggPSBpbndpZHRoLlRvUHgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAyNnB4KTtcclxuICAgICAgICAgICAgICAgICAgICAvL3RvcDogMjRweDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLkhlaWdodCA9IFwiKDEwMCUgLSA0OXB4KVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlLlRvcCA9IDQ5OyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gaW53aWR0aCArIDI7XHJcblxyXG5cdFx0XHRcdFx0VGFiUGFnZXNbaV0gPSBwYWdlO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYkhlYWRlcnMuV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbmRlcigpXHJcblx0XHR7XHJcblx0XHRcdEhhc1JlbmRlcmVkID0gdHJ1ZTtcdFx0XHJcblx0XHRcdFJlc2l6ZVRhYkhlYWRlcnMoKTtcclxuXHRcdH1cdFx0XHJcblxuXHRcbnByaXZhdGUgTGlzdDxUYWJDb250cm9sUGFnZT4gX19Qcm9wZXJ0eV9fSW5pdGlhbGl6ZXJfX1RhYlBhZ2VzPW5ldyBMaXN0PFRhYkNvbnRyb2xQYWdlPigpO31cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG5cdHB1YmxpYyBjbGFzcyBUYWJDb250cm9sUGFnZSA6IENvbnRyb2xcclxuXHR7XHJcblx0XHRwdWJsaWMgaW50IGluZGV4O1xyXG5cclxuXHRcdHB1YmxpYyBUYWJDb250cm9sUGFnZSgpIDogYmFzZShcInRhYmNvbnRyb2xwYWdlXCIpXHJcblx0XHR7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBIVE1MRGl2RWxlbWVudCBUYWJQYWdlSGVhZGVyID0gbnVsbDtcclxuXHRcdHB1YmxpYyBIVE1MRGl2RWxlbWVudCBUYWJQYWdlSGVhZGVyQ2xvc2UgPSBudWxsO1xyXG5cdFx0cHVibGljIHN0cmluZyBDYXB0aW9uIHsgZ2V0OyBzZXQ7IH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRpbGVDb250cm9sIDogQ29udHJvbCwgSVBhZ2VzXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExpc3Q8UmliYm9uUGFnZT4gUmliYm9uUGFnZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHByaXZhdGUgVGlsZVZpZXdTdGF0ZSBfdmlld1N0YXRlID0gVGlsZVZpZXdTdGF0ZS5IaWRkZW47XHJcbiAgICAgICAgcHJpdmF0ZSBVbmlvbjxzdHJpbmcsIE92ZXJmbG93PiBwcmV2T3ZlckZsb3cgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgaW50IENsZWFyVGltZU91dCA9IC0xO1xyXG4gICAgICAgIHB1YmxpYyBUaWxlVmlld1N0YXRlIFZpZXdTdGF0ZSB7IGdldCB7IHJldHVybiBfdmlld1N0YXRlOyB9IHNldCB7XHJcbiAgICAgICAgICAgICAgICBpZihDbGVhclRpbWVPdXQgIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2xvYmFsLkNsZWFyVGltZW91dChDbGVhclRpbWVPdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIENsZWFyVGltZU91dCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodmFsdWUgIT0gX3ZpZXdTdGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfdmlld1N0YXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3ZpZXdTdGF0ZSA9PSBUaWxlVmlld1N0YXRlLkhpZGRlbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsZWFyVGltZU91dCA9IEdsb2JhbC5TZXRUaW1lb3V0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVmlzaWJpbGl0eSA9IFZpc2liaWxpdHkuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgMTAwMCk7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAqIC0xKVwiLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKENvbnRlbnQuUGFyZW50RWxlbWVudCAhPSBudWxsICYmIHByZXZPdmVyRmxvdyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50LlBhcmVudEVsZW1lbnQuU3R5bGUuT3ZlcmZsb3cgPSBwcmV2T3ZlckZsb3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5Jbmhlcml0OyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZW5kZXJUaWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihDb250ZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldk92ZXJGbG93ID0gQ29udGVudC5QYXJlbnRFbGVtZW50LlN0eWxlLk92ZXJmbG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudC5QYXJlbnRFbGVtZW50LlN0eWxlLk92ZXJmbG93ID0gT3ZlcmZsb3cuSGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVuZGVyVGlsZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHggPSAwO1xyXG4gICAgICAgICAgICBpbnQgeSA9IDY7XHJcblxyXG4gICAgICAgICAgICB2YXIgZG9jID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gbmV3IENvbnRyb2woKTtcclxuICAgICAgICAgICAgZGl2LldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdi5TZXRMb2NhdGlvbigwLCAwKTtcclxuICAgICAgICAgICAgZGl2LlN0eWxlLlpJbmRleCA9IFwiMTBcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaXYyID0gbmV3IENvbnRyb2woXCJwcmltYXJ5XCIpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkaXYyLldpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuTWluSGVpZ2h0ID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGRpdjIuU2V0TG9jYXRpb24oMCwgMCk7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDUwJSlcIjtcclxuXHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuT3BhY2l0eSA9IFwiMC45XCI7XHJcbiAgICAgICAgICAgIGRpdjIuU3R5bGUuWkluZGV4ID0gXCI5XCI7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciBwYWdlIGluIFJpYmJvblBhZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZighc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShwYWdlLkNhcHRpb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsbGIgPSBDb250cm9sLkxhYmVsKHBhZ2UuQ2FwdGlvbiwgNiwgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGxiLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGxiLlN0eWxlLkNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5BcHBlbmRDaGlsZChsbGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gMjY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGdyb3VwIGluIHBhZ2UuUmliYm9uR3JvdXBzKVxyXG4gICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYnV0dG9uIGluIGdyb3VwLkJ1dHRvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uRXhjaGFuZ2VDbGFzcyhcInJpYmJvbmJ1dHRvbnNtYWxsXCIsIFwicmliYm9uYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLkFmdGVySXRlbUNsaWNrID0gKGV2KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3U3RhdGUgPSBUaWxlVmlld1N0YXRlLkhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLkVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5FeGNoYW5nZUNsYXNzKFwicHJpbWFyeVwiLCBcInByaW1hcnlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuRmlsdGVyID0gXCJicmlnaHRuZXNzKDExMCUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uRXhjaGFuZ2VDbGFzcyhcInByaW1hcnlcIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uU3R5bGUuQm9yZGVyID0gXCIxcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5GaWx0ZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5PcGFjaXR5ID0gXCIxXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TdHlsZS5Cb3hTaGFkb3cgPSBcIjBweCAwcHggMTBweCAtMnB4IHJnYmEoMCwwLDAsMC4yNSlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLklzU21hbGxDYXB0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5Qcm9jZXNzQ2FwdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uUHJvY2Vzc0ltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5TaXplID0gbmV3IFZlY3RvcjIoXCIoKDEwMCUgLSAyNHB4KSAqIDAuMzMpXCIsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKCgoMTAwJSAtIDI0cHgpICogKFwiICsgKHggKiAwLjMzbSkgKyBcIikpICsgKFwiICsgKDYgKiAoeCkpICsgXCJweCkgKyA2cHgpXCIsIHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLmNhcHRpb25EaXYgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLkVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNhcHRpb25EaXYuU3R5bGUuQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jYXB0aW9uRGl2LlN0eWxlLkNvbG9yID0gXCJncmV5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5jYXB0aW9uRGl2LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY2FwdGlvbkRpdi5TdHlsZS5Ub3AgPSBcIjY1cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYnV0dG9uLmltYWdlRGl2ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5pbWFnZURpdi5FeGNoYW5nZUNsYXNzKFwicmliYm9uYnV0dG9uc21hbGxpY29uXCIsIFwicmliYm9uYnV0dG9uaWNvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5JY29uVVJMID0gKGJ1dHRvbi5JY29uVVJMICsgXCJcIikuUmVwbGFjZShcIngxNngxNlwiLCBcIngzMngzMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5pbWFnZURpdi5TdHlsZS5Ub3AgPSBcIjI3cHhcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGJ1dHRvbi5FbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgYnV0dG9uLmltYWdlRGl2LlN0eWxlLkZpbHRlciA9IFwiYnJpZ2h0bmVzcyg5MCUpIGdyYXlzY2FsZSgxMDAlKSBjb250cmFzdCg2MCUpIGJyaWdodG5lc3MoMTgwJSlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGJ1dHRvbi5pbWFnZURpdi5TdHlsZS5GaWx0ZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih4ID09IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSAxMDY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLlN0eWxlLk9wYWNpdHkgPSBcIjFcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLkFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKHggIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB5ICs9IDEwNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGl2LkhlaWdodCA9IHk7XHJcbiAgICAgICAgICAgIGRpdjIuSGVpZ2h0ID0geTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuRW1wdHkoKTtcclxuICAgICAgICAgICAgZGl2LkNvbnRlbnQuQXBwZW5kQ2hpbGQoZG9jKTtcclxuXHJcbiAgICAgICAgICAgIGRpdjIuQ29udGVudC5Pbk1vdXNlRG93biA9IChldikgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXYuU3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKGRpdjIpO1xyXG4gICAgICAgICAgICBDb250ZW50LkFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgICAgICBkaXYuQ29udGVudC5DbGljaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVuZGVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuUmVuZGVyKCk7XHJcbiAgICAgICAgICAgIFJlbmRlclRpbGVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGlsZUNvbnRyb2woKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuQXV0bztcclxuICAgICAgICAgICAgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlICogLTEpXCIsIDApO1xyXG4gICAgICAgICAgICBTaXplID0gbmV3IFZlY3RvcjIoXCIxMDAlXCIsIFwiMTAwJVwiKTtcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBDb250ZW50LlN0eWxlLkJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIjtcclxuICAgICAgICAgICAgQ29udGVudC5TdHlsZS5WaXNpYmlsaXR5ID0gVmlzaWJpbGl0eS5IaWRkZW47XHJcbiAgICAgICAgICAgIENvbnRlbnQuU3R5bGUuVHJhbnNpdGlvbiA9IFwibGVmdCAxcyBlYXNlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRSaWJib25QYWdlcyhwYXJhbXMgUmliYm9uUGFnZVtdIHBhZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocGFnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFJpYmJvblBhZ2VzLkFkZFJhbmdlKHBhZ2VzKTtcclxuICAgICAgICB9XHJcblxuICAgIFxucHJpdmF0ZSBMaXN0PFJpYmJvblBhZ2U+IF9fUHJvcGVydHlfX0luaXRpYWxpemVyX19SaWJib25QYWdlcz1uZXcgTGlzdDxSaWJib25QYWdlPigpO31cclxuXHJcbiAgICBwdWJsaWMgZW51bSBUaWxlVmlld1N0YXRlXHJcbiAgICB7XHJcbiAgICAgICAgSGlkZGVuLFxyXG4gICAgICAgIFZpc2libGVcclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZvcm1Qb3B1cCA6IEZvcm1cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgaW50IFByZXZpb3VzU2Nyb2xsVG9wO1xyXG4gICAgICAgIHB1YmxpYyBIVE1MRWxlbWVudCBQYXJlbnRDb250YWluZXI7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3IyIEdldFBvcHVwRGVmYXVsdExvY2F0aW9uKENvbnRyb2wgY29udHJvbCwgYm9vbCBpc0NvbnRyb2xDaGlsZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoMCwgMCk7XHJcblxyXG4gICAgICAgICAgICBpZihpc0NvbnRyb2xDaGlsZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlYyA9IGNvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKChmbG9hdClyZWMuTGVmdCwgKGZsb2F0KShyZWMuVG9wICsgcmVjLkhlaWdodCkpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlYyA9IGNvbnRyb2wuQ29udGVudC5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMigoZmxvYXQpcmVjLkxlZnQsIChmbG9hdCkocmVjLlRvcCArIHJlYy5IZWlnaHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZvcm1Qb3B1cCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBIZWFkaW5nLlN0eWxlLkRpc3BsYXkgPSBEaXNwbGF5Lk5vbmU7XHJcbiAgICAgICAgICAgIEJvZHkuU2V0TG9jYXRpb24oMCwgMCk7XHJcbiAgICAgICAgICAgIEJvZHkuU2V0U2l6ZShcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgICAgICBDb250ZW50LkNsYXNzTGlzdC5BZGQoXCJpbnB1dGNvbnRyb2xcIik7XHJcbiAgICAgICAgICAgIENvbnRlbnQuQ2xhc3NMaXN0LlJlbW92ZShcImZvcm0tYmFzZVwiKTtcclxuICAgICAgICAgICAgQ29udGVudC5TdHlsZS5Cb3hTaGFkb3cgPSBcIjAgMCA2M3B4IC0xN3B4IHJnYmEoMCwwLDAsMC43NSlcIjtcclxuXHJcbiAgICAgICAgICAgIFN0YXJ0UG9zaXRpb24gPSBGb3JtU3RhcnRQb3NpdGlvbi5NYW51YWw7XHJcblxyXG4gICAgICAgICAgICBTaG93Q2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgU2hvd01heGltaXplID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFNob3dNaW5pbWl6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBBbGxvd01vdmVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBTaG93UG9wdXAoVmVjdG9yMiBsb2NhdGlvbilcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuTG9jYXRpb24gPSBsb2NhdGlvbjtcclxuICAgICAgICAgICAgU2hvd0RpYWxvZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIE1vdmVGb3JtVXAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Mb2NhdGlvbiA9IG5ldyBWZWN0b3IyKHRoaXMuTGVmdCwgdGhpcy5Ub3AuVG9GbG9hdCgpIC0gdGhpcy5IZWlnaHQuVG9GbG9hdCgpIC0gMjApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaG93ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PblNob3dlZCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFsbG93U2l6ZUNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBXaW5kb3dTdGF0ZSA9IFdpbmRvd1N0YXRlVHlwZS5NYXhpbWl6ZWQ7XHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gQ29udGVudC5HZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWN0LkJvdHRvbSA+IFdpbmRvdy5Jbm5lckhlaWdodCB8fCByZWN0LkJvdHRvbSA+IERvY3VtZW50LkRvY3VtZW50RWxlbWVudC5DbGllbnRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3ZlRm9ybVVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goRXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIENvbG9ySW5wdXQgOiBUZXh0SW5wdXRcclxuXHR7XHJcblx0XHRwdWJsaWMgQ29sb3JJbnB1dCggKSA6IGJhc2UoQnJpZGdlLkh0bWw1LklucHV0VHlwZS5Db2xvcilcclxuXHRcdHtcclxuXHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIENvbnNvbGVGb3JtIDogRm9ybVxyXG5cdHtcclxuXHRcdHB1YmxpYyBzdGF0aWMgYm9vbCBDb25zb2xlVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgQ29uc29sZUZvcm0gX2NvbnNvbGVGb3JtID0gbnVsbDtcclxuXHRcdHByaXZhdGUgSFRNTERpdkVsZW1lbnQgbG9nQ29udGVudCA9IG51bGw7XHJcblx0XHRwcml2YXRlIHN0YXRpYyBXaW5kb3dTdGF0ZVR5cGUgcHJldldpbmRvd1N0YXRlID0gV2luZG93U3RhdGVUeXBlLk5vcm1hbDtcclxuXHRcdHByaXZhdGUgc3RhdGljIGJvb2wgZmlyc3RMb2FkID0gdHJ1ZTtcclxuXHRcdHByaXZhdGUgc3RhdGljIFZlY3RvcjIgcHJldkxvY2F0aW9uO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgVmVjdG9yMiBwcmV2U2l6ZSA9IFNldHRpbmdzLkNvbnNvbGVEZWZhdWx0U2l6ZTtcclxuXHJcblx0XHRwdWJsaWMgdm9pZCBJbnRlcm5hbENsZWFyKClcclxuXHRcdHtcclxuXHRcdFx0bG9nQ29udGVudC5FbXB0eSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyB2b2lkIEludGVybmFsTG9nKHN0cmluZyBzb3VyY2UsIENvbnNvbGVMb2dUeXBlIGxvZ1R5cGUgPSBDb25zb2xlTG9nVHlwZS5Mb2cpXHJcblx0XHR7XHJcblx0XHRcdHZhciBwYXJhID0gbmV3IEhUTUxQYXJhZ3JhcGhFbGVtZW50KCkgeyBDbGFzc05hbWUgPSBcImNvbnNvbGUtcGFyYVwiIH07XHJcblx0XHRcdHN3aXRjaChsb2dUeXBlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y2FzZSBDb25zb2xlTG9nVHlwZS5EZWJ1ZzpcclxuXHRcdFx0XHRcdHBhcmEuU3R5bGUuQ29sb3IgPSBDb2xvci5Gb3Jlc3RHcmVlbjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgQ29uc29sZUxvZ1R5cGUuRXJyb3I6XHJcblx0XHRcdFx0XHRwYXJhLlN0eWxlLkNvbG9yID0gQ29sb3IuUmVkO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHBhcmEuSW5uZXJIVE1MID0gc291cmNlO1xyXG5cdFx0XHRsb2dDb250ZW50LkFwcGVuZENoaWxkKHBhcmEpO1xyXG5cdFx0XHRpZihsb2dDb250ZW50LkNoaWxkcmVuLkxlbmd0aCA+IDEwMDApXHJcblx0XHRcdHtcclxuXHRcdFx0XHRsb2dDb250ZW50LlJlbW92ZUNoaWxkKGxvZ0NvbnRlbnQuQ2hpbGRyZW5bMF0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHBhcmEuU2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uR290Rm9jdXMoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihDb250ZW50ICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRTdHlsZS5PcGFjaXR5ID0gXCIxXCI7XHJcblx0XHRcdH1cclxuXHRcdFx0YmFzZS5PbkdvdEZvY3VzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Mb3N0Rm9jdXMoKVxyXG5cdFx0e1xyXG5cdFx0XHRpZihDb250ZW50ICE9IG51bGwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRTdHlsZS5PcGFjaXR5ID0gXCIwLjVcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNlLk9uTG9zdEZvY3VzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIENvbnNvbGVGb3JtKClcclxuXHRcdHtcdFx0XHRcclxuXHRcdFx0bG9nQ29udGVudCA9IERpdihcImNvbnNvbGUtYm9keVwiKTtcclxuXHRcdFx0dGhpcy5Cb2R5LkFwcGVuZENoaWxkKGxvZ0NvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLkJvZHkuU3R5bGUuQmFja2dyb3VuZCA9IENvbG9yLkJsYWNrO1xyXG5cdFx0XHR0aGlzLkJvZHkuU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuU2Nyb2xsO1xyXG5cclxuXHRcdFx0dGhpcy5UZXh0ID0gRG9jdW1lbnQuVGl0bGUgKyBcIiAtIENvbnNvbGVcIjtcclxuXHRcdFx0aWYoZmlyc3RMb2FkKVxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLlN0YXJ0UG9zaXRpb24gPSBGb3JtU3RhcnRQb3NpdGlvbi5DZW50ZXI7XHJcblx0XHRcdFx0dGhpcy5TaXplID0gcHJldlNpemU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5TdGFydFBvc2l0aW9uID0gRm9ybVN0YXJ0UG9zaXRpb24uTWFudWFsO1xyXG5cdFx0XHRcdHRoaXMuTG9jYXRpb24gPSBwcmV2TG9jYXRpb247XHJcblxyXG5cdFx0XHRcdGlmKHByZXZXaW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHByZXZTaXplID0gU2V0dGluZ3MuQ29uc29sZURlZmF1bHRTaXplO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5TaXplID0gcHJldlNpemU7XHJcblxyXG5cdFx0XHRcdGlmKHByZXZXaW5kb3dTdGF0ZSA9PSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFNldFdpbmRvd1N0YXRlKHByZXZXaW5kb3dTdGF0ZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuT25TaG93ZWQoKTtcclxuXHRcdFx0Q29uc29sZVZpc2libGUgPSB0cnVlO1xyXG5cdFx0XHRmaXJzdExvYWQgPSBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NpbmcoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLk9uQ2xvc2luZygpO1xyXG5cclxuXHRcdFx0cHJldlNpemUgPSBTaXplO1xyXG5cdFx0XHRwcmV2TG9jYXRpb24gPSBMb2NhdGlvbjtcclxuXHRcdFx0cHJldldpbmRvd1N0YXRlID0gV2luZG93U3RhdGU7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG5cdFx0e1xyXG5cdFx0XHRiYXNlLk9uQ2xvc2VkKCk7XHJcblx0XHRcdENvbnNvbGVWaXNpYmxlID0gZmFsc2U7XHRcdFx0XHJcblx0XHR9XHJcblx0XHRwcml2YXRlIHN0YXRpYyB2b2lkIENoZWNrQ29uc29sZVN0YXRlKClcclxuXHRcdHtcclxuXHRcdFx0aWYoIUNvbnNvbGVWaXNpYmxlKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0X2NvbnNvbGVGb3JtID0gbmV3IENvbnNvbGVGb3JtKCk7XHJcblx0XHRcdFx0X2NvbnNvbGVGb3JtLlNob3codHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBMb2coc3RyaW5nIHNvdXJjZSwgQ29uc29sZUxvZ1R5cGUgbG9nVHlwZSA9IENvbnNvbGVMb2dUeXBlLkxvZylcclxuXHRcdHtcclxuXHRcdFx0Q2hlY2tDb25zb2xlU3RhdGUoKTtcclxuXHRcdFx0X2NvbnNvbGVGb3JtLkludGVybmFsTG9nKHNvdXJjZSwgbG9nVHlwZSk7XHRcdFxyXG5cdFx0fVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBDbGVhcigpXHJcblx0XHR7XHJcblx0XHRcdENoZWNrQ29uc29sZVN0YXRlKCk7XHJcblx0XHRcdF9jb25zb2xlRm9ybS5JbnRlcm5hbENsZWFyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZW51bSBDb25zb2xlTG9nVHlwZVxyXG5cdHtcclxuXHRcdExvZyxcclxuXHRcdERlYnVnLFxyXG5cdFx0RXJyb3JcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBFeHByZXNzQ3JhZnQ7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuXHRwdWJsaWMgY2xhc3MgRGlhbG9nRm9ybSA6IEZvcm1cclxuXHR7XHJcblx0XHRwcm90ZWN0ZWQgTGlzdDxTaW1wbGVEaWFsb2dCdXR0b24+IF9idXR0b25Db2xsZWN0aW9uO1xyXG5cclxuXHRcdHB1YmxpYyBDb250cm9sIEJ1dHRvblNlY3Rpb247XHJcblx0XHRcclxuXHRcdHB1YmxpYyBEaWFsb2dGb3JtKHN0cmluZyB0ZXh0ID0gXCJcIikgOiBiYXNlKClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5UZXh0ID0gdGV4dDtcclxuXHRcdFx0YmFzZS5Cb2R5LlN0eWxlLkJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcclxuXHJcbiAgICAvLyAgICAgICAgICAgdG9wOmNhbGMoMTAwJSAtIDcwcHgpO1xyXG4gICAgLy93aWR0aDoxMDAlO1xyXG4gICAgLy9oZWlnaHQ6NzBweDtcclxuICAgICAgICAgICAgXHJcbiAgICBcclxuXHRcdFx0QnV0dG9uU2VjdGlvbiA9IG5ldyBDb250cm9sKFwiZGlhbG9nYnV0dG9uc2VjdGlvblwiKTtcdFx0XHRcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCdXR0b25TZWN0aW9uLlRvcCA9IFwiKDEwMCUgLSA3MHB4KVwiO1xyXG4gICAgICAgICAgICAgICAgQnV0dG9uU2VjdGlvbi5TaXplID0gbmV3IFZlY3RvcjIoXCIxMDAlXCIsIDcwKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2luZygpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuQm9keS5BcHBlbmRDaGlsZChCdXR0b25TZWN0aW9uKTtcclxuXHRcdFx0YmFzZS5PblNob3dpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZXh0SW5wdXREcm9wRG93biA6IFRleHRJbnB1dFxyXG4gICAge1xyXG4gICAgICAgIHByb3RlY3RlZCBTaW1wbGVCdXR0b24gRHJvcERvd25CdXR0b247XHJcbiAgICAgICAgcHJvdGVjdGVkIFRleHRJbnB1dCBVc2VkRWRpdDtcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREaXNwbGF5Rm9ybWF0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBVc2VkRWRpdC5HZXREaXNwbGF5Rm9ybWF0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdmlydHVhbCBmbG9hdCBHZXREcm9wZG93bldpZHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZmxvYXQpdGhpcy5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLldpZHRoOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgU2V0RGlzcGxheUZvcm1hdChzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVc2VkRWRpdC5TZXREaXNwbGF5Rm9ybWF0KHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uRm9jdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVXNlZEVkaXQuRm9jdXMoKTtcclxuICAgICAgICB9ICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIEhUTUxJbnB1dEVsZW1lbnQgR2V0SW5wdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVzZWRFZGl0LkdldElucHV0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0RHJvcERvd24oSW5wdXRUeXBlIGlucHV0VHlwZSA9IElucHV0VHlwZS5UZXh0KSA6IGJhc2UobmV3IEhUTUxEaXZFbGVtZW50KCksIHRydWUsIGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGRyb3BEb3duV2lkdGggPSAxNztcclxuXHJcbiAgICAgICAgICAgIGlmKEhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkcm9wRG93bldpZHRoID0gNDU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFR5cGUgPSBpbnB1dFR5cGU7XHJcblxyXG4gICAgICAgICAgICBVc2VkRWRpdCA9IG5ldyBUZXh0SW5wdXQoaW5wdXRUeXBlKSB7IERpc2FibGVGb2N1c1BvcHVwID0gdHJ1ZSwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKSwgU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArIChkcm9wRG93bldpZHRoIC0gMSkgKyBcInB4KVwiLCBcIjEwMCVcIikgfTtcclxuICAgICAgICAgICAgRHJvcERvd25CdXR0b24gPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSBcIiArIGRyb3BEb3duV2lkdGggKyBcInB4KVwiLCAwKSwgU2l6ZSA9IG5ldyBWZWN0b3IyKGRyb3BEb3duV2lkdGgsIFwiMTAwJVwiKX07XHJcbiAgICAgICAgICAgIERyb3BEb3duQnV0dG9uLkNvbnRlbnQuT25Nb3VzZURvd24gPSAoZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKCFSZWFkb25seSAmJiBFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIE9uRHJvcERvd25DbGlja2VkKGV2KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFN0eWxlLkJvcmRlciA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgRHJvcERvd25CdXR0b24uQ2xhc3NMaXN0LkFkZChcImRyb3Bkb3duXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERyb3BEb3duQnV0dG9uLlN0eWxlLkJhY2tncm91bmRQb3NpdGlvbiA9IFwicmlnaHQgMTZweCBjZW50ZXJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udGVudC5BcHBlbmRDaGlsZHJlbihVc2VkRWRpdCwgRHJvcERvd25CdXR0b24pOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXRWYWx1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gVXNlZEVkaXQuVGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFNldFZhbHVlKHN0cmluZyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVzZWRFZGl0LlRleHQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25Ecm9wRG93bkNsaWNrZWQoTW91c2VFdmVudCBtb3VzZUV2ZW50KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlO1xyXG51c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1lbW9JbnB1dCA6IFRleHRJbnB1dFxyXG4gICAgeyAgICAgICAgXHJcbiAgICAgICAgcHVibGljIGludCBSb3dzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLlJvd3M7IH1cclxuICAgICAgICAgICAgc2V0IHsgQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLlJvd3MgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb2xzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLkNvbHM7IH1cclxuICAgICAgICAgICAgc2V0IHsgQ29udGVudC5BczxIVE1MVGV4dEFyZWFFbGVtZW50PigpLkNvbHMgPSB2YWx1ZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBWZWN0b3IyIFByZVNpemU7XHJcbiAgICAgICAgcHJpdmF0ZSBWZWN0b3IyIFByZVByZVNpemU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmcgUHJlWkluZGV4O1xyXG4gICAgICAgIHByaXZhdGUgYm9vbCBfaGFzR290Rm9jdXM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIERpc2FibGVSZXNpemUgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldFZhbHVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250ZW50LkFzPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KCkuVmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTZXRWYWx1ZShzdHJpbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDb250ZW50LkFzPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KCkuVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBNZW1vSW5wdXQoKSA6IGJhc2UobmV3IEhUTUxUZXh0QXJlYUVsZW1lbnQoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0eWxlLlJlc2l6ZSA9IFJlc2l6ZS5Ob25lO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgT25Hb3RGb2N1cyA9IChtZW1vKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihEaXNhYmxlUmVzaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBTdHlsZS5SZXNpemUgPSBSZXNpemUuQm90aDtcclxuICAgICAgICAgICAgICAgIFByZVByZVNpemUgPSBTaXplO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihfaGFzR290Rm9jdXMpICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFNpemUgPSBQcmVTaXplO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9oYXNHb3RGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJlU2l6ZSA9IFNpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgT25Mb3N0Rm9jdXMgPSAobWVtbykgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU3R5bGUuUmVzaXplID0gUmVzaXplLk5vbmU7XHJcbiAgICAgICAgICAgICAgICBQcmVTaXplID0gU2l6ZTtcclxuICAgICAgICAgICAgICAgIFNpemUgPSBQcmVQcmVTaXplOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIFBERlByZXZpZXdGb3JtIDogRm9ybVxyXG5cdHtcclxuXHRcdHB1YmxpYyBzdHJpbmcgU291cmNlO1xyXG5cdFx0cHVibGljIFBkZlNvdXJjZVR5cGUgUERGU291cmNlVHlwZTtcclxuXHRcdHB1YmxpYyBIVE1MRWxlbWVudCBQZGZWaWV3ZXI7XHJcblxyXG5cdFx0cHVibGljIFBERlByZXZpZXdGb3JtKHN0cmluZyBzb3VyY2UsIFBkZlNvdXJjZVR5cGUgcGRmU291cmNlVHlwZSA9IFBkZlNvdXJjZVR5cGUuVXJsKVxyXG5cdFx0e1xyXG5cdFx0XHRTb3VyY2UgPSBzb3VyY2U7XHJcblx0XHRcdFBERlNvdXJjZVR5cGUgPSBwZGZTb3VyY2VUeXBlO1xyXG5cclxuXHRcdFx0UGRmVmlld2VyID0gRG9jdW1lbnQuQ3JlYXRlRWxlbWVudChCcm93c2VyLklzSUUgPyBcImlmcmFtZVwiIDogcGRmU291cmNlVHlwZSA9PSBQZGZTb3VyY2VUeXBlLlVybCA/IFwiZW1iZWRcIiA6IFwib2JqZWN0XCIpO1xyXG5cdFx0XHRQZGZWaWV3ZXIuQ2xhc3NOYW1lID0gXCJjb250cm9sXCI7XHJcblxyXG5cdFx0XHRQZGZWaWV3ZXIuU2V0Qm91bmRzKDAsIDAsIFwiMTAwJVwiLCBcIjEwMCVcIik7XHJcblx0XHRcdFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJwZGZcIik7XHJcblx0XHRcdFBkZlZpZXdlci5TZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYXBwbGljYXRpb24vcGRmXCIpO1xyXG5cdFx0XHQvL29iamVjdCBcdFx0XHJcblxyXG5cdFx0XHR0aGlzLkJvZHkuQXBwZW5kQ2hpbGQoUGRmVmlld2VyKTtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TaG93aW5nKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5PblNob3dpbmcoKTtcclxuXHRcdFx0Ly9kYXRhXHJcblx0XHRcdGlmKFBERlNvdXJjZVR5cGUgPT0gUGRmU291cmNlVHlwZS5VcmwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRQZGZWaWV3ZXIuU2V0QXR0cmlidXRlKFwiU3JjXCIsIFNvdXJjZSk7XHJcblx0XHRcdH1lbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRQZGZWaWV3ZXIuU2V0QXR0cmlidXRlKFwiZGF0YVwiLCBHZXRQZGZTdHJpbmcoU291cmNlKSk7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBlbnVtIFBkZlNvdXJjZVR5cGVcclxuXHR7XHJcblx0XHRVcmwsXHJcblx0XHRCYXNlNjRcclxuXHR9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2ltcGxlRGlhbG9nQnV0dG9uIDogU2ltcGxlQnV0dG9uXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZURpYWxvZ0J1dHRvbihGb3JtIHBhcmVudEZvcm0sIERpYWxvZ1Jlc3VsdEVudW0gZGlhbG9nUmVzdWx0ID0gRGlhbG9nUmVzdWx0RW51bS5Ob25lKSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QYXJlbnRGb3JtID0gcGFyZW50Rm9ybTtcclxuICAgICAgICAgICAgdGhpcy5EaWFsb2dSZXN1bHQgPSBkaWFsb2dSZXN1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLlNldFNpemUoNzUsIDIzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDYWxjRm9ybSA6IEZvcm1Qb3B1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBUZXh0SW5wdXQgSW5wdXRDb250cm9sO1xyXG5cclxuICAgICAgICBwdWJsaWMgQ2FsY3VsYXRvckNvbnRyb2wgQ2FsQ29udHJvbDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBDbGlja2VkQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgQ2FsY0Zvcm0oVGV4dElucHV0IGlucHV0Q29udHJvbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbCAmJiBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQcmV2aW91c1Njcm9sbFRvcCA9IGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50LlNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIFBhcmVudENvbnRhaW5lciA9IGlucHV0Q29udHJvbC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnB1dENvbnRyb2wgPSBpbnB1dENvbnRyb2w7XHJcbiAgICAgICAgICAgIENhbENvbnRyb2wgPSBuZXcgQ2FsY3VsYXRvckNvbnRyb2woSW5wdXRDb250cm9sLkdldE51bWJlclZhbHVlKCksIHRydWUpO1xyXG4gICAgICAgICAgICBDYWxDb250cm9sLlNldEJvdW5kc0Z1bGwoKTtcclxuICAgICAgICAgICAgQ2FsQ29udHJvbC5PbkNsb3NlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2xpY2tlZENsb3NlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENhbENvbnRyb2wuT25FcXVhbCA9ICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5wdXRDb250cm9sLlRleHQgPSB2YWx1ZS5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQXBwZW5kQ2hpbGQoQ2FsQ29udHJvbCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBTaXplID0gbmV3IFZlY3RvcjIoMTgyLCAxNTcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NlZCgpO1xyXG4gICAgICAgICAgICBpZighSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgICAgICBJbnB1dENvbnRyb2wuRm9jdXMoKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBJbnB1dENvbnRyb2wuU2Nyb2xsKFByZXZpb3VzU2Nyb2xsVG9wLCBQYXJlbnRDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFDbGlja2VkQ2xvc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhbENvbnRyb2wuRG9udFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQ2FsQ29udHJvbC5BZGRPcGVyYXRvcihDYWxDb250cm9sLmJ0bkVxKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU2hvd2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25TaG93ZWQoKTtcclxuICAgICAgICAgICAgaWYoSW5wdXRDb250cm9sID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcblxyXG4gICAgICAgICAgICBDYWxDb250cm9sLmJ0bkVxLkZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIERhdGFSb3dFZGl0Rm9ybSA6IERpYWxvZ0Zvcm1cclxuXHR7XHJcblx0XHRwdWJsaWMgYm9vbCBMaXZlRGF0YTtcclxuXHRcdHB1YmxpYyBHcmlkVmlldyBHcmlkVmlldztcclxuXHRcdHB1YmxpYyBEYXRhUm93IERhdGFSb3c7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBIVE1MRGl2RWxlbWVudCBQYW5lbDtcclxuXHJcbiAgICAgICAgb2JqZWN0W10gcHJldkRhdGE7ICAgIFxyXG5cclxuXHRcdHB1YmxpYyBEYXRhUm93RWRpdEZvcm0oRGF0YVJvdyBfZGF0YVJvdywgR3JpZFZpZXcgX2dyaWRWaWV3LCBib29sIF9saXZlRGF0YSA9IHRydWUpIDogYmFzZSgpXHJcblx0XHR7XHJcbiAgICAgICAgICAgIHByZXZEYXRhID0gbmV3IG9iamVjdFtfZGF0YVJvdy5QYXJlbnRUYWJsZS5Db2x1bW5Db3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9kYXRhUm93LlBhcmVudFRhYmxlLkNvbHVtbkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHByZXZEYXRhW2ldID0gX2RhdGFSb3dbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgRGF0YVJvdyA9IF9kYXRhUm93O1xyXG5cdFx0XHRHcmlkVmlldyA9IF9ncmlkVmlldztcclxuXHRcdFx0TGl2ZURhdGEgPSBfbGl2ZURhdGE7XHJcblxyXG5cdFx0XHR0aGlzLlRleHQgPSBcIlJvdyBFZGl0IEZvcm1cIjtcclxuXHRcdFx0dGhpcy5XaWR0aCA9IFwiNDAwcHhcIjsgLy8gMjVweCAtIDI1cHggMzUwcHggd2lkdGg7XHJcblx0XHRcdHRoaXMuSGVpZ2h0ID0gXCI2MDBweFwiO1xyXG5cdFx0XHR0aGlzLkJvZHkuU3R5bGUuT3ZlcmZsb3dZID0gQnJpZGdlLkh0bWw1Lk92ZXJmbG93LkF1dG87XHJcblxyXG4gICAgICAgICAgICBQYW5lbCA9IERpdigpO1xyXG4gICAgICAgICAgICBQYW5lbC5TdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5BdXRvO1xyXG4gICAgICAgICAgICBQYW5lbC5TZXRCb3VuZHMoXCIwXCIsIFwiMFwiLCBcIjEwMCVcIiwgXCIoMTAwJSAtIDYwcHgpXCIpO1xyXG4gICAgICAgICAgICBCb2R5LlN0eWxlLkJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIF9idXR0b25Db2xsZWN0aW9uID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX28zKT0+e19vMy5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgXCIoMTAwJSAtIDM1cHgpXCIpLCBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRGF0YVJvdy5QYXJlbnRUYWJsZS5Db2x1bW5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhUm93W2ldID0gcHJldkRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JpZFZpZXcuUmVuZGVyR3JpZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fSk7X28zLkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uT0spIHsgVGV4dCA9IFwiT0tcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gMTcwcHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKSAgfSk7cmV0dXJuIF9vMzt9KTtcdFx0XHRcclxuXHJcbiAgICAgICAgICAgIEJ1dHRvblNlY3Rpb24uQXBwZW5kQ2hpbGRyZW5UYWJJbmRleChfYnV0dG9uQ29sbGVjdGlvbi5Ub0FycmF5KCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5Cb2R5LkFwcGVuZENoaWxkKFBhbmVsKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuQWxsb3dTaXplQ2hhbmdlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGF0YSBub3cgYXV0byBjaGFuZ2VzLi4uXHJcblx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NlZCgpXHJcblx0XHR7XHRcdFx0XHJcblx0XHRcdEdyaWRWaWV3LkRhdGFTb3VyY2UuRW5kRGF0YVVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0YmFzZS5PbkNsb3NlZCgpO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcblx0XHR7XHJcblx0XHRcdGJhc2UuT25TaG93ZWQoKTtcclxuXHJcblx0XHRcdGlmKERhdGFSb3cgPT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuRGlhbG9nUmVzdWx0ID0gRGlhbG9nUmVzdWx0RW51bS5DYW5jZWw7XHJcblx0XHRcdFx0dGhpcy5DbG9zZSgpO1xyXG5cdFx0XHR9ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0R3JpZFZpZXcuRGF0YVNvdXJjZS5CZWdpbkRhdGFVcGRhdGUoKTtcclxuXHJcblx0XHRcdFx0R2VuZXJhdGVGb3JtKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIHZvaWQgR2VuZXJhdGVGb3JtKClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5QYW5lbC5FbXB0eSgpO1xyXG5cdFx0XHR2YXIgbGVuZ3RoID0gR3JpZFZpZXcuQ29sdW1uQ291bnQoKTtcclxuXHJcblx0XHRcdGludCBjb2wgPSAwO1xyXG5cdFx0XHRpbnQgaGVpZ2h0ID0gMjU7XHJcblxyXG5cdFx0XHRpbnQgZGVmYXVsdEhlaWdodCA9IDI0ICsgMyArIDI0ICsgMztcclxuXHRcdFx0aW50IGRlZmF1bHRIZWlnaHQyWCA9IGRlZmF1bHRIZWlnaHQgKiAzO1xyXG5cdFx0XHRpbnQgaW5jcmVtZW50SGVpZ2h0ID0gZGVmYXVsdEhlaWdodDtcclxuXHJcblx0XHRcdGludCBlYWNoV2lkdGggPSAoMzUwIC8gMykgLSAzO1xyXG5cclxuXHRcdFx0Zm9yKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG5cdFx0XHR7XHRcdFx0XHRcclxuXHRcdFx0XHRpbmNyZW1lbnRIZWlnaHQgPSBkZWZhdWx0SGVpZ2h0O1xyXG5cdFx0XHRcdHZhciBnckNvbCA9IEdyaWRWaWV3LkdldENvbHVtbihpKTtcclxuXHJcblx0XHRcdFx0aWYoIWdyQ29sLkFsbG93RWRpdClcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0XHR2YXIgZHRDb2wgPSBnckNvbC5Db2x1bW47XHJcblxyXG5cdFx0XHRcdHZhciBkdEluZGV4ID0gZ3JDb2wuR2V0RGF0YUNvbHVtbkluZGV4KCk7XHJcblxyXG5cdFx0XHRcdGlmKGdyQ29sLkNvbHVtbi5GaWVsZE5hbWUuVG9Mb3dlcigpID09IFwiY250clwiKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGdyQ29sLlJlYWRPbmx5ID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHN3aXRjaChkdENvbC5EYXRhVHlwZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkRhdGVUaW1lOlxyXG5cdFx0XHRcdFx0XHR2YXIgbGJsZGF0ZSA9IExhYmVsKGdyQ29sLkNhcHRpb24sIDI1ICsgKGNvbCAqIGVhY2hXaWR0aCArIChjb2wgKiAzKSksIGhlaWdodCk7XHJcblx0XHRcdFx0XHRcdHZhciBpbnB1dERhdGUgPSBuZXcgVGV4dElucHV0KEJyaWRnZS5IdG1sNS5JbnB1dFR5cGUuRGF0ZSk7XHJcblx0XHRcdFx0XHRcdGlucHV0RGF0ZS5TZXRCb3VuZHMoMjUgKyAoY29sICogZWFjaFdpZHRoICsgKGNvbCAqIDMpKSwgaGVpZ2h0ICsgMTYgKyAzLCBlYWNoV2lkdGgsIDI0KTtcclxuXHRcdFx0XHRcdFx0aW5wdXREYXRlLlNldERhdGUoQ29udmVydC5Ub1N0cmluZyhEYXRhUm93W2R0SW5kZXhdKSk7XHJcblx0XHRcdFx0XHRcdGlucHV0RGF0ZS5SZWFkb25seSA9IGdyQ29sLlJlYWRPbmx5O1xyXG5cdFx0XHRcdFx0XHRpZighZ3JDb2wuUmVhZE9ubHkpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpbnB1dERhdGUuT25UZXh0Q2hhbmdlZCA9IChldikgPT5cclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHREYXRhUm93W2R0SW5kZXhdID0gaW5wdXREYXRlLkdldERhdGUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKExpdmVEYXRhKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRHcmlkVmlldy5SZW5kZXJHcmlkKCk7XHJcblx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUGFuZWwuQXBwZW5kQ2hpbGRyZW4obGJsZGF0ZSwgaW5wdXREYXRlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGJyZWFrO1x0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkludGVnZXI6XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkxvbmc6XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkZsb2F0Olx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5Eb3VibGU6XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkRlY2ltYWw6XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkJvb2w6XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLkJ5dGU6XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5TaG9ydDpcclxuXHJcblx0XHRcdFx0XHRcdHZhciBsYmxubWIgPSBMYWJlbChnckNvbC5DYXB0aW9uLCAyNSArIChjb2wgKiBlYWNoV2lkdGggKyAoY29sICogMykpLCBoZWlnaHQpO1xyXG5cdFx0XHRcdFx0XHRUZXh0SW5wdXQgaW5wdXROdW07XHJcblx0XHRcdFx0XHRcdGlmKGdyQ29sLkNlbGxEaXNwbGF5IGlzIEdyaWRWaWV3Q2VsbERpc3BsYXlDaGVja0JveClcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdGlucHV0TnVtID0gbmV3IFRleHRJbnB1dChCcmlkZ2UuSHRtbDUuSW5wdXRUeXBlLkNoZWNrYm94KTtcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlucHV0TnVtLlNldENoZWNrZWQoRGF0YVJvd1tkdEluZGV4XSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aW5wdXROdW0gPSBuZXcgVGV4dElucHV0KElucHV0VHlwZS5OdW1iZXIpO1xyXG5cdFx0XHRcdFx0XHRcdGlucHV0TnVtLlRleHQgPSBDb252ZXJ0LlRvU3RyaW5nKERhdGFSb3dbZHRJbmRleF0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpbnB1dE51bS5TZXRCb3VuZHMoMjUgKyAoY29sICogZWFjaFdpZHRoICsgKGNvbCAqIDMpKSwgaGVpZ2h0ICsgMTYgKyAzLCBlYWNoV2lkdGgsIDI0KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlucHV0TnVtLlJlYWRvbmx5ID0gZ3JDb2wuUmVhZE9ubHk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZighZ3JDb2wuUmVhZE9ubHkpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRpbnB1dE51bS5PblRleHRDaGFuZ2VkID0gKGV2KSA9PlxyXG5cdFx0XHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZihpbnB1dE51bS5UeXBlID09IElucHV0VHlwZS5DaGVja2JveClcclxuXHRcdFx0XHRcdFx0XHRcdHtcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0RGF0YVJvd1tkdEluZGV4XSA9IGlucHV0TnVtLlRleHQuSXNUcnVlKCkgPT0gMTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0RGF0YVJvd1tkdEluZGV4XSA9IGlucHV0TnVtLlRleHQ7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoTGl2ZURhdGEpXHJcblx0XHRcdFx0XHRcdFx0XHRcdEdyaWRWaWV3LlJlbmRlckdyaWQoKTtcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYW5lbC5BcHBlbmRDaGlsZHJlbihsYmxubWIsIGlucHV0TnVtKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0Y2FzZSBEYXRhVHlwZS5PYmplY3Q6XHJcblx0XHRcdFx0XHRjYXNlIERhdGFUeXBlLlN0cmluZzpcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGxibHN0ciA9IExhYmVsKGdyQ29sLkNhcHRpb24sIDI1ICsgKGNvbCAqIGVhY2hXaWR0aCArIChjb2wgKiAzKSksIGhlaWdodCk7XHJcblx0XHRcdFx0XHRcdHZhciBpbnB1dHN0ciA9IG5ldyBUZXh0SW5wdXQoQnJpZGdlLkh0bWw1LklucHV0VHlwZS5UZXh0KTtcclxuXHRcdFx0XHRcdFx0aW5wdXRzdHIuU2V0Qm91bmRzKDI1ICsgKGNvbCAqIGVhY2hXaWR0aCArIChjb2wgKiAzKSksIGhlaWdodCArIDE2ICsgMywgZWFjaFdpZHRoLCAyNCk7XHJcblx0XHRcdFx0XHRcdGlucHV0c3RyLlRleHQgPSBDb252ZXJ0LlRvU3RyaW5nKERhdGFSb3dbZHRJbmRleF0pO1xyXG5cdFx0XHRcdFx0XHRpbnB1dHN0ci5SZWFkb25seSA9IGdyQ29sLlJlYWRPbmx5O1xyXG5cclxuXHRcdFx0XHRcdFx0aWYoIWdyQ29sLlJlYWRPbmx5KVxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0aW5wdXRzdHIuT25UZXh0Q2hhbmdlZCA9IChldikgPT5cclxuXHRcdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XHREYXRhUm93W2R0SW5kZXhdID0gaW5wdXRzdHIuVGV4dDtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRpZihMaXZlRGF0YSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0R3JpZFZpZXcuUmVuZGVyR3JpZCgpO1xyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhbmVsLkFwcGVuZENoaWxkcmVuKGxibHN0ciwgaW5wdXRzdHIpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly9pZihvYmouTGVuZ3RoID4gMTAwKVxyXG5cdFx0XHRcdFx0XHQvL3tcclxuXHRcdFx0XHRcdFx0Ly9cdGluY3JlbWVudEhlaWdodCA9IGRlZmF1bHRIZWlnaHQyWDtcclxuXHJcblx0XHRcdFx0XHRcdC8vXHRjb2wgPSAyO1xyXG5cdFx0XHRcdFx0XHQvL31cclxuXHRcdFx0XHRcdFx0Ly9lbHNlXHJcblx0XHRcdFx0XHRcdC8ve1xyXG5cclxuXHRcdFx0XHRcdFx0Ly99XHJcblxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoY29sID09IDIpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aGVpZ2h0ICs9IGluY3JlbWVudEhlaWdodCArIDM7XHJcblx0XHRcdFx0XHRjb2wgPSAwO1xyXG5cdFx0XHRcdH1lbHNlXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0Y29sKys7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIEFkZCBBY2NlcHQgQ2hhbmdlc1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIERhdGVGb3JtIDogRm9ybVBvcHVwXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFRleHRJbnB1dCBJbnB1dENvbnRyb2w7XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRlQ29udHJvbCBEYXRlQ29udHJvbDtcclxuICAgICAgICBwdWJsaWMgYm9vbCBDbGlja2VkQ2xvc2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHVibGljIERhdGVGb3JtKFRleHRJbnB1dCBpbnB1dENvbnRyb2wpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXRDb250cm9sLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXRDb250cm9sLkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTY3JvbGxUb3AgPSBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5TY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRDb250YWluZXIgPSBpbnB1dENvbnRyb2wuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgU2l6ZSA9IG5ldyBWZWN0b3IyKDIzMiwgMjQ3KTtcclxuXHJcbiAgICAgICAgICAgIElucHV0Q29udHJvbCA9IGlucHV0Q29udHJvbDtcclxuICAgICAgICAgICAgRGF0ZUNvbnRyb2wgPSBuZXcgRGF0ZUNvbnRyb2woaW5wdXRDb250cm9sLkdldERhdGVUaW1lKCkpO1xyXG4gICAgICAgICAgICBEYXRlQ29udHJvbC5TZXRCb3VuZHNGdWxsKCk7XHJcblxyXG4gICAgICAgICAgICBEYXRlQ29udHJvbC5PbkRhdGVDaGFuZ2VkID0gKGRhdGUpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGUgPT0gRGF0ZVRpbWUuTWluVmFsdWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRDb250cm9sLlNldERhdGUoXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dENvbnRyb2wuU2V0RGF0ZShzdHJpbmcuRm9ybWF0KFwiezA6XCIgKyBpbnB1dENvbnRyb2wuRGlzcGxheUZvcm1hdCArIFwifVwiLCBkYXRlKSk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgRGF0ZUNvbnRyb2wuT25SZXF1ZXN0VG9DbG9zZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIENvbnRlbnQuT25LZXlEb3duID0gRGF0ZUNvbnRyb2wuQmxvY2tUYWJFdmVudDtcclxuXHJcbiAgICAgICAgICAgIEFwcGVuZENoaWxkKERhdGVDb250cm9sKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2UuT25DbG9zZWQoKTtcclxuICAgICAgICAgICAgaWYoIUhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgSW5wdXRDb250cm9sLkZvY3VzKCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW5wdXRDb250cm9sLlNjcm9sbChQcmV2aW91c1Njcm9sbFRvcCwgUGFyZW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2VkKCk7XHJcbiAgICAgICAgICAgIGlmKElucHV0Q29udHJvbCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG5cclxuICAgICAgICAgICAgRGF0ZUNvbnRyb2wuYnRuVG9kYXkuRm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBEYXRlSW5wdXQgOiBUZXh0SW5wdXREcm9wRG93blxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBEYXRlSW5wdXQoKSA6IGJhc2UoSW5wdXRUeXBlLkRhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uRHJvcERvd25DbGlja2VkKE1vdXNlRXZlbnQgbW91c2VFdmVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCFSZWFkb25seSAmJiBFbmFibGVkKVxyXG4gICAgICAgICAgICAgICAgKG5ldyBEYXRlRm9ybSh0aGlzLlVzZWRFZGl0KSkuXHJcbiAgICAgICAgICAgICAgICBTaG93UG9wdXAoRm9ybVBvcHVwLlxyXG4gICAgICAgICAgICAgICAgICAgIEdldFBvcHVwRGVmYXVsdExvY2F0aW9uKERyb3BEb3duQnV0dG9uLCB0cnVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5HbG9iYWxpemF0aW9uO1xyXG51c2luZyBCcmlkZ2U7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIElucHV0RGlhbG9nQ2hlY2tib3ggOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgY2hlY2tib3hcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgYSBib29sZWFuIHZhbHVlIG9mIHRoZSBjaGVja2JveCBzdGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nQ2hlY2tib3goc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgY2hlY2tib3hcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgYSBib29sZWFuIHZhbHVlIG9mIHRoZSBjaGVja2JveCBzdGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0NoZWNrYm94KHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5DaGVja2JveCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcIjQwcHhcIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gaW5wdXQuQ2hlY2tlZDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDQwICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZXN1bHQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIElucHV0RGlhbG9nQ29sb3VyIDogSW5wdXREaWFsb2dCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgY29sb3VyIHNlbGVjdG9yXHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBIZXhDb2RlIGZvciB0aGUgc2VsZWN0ZWQgY29sb3VyXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dDb2xvdXIoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBjb2xvdXIgc2VsZWN0b3JcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIEhleENvZGUgZm9yIHRoZSBzZWxlY3RlZCBjb2xvdXJcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dDb2xvdXIoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLkNvbG9yKTtcclxuICAgICAgICAgICAgaW5wdXQuSWQgPSBcIkRpYWxvZ0Fuc3dlckJveFwiO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHMoXCIxMHB4XCIsIFwiMHB4XCIsIFwiOTAlXCIsIFwiNDBweFwiKTtcclxuICAgICAgICAgICAgaW5wdXQuT25DaGFuZ2UgPSBldiA9PiB7IFJlc3VsdCA9IGlucHV0LlZhbHVlOyB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgNDAgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVzdWx0IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ0RhdGUgOiBJbnB1dERpYWxvZ0Jhc2VcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBEYXRlIFNlbGVjdG9yXHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBzZWxlY3RlZCBEYXRlXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dEYXRlKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uKSA6IHRoaXModGl0bGUsIHF1ZXN0aW9uLCAzNjApXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgRGF0ZSBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgRGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0RhdGUoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLkRhdGUpO1xyXG4gICAgICAgICAgICBpbnB1dC5JZCA9IFwiRGlhbG9nQW5zd2VyQm94XCI7XHJcbiAgICAgICAgICAgIGlucHV0LlNldEJvdW5kcyhcIjEwcHhcIiwgXCIwcHhcIiwgXCI5MCVcIiwgXCJhdXRvXCIpO1xyXG4gICAgICAgICAgICBpbnB1dC5PbkNoYW5nZSA9IGV2ID0+IHsgUmVzdWx0ID0gaW5wdXQuVmFsdWU7IH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyAyNSArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ0RhdGVUaW1lTG9jYWwgOiBJbnB1dERpYWxvZ0Jhc2Uge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIERhdGUgU2VsZWN0b3JcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIHNlbGVjdGVkIERhdGVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0RhdGVUaW1lTG9jYWwoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MCkge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgRGF0ZSBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgRGF0ZVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2l6ZVwiPlRoZSB3aWR0aCBvZiB0aGlzIGRpYWxvZy4gVGhlIGRlZmF1bHQgc2l6ZSBpcyAzNjA8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ0RhdGVUaW1lTG9jYWwoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVzdWx0ID0gRGF0ZVRpbWUuTm93O1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBJbnB1dChcImlucHV0Y29udHJvbFwiLCBJbnB1dFR5cGUuRGF0ZVRpbWVMb2NhbCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gRGF0ZVRpbWUuUGFyc2VFeGFjdChpbnB1dC5WYWx1ZSwgXCJ5eXl5LU1NLWRkVEhIOm1tXCIsIEN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1cmUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgMjUgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBEYXRlVGltZSBSZXN1bHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDsgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ0VtYWlsIDogSW5wdXREaWFsb2dCYXNlIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYW4gZW1haWwgaW5wdXRcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIEVudGVyZWQgZW1haWwgYWRkcmVzc1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nRW1haWwoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MCkge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGFuIGVtYWlsIGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIGVtYWlsXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+VGhlIHdpZHRoIG9mIHRoaXMgZGlhbG9nLiBUaGUgZGVmYXVsdCBzaXplIGlzIDM2MDwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nRW1haWwoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IElucHV0KFwiaW5wdXRjb250cm9sXCIsIElucHV0VHlwZS5FbWFpbCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy90b2RvIGNzcyBmb3IgZW1haWwgaW5wdXQgbm90IHNob3dpbmcgdXBcclxuICAgICAgICAgICAgICAgIC8vdG9kbyBjb3VsZCBhbHdheXMgdmFsaWRhdGUgZW1haWwgaGVyZVxyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gaW5wdXQuVmFsdWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyAyNSArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDsgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ1dlZWsgOiBJbnB1dERpYWxvZ0Jhc2Uge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIFdlZWsgaW5wdXRcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIEVudGVyZWQgd2Vla1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nV2VlayhzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBXZWVrIGlucHV0XHJcbiAgICAgICAgLy8vICAgICBUaGUgUmVzdWx0IFByb3BlcnR5IGNvbnRhaW5zIHRoZSBFbnRlcmVkIFdlZWtcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dXZWVrKHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uLCBpbnQgc2l6ZSkgOiBiYXNlKHRpdGxlLCBzaXplLCBxdWVzdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBJbnB1dChcImlucHV0Y29udHJvbFwiLCBJbnB1dFR5cGUuV2Vlayk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgUmVzdWx0ID0gaW5wdXQuVmFsdWU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEFuc3dlckRpdi5BcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIENyZWF0ZShRdWVzdGlvblNpemUgKyAyNSArIDI1ICsgNzgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZXN1bHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDsgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ01vbnRoIDogSW5wdXREaWFsb2dCYXNlIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vICAgICBDcmVhdGVzIGEgUXVlc3Rpb24gRGlhbG9nIHdpdGggYSBNb250aCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBNb250aFxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGluIHRoZSB0aXRsZSBiYXIgb2YgdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicXVlc3Rpb25cIj5UaGUgbWVzc2FnZSB0aGF0IHdpbGwgYXBwZWFyIGFib3V0IHRoZSBpbnB1dCBib3ggb24gdGhlIGRpYWxvZzwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nTW9udGgoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24pIDogdGhpcyh0aXRsZSwgcXVlc3Rpb24sIDM2MCkge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgTW9udGggaW5wdXRcclxuICAgICAgICAvLy8gICAgIFRoZSBSZXN1bHQgUHJvcGVydHkgY29udGFpbnMgdGhlIEVudGVyZWQgTW9udGhcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dNb250aChzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbiwgaW50IHNpemUpIDogYmFzZSh0aXRsZSwgc2l6ZSwgcXVlc3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLk1vbnRoKTtcclxuICAgICAgICAgICAgaW5wdXQuSWQgPSBcIkRpYWxvZ0Fuc3dlckJveFwiO1xyXG4gICAgICAgICAgICBpbnB1dC5TZXRCb3VuZHMoXCIxMHB4XCIsIFwiMHB4XCIsIFwiOTAlXCIsIFwiYXV0b1wiKTtcclxuICAgICAgICAgICAgaW5wdXQuT25DaGFuZ2UgPSBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICBSZXN1bHQgPSBpbnB1dC5WYWx1ZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDI1ICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlc3VsdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0OyBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGFzcyBJbnB1dERpYWxvZ051bWJlciA6IElucHV0RGlhbG9nQmFzZVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIE51bWJlciBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgdmFsdWVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBJbnB1dERpYWxvZ051bWJlcihzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbikgOiB0aGlzKHRpdGxlLCBxdWVzdGlvbiwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gICAgIENyZWF0ZXMgYSBRdWVzdGlvbiBEaWFsb2cgd2l0aCBhIE51bWJlciBTZWxlY3RvclxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgc2VsZWN0ZWQgdmFsdWVcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRpdGxlXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBpbiB0aGUgdGl0bGUgYmFyIG9mIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInF1ZXN0aW9uXCI+VGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGFwcGVhciBhYm91dCB0aGUgaW5wdXQgYm94IG9uIHRoZSBkaWFsb2c8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNpemVcIj5UaGUgd2lkdGggb2YgdGhpcyBkaWFsb2cuIFRoZSBkZWZhdWx0IHNpemUgaXMgMzYwPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dOdW1iZXIoc3RyaW5nIHRpdGxlLCBzdHJpbmcgcXVlc3Rpb24sIGludCBzaXplKSA6IGJhc2UodGl0bGUsIHNpemUsIHF1ZXN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gSW5wdXQoXCJpbnB1dGNvbnRyb2xcIiwgSW5wdXRUeXBlLk51bWJlcik7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4geyBSZXN1bHQgPSBpbnB1dC5WYWx1ZUFzTnVtYmVyOyB9O1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuQXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgICAgICBDcmVhdGUoUXVlc3Rpb25TaXplICsgMjUgKyAyNSArIDc4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgUmVzdWx0IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgSW5wdXREaWFsb2dUZXh0IDogSW5wdXREaWFsb2dCYXNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgVGV4dCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBUZXh0XHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgSW5wdXREaWFsb2dUZXh0KHN0cmluZyB0aXRsZSwgc3RyaW5nIHF1ZXN0aW9uKSA6IHRoaXModGl0bGUsIHF1ZXN0aW9uLCAzNjApXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyAgICAgQ3JlYXRlcyBhIFF1ZXN0aW9uIERpYWxvZyB3aXRoIGEgVGV4dCBpbnB1dFxyXG4gICAgICAgIC8vLyAgICAgVGhlIFJlc3VsdCBQcm9wZXJ0eSBjb250YWlucyB0aGUgRW50ZXJlZCBUZXh0XHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgaW4gdGhlIHRpdGxlIGJhciBvZiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJxdWVzdGlvblwiPlRoZSBtZXNzYWdlIHRoYXQgd2lsbCBhcHBlYXIgYWJvdXQgdGhlIGlucHV0IGJveCBvbiB0aGUgZGlhbG9nPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+VGhlIHdpZHRoIG9mIHRoaXMgZGlhbG9nLiBUaGUgZGVmYXVsdCBzaXplIGlzIDM2MDwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIElucHV0RGlhbG9nVGV4dChzdHJpbmcgdGl0bGUsIHN0cmluZyBxdWVzdGlvbiwgaW50IHNpemUpIDogYmFzZSh0aXRsZSwgc2l6ZSwgcXVlc3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBJbnB1dChcImlucHV0Y29udHJvbFwiLCBJbnB1dFR5cGUuVGV4dCk7XHJcbiAgICAgICAgICAgIGlucHV0LklkID0gXCJEaWFsb2dBbnN3ZXJCb3hcIjtcclxuICAgICAgICAgICAgaW5wdXQuU2V0Qm91bmRzKFwiMTBweFwiLCBcIjBweFwiLCBcIjkwJVwiLCBcImF1dG9cIik7XHJcbiAgICAgICAgICAgIGlucHV0Lk9uQ2hhbmdlID0gZXYgPT4geyBSZXN1bHQgPSBpbnB1dC5WYWx1ZTsgfTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LkFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICAgICAgQ3JlYXRlKFF1ZXN0aW9uU2l6ZSArIDI1ICsgMjUgKyA3OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlc3VsdCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNsYXNzIElucHV0RGlhbG9nQmFzZSA6IERpYWxvZ0Zvcm1cclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgSW5wdXREaWFsb2dCYXNlKHN0cmluZyB0aXRsZSwgaW50IHdpZHRoLCBzdHJpbmcgcXVlc3Rpb24pIDogYmFzZSh0aXRsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpZHRoID0gd2lkdGguVG9QeCgpO1xyXG4gICAgICAgICAgICBXcmFwcGVyID0gRGl2KCk7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2ID0gRGl2KCk7XHJcbiAgICAgICAgICAgIEFuc3dlckRpdiA9IERpdigpO1xyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvbiA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxTaW1wbGVEaWFsb2dCdXR0b24+KCksKF9vMSk9PntfbzEuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5PSykge1RleHQgPSBcIkFjY2VwdFwifSk7X28xLkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsKSB7VGV4dCA9IFwiQ2FuY2VsXCJ9KTtyZXR1cm4gX28xO30pO1xyXG5cclxuICAgICAgICAgICAgV3JhcHBlci5TdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5IaWRkZW47XHJcbiAgICAgICAgICAgIFdyYXBwZXIuU2V0Qm91bmRzKFwiMHB4XCIsIFwiMHB4XCIsIFwiMTAwJVwiLCBcIigxMDAlIC0gNjBweClcIik7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLlBvc2l0aW9uID0gUG9zaXRpb24uUmVsYXRpdmU7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLkhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBRdWVzdGlvbkRpdi5TdHlsZS5NYXJnaW5MZWZ0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLk1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uRGl2LlN0eWxlLk1hcmdpblRvcCA9IFwiMTBweFwiO1xyXG4gICAgICAgICAgICBBbnN3ZXJEaXYuU3R5bGUuUG9zaXRpb24gPSBQb3NpdGlvbi5SZWxhdGl2ZTtcclxuICAgICAgICAgICAgQW5zd2VyRGl2LlN0eWxlLkhlaWdodCA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvblswXS5TZXRMb2NhdGlvbihcIigxMDAlIC0gMTcwcHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKTtcclxuICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb25bMV0uU2V0TG9jYXRpb24oXCIoMTAwJSAtIDg1cHgpXCIsIFwiKDEwMCUgLSAzNXB4KVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YiA9IG5ldyBUZXh0QmxvY2socXVlc3Rpb24sIHdpZHRoIC0gMjUpO1xyXG4gICAgICAgICAgICB0Yi5Db21wdXRlU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRiLkVsZWxlbXRzT3Zlck1heClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2lkdGggPSAoaW50KSB0Yi5NYXhDYWxjdWxhdGVkV2lkdGggKyA2NSArIDM3O1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpZHRoIDwgU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4KVxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0Yi5Db21wdXRlZEhlaWdodCA+IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1heGltdW1IZWlnaHRJblB4KVxyXG4gICAgICAgICAgICAgICAgdGIuQ29tcHV0ZWRIZWlnaHQgPSBTZXR0aW5ncy5NZXNzYWdlRm9ybVRleHRNYXhpbXVtSGVpZ2h0SW5QeDtcclxuICAgICAgICAgICAgaWYgKHRiLkNvbXB1dGVkSGVpZ2h0IDwgU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWluaW11bUhlaWdodEluUHgpXHJcbiAgICAgICAgICAgICAgICB0Yi5Db21wdXRlZEhlaWdodCA9IFNldHRpbmdzLk1lc3NhZ2VGb3JtVGV4dE1pbmltdW1IZWlnaHRJblB4O1xyXG5cclxuICAgICAgICAgICAgUXVlc3Rpb25EaXYuSW5uZXJIVE1MID0gcXVlc3Rpb247XHJcbiAgICAgICAgICAgIFF1ZXN0aW9uU2l6ZSA9IENvbnZlcnQuVG9JbnQzMih0Yi5Db21wdXRlZEhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW50IFF1ZXN0aW9uU2l6ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHJpdmF0ZSBIVE1MRGl2RWxlbWVudCBXcmFwcGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHByb3RlY3RlZCBIVE1MRGl2RWxlbWVudCBRdWVzdGlvbkRpdiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEFuc3dlckRpdiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHJvdGVjdGVkIEhUTUxEaXZFbGVtZW50IEltYWdlRGl2IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQ3JlYXRlKGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBXcmFwcGVyLkFwcGVuZENoaWxkKFF1ZXN0aW9uRGl2KTtcclxuICAgICAgICAgICAgV3JhcHBlci5BcHBlbmRDaGlsZChuZXcgSFRNTEJSRWxlbWVudCgpKTtcclxuICAgICAgICAgICAgV3JhcHBlci5BcHBlbmRDaGlsZChBbnN3ZXJEaXYpO1xyXG4gICAgICAgICAgICBCb2R5LkFwcGVuZENoaWxkKFdyYXBwZXIpO1xyXG5cclxuICAgICAgICAgICAgQnV0dG9uU2VjdGlvbi5BcHBlbmRDaGlsZHJlblRhYkluZGV4KF9idXR0b25Db2xsZWN0aW9uLlRvQXJyYXkoKSk7XHJcblxyXG4gICAgICAgICAgICBIZWlnaHQgPSBoZWlnaHQuVG9QeCgpO1xyXG4gICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE1lc3NhZ2VCb3hGb3JtIDogRGlhbG9nRm9ybVxyXG5cdHsgICAgICAgIFx0XHRcclxuXHRcdHByaXZhdGUgc3RhdGljIEhUTUxBdWRpb0VsZW1lbnQgc25kID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0cmluZyBfcHJvbXB0O1xyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdm9pZCBCZWVwKClcclxuXHRcdHtcclxuXHRcdFx0aWYoIVNldHRpbmdzLk1lc3NhZ2VGb3JtQmVlcClcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGlmKHNuZCA9PSBudWxsKVxyXG5cdFx0XHRcdHNuZCA9IG5ldyBIVE1MQXVkaW9FbGVtZW50KFJlc291cmNlTWFuYWdlci5HZXRSZXNvdXJjZVN0cmluZyhcImJlZXBTb3VuZFwiKSk7XHJcblx0XHRcdHNuZC5QbGF5KCk7XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBNZXNzYWdlQm94QnV0dG9ucyBfYnV0dG9ucztcclxuICAgICAgICBcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENyZWF0ZSBhIG5ldyBNZXNzYWdlIERpYWxvZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvbXB0XCI+VGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidWlcIj5UaGUgVUkgc2V0dGluZ3MgdG8gYmUgYXBwbGllZCB0byB0aGUgZm9ybTwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VCb3hGb3JtKHN0cmluZyBwcm9tcHQsIE1lc3NhZ2VCb3hMYXlvdXQgdWkpIDogdGhpcyhwcm9tcHQsIHVpLCBNZXNzYWdlQm94QnV0dG9ucy5BdXRvLCB1aS5Ub1N0cmluZygpKSB7fVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENyZWF0ZSBhIG5ldyBNZXNzYWdlIERpYWxvZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvbXB0XCI+VGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidWlcIj5UaGUgVUkgc2V0dGluZ3MgdG8gYmUgYXBwbGllZCB0byB0aGUgZm9ybTwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGl0bGVcIj5UaGUgdGl0bGUgb2YgdGhlIG1lc3NhZ2UgYm94PC9wYXJhbT5cclxuICAgICAgICBwdWJsaWMgTWVzc2FnZUJveEZvcm0oc3RyaW5nIHByb21wdCwgTWVzc2FnZUJveExheW91dCB1aSwgc3RyaW5nIHRpdGxlKSA6IHRoaXMocHJvbXB0LCB1aSwgTWVzc2FnZUJveEJ1dHRvbnMuQXV0bywgdGl0bGUpIHt9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gQ3JlYXRlIGEgbmV3IE1lc3NhZ2UgRGlhbG9nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9tcHRcIj5UaGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIG1lc3NhZ2UgYm94PC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1aVwiPlRoZSBVSSBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvIHRoZSBmb3JtPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJidXR0b25zXCI+VGhlIFR5cGUgb2YgYnV0dG9uIHRvIGJlIGRpc3BsYXllZCB3aXRoIHRoaXMgbWVzc2FnZTwvcGFyYW0+XHJcbiAgICAgICAgcHVibGljIE1lc3NhZ2VCb3hGb3JtKHN0cmluZyBwcm9tcHQsIE1lc3NhZ2VCb3hMYXlvdXQgdWksIE1lc3NhZ2VCb3hCdXR0b25zIGJ1dHRvbnMpIDogdGhpcyhwcm9tcHQsIHVpLCBidXR0b25zLCB1aS5Ub1N0cmluZygpKSB7fVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIENyZWF0ZSBhIG5ldyBNZXNzYWdlIERpYWxvZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicHJvbXB0XCI+VGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIGluIHRoZSBtZXNzYWdlIGJveDwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidWlcIj5UaGUgVUkgc2V0dGluZ3MgIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGZvcm08L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImJ1dHRvbnNcIj5UaGUgVHlwZSBvZiBidXR0b24gdG8gYmUgZGlzcGxheWVkIHdpdGggdGhpcyBtZXNzYWdlPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0aXRsZVwiPlRoZSB0aXRsZSBvZiB0aGUgbWVzc2FnZSBib3g8L3BhcmFtPlxyXG4gICAgICAgIHB1YmxpYyBNZXNzYWdlQm94Rm9ybShzdHJpbmcgcHJvbXB0LCBNZXNzYWdlQm94TGF5b3V0IHVpLCBNZXNzYWdlQm94QnV0dG9ucyBidXR0b25zLCBzdHJpbmcgdGl0bGUpIDogYmFzZSh0aXRsZSkgeyAgICAgICAgICAgIFx0XHRcclxuICAgICAgICAgICAgdmFyIHNlY3Rpb24gPSBEaXYoKTtcclxuXHRcdFx0dmFyIHBpYyA9IERpdihcImltYWdlMzJcIik7XHJcblx0XHRcdHZhciB0ZXh0Q29udGVudCA9IERpdihcIm1lc3NhZy1ib3gtY29udGVudFwiKTtcclxuICAgICAgICAgICAgX3Byb21wdCA9IHByb21wdDtcclxuICAgICAgICAgICAgX2J1dHRvbnMgPSBidXR0b25zO1xyXG5cdFx0XHRcclxuXHRcdFx0c3dpdGNoKCB1aSApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUJveExheW91dC5FeGNsYW1hdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICBpZihfYnV0dG9ucyA9PSBNZXNzYWdlQm94QnV0dG9ucy5BdXRvICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnV0dG9ucyA9IE1lc3NhZ2VCb3hCdXR0b25zLk9rO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdHBpYy5DbGFzc0xpc3QuQWRkKFwiaW1hZ2V3YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94TGF5b3V0LkluZm9ybWF0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9idXR0b25zID09IE1lc3NhZ2VCb3hCdXR0b25zLkF1dG8gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9idXR0b25zID0gTWVzc2FnZUJveEJ1dHRvbnMuT2s7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFx0cGljLkNsYXNzTGlzdC5BZGQoXCJpbWFnZWluZm9cIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUJveExheW91dC5RdWVzdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICBpZihfYnV0dG9ucyA9PSBNZXNzYWdlQm94QnV0dG9ucy5BdXRvICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnV0dG9ucyA9IE1lc3NhZ2VCb3hCdXR0b25zLlllc05vO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdHBpYy5DbGFzc0xpc3QuQWRkKFwiaW1hZ2VpbmRleFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94TGF5b3V0LkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9idXR0b25zID09IE1lc3NhZ2VCb3hCdXR0b25zLkF1dG8gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9idXR0b25zID0gTWVzc2FnZUJveEJ1dHRvbnMuQWJvcnRTZW5kQ2FuY2VsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdHBpYy5DbGFzc0xpc3QuQWRkKFwiaW1hZ2VlcnJvclwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKFwidWlcIiwgdWksIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0cmluZyBoZWlnaHRDYWxjID0gSGVscGVyLk5vdERlc2t0b3AgPyBcIigxMDAlIC0gNjBweClcIiA6IFwiKDEwMCUgLSAzNXB4KVwiO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9idXR0b25zKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1lc3NhZ2VCb3hCdXR0b25zLk9rOlxyXG4gICAgICAgICAgICAgICAgICAgIF9idXR0b25Db2xsZWN0aW9uID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX280KT0+e19vNC5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLk9LKSB7IFRleHQgPSBcIk9rXCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoNTAlIC0gMzcuNXB4KVwiLCBoZWlnaHRDYWxjKX0pO3JldHVybiBfbzQ7fSk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUJveEJ1dHRvbnMuWWVzTm86XHJcbiAgICAgICAgICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb24gPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8U2ltcGxlRGlhbG9nQnV0dG9uPigpLChfbzUpPT57X281LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uTm8pIHsgVGV4dCA9IFwiTm9cIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgaGVpZ2h0Q2FsYyl9KTtfbzUuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5ZZXMpIHsgVGV4dCA9IFwiWWVzXCIsIExvY2F0aW9uID0gbmV3IFZlY3RvcjIoXCIoMTAwJSAtIDE3MHB4KVwiLCBoZWlnaHRDYWxjKX0pO3JldHVybiBfbzU7fSk7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTWVzc2FnZUJveEJ1dHRvbnMuWWVzTm9DYW5jZWw6XHJcbiAgICAgICAgICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb24gPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8U2ltcGxlRGlhbG9nQnV0dG9uPigpLChfbzYpPT57X282LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsKSB7IFRleHQgPSBcIkNhbmNlbFwiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSA4NXB4KVwiLCBoZWlnaHRDYWxjKSB9KTtfbzYuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5ObykgeyBUZXh0ID0gXCJOb1wiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAxNzBweClcIiwgaGVpZ2h0Q2FsYykgfSk7X282LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uWWVzKSB7IFRleHQgPSBcIlllc1wiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAyNTVweClcIiwgaGVpZ2h0Q2FsYykgfSk7cmV0dXJuIF9vNjt9KTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXNzYWdlQm94QnV0dG9ucy5BYm9ydFNlbmRDYW5jZWw6XHJcbiAgICAgICAgICAgICAgICAgICAgX2J1dHRvbkNvbGxlY3Rpb24gPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8U2ltcGxlRGlhbG9nQnV0dG9uPigpLChfbzcpPT57X283LkFkZChuZXcgU2ltcGxlRGlhbG9nQnV0dG9uKHRoaXMsIERpYWxvZ1Jlc3VsdEVudW0uQ2FuY2VsKSB7IFRleHQgPSBcIkNhbmNlbFwiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSA4NXB4KVwiLCBoZWlnaHRDYWxjKX0pO19vNy5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLlNlbmQpIHsgVGV4dCA9IFwiU2VuZFwiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAxNzBweClcIiwgaGVpZ2h0Q2FsYyksIEl0ZW1DbGljayA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoU2V0dGluZ3MuT25TZW5kRXJyb3IgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXR0aW5ncy5PblNlbmRFcnJvcihfcHJvbXB0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtfbzcuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5BYm9ydCkgeyBUZXh0ID0gXCJBYm9ydFwiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAyNTVweClcIiwgaGVpZ2h0Q2FsYyksIEl0ZW1DbGljayA9IChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBwcmUgPVNldHRpbmdzLkFsbG93Q2xvc2VXaXRob3V0UXVlc3Rpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2V0dGluZ3MuQWxsb3dDbG9zZVdpdGhvdXRRdWVzdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb24uQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzLkFsbG93Q2xvc2VXaXRob3V0UXVlc3Rpb24gPSBwcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19KTtyZXR1cm4gX283O30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVGV4dEJsb2NrIHRiID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGludCB3aWR0aCA9IDQ4MDtcclxuXHRcdFx0XHJcbiAgICAgICAgICAgIGlmKCFIZWxwZXIuTm90RGVza3RvcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGIgPSBuZXcgVGV4dEJsb2NrKHByb21wdCwgNDgwIC0gMjUpO1xyXG4gICAgICAgICAgICAgICAgdGIuQ29tcHV0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYoX2J1dHRvbkNvbGxlY3Rpb24uQ291bnQgPiAyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgMzIwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDMyMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCF0Yi5FbGVsZW10c092ZXJNYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSAoaW50KXRiLk1heENhbGN1bGF0ZWRXaWR0aCArIDY1ICsgMzc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYod2lkdGggPCBTZXR0aW5ncy5NZXNzYWdlRm9ybU1pbmltdW1XaWR0aEluUHgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1NaW5pbXVtV2lkdGhJblB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gX2J1dHRvbkNvbGxlY3Rpb24uQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnV0ID0gX2J1dHRvbkNvbGxlY3Rpb25baV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0LkhlaWdodCA9IDQ1O1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Cb3JkZXJSYWRpdXMgPSBcIjRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJ1dC5EaWFsb2dSZXN1bHQgPT1EaWFsb2dSZXN1bHRFbnVtLk9LIHx8IGJ1dC5EaWFsb2dSZXN1bHQgPT0gRGlhbG9nUmVzdWx0RW51bS5ZZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXQuQ2xhc3NMaXN0LkFkZChcInByaW1hcnlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dC5TdHlsZS5Db2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0LlN0eWxlLkJvcmRlciA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHRcdFx0dGV4dENvbnRlbnQuSW5uZXJIVE1MID0gIHByb21wdDtcclxuICAgICAgICAgICAgXHJcblx0XHRcdHNlY3Rpb24uU3R5bGUuT3ZlcmZsb3dZID0gT3ZlcmZsb3cuQXV0bztcdFx0XHJcbiAgICAgICAgICAgIHNlY3Rpb24uU3R5bGUuSGVpZ2h0ID0gXCIxMDAlXCI7XHJcblx0XHRcdHNlY3Rpb24uU3R5bGUuTWF4SGVpZ2h0ID0gU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWF4aW11bUhlaWdodEluUHguVG9QeCgpO1xyXG4gICAgICAgICAgICBzZWN0aW9uLkFwcGVuZENoaWxkKHRleHRDb250ZW50KTtcclxuXHRcdFx0c2VjdGlvbi5TdHlsZS5Ub3AgPSBcIjMycHhcIjtcclxuXHRcdFx0c2VjdGlvbi5TdHlsZS5XaWR0aCA9IFwiOTAlXCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBiYXNlLkJvZHkuQXBwZW5kQ2hpbGRyZW4ocGljLCBzZWN0aW9uKTtcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHRCdXR0b25TZWN0aW9uLkFwcGVuZENoaWxkcmVuVGFiSW5kZXgoX2J1dHRvbkNvbGxlY3Rpb24uVG9BcnJheSgpKTtcclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24uU3R5bGUuVGV4dEFsaWduID0gVGV4dEFsaWduLkNlbnRlcjtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24uU3R5bGUuTGluZUhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIFdpbmRvd1N0YXRlID0gV2luZG93U3RhdGVUeXBlLk1heGltaXplZDtcclxuICAgICAgICAgICAgICAgIEhlYWRpbmcuU3R5bGUuRGlzcGxheSA9IERpc3BsYXkuTm9uZTtcclxuICAgICAgICAgICAgICAgIEJvZHkuU2V0TG9jYXRpb24oMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBCb2R5LlNldFNpemUoXCIxMDAlXCIsIFwiMTAwJVwiKTtcclxuICAgICAgICAgICAgICAgIFN0YXJ0UG9zaXRpb24gPSBGb3JtU3RhcnRQb3NpdGlvbi5NYW51YWw7XHJcbiAgICAgICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEFsbG93TW92ZUNoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIFNob3dNYXhpbWl6ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgU2hvd01pbmltaXplID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBTaG93Q2xvc2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudC5TdHlsZS5EaXNwbGF5ID0gRGlzcGxheS5JbmxpbmVCbG9jaztcclxuICAgICAgICAgICAgICAgIHRleHRDb250ZW50LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudC5TdHlsZS5WZXJ0aWNhbEFsaWduID0gVmVydGljYWxBbGlnbi5NaWRkbGU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudC5TdHlsZS5MaW5lSGVpZ2h0ID0gXCJub3JtYWxcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHRiLkNvbXB1dGVkSGVpZ2h0ID4gU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWF4aW11bUhlaWdodEluUHgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGIuQ29tcHV0ZWRIZWlnaHQgPSBTZXR0aW5ncy5NZXNzYWdlRm9ybVRleHRNYXhpbXVtSGVpZ2h0SW5QeDtcclxuICAgICAgICAgICAgICAgIGlmKHRiLkNvbXB1dGVkSGVpZ2h0IDwgU2V0dGluZ3MuTWVzc2FnZUZvcm1UZXh0TWluaW11bUhlaWdodEluUHgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGIuQ29tcHV0ZWRIZWlnaHQgPSBTZXR0aW5ncy5NZXNzYWdlRm9ybVRleHRNaW5pbXVtSGVpZ2h0SW5QeDtcclxuXHJcbiAgICAgICAgICAgICAgICBiYXNlLkhlaWdodCA9IHRiLkNvbXB1dGVkSGVpZ2h0ICsgNzcgKyAyOSArIDMyICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgYmFzZS5XaWR0aCA9IHdpZHRoLlRvUHgoKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRcclxuXHRcdFx0YmFzZS5BbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpIHtcclxuXHRcdFx0QmVlcCgpO1xyXG5cclxuXHRcdFx0YmFzZS5PblNob3dlZCgpO1xyXG4gICAgICAgICAgICBfYnV0dG9uQ29sbGVjdGlvblswXS5Db250ZW50LkZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIE1lc3NhZ2VCb3hMYXlvdXRcclxuICAgIHtcclxuICAgICAgICBJbmZvcm1hdGlvbixcclxuICAgICAgICBFeGNsYW1hdGlvbixcclxuICAgICAgICBRdWVzdGlvbixcclxuICAgICAgICBFcnJvclxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbnVtIE1lc3NhZ2VCb3hCdXR0b25zXHJcbiAgICB7XHJcbiAgICAgICAgQXV0byxcclxuICAgICAgICBPayxcclxuICAgICAgICBZZXNObyxcclxuICAgICAgICBZZXNOb0NhbmNlbCxcclxuICAgICAgICBBYm9ydFNlbmRDYW5jZWxcclxuICAgIH0gICAgXHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgRXhwcmVzc0NyYWZ0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBOdW1iZXJJbnB1dCA6IFRleHRJbnB1dERyb3BEb3duXHJcbiAgICB7ICAgICAgICBcclxuICAgICAgICBwdWJsaWMgTnVtYmVySW5wdXQoKSA6IGJhc2UoSW5wdXRUeXBlLk51bWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFVzZWRFZGl0LlNldEF0dHJpYnV0ZShcInN0ZXBcIiwgXCJhbnlcIik7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkRyb3BEb3duQ2xpY2tlZChNb3VzZUV2ZW50IG1vdXNlRXZlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighUmVhZG9ubHkgJiYgRW5hYmxlZClcclxuICAgICAgICAgICAgICAgIChuZXcgQ2FsY0Zvcm0odGhpcy5Vc2VkRWRpdCkpLlxyXG4gICAgICAgICAgICAgICAgU2hvd1BvcHVwKEZvcm1Qb3B1cC5cclxuICAgICAgICAgICAgICAgICAgICBHZXRQb3B1cERlZmF1bHRMb2NhdGlvbihEcm9wRG93bkJ1dHRvbiwgdHJ1ZSkpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCcmlkZ2UuSHRtbDU7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNlYXJjaElucHV0IDogVGV4dElucHV0RHJvcERvd25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb2JqZWN0IEVkaXRWYWx1ZSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBEaXNwbGF5TWVtYmVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFZhbHVlTWVtYmVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBTZWFyY2hJbnB1dCgpIDogYmFzZShJbnB1dFR5cGUuVGV4dClcclxuICAgICAgICB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFVzZWRFZGl0Lk9uS2V5RG93biA9IChvYmosIGV2KSA9PlxyXG4gICAgICAgICAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihldi5LZXlDb2RlID09IDEzIHx8IGV2LktleUNvZGUgPT0gNDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgT25Ecm9wRG93bkNsaWNrZWQobmV3IE1vdXNlRXZlbnQoXCJvbm1vdXNlZG93blwiKSk7XHJcbiAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBVc2VkRWRpdC5Db250ZW50Lk9uTW91c2VEb3duID0gKGV2KSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBPbkRyb3BEb3duQ2xpY2tlZChuZXcgTW91c2VFdmVudChcIm9ubW91c2Vkb3duXCIpKTtcclxuICAgICAgICAgICAgfTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBBY3Rpb248c3RyaW5nLCBHcmlkVmlldz4gT25TZWFyY2g7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGJvb2wgQ2xlYXJPbk9wZW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBPblJlcXVlc3RTZWFyY2goc3RyaW5nIHNlYXJjaFZhbHVlLCBHcmlkVmlldyBncmlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoT25TZWFyY2ggIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE9uU2VhcmNoKHNlYXJjaFZhbHVlLCBncmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIGJvb2wgU2VhcmNoT25Mb2FkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25BY2NlcHRSZXN1bHQoRGF0YVJvdyB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEVkaXRWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBUZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKFZhbHVlTWVtYmVyICE9IFwiXCIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRWRpdFZhbHVlID0gdmFsdWUuR2V0VmFsdWUoVmFsdWVNZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoRGlzcGxheU1lbWJlciAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSAodmFsdWUuR2V0VmFsdWUoRGlzcGxheU1lbWJlcikgKyBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25SZXF1ZXN0TmV3KEdyaWRWaWV3IGdyaWQpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgT25DbG9zZWQoRGF0YVJvdyB2YWx1ZSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25Ecm9wRG93bkNsaWNrZWQoTW91c2VFdmVudCBtb3VzZUV2ZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoIVJlYWRvbmx5ICYmIEVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAobmV3IFNlYXJjaExvb2t1cEZvcm0odGhpcykpLlxyXG4gICAgICAgICAgICAgICAgU2hvd1BvcHVwKEZvcm1Qb3B1cC5cclxuICAgICAgICAgICAgICAgICAgICBHZXRQb3B1cERlZmF1bHRMb2NhdGlvbihEcm9wRG93bkJ1dHRvbiwgdHJ1ZSkpO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2VhcmNoTG9va3VwRm9ybSA6IEZvcm1Qb3B1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBTZWFyY2hJbnB1dCBTZWFyY2hJbnB1dDtcclxuICAgICAgICBwdWJsaWMgRGF0YVJvdyBGb2N1c2VkUm93O1xyXG4gICAgICAgIHB1YmxpYyBHcmlkVmlldyBWaWV3O1xyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dElucHV0IFNlYXJjaEVkaXQ7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5TZWFyY2g7XHJcbiAgICAgICAgcHVibGljIFNpbXBsZUJ1dHRvbiBidG5DbG9zZTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bk5ldztcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0blVzZTtcclxuICAgICAgICBwdWJsaWMgU2ltcGxlQnV0dG9uIGJ0bkNsZWFyO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2VkKCk7XHJcblxyXG4gICAgICAgICAgICBTZWFyY2hFZGl0LkZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICBpZihTZWFyY2hJbnB1dC5TZWFyY2hPbkxvYWQoKSlcclxuICAgICAgICAgICAgICAgIGJ0blNlYXJjaC5Db250ZW50LkNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU2VhcmNoTG9va3VwRm9ybShTZWFyY2hJbnB1dCBzZWFyY2hJbnB1dCkgOiBiYXNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHNlYXJjaElucHV0LkNvbnRlbnQuUGFyZW50RWxlbWVudCAhPSBudWxsICYmIHNlYXJjaElucHV0LkNvbnRlbnQuUGFyZW50RWxlbWVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFByZXZpb3VzU2Nyb2xsVG9wID0gc2VhcmNoSW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQuU2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgUGFyZW50Q29udGFpbmVyID0gc2VhcmNoSW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHggPSBzZWFyY2hJbnB1dC5Db250ZW50LkdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgTWluSGVpZ2h0ID0gMTAwO1xyXG4gICAgICAgICAgICBNaW5XaWR0aCA9IDE1MDtcclxuXHJcbiAgICAgICAgICAgIHZhciB3aWQgPSBzZWFyY2hJbnB1dC5HZXREcm9wZG93bldpZHRoKCk7XHJcbiAgICAgICAgICAgIGlmKHdpZCA8IDE1MClcclxuICAgICAgICAgICAgICAgIHdpZCA9IDE1MDtcclxuXHJcbiAgICAgICAgICAgIFNpemUgPSBuZXcgVmVjdG9yMih3aWQsIDI1MCk7XHJcblxyXG4gICAgICAgICAgICBBbGxvd1NpemVDaGFuZ2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgU2VhcmNoSW5wdXQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBmcmFnID0gRG9jdW1lbnQuQ3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgZnJhZy5BcHBlbmRDaGlsZHJlbihcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQgPSBuZXcgVGV4dElucHV0KCkgeyBUZXh0ID0gc2VhcmNoSW5wdXQuQ2xlYXJPbk9wZW4oKSA/IFwiXCIgOiAgU2VhcmNoSW5wdXQuVGV4dCwgT25Gb2N1c0RvbnRTZWxlY3RBbGwgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIERpc2FibGVGb2N1c1BvcHVwID0gdHJ1ZSwgQm91bmRzID0gbmV3IFZlY3RvcjQoNCwgNCwgXCIoMTAwJSAtIDY4cHgpXCIsIDIwKSwgVG9vbFRpcCA9IG5ldyBUb29sVGlwKFwiSGVscDpcIiwgXCJbRW50ZXJdIHRvIFNlYXJjaCwgW0NUUkxdICsgW0VudGVyXSB0byBTZWFyY2ggYW5kIFVzZSwgW0VTQ10gdG8gY2xvc2VcIilcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBidG5TZWFyY2ggPSBuZXcgU2ltcGxlQnV0dG9uKCkgeyBUZXh0ID0gXCJTZWFyY2hcIixcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNChcIigxMDAlIC0gNjVweClcIiwgNCwgNjEsIDIwKSwgSXRlbUNsaWNrID0gKHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoSW5wdXQuT25SZXF1ZXN0U2VhcmNoKFNlYXJjaEVkaXQuVGV4dCwgVmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICAgICAgVmlldyA9ICBuZXcgR3JpZFZpZXcodHJ1ZSwgdHJ1ZSkgeyBBbGxvd011bHRpU2VsZWN0aW9uID0gZmFsc2UsIFVzZUVkaXRGb3JtID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgQm91bmRzID0gbmV3IFZlY3RvcjQoNCwgMjgsIFwiKDEwMCUgLSAxMHB4KVwiLCBcIigxMDAlIC0gNjBweClcIikgfSxcclxuICAgICAgICAgICAgICAgIGJ0bkNsb3NlID0gbmV3IFNpbXBsZUJ1dHRvbigpIHsgVGV4dCA9IFwiJnRpbWVzO1wiICxcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNCg0LCBcIigxMDAlIC0gMjVweClcIiwgMjAsIDIwKSwgSXRlbUNsaWNrID0gKHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgICAgICBidG5OZXcgPSBuZXcgU2ltcGxlQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBUZXh0ID0gXCJOZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNChcIigxMDAlIC0gNjVweClcIiwgXCIoMTAwJSAtIDI1cHgpXCIsIDYxLCAyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoSW5wdXQuT25SZXF1ZXN0TmV3KFZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGJ0blVzZSA9IG5ldyBTaW1wbGVCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFRleHQgPSBcIlVzZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEJvdW5kcyA9IG5ldyBWZWN0b3I0KFwiKDEwMCUgLSAxMzJweClcIiwgXCIoMTAwJSAtIDI1cHgpXCIsIDYxLCAyMCksXHJcbiAgICAgICAgICAgICAgICAgICAgSXRlbUNsaWNrID0gKHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSA9PSAtMSAmJiBWaWV3LlJvd0NvdW50KCkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3LkZvY3VzZWREYXRhSGFuZGxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihGb2N1c2VkUm93ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQWNjZXB0UmVzdWx0KEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJ0bkNsZWFyID0gbmV3IFNpbXBsZUJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVGV4dCA9IFwiQ2xlYXJcIixcclxuICAgICAgICAgICAgICAgICAgICBCb3VuZHMgPSBuZXcgVmVjdG9yNChcIigxMDAlIC0gMTk5cHgpXCIsIFwiKDEwMCUgLSAyNXB4KVwiLCA2MSwgMjApLFxyXG4gICAgICAgICAgICAgICAgICAgIEl0ZW1DbGljayA9IChzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2hJbnB1dC5PbkFjY2VwdFJlc3VsdChGb2N1c2VkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuQ29sb3IgPSBcInJlZFwiO1xyXG5cclxuICAgICAgICAgICAgaWYoSGVscGVyLk5vdERlc2t0b3ApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQuSGVpZ2h0ID0gXCI0NXB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuU2VhcmNoLlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcbiAgICAgICAgICAgICAgICBidG5TZWFyY2guSGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFZpZXcuVG9wID0gNTU7XHJcbiAgICAgICAgICAgICAgICBWaWV3LkhlaWdodCA9IFwiKDEwMCUgLSAxMTJweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBidG5DbGVhci5TdHlsZS5Gb250U2l6ZSA9IFwiMTRweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xlYXIuSGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgICAgICAgICBidG5DbGVhci5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBidG5Vc2UuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ0blVzZS5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0blVzZS5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBidG5OZXcuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIGJ0bk5ldy5IZWlnaHQgPSA0NTtcclxuICAgICAgICAgICAgICAgIGJ0bk5ldy5Ub3AgPSBcIigxMDAlIC0gNTFweClcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5TdHlsZS5Gb250U2l6ZSA9IFwiMjZweFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xvc2UuU3R5bGUuRm9udFdlaWdodCA9IFwiYm9sZFwiO1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xvc2UuSGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgICAgICAgICBidG5DbG9zZS5XaWR0aCA9IDYxO1xyXG4gICAgICAgICAgICAgICAgYnRuQ2xvc2UuVG9wID0gXCIoMTAwJSAtIDUxcHgpXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFNlYXJjaEVkaXQuT25LZXlEb3duID0gKG9iaiwgZXYpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKGV2LktleUNvZGUgPT0gOSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBDbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihldi5LZXlDb2RlID09IDEzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uUmVxdWVzdFNlYXJjaChTZWFyY2hFZGl0LlRleHQsIFZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGV2LkN0cmxLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5Vc2UuQ29udGVudC5DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihldi5LZXlDb2RlID09IDI3KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBldi5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgVmlldy5PbkZvY3VzZWRSb3dDaGFuZ2VkID0gKHJvdywgY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihWaWV3LkZvY3VzZWREYXRhSGFuZGxlID4gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRm9jdXNlZFJvdyA9IFZpZXcuRGF0YVNvdXJjZVtWaWV3LkdldERhdGFTb3VyY2VSb3coVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSldO1xyXG4gICAgICAgICAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQWNjZXB0UmVzdWx0KEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgVmlldy5PblJvd0RvdWJsZUNsaWNrID0gKHJvdykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoVmlldy5Gb2N1c2VkRGF0YUhhbmRsZSA+IC0xKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEZvY3VzZWRSb3cgPSBWaWV3LkRhdGFTb3VyY2VbVmlldy5HZXREYXRhU291cmNlUm93KFZpZXcuRm9jdXNlZERhdGFIYW5kbGUpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGb2N1c2VkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNlYXJjaElucHV0Lk9uQWNjZXB0UmVzdWx0KEZvY3VzZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuQm9keS5BcHBlbmRDaGlsZChmcmFnKTtcclxuXHJcbiAgICAgICAgICAgIFNlYXJjaEVkaXQuT25Hb3RGb2N1cyA9IChvYmopID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFNlYXJjaEVkaXQuR2V0SW5wdXQoKS5TZWxlY3Rpb25TdGFydCA9IFNlYXJjaEVkaXQuVGV4dC5MZW5ndGg7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBMaW5rY2hpbGRUb0Zvcm0oVmlldyk7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkNsb3NlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLk9uQ2xvc2VkKCk7XHJcblxyXG4gICAgICAgICAgICBTZWFyY2hJbnB1dC5PbkNsb3NlZChGb2N1c2VkUm93KTtcclxuICAgICAgICAgICAgaWYoIUhlbHBlci5Ob3REZXNrdG9wKVxyXG4gICAgICAgICAgICAgICAgU2VhcmNoSW5wdXQuR2V0SW5wdXQoKS5Gb2N1cygpO2Vsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgU2VhcmNoSW5wdXQuU2Nyb2xsKFByZXZpb3VzU2Nyb2xsVG9wLCBQYXJlbnRDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgQnJpZGdlLmpRdWVyeTI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBFeHByZXNzQ3JhZnRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRleHRGb3JtIDogRm9ybVBvcHVwXHJcbiAgICB7XHJcbiAgICAgICAgVGV4dElucHV0IFJlYWRJbnB1dDtcclxuICAgICAgICBUZXh0SW5wdXQgRWRpdElucHV0O1xyXG4gICAgICAgIFNpbXBsZUJ1dHRvbiBidG5Eb25lO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblNob3dlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlLk9uU2hvd2VkKCk7XHJcblxyXG4gICAgICAgICAgICBzdHJpbmcgZGF0YVAgPSBSZWFkSW5wdXQuR2V0QXR0cmlidXRlKFwiZGF0YS1wbGFjZWhvbGRlclwiKTtcclxuICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGF0YVApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQuU2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgZGF0YVApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoUmVhZElucHV0LkdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpKSlcclxuICAgICAgICAgICAgICAgICAgICBFZGl0SW5wdXQuU2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgUmVhZElucHV0LkdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRWRpdElucHV0LkZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGV4dEZvcm0oVGV4dElucHV0IGlucHV0KSA6IGJhc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoaW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50ICE9IG51bGwgJiYgaW5wdXQuQ29udGVudC5QYXJlbnRFbGVtZW50LlBhcmVudEVsZW1lbnQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUHJldmlvdXNTY3JvbGxUb3AgPSBpbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudC5TY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBQYXJlbnRDb250YWluZXIgPSBpbnB1dC5Db250ZW50LlBhcmVudEVsZW1lbnQuUGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgV2luZG93U3RhdGUgPSBXaW5kb3dTdGF0ZVR5cGUuTWF4aW1pemVkO1xyXG5cclxuICAgICAgICAgICAgUmVhZElucHV0ID0gaW5wdXQ7XHJcblxyXG4gICAgICAgICAgICBpZihSZWFkSW5wdXQgaXMgTWVtb0lucHV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQgPSBuZXcgTWVtb0lucHV0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQgPSBuZXcgVGV4dElucHV0KGlucHV0LlR5cGUpIHsgRGlzcGxheUZvcm1hdCA9IFJlYWRJbnB1dC5EaXNwbGF5Rm9ybWF0IH07XHJcbiAgICAgICAgICAgICAgICBFZGl0SW5wdXQuT25LZXlEb3duID0gKHMsIGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXYuS2V5Q29kZSA9PSAxMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuQ29udGVudC5DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEVkaXRJbnB1dC5UZXh0ID0gaW5wdXQuVGV4dDtcclxuICAgICAgICAgICAgRWRpdElucHV0LlN0eWxlLkZvbnRTaXplID0gXCIxNHB4XCI7XHJcblxyXG4gICAgICAgICAgICBFZGl0SW5wdXQuRGlzYWJsZUZvY3VzUG9wdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBFZGl0SW5wdXQuU2l6ZSA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAxMTJweClcIiwgXCIxMDAlXCIpO1xyXG4gICAgICAgICAgICBFZGl0SW5wdXQuTG9jYXRpb24gPSBuZXcgVmVjdG9yMigwLCAwKTtcclxuXHJcbiAgICAgICAgICAgIGJ0bkRvbmUgPSBuZXcgU2ltcGxlQnV0dG9uKCkge1xyXG4gICAgICAgICAgICAgICAgVGV4dCA9IFwiJnRpbWVzO1wiLCBCb3VuZHMgPSBuZXcgVmVjdG9yNChcIigxMDAlIC0gMTA2cHgpXCIsIFwiKDUwJSAtIDIyLjVweClcIiwgMTAwLCA0NSksXHJcbiAgICAgICAgICAgICAgICBJdGVtQ2xpY2sgPSAoc2VuZGVyKSA9PiB7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoRWRpdElucHV0LkdldEVkaXRWYWx1ZSgpICE9IFJlYWRJbnB1dC5HZXRFZGl0VmFsdWUoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWRJbnB1dC5UZXh0ID0gRWRpdElucHV0LlRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihSZWFkSW5wdXQuSXNTdWJtaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWMgZSA9IGpRdWVyeS5FdmVudChcImtleXByZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS53aGljaCA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMTM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFJlYWRJbnB1dC5Db250ZW50KS5UcmlnZ2VyKChqUXVlcnlFdmVudCllKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKFJlYWRJbnB1dC5Hb05leHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gRG9jdW1lbnQuUXVlcnlTZWxlY3RvckFsbChcImlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHRhYlBsdXMxID0gUmVhZElucHV0LkNvbnRlbnQuVGFiSW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IHguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeFtpXS5BczxIVE1MRWxlbWVudD4oKS5UYWJJbmRleCA9PSB0YWJQbHVzMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhbaV0uQXM8SFRNTEVsZW1lbnQ+KCkuRm9jdXNFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuQm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcclxuICAgICAgICAgICAgYnRuRG9uZS5DbGFzc0xpc3QuQWRkKFwicHJpbWFyeVwiKTtcclxuICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Cb3JkZXJXaWR0aCA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgYnRuRG9uZS5UZXh0ID0gXCImdGltZXM7XCI7XHJcbiAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFNpemUgPSBcIjI2cHhcIjtcclxuICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Db2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcblxyXG4gICAgICAgICAgICBFZGl0SW5wdXQuT25UZXh0Q2hhbmdlZCA9IChzZW5kZXIpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKEVkaXRJbnB1dC5HZXRFZGl0VmFsdWUoKSA9PSBSZWFkSW5wdXQuR2V0RWRpdFZhbHVlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRG9uZS5UZXh0ID0gXCImdGltZXM7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Gb250U2l6ZSA9IFwiMjZweFwiOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRG9uZS5TdHlsZS5Gb250V2VpZ2h0ID0gXCJib2xkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRG9uZS5UZXh0ID0gUmVhZElucHV0LklzU3VibWl0ID8gXCJTdWJtaXRcIiA6IFJlYWRJbnB1dC5Hb05leHQgPyBcIk5leHRcIiA6IFwiRG9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFNpemUgPSBcIjE0cHhcIjsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bkRvbmUuU3R5bGUuRm9udFdlaWdodCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBBcHBlbmRDaGlsZHJlbihFZGl0SW5wdXQsIGJ0bkRvbmUpOyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25DbG9zZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUmVhZElucHV0LlNjcm9sbChQcmV2aW91c1Njcm9sbFRvcCwgUGFyZW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgYmFzZS5PbkNsb3NlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEJyaWRnZS5IdG1sNTtcclxudXNpbmcgTmV3dG9uc29mdC5Kc29uO1xyXG5cclxubmFtZXNwYWNlIEV4cHJlc3NDcmFmdFxyXG57XHJcblx0cHVibGljIGNsYXNzIFRoZW1lRm9ybSA6IERpYWxvZ0Zvcm1cclxuXHR7XHJcblx0XHRUaGVtZSBjdXJyZW50VGhlbWU7XHJcblx0XHRUaGVtZSBwcmV2VGhlbWU7XHJcblxyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgYm9vbCBfdGhlbWVWaXNpYmxlO1xyXG5cdFx0cHJpdmF0ZSBzdGF0aWMgVGhlbWVGb3JtIHRoZW1lRm9ybSA9IG51bGw7XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyB2b2lkIFNob3dUaGVtZUZvcm0oKVxyXG5cdFx0e1xyXG5cdFx0XHRpZighX3RoZW1lVmlzaWJsZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoZW1lRm9ybSA9IG5ldyBUaGVtZUZvcm0oKTtcclxuXHRcdFx0XHR0aGVtZUZvcm0uU2hvdyh0cnVlKTtcclxuXHJcblx0XHRcdFx0X3RoZW1lVmlzaWJsZSA9IHRydWU7XHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQ2xvc2VkKClcclxuXHRcdHtcclxuXHRcdFx0YmFzZS5PbkNsb3NlZCgpO1xyXG5cdFx0XHRfdGhlbWVWaXNpYmxlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Hb3RGb2N1cygpXHJcblx0XHR7XHJcblx0XHRcdGlmKENvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFN0eWxlLk9wYWNpdHkgPSBcIjFcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNlLk9uR290Rm9jdXMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkxvc3RGb2N1cygpXHJcblx0XHR7XHJcblx0XHRcdGlmKENvbnRlbnQgIT0gbnVsbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdFN0eWxlLk9wYWNpdHkgPSBcIjAuNVwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdGJhc2UuT25Mb3N0Rm9jdXMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwdWJsaWMgVGhlbWVGb3JtKClcclxuXHRcdHtcclxuXHRcdFx0cHJldlRoZW1lID0gU2V0dGluZ3MuQWN0aXZlVGhlbWU7XHJcblx0XHRcdGN1cnJlbnRUaGVtZSA9IEpzb25Db252ZXJ0LkRlc2VyaWFsaXplT2JqZWN0PFRoZW1lPihKc29uQ29udmVydC5TZXJpYWxpemVPYmplY3QocHJldlRoZW1lLCBuZXcgSnNvblNlcmlhbGl6ZXJTZXR0aW5ncygpIHsgVHlwZU5hbWVIYW5kbGluZyA9IFR5cGVOYW1lSGFuZGxpbmcuT2JqZWN0cyB9KSwgbmV3IEpzb25TZXJpYWxpemVyU2V0dGluZ3MoKSB7IFR5cGVOYW1lSGFuZGxpbmcgPSBUeXBlTmFtZUhhbmRsaW5nLk9iamVjdHMgfSk7XHJcblxyXG5cdFx0XHRTZXR0aW5ncy5BY3RpdmVUaGVtZSA9IGN1cnJlbnRUaGVtZTtcclxuXHRcdFx0XHJcblx0XHRcdF9idXR0b25Db2xsZWN0aW9uID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFNpbXBsZURpYWxvZ0J1dHRvbj4oKSwoX28yKT0+e19vMi5BZGQobmV3IFNpbXBsZURpYWxvZ0J1dHRvbih0aGlzLCBEaWFsb2dSZXN1bHRFbnVtLkNhbmNlbCkgeyBUZXh0ID0gXCJDYW5jZWxcIiwgTG9jYXRpb24gPSBuZXcgVmVjdG9yMihcIigxMDAlIC0gODVweClcIiwgXCIoMTAwJSAtIDM1cHgpXCIpLCBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRTZXR0aW5ncy5BY3RpdmVUaGVtZSA9IHByZXZUaGVtZTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLkNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdH19KTtfbzIuQWRkKG5ldyBTaW1wbGVEaWFsb2dCdXR0b24odGhpcywgRGlhbG9nUmVzdWx0RW51bS5PSykgeyBUZXh0ID0gXCJPS1wiLCBMb2NhdGlvbiA9IG5ldyBWZWN0b3IyKFwiKDEwMCUgLSAxNzBweClcIiwgXCIoMTAwJSAtIDM1cHgpXCIpLCBJdGVtQ2xpY2sgPSAoZXYpID0+IHtcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFNldHRpbmdzLkFwcGx5QWN0aXZlVGhlbWUoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLkNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdH19KTtyZXR1cm4gX28yO30pOyAgICAgICAgICAgIFxyXG5cdFx0XHRCdXR0b25TZWN0aW9uLkFwcGVuZENoaWxkcmVuVGFiSW5kZXgoX2J1dHRvbkNvbGxlY3Rpb24uVG9BcnJheSgpKTtcclxuXHJcblx0XHRcdGludCBsZW5ndGggPSBjdXJyZW50VGhlbWUuQ29sb3JzLkxlbmd0aDtcclxuXHRcdFx0aW50IHkgPSAyMDtcclxuXHRcdFx0aW50IHggPSAyMDtcclxuXHJcblx0XHRcdHZhciBQYW5lbCA9IERpdigpO1xyXG5cdFx0XHRQYW5lbC5TdHlsZS5PdmVyZmxvd1kgPSBPdmVyZmxvdy5BdXRvO1xyXG5cdFx0XHRQYW5lbC5TZXRCb3VuZHMoMCwgMCwgXCIxMDAlXCIsIFwiKDEwMCUgLSA2MHB4KVwiKTtcclxuXHJcblx0XHRcdEJvZHkuU3R5bGUuQmFja2dyb3VuZENvbG9yID0gQ29sb3IuV2hpdGU7XHJcblxyXG5cdFx0XHRmb3IoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRQYW5lbC5BcHBlbmRDaGlsZChuZXcgQ29sb3JJbnB1dCgpIHsgVGV4dCA9IGN1cnJlbnRUaGVtZS5Db2xvcnNbaV0uVG9TdHJpbmcoKSwgVG9vbFRpcCA9IG5ldyBUb29sVGlwKFwiVGhpcyBpcyBhIGhlYWRpbmcgdGVzdC5cIiwgXCJUaGlzIGlzIGEgZGVzY3JpcHRpb24gdGVzdC5cIiksIE9uVGV4dENoYW5nZWQgPSAodHgpID0+IHtcclxuXHRcdFx0XHRcdHZhciBpbmRleCA9IHR4LkdldEF0dHJpYnV0ZWkoXCJpXCIpO1xyXG5cdFx0XHRcdFx0Y3VycmVudFRoZW1lLkNvbG9yc1tpbmRleF0gPSB0eC5UZXh0O1xyXG5cclxuXHRcdFx0XHRcdFNldHRpbmdzLkFwcGx5QWN0aXZlVGhlbWUoKTtcclxuXHRcdFx0XHR9IH0uXHJcblx0XHRcdFx0U2V0QXR0cmlidXRlKFwiaVwiLCBpKS5cclxuXHRcdFx0XHRTZXRCb3VuZHMoeCwgeSwgOTUsIDIwKSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0eCArPSAxMDA7XHJcblxyXG5cdFx0XHRcdGlmKGkgJSAyICE9IDApXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0eSArPSAzMDtcclxuXHRcdFx0XHRcdHggPSAyMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdEJvZHkuQXBwZW5kQ2hpbGQoUGFuZWwpO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5TaXplID0gbmV3IFZlY3RvcjIoMjUwLCAzMDApO1xyXG5cdFx0XHR0aGlzLlRleHQgPSBcIlRoZW1lIEZvcm0gRWRpdG9yXCI7XHJcblxyXG5cdFx0XHRBbGxvd01vdmVDaGFuZ2UgPSB0cnVlO1xyXG5cdFx0XHRBbGxvd1NpemVDaGFuZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRcdFNob3dDbG9zZSA9IGZhbHNlO1xyXG5cdFx0XHRTaG93TWF4aW1pemUgPSBmYWxzZTtcclxuXHRcdFx0U2hvd01pbmltaXplID0gZmFsc2U7XHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiJdCn0K
